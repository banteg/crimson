/* Decompiled from: crimsonland.exe */

/* console_input_clear @ 00401030 */

/* clears console input buffer */

void console_input_clear(void)

{
  console_input_ready = 0;
  DAT_0047ea54 = 0;
  DAT_0047e448._0_1_ = 0;
  return;
}



/* console_input_buffer @ 00401050 */

/* returns console input buffer pointer */

char * console_input_buffer(void)

{
  return (char *)&DAT_0047e448;
}



/* console_input_poll @ 00401060 */

/* polls text input and updates console buffer */

int console_input_poll(void)

{
  int iVar1;
  
  iVar1 = (**(code **)(*grim_interface_ptr + 0x50))();
  if (console_input_enabled != '\0') {
    if ((iVar1 != 0) && (console_input_ready == '\0')) {
      if (iVar1 == 0xd) {
        console_input_ready = 1;
        *(undefined1 *)((int)&DAT_0047e448 + DAT_0047ea54) = 0;
        DAT_0047ea54 = DAT_0047ea54 + 1;
        return 0;
      }
      if (iVar1 == 8) {
        if (0 < DAT_0047ea54) {
          DAT_0047ea54 = DAT_0047ea54 + -1;
        }
        *(undefined1 *)((int)&DAT_0047e448 + DAT_0047ea54) = 0;
        return 0;
      }
      *(char *)((int)&DAT_0047e448 + DAT_0047ea54) = (char)iVar1;
      iVar1 = DAT_0047ea54 + 1;
      if (0x3ff < DAT_0047ea54 + 1) {
        iVar1 = DAT_0047ea54;
      }
      DAT_0047ea54 = iVar1;
      *(undefined1 *)((int)&DAT_0047e448 + iVar1) = 0;
    }
    iVar1 = 0;
  }
  return iVar1;
}



/* FUN_004010f0 @ 004010f0 */

void FUN_004010f0(undefined4 param_1,undefined4 param_2,int param_3,undefined *param_4)

{
  if (-1 < param_3 + -1) {
    do {
      (*(code *)param_4)();
      param_3 = param_3 + -1;
    } while (param_3 != 0);
  }
  return;
}



/* FUN_00401120 @ 00401120 */

undefined * __cdecl FUN_00401120(int param_1)

{
  if (((0 < DAT_0047f4cc) && (0 < param_1)) && (param_1 < DAT_0047f4cc)) {
    return (undefined *)(&DAT_0047ea60)[param_1];
  }
  return PTR_DAT_00471158;
}



/* FUN_00401150 @ 00401150 */

undefined4 FUN_00401150(void)

{
  return DAT_0047f4cc;
}



/* FUN_00401170 @ 00401170 */

void FUN_00401170(void)

{
  FUN_00401560(&console_log_queue);
  return;
}



/* FUN_00401180 @ 00401180 */

void FUN_00401180(void)

{
  crt_atexit(&LAB_00401190);
  return;
}



/* FUN_004011f0 @ 004011f0 */

undefined4 * __thiscall FUN_004011f0(void *this,byte param_1)

{
  if (*(void **)this != (void *)0x0) {
    crt_free(*(void **)this);
  }
  *(undefined4 *)this = 0;
  if (*(void **)((int)this + 4) != (void *)0x0) {
    FUN_004011f0(*(void **)((int)this + 4),1);
  }
  *(undefined4 *)((int)this + 4) = 0;
  if ((param_1 & 1) != 0) {
    crt_free(this);
  }
  return this;
}



/* FUN_00401560 @ 00401560 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

int * __fastcall FUN_00401560(int *param_1)

{
  undefined4 *puVar1;
  char *pcVar2;
  char *unaff_EDI;
  
  *(undefined1 *)(param_1 + 3) = 1;
  param_1[6] = 300;
  param_1[7] = -0x3c6a0000;
  param_1[9] = 0;
  param_1[2] = 0;
  puVar1 = operator_new(0x24);
  if (puVar1 == (undefined4 *)0x0) {
    puVar1 = (undefined4 *)0x0;
  }
  else {
    puVar1[6] = 0;
    puVar1[7] = 0;
    puVar1[8] = 0;
    pcVar2 = strdup_malloc(s_version_00471264);
    *puVar1 = pcVar2;
    puVar1[1] = 0;
    puVar1[2] = 0;
    puVar1[3] = 0;
    puVar1[4] = 0;
    puVar1[5] = 0;
  }
  *param_1 = (int)puVar1;
  puVar1[3] = 0x3f800000;
  pcVar2 = strdup_malloc(&DAT_00471260);
  *(char **)(*param_1 + 0x10) = pcVar2;
  *(undefined4 *)(*param_1 + 0x14) = 1;
  DAT_0047f4d0 = console_register_cvar(param_1,s_con_monoFont_0047124c,&DAT_0047125c,unaff_EDI);
  DAT_0047eaa0 = 0;
  _DAT_0047eaa4 = 0;
  _DAT_0047eaa8 = 0;
  _DAT_0047eaac = 0;
  DAT_0047f4cc = 0;
  console_register_command(param_1,(uint *)s_cmdlist_00471244,&LAB_00401370);
  console_register_command(param_1,(uint *)&DAT_0047123c,&LAB_004013c0);
  console_register_command(param_1,(uint *)&DAT_00471234,&LAB_00401410);
  console_register_command(param_1,(uint *)&DAT_00471230,&LAB_00401510);
  console_register_command(param_1,(uint *)&DAT_00471228,&LAB_00401240);
  console_register_command(param_1,(uint *)s_clear_00471220,&LAB_004011a0);
  console_register_command(param_1,(uint *)s_extendconsole_00471210,&LAB_00401340);
  console_register_command(param_1,(uint *)s_minimizeconsole_00471200,&LAB_00401360);
  console_register_command(param_1,(uint *)&DAT_004711f8,&LAB_00401250);
  puVar1 = operator_new(8);
  if (puVar1 == (undefined4 *)0x0) {
    puVar1 = (undefined4 *)0x0;
  }
  else {
    puVar1[1] = 0;
    *puVar1 = 0;
  }
  param_1[4] = (int)puVar1;
  pcVar2 = strdup_malloc(&DAT_0047f4d8);
  *(char **)param_1[4] = pcVar2;
  param_1[5] = 0;
  return param_1;
}



/* FUN_004016e0 @ 004016e0 */

void __fastcall FUN_004016e0(undefined4 *param_1)

{
  undefined4 *puVar1;
  
  puVar1 = (undefined4 *)param_1[2];
  if (puVar1 != (undefined4 *)0x0) {
    if ((void *)*puVar1 != (void *)0x0) {
      crt_free((void *)*puVar1);
    }
    *puVar1 = 0;
    if ((void *)puVar1[1] != (void *)0x0) {
      FUN_004011f0((void *)puVar1[1],1);
    }
    puVar1[1] = 0;
    crt_free(puVar1);
  }
  puVar1 = (undefined4 *)*param_1;
  param_1[2] = 0;
  if (puVar1 != (undefined4 *)0x0) {
    if ((void *)*puVar1 != (void *)0x0) {
      crt_free((void *)*puVar1);
    }
    *puVar1 = 0;
    crt_free(puVar1);
  }
  puVar1 = (undefined4 *)param_1[1];
  *param_1 = 0;
  if (puVar1 != (undefined4 *)0x0) {
    if ((void *)*puVar1 != (void *)0x0) {
      crt_free((void *)*puVar1);
    }
    *puVar1 = 0;
    crt_free(puVar1);
  }
  puVar1 = (undefined4 *)param_1[4];
  param_1[1] = 0;
  if (puVar1 != (undefined4 *)0x0) {
    if ((void *)*puVar1 != (void *)0x0) {
      crt_free((void *)*puVar1);
    }
    *puVar1 = 0;
    if ((void *)puVar1[1] != (void *)0x0) {
      FUN_004011f0((void *)puVar1[1],1);
    }
    puVar1[1] = 0;
    crt_free(puVar1);
  }
  param_1[4] = 0;
  return;
}



/* console_push_line @ 004017a0 */

/* pushes line into console queue */

void __thiscall console_push_line(void *this,uint *param_1)

{
  int iVar1;
  int iVar2;
  int iVar3;
  undefined4 *puVar4;
  char *pcVar5;
  
  if (*(char *)((int)this + 0xc) != '\0') {
    if (*(int *)((int)this + 0x20) == 0x1000) {
      iVar1 = *(int *)(*(int *)((int)this + 8) + 4);
      iVar2 = *(int *)(iVar1 + 4);
      iVar3 = *(int *)((int)this + 8);
      while (iVar2 != 0) {
        iVar2 = *(int *)(*(int *)(iVar1 + 4) + 4);
        iVar3 = iVar1;
        iVar1 = *(int *)(iVar1 + 4);
      }
      puVar4 = *(undefined4 **)(iVar3 + 4);
      if (puVar4 != (undefined4 *)0x0) {
        if ((void *)*puVar4 != (void *)0x0) {
          crt_free((void *)*puVar4);
        }
        *puVar4 = 0;
        if ((void *)puVar4[1] != (void *)0x0) {
          FUN_004011f0((void *)puVar4[1],1);
        }
        puVar4[1] = 0;
        crt_free(puVar4);
      }
      *(undefined4 *)(iVar3 + 4) = 0;
      *(int *)((int)this + 0x20) = *(int *)((int)this + 0x20) + -1;
    }
    puVar4 = operator_new(8);
    if (puVar4 == (undefined4 *)0x0) {
      puVar4 = (undefined4 *)0x0;
    }
    else {
      puVar4[1] = 0;
      *puVar4 = 0;
    }
    pcVar5 = strdup_malloc((char *)param_1);
    *puVar4 = pcVar5;
    puVar4[1] = *(undefined4 *)((int)this + 8);
    *(undefined4 **)((int)this + 8) = puVar4;
    *(int *)((int)this + 0x20) = *(int *)((int)this + 0x20) + 1;
  }
  return;
}



/* console_printf @ 00401870 */

/* formats then pushes line */

void __cdecl console_printf(void *param_1,byte *param_2)

{
  if (*(char *)((int)param_1 + 0xc) != '\0') {
    crt_vsprintf(&DAT_0047f2cc,(char *)param_2,&stack0x0000000c);
    console_push_line(param_1,(uint *)&DAT_0047f2cc);
  }
  return;
}



/* FUN_004018b0 @ 004018b0 */

void __thiscall FUN_004018b0(void *this,undefined1 param_1)

{
  *(undefined1 *)((int)this + 0x28) = param_1;
  console_input_enabled = param_1;
  (**(code **)(*grim_interface_ptr + 0x4c))();
  return;
}



/* FUN_004018d0 @ 004018d0 */

void __fastcall FUN_004018d0(int param_1)

{
  int iVar1;
  char cVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  char *pcVar8;
  char *pcVar9;
  
  iVar7 = 0;
  iVar1 = *(int *)(param_1 + 0x14) + -1;
  puVar3 = *(undefined4 **)(param_1 + 0x10);
  puVar4 = *(undefined4 **)(param_1 + 0x10);
  if (0 < iVar1) {
    do {
      puVar4 = (undefined4 *)puVar3[1];
      if (puVar4 == (undefined4 *)0x0) {
        *(int *)(param_1 + 0x14) = iVar7;
        puVar4 = puVar3;
        break;
      }
      iVar7 = iVar7 + 1;
      puVar3 = puVar4;
    } while (iVar7 < iVar1);
  }
  uVar5 = 0xffffffff;
  pcVar8 = (char *)*puVar4;
  do {
    pcVar9 = pcVar8;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar9 = pcVar8 + 1;
    cVar2 = *pcVar8;
    pcVar8 = pcVar9;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  pcVar8 = pcVar9 + -uVar5;
  pcVar9 = (char *)&DAT_0047e448;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar9 = *(undefined4 *)pcVar8;
    pcVar8 = pcVar8 + 4;
    pcVar9 = pcVar9 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar9 = *pcVar8;
    pcVar8 = pcVar8 + 1;
    pcVar9 = pcVar9 + 1;
  }
  uVar5 = 0xffffffff;
  pcVar8 = (char *)&DAT_0047e448;
  do {
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    cVar2 = *pcVar8;
    pcVar8 = pcVar8 + 1;
  } while (cVar2 != '\0');
  DAT_0047ea54 = ~uVar5 - 1;
  console_input_ready = 0;
  return;
}



/* console_exec_line @ 00401940 */

/* executes a console command or cvar assignment from a line */

void __thiscall console_exec_line(void *this,void *console_state,char *line)

{
  void *pvVar1;
  void *pvVar2;
  char *pcVar3;
  char *unaff_EDI;
  double dVar4;
  char *str;
  
  console_tokenize_line(console_state);
  if (DAT_0047f4cc != 0) {
    pvVar1 = console_cvar_find(this,DAT_0047ea60,unaff_EDI);
    pvVar2 = console_command_find(this,DAT_0047ea60,unaff_EDI);
    if (pvVar1 == (void *)0x0) {
      if (pvVar2 == (void *)0x0) {
        console_printf(this,(byte *)s_Unknown_command___s__0047126c);
        return;
      }
      (**(code **)((int)pvVar2 + 8))();
      return;
    }
    if (DAT_0047f4cc == 2) {
      if (*(void **)((int)pvVar1 + 0x10) != (void *)0x0) {
        crt_free(*(void **)((int)pvVar1 + 0x10));
      }
      *(undefined4 *)((int)pvVar1 + 0x10) = 0;
      str = DAT_0047ea64;
      pcVar3 = strdup_malloc(DAT_0047ea64);
      *(char **)((int)pvVar1 + 0x10) = pcVar3;
      dVar4 = crt_atof_l(DAT_0047ea64,DAT_0047ea64,str);
      *(float *)((int)pvVar1 + 0xc) = (float)dVar4;
      if (*(char *)((int)this + 0xc) != '\0') {
        console_printf(this,(byte *)s___s__set_to___s____ff__00471298);
        return;
      }
    }
    else if (*(char *)((int)this + 0xc) != '\0') {
      console_printf(this,(byte *)s___s__is___s____ff__00471284);
      return;
    }
  }
  return;
}



/* FUN_00401a40 @ 00401a40 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall FUN_00401a40(void *param_1)

{
  byte bVar1;
  char cVar2;
  int iVar3;
  char *pcVar4;
  byte *pbVar5;
  undefined4 *puVar6;
  uint uVar7;
  uint uVar8;
  byte *pbVar9;
  char *pcVar10;
  char *pcVar11;
  bool bVar12;
  float10 fVar13;
  char *pcVar14;
  
  if (*(char *)((int)param_1 + 0x28) == '\0') {
    _DAT_0047115c = _DAT_0047ea48 * 3.5 + _DAT_0047115c;
    if (1.0 < _DAT_0047115c) {
      _DAT_0047115c = 1.0;
    }
    fVar13 = (float10)fsin(((float10)1.0 - (float10)_DAT_0047115c) * (float10)1.5707964);
    *(float *)((int)param_1 + 0x1c) =
         (float)(fVar13 * (float10)*(int *)((int)param_1 + 0x18) -
                (float10)*(int *)((int)param_1 + 0x18));
    return;
  }
  _DAT_0047115c = _DAT_0047115c - _DAT_0047ea48 * 3.5;
  if (_DAT_0047115c < 0.0) {
    _DAT_0047115c = 0.0;
  }
  fVar13 = (float10)fsin(((float10)1.0 - (float10)_DAT_0047115c) * (float10)1.5707964);
  *(float *)((int)param_1 + 0x1c) =
       (float)(fVar13 * (float10)*(int *)((int)param_1 + 0x18) -
              (float10)*(int *)((int)param_1 + 0x18));
  console_input_poll();
  cVar2 = (**(code **)(*grim_interface_ptr + 0x44))(0x1d);
  if (cVar2 == '\0') {
    cVar2 = (**(code **)(*grim_interface_ptr + 0x44))(0x9d);
    if (cVar2 != '\0') goto LAB_00401ac4;
LAB_00401add:
    cVar2 = (**(code **)(*grim_interface_ptr + 0x48))(200);
    if (cVar2 != '\0') {
      *(int *)((int)param_1 + 0x14) = *(int *)((int)param_1 + 0x14) + 1;
      FUN_004018d0((int)param_1);
    }
  }
  else {
LAB_00401ac4:
    cVar2 = (**(code **)(*grim_interface_ptr + 0x48))(200);
    if (cVar2 == '\0') goto LAB_00401add;
    *(int *)((int)param_1 + 0x24) = *(int *)((int)param_1 + 0x24) + 1;
  }
  cVar2 = (**(code **)(*grim_interface_ptr + 0x44))(0x1d);
  if (cVar2 == '\0') {
    cVar2 = (**(code **)(*grim_interface_ptr + 0x44))(0x9d);
    if (cVar2 != '\0') goto LAB_00401b24;
LAB_00401b3d:
    cVar2 = (**(code **)(*grim_interface_ptr + 0x48))(0xd0);
    if (cVar2 != '\0') {
      iVar3 = *(int *)((int)param_1 + 0x14) + -1;
      *(int *)((int)param_1 + 0x14) = iVar3;
      if (iVar3 < 0) {
        *(undefined4 *)((int)param_1 + 0x14) = 0;
      }
      FUN_004018d0((int)param_1);
    }
  }
  else {
LAB_00401b24:
    cVar2 = (**(code **)(*grim_interface_ptr + 0x48))(0xd0);
    if (cVar2 == '\0') goto LAB_00401b3d;
    *(int *)((int)param_1 + 0x24) = *(int *)((int)param_1 + 0x24) + -1;
  }
  cVar2 = (**(code **)(*grim_interface_ptr + 0x48))(0xcb);
  if ((cVar2 != '\0') && (DAT_0047ea54 = DAT_0047ea54 + -1, DAT_0047ea54 < 0)) {
    DAT_0047ea54 = 0;
  }
  cVar2 = (**(code **)(*grim_interface_ptr + 0x48))(0xcd);
  if (cVar2 != '\0') {
    uVar7 = 0xffffffff;
    DAT_0047ea54 = DAT_0047ea54 + 1;
    pcVar14 = (char *)&DAT_0047e448;
    do {
      if (uVar7 == 0) break;
      uVar7 = uVar7 - 1;
      cVar2 = *pcVar14;
      pcVar14 = pcVar14 + 1;
    } while (cVar2 != '\0');
    if ((int)(~uVar7 - 1) < DAT_0047ea54) {
      uVar7 = 0xffffffff;
      pcVar14 = (char *)&DAT_0047e448;
      do {
        if (uVar7 == 0) break;
        uVar7 = uVar7 - 1;
        cVar2 = *pcVar14;
        pcVar14 = pcVar14 + 1;
      } while (cVar2 != '\0');
      DAT_0047ea54 = ~uVar7 - 1;
    }
  }
  cVar2 = (**(code **)(*grim_interface_ptr + 0x48))(0xc9);
  if (cVar2 != '\0') {
    *(int *)((int)param_1 + 0x24) = *(int *)((int)param_1 + 0x24) + 2;
  }
  cVar2 = (**(code **)(*grim_interface_ptr + 0x48))(0xd1);
  if ((cVar2 != '\0') &&
     (iVar3 = *(int *)((int)param_1 + 0x24) + -2, *(int *)((int)param_1 + 0x24) = iVar3, iVar3 < 0))
  {
    *(undefined4 *)((int)param_1 + 0x24) = 0;
  }
  cVar2 = (**(code **)(*grim_interface_ptr + 0x48))(199);
  if (cVar2 != '\0') {
    *(int *)((int)param_1 + 0x24) = *(int *)((int)param_1 + 0x24) + 0x14;
  }
  cVar2 = (**(code **)(*grim_interface_ptr + 0x48))(0xcf);
  if (cVar2 != '\0') {
    *(undefined4 *)((int)param_1 + 0x24) = 0;
  }
  pcVar14 = (char *)0xf;
  cVar2 = (**(code **)(*grim_interface_ptr + 0x48))();
  if (cVar2 != '\0') {
    pcVar4 = console_input_buffer();
    console_tokenize_line(pcVar4);
    pcVar4 = console_input_buffer();
    pcVar4 = console_cvar_autocomplete(param_1,pcVar4,pcVar14);
    if (pcVar4 == (char *)0x0) {
      pcVar4 = console_input_buffer();
      pcVar4 = console_command_autocomplete(param_1,pcVar4,pcVar14);
      if (pcVar4 == (char *)0x0) goto LAB_00401cb5;
    }
    uVar7 = 0xffffffff;
    pcVar10 = pcVar4;
    do {
      pcVar11 = pcVar10;
      if (uVar7 == 0) break;
      uVar7 = uVar7 - 1;
      pcVar11 = pcVar10 + 1;
      cVar2 = *pcVar10;
      pcVar10 = pcVar11;
    } while (cVar2 != '\0');
    uVar7 = ~uVar7;
    pcVar10 = pcVar11 + -uVar7;
    pcVar11 = (char *)&DAT_0047e448;
    for (uVar8 = uVar7 >> 2; uVar8 != 0; uVar8 = uVar8 - 1) {
      *(undefined4 *)pcVar11 = *(undefined4 *)pcVar10;
      pcVar10 = pcVar10 + 4;
      pcVar11 = pcVar11 + 4;
    }
    for (uVar7 = uVar7 & 3; uVar7 != 0; uVar7 = uVar7 - 1) {
      *pcVar11 = *pcVar10;
      pcVar10 = pcVar10 + 1;
      pcVar11 = pcVar11 + 1;
    }
    uVar7 = 0xffffffff;
    do {
      if (uVar7 == 0) break;
      uVar7 = uVar7 - 1;
      cVar2 = *pcVar4;
      pcVar4 = pcVar4 + 1;
    } while (cVar2 != '\0');
    DAT_0047ea54 = ~uVar7 - 1;
  }
LAB_00401cb5:
  if (console_input_ready == '\0') {
    console_input_buffer();
    (**(code **)(*grim_interface_ptr + 0x48))(0x1c);
    return;
  }
  pbVar5 = (byte *)console_input_buffer();
  pbVar9 = (byte *)**(undefined4 **)((int)param_1 + 0x10);
  do {
    bVar1 = *pbVar9;
    bVar12 = bVar1 < *pbVar5;
    if (bVar1 != *pbVar5) {
LAB_00401cf1:
      iVar3 = (1 - (uint)bVar12) - (uint)(bVar12 != 0);
      goto LAB_00401cf6;
    }
    if (bVar1 == 0) break;
    bVar1 = pbVar9[1];
    bVar12 = bVar1 < pbVar5[1];
    if (bVar1 != pbVar5[1]) goto LAB_00401cf1;
    pbVar9 = pbVar9 + 2;
    pbVar5 = pbVar5 + 2;
  } while (bVar1 != 0);
  iVar3 = 0;
LAB_00401cf6:
  if (iVar3 != 0) {
    puVar6 = operator_new(8);
    if (puVar6 == (undefined4 *)0x0) {
      puVar6 = (undefined4 *)0x0;
    }
    else {
      puVar6[1] = 0;
      *puVar6 = 0;
    }
    pcVar4 = console_input_buffer();
    pcVar4 = strdup_malloc(pcVar4);
    *puVar6 = pcVar4;
    puVar6[1] = *(undefined4 *)((int)param_1 + 0x10);
    *(undefined4 **)((int)param_1 + 0x10) = puVar6;
  }
  *(undefined4 *)((int)param_1 + 0x14) = 0;
  console_input_buffer();
  console_printf(&console_log_queue,(byte *)s_>__s_004712b0);
  pcVar4 = console_input_buffer();
  console_exec_line(param_1,pcVar4,pcVar14);
  console_input_clear();
  (**(code **)(*grim_interface_ptr + 0x48))(0x1c);
  return;
}



/* FUN_00401dd0 @ 00401dd0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __fastcall FUN_00401dd0(int param_1)

{
  int iVar1;
  char *pcVar2;
  int iVar3;
  int iVar4;
  undefined4 *puVar5;
  float10 fVar6;
  undefined *puVar7;
  float fVar8;
  float fStack_4c;
  float fStack_48;
  undefined1 *puStack_44;
  undefined4 uStack_40;
  undefined4 uStack_3c;
  float fStack_38;
  undefined4 uStack_34;
  float fStack_30;
  float local_1c;
  
  iVar3 = *(int *)(param_1 + 0x18);
  if ((float)-iVar3 < *(float *)(param_1 + 0x1c)) {
    puVar5 = *(undefined4 **)(param_1 + 8);
    iVar1 = ((int)(iVar3 + (iVar3 >> 0x1f & 0xfU)) >> 4) + -2;
    if (*(int *)(param_1 + 0x20) <= iVar1) {
      iVar1 = *(int *)(param_1 + 0x20);
    }
    local_1c = ((float)iVar3 + *(float *)(param_1 + 0x1c)) / (float)iVar3;
    if (local_1c <= 1.0) {
      if (local_1c < 0.0) {
        local_1c = 0.0;
      }
    }
    else {
      local_1c = 1.0;
    }
    fStack_30 = local_1c;
    uStack_34 = 0x3f19999a;
    fStack_38 = 0.6;
    uStack_3c = 0x3f19999a;
    uStack_40 = 0x401e7d;
    (**(code **)(*grim_interface_ptr + 0x114))();
    uStack_40 = 0;
    puStack_44 = (undefined1 *)0x401e8d;
    (**(code **)(*grim_interface_ptr + 0xfc))();
    puStack_44 = &stack0xffffffdc;
    fStack_48 = (float)*(int *)(param_1 + 0x18);
    fStack_4c = screen_width_f;
    (**(code **)(*grim_interface_ptr + 0xd0))(&stack0xffffffd4);
    (**(code **)(*grim_interface_ptr + 0x114))
              (0x3dcccccd,0x3f19999a,0x3f800000,
               ((float)*(int *)(param_1 + 0x18) + *(float *)(param_1 + 0x1c)) /
               (float)*(int *)(param_1 + 0x18));
    fStack_48 = (float)*(int *)(param_1 + 0x18) + *(float *)(param_1 + 0x1c);
    puStack_44 = (undefined1 *)0x3e600000;
    uStack_40 = 0x3e880000;
    uStack_3c = 0x3ebc0000;
    fStack_4c = 0.0;
    fStack_38 = fStack_48 / (float)*(int *)(param_1 + 0x18);
    fStack_48 = fStack_48 - 4.0;
    (**(code **)(*grim_interface_ptr + 0xd0))(&fStack_4c,screen_width_f,0x40800000,&puStack_44);
    (**(code **)(*grim_interface_ptr + 0xf0))();
    (**(code **)(*grim_interface_ptr + 0x20))(0x15,2);
    (**(code **)(*grim_interface_ptr + 0x20))(0x18,0x3f000000);
    (**(code **)(*grim_interface_ptr + 0x114))
              (0x3f800000,0x3f800000,0x3f800000,
               (((float)*(int *)(param_1 + 0x18) + *(float *)(param_1 + 0x1c)) /
               (float)*(int *)(param_1 + 0x18)) * 0.3);
    (**(code **)(*grim_interface_ptr + 0x144))
              (screen_width_f - 210.0,
               ((float)*(int *)(param_1 + 0x18) + *(float *)(param_1 + 0x1c)) - 18.0,
               s_Crimsonland_1_9_93_004712c4);
    (**(code **)(*grim_interface_ptr + 0x114))
              (0x3f800000,0x3f800000,0x3f800000,
               (((float)*(int *)(param_1 + 0x18) + *(float *)(param_1 + 0x1c)) /
               (float)*(int *)(param_1 + 0x18)) * 0.5);
    fVar8 = 1.0;
    (**(code **)(*grim_interface_ptr + 0x114))
              (0x3f800000,0x3f800000,0x3f800000,
               ((float)*(int *)(param_1 + 0x18) + *(float *)(param_1 + 0x1c)) /
               (float)*(int *)(param_1 + 0x18));
    if (*(float *)(DAT_0047f4d0 + 0xc) == 0.0) {
      iVar3 = *grim_interface_ptr;
      pcVar2 = console_input_buffer();
      (**(code **)(iVar3 + 0x148))
                (grim_interface_ptr,0x41200000,
                 (float)((iVar1 + 1) * 0x10) + *(float *)(param_1 + 0x1c),&DAT_004712bc,pcVar2);
    }
    else {
      (**(code **)(*grim_interface_ptr + 0x13c))
                (0x41200000,(float)((iVar1 + 1) * 0x10) + *(float *)(param_1 + 0x1c),
                 &console_prompt_string);
      iVar3 = *grim_interface_ptr;
      pcVar2 = console_input_buffer();
      (**(code **)(iVar3 + 0x13c))(0x41d00000,fVar8 + *(float *)(param_1 + 0x1c),pcVar2);
    }
    (**(code **)(*grim_interface_ptr + 0x114))
              (0x3f19999a,0x3f19999a,0x3f333333,
               ((float)*(int *)(param_1 + 0x18) + *(float *)(param_1 + 0x1c)) /
               (float)*(int *)(param_1 + 0x18));
    for (iVar3 = *(int *)(param_1 + 0x24); 0 < iVar3; iVar3 = iVar3 + -1) {
      if (puVar5 == (undefined4 *)0x0) goto LAB_004021ca;
      puVar5 = (undefined4 *)puVar5[1];
    }
    if (puVar5 != (undefined4 *)0x0) {
      iVar3 = iVar1 << 4;
      do {
        if (iVar1 < 0) break;
        if (*(float *)(DAT_0047f4d0 + 0xc) == 0.0) {
          (**(code **)(*grim_interface_ptr + 0x144))
                    (0x41200000,(float)iVar3 + *(float *)(param_1 + 0x1c),*puVar5);
        }
        else {
          (**(code **)(*grim_interface_ptr + 0x13c))();
        }
        puVar5 = (undefined4 *)puVar5[1];
        iVar1 = iVar1 + -1;
        iVar3 = iVar3 + -0x10;
      } while (puVar5 != (undefined4 *)0x0);
    }
LAB_004021ca:
    iVar3 = *(int *)(param_1 + 0x18);
    iVar4 = ((int)(iVar3 + (iVar3 >> 0x1f & 0xfU)) >> 4) + -2;
    iVar1 = *(int *)(param_1 + 0x20);
    if (iVar4 < *(int *)(param_1 + 0x20)) {
      iVar1 = iVar4;
    }
    fsin((float10)_DAT_0047ea4c * (float10)3.0);
    fVar6 = (float10)FUN_00461140();
    if (fVar6 < (float10)0.2) {
      fVar6 = (float10)0.2;
    }
    fVar8 = (float)((((float10)iVar3 + (float10)*(float *)(param_1 + 0x1c)) / (float10)iVar3) *
                   fVar6);
    if (fVar8 <= 1.0) {
      if (fVar8 < 0.0) {
        fVar8 = 0.0;
      }
    }
    else {
      fVar8 = 1.0;
    }
    (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,fVar8);
    if (*(float *)(DAT_0047f4d0 + 0xc) == 0.0) {
      iVar3 = *grim_interface_ptr;
      puVar7 = &DAT_004712b8;
      fVar8 = (float)((iVar1 + 1) * 0x10) + *(float *)(param_1 + 0x1c) + 2.0;
      pcVar2 = console_input_buffer();
      iVar1 = (**(code **)(iVar3 + 0x14c))(pcVar2,fVar8,puVar7);
      (**(code **)(iVar3 + 0x144))((float)iVar1 + 16.0);
    }
    else {
      (**(code **)(*grim_interface_ptr + 0x13c))
                ((float)(DAT_0047ea54 << 3) + 26.0,
                 (float)((iVar1 + 1) * 0x10) + *(float *)(param_1 + 0x1c) + 2.0,&DAT_004712b8);
    }
    (**(code **)(*grim_interface_ptr + 0x20))(0x15,2);
  }
  return;
}



/* console_register_cvar @ 00402350 */

/* registers or updates a console cvar entry (stores string + float value) */

void * __thiscall console_register_cvar(void *this,void *console_state,char *name,char *value)

{
  int iVar1;
  int iVar2;
  void *pvVar3;
  char *pcVar4;
  undefined4 *puVar5;
  char *pcVar6;
  void *this_00;
  char *unaff_EDI;
  double dVar7;
  
  pvVar3 = console_cvar_find(this,console_state,unaff_EDI);
  if (pvVar3 != (void *)0x0) {
    if (*(void **)((int)pvVar3 + 0x10) != (void *)0x0) {
      crt_free(*(void **)((int)pvVar3 + 0x10));
    }
    *(undefined4 *)((int)pvVar3 + 0x10) = 0;
    pcVar6 = name;
    pcVar4 = strdup_malloc(name);
    *(char **)((int)pvVar3 + 0x10) = pcVar4;
    dVar7 = crt_atof_l(this_00,name,pcVar6);
    *(float *)((int)pvVar3 + 0xc) = (float)dVar7;
    return pvVar3;
  }
  iVar1 = *(int *)this;
  if (iVar1 == 0) {
    puVar5 = operator_new(0x24);
    if (puVar5 == (undefined4 *)0x0) {
      puVar5 = (undefined4 *)0x0;
    }
    else {
      puVar5[6] = 0;
      puVar5[7] = 0;
      puVar5[8] = 0;
      pcVar6 = strdup_malloc(console_state);
      *puVar5 = pcVar6;
      puVar5[1] = 0;
      puVar5[2] = 0;
      puVar5[3] = 0;
      puVar5[4] = 0;
      puVar5[5] = 0;
    }
    *(undefined4 **)this = puVar5;
    pcVar6 = name;
    pcVar4 = strdup_malloc(name);
    pvVar3 = *(void **)this;
    *(char **)((int)pvVar3 + 0x10) = pcVar4;
    dVar7 = crt_atof_l(pvVar3,name,pcVar6);
    *(float *)(*(int *)this + 0xc) = (float)dVar7;
    return *(void **)this;
  }
  for (iVar2 = *(int *)(iVar1 + 4); iVar2 != 0; iVar2 = *(int *)(iVar2 + 4)) {
    iVar1 = iVar2;
  }
  puVar5 = operator_new(0x24);
  if (puVar5 == (undefined4 *)0x0) {
    puVar5 = (undefined4 *)0x0;
  }
  else {
    puVar5[6] = 0;
    puVar5[7] = 0;
    puVar5[8] = 0;
    pcVar6 = strdup_malloc(console_state);
    *puVar5 = pcVar6;
    puVar5[1] = 0;
    puVar5[2] = 0;
    puVar5[3] = 0;
    puVar5[4] = 0;
    puVar5[5] = 0;
  }
  *(undefined4 **)(iVar1 + 4) = puVar5;
  pcVar6 = name;
  pcVar4 = strdup_malloc(name);
  pvVar3 = *(void **)(iVar1 + 4);
  *(char **)((int)pvVar3 + 0x10) = pcVar4;
  dVar7 = crt_atof_l(pvVar3,name,pcVar6);
  *(float *)(*(int *)(iVar1 + 4) + 0xc) = (float)dVar7;
  return *(void **)(iVar1 + 4);
}



/* console_cvar_find @ 00402480 */

/* finds a cvar entry by name */

void * __thiscall console_cvar_find(void *this,void *console_state,char *name)

{
  byte bVar1;
  undefined4 *puVar2;
  byte *pbVar3;
  int iVar4;
  byte *pbVar5;
  bool bVar6;
  
  puVar2 = *(undefined4 **)this;
  do {
    if (puVar2 == (undefined4 *)0x0) {
      return (void *)0x0;
    }
    pbVar5 = (byte *)*puVar2;
    pbVar3 = console_state;
    do {
      bVar1 = *pbVar3;
      bVar6 = bVar1 < *pbVar5;
      if (bVar1 != *pbVar5) {
LAB_004024ba:
        iVar4 = (1 - (uint)bVar6) - (uint)(bVar6 != 0);
        goto LAB_004024bf;
      }
      if (bVar1 == 0) break;
      bVar1 = pbVar3[1];
      bVar6 = bVar1 < pbVar5[1];
      if (bVar1 != pbVar5[1]) goto LAB_004024ba;
      pbVar3 = pbVar3 + 2;
      pbVar5 = pbVar5 + 2;
    } while (bVar1 != 0);
    iVar4 = 0;
LAB_004024bf:
    if (iVar4 == 0) {
      return puVar2;
    }
    puVar2 = (undefined4 *)puVar2[1];
  } while( true );
}



/* console_cvar_unregister @ 004024e0 */

/* removes a cvar entry by name */

int __thiscall console_cvar_unregister(void *this,void *console_state,char *name)

{
  void *pvVar1;
  undefined4 uVar2;
  void *pvVar3;
  void *pvVar4;
  uint3 uVar5;
  char *unaff_ESI;
  
  pvVar4 = console_cvar_find(this,console_state,unaff_ESI);
  uVar5 = (uint3)((uint)pvVar4 >> 8);
  if (pvVar4 != (void *)0x0) {
    pvVar1 = *(void **)this;
    if (pvVar4 == pvVar1) {
      *(undefined4 *)this = *(undefined4 *)((int)pvVar1 + 4);
      return CONCAT31(uVar5,1);
    }
    while (pvVar3 = pvVar1, pvVar3 != (void *)0x0) {
      pvVar1 = *(void **)((int)pvVar3 + 4);
      if (*(void **)((int)pvVar3 + 4) == pvVar4) {
        uVar2 = *(undefined4 *)(*(int *)((int)pvVar3 + 4) + 4);
        *(undefined4 *)((int)pvVar3 + 4) = uVar2;
        return CONCAT31((int3)((uint)uVar2 >> 8),1);
      }
    }
  }
  return (uint)uVar5 << 8;
}



/* console_command_unregister @ 00402530 */

/* removes a console command entry by name */

int __thiscall console_command_unregister(void *this,void *console_state,char *name)

{
  void *pvVar1;
  undefined4 uVar2;
  void *pvVar3;
  void *pvVar4;
  uint3 uVar5;
  char *unaff_ESI;
  
  pvVar4 = console_command_find(this,console_state,unaff_ESI);
  uVar5 = (uint3)((uint)pvVar4 >> 8);
  if (pvVar4 != (void *)0x0) {
    pvVar1 = *(void **)((int)this + 4);
    if (pvVar4 == pvVar1) {
      *(undefined4 *)((int)this + 4) = *(undefined4 *)((int)pvVar1 + 4);
      return CONCAT31(uVar5,1);
    }
    while (pvVar3 = pvVar1, pvVar3 != (void *)0x0) {
      pvVar1 = *(void **)((int)pvVar3 + 4);
      if (*(void **)((int)pvVar3 + 4) == pvVar4) {
        uVar2 = *(undefined4 *)(*(int *)((int)pvVar3 + 4) + 4);
        *(undefined4 *)((int)pvVar3 + 4) = uVar2;
        return CONCAT31((int3)((uint)uVar2 >> 8),1);
      }
    }
  }
  return (uint)uVar5 << 8;
}



/* console_tokenize_line @ 00402580 */

/* splits a console line into tokens */

void console_tokenize_line(char *line)

{
  char cVar1;
  char *pcVar2;
  uint uVar3;
  uint uVar4;
  undefined4 *puVar5;
  char *pcVar6;
  int iVar7;
  
  DAT_0047f4cc = 0;
  iVar7 = DAT_0047f4cc;
  if (line != (char *)0x0) {
    uVar3 = 0xffffffff;
    pcVar2 = line;
    do {
      if (uVar3 == 0) break;
      uVar3 = uVar3 - 1;
      cVar1 = *pcVar2;
      pcVar2 = pcVar2 + 1;
    } while (cVar1 != '\0');
    if (((~uVar3 - 1 < 2) || (*line != '/')) || (line[1] != '/')) {
      uVar3 = 0xffffffff;
      do {
        pcVar2 = line;
        if (uVar3 == 0) break;
        uVar3 = uVar3 - 1;
        pcVar2 = line + 1;
        cVar1 = *line;
        line = pcVar2;
      } while (cVar1 != '\0');
      uVar3 = ~uVar3;
      pcVar2 = pcVar2 + -uVar3;
      pcVar6 = (char *)&DAT_0047eaa0;
      for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1) {
        *(undefined4 *)pcVar6 = *(undefined4 *)pcVar2;
        pcVar2 = pcVar2 + 4;
        pcVar6 = pcVar6 + 4;
      }
      for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
        *pcVar6 = *pcVar2;
        pcVar2 = pcVar2 + 1;
        pcVar6 = pcVar6 + 1;
      }
      pcVar2 = crt_strtok((char *)&DAT_0047eaa0,&DAT_004712d8);
      iVar7 = DAT_0047f4cc;
      if (pcVar2 != (char *)0x0) {
        iVar7 = 1;
        puVar5 = &DAT_0047ea64;
        DAT_0047ea60 = pcVar2;
        while (pcVar2 = crt_strtok((char *)0x0,&DAT_004712d8), pcVar2 != (char *)0x0) {
          *puVar5 = pcVar2;
          iVar7 = iVar7 + 1;
          puVar5 = puVar5 + 1;
        }
      }
    }
  }
  DAT_0047f4cc = iVar7;
  return;
}



/* console_cvar_autocomplete @ 00402630 */

/* returns exact or prefix-matched cvar name */

char * __thiscall console_cvar_autocomplete(void *this,void *console_state,char *prefix)

{
  char cVar1;
  byte bVar2;
  undefined4 *puVar3;
  byte *pbVar4;
  int iVar5;
  uint uVar6;
  byte *pbVar7;
  undefined4 *puVar8;
  char *pcVar9;
  bool bVar10;
  
  uVar6 = 0xffffffff;
  pcVar9 = console_state;
  do {
    if (uVar6 == 0) break;
    uVar6 = uVar6 - 1;
    cVar1 = *pcVar9;
    pcVar9 = pcVar9 + 1;
  } while (cVar1 != '\0');
  if (~uVar6 - 1 != 0) {
    puVar8 = *(undefined4 **)this;
    for (puVar3 = puVar8; puVar3 != (undefined4 *)0x0; puVar3 = (undefined4 *)puVar3[1]) {
      pbVar7 = (byte *)*puVar3;
      pbVar4 = console_state;
      do {
        bVar2 = *pbVar4;
        bVar10 = bVar2 < *pbVar7;
        if (bVar2 != *pbVar7) {
LAB_0040267e:
          iVar5 = (1 - (uint)bVar10) - (uint)(bVar10 != 0);
          goto LAB_00402683;
        }
        if (bVar2 == 0) break;
        bVar2 = pbVar4[1];
        bVar10 = bVar2 < pbVar7[1];
        if (bVar2 != pbVar7[1]) goto LAB_0040267e;
        pbVar4 = pbVar4 + 2;
        pbVar7 = pbVar7 + 2;
      } while (bVar2 != 0);
      iVar5 = 0;
LAB_00402683:
      if (iVar5 == 0) {
        return (char *)*puVar3;
      }
    }
    if (puVar8 != (undefined4 *)0x0) {
      do {
        iVar5 = _strncmp(console_state,(char *)*puVar8,~uVar6 - 1);
        if (iVar5 == 0) {
          return (char *)*puVar8;
        }
        puVar8 = (undefined4 *)puVar8[1];
      } while (puVar8 != (undefined4 *)0x0);
      return (char *)0x0;
    }
  }
  return (char *)0x0;
}



/* console_register_command @ 004026e0 */

/* registers a console command and handler */

void __thiscall console_register_command(void *this,uint *param_1,undefined4 param_2)

{
  int iVar1;
  int iVar2;
  undefined4 *puVar3;
  char *pcVar4;
  
  puVar3 = operator_new(0xc);
  if (puVar3 == (undefined4 *)0x0) {
    puVar3 = (undefined4 *)0x0;
  }
  else {
    pcVar4 = strdup_malloc((char *)param_1);
    *puVar3 = pcVar4;
    puVar3[1] = 0;
    puVar3[2] = 0;
  }
  puVar3[2] = param_2;
  iVar1 = *(int *)((int)this + 4);
  if (iVar1 != 0) {
    for (iVar2 = *(int *)(iVar1 + 4); iVar2 != 0; iVar2 = *(int *)(iVar2 + 4)) {
      iVar1 = iVar2;
    }
    *(undefined4 **)(iVar1 + 4) = puVar3;
    return;
  }
  *(undefined4 **)((int)this + 4) = puVar3;
  return;
}



/* console_command_find @ 00402750 */

/* finds a console command entry by name */

void * __thiscall console_command_find(void *this,void *console_state,char *name)

{
  byte bVar1;
  undefined4 *puVar2;
  byte *pbVar3;
  int iVar4;
  byte *pbVar5;
  bool bVar6;
  
  puVar2 = *(undefined4 **)((int)this + 4);
  do {
    if (puVar2 == (undefined4 *)0x0) {
      return (void *)0x0;
    }
    pbVar5 = (byte *)*puVar2;
    pbVar3 = console_state;
    do {
      bVar1 = *pbVar3;
      bVar6 = bVar1 < *pbVar5;
      if (bVar1 != *pbVar5) {
LAB_0040278b:
        iVar4 = (1 - (uint)bVar6) - (uint)(bVar6 != 0);
        goto LAB_00402790;
      }
      if (bVar1 == 0) break;
      bVar1 = pbVar3[1];
      bVar6 = bVar1 < pbVar5[1];
      if (bVar1 != pbVar5[1]) goto LAB_0040278b;
      pbVar3 = pbVar3 + 2;
      pbVar5 = pbVar5 + 2;
    } while (bVar1 != 0);
    iVar4 = 0;
LAB_00402790:
    if (iVar4 == 0) {
      return puVar2;
    }
    puVar2 = (undefined4 *)puVar2[1];
  } while( true );
}



/* console_command_autocomplete @ 004027b0 */

/* returns exact or prefix-matched command name */

char * __thiscall console_command_autocomplete(void *this,void *console_state,char *prefix)

{
  char cVar1;
  byte bVar2;
  undefined4 *puVar3;
  byte *pbVar4;
  int iVar5;
  uint uVar6;
  byte *pbVar7;
  undefined4 *puVar8;
  char *pcVar9;
  bool bVar10;
  
  uVar6 = 0xffffffff;
  pcVar9 = console_state;
  do {
    if (uVar6 == 0) break;
    uVar6 = uVar6 - 1;
    cVar1 = *pcVar9;
    pcVar9 = pcVar9 + 1;
  } while (cVar1 != '\0');
  if (~uVar6 - 1 != 0) {
    puVar8 = *(undefined4 **)((int)this + 4);
    for (puVar3 = puVar8; puVar3 != (undefined4 *)0x0; puVar3 = (undefined4 *)puVar3[1]) {
      pbVar7 = (byte *)*puVar3;
      pbVar4 = console_state;
      do {
        bVar2 = *pbVar4;
        bVar10 = bVar2 < *pbVar7;
        if (bVar2 != *pbVar7) {
LAB_004027ff:
          iVar5 = (1 - (uint)bVar10) - (uint)(bVar10 != 0);
          goto LAB_00402804;
        }
        if (bVar2 == 0) break;
        bVar2 = pbVar4[1];
        bVar10 = bVar2 < pbVar7[1];
        if (bVar2 != pbVar7[1]) goto LAB_004027ff;
        pbVar4 = pbVar4 + 2;
        pbVar7 = pbVar7 + 2;
      } while (bVar2 != 0);
      iVar5 = 0;
LAB_00402804:
      if (iVar5 == 0) {
        return (char *)*puVar3;
      }
    }
    if (puVar8 != (undefined4 *)0x0) {
      do {
        iVar5 = _strncmp(console_state,(char *)*puVar8,~uVar6 - 1);
        if (iVar5 == 0) {
          return (char *)*puVar8;
        }
        puVar8 = (undefined4 *)puVar8[1];
      } while (puVar8 != (undefined4 *)0x0);
      return (char *)0x0;
    }
  }
  return (char *)0x0;
}



/* console_flush_log @ 00402860 */

/* flushes console lines to the log file */

int __fastcall console_flush_log(void *console_state,char *filename)

{
  char cVar1;
  char *pcVar2;
  FILE *fp;
  undefined4 *puVar3;
  int iVar4;
  int iVar5;
  uint uVar6;
  char *in_stack_00000004;
  char *mode;
  
  mode = &DAT_004712dc;
  pcVar2 = game_build_path(in_stack_00000004);
  fp = crt_fopen(pcVar2,mode);
  if (fp == (FILE *)0x0) {
    return 0;
  }
  iVar4 = *(int *)((int)console_state + 0x20);
  do {
    iVar4 = iVar4 + -1;
    if (iVar4 < 0) {
      crt_fflush(fp);
      iVar4 = crt_fclose(fp);
      return CONCAT31((int3)((uint)iVar4 >> 8),1);
    }
    puVar3 = *(undefined4 **)((int)console_state + 8);
    iVar5 = iVar4;
    if (0 < iVar4) {
      do {
        puVar3 = (undefined4 *)puVar3[1];
        iVar5 = iVar5 + -1;
      } while (iVar5 != 0);
    }
    uVar6 = 0xffffffff;
    pcVar2 = (char *)*puVar3;
    do {
      if (uVar6 == 0) break;
      uVar6 = uVar6 - 1;
      cVar1 = *pcVar2;
      pcVar2 = pcVar2 + 1;
    } while (cVar1 != '\0');
    crt_fwrite((char *)*puVar3,~uVar6 - 1,1,fp);
  } while( true );
}



/* game_build_path @ 00402bd0 */

/* builds a game path by combining game_base_path with filename */

char * game_build_path(char *filename)

{
  crt_sprintf(&game_path_buf,s__s__s_00471324,&game_base_path,filename);
  return &game_path_buf;
}



/* register_core_cvars @ 00402c00 */

/* registers built-in cvars */

void register_core_cvars(void)

{
  char *unaff_retaddr;
  
  DAT_00480854 = console_register_cvar
                           (&console_log_queue,s_cv_silentloads_00471434,&DAT_0047125c,unaff_retaddr
                           );
  DAT_00480858 = console_register_cvar
                           (&console_log_queue,s_cv_terrainFilter_00471420,&DAT_0047125c,
                            unaff_retaddr);
  DAT_0048085c = console_register_cvar
                           (&console_log_queue,s_cv_bodiesFade_00471410,&DAT_0047125c,unaff_retaddr)
  ;
  DAT_00480870 = console_register_cvar
                           (&console_log_queue,s_cv_uiTransparency_004713fc,&DAT_0047125c,
                            unaff_retaddr);
  DAT_0048088c = console_register_cvar
                           (&console_log_queue,s_cv_uiPointFilterPanels_004713e0,&DAT_004713f8,
                            unaff_retaddr);
  DAT_00480874 = console_register_cvar
                           (&console_log_queue,s_cv_enableMousePointAndClickMovem_004713bc,
                            &DAT_004713f8,unaff_retaddr);
  DAT_00480864 = console_register_cvar
                           (&console_log_queue,s_cv_verbose_004713b0,&DAT_004713f8,unaff_retaddr);
  DAT_00480860 = console_register_cvar
                           (&console_log_queue,s_cv_terrainBodiesTransparency_00471390,&DAT_004713f8
                            ,unaff_retaddr);
  DAT_00480878 = console_register_cvar
                           (&console_log_queue,s_cv_uiSmallIndicators_00471378,&DAT_004713f8,
                            unaff_retaddr);
  DAT_0048087c = console_register_cvar
                           (&console_log_queue,s_cv_aimEnhancementFade_00471360,&DAT_00471260,
                            unaff_retaddr);
  DAT_0048086c = console_register_cvar
                           (&console_log_queue,s_cv_friendlyFire_00471350,&DAT_004713f8,
                            unaff_retaddr);
  DAT_00480868 = console_register_cvar
                           (&console_log_queue,s_cv_showFPS_00471344,&DAT_004713f8,unaff_retaddr);
  DAT_00480880 = console_register_cvar
                           (&console_log_queue,s_cv_padAimDistMul_0047132c,&DAT_00471340,
                            unaff_retaddr);
  return;
}



/* FUN_00402d50 @ 00402d50 */

void FUN_00402d50(void)

{
  int iVar1;
  int iVar2;
  float fStack_4c;
  float fStack_48;
  float *pfStack_44;
  undefined4 uStack_40;
  undefined4 uStack_3c;
  undefined4 *puStack_38;
  undefined4 uStack_34;
  int local_30;
  float fStack_2c;
  float fStack_28;
  undefined4 uStack_24;
  
  uStack_34 = 0x18;
  local_30 = 0x3f000000;
  puStack_38 = (undefined4 *)0x402d6c;
  (**(code **)(*grim_interface_ptr + 0x20))();
  uStack_24 = 0;
  fStack_2c = (float)(config_screen_width / 2 + -0x6e);
  local_30 = config_screen_height / 2 + -0x1e;
  puStack_38 = &uStack_24;
  fStack_28 = (float)local_30;
  uStack_3c = 0x42700000;
  pfStack_44 = &fStack_2c;
  uStack_40 = 0x435c0000;
  fStack_48 = 5.893929e-39;
  (**(code **)(*grim_interface_ptr + 0xd0))();
  fStack_48 = 1.0;
  fStack_4c = 1.0;
  (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000);
  fStack_4c = (float)(config_screen_width / 2 + -0x6e);
  fStack_48 = (float)(config_screen_height / 2 + -0x1e);
  (**(code **)(*grim_interface_ptr + 0xd4))(&fStack_4c,0x435c0000,0x42700000);
  iVar1 = *grim_interface_ptr;
  iVar2 = (**(code **)(iVar1 + 0x14c))
                    (s_Please_wait____00471444,(float)(config_screen_height / 2 + -8),
                     s_Please_wait____00471444);
  (**(code **)(iVar1 + 0x144))((float)(config_screen_width / 2 - iVar2 / 2));
  (**(code **)(*grim_interface_ptr + 0x20))(0x36,1);
  return;
}



/* FUN_00402ed0 @ 00402ed0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_00402ed0(void)

{
  uint uVar1;
  uint uVar2;
  int local_1c;
  float local_10;
  float local_c;
  float local_8;
  float local_4;
  
  _config_player_count = 2;
  DAT_004712f0 = 4000;
  uVar2 = 0;
  local_1c = 0x100;
  do {
    uVar1 = uVar2 & 0x80000001;
    if ((int)uVar1 < 0) {
      uVar1 = (uVar1 - 1 | 0xfffffffe) + 1;
    }
    local_10 = (float)(int)((uVar1 + 2) * 0x40);
    local_c = (float)local_1c;
    creature_spawn_template(0x38,&local_10,-100.0);
    local_8 = (float)(int)(uVar1 * 0x40 + 0x31e);
    local_4 = (float)local_1c;
    creature_spawn_template(0x38,&local_8,-100.0);
    local_1c = local_1c + 0x50;
    uVar2 = uVar2 + 1;
  } while (local_1c < 0x6a0);
  player_pos_x = 0x43e00000;
  player_pos_y = 0x43c00000;
  player2_pos_x = 0x44088000;
  player2_pos_y = 0x44238000;
  weapon_assign_player(0,0xb);
  weapon_assign_player(1,0xb);
  return;
}



/* FUN_00402fe0 @ 00402fe0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_00402fe0(void)

{
  float fVar1;
  uint uVar2;
  uint uVar3;
  int local_28;
  float local_20;
  float local_1c;
  float local_18;
  float local_14;
  float local_10;
  float local_c;
  float local_8;
  float local_4;
  
  _config_player_count = 1;
  DAT_004712f0 = 5000;
  uVar2 = 0;
  local_28 = 0x80;
  do {
    uVar3 = uVar2 & 0x80000001;
    if ((int)uVar3 < 0) {
      uVar3 = (uVar3 - 1 | 0xfffffffe) + 1;
    }
    local_20 = (float)(int)(uVar3 * 0x40 + 0x20);
    fVar1 = (float)local_28;
    local_1c = fVar1;
    creature_spawn_template(0x41,&local_20,-100.0);
    local_18 = (float)(int)((uVar3 + 2) * 0x40);
    local_14 = fVar1;
    creature_spawn_template(0x41,&local_18,-100.0);
    local_10 = (float)(int)(uVar3 * 0x40 + -0x40);
    local_c = fVar1;
    creature_spawn_template(0x41,&local_10,-100.0);
    local_8 = (float)(int)((uVar3 + 0xc) * 0x40);
    local_4 = fVar1;
    creature_spawn_template(0x41,&local_8,-100.0);
    local_28 = local_28 + 0x3c;
    uVar2 = uVar2 + 1;
  } while (local_28 < 0x350);
  weapon_assign_player(0,0x15);
  return;
}



/* FUN_004030f0 @ 004030f0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_004030f0(void)

{
  int iVar1;
  int iVar2;
  int iVar3;
  float local_10;
  float local_c;
  float local_8;
  float local_4;
  
  _config_player_count = 2;
  terrain_generate(&DAT_00484914);
  DAT_004712f0 = 5000;
  iVar3 = 0;
  do {
    iVar1 = _rand();
    iVar2 = _rand();
    local_c = (float)(iVar2 % 899 + 0x40);
    local_10 = (float)(iVar1 % 200 + 0x20);
    creature_spawn_template(0x34,&local_10,-100.0);
    if (iVar3 % 3 != 0) {
      iVar1 = _rand();
      iVar2 = _rand();
      local_4 = (float)(iVar2 % 899 + 0x40);
      local_8 = (float)(iVar1 % 0x1e + 0x20);
      creature_spawn_template(0x35,&local_8,-100.0);
    }
    iVar3 = iVar3 + 1;
  } while (iVar3 < 0x14);
  player_pos_x = 0x43f50000;
  player_pos_y = 0x43e00000;
  player2_pos_x = 0x43f00000;
  player2_pos_y = 0x44100000;
  weapon_assign_player(0,5);
  weapon_assign_player(1,5);
  _bonus_weapon_power_up_timer = 0x41700000;
  return;
}



/* FUN_00403250 @ 00403250 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_00403250(void)

{
  int iVar1;
  int iVar2;
  int iVar3;
  float local_10;
  float local_c;
  float local_8;
  float local_4;
  
  _config_player_count = 1;
  terrain_generate(&quest_selected_meta);
  DAT_004712f0 = 4000;
  iVar3 = 0;
  do {
    iVar1 = _rand();
    iVar2 = _rand();
    local_c = (float)(iVar2 % 899 + 0x40);
    local_10 = (float)(iVar1 % 200 + 0x20);
    creature_spawn_template(0x24,&local_10,0.0);
    if (iVar3 % 3 != 0) {
      iVar1 = _rand();
      iVar2 = _rand();
      local_4 = (float)(iVar2 % 899 + 0x40);
      local_8 = (float)(iVar1 % 0x1e + 0x20);
      creature_spawn_template(0x25,&local_8,0.0);
    }
    iVar3 = iVar3 + 1;
  } while (iVar3 < 0x14);
  player_pos_x = 0x44000000;
  player_pos_y = 0x44000000;
  weapon_assign_player(0,0x12);
  return;
}



/* FUN_00403370 @ 00403370 */

void FUN_00403370(void)

{
  DAT_004712f0 = 10000;
  DAT_00480890 = 1;
  return;
}



/* demo_mode_start @ 00403390 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* starts demo mode and cycles the demo setup */

int demo_mode_start(void)

{
  int iVar1;
  
  if (game_state_id != 9) {
    game_state_set(9);
  }
  DAT_00480890 = 0;
  demo_mode_active = 1;
  gameplay_reset_state();
  _config_game_mode = 1;
  if (DAT_00480894 == 0) {
    FUN_00402ed0();
  }
  else if (DAT_00480894 == 1) {
    FUN_004030f0();
  }
  else if (DAT_00480894 == 2) {
    FUN_00402fe0();
  }
  else if (DAT_00480894 == 3) {
    FUN_00403250();
  }
  else if (DAT_00480894 == 4) {
    FUN_00402ed0();
  }
  else {
    FUN_00403370();
  }
  iVar1 = DAT_00480894 + 1;
  quest_spawn_timeline = 0;
  DAT_0048702c = 0;
  DAT_00480894 = iVar1 % 6;
  return iVar1 / 6;
}



/* FUN_00403430 @ 00403430 */

undefined4 __cdecl FUN_00403430(float *param_1,int param_2,int param_3)

{
  if ((((*param_1 - 10.0 < ui_mouse_x) && (param_1[1] - 2.0 < ui_mouse_y)) &&
      (ui_mouse_x < (float)param_3 + *param_1)) &&
     ((ui_mouse_y < (float)param_2 + param_1[1] && (ui_mouse_blocked == '\0')))) {
    return 1;
  }
  return 0;
}



/* ui_mouse_inside_rect @ 004034a0 */

/* returns 1 when the mouse is inside the rect and mouse capture is clear */

int __cdecl ui_mouse_inside_rect(float *xy,int h,int w)

{
  if ((((*xy < ui_mouse_x) && (xy[1] < ui_mouse_y)) && (ui_mouse_x < (float)w + *xy)) &&
     ((ui_mouse_y < (float)h + xy[1] && (ui_mouse_blocked == '\0')))) {
    return 1;
  }
  return 0;
}



/* game_core_init @ 00403500 */

/* initializes core game systems (quests, effects, UI assets) and sets initial state */

int game_core_init(void)

{
  undefined4 uVar1;
  
  console_printf(&console_log_queue,(byte *)s_GDI_initializing_UI_elements__00471468);
  quest_database_init();
  effect_defaults_reset();
  ui_menu_assets_init();
  bonus_metadata_init();
  render_pass_mode = 0;
  game_state_set(0);
  uVar1 = console_printf(&console_log_queue,(byte *)s_Core_Init_done__00471454);
  return CONCAT31((int3)((uint)uVar1 >> 8),1);
}



/* perk_prompt_update_and_render @ 00403550 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* updates perk prompt timer, animates transforms, and renders the prompt text */

void perk_prompt_update_and_render(void)

{
  int iVar1;
  char *pcVar2;
  int iVar3;
  float10 fVar4;
  float10 fVar5;
  char acStack_90 [4];
  float local_8c;
  
  if ((demo_mode_active == '\0') && (_config_game_mode != 2)) {
    if ((perk_pending_count < 1) || (game_state_id != 9)) {
      perk_prompt_timer = perk_prompt_timer - frame_dt_ms;
      if (perk_prompt_timer < 0) {
        perk_prompt_timer = 0;
      }
    }
    else {
      perk_prompt_timer = perk_prompt_timer + frame_dt_ms;
      if (200 < perk_prompt_timer) {
        perk_prompt_timer = 200;
      }
    }
    if ((config_perk_prompt_state != '\0') && (0 < perk_prompt_timer)) {
      local_8c = (float)perk_prompt_timer * 0.005;
      acStack_90[0] = '\0';
      acStack_90[1] = '\0';
      acStack_90[2] = -0x80;
      acStack_90[3] = '?';
      (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000);
      pcVar2 = input_key_name(config_key_pick_perk);
      crt_sprintf(acStack_90,s_Press__s_to_pick_a_perk_00471488,pcVar2);
      iVar1 = *grim_interface_ptr;
      iVar3 = (**(code **)(iVar1 + 0x14c))(acStack_90,_perk_prompt_origin_y + 8.0,acStack_90);
      (**(code **)(iVar1 + 0x144))((float)((config_screen_width - iVar3) + -0x10));
    }
    DAT_0048f20c = 1;
    fVar4 = ((float10)1.0 - (float10)perk_prompt_timer * (float10)0.005) * (float10)-1.5707964;
    fVar5 = (float10)fcos(fVar4);
    _perk_prompt_transform_cos = (float)fVar5;
    fVar4 = (float10)fsin((float10)(float)fVar4);
    _perk_prompt_transform_sin_neg = (float)-fVar4;
    _perk_prompt_transform_sin = (float)fVar4;
    _perk_prompt_transform_cos_2 = (float)fVar5;
    local_8c = 5.897112e-39;
    ui_element_render(&DAT_0048f20c);
  }
  return;
}



/* input_key_name @ 004036d0 */

/* maps key codes (DIK/virtual) to display labels */

char * __cdecl input_key_name(int key_code)

{
  char cVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  char *pcVar5;
  char *pcVar6;
  
  if (key_code < 0x100) {
    iVar2 = GetKeyNameTextA(key_code << 0x10,(LPSTR)&DAT_004da100,0x3f);
    if (iVar2 != 0) {
      return (char *)&DAT_004da100;
    }
    switch(key_code) {
    case 1:
      return s_DIK_ESCAPE_004718d8;
    case 2:
      return s_DIK_1_004718d0;
    case 3:
      return s_DIK_2_004718c8;
    case 4:
      return s_DIK_3_004718c0;
    case 5:
      return s_DIK_4_004718b8;
    case 6:
      return s_DIK_5_004718b0;
    case 7:
      return s_DIK_6_004718a8;
    case 8:
      return s_DIK_7_004718a0;
    case 9:
      return s_DIK_8_00471898;
    case 10:
      return s_DIK_9_00471890;
    case 0xb:
      return s_DIK_0_00471888;
    case 0xc:
      return s_MINUS_00471880;
    case 0xd:
      return s_EQUALS_00471878;
    case 0xe:
      return &DAT_00471870;
    case 0xf:
      return &DAT_0047186c;
    case 0x10:
      return &DAT_00471868;
    case 0x11:
      return &DAT_00471864;
    case 0x12:
      return &DAT_00471860;
    case 0x13:
      return &DAT_0047185c;
    case 0x14:
      return &DAT_00471858;
    case 0x15:
      return &DAT_00471854;
    case 0x16:
      return &DAT_00471850;
    case 0x17:
      return &DAT_0047184c;
    case 0x18:
      return &DAT_00471848;
    case 0x19:
      return &DAT_00471844;
    case 0x1a:
      return s_LBRACKET_00471838;
    case 0x1b:
      return s_RBRACKET_0047182c;
    case 0x1c:
      return s_RETURN_00471824;
    case 0x1d:
      return s_LCONTROL_00471818;
    case 0x1e:
      return &DAT_00471814;
    case 0x1f:
      return &DAT_00471810;
    case 0x20:
      return &DAT_0047180c;
    case 0x21:
      return &DAT_00471808;
    case 0x22:
      return &DAT_00471804;
    case 0x23:
      return &DAT_00471800;
    case 0x24:
      return &DAT_004717fc;
    case 0x25:
      return &DAT_004717f8;
    case 0x26:
      return &DAT_004717f4;
    case 0x27:
      return s_SEMICOLON_004717e8;
    case 0x28:
      return s_APOSTROPHE_004717dc;
    case 0x29:
      return s_GRAVE_004717d4;
    case 0x2a:
      return s_LSHIFT_004717cc;
    case 0x2b:
      return s_BACKSLASH_004717c0;
    case 0x2c:
      return &DAT_004717bc;
    case 0x2d:
      return &DAT_004717b8;
    case 0x2e:
      return &DAT_004717b4;
    case 0x2f:
      return &DAT_004717b0;
    case 0x30:
      return &DAT_004717ac;
    case 0x31:
      return &DAT_004717a8;
    case 0x32:
      return &DAT_004717a4;
    case 0x33:
      return s_COMMA_0047179c;
    case 0x34:
      return s_PERIOD_00471794;
    case 0x35:
      return s_SLASH_0047178c;
    case 0x36:
      return s_RSHIFT_00471784;
    case 0x37:
      return s_MULTIPLY_00471778;
    case 0x38:
      return s_LMENU_00471770;
    case 0x39:
      return s_SPACE_00471768;
    case 0x3a:
      return s_CAPITAL_00471760;
    case 0x3b:
      return &DAT_0047175c;
    case 0x3c:
      return &DAT_00471758;
    case 0x3d:
      return &DAT_00471754;
    case 0x3e:
      return &DAT_00471750;
    case 0x3f:
      return &DAT_0047174c;
    case 0x40:
      return &DAT_00471748;
    case 0x41:
      return &DAT_00471744;
    case 0x42:
      return &DAT_00471740;
    case 0x43:
      return &DAT_0047173c;
    case 0x44:
      return &DAT_00471738;
    case 0x45:
      return s_NUMLOCK_00471730;
    case 0x46:
      return s_SCROLL_00471728;
    case 0x47:
      return s_NUMPAD7_00471720;
    case 0x48:
      return s_NUMPAD8_00471718;
    case 0x49:
      return s_NUMPAD9_00471710;
    case 0x4a:
      return s_SUBTRACT_00471704;
    case 0x4b:
      return s_NUMPAD4_004716fc;
    case 0x4c:
      return s_NUMPAD5_004716f4;
    case 0x4d:
      return s_NUMPAD6_004716ec;
    case 0x4e:
      return &DAT_004716e8;
    case 0x4f:
      return s_NUMPAD1_004716e0;
    case 0x50:
      return s_NUMPAD2_004716d8;
    case 0x51:
      return s_NUMPAD3_004716d0;
    case 0x52:
      return s_NUMPAD0_004716c8;
    case 0x53:
      return s_DECIMAL_004716c0;
    default:
      return s_Unknown_004714a0;
    case 0x56:
      return s_OEM_102_004716b8;
    case 0x57:
      return &DAT_004716b4;
    case 0x58:
      return &DAT_004716b0;
    case 100:
      return &DAT_004716ac;
    case 0x65:
      return &DAT_004716a8;
    case 0x66:
      return &DAT_004716a4;
    case 0x70:
      return &DAT_0047169c;
    case 0x73:
      return s_ABNT_C1_00471694;
    case 0x79:
      return s_CONVERT_0047168c;
    case 0x7b:
      return s_NOCONVERT_00471680;
    case 0x7d:
      return &DAT_0047167c;
    case 0x7e:
      return s_ABNT_C2_00471674;
    case 0x8d:
      return s_NUMPADEQUALS_00471664;
    case 0x90:
      return s_PREVTRACK_00471658;
    case 0x91:
      return &DAT_00471654;
    case 0x92:
      return s_COLON_0047164c;
    case 0x93:
      return s_UNDERLINE_00471640;
    case 0x94:
      return s_KANJI_00471638;
    case 0x95:
      return &DAT_00471630;
    case 0x96:
      return &DAT_0047162c;
    case 0x97:
      return s_UNLABELED_00471620;
    case 0x99:
      return s_NEXTTRACK_00471614;
    case 0x9c:
      return s_NUMPADENTER_00471608;
    case 0x9d:
      return s_RCONTROL_004715fc;
    case 0xa0:
      return &DAT_004715f4;
    case 0xa1:
      return s_CALCULATOR_004715e8;
    case 0xa2:
      return s_PLAYPAUSE_004715dc;
    case 0xa4:
      return s_MEDIASTOP_004715d0;
    case 0xae:
      return s_VOLUMEDOWN_004715c4;
    case 0xb0:
      return s_VOLUMEUP_004715b8;
    case 0xb2:
      return s_WEBHOME_004715b0;
    case 0xb3:
      return s_NUMPADCOMMA_004715a4;
    case 0xb5:
      return s_DIVIDE_0047159c;
    case 0xb7:
      return s_SYSRQ_00471594;
    case 0xb8:
      return s_RMENU_0047158c;
    case 0xc5:
      return s_PAUSE_00471584;
    case 199:
      return &DAT_0047157c;
    case 200:
      return &DAT_00471578;
    case 0xc9:
      return s_PRIOR_00471570;
    case 0xcb:
      return &DAT_00471568;
    case 0xcd:
      return s_RIGHT_00471560;
    case 0xcf:
      return &DAT_0047155c;
    case 0xd0:
      return &DAT_00471554;
    case 0xd1:
      return &DAT_0047154c;
    case 0xd2:
      return s_INSERT_00471544;
    case 0xd3:
      return s_DELETE_0047153c;
    case 0xdb:
      return &DAT_00471534;
    case 0xdc:
      return &DAT_0047152c;
    case 0xdd:
      return &DAT_00471524;
    case 0xde:
      return s_POWER_0047151c;
    case 0xdf:
      return s_SLEEP_00471514;
    case 0xe3:
      return &DAT_0047150c;
    case 0xe5:
      return s_WEBSEARCH_00471500;
    case 0xe6:
      return s_WEBFAVORITES_004714f0;
    case 0xe7:
      return s_WEBREFRESH_004714e4;
    case 0xe8:
      return s_WEBSTOP_004714dc;
    case 0xe9:
      return s_WEBFORWARD_004714d0;
    case 0xea:
      return s_WEBBACK_004714c8;
    case 0xeb:
      return s_MYCOMPUTER_004714bc;
    case 0xec:
      return &DAT_004714b4;
    case 0xed:
      return s_MEDIASELECT_004714a8;
    }
  }
  if (key_code == 0x100) {
    uVar3 = 0xffffffff;
    pcVar5 = s_Mouse1_00471af4;
    do {
      pcVar6 = pcVar5;
      if (uVar3 == 0) break;
      uVar3 = uVar3 - 1;
      pcVar6 = pcVar5 + 1;
      cVar1 = *pcVar5;
      pcVar5 = pcVar6;
    } while (cVar1 != '\0');
    uVar3 = ~uVar3;
    pcVar5 = pcVar6 + -uVar3;
    pcVar6 = (char *)&DAT_004da100;
    for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1) {
      *(undefined4 *)pcVar6 = *(undefined4 *)pcVar5;
      pcVar5 = pcVar5 + 4;
      pcVar6 = pcVar6 + 4;
    }
    for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
      *pcVar6 = *pcVar5;
      pcVar5 = pcVar5 + 1;
      pcVar6 = pcVar6 + 1;
    }
    return (char *)&DAT_004da100;
  }
  if (key_code == 0x101) {
    pcVar5 = s_Mouse2_00471aec;
  }
  else {
    if (key_code == 0x102) {
      uVar3 = 0xffffffff;
      pcVar5 = s_Mouse3_00471ae4;
      do {
        pcVar6 = pcVar5;
        if (uVar3 == 0) break;
        uVar3 = uVar3 - 1;
        pcVar6 = pcVar5 + 1;
        cVar1 = *pcVar5;
        pcVar5 = pcVar6;
      } while (cVar1 != '\0');
      uVar3 = ~uVar3;
      pcVar5 = pcVar6 + -uVar3;
      pcVar6 = (char *)&DAT_004da100;
      for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1) {
        *(undefined4 *)pcVar6 = *(undefined4 *)pcVar5;
        pcVar5 = pcVar5 + 4;
        pcVar6 = pcVar6 + 4;
      }
      for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
        *pcVar6 = *pcVar5;
        pcVar5 = pcVar5 + 1;
        pcVar6 = pcVar6 + 1;
      }
      return (char *)&DAT_004da100;
    }
    if (key_code == 0x103) {
      pcVar5 = s_Mouse4_00471adc;
    }
    else {
      if (key_code == 0x104) {
        uVar3 = 0xffffffff;
        pcVar5 = &DAT_00471ad4;
        do {
          pcVar6 = pcVar5;
          if (uVar3 == 0) break;
          uVar3 = uVar3 - 1;
          pcVar6 = pcVar5 + 1;
          cVar1 = *pcVar5;
          pcVar5 = pcVar6;
        } while (cVar1 != '\0');
        uVar3 = ~uVar3;
        pcVar5 = pcVar6 + -uVar3;
        pcVar6 = (char *)&DAT_004da100;
        for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1) {
          *(undefined4 *)pcVar6 = *(undefined4 *)pcVar5;
          pcVar5 = pcVar5 + 4;
          pcVar6 = pcVar6 + 4;
        }
        for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
          *pcVar6 = *pcVar5;
          pcVar5 = pcVar5 + 1;
          pcVar6 = pcVar6 + 1;
        }
        return (char *)&DAT_004da100;
      }
      if (key_code == 0x109) {
        pcVar5 = s_MWheelUp_00471ac8;
      }
      else {
        if (key_code == 0x10a) {
          uVar3 = 0xffffffff;
          pcVar5 = s_MWheelDown_00471abc;
          do {
            pcVar6 = pcVar5;
            if (uVar3 == 0) break;
            uVar3 = uVar3 - 1;
            pcVar6 = pcVar5 + 1;
            cVar1 = *pcVar5;
            pcVar5 = pcVar6;
          } while (cVar1 != '\0');
          uVar3 = ~uVar3;
          pcVar5 = pcVar6 + -uVar3;
          pcVar6 = (char *)&DAT_004da100;
          for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1) {
            *(undefined4 *)pcVar6 = *(undefined4 *)pcVar5;
            pcVar5 = pcVar5 + 4;
            pcVar6 = pcVar6 + 4;
          }
          for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
            *pcVar6 = *pcVar5;
            pcVar5 = pcVar5 + 1;
            pcVar6 = pcVar6 + 1;
          }
          return (char *)&DAT_004da100;
        }
        if (key_code == 0x11f) {
          pcVar5 = s_Joys1_00471ab4;
        }
        else {
          if (key_code == 0x120) {
            uVar3 = 0xffffffff;
            pcVar5 = &DAT_00471aac;
            do {
              pcVar6 = pcVar5;
              if (uVar3 == 0) break;
              uVar3 = uVar3 - 1;
              pcVar6 = pcVar5 + 1;
              cVar1 = *pcVar5;
              pcVar5 = pcVar6;
            } while (cVar1 != '\0');
            uVar3 = ~uVar3;
            pcVar5 = pcVar6 + -uVar3;
            pcVar6 = (char *)&DAT_004da100;
            for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1) {
              *(undefined4 *)pcVar6 = *(undefined4 *)pcVar5;
              pcVar5 = pcVar5 + 4;
              pcVar6 = pcVar6 + 4;
            }
            for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
              *pcVar6 = *pcVar5;
              pcVar5 = pcVar5 + 1;
              pcVar6 = pcVar6 + 1;
            }
            return (char *)&DAT_004da100;
          }
          if (key_code == 0x121) {
            pcVar5 = s_Joys3_00471aa4;
          }
          else {
            if (key_code == 0x122) {
              uVar3 = 0xffffffff;
              pcVar5 = &DAT_00471a9c;
              do {
                pcVar6 = pcVar5;
                if (uVar3 == 0) break;
                uVar3 = uVar3 - 1;
                pcVar6 = pcVar5 + 1;
                cVar1 = *pcVar5;
                pcVar5 = pcVar6;
              } while (cVar1 != '\0');
              uVar3 = ~uVar3;
              pcVar5 = pcVar6 + -uVar3;
              pcVar6 = (char *)&DAT_004da100;
              for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1) {
                *(undefined4 *)pcVar6 = *(undefined4 *)pcVar5;
                pcVar5 = pcVar5 + 4;
                pcVar6 = pcVar6 + 4;
              }
              for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
                *pcVar6 = *pcVar5;
                pcVar5 = pcVar5 + 1;
                pcVar6 = pcVar6 + 1;
              }
              return (char *)&DAT_004da100;
            }
            if (key_code == 0x123) {
              pcVar5 = s_Joys5_00471a94;
            }
            else {
              if (key_code == 0x124) {
                uVar3 = 0xffffffff;
                pcVar5 = &DAT_00471a8c;
                do {
                  pcVar6 = pcVar5;
                  if (uVar3 == 0) break;
                  uVar3 = uVar3 - 1;
                  pcVar6 = pcVar5 + 1;
                  cVar1 = *pcVar5;
                  pcVar5 = pcVar6;
                } while (cVar1 != '\0');
                uVar3 = ~uVar3;
                pcVar5 = pcVar6 + -uVar3;
                pcVar6 = (char *)&DAT_004da100;
                for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1) {
                  *(undefined4 *)pcVar6 = *(undefined4 *)pcVar5;
                  pcVar5 = pcVar5 + 4;
                  pcVar6 = pcVar6 + 4;
                }
                for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
                  *pcVar6 = *pcVar5;
                  pcVar5 = pcVar5 + 1;
                  pcVar6 = pcVar6 + 1;
                }
                return (char *)&DAT_004da100;
              }
              if (key_code == 0x125) {
                pcVar5 = s_Joys7_00471a84;
              }
              else {
                if (key_code == 0x126) {
                  uVar3 = 0xffffffff;
                  pcVar5 = &DAT_00471a7c;
                  do {
                    pcVar6 = pcVar5;
                    if (uVar3 == 0) break;
                    uVar3 = uVar3 - 1;
                    pcVar6 = pcVar5 + 1;
                    cVar1 = *pcVar5;
                    pcVar5 = pcVar6;
                  } while (cVar1 != '\0');
                  uVar3 = ~uVar3;
                  pcVar5 = pcVar6 + -uVar3;
                  pcVar6 = (char *)&DAT_004da100;
                  for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1) {
                    *(undefined4 *)pcVar6 = *(undefined4 *)pcVar5;
                    pcVar5 = pcVar5 + 4;
                    pcVar6 = pcVar6 + 4;
                  }
                  for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
                    *pcVar6 = *pcVar5;
                    pcVar5 = pcVar5 + 1;
                    pcVar6 = pcVar6 + 1;
                  }
                  return (char *)&DAT_004da100;
                }
                if (key_code == 0x127) {
                  pcVar5 = s_Joys9_00471a74;
                }
                else {
                  if (key_code == 0x128) {
                    uVar3 = 0xffffffff;
                    pcVar5 = &DAT_00471a6c;
                    do {
                      pcVar6 = pcVar5;
                      if (uVar3 == 0) break;
                      uVar3 = uVar3 - 1;
                      pcVar6 = pcVar5 + 1;
                      cVar1 = *pcVar5;
                      pcVar5 = pcVar6;
                    } while (cVar1 != '\0');
                    uVar3 = ~uVar3;
                    pcVar5 = pcVar6 + -uVar3;
                    pcVar6 = (char *)&DAT_004da100;
                    for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1) {
                      *(undefined4 *)pcVar6 = *(undefined4 *)pcVar5;
                      pcVar5 = pcVar5 + 4;
                      pcVar6 = pcVar6 + 4;
                    }
                    for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
                      *pcVar6 = *pcVar5;
                      pcVar5 = pcVar5 + 1;
                      pcVar6 = pcVar6 + 1;
                    }
                    return (char *)&DAT_004da100;
                  }
                  if (key_code == 0x129) {
                    pcVar5 = s_Joys11_00471a64;
                  }
                  else {
                    if (key_code == 0x12a) {
                      uVar3 = 0xffffffff;
                      pcVar5 = &DAT_00471a5c;
                      do {
                        pcVar6 = pcVar5;
                        if (uVar3 == 0) break;
                        uVar3 = uVar3 - 1;
                        pcVar6 = pcVar5 + 1;
                        cVar1 = *pcVar5;
                        pcVar5 = pcVar6;
                      } while (cVar1 != '\0');
                      uVar3 = ~uVar3;
                      pcVar5 = pcVar6 + -uVar3;
                      pcVar6 = (char *)&DAT_004da100;
                      for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1) {
                        *(undefined4 *)pcVar6 = *(undefined4 *)pcVar5;
                        pcVar5 = pcVar5 + 4;
                        pcVar6 = pcVar6 + 4;
                      }
                      for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
                        *pcVar6 = *pcVar5;
                        pcVar5 = pcVar5 + 1;
                        pcVar6 = pcVar6 + 1;
                      }
                      return (char *)&DAT_004da100;
                    }
                    if (key_code == 0x131) {
                      pcVar5 = s_JoysUp_00471a54;
                    }
                    else {
                      if (key_code == 0x132) {
                        uVar3 = 0xffffffff;
                        pcVar5 = s_JoysDown_00471a48;
                        do {
                          pcVar6 = pcVar5;
                          if (uVar3 == 0) break;
                          uVar3 = uVar3 - 1;
                          pcVar6 = pcVar5 + 1;
                          cVar1 = *pcVar5;
                          pcVar5 = pcVar6;
                        } while (cVar1 != '\0');
                        uVar3 = ~uVar3;
                        pcVar5 = pcVar6 + -uVar3;
                        pcVar6 = (char *)&DAT_004da100;
                        for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1) {
                          *(undefined4 *)pcVar6 = *(undefined4 *)pcVar5;
                          pcVar5 = pcVar5 + 4;
                          pcVar6 = pcVar6 + 4;
                        }
                        for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
                          *pcVar6 = *pcVar5;
                          pcVar5 = pcVar5 + 1;
                          pcVar6 = pcVar6 + 1;
                        }
                        return (char *)&DAT_004da100;
                      }
                      if (key_code == 0x133) {
                        pcVar5 = s_JoysLeft_00471a3c;
                      }
                      else {
                        if (key_code == 0x134) {
                          uVar3 = 0xffffffff;
                          pcVar5 = s_JoysRight_00471a30;
                          do {
                            pcVar6 = pcVar5;
                            if (uVar3 == 0) break;
                            uVar3 = uVar3 - 1;
                            pcVar6 = pcVar5 + 1;
                            cVar1 = *pcVar5;
                            pcVar5 = pcVar6;
                          } while (cVar1 != '\0');
                          uVar3 = ~uVar3;
                          pcVar5 = pcVar6 + -uVar3;
                          pcVar6 = (char *)&DAT_004da100;
                          for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1) {
                            *(undefined4 *)pcVar6 = *(undefined4 *)pcVar5;
                            pcVar5 = pcVar5 + 4;
                            pcVar6 = pcVar6 + 4;
                          }
                          for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
                            *pcVar6 = *pcVar5;
                            pcVar5 = pcVar5 + 1;
                            pcVar6 = pcVar6 + 1;
                          }
                          return (char *)&DAT_004da100;
                        }
                        if (key_code == 0x13f) {
                          pcVar5 = s_JoyAxisX_00471a24;
                        }
                        else {
                          if (key_code == 0x140) {
                            uVar3 = 0xffffffff;
                            pcVar5 = s_JoyAxisY_00471a18;
                            do {
                              pcVar6 = pcVar5;
                              if (uVar3 == 0) break;
                              uVar3 = uVar3 - 1;
                              pcVar6 = pcVar5 + 1;
                              cVar1 = *pcVar5;
                              pcVar5 = pcVar6;
                            } while (cVar1 != '\0');
                            uVar3 = ~uVar3;
                            pcVar5 = pcVar6 + -uVar3;
                            pcVar6 = (char *)&DAT_004da100;
                            for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1) {
                              *(undefined4 *)pcVar6 = *(undefined4 *)pcVar5;
                              pcVar5 = pcVar5 + 4;
                              pcVar6 = pcVar6 + 4;
                            }
                            for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
                              *pcVar6 = *pcVar5;
                              pcVar5 = pcVar5 + 1;
                              pcVar6 = pcVar6 + 1;
                            }
                            return (char *)&DAT_004da100;
                          }
                          if (key_code == 0x141) {
                            pcVar5 = s_JoyAxisZ_00471a0c;
                          }
                          else {
                            if (key_code == 0x153) {
                              uVar3 = 0xffffffff;
                              pcVar5 = &DAT_00471a04;
                              do {
                                pcVar6 = pcVar5;
                                if (uVar3 == 0) break;
                                uVar3 = uVar3 - 1;
                                pcVar6 = pcVar5 + 1;
                                cVar1 = *pcVar5;
                                pcVar5 = pcVar6;
                              } while (cVar1 != '\0');
                              uVar3 = ~uVar3;
                              pcVar5 = pcVar6 + -uVar3;
                              pcVar6 = (char *)&DAT_004da100;
                              for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1) {
                                *(undefined4 *)pcVar6 = *(undefined4 *)pcVar5;
                                pcVar5 = pcVar5 + 4;
                                pcVar6 = pcVar6 + 4;
                              }
                              for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
                                *pcVar6 = *pcVar5;
                                pcVar5 = pcVar5 + 1;
                                pcVar6 = pcVar6 + 1;
                              }
                              return (char *)&DAT_004da100;
                            }
                            if (key_code == 0x154) {
                              pcVar5 = s_JoyRotY_004719fc;
                            }
                            else {
                              if (key_code == 0x155) {
                                uVar3 = 0xffffffff;
                                pcVar5 = &DAT_004719f4;
                                do {
                                  pcVar6 = pcVar5;
                                  if (uVar3 == 0) break;
                                  uVar3 = uVar3 - 1;
                                  pcVar6 = pcVar5 + 1;
                                  cVar1 = *pcVar5;
                                  pcVar5 = pcVar6;
                                } while (cVar1 != '\0');
                                uVar3 = ~uVar3;
                                pcVar5 = pcVar6 + -uVar3;
                                pcVar6 = (char *)&DAT_004da100;
                                for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1) {
                                  *(undefined4 *)pcVar6 = *(undefined4 *)pcVar5;
                                  pcVar5 = pcVar5 + 4;
                                  pcVar6 = pcVar6 + 4;
                                }
                                for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
                                  *pcVar6 = *pcVar5;
                                  pcVar5 = pcVar5 + 1;
                                  pcVar6 = pcVar6 + 1;
                                }
                                return (char *)&DAT_004da100;
                              }
                              if (key_code == 0x17e) {
                                pcVar5 = s_unbound_004719ec;
                              }
                              else {
                                if (key_code == 0x163) {
                                  uVar3 = 0xffffffff;
                                  pcVar5 = &DAT_004719e0;
                                  do {
                                    pcVar6 = pcVar5;
                                    if (uVar3 == 0) break;
                                    uVar3 = uVar3 - 1;
                                    pcVar6 = pcVar5 + 1;
                                    cVar1 = *pcVar5;
                                    pcVar5 = pcVar6;
                                  } while (cVar1 != '\0');
                                  uVar3 = ~uVar3;
                                  pcVar5 = pcVar6 + -uVar3;
                                  pcVar6 = (char *)&DAT_004da100;
                                  for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1) {
                                    *(undefined4 *)pcVar6 = *(undefined4 *)pcVar5;
                                    pcVar5 = pcVar5 + 4;
                                    pcVar6 = pcVar6 + 4;
                                  }
                                  for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
                                    *pcVar6 = *pcVar5;
                                    pcVar5 = pcVar5 + 1;
                                    pcVar6 = pcVar6 + 1;
                                  }
                                  return (char *)&DAT_004da100;
                                }
                                if (key_code == 0x164) {
                                  pcVar5 = s_RIM1XAxis_004719d4;
                                }
                                else {
                                  if (key_code == 0x165) {
                                    uVar3 = 0xffffffff;
                                    pcVar5 = &DAT_004719c8;
                                    do {
                                      pcVar6 = pcVar5;
                                      if (uVar3 == 0) break;
                                      uVar3 = uVar3 - 1;
                                      pcVar6 = pcVar5 + 1;
                                      cVar1 = *pcVar5;
                                      pcVar5 = pcVar6;
                                    } while (cVar1 != '\0');
                                    uVar3 = ~uVar3;
                                    pcVar5 = pcVar6 + -uVar3;
                                    pcVar6 = (char *)&DAT_004da100;
                                    for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1) {
                                      *(undefined4 *)pcVar6 = *(undefined4 *)pcVar5;
                                      pcVar5 = pcVar5 + 4;
                                      pcVar6 = pcVar6 + 4;
                                    }
                                    for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
                                      *pcVar6 = *pcVar5;
                                      pcVar5 = pcVar5 + 1;
                                      pcVar6 = pcVar6 + 1;
                                    }
                                    return (char *)&DAT_004da100;
                                  }
                                  if (key_code == 0x168) {
                                    pcVar5 = s_RIM0YAxis_004719bc;
                                  }
                                  else {
                                    if (key_code == 0x169) {
                                      uVar3 = 0xffffffff;
                                      pcVar5 = &DAT_004719b0;
                                      do {
                                        pcVar6 = pcVar5;
                                        if (uVar3 == 0) break;
                                        uVar3 = uVar3 - 1;
                                        pcVar6 = pcVar5 + 1;
                                        cVar1 = *pcVar5;
                                        pcVar5 = pcVar6;
                                      } while (cVar1 != '\0');
                                      uVar3 = ~uVar3;
                                      pcVar5 = pcVar6 + -uVar3;
                                      pcVar6 = (char *)&DAT_004da100;
                                      for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1) {
                                        *(undefined4 *)pcVar6 = *(undefined4 *)pcVar5;
                                        pcVar5 = pcVar5 + 4;
                                        pcVar6 = pcVar6 + 4;
                                      }
                                      for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
                                        *pcVar6 = *pcVar5;
                                        pcVar5 = pcVar5 + 1;
                                        pcVar6 = pcVar6 + 1;
                                      }
                                      return (char *)&DAT_004da100;
                                    }
                                    if (key_code == 0x16a) {
                                      pcVar5 = s_RIM2YAxis_004719a4;
                                    }
                                    else {
                                      if (key_code == 0x16d) {
                                        uVar3 = 0xffffffff;
                                        pcVar5 = &DAT_00471998;
                                        do {
                                          pcVar6 = pcVar5;
                                          if (uVar3 == 0) break;
                                          uVar3 = uVar3 - 1;
                                          pcVar6 = pcVar5 + 1;
                                          cVar1 = *pcVar5;
                                          pcVar5 = pcVar6;
                                        } while (cVar1 != '\0');
                                        uVar3 = ~uVar3;
                                        pcVar5 = pcVar6 + -uVar3;
                                        pcVar6 = (char *)&DAT_004da100;
                                        for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1) {
                                          *(undefined4 *)pcVar6 = *(undefined4 *)pcVar5;
                                          pcVar5 = pcVar5 + 4;
                                          pcVar6 = pcVar6 + 4;
                                        }
                                        for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
                                          *pcVar6 = *pcVar5;
                                          pcVar5 = pcVar5 + 1;
                                          pcVar6 = pcVar6 + 1;
                                        }
                                        return (char *)&DAT_004da100;
                                      }
                                      if (key_code == 0x16e) {
                                        pcVar5 = s_RIM0Btn2_0047198c;
                                      }
                                      else {
                                        if (key_code == 0x16f) {
                                          uVar3 = 0xffffffff;
                                          pcVar5 = &DAT_00471980;
                                          do {
                                            pcVar6 = pcVar5;
                                            if (uVar3 == 0) break;
                                            uVar3 = uVar3 - 1;
                                            pcVar6 = pcVar5 + 1;
                                            cVar1 = *pcVar5;
                                            pcVar5 = pcVar6;
                                          } while (cVar1 != '\0');
                                          uVar3 = ~uVar3;
                                          pcVar5 = pcVar6 + -uVar3;
                                          pcVar6 = (char *)&DAT_004da100;
                                          for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1) {
                                            *(undefined4 *)pcVar6 = *(undefined4 *)pcVar5;
                                            pcVar5 = pcVar5 + 4;
                                            pcVar6 = pcVar6 + 4;
                                          }
                                          for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
                                            *pcVar6 = *pcVar5;
                                            pcVar5 = pcVar5 + 1;
                                            pcVar6 = pcVar6 + 1;
                                          }
                                          return (char *)&DAT_004da100;
                                        }
                                        if (key_code == 0x170) {
                                          pcVar5 = s_RIM0Btn4_00471974;
                                        }
                                        else {
                                          if (key_code == 0x171) {
                                            uVar3 = 0xffffffff;
                                            pcVar5 = &DAT_00471968;
                                            do {
                                              pcVar6 = pcVar5;
                                              if (uVar3 == 0) break;
                                              uVar3 = uVar3 - 1;
                                              pcVar6 = pcVar5 + 1;
                                              cVar1 = *pcVar5;
                                              pcVar5 = pcVar6;
                                            } while (cVar1 != '\0');
                                            uVar3 = ~uVar3;
                                            pcVar5 = pcVar6 + -uVar3;
                                            pcVar6 = (char *)&DAT_004da100;
                                            for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1)
                                            {
                                              *(undefined4 *)pcVar6 = *(undefined4 *)pcVar5;
                                              pcVar5 = pcVar5 + 4;
                                              pcVar6 = pcVar6 + 4;
                                            }
                                            for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
                                              *pcVar6 = *pcVar5;
                                              pcVar5 = pcVar5 + 1;
                                              pcVar6 = pcVar6 + 1;
                                            }
                                            return (char *)&DAT_004da100;
                                          }
                                          if (key_code == 0x172) {
                                            pcVar5 = s_RIM1Btn1_0047195c;
                                          }
                                          else {
                                            if (key_code == 0x173) {
                                              uVar3 = 0xffffffff;
                                              pcVar5 = &DAT_00471950;
                                              do {
                                                pcVar6 = pcVar5;
                                                if (uVar3 == 0) break;
                                                uVar3 = uVar3 - 1;
                                                pcVar6 = pcVar5 + 1;
                                                cVar1 = *pcVar5;
                                                pcVar5 = pcVar6;
                                              } while (cVar1 != '\0');
                                              uVar3 = ~uVar3;
                                              pcVar5 = pcVar6 + -uVar3;
                                              pcVar6 = (char *)&DAT_004da100;
                                              for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1
                                                  ) {
                                                *(undefined4 *)pcVar6 = *(undefined4 *)pcVar5;
                                                pcVar5 = pcVar5 + 4;
                                                pcVar6 = pcVar6 + 4;
                                              }
                                              for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1)
                                              {
                                                *pcVar6 = *pcVar5;
                                                pcVar5 = pcVar5 + 1;
                                                pcVar6 = pcVar6 + 1;
                                              }
                                              return (char *)&DAT_004da100;
                                            }
                                            if (key_code == 0x174) {
                                              pcVar5 = s_RIM1Btn3_00471944;
                                            }
                                            else {
                                              if (key_code == 0x175) {
                                                uVar3 = 0xffffffff;
                                                pcVar5 = &DAT_00471938;
                                                do {
                                                  pcVar6 = pcVar5;
                                                  if (uVar3 == 0) break;
                                                  uVar3 = uVar3 - 1;
                                                  pcVar6 = pcVar5 + 1;
                                                  cVar1 = *pcVar5;
                                                  pcVar5 = pcVar6;
                                                } while (cVar1 != '\0');
                                                uVar3 = ~uVar3;
                                                pcVar5 = pcVar6 + -uVar3;
                                                pcVar6 = (char *)&DAT_004da100;
                                                for (uVar4 = uVar3 >> 2; uVar4 != 0;
                                                    uVar4 = uVar4 - 1) {
                                                  *(undefined4 *)pcVar6 = *(undefined4 *)pcVar5;
                                                  pcVar5 = pcVar5 + 4;
                                                  pcVar6 = pcVar6 + 4;
                                                }
                                                for (uVar3 = uVar3 & 3; uVar3 != 0;
                                                    uVar3 = uVar3 - 1) {
                                                  *pcVar6 = *pcVar5;
                                                  pcVar5 = pcVar5 + 1;
                                                  pcVar6 = pcVar6 + 1;
                                                }
                                                return (char *)&DAT_004da100;
                                              }
                                              if (key_code == 0x176) {
                                                pcVar5 = s_RIM1Btn5_0047192c;
                                              }
                                              else {
                                                if (key_code == 0x177) {
                                                  uVar3 = 0xffffffff;
                                                  pcVar5 = &DAT_00471920;
                                                  do {
                                                    pcVar6 = pcVar5;
                                                    if (uVar3 == 0) break;
                                                    uVar3 = uVar3 - 1;
                                                    pcVar6 = pcVar5 + 1;
                                                    cVar1 = *pcVar5;
                                                    pcVar5 = pcVar6;
                                                  } while (cVar1 != '\0');
                                                  uVar3 = ~uVar3;
                                                  pcVar5 = pcVar6 + -uVar3;
                                                  pcVar6 = (char *)&DAT_004da100;
                                                  for (uVar4 = uVar3 >> 2; uVar4 != 0;
                                                      uVar4 = uVar4 - 1) {
                                                    *(undefined4 *)pcVar6 = *(undefined4 *)pcVar5;
                                                    pcVar5 = pcVar5 + 4;
                                                    pcVar6 = pcVar6 + 4;
                                                  }
                                                  for (uVar3 = uVar3 & 3; uVar3 != 0;
                                                      uVar3 = uVar3 - 1) {
                                                    *pcVar6 = *pcVar5;
                                                    pcVar5 = pcVar5 + 1;
                                                    pcVar6 = pcVar6 + 1;
                                                  }
                                                  return (char *)&DAT_004da100;
                                                }
                                                if (key_code == 0x178) {
                                                  pcVar5 = s_RIM2Btn2_00471914;
                                                }
                                                else {
                                                  if (key_code == 0x179) {
                                                    uVar3 = 0xffffffff;
                                                    pcVar5 = &DAT_00471908;
                                                    do {
                                                      pcVar6 = pcVar5;
                                                      if (uVar3 == 0) break;
                                                      uVar3 = uVar3 - 1;
                                                      pcVar6 = pcVar5 + 1;
                                                      cVar1 = *pcVar5;
                                                      pcVar5 = pcVar6;
                                                    } while (cVar1 != '\0');
                                                    uVar3 = ~uVar3;
                                                    pcVar5 = pcVar6 + -uVar3;
                                                    pcVar6 = (char *)&DAT_004da100;
                                                    for (uVar4 = uVar3 >> 2; uVar4 != 0;
                                                        uVar4 = uVar4 - 1) {
                                                      *(undefined4 *)pcVar6 = *(undefined4 *)pcVar5;
                                                      pcVar5 = pcVar5 + 4;
                                                      pcVar6 = pcVar6 + 4;
                                                    }
                                                    for (uVar3 = uVar3 & 3; uVar3 != 0;
                                                        uVar3 = uVar3 - 1) {
                                                      *pcVar6 = *pcVar5;
                                                      pcVar5 = pcVar5 + 1;
                                                      pcVar6 = pcVar6 + 1;
                                                    }
                                                    return (char *)&DAT_004da100;
                                                  }
                                                  if (key_code == 0x17a) {
                                                    pcVar5 = s_RIM2Btn4_004718fc;
                                                  }
                                                  else {
                                                    if (key_code == 0x17b) {
                                                      uVar3 = 0xffffffff;
                                                      pcVar5 = &DAT_004718f0;
                                                      do {
                                                        pcVar6 = pcVar5;
                                                        if (uVar3 == 0) break;
                                                        uVar3 = uVar3 - 1;
                                                        pcVar6 = pcVar5 + 1;
                                                        cVar1 = *pcVar5;
                                                        pcVar5 = pcVar6;
                                                      } while (cVar1 != '\0');
                                                      uVar3 = ~uVar3;
                                                      pcVar5 = pcVar6 + -uVar3;
                                                      pcVar6 = (char *)&DAT_004da100;
                                                      for (uVar4 = uVar3 >> 2; uVar4 != 0;
                                                          uVar4 = uVar4 - 1) {
                                                        *(undefined4 *)pcVar6 =
                                                             *(undefined4 *)pcVar5;
                                                        pcVar5 = pcVar5 + 4;
                                                        pcVar6 = pcVar6 + 4;
                                                      }
                                                      for (uVar3 = uVar3 & 3; uVar3 != 0;
                                                          uVar3 = uVar3 - 1) {
                                                        *pcVar6 = *pcVar5;
                                                        pcVar5 = pcVar5 + 1;
                                                        pcVar6 = pcVar6 + 1;
                                                      }
                                                      return (char *)&DAT_004da100;
                                                    }
                                                    if (key_code < 0x164) goto LAB_00403e30;
                                                    pcVar5 = s_RawInput___004718e4;
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  uVar3 = 0xffffffff;
  do {
    pcVar6 = pcVar5;
    if (uVar3 == 0) break;
    uVar3 = uVar3 - 1;
    pcVar6 = pcVar5 + 1;
    cVar1 = *pcVar5;
    pcVar5 = pcVar6;
  } while (cVar1 != '\0');
  uVar3 = ~uVar3;
  pcVar5 = pcVar6 + -uVar3;
  pcVar6 = (char *)&DAT_004da100;
  for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1) {
    *(undefined4 *)pcVar6 = *(undefined4 *)pcVar5;
    pcVar5 = pcVar5 + 4;
    pcVar6 = pcVar6 + 4;
  }
  for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
    *pcVar6 = *pcVar5;
    pcVar5 = pcVar5 + 1;
    pcVar6 = pcVar6 + 1;
  }
LAB_00403e30:
  return (char *)&DAT_004da100;
}



/* perks_generate_choices @ 004045a0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* builds the current perk choice list */

void perks_generate_choices(void)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int *piVar4;
  int iVar5;
  undefined4 *puVar6;
  
  iVar5 = 0;
  puVar6 = &perk_choice_ids;
  for (iVar3 = 7; iVar3 != 0; iVar3 = iVar3 + -1) {
    *puVar6 = 0;
    puVar6 = puVar6 + 1;
  }
LAB_004045be:
  if ((((iVar5 == 0) && (_quest_stage_major == *quest_monster_vision_meta)) &&
      (_quest_stage_minor == quest_monster_vision_meta[1])) &&
     (iVar3 = perk_count_get(perk_id_monster_vision), iVar3 == 0)) {
    iVar5 = 1;
    perk_choice_ids = perk_id_monster_vision;
  }
  iVar3 = 0;
LAB_00404603:
  do {
    iVar3 = iVar3 + 1;
    iVar1 = perk_select_random();
    iVar2 = perk_id_pyromaniac;
    (&perk_choice_ids)[iVar5] = iVar1;
    if (iVar1 == iVar2) {
      if (player_weapon_id != 8) goto LAB_00404603;
    }
    iVar2 = perk_count_get(perk_id_death_clock);
    if (((iVar2 == 0) ||
        ((((((iVar2 = (&perk_choice_ids)[iVar5], iVar2 != perk_id_jinxed &&
             (iVar2 != perk_id_breathing_room)) &&
            ((iVar2 != perk_id_grim_deal &&
             ((iVar2 != perk_id_highlander && (iVar2 != perk_id_fatal_lottery)))))) &&
           (iVar2 != DAT_004c2b8c)) &&
          (((iVar2 != perk_id_ammunition_within && (iVar2 != perk_id_infernal_contract)) &&
           (iVar2 != perk_id_regeneration)))) &&
         (((iVar2 != perk_id_greater_regeneration && (iVar2 != perk_id_thick_skinned)) &&
          (iVar2 != perk_id_bandage)))))) &&
       ((((iVar2 = (&perk_choice_ids)[iVar5], iVar2 != perk_id_jinxed &&
          (iVar2 != perk_id_ammunition_within)) &&
         ((iVar2 != perk_id_anxious_loader && (iVar2 != perk_id_monster_vision)))) ||
        (iVar2 = _rand(), ((byte)iVar2 & 3) != 1)))) {
      if ((10000 < iVar3) && (((&perk_flags_table)[(&perk_choice_ids)[iVar5] * 0x14] & 4) != 0))
      break;
      piVar4 = &perk_choice_ids;
      for (iVar2 = 0; iVar2 < iVar5; iVar2 = iVar2 + 1) {
        if (*piVar4 == (&perk_choice_ids)[iVar5]) goto LAB_00404603;
        piVar4 = piVar4 + 1;
      }
      if (((((&perk_flags_table)[(&perk_choice_ids)[iVar5] * 0x14] & 4) != 0) ||
          ((int)(&player_perk_counts)[(&perk_choice_ids)[iVar5]] < 1)) || (29999 < iVar3)) break;
    }
  } while( true );
  if (24999 < iVar3) {
    console_printf(&console_log_queue,(byte *)s_Perk_Randomizer_failed_to_genera_00471afc);
  }
  iVar5 = iVar5 + 1;
  if (6 < iVar5) {
    if (_config_game_mode == 8) {
      perk_choice_ids = perk_id_sharpshooter;
      DAT_004807ec = perk_id_long_distance_runner;
      _DAT_004807f0 = perk_id_evil_eyes;
      _DAT_004807f4 = perk_id_radioactive;
      _DAT_004807f8 = perk_id_fastshot;
      _DAT_004807fc = perk_id_fastshot;
      _DAT_00480800 = perk_id_fastshot;
    }
    return;
  }
  goto LAB_004045be;
}



/* demo_trial_overlay_render @ 004047c0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* renders the demo trial warning panel and remaining time message */

void __cdecl demo_trial_overlay_render(float *xy,float alpha)

{
  int iVar1;
  int iVar2;
  int iVar3;
  float fVar4;
  char *pcVar5;
  float fStack_1b0;
  int *piStack_1ac;
  float fStack_1a8;
  float fStack_1a4;
  char *pcStack_1a0;
  float fStack_19c;
  float fStack_198;
  undefined4 uStack_194;
  undefined4 uStack_190;
  char acStack_18c [16];
  undefined4 uStack_17c;
  char *pcStack_178;
  undefined4 uStack_174;
  undefined4 uStack_170;
  undefined4 uStack_16c;
  undefined4 uStack_168;
  undefined4 uStack_164;
  float *pfStack_160;
  undefined4 uStack_15c;
  undefined4 uStack_158;
  undefined4 uStack_154;
  undefined4 uStack_150;
  undefined4 uStack_14c;
  undefined4 uStack_148;
  float *pfStack_144;
  undefined4 uStack_140;
  undefined4 uStack_13c;
  undefined4 *puStack_138;
  undefined4 local_110;
  char local_10c [8];
  float local_104;
  undefined4 uStack_8;
  
  local_104 = alpha * 0.8;
  puStack_138 = &local_110;
  DAT_00480850 = 1;
  local_110 = 0;
  local_10c[0] = '\0';
  local_10c[1] = '\0';
  local_10c[2] = '\0';
  local_10c[3] = '\0';
  local_10c[4] = '\0';
  local_10c[5] = '\0';
  local_10c[6] = '\0';
  local_10c[7] = '\0';
  uStack_13c = 0x43800000;
  uStack_140 = 0x44000000;
  pfStack_144 = xy;
  uStack_148 = 0x40481f;
  (**(code **)(*grim_interface_ptr + 0xd0))();
  uStack_148 = uStack_8;
  uStack_14c = 0x3f800000;
  uStack_150 = 0x3f800000;
  uStack_154 = 0x3f800000;
  uStack_158 = 0x404844;
  (**(code **)(*grim_interface_ptr + 0x114))();
  uStack_158 = 0x43800000;
  uStack_15c = 0x44000000;
  pfStack_160 = xy;
  uStack_164 = 0x40485d;
  (**(code **)(*grim_interface_ptr + 0xd4))();
  uStack_164 = 0x3f800000;
  uStack_168 = 0x3f800000;
  uStack_16c = 0x3f800000;
  uStack_170 = 0x3f800000;
  uStack_174 = 0x40487f;
  (**(code **)(*grim_interface_ptr + 0x114))();
  uStack_174 = 0;
  pcStack_178 = s_cl_logo_00471f70;
  iVar1 = *grim_interface_ptr;
  uStack_17c = 0x404894;
  uStack_17c = (**(code **)(iVar1 + 0xc0))();
  acStack_18c[0xc] = -0x5f;
  acStack_18c[0xd] = 'H';
  acStack_18c[0xe] = '@';
  acStack_18c[0xf] = '\0';
  (**(code **)(iVar1 + 0xc4))();
  acStack_18c[0xc] = '\0';
  acStack_18c[0xd] = '\0';
  acStack_18c[0xe] = -0x80;
  acStack_18c[0xf] = '?';
  acStack_18c[8] = '\0';
  acStack_18c[9] = '\0';
  acStack_18c[10] = -0x80;
  acStack_18c[0xb] = '?';
  acStack_18c[4] = '\0';
  acStack_18c[5] = '\0';
  acStack_18c[6] = '\0';
  acStack_18c[7] = '\0';
  acStack_18c[0] = '\0';
  acStack_18c[1] = '\0';
  acStack_18c[2] = '\0';
  acStack_18c[3] = '\0';
  uStack_190 = 0x4048bd;
  (**(code **)(*grim_interface_ptr + 0x100))();
  uStack_190 = 0x4239999a;
  fStack_198 = xy[1] + 22.0;
  uStack_194 = 0x43b9999a;
  fStack_19c = *xy + 72.0;
  pcStack_1a0 = (char *)0x4048ee;
  (**(code **)(*grim_interface_ptr + 0x11c))();
  pcStack_1a0 = (char *)0x4048fc;
  (**(code **)(*grim_interface_ptr + 0xf0))();
  pcStack_1a0 = s_You_ve_been_playing_the_Demo_ver_00471f48;
  fStack_1a4 = xy[1] + 9.0;
  fStack_1a8 = *xy + 131.0;
  piStack_1ac = grim_interface_ptr;
  fStack_1b0 = 5.903715e-39;
  (**(code **)(*grim_interface_ptr + 0x148))();
  pcStack_1a0 = (char *)uStack_8;
  fStack_1a4 = 1.0;
  fStack_1a8 = 1.0;
  piStack_1ac = (int *)0x3f800000;
  fStack_1b0 = 5.903762e-39;
  (**(code **)(*grim_interface_ptr + 0x114))();
  (**(code **)(*grim_interface_ptr + 0x20))(0x18,0x3f000000);
  fStack_1b0 = *xy + 26.0;
  piStack_1ac = (int *)(xy[1] + 80.0);
  iVar1 = FUN_0041df50();
  iVar1 = iVar1 - game_sequence_id;
  if (0 < DAT_0048084c) {
    iVar1 = 300000 - DAT_0048084c;
  }
  iVar3 = (iVar1 / 1000) / 0x3c;
  iVar2 = (int)((ulonglong)((longlong)iVar3 * 0x77777777) >> 0x20) - iVar3;
  iVar3 = iVar3 + ((iVar2 >> 5) - (iVar2 >> 0x1f)) * 0x3c;
  iVar2 = iVar1 / 1000 + iVar3 * -0x3c;
  iVar1 = (iVar1 + (iVar3 * 0x3c + iVar2) * -1000) / 10;
  if (iVar3 < 0) {
    iVar2 = 0;
    iVar1 = 0;
    pcVar5 = &DAT_00471f44;
    iVar3 = 0;
  }
  else if (iVar2 < 10) {
    pcVar5 = &DAT_00471f44;
  }
  else {
    pcVar5 = &DAT_00471f40;
  }
  crt_sprintf(local_10c,pcVar5,iVar2);
  if (iVar1 < 10) {
    pcVar5 = s__d__s_0_d_00471f34;
  }
  else {
    pcVar5 = s__d__s__d_00471f28;
  }
  crt_sprintf(acStack_18c,pcVar5,iVar3,local_10c,iVar1);
  iVar1 = game_is_full_version();
  if ((((char)iVar1 == '\0') && (_config_game_mode != 8)) &&
     (game_sequence_id = game_sequence_get(), fVar4 = fStack_1b0, game_sequence_id < 0x249f01)) {
    if (DAT_0048084c < 1) {
      if (_config_game_mode == 3) goto LAB_00404b1b;
    }
    else if ((_config_game_mode == 3) &&
            (fStack_1a8 = (float)(DAT_0048084c / 1000), (float)(int)fStack_1a8 * 0.016666668 <= 5.0)
            ) {
LAB_00404b1b:
      if ((game_state_id == 9) && ((1 < _quest_stage_major || (10 < _quest_stage_minor)))) {
        piStack_1ac = (int *)((float)piStack_1ac - 6.0);
        if (DAT_0048084c < 1) {
          (**(code **)(*grim_interface_ptr + 0x148))
                    (grim_interface_ptr,fStack_1b0,piStack_1ac,
                     s_You_ve_completed_all_Quest_mode_l_00471ee0);
          piStack_1ac = (int *)((float)piStack_1ac + 18.0);
          (**(code **)(*grim_interface_ptr + 0x148))
                    (grim_interface_ptr,fVar4,piStack_1ac,
                     s_However__you_still_have__s_time_l_00471e94,acStack_18c);
          piStack_1ac = (int *)((float)piStack_1ac + 18.0);
          (**(code **)(*grim_interface_ptr + 0x148))
                    (grim_interface_ptr,fVar4,piStack_1ac,&DAT_0047f4d8);
          piStack_1ac = (int *)((float)piStack_1ac + 14.0);
        }
        else {
          piStack_1ac = (int *)((float)piStack_1ac + 6.0);
          (**(code **)(*grim_interface_ptr + 0x148))
                    (grim_interface_ptr,fStack_1b0,piStack_1ac,
                     s_You_ve_completed_all_Quest_mode_l_00471ee0);
          piStack_1ac = (int *)((float)piStack_1ac + 18.0);
        }
        (**(code **)(*grim_interface_ptr + 0x148))
                  (grim_interface_ptr,fVar4,piStack_1ac,s_If_you_would_like_to_have_unlimi_00471e48)
        ;
        piStack_1ac = (int *)((float)piStack_1ac + 18.0);
        (**(code **)(*grim_interface_ptr + 0x148))
                  (grim_interface_ptr,fVar4,piStack_1ac,s_please_upgrade_to_the_full_versi_00471e14)
        ;
        piStack_1ac = (int *)((float)piStack_1ac + 22.0);
        (**(code **)(*grim_interface_ptr + 0x148))
                  (grim_interface_ptr,fVar4,piStack_1ac,s_The_full_version_features_unrest_00471ddc)
        ;
        piStack_1ac = (int *)((float)piStack_1ac + 18.0);
        (**(code **)(*grim_interface_ptr + 0x148))
                  (grim_interface_ptr,fVar4,piStack_1ac,s_game_modes_and_be_able_to_post_y_00471d94)
        ;
        piStack_1ac = (int *)((float)piStack_1ac + 18.0);
        goto LAB_00404ee5;
      }
    }
  }
  fVar4 = fStack_1b0;
  if ((iVar3 < 1) && (iVar2 < 1)) {
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,fStack_1b0,piStack_1ac,s_Trial_time_is_up__If_you_would_l_00471d44
              );
    piStack_1ac = (int *)((float)piStack_1ac + 18.0);
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,fVar4,piStack_1ac,s_all_features__please_upgrade_to_t_00471cf4);
    piStack_1ac = (int *)((float)piStack_1ac + 18.0);
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,fVar4,piStack_1ac,s_is_very_easy_and_takes_just_minu_00471ccc);
    piStack_1ac = (int *)((float)piStack_1ac + 24.0);
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,fVar4,piStack_1ac,s_Buy_the_full_version_to_gain_unr_00471c90);
    piStack_1ac = (int *)((float)piStack_1ac + 18.0);
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,fVar4,piStack_1ac,s_game_modes_and_be_able_to_post_y_00471d94);
    piStack_1ac = (int *)((float)piStack_1ac + 18.0);
  }
  else {
    piStack_1ac = (int *)((float)piStack_1ac - 7.0);
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,fStack_1b0,piStack_1ac,
               s_You_have_used_up_your_play_time_i_00471c48,acStack_18c);
    piStack_1ac = (int *)((float)piStack_1ac + 16.0);
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,fVar4,piStack_1ac,s_have__s_time_left_to_play_Quest_m_00471c14,
               acStack_18c);
    piStack_1ac = (int *)((float)piStack_1ac + 22.0);
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,fVar4,piStack_1ac,s_If_you_would_like_to_have_unlimi_00471e48);
    piStack_1ac = (int *)((float)piStack_1ac + 16.0);
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,fVar4,piStack_1ac,s_please_upgrade_to_the_full_versi_00471bc4);
    piStack_1ac = (int *)((float)piStack_1ac + 16.0);
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,fVar4,piStack_1ac,s_and_takes_just_minutes__00471ba8);
    piStack_1ac = (int *)((float)piStack_1ac + 22.0);
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,fVar4,piStack_1ac,s_Buy_the_full_version_to_gain_unr_00471c90);
    piStack_1ac = (int *)((float)piStack_1ac + 16.0);
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,fVar4,piStack_1ac,s_game_modes_and_be_able_to_post_y_00471d94);
    piStack_1ac = (int *)((float)piStack_1ac + 16.0);
  }
LAB_00404ee5:
  (**(code **)(*grim_interface_ptr + 0x148))
            (grim_interface_ptr,fVar4,piStack_1ac,s_it_now__You_ll_have_a_great_time_00471b84);
  if ((DAT_0047f62c & 1) == 0) {
    DAT_0047f62c = DAT_0047f62c | 1;
    DAT_0048080e = 1;
    DAT_0048081d = 0;
    DAT_0048081c = 0;
    _DAT_00480818 = 0x3f800000;
    _DAT_00480814 = 0;
    _DAT_00480808 = (char *)0x0;
    DAT_0048080c = 0;
    DAT_0048080d = 0;
    _DAT_00480810 = 0;
    crt_atexit(&DAT_00405150);
  }
  _DAT_00480808 = s_Maybe_later_00471b78;
  if ((DAT_0047f62c & 2) == 0) {
    DAT_0047f62c = DAT_0047f62c | 2;
    DAT_0047f5fe = 1;
    DAT_0047f60d = 0;
    DAT_0047f60c = 0;
    _DAT_0047f608 = 0x3f800000;
    _DAT_0047f604 = 0;
    _ui_button_table_a = (char *)0x0;
    DAT_0047f5fc = 0;
    DAT_0047f5fd = 0;
    _DAT_0047f600 = 0;
    crt_atexit(&DAT_00405140);
  }
  _ui_button_table_a = s_Purchase_00471b6c;
  if ((DAT_0047f62c & 4) == 0) {
    DAT_0047f62c = DAT_0047f62c | 4;
    DAT_0047f616 = 1;
    DAT_0047f625 = 0;
    DAT_0047f624 = 0;
    _DAT_0047f620 = 0x3f800000;
    _DAT_0047f61c = 0;
    _DAT_0047f610 = (char *)0x0;
    DAT_0047f614 = 0;
    DAT_0047f615 = 0;
    _DAT_0047f618 = 0;
    crt_atexit(&DAT_00405130);
  }
  _DAT_0047f610 = s_Already_paid_00471b5c;
  fStack_1a4 = *xy + 22.0;
  fStack_1b0 = fStack_1a4 + 6.0;
  piStack_1ac = (int *)(xy[1] + 212.0 + 6.0);
  fStack_1a8 = (float)piStack_1ac;
  iVar1 = ui_button_update(&fStack_1b0,(int *)&ui_button_table_a);
  if ((char)iVar1 != '\0') {
    DAT_00480851 = 1;
    DAT_0047ea50 = 1;
    ShellExecuteA((HWND)0x0,&DAT_00471b38,s_http___buy_crimsonland_com_00471b40,(LPCSTR)0x0,
                  (LPCSTR)0x0,1);
  }
  fStack_1a4 = fStack_1a4 + 326.0;
  pcStack_1a0 = (char *)fStack_1a8;
  iVar1 = ui_button_update(&fStack_1a4,(int *)&DAT_00480808);
  if ((char)iVar1 != '\0') {
    ui_transition_direction = 0;
    game_state_pending = 0;
    render_pass_mode = 0;
    sfx_mute_all(music_track_intro_id);
    sfx_mute_all(music_track_shortie_monk_id);
    sfx_mute_all(music_track_extra_0);
    sfx_play_exclusive(music_track_crimson_theme_id);
  }
  return;
}



/* ui_render_keybind_help @ 00405160 */

/* renders the in-game key bindings help overlay */

void __cdecl ui_render_keybind_help(float *xy,float alpha)

{
  int iVar1;
  int iVar2;
  int iVar3;
  undefined4 uVar4;
  char *pcVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  int iStack_5c;
  undefined4 local_10;
  undefined4 local_c;
  undefined4 local_8;
  float local_4;
  
  local_4 = alpha * 0.8;
  local_10 = 0;
  local_c = 0;
  local_8 = 0;
  (**(code **)(*grim_interface_ptr + 0xd0))(xy,0x44000000,0x43800000,&local_10);
  uVar4 = local_8;
  (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,local_8);
  (**(code **)(*grim_interface_ptr + 0xd4))(xy,0x44000000,0x43800000);
  (**(code **)(*grim_interface_ptr + 0x20))(0x18,0x3f4ccccd);
  (**(code **)(*grim_interface_ptr + 0x140))
            (grim_interface_ptr,*xy + 16.0,xy[1] + 16.0,s_key_info_00471ffc);
  (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,uVar4);
  (**(code **)(*grim_interface_ptr + 0x20))(0x18,0x3f000000);
  fVar7 = *xy + 32.0;
  fVar6 = xy[1] + 50.0;
  fVar8 = fVar7;
  fVar9 = fVar6;
  (**(code **)(*grim_interface_ptr + 0x148))(grim_interface_ptr,fVar7,fVar6,s_Level_Up__00471ff0);
  fVar10 = fVar8 + 128.0;
  iVar2 = *grim_interface_ptr;
  pcVar5 = input_key_name(config_key_pick_perk);
  (**(code **)(iVar2 + 0x148))
            (grim_interface_ptr,fVar10,fVar6,s__s_or_SPACE_BAR_or_KeyPadAdd_00471fd0,pcVar5);
  fVar9 = fVar9 + 18.0;
  fVar6 = fVar9;
  (**(code **)(*grim_interface_ptr + 0x148))(grim_interface_ptr,fVar7,fVar9,s_Reload__00471fc8);
  iVar2 = *grim_interface_ptr;
  pcVar5 = input_key_name(config_key_reload);
  (**(code **)(iVar2 + 0x148))(grim_interface_ptr,fVar10,fVar9,&DAT_00471fc4,pcVar5);
  iStack_5c = 0;
  fVar6 = fVar6 + 18.0 + 20.0;
  fVar10 = fVar6;
  do {
    iVar2 = iStack_5c * 5;
    if (iStack_5c == 1) {
      fVar7 = fVar8 + 256.0;
      fVar8 = fVar7;
    }
    iVar1 = iStack_5c + 1;
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,fVar7,fVar6,s_Player__d_00471fb8,iVar1);
    fVar10 = fVar10 + 22.0;
    fVar6 = fVar10;
    (**(code **)(*grim_interface_ptr + 0x148))(grim_interface_ptr,fVar7,fVar10,&DAT_00471fb4);
    fVar9 = fVar8 + 64.0;
    iVar3 = *grim_interface_ptr;
    pcVar5 = input_key_name((&config_keybind_table)[iStack_5c * 5]);
    (**(code **)(iVar3 + 0x148))(grim_interface_ptr,fVar9,fVar10,&DAT_00471fc4,pcVar5);
    fVar6 = fVar6 + 16.0;
    (**(code **)(*grim_interface_ptr + 0x148))(grim_interface_ptr,fVar7,fVar6,s_Down__00471fac);
    iVar3 = *grim_interface_ptr;
    pcVar5 = input_key_name((&config_keybind_table)[iVar2 + 1]);
    (**(code **)(iVar3 + 0x148))(grim_interface_ptr,fVar9,fVar6,&DAT_00471fc4,pcVar5);
    fVar6 = fVar6 + 16.0;
    (**(code **)(*grim_interface_ptr + 0x148))(grim_interface_ptr,fVar7,fVar6,s_Left__00471fa4);
    iVar3 = *grim_interface_ptr;
    pcVar5 = input_key_name((&config_keybind_table)[iVar2 + 2]);
    (**(code **)(iVar3 + 0x148))(grim_interface_ptr,fVar9,fVar6,&DAT_00471fc4,pcVar5);
    fVar6 = fVar6 + 16.0;
    (**(code **)(*grim_interface_ptr + 0x148))(grim_interface_ptr,fVar7,fVar6,s_Right__00471f9c);
    iVar3 = *grim_interface_ptr;
    pcVar5 = input_key_name((&config_keybind_table)[iVar2 + 3]);
    (**(code **)(iVar3 + 0x148))(grim_interface_ptr,fVar9,fVar6,&DAT_00471fc4,pcVar5);
    fVar6 = fVar6 + 16.0;
    fVar10 = fVar6;
    (**(code **)(*grim_interface_ptr + 0x148))(grim_interface_ptr,fVar7,fVar6,s_Fire__00471f94);
    iVar3 = *grim_interface_ptr;
    pcVar5 = input_key_name((&DAT_00480514)[iVar2 + 3]);
    (**(code **)(iVar3 + 0x148))(grim_interface_ptr,fVar9,fVar6,&DAT_00471fc4,pcVar5);
    if (iStack_5c == 0) {
      fVar6 = fVar10 - 94.0;
      fVar10 = fVar6;
    }
    iStack_5c = iVar1;
  } while (iVar1 < 2);
  (**(code **)(*grim_interface_ptr + 0x148))
            (grim_interface_ptr,fVar8 - 20.0,fVar10 + 32.0,s_Press_F1_to_return_to_game_00471f78);
  return;
}



/* perk_apply @ 004055e0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* applies perk effects and increments perk counter */

void __cdecl perk_apply(int perk_id)

{
  float fVar1;
  uint uVar2;
  int iVar3;
  float *pfVar4;
  char *pcVar5;
  int iVar6;
  int *piVar7;
  bool bVar8;
  longlong lVar9;
  
  sfx_play(sfx_ui_bonus);
  bVar8 = perk_id == perk_id_instant_winner;
  (&player_perk_counts)[perk_id] = (&player_perk_counts)[perk_id] + 1;
  iVar3 = _config_player_count;
  if (bVar8) {
    player_experience = player_experience + 0x9c4;
  }
  else if (perk_id == perk_id_fatal_lottery) {
    uVar2 = _rand();
    iVar3 = _config_player_count;
    if ((uVar2 & 1) == 0) {
      player_experience = player_experience + 10000;
    }
    else {
      player_health = -1.0;
    }
  }
  else if (perk_id == perk_id_lifeline_50_50) {
    bVar8 = false;
    pcVar5 = &creature_pool;
    do {
      if ((((bVar8) && (*pcVar5 != '\0')) && (*(float *)(pcVar5 + 0x24) <= 500.0)) &&
         ((pcVar5[0x8c] & 4U) == 0)) {
        *pcVar5 = '\0';
        effect_spawn_burst((float *)(pcVar5 + 0x14),4);
      }
      pcVar5 = pcVar5 + 0x98;
      bVar8 = (bool)(bVar8 ^ 1);
      iVar3 = _config_player_count;
    } while ((int)pcVar5 < 0x4aa338);
  }
  else if (perk_id == perk_id_thick_skinned) {
    if (0 < _config_player_count) {
      pfVar4 = &player_health;
      iVar6 = _config_player_count;
      do {
        if ((0.0 < *pfVar4) &&
           (fVar1 = *pfVar4 - *pfVar4 * 0.33333334, *pfVar4 = fVar1, fVar1 <= 0.0)) {
          *pfVar4 = 1.0;
        }
        pfVar4 = pfVar4 + 0xd8;
        iVar6 = iVar6 + -1;
      } while (iVar6 != 0);
    }
  }
  else if (perk_id == perk_id_breathing_room) {
    if (0 < _config_player_count) {
      pfVar4 = &player_health;
      iVar6 = _config_player_count;
      do {
        iVar6 = iVar6 + -1;
        *pfVar4 = *pfVar4 - *pfVar4 * 0.6666667;
        pfVar4 = pfVar4 + 0xd8;
      } while (iVar6 != 0);
    }
    pfVar4 = (float *)&creature_hitbox_size;
    do {
      if (*(char *)(pfVar4 + -4) != '\0') {
        *pfVar4 = *pfVar4 - frame_dt;
      }
      pfVar4 = pfVar4 + 0x26;
    } while ((int)pfVar4 < 0x4aa348);
    bonus_spawn_guard = 0;
  }
  else if (perk_id == perk_id_random_weapon) {
    iVar3 = 0;
    do {
      iVar6 = weapon_pick_random_available();
      iVar3 = iVar3 + 1;
      if ((iVar6 != 1) && (iVar6 != player_weapon_id)) break;
    } while (iVar3 < 100);
    weapon_assign_player(0,iVar6);
    iVar3 = _config_player_count;
  }
  if (perk_id == perk_id_infernal_contract) {
    player_level = player_level + 3;
    perk_pending_count = perk_pending_count + 3;
    if (0.0 < player_health) {
      player_health = 0.1;
    }
    if (0.0 < player2_health) {
      player2_health = 0.1;
    }
  }
  if (perk_id == perk_id_grim_deal) {
    lVar9 = __ftol();
    player_health = -1.0;
    player_experience = player_experience + (int)lVar9;
  }
  if ((perk_id == perk_id_ammo_maniac) && (iVar6 = 0, 0 < iVar3)) {
    piVar7 = &player_weapon_id;
    do {
      weapon_assign_player(iVar6,*piVar7);
      iVar6 = iVar6 + 1;
      piVar7 = piVar7 + 0xd8;
      iVar3 = _config_player_count;
    } while (iVar6 < _config_player_count);
  }
  iVar6 = perk_id_regeneration;
  if (perk_id == perk_id_death_clock) {
    (&player_perk_counts)[perk_id_greater_regeneration] = 0;
    (&player_perk_counts)[iVar6] = 0;
    if (0 < iVar3) {
      pfVar4 = &player_health;
      iVar6 = iVar3;
      do {
        if (0.0 < *pfVar4) {
          *pfVar4 = 100.0;
        }
        pfVar4 = pfVar4 + 0xd8;
        iVar6 = iVar6 + -1;
      } while (iVar6 != 0);
    }
  }
  if ((perk_id == perk_id_bandage) && (iVar6 = 0, 0 < iVar3)) {
    pfVar4 = &player_health;
    do {
      iVar3 = _rand();
      fVar1 = ((float)(iVar3 % 0x32) + 1.0) * *pfVar4;
      *pfVar4 = fVar1;
      if (100.0 < fVar1) {
        *pfVar4 = 100.0;
      }
      effect_spawn_burst(pfVar4 + -4,8);
      iVar6 = iVar6 + 1;
      pfVar4 = pfVar4 + 0xd8;
      iVar3 = _config_player_count;
    } while (iVar6 < _config_player_count);
  }
  if ((perk_id == perk_id_my_favourite_weapon) && (0 < iVar3)) {
    pfVar4 = (float *)&player_clip_size;
    do {
      iVar3 = iVar3 + -1;
      *pfVar4 = *pfVar4 + 2.0;
      pfVar4 = pfVar4 + 0xd8;
    } while (iVar3 != 0);
  }
  if (perk_id == perk_id_plaguebearer) {
    player_plaguebearer_active = 1;
  }
  return;
}



/* gameplay_render_world @ 00405960 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* world render pass: updates gameplay fade and draws fx queue, creatures, players, projectiles,
   bonuses */

void gameplay_render_world(void)

{
  int player_index;
  int *piVar1;
  
  ui_transition_alpha = (float)ui_elements_timeline / (float)(DAT_0048eb48 - DAT_0048eb4c);
  if (quest_unlock_index_full < 0x28) {
    if (player_weapon_id == 0x1d) {
      weapon_assign_player(0,1);
    }
    if (player2_weapon_id == 0x1d) {
      weapon_assign_player(1,1);
    }
  }
  player_index = 0;
  piVar1 = &player_weapon_id;
  do {
    if ((*piVar1 == 0x19) && (DAT_00486fb8 != 0x19)) {
      weapon_assign_player(player_index,1);
    }
    if ((*piVar1 == 0x18) && (DAT_00486fb8 != 0x18)) {
      weapon_assign_player(player_index,1);
    }
    piVar1 = piVar1 + 0xd8;
    player_index = player_index + 1;
  } while ((int)piVar1 < 0x491230);
  if (DAT_00487241 == '\0') {
    if (((game_state_id == 9) || (game_state_id == 6)) ||
       ((((game_state_id == 8 || ((game_state_id == 0xc || (game_state_id == 7)))) &&
         (ui_transition_direction != '\0')) ||
        ((((game_state_pending == 9 || (game_state_pending == 6)) || (game_state_pending == 5)) ||
         ((game_state_pending == 2 || (game_state_pending == 3)))))))) {
LAB_00405a7f:
      ui_transition_alpha = 1.0;
      goto LAB_00405a89;
    }
    if (game_state_id != 5) {
      if (((game_state_id != 2) && (game_state_id != 3)) &&
         ((game_state_pending != 0x15 &&
          (((game_state_pending != 7 && (game_state_pending != 8)) && (game_state_pending != 0xc))))
         )) goto LAB_00405a89;
      goto LAB_00405a7f;
    }
    if (game_state_pending != 0) goto LAB_00405a7f;
  }
  else {
LAB_00405a89:
    if ((game_state_id != 5) || (game_state_pending != 0)) goto LAB_00405ab3;
  }
  ui_transition_alpha = (float)ui_elements_timeline / (float)(DAT_0048eb48 - DAT_0048eb4c);
LAB_00405ab3:
  if (ui_transition_alpha <= 1.0) {
    if (ui_transition_alpha < 0.0) {
      ui_transition_alpha = 0.0;
    }
  }
  else {
    ui_transition_alpha = 1.0;
  }
  fx_queue_render();
  FUN_004188a0();
  render_overlay_player_index = 0;
  if (0 < _config_player_count) {
    do {
      if ((float)(&player_health)[render_overlay_player_index * 0xd8] <= 0.0) {
        player_render_overlays();
      }
      render_overlay_player_index = render_overlay_player_index + 1;
    } while (render_overlay_player_index < _config_player_count);
  }
  creature_render_all();
  render_overlay_player_index = 0;
  if (0 < _config_player_count) {
    do {
      if (0.0 < (float)(&player_health)[render_overlay_player_index * 0xd8]) {
        player_render_overlays();
      }
      render_overlay_player_index = render_overlay_player_index + 1;
    } while (render_overlay_player_index < _config_player_count);
  }
  projectile_render();
  bonus_render();
  if (0.0 < screen_fade_alpha) {
    (**(code **)(*grim_interface_ptr + 0xcc))(0,0,0,screen_fade_alpha);
  }
  return;
}



/* FUN_00405be0 @ 00405be0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_00405be0(void)

{
  undefined4 *puVar1;
  int iVar2;
  int *piVar3;
  float fStack_80;
  float fStack_7c;
  undefined4 uStack_78;
  undefined4 uStack_74;
  float fVar4;
  float fVar5;
  float fStack_48;
  float fStack_44;
  undefined4 uStack_40;
  undefined4 uStack_3c;
  
  uStack_3c = 0x405bec;
  gameplay_render_world();
  uStack_3c = 0x405bf1;
  ui_elements_update_and_render();
  uStack_3c = 0x3f800000;
  uStack_40 = 0x3f800000;
  fStack_44 = 1.0;
  fStack_48 = 1.0;
  (**(code **)(*grim_interface_ptr + 0x114))();
  __ftol();
  __ftol();
  FUN_00417ae0();
  (**(code **)(*grim_interface_ptr + 0x114))();
  if ((int)(&player_perk_counts)[perk_id_perk_master] < 1) {
    if (0 < (int)(&player_perk_counts)[perk_id_perk_expert]) {
      (**(code **)(*grim_interface_ptr + 0x148))();
      fStack_44 = 8.40779e-45;
    }
  }
  else {
    (**(code **)(*grim_interface_ptr + 0x148))();
    fStack_44 = 9.80909e-45;
  }
  if (0 < (int)(&player_perk_counts)[perk_id_perk_expert]) {
    uStack_40 = 0x41900000;
  }
  if ((DAT_004807c8 & 1) == 0) {
    DAT_004807c8 = DAT_004807c8 | 1;
    _DAT_00480298 = 0x3e8c8c8d;
    _DAT_0048029c = 0x3f34b4b5;
    _DAT_004802a0 = 0x3f70f0f1;
    _DAT_004802a4 = 0x3f19999a;
    crt_atexit(&DAT_00406170);
  }
  if ((DAT_004807c8 & 2) == 0) {
    DAT_004807c8 = DAT_004807c8 | 2;
    _DAT_00480310 = 0x3e8c8c8d;
    _DAT_00480314 = 0x3f34b4b5;
    _DAT_00480318 = 0x3f70f0f1;
    _DAT_0048031c = 0x3f800000;
    crt_atexit(&DAT_00406160);
  }
  (**(code **)(*grim_interface_ptr + 0x114))();
  if ((DAT_004807c8 & 4) == 0) {
    DAT_004807c8 = DAT_004807c8 | 4;
    iVar2 = 10;
    puVar1 = &DAT_004800b4;
    do {
      *(undefined1 *)((int)puVar1 + -6) = 1;
      *puVar1 = 0x3f800000;
      puVar1[-3] = 0;
      *(undefined1 *)(puVar1 + -2) = 0;
      *(undefined1 *)((int)puVar1 + -7) = 0;
      puVar1[-1] = 0;
      puVar1 = puVar1 + 4;
      iVar2 = iVar2 + -1;
    } while (iVar2 != 0);
    crt_atexit(&DAT_00406150);
  }
  iVar2 = 0;
  puVar1 = &DAT_004800a8;
  piVar3 = &perk_choice_ids;
  do {
    *puVar1 = (&perk_name_table)[*piVar3 * 5];
    uStack_74 = 0x405ecf;
    FUN_0043e5e0(&fStack_48,puVar1);
    if (*(char *)(puVar1 + 1) != '\0') {
      DAT_0048089c = iVar2;
    }
    fStack_44 = fStack_44 + 1.0;
    iVar2 = iVar2 + 1;
    piVar3 = piVar3 + 1;
    puVar1 = puVar1 + 4;
  } while (iVar2 < 0x3f800000);
  fStack_44 = (fStack_44 + 32.0) - 20.0;
  fStack_48 = fStack_48 - 28.0;
  fVar5 = 1.0;
  fVar4 = 1.0;
  uStack_74 = 0x3f800000;
  uStack_78 = 0x3f800000;
  fStack_7c = 5.911666e-39;
  (**(code **)(*grim_interface_ptr + 0x114))();
  (**(code **)(*grim_interface_ptr + 0x20))(0x18);
  (**(code **)(*grim_interface_ptr + 0x144))
            (fVar5 + 16.0,0x3f800000,
             *(undefined4 *)(&perk_desc_table + (&perk_choice_ids)[DAT_0048089c] * 0x14));
  if ((DAT_004807c8 & 8) == 0) {
    DAT_004807c8 = DAT_004807c8 | 8;
    DAT_00480096 = 1;
    DAT_004800a5 = 0;
    DAT_004800a4 = 0;
    _DAT_004800a0 = 0x3f800000;
    _DAT_0048009c = 0;
    _DAT_00480090 = (char *)0x0;
    DAT_00480094 = 0;
    DAT_00480095 = 0;
    _DAT_00480098 = 0;
    crt_atexit(&DAT_00406140);
  }
  _DAT_00480090 = s_Cancel_00472010;
  if ((DAT_004807c8 & 0x10) == 0) {
    DAT_004807c8 = DAT_004807c8 | 0x10;
    DAT_00480826 = 1;
    DAT_00480835 = 0;
    DAT_00480834 = 0;
    _DAT_00480830 = 0x3f800000;
    _DAT_0048082c = 0;
    _DAT_00480820 = (char *)0x0;
    DAT_00480824 = 0;
    DAT_00480825 = 0;
    _DAT_00480828 = 0;
    crt_atexit(&DAT_00406130);
  }
  fStack_80 = fVar4 + 162.0;
  _DAT_00480820 = s_Select_00472008;
  fStack_7c = fVar5 + 276.0;
  iVar2 = ui_button_update(&fStack_80,(int *)&DAT_00480090);
  if ((char)iVar2 != '\0') {
    ui_transition_direction = 0;
    game_state_pending = 9;
  }
  perk_prompt_update_and_render();
  ui_cursor_render();
  if ((-1 < DAT_0048089c) && ((&DAT_004800ad)[DAT_0048089c * 0x10] != '\0')) {
    sfx_play(sfx_ui_buttonclick);
    perk_apply((&perk_choice_ids)[DAT_0048089c]);
    perk_pending_count = perk_pending_count + -1;
    ui_transition_direction = 0;
    game_state_pending = 9;
    perk_choices_dirty = 1;
  }
  return;
}



/* FUN_00406180 @ 00406180 */

undefined * FUN_00406180(void)

{
  crt_sprintf(&DAT_004802c8,&DAT_0047206c);
  return &DAT_004802c8;
}



/* ui_draw_clock_gauge @ 004061e0 */

/* draws the 32x32 clock gauge at the current transform */

void ui_draw_clock_gauge(void)

{
  int iVar1;
  int iVar2;
  
  iVar2 = 1;
  (**(code **)(*grim_interface_ptr + 0x20))(0x15,1);
  (**(code **)(*grim_interface_ptr + 0xc4))(ui_clock_table_texture,0);
  iVar1 = 0;
  (**(code **)(*grim_interface_ptr + 0x100))(0,0,0x3f800000,0x3f800000);
  (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,iVar2);
  (**(code **)(*grim_interface_ptr + 0xfc))(0);
  (**(code **)(*grim_interface_ptr + 0xe8))();
  (**(code **)(*grim_interface_ptr + 0x11c))((float)iVar2,(float)iVar1,0x42000000,0x42000000);
  (**(code **)(*grim_interface_ptr + 0xf0))();
  (**(code **)(*grim_interface_ptr + 0x20))(0x15,2);
  (**(code **)(*grim_interface_ptr + 0xc4))(DAT_0048f7cc,0);
  (**(code **)(*grim_interface_ptr + 0xe8))();
  (**(code **)(*grim_interface_ptr + 0xfc))(0x43dce805);
  (**(code **)(*grim_interface_ptr + 0x11c))((float)iVar2,(float)iVar1,0x42000000,0x42000000);
  (**(code **)(*grim_interface_ptr + 0xf0))();
  return;
}



/* FUN_00406350 @ 00406350 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_00406350(void)

{
  int iVar1;
  char *pcVar2;
  int *piStack_50;
  float fStack_4c;
  float fStack_48;
  char *pcStack_44;
  undefined4 uStack_40;
  float fStack_3c;
  float fStack_38;
  undefined4 uStack_30;
  undefined4 uStack_2c;
  undefined4 uStack_28;
  float fStack_24;
  undefined4 uStack_20;
  
  uStack_20 = 0x406359;
  gameplay_render_world();
  uStack_20 = 0x40635e;
  ui_elements_update_and_render();
  uStack_20 = 0x3f800000;
  fStack_24 = 1.0;
  uStack_28 = 0x3f800000;
  uStack_2c = 0x3f800000;
  uStack_30 = 0x4063de;
  (**(code **)(*grim_interface_ptr + 0x114))();
  fStack_24 = fStack_24 + 6.0;
  if (DAT_00487234 == -1) {
    DAT_00487234 = 0;
  }
  uStack_40 = 0x18;
  fStack_3c = 0.8;
  pcStack_44 = (char *)0x406416;
  (**(code **)(*grim_interface_ptr + 0x20))();
  if (config_full_version == '\0') {
    pcStack_44 = s_Congratulations__004722c8;
  }
  else {
    pcStack_44 = s_Incredible__004722b8;
  }
  fStack_48 = fStack_38;
  fStack_4c = fStack_3c;
  piStack_50 = grim_interface_ptr;
  (**(code **)(*grim_interface_ptr + 0x140))();
  fStack_38 = fStack_38 + 32.0;
  fStack_3c = fStack_3c - 8.0;
  piStack_50 = (int *)0x3f000000;
  (**(code **)(*grim_interface_ptr + 0x20))(0x18);
  if (config_full_version == '\0') {
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,piStack_50,fStack_4c,s_You_ve_completed_all_the_levels_b_00472288)
    ;
    fStack_4c = fStack_4c + 14.0;
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,piStack_50,fStack_4c,s_isn_t_over_yet__With_all_of_the_u_00472258)
    ;
    fStack_4c = fStack_4c + 14.0;
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,piStack_50,fStack_4c,s_and_weapons_your_Survival_is_jus_00472228);
    fStack_4c = fStack_4c + 14.0;
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,piStack_50,fStack_4c,s_You_can_also_replay_the_quests_i_004721fc);
    fStack_4c = fStack_4c + 14.0;
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,piStack_50,fStack_4c,s_As_an_additional_reward_for_your_004721d0);
    fStack_4c = fStack_4c + 14.0;
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,piStack_50,fStack_4c,s_playing__a_completely_new_and_di_004721a0);
    pcVar2 = s_mode_is_unlocked_for_you__Typ_o__00472174;
    iVar1 = *grim_interface_ptr;
  }
  else {
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,piStack_50,fStack_4c,s_You_ve_done_the_thing_we_all_tho_00472148);
    fStack_4c = fStack_4c + 14.0;
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,piStack_50,fStack_4c,s_virtually_impossible__To_reward_y_00472120)
    ;
    fStack_4c = fStack_4c + 14.0;
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,piStack_50,fStack_4c,s_efforts_a_new_weapon_has_been_un_004720f8);
    fStack_4c = fStack_4c + 14.0;
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,piStack_50,fStack_4c,s_for_you__Splitter_Gun__004720e0);
    fStack_4c = fStack_4c + 14.0;
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,piStack_50,fStack_4c,&DAT_0047f4d8);
    pcVar2 = &DAT_0047f4d8;
    iVar1 = *grim_interface_ptr;
  }
  fStack_4c = fStack_4c + 14.0;
  (**(code **)(iVar1 + 0x148))(grim_interface_ptr,piStack_50,fStack_4c,pcVar2);
  fStack_4c = fStack_4c + 14.0 + 8.0;
  (**(code **)(*grim_interface_ptr + 0x148))
            (grim_interface_ptr,piStack_50,fStack_4c,s_Good_luck_with_your_battles__tro_004720b8);
  fStack_3c = _DAT_0048dbdc + DAT_0048dc00;
  fStack_48 = DAT_0048dbfc + _DAT_0048dbd8 + 180.0;
  pcStack_44 = (char *)(fStack_3c + 40.0);
  piStack_50 = (int *)(fStack_48 + _DAT_0048dbc8 + 44.0 + 20.0);
  fStack_4c = (float)pcStack_44 + 170.0;
  if ((DAT_00480321 & 1) == 0) {
    DAT_00480321 = DAT_00480321 | 1;
    DAT_0047f5e6 = 1;
    DAT_0047f5f5 = 0;
    DAT_0047f5f4 = 0;
    _DAT_0047f5f0 = 0x3f800000;
    _DAT_0047f5ec = 0;
    _DAT_0047f5e0 = (char *)0x0;
    DAT_0047f5e4 = 0;
    DAT_0047f5e5 = '\0';
    _DAT_0047f5e8 = 0;
    crt_atexit(&DAT_00406ae0);
  }
  _DAT_0047f5e0 = s_Survival_004720ac;
  if ((DAT_00480321 & 2) == 0) {
    DAT_00480321 = DAT_00480321 | 2;
    DAT_00480286 = 1;
    DAT_00480295 = 0;
    DAT_00480294 = 0;
    _DAT_00480290 = 0x3f800000;
    _DAT_0048028c = 0;
    _DAT_00480280 = (char *)0x0;
    DAT_00480284 = 0;
    DAT_00480285 = '\0';
    _DAT_00480288 = 0;
    crt_atexit(&DAT_00406ad0);
  }
  _DAT_00480280 = s_Rush_004720a0;
  if ((DAT_00480321 & 4) == 0) {
    DAT_00480321 = DAT_00480321 | 4;
    DAT_0048032e = 1;
    DAT_0048033d = 0;
    DAT_0048033c = 0;
    _DAT_00480338 = 0x3f800000;
    _DAT_00480334 = 0;
    _DAT_00480328 = (char *)0x0;
    DAT_0048032c = 0;
    DAT_0048032d = '\0';
    _DAT_00480330 = 0;
    crt_atexit(&DAT_00406ac0);
  }
  _DAT_00480328 = s_Typ_o_Shooter_00472090;
  if ((DAT_00480321 & 8) == 0) {
    DAT_00480321 = DAT_00480321 | 8;
    DAT_0048026e = 1;
    DAT_0048027d = 0;
    DAT_0048027c = 0;
    _DAT_00480278 = 0x3f800000;
    _DAT_00480274 = 0;
    _DAT_00480268 = (char *)0x0;
    DAT_0048026c = 0;
    DAT_0048026d = '\0';
    _DAT_00480270 = 0;
    crt_atexit(&DAT_00406ab0);
  }
  _DAT_00480268 = s_Main_Menu_00472084;
  piStack_50 = (int *)(((float)piStack_50 - 4.0) + 26.0);
  ui_button_update((float *)&piStack_50,(int *)&DAT_0047f5e0);
  fStack_4c = fStack_4c + 32.0;
  ui_button_update((float *)&piStack_50,(int *)&DAT_00480280);
  fStack_4c = fStack_4c + 32.0;
  ui_button_update((float *)&piStack_50,(int *)&DAT_00480328);
  fStack_4c = fStack_4c + 32.0;
  ui_button_update((float *)&piStack_50,(int *)&DAT_00480268);
  fStack_4c = fStack_4c + 32.0;
  if (DAT_00480285 != '\0') {
    ui_transition_direction = 0;
    game_state_pending = 9;
    sfx_mute_all(music_track_crimson_theme_id);
    sfx_mute_all(music_track_shortie_monk_id);
    sfx_mute_all(music_track_extra_0);
    _config_game_mode = 2;
  }
  if (DAT_0047f5e5 != '\0') {
    ui_transition_direction = 0;
    game_state_pending = 9;
    _config_game_mode = 1;
    sfx_mute_all(music_track_crimson_theme_id);
    sfx_mute_all(music_track_shortie_monk_id);
    sfx_mute_all(music_track_extra_0);
  }
  if (DAT_0048032d != '\0') {
    render_pass_mode = 0;
    ui_transition_direction = 0;
    game_state_pending = 0x12;
    _config_game_mode = 4;
    sfx_mute_all(music_track_crimson_theme_id);
    sfx_mute_all(music_track_shortie_monk_id);
    sfx_mute_all(music_track_extra_0);
    DAT_0048702c = 1;
  }
  if (DAT_0048026d != '\0') {
    sfx_mute_all(music_track_extra_0);
    sfx_mute_all(music_track_crimson_theme_id);
    sfx_mute_all(music_track_shortie_monk_id);
    sfx_play_exclusive(music_track_crimson_theme_id);
    ui_transition_direction = 0;
    game_state_pending = 0;
    DAT_00487292 = 0;
  }
  ui_cursor_render();
  return;
}



/* FUN_00406af0 @ 00406af0 */

void FUN_00406af0(void)

{
  if ((render_pass_mode == '\0') && (game_state_id != 5)) {
    FUN_004188a0();
  }
  else {
    gameplay_render_world();
  }
  (**(code **)(*grim_interface_ptr + 0xcc))(0,0,0,screen_fade_alpha);
  ui_elements_update_and_render();
  perk_prompt_update_and_render();
  ui_cursor_render();
  return;
}



/* perks_update_effects @ 00406b40 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* updates perk timers/effects (regen, shields, evil eyes, jinxed, bonus timers) */

void perks_update_effects(void)

{
  float *pfVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  longlong lVar5;
  undefined4 *puVar6;
  float fVar7;
  undefined4 local_8;
  undefined4 local_4;
  
  iVar2 = perk_count_get(perk_id_regeneration);
  if (((iVar2 != 0) && (uVar3 = _rand(), (uVar3 & 1) != 0)) &&
     (iVar2 = _config_player_count, 0 < _config_player_count)) {
    do {
      if (((player_health < 100.0) && (0.0 < player_health)) &&
         (player_health = player_health + frame_dt, 100.0 < player_health)) {
        player_health = 100.0;
      }
      iVar2 = iVar2 + -1;
    } while (iVar2 != 0);
  }
  _DAT_004808a4 = _DAT_004808a4 - frame_dt;
  if (_DAT_004808a4 < 0.0) {
    _DAT_004808a4 = 0.25;
    if (0 < (int)(&player_perk_counts)[perk_id_lean_mean_exp_machine]) {
      player_experience =
           player_experience + (&player_perk_counts)[perk_id_lean_mean_exp_machine] * 10;
    }
  }
  render_overlay_player_index = 0;
  if (0 < _config_player_count) {
    do {
      iVar2 = perk_count_get(perk_id_death_clock);
      if (iVar2 != 0) {
        pfVar1 = &player_health + render_overlay_player_index * 0xd8;
        if ((&player_health)[render_overlay_player_index * 0xd8] <= 0.0) {
          *pfVar1 = 0.0;
        }
        else {
          *pfVar1 = *pfVar1 - frame_dt * 3.3333333;
        }
      }
      if ((float)(&player_shield_timer)[render_overlay_player_index * 0xd8] <= 0.0) {
        (&player_shield_timer)[render_overlay_player_index * 0xd8] = 0;
      }
      else {
        (&player_shield_timer)[render_overlay_player_index * 0xd8] =
             (float)(&player_shield_timer)[render_overlay_player_index * 0xd8] - frame_dt;
      }
      if ((float)(&player_fire_bullets_timer)[render_overlay_player_index * 0xd8] <= 0.0) {
        (&player_fire_bullets_timer)[render_overlay_player_index * 0xd8] = 0;
      }
      else {
        (&player_fire_bullets_timer)[render_overlay_player_index * 0xd8] =
             (float)(&player_fire_bullets_timer)[render_overlay_player_index * 0xd8] - frame_dt;
      }
      if ((float)(&player_speed_bonus_timer)[render_overlay_player_index * 0xd8] <= 0.0) {
        (&player_speed_bonus_timer)[render_overlay_player_index * 0xd8] = 0;
      }
      else {
        (&player_speed_bonus_timer)[render_overlay_player_index * 0xd8] =
             (float)(&player_speed_bonus_timer)[render_overlay_player_index * 0xd8] - frame_dt;
      }
      render_overlay_player_index = render_overlay_player_index + 1;
    } while (render_overlay_player_index < _config_player_count);
  }
  DAT_00487268 = -1;
  if (((0 < (int)(&player_perk_counts)[perk_id_doctor]) ||
      (0 < (int)(&player_perk_counts)[perk_id_pyrokinetic])) ||
     (0 < (int)(&player_perk_counts)[perk_id_evil_eyes])) {
    evil_eyes_target_creature = -1;
    iVar2 = creature_find_in_radius((float *)&player_aim_x,12.0,0);
    if (iVar2 != -1) {
      iVar4 = perk_count_get(perk_id_doctor);
      if (iVar4 != 0) {
        DAT_00487268 = iVar2;
      }
      iVar4 = perk_count_get(perk_id_pyrokinetic);
      if (iVar4 != 0) {
        fVar7 = (float)(&creature_collision_timer)[iVar2 * 0x26] - frame_dt;
        (&creature_collision_timer)[iVar2 * 0x26] = fVar7;
        if (fVar7 < 0.0) {
          (&creature_collision_timer)[iVar2 * 0x26] = 0x3f000000;
          pfVar1 = (float *)(&creature_pos_x + iVar2 * 0x26);
          puVar6 = &local_8;
          fVar7 = 0.8;
          local_8 = 0;
          local_4 = 0;
          iVar4 = _rand();
          fx_spawn_particle(pfVar1,(float)(iVar4 % 0x274) * 0.01,puVar6,fVar7);
          puVar6 = &local_8;
          local_8 = 0;
          local_4 = 0;
          fVar7 = 0.6;
          iVar4 = _rand();
          fx_spawn_particle(pfVar1,(float)(iVar4 % 0x274) * 0.01,puVar6,fVar7);
          puVar6 = &local_8;
          local_8 = 0;
          local_4 = 0;
          fVar7 = 0.4;
          iVar4 = _rand();
          fx_spawn_particle(pfVar1,(float)(iVar4 % 0x274) * 0.01,puVar6,fVar7);
          puVar6 = &local_8;
          local_8 = 0;
          local_4 = 0;
          fVar7 = 0.3;
          iVar4 = _rand();
          fx_spawn_particle(pfVar1,(float)(iVar4 % 0x274) * 0.01,puVar6,fVar7);
          puVar6 = &local_8;
          local_8 = 0;
          local_4 = 0;
          fVar7 = 0.2;
          iVar4 = _rand();
          fx_spawn_particle(pfVar1,(float)(iVar4 % 0x274) * 0.01,puVar6,fVar7);
          fx_queue_add_random(pfVar1);
        }
      }
      iVar4 = perk_count_get(perk_id_evil_eyes);
      if (iVar4 != 0) {
        evil_eyes_target_creature = iVar2;
      }
    }
  }
  iVar2 = perk_count_get(perk_id_evil_eyes);
  if (iVar2 == 0) {
    evil_eyes_target_creature = -1;
  }
  if (((_DAT_004aaf1c < 0.0) || (_DAT_004aaf1c = _DAT_004aaf1c - frame_dt, _DAT_004aaf1c < 0.0)) &&
     (0 < (int)(&player_perk_counts)[perk_id_jinxed])) {
    iVar2 = _rand();
    if (iVar2 % 10 == 3) {
      player_health = player_health - 5.0;
      fx_queue_add_random((float *)&player_pos_x);
      fx_queue_add_random((float *)&player_pos_x);
    }
    iVar2 = _rand();
    _DAT_004aaf1c = (float)(iVar2 % 0x14) * 0.1 + _DAT_004aaf1c + 2.0;
    if (_bonus_freeze_timer <= 0.0) {
      iVar2 = _rand();
      render_overlay_player_index = 0;
      iVar2 = iVar2 % 0x17f;
      do {
        if ((&creature_pool)[iVar2 * 0x98] != '\0') break;
        iVar2 = _rand();
        iVar2 = iVar2 % 0x17f;
        render_overlay_player_index = render_overlay_player_index + 1;
      } while (render_overlay_player_index < 10);
      render_overlay_player_index = 0;
      if ((&creature_pool)[iVar2 * 0x98] != '\0') {
        fVar7 = frame_dt * 20.0;
        (&creature_health)[iVar2 * 0x26] = 0xbf800000;
        (&creature_hitbox_size)[iVar2 * 0x26] = (float)(&creature_hitbox_size)[iVar2 * 0x26] - fVar7
        ;
        lVar5 = __ftol();
        player_experience = (int)lVar5;
        sfx_play_panned(sfx_trooper_inpain_01_alias_1);
      }
    }
  }
  return;
}



/* quest_mode_update @ 004070e0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* quest mode update: spawn timeline, stage completion, and transitions */

void quest_mode_update(void)

{
  uint uVar1;
  int iVar2;
  
  if ((DAT_0047eec8 != '\0') || (render_pass_mode == '\0')) goto LAB_00407129;
  uVar1 = creatures_none_active();
  if ((char)uVar1 == '\0') {
LAB_00407104:
    quest_spawn_timeline = quest_spawn_timeline + frame_dt_ms;
  }
  else {
    iVar2 = quest_spawn_table_empty();
    if ((char)iVar2 == '\0') goto LAB_00407104;
  }
  DAT_00487244 = DAT_00487244 + frame_dt_ms;
LAB_00407129:
  quest_spawn_timeline_update();
  if (demo_mode_active == '\0') {
    uVar1 = creatures_none_active();
    if ((char)uVar1 != '\0') {
      iVar2 = quest_spawn_table_empty();
      if ((char)iVar2 != '\0') {
        _bonus_reflex_boost_timer = 0;
        if (DAT_00487088 < 0) {
          sfx_mute_all(music_track_extra_0);
          iVar2 = _quest_stage_minor + _quest_stage_major * 10;
          *(int *)(&DAT_004856b8 + iVar2 * 4) = *(int *)(&DAT_004856b8 + iVar2 * 4) + 1;
          DAT_00487088 = frame_dt_ms;
          return;
        }
        if ((800 < DAT_00487088) && (DAT_00487088 < 0x353)) {
          sfx_play(sfx_questhit);
          DAT_00487088 = frame_dt_ms + 0x353;
          return;
        }
        if ((2000 < DAT_00487088) && (DAT_00487088 < 0x803)) {
          DAT_00487088 = 0x803;
          sfx_play_exclusive(music_track_crimsonquest_id);
          DAT_00487088 = DAT_00487088 + frame_dt_ms;
          (&sfx_volume_table)[music_track_crimsonquest_id] = 0;
          return;
        }
        if (0x9c4 < DAT_00487088) {
          iVar2 = _quest_stage_minor + -10 + _quest_stage_major * 10;
          if (quest_unlock_index < iVar2) {
            quest_unlock_index = iVar2;
          }
          if ((config_full_version != '\0') && (quest_unlock_index_full < iVar2)) {
            quest_unlock_index_full = iVar2;
          }
          game_save_status();
          game_state_pending = 8;
          ui_transition_direction = 0;
          (**(code **)(*grim_interface_ptr + 0x4c))();
          console_input_poll();
          highscore_score_xp = 0;
        }
        DAT_00487088 = DAT_00487088 + frame_dt_ms;
      }
    }
  }
  return;
}



/* rush_mode_update @ 004072b0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* rush mode update: spawns edge waves and handles demo exit */

void rush_mode_update(void)

{
  int iVar1;
  float10 fVar2;
  float local_20;
  float local_1c;
  float local_18;
  float local_14;
  float local_10;
  float local_c;
  float local_8;
  undefined4 local_4;
  
  player_weapon_id = 2;
  player_ammo = 0x41f00000;
  player2_weapon_id = 2;
  player2_ammo = 0x41f00000;
  if (DAT_0047eec8 == '\0') {
    survival_spawn_cooldown = survival_spawn_cooldown - _config_player_count * frame_dt_ms;
    while (survival_spawn_cooldown < 0) {
      survival_spawn_cooldown = survival_spawn_cooldown + 0xfa;
      fVar2 = (float10)(survival_elapsed_ms + 1);
      local_4 = 0x3f800000;
      local_10 = (float)(fVar2 * (float10)8.333333e-06 + (float10)0.3);
      local_c = (float)(fVar2 * (float10)10000.0 + (float10)0.3);
      fVar2 = (float10)fsin(fVar2 * (float10)0.000100000005);
      local_8 = (float)(fVar2 + (float10)0.3);
      if (0.0 <= local_10) {
        if (1.0 < local_10) {
          local_10 = 1.0;
        }
      }
      else {
        local_10 = 0.0;
      }
      if (0.0 <= local_c) {
        if (1.0 < local_c) {
          local_c = 1.0;
        }
      }
      else {
        local_c = 0.0;
      }
      if (0.0 <= local_8) {
        if (1.0 < local_8) {
          local_8 = 1.0;
        }
      }
      else {
        local_8 = 0.0;
      }
      local_20 = (float)terrain_texture_width + 64.0;
      fVar2 = (float10)fcos((float10)survival_elapsed_ms * (float10)0.001);
      local_1c = (float)((float10)terrain_texture_height * (float10)0.5 + fVar2 * (float10)256.0);
      iVar1 = creature_spawn(&local_20,&local_10,2);
      local_18 = -64.0;
      fVar2 = (float10)fsin((float10)survival_elapsed_ms * (float10)0.001);
      (&creature_ai_mode)[iVar1 * 0x26] = 8;
      local_14 = (float)((float10)terrain_texture_height * (float10)0.5 + fVar2 * (float10)256.0);
      iVar1 = creature_spawn(&local_18,&local_10,3);
      (&creature_ai_mode)[iVar1 * 0x26] = 8;
      *(uint *)(&creature_flags + iVar1 * 0x98) = *(uint *)(&creature_flags + iVar1 * 0x98) | 0x80;
      (&creature_move_speed)[iVar1 * 0x26] = (float)(&creature_move_speed)[iVar1 * 0x26] * 1.4;
    }
    if ((demo_mode_active != '\0') && (DAT_004712f0 < quest_spawn_timeline)) {
      render_pass_mode = 0;
      demo_mode_start();
    }
  }
  return;
}



/* survival_spawn_creature @ 00407510 */

/* spawns a creature at the given position, selecting type/stats based on DAT_0049095c */

void __cdecl survival_spawn_creature(float *pos)

{
  int iVar1;
  float fVar2;
  undefined4 uVar3;
  int iVar4;
  int iVar5;
  uint uVar6;
  float *pfVar7;
  
  iVar4 = creature_alloc_slot();
  iVar1 = iVar4 * 0x98;
  (&creature_pos_x)[iVar4 * 0x26] = *pos;
  (&creature_pos_y)[iVar4 * 0x26] = pos[1];
  (&creature_collision_flag)[iVar1] = 0;
  (&creature_collision_timer)[iVar4 * 0x26] = 0;
  (&creature_ai_mode)[iVar4 * 0x26] = 0;
  iVar5 = _rand();
  iVar5 = iVar5 % 10;
  if (player_experience < 12000) {
    if (iVar5 < 9) {
      (&creature_type_id)[iVar4 * 0x26] = 2;
    }
    else {
      (&creature_type_id)[iVar4 * 0x26] = 3;
    }
  }
  else if (player_experience < 25000) {
    if (iVar5 < 4) {
      (&creature_type_id)[iVar4 * 0x26] = 0;
    }
    else {
      (&creature_type_id)[iVar4 * 0x26] = 3;
    }
    if (8 < iVar5) {
      (&creature_type_id)[iVar4 * 0x26] = 2;
    }
  }
  else if (player_experience < 42000) {
    if (iVar5 < 5) {
      (&creature_type_id)[iVar4 * 0x26] = 2;
    }
    else {
      uVar6 = _rand();
      uVar6 = uVar6 & 0x80000001;
      if ((int)uVar6 < 0) {
        uVar6 = (uVar6 - 1 | 0xfffffffe) + 1;
      }
      (&creature_type_id)[iVar4 * 0x26] = uVar6 + 3;
    }
  }
  else if (player_experience < 50000) {
    (&creature_type_id)[iVar4 * 0x26] = 2;
  }
  else if (player_experience < 90000) {
    (&creature_type_id)[iVar4 * 0x26] = 4;
  }
  else {
    if (109999 < player_experience) {
      if (iVar5 < 6) {
        (&creature_type_id)[iVar4 * 0x26] = 2;
        goto LAB_00407611;
      }
      if (iVar5 < 9) {
        (&creature_type_id)[iVar4 * 0x26] = 4;
        goto LAB_00407611;
      }
    }
    (&creature_type_id)[iVar4 * 0x26] = 0;
  }
LAB_00407611:
  iVar5 = _rand();
  if (((byte)iVar5 & 0x1f) == 2) {
    (&creature_type_id)[iVar4 * 0x26] = 3;
  }
  iVar5 = _rand();
  (&creature_pool)[iVar1] = 1;
  (&creature_force_target)[iVar1] = 0;
  (&creature_hitbox_size)[iVar4 * 0x26] = 0x41800000;
  (&creature_vel_x)[iVar4 * 0x26] = 0;
  (&creature_vel_y)[iVar4 * 0x26] = 0;
  (&creature_size)[iVar4 * 0x26] = (float)(iVar5 % 0x14 + 0x2c);
  iVar5 = _rand();
  (&creature_heading)[iVar4 * 0x26] = (float)(iVar5 % 0x13a) * 0.01;
  (&creature_move_speed)[iVar4 * 0x26] = (float)(player_experience / 4000) * 0.045 + 0.9;
  if ((&creature_type_id)[iVar4 * 0x26] == 3) {
    fVar2 = (float)(&creature_move_speed)[iVar4 * 0x26];
    *(uint *)(&creature_flags + iVar1) = *(uint *)(&creature_flags + iVar1) | 0x80;
    (&creature_move_speed)[iVar4 * 0x26] = fVar2 * 1.3;
  }
  uVar6 = _rand();
  (&creature_health)[iVar4 * 0x26] =
       (float)player_experience * 0.00125 + (float)(uVar6 & 0xf) + 52.0;
  if ((&creature_type_id)[iVar4 * 0x26] == 0) {
    fVar2 = (float)(&creature_move_speed)[iVar4 * 0x26];
    (&creature_move_speed)[iVar4 * 0x26] = fVar2 * 0.6;
    if (fVar2 * 0.6 < 1.3) {
      (&creature_move_speed)[iVar4 * 0x26] = 0x3fa66666;
    }
    (&creature_health)[iVar4 * 0x26] = (float)(&creature_health)[iVar4 * 0x26] * 1.5;
  }
  if (3.5 < (float)(&creature_move_speed)[iVar4 * 0x26]) {
    (&creature_move_speed)[iVar4 * 0x26] = 0x40600000;
  }
  (&creature_attack_cooldown)[iVar4 * 0x26] = 0;
  (&creature_reward_value)[iVar4 * 0x26] = 0;
  if (player_experience < 50000) {
    (&creature_tint_r)[iVar4 * 0x26] = 1.0 - 1.0 / ((float)(player_experience / 1000) + 10.0);
    iVar5 = _rand();
    (&creature_tint_g)[iVar4 * 0x26] =
         ((float)(iVar5 % 10) * 0.01 + 0.9) - 1.0 / ((float)(player_experience / 10000) + 10.0);
    iVar5 = _rand();
    (&creature_tint_b)[iVar4 * 0x26] = (float)(iVar5 % 10) * 0.01 + 0.7;
  }
  else if (player_experience < 100000) {
    (&creature_tint_r)[iVar4 * 0x26] = 0.9 - 1.0 / ((float)(player_experience / 1000) + 10.0);
    iVar5 = _rand();
    (&creature_tint_g)[iVar4 * 0x26] =
         ((float)(iVar5 % 10) * 0.01 + 0.8) - 1.0 / ((float)(player_experience / 10000) + 10.0);
    iVar5 = _rand();
    (&creature_tint_b)[iVar4 * 0x26] =
         (float)(player_experience + -50000) * 6e-06 + (float)(iVar5 % 10) * 0.01 + 0.7;
  }
  else {
    (&creature_tint_r)[iVar4 * 0x26] = 1.0 - 1.0 / ((float)(player_experience / 1000) + 10.0);
    iVar5 = _rand();
    (&creature_tint_g)[iVar4 * 0x26] =
         ((float)(iVar5 % 10) * 0.01 + 0.9) - 1.0 / ((float)(player_experience / 10000) + 10.0);
    iVar5 = _rand();
    fVar2 = ((float)(iVar5 % 10) * 0.01 + 1.0) - (float)(player_experience + -100000) * 3e-06;
    (&creature_tint_b)[iVar4 * 0x26] = fVar2;
    if (fVar2 < 0.5) {
      (&creature_tint_b)[iVar4 * 0x26] = 0x3f000000;
    }
  }
  pfVar7 = (float *)(&creature_tint_r + iVar4 * 0x26);
  (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
  (&creature_contact_damage)[iVar4 * 0x26] = (float)(&creature_size)[iVar4 * 0x26] * 0.0952381;
  if ((float)(&creature_reward_value)[iVar4 * 0x26] == 0.0) {
    iVar5 = _rand();
    (&creature_reward_value)[iVar4 * 0x26] =
         (float)(&creature_health)[iVar4 * 0x26] * 0.4 +
         (float)(&creature_contact_damage)[iVar4 * 0x26] * 0.8 +
         (float)(&creature_move_speed)[iVar4 * 0x26] * 5.0 + (float)(iVar5 % 10 + 10);
  }
  iVar5 = _rand();
  if (iVar5 % 0xb4 < 2) {
    *pfVar7 = 0.9;
    (&creature_health)[iVar4 * 0x26] = 0x42820000;
    (&creature_tint_g)[iVar4 * 0x26] = 0x3ecccccd;
    (&creature_reward_value)[iVar4 * 0x26] = 0x43a00000;
    (&creature_tint_b)[iVar4 * 0x26] = 0x3ecccccd;
    (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
  }
  else {
    iVar5 = _rand();
    if (iVar5 % 0xf0 < 2) {
      *pfVar7 = 0.4;
      (&creature_health)[iVar4 * 0x26] = 0x42aa0000;
      (&creature_tint_g)[iVar4 * 0x26] = 0x3f666666;
      (&creature_reward_value)[iVar4 * 0x26] = 0x43d20000;
      (&creature_tint_b)[iVar4 * 0x26] = 0x3ecccccd;
      (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
    }
    else {
      iVar5 = _rand();
      if (iVar5 % 0x168 < 2) {
        *pfVar7 = 0.4;
        (&creature_health)[iVar4 * 0x26] = 0x42fa0000;
        (&creature_tint_g)[iVar4 * 0x26] = 0x3ecccccd;
        (&creature_reward_value)[iVar4 * 0x26] = 0x44020000;
        (&creature_tint_b)[iVar4 * 0x26] = 0x3f666666;
        (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
      }
    }
  }
  iVar5 = _rand();
  if (iVar5 % 0x528 < 4) {
    *pfVar7 = 0.84;
    (&creature_health)[iVar4 * 0x26] = (float)(&creature_health)[iVar4 * 0x26] + 230.0;
    (&creature_tint_g)[iVar4 * 0x26] = 0x3e75c28f;
    (&creature_size)[iVar4 * 0x26] = 0x42a00000;
    (&creature_tint_b)[iVar4 * 0x26] = 0x3f63d70a;
    (&creature_reward_value)[iVar4 * 0x26] = 0x44160000;
    (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
  }
  else {
    iVar5 = _rand();
    if (iVar5 % 0x654 < 4) {
      *pfVar7 = 0.94;
      (&creature_health)[iVar4 * 0x26] = (float)(&creature_health)[iVar4 * 0x26] + 2230.0;
      (&creature_tint_g)[iVar4 * 0x26] = 0x3f570a3d;
      (&creature_size)[iVar4 * 0x26] = 0x42aa0000;
      (&creature_tint_b)[iVar4 * 0x26] = 0x3e947ae1;
      (&creature_reward_value)[iVar4 * 0x26] = 0x44610000;
      (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
    }
  }
  fVar2 = (float)(&creature_reward_value)[iVar4 * 0x26];
  uVar3 = (&creature_health)[iVar4 * 0x26];
  (&creature_state_flag)[iVar1] = 1;
  (&creature_max_health)[iVar4 * 0x26] = uVar3;
  (&creature_reward_value)[iVar4 * 0x26] = fVar2 * 0.8;
  if (0.0 <= *pfVar7) {
    if (1.0 < *pfVar7) {
      *pfVar7 = 1.0;
    }
  }
  else {
    *pfVar7 = 0.0;
  }
  if (0.0 <= (float)(&creature_tint_g)[iVar4 * 0x26]) {
    if (1.0 < (float)(&creature_tint_g)[iVar4 * 0x26]) {
      (&creature_tint_g)[iVar4 * 0x26] = 0x3f800000;
    }
  }
  else {
    (&creature_tint_g)[iVar4 * 0x26] = 0;
  }
  if (0.0 <= (float)(&creature_tint_b)[iVar4 * 0x26]) {
    if (1.0 < (float)(&creature_tint_b)[iVar4 * 0x26]) {
      (&creature_tint_b)[iVar4 * 0x26] = 0x3f800000;
    }
  }
  else {
    (&creature_tint_b)[iVar4 * 0x26] = 0;
  }
  if ((float)(&creature_tint_a)[iVar4 * 0x26] < 0.0) {
    (&creature_tint_a)[iVar4 * 0x26] = 0;
    return;
  }
  if (1.0 < (float)(&creature_tint_a)[iVar4 * 0x26]) {
    (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
  }
  return;
}



/* survival_update @ 00407cd0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* main survival mode update: timers, scripted spawns, and enemy wave spawning */

void survival_update(void)

{
  float fVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  uint uVar6;
  float *pfVar7;
  float local_48;
  float local_44;
  float local_40;
  float local_3c;
  float local_38;
  float local_34;
  float local_30;
  float local_2c;
  float local_28;
  float local_24;
  float local_20;
  undefined4 local_1c;
  float local_18;
  float local_14;
  float local_10;
  float local_c;
  float local_8;
  float local_4;
  
  if (DAT_0047eec8 != '\0') {
    return;
  }
  quest_spawn_timeline = quest_spawn_timeline + frame_dt_ms;
  if (demo_mode_active != '\0') {
    if (quest_spawn_timeline <= DAT_004712f0) {
      return;
    }
    render_pass_mode = 0;
    demo_mode_start();
    return;
  }
  if (_config_player_count == 1) {
    if ((((survival_reward_damage_seen == '\0') && (survival_reward_fire_seen == '\0')) &&
        (64000 < survival_elapsed_ms)) && (survival_reward_handout_enabled != '\0')) {
      if (player_weapon_id == 1) {
        weapon_assign_player(0,0x18);
        DAT_00486fb8 = 0x18;
      }
      survival_reward_handout_enabled = '\0';
      survival_reward_damage_seen = '\x01';
      survival_reward_fire_seen = '\x01';
    }
    if (((survival_recent_death_count == 3) && (survival_reward_fire_seen == '\0')) &&
       ((local_44 = (_DAT_00486ffc + _DAT_00486ff4 + survival_recent_death_pos_y) * 0.33333334,
        fVar1 = player_pos_x -
                (_survival_recent_death_pos_x + _DAT_00486ff0 + _DAT_00486ff8) * 0.33333334,
        SQRT(fVar1 * fVar1 + (player_pos_y - local_44) * (player_pos_y - local_44)) < 16.0 &&
        (player_health < 15.0)))) {
      weapon_assign_player(0,0x19);
      DAT_00486fb8 = 0x19;
      survival_reward_fire_seen = '\x01';
      survival_reward_handout_enabled = '\0';
    }
  }
  if (survival_spawn_stage == 0) {
    if (player_level < 5) goto LAB_004082d6;
    survival_spawn_stage = 1;
    local_48 = -164.0;
    local_44 = 512.0;
    creature_spawn_template(0x12,&local_48,3.1415927);
    local_48 = 1188.0;
    local_44 = 512.0;
    creature_spawn_template(0x12,&local_48,3.1415927);
  }
  if (survival_spawn_stage == 1) {
    if (player_level < 9) goto LAB_004082d6;
    survival_spawn_stage = 2;
    local_48 = 1088.0;
    local_44 = 512.0;
    creature_spawn_template(0x2c,&local_48,3.1415927);
  }
  if (survival_spawn_stage == 2) {
    if (player_level < 0xb) goto LAB_004082d6;
    survival_spawn_stage = 3;
    local_48 = 0.0;
    do {
      fVar1 = local_48;
      local_40 = 1088.0;
      local_3c = (float)(int)local_48 * 42.666668 + 256.0;
      creature_spawn_template(0x35,&local_40,3.1415927);
      local_48 = (float)((int)fVar1 + 1);
    } while ((int)local_48 < 0xc);
  }
  if (survival_spawn_stage == 3) {
    if (player_level < 0xd) goto LAB_004082d6;
    survival_spawn_stage = 4;
    local_48 = 0.0;
    do {
      fVar1 = local_48;
      local_40 = 1088.0;
      local_3c = (float)(int)local_48 * 64.0 + 384.0;
      creature_spawn_template(0x2b,&local_40,3.1415927);
      local_48 = (float)((int)fVar1 + 1);
    } while ((int)local_48 < 4);
  }
  if (survival_spawn_stage == 4) {
    if (player_level < 0xf) goto LAB_004082d6;
    survival_spawn_stage = 5;
    local_48 = 0.0;
    do {
      fVar1 = local_48;
      local_40 = 1088.0;
      local_3c = (float)(int)local_48 * 64.0 + 384.0;
      creature_spawn_template(0x38,&local_40,3.1415927);
      local_48 = (float)((int)fVar1 + 1);
    } while ((int)local_48 < 4);
    local_48 = 0.0;
    do {
      fVar1 = local_48;
      local_40 = -64.0;
      local_3c = (float)(int)local_48 * 64.0 + 384.0;
      creature_spawn_template(0x38,&local_40,3.1415927);
      local_48 = (float)((int)fVar1 + 1);
    } while ((int)local_48 < 4);
  }
  if (survival_spawn_stage == 5) {
    if (player_level < 0x11) goto LAB_004082d6;
    survival_spawn_stage = 6;
    local_40 = 1088.0;
    local_3c = 512.0;
    creature_spawn_template(0x3a,&local_40,3.1415927);
  }
  if (survival_spawn_stage == 6) {
    if (player_level < 0x13) goto LAB_004082d6;
    survival_spawn_stage = 7;
    local_40 = 640.0;
    local_3c = 512.0;
    creature_spawn_template(1,&local_40,3.1415927);
  }
  if (survival_spawn_stage == 7) {
    if (player_level < 0x15) goto LAB_004082d6;
    survival_spawn_stage = 8;
    local_40 = 384.0;
    local_3c = 256.0;
    creature_spawn_template(1,&local_40,3.1415927);
    local_40 = 640.0;
    local_3c = 768.0;
    creature_spawn_template(1,&local_40,3.1415927);
  }
  if (survival_spawn_stage == 8) {
    if (player_level < 0x1a) goto LAB_004082d6;
    survival_spawn_stage = 9;
    local_48 = 0.0;
    do {
      fVar1 = local_48;
      local_40 = 1088.0;
      local_3c = (float)(int)local_48 * 64.0 + 384.0;
      creature_spawn_template(0x3c,&local_40,3.1415927);
      local_48 = (float)((int)fVar1 + 1);
    } while ((int)local_48 < 4);
    local_48 = 0.0;
    do {
      fVar1 = local_48;
      local_40 = -64.0;
      local_3c = (float)(int)local_48 * 64.0 + 384.0;
      creature_spawn_template(0x3c,&local_40,3.1415927);
      local_48 = (float)((int)fVar1 + 1);
    } while ((int)local_48 < 4);
  }
  if ((survival_spawn_stage == 9) && (0x1f < player_level)) {
    survival_spawn_stage = 10;
    local_40 = 1088.0;
    local_3c = 512.0;
    creature_spawn_template(0x3a,&local_40,3.1415927);
    local_40 = -64.0;
    local_3c = 512.0;
    creature_spawn_template(0x3a,&local_40,3.1415927);
    local_48 = 0.0;
    do {
      fVar1 = local_48;
      local_3c = -64.0;
      local_40 = (float)(int)local_48 * 64.0 + 384.0;
      creature_spawn_template(0x3c,&local_40,3.1415927);
      local_48 = (float)((int)fVar1 + 1);
    } while ((int)local_48 < 4);
    local_48 = 0.0;
    do {
      fVar1 = local_48;
      local_3c = 1088.0;
      local_40 = (float)(int)local_48 * 64.0 + 384.0;
      creature_spawn_template(0x3c,&local_40,3.1415927);
      local_48 = (float)((int)fVar1 + 1);
    } while ((int)local_48 < 4);
  }
LAB_004082d6:
  survival_spawn_cooldown = survival_spawn_cooldown - _config_player_count * frame_dt_ms;
  render_overlay_player_index = 0;
joined_r0x004082fb:
  if (-1 < survival_spawn_cooldown) {
    return;
  }
  iVar5 = 500 - survival_elapsed_ms / 0x708;
  if (iVar5 < 0) {
    uVar6 = 1U - iVar5 >> 1;
    iVar5 = iVar5 + uVar6 * 2;
    do {
      uVar2 = _rand();
      iVar3 = terrain_texture_height;
      iVar4 = terrain_texture_width;
      switch(uVar2 & 3) {
      case 0:
        iVar3 = _rand();
        local_48 = (float)(iVar3 % iVar4);
        local_3c = -40.0;
        pfVar7 = &local_40;
        local_40 = (float)(int)local_48;
        break;
      case 1:
        iVar3 = _rand();
        local_48 = (float)(iVar3 % iVar4);
        pfVar7 = &local_38;
        local_38 = (float)(int)local_48;
        local_34 = (float)terrain_texture_height + 40.0;
        break;
      case 2:
        iVar4 = _rand();
        local_48 = (float)(iVar4 % iVar3);
        pfVar7 = &local_30;
        local_30 = -40.0;
        local_2c = (float)(int)local_48;
        break;
      case 3:
        iVar4 = _rand();
        local_48 = (float)(iVar4 % iVar3);
        pfVar7 = &local_28;
        local_24 = (float)(int)local_48;
        local_28 = (float)terrain_texture_width + 40.0;
        break;
      default:
        goto switchD_00408344_default;
      }
      survival_spawn_creature(pfVar7);
switchD_00408344_default:
      uVar6 = uVar6 - 1;
    } while (uVar6 != 0);
  }
  if (iVar5 < 1) {
    iVar5 = 1;
  }
  survival_spawn_cooldown = survival_spawn_cooldown + iVar5;
  uVar6 = _rand();
  iVar4 = terrain_texture_height;
  iVar5 = terrain_texture_width;
  switch(uVar6 & 3) {
  case 0:
    iVar4 = _rand();
    local_48 = (float)(iVar4 % iVar5);
    local_1c = 0xc2200000;
    pfVar7 = &local_20;
    local_20 = (float)(int)local_48;
    break;
  case 1:
    iVar4 = _rand();
    local_48 = (float)(iVar4 % iVar5);
    pfVar7 = &local_18;
    local_18 = (float)(int)local_48;
    local_14 = (float)terrain_texture_height + 40.0;
    break;
  case 2:
    iVar5 = _rand();
    local_48 = (float)(iVar5 % iVar4);
    pfVar7 = &local_10;
    local_10 = -40.0;
    local_c = (float)(int)local_48;
    break;
  case 3:
    iVar5 = _rand();
    local_48 = (float)(iVar5 % iVar4);
    pfVar7 = &local_8;
    local_4 = (float)(int)local_48;
    local_8 = (float)terrain_texture_width + 40.0;
    break;
  default:
    goto joined_r0x004082fb;
  }
  survival_spawn_creature(pfVar7);
  goto joined_r0x004082fb;
}



/* tutorial_prompt_dialog @ 00408530 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* renders tutorial prompt text + Repeat/Play/Skip buttons and handles selections */

void __cdecl tutorial_prompt_dialog(char *text,float alpha)

{
  float fVar1;
  float fVar2;
  int iVar3;
  char *pcVar4;
  int iVar5;
  int iVar6;
  undefined4 *puVar7;
  longlong lVar8;
  float *pfStack_50;
  float fStack_4c;
  float afStack_24 [4];
  undefined4 uStack_14;
  undefined4 uStack_10;
  undefined4 uStack_c;
  float fStack_8;
  
  iVar3 = (**(code **)(*grim_interface_ptr + 0x14c))();
  iVar6 = 1;
  fStack_4c = 5.925313e-39;
  pcVar4 = _strchr(text,10);
  if (pcVar4 != (char *)0x0) {
    iVar6 = 2;
  }
  if (alpha._0_1_ != '\0') {
    iVar6 = 4;
  }
  lVar8 = __ftol();
  iVar5 = (int)lVar8;
  fStack_8 = (float)text * 0.8;
  fVar1 = (float)iVar5;
  uStack_14 = 0;
  uStack_10 = 0;
  uStack_c = 0;
  fVar2 = (float)(iVar3 + 0x28);
  afStack_24[1] = 64.0;
  pfStack_50 = afStack_24;
  fStack_4c = fVar2;
  afStack_24[0] = fVar1;
  (**(code **)(*grim_interface_ptr + 0xd0))();
  (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,uStack_c);
  (**(code **)(*grim_interface_ptr + 0xd4))(&stack0xffffffbc,fVar2,(float)(iVar6 * 0x10 + 6));
  pfStack_50 = (float *)0x3f800000;
  fStack_4c = 1.0;
  (**(code **)(*grim_interface_ptr + 0x148))
            (grim_interface_ptr,(float)(iVar5 + 0x14),0x42880000,fVar2);
  if ((DAT_00480148 & 1) == 0) {
    DAT_00480148 = DAT_00480148 | 1;
    DAT_00480256 = 1;
    DAT_00480265 = 0;
    DAT_00480264 = 0;
    _DAT_00480260 = 1.0;
    _DAT_0048025c = 0;
    _ui_button_table_b = (char *)0x0;
    DAT_00480254 = 0;
    DAT_00480255 = '\0';
    _DAT_00480258 = 0;
    crt_atexit(&DAT_00408980);
  }
  _ui_button_table_b = s_Repeat_tutorial_004722f8;
  if ((DAT_00480148 & 2) == 0) {
    DAT_00480148 = DAT_00480148 | 2;
    DAT_004807d6 = 1;
    DAT_004807e5 = 0;
    DAT_004807e4 = 0;
    _DAT_004807e0 = 1.0;
    _DAT_004807dc = 0;
    _ui_button_table_c = (char *)0x0;
    DAT_004807d4 = 0;
    DAT_004807d5 = '\0';
    _DAT_004807d8 = 0;
    crt_atexit(&DAT_00408970);
  }
  _ui_button_table_c = s_Play_a_game_004722ec;
  if (afStack_24[0]._0_1_ == '\0') {
    _DAT_004807e0 = (float)(tutorial_stage_timer + -1000) * 0.001;
    if (_DAT_004807e0 <= 1.0) {
      if (_DAT_004807e0 < 0.0) {
        _DAT_004807e0 = 0.0;
      }
    }
    else {
      _DAT_004807e0 = 1.0;
    }
    afStack_24[0] = (float)(config_screen_height + -0x32);
    fStack_4c = (float)(int)afStack_24[0];
    _ui_button_table_c = s_Skip_tutorial_004722dc;
    pfStack_50 = (float *)0x41200000;
    ui_button_update((float *)&pfStack_50,(int *)&ui_button_table_c);
    if (DAT_004807d5 != '\0') {
      DAT_00487292 = 0;
      game_state_pending = 1;
      render_pass_mode = 0;
      ui_transition_direction = 0;
      (**(code **)(*grim_interface_ptr + 0x4c))();
      console_input_poll();
      tutorial_stage_transition_timer = 0xfffffc18;
    }
  }
  else {
    afStack_24[0] = (float)(iVar5 + 0x20);
    pfStack_50 = (float *)(float)(int)afStack_24[0];
    fStack_4c = 90.0;
    _DAT_00480260 = fVar1;
    _DAT_004807e0 = fVar1;
    ui_button_update((float *)&pfStack_50,(int *)&ui_button_table_c);
    afStack_24[0] = (float)(iVar5 + 0xc0);
    pfStack_50 = (float *)(float)(int)afStack_24[0];
    fStack_4c = 90.0;
    ui_button_update((float *)&pfStack_50,(int *)&ui_button_table_b);
    if (DAT_004807d5 != '\0') {
      DAT_00487292 = 0;
      game_state_pending = 1;
      render_pass_mode = 0;
      ui_transition_direction = 0;
      (**(code **)(*grim_interface_ptr + 0x4c))();
      console_input_poll();
      tutorial_stage_transition_timer = 0xfffffc18;
    }
    if (DAT_00480255 != '\0') {
      player_level = 1;
      puVar7 = &player_perk_counts;
      for (iVar3 = 0x80; iVar3 != 0; iVar3 = iVar3 + -1) {
        *puVar7 = 0;
        puVar7 = puVar7 + 1;
      }
      tutorial_stage_transition_timer = 0xfffffc18;
      perk_pending_count = 0;
      tutorial_stage_timer = 2000;
      return;
    }
  }
  return;
}



/* tutorial_timeline_update @ 00408990 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* drives tutorial stage timing, messages, and scripted spawns */

void tutorial_timeline_update(void)

{
  char *pcVar1;
  char cVar2;
  int *piVar3;
  uint uVar4;
  int iVar5;
  undefined4 *puVar6;
  float fStack_6c;
  float afStack_5c [6];
  char *local_44;
  char *local_40;
  char *local_3c;
  char *local_38 [4];
  char *local_28;
  char *local_24;
  char *local_20;
  char *local_1c;
  char *local_18;
  char *local_14;
  char *local_10;
  char *local_c;
  char *local_8;
  undefined *local_4;
  
  if (DAT_0047eec8 != '\0') {
    return;
  }
  tutorial_stage_timer = tutorial_stage_timer + frame_dt_ms;
  quest_spawn_timeline = quest_spawn_timeline + frame_dt_ms;
  local_44 = s_This_is_the_speed_powerup__it_ma_004726c4;
  local_40 = s_This_is_a_weapon_powerup__Pickin_00472664;
  local_3c = s_This_powerup_doubles_all_experie_00472614;
  local_38[0] = s_This_is_the_nuke_powerup__pickin_004725b8;
  local_38[1] = s_Reflex_Boost_powerup_slows_down_t_0047256c;
  local_38[2] = &tutorial_empty_string;
  local_38[3] = &tutorial_empty_string;
  local_28 = s_In_this_tutorial_you_ll_learn_ho_00472534;
  local_24 = s_First_learn_to_move_by_pushing_t_00472504;
  local_20 = s_Now_pick_up_the_bonuses_by_walki_004724d4;
  local_1c = s_Now_learn_to_shoot_and_move_at_t_00472480;
  local_18 = s_Now__move_the_mouse_to_aim_at_th_00472454;
  local_14 = s_It_will_help_you_to_move_and_sho_00472408;
  local_10 = s_Now_let_s_learn_about_Perks__You_0047238c;
  local_c = s_Perks_can_give_you_extra_abiliti_00472340;
  local_8 = s_Great__Now_you_are_ready_to_star_00472308;
  local_4 = &tutorial_empty_string;
  player_health = 0x42c80000;
  if (tutorial_stage_index != 6) {
    player_experience = 0;
  }
  if (tutorial_stage_transition_timer < -1) {
    tutorial_stage_transition_timer = tutorial_stage_transition_timer + frame_dt_ms;
    if (tutorial_stage_transition_timer < -1) goto LAB_00408aa2;
    tutorial_stage_index = tutorial_stage_index + 1;
    if (tutorial_stage_index == 9) {
      tutorial_stage_index = 0;
    }
    tutorial_stage_transition_timer = 0;
  }
  else {
    if (-1 < tutorial_stage_transition_timer) {
      tutorial_stage_transition_timer = tutorial_stage_transition_timer + frame_dt_ms;
    }
LAB_00408aa2:
    if (1000 < tutorial_stage_transition_timer) {
      tutorial_stage_transition_timer = -1;
    }
  }
  fStack_6c = 1.0;
  (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000);
  iVar5 = tutorial_stage_transition_timer;
  if (tutorial_stage_transition_timer < 0) {
    if (tutorial_stage_transition_timer < -1) {
      iVar5 = -tutorial_stage_transition_timer;
      goto LAB_00408aeb;
    }
    fStack_6c = 1.0;
LAB_00408b06:
    if (tutorial_stage_index != 5) goto LAB_00408b78;
    if ((5000 < tutorial_stage_timer) && (-2 < tutorial_stage_transition_timer)) {
      fStack_6c = 1.0 - (float)(tutorial_stage_timer + -5000) * 0.001;
    }
LAB_00408b66:
    if (tutorial_stage_timer < 0x1771) goto LAB_00408b78;
    fStack_6c = 0.0;
  }
  else {
LAB_00408aeb:
    fStack_6c = (float)iVar5 * 0.001;
    if (1.0 <= fStack_6c) goto LAB_00408b06;
    if (tutorial_stage_index == 5) goto LAB_00408b66;
LAB_00408b78:
    if (fStack_6c <= 1.0) {
      if (fStack_6c < 0.0) {
        fStack_6c = 0.0;
      }
    }
    else {
      fStack_6c = 1.0;
    }
    if ((tutorial_stage_index < 0) || ((tutorial_stage_index == 6 && (perk_pending_count < 1))))
    goto LAB_00408be2;
  }
  tutorial_prompt_dialog(local_38[tutorial_stage_index],fStack_6c);
LAB_00408be2:
  if (DAT_004808b0 == '\0') {
    if ((((tutorial_hint_bonus_ptr != (char *)0x0) && (*tutorial_hint_bonus_ptr == '\0')) &&
        (*(float *)(tutorial_hint_bonus_ptr + 0x24) <= 0.0)) &&
       ((*(uint *)(tutorial_hint_bonus_ptr + 0x8c) & 0x400) != 0)) {
      _DAT_004712f4 = (int)*(short *)(tutorial_hint_bonus_ptr + 0x78);
      _DAT_004712f8 = (int)*(short *)(tutorial_hint_bonus_ptr + 0x7a);
      DAT_004808b0 = '\x01';
      fStack_6c = 128.0;
      creature_spawn_template(0x24,&fStack_6c,3.1415927);
      fStack_6c = 152.0;
      creature_spawn_template(0x26,&fStack_6c,3.1415927);
      tutorial_hint_index = tutorial_hint_index + 1;
    }
    tutorial_hint_alpha = tutorial_hint_alpha + frame_dt_ms * -3;
  }
  else {
    tutorial_hint_alpha = tutorial_hint_alpha + frame_dt_ms * 3;
  }
  if (tutorial_hint_alpha < 0x3e9) {
    if (tutorial_hint_alpha < 0) {
      tutorial_hint_alpha = 0;
    }
  }
  else {
    tutorial_hint_alpha = 1000;
  }
  if ((-1 < tutorial_hint_index) && (*(char *)afStack_5c[tutorial_hint_index + 2] != -0x59)) {
    tutorial_prompt_dialog
              ((char *)afStack_5c[tutorial_hint_index + 2],(float)tutorial_hint_alpha * 0.001);
  }
  if (tutorial_stage_index == 0) {
    if ((6000 < tutorial_stage_timer) && (tutorial_stage_transition_timer == -1)) {
      tutorial_repeat_spawn_count = 0;
      tutorial_hint_index = tutorial_stage_transition_timer;
      DAT_004808b0 = 0;
      tutorial_stage_transition_timer = 0xfffffc18;
      return;
    }
  }
  else {
    if (tutorial_stage_index == 1) {
      puVar6 = &player_move_key_backward;
      while ((((cVar2 = (**(code **)(*grim_interface_ptr + 0x80))(puVar6[-1]), cVar2 == '\0' &&
               (cVar2 = (**(code **)(*grim_interface_ptr + 0x80))(*puVar6), cVar2 == '\0')) &&
              ((cVar2 = (**(code **)(*grim_interface_ptr + 0x80))(puVar6[1]), cVar2 == '\0' &&
               (cVar2 = (**(code **)(*grim_interface_ptr + 0x80))(puVar6[2]), cVar2 == '\0')))) ||
             (tutorial_stage_transition_timer != -1))) {
        puVar6 = puVar6 + 0xd8;
        if (0x49129f < (int)puVar6) {
          return;
        }
      }
      tutorial_stage_transition_timer = 0xfffffc18;
      sfx_play(sfx_ui_levelup);
      fStack_6c = 260.0;
      bonus_pool = 1;
      bonus_time_left = 0x42c80000;
      bonus_time_max = 0x42c80000;
      bonus_state = 0;
      bonus_amount = 500;
      bonus_pos_x = 0x43820000;
      bonus_pos_y = 0x43820000;
      effect_spawn_burst((float *)&bonus_pos_x,0xc);
      fStack_6c = 600.0;
      DAT_00482964 = 1;
      DAT_0048296c = 0x42c80000;
      DAT_00482970 = bonus_time_left;
      DAT_00482968 = 0;
      _DAT_0048297c = 1000;
      DAT_00482974 = 0x44160000;
      DAT_00482978 = 0x43c80000;
      effect_spawn_burst((float *)&DAT_00482974,0xc);
      fStack_6c = 300.0;
      _DAT_00482980 = 1;
      DAT_00482988 = 0x42c80000;
      _DAT_0048298c = bonus_time_left;
      DAT_00482984 = 0;
      _DAT_00482998 = 500;
      _DAT_00482990 = 0x43960000;
      _DAT_00482994 = 0x43c80000;
      effect_spawn_burst((float *)&DAT_00482990,0xc);
      return;
    }
    if (tutorial_stage_index == 2) {
      iVar5 = 0;
      piVar3 = &bonus_pool;
      do {
        if (*piVar3 != 0) break;
        piVar3 = piVar3 + 7;
        iVar5 = iVar5 + 1;
      } while ((int)piVar3 < 0x482b08);
      if ((iVar5 == 0x10) && (tutorial_stage_transition_timer == -1)) {
        tutorial_stage_transition_timer = 0xfffffc18;
        sfx_play(sfx_ui_levelup);
        return;
      }
    }
    else {
      if (tutorial_stage_index == 3) {
        puVar6 = &player_fire_key;
        do {
          cVar2 = (**(code **)(*grim_interface_ptr + 0x80))(*puVar6);
          if ((cVar2 != '\0') && (tutorial_stage_transition_timer == -1)) {
            tutorial_stage_transition_timer = -1000;
            sfx_play(sfx_ui_levelup);
            fStack_6c = -164.0;
            creature_spawn_template(0x24,&fStack_6c,3.1415927);
            creature_spawn_template(0x26,(float *)&stack0xffffff9c,3.1415927);
            afStack_5c[0] = -154.0;
            afStack_5c[1] = 612.0;
            creature_spawn_template(0x24,afStack_5c,3.1415927);
          }
          puVar6 = puVar6 + 0xd8;
        } while ((int)puVar6 < 0x4912ac);
        return;
      }
      if (tutorial_stage_index == 4) {
        uVar4 = creatures_none_active();
        if (((char)uVar4 != '\0') && (tutorial_stage_transition_timer == -1)) {
          tutorial_stage_timer = 1000;
          tutorial_stage_transition_timer = 0xfffffc18;
          sfx_play(sfx_ui_levelup);
          tutorial_repeat_spawn_count = 0;
          afStack_5c[0] = 1188.0;
          afStack_5c[1] = 412.0;
          creature_spawn_template(0x24,afStack_5c,3.1415927);
          afStack_5c[0] = 1208.0;
          afStack_5c[1] = 512.0;
          creature_spawn_template(0x26,afStack_5c,3.1415927);
          afStack_5c[0] = 1178.0;
          afStack_5c[1] = 612.0;
          creature_spawn_template(0x24,afStack_5c,3.1415927);
          return;
        }
      }
      else if (tutorial_stage_index == 5) {
        iVar5 = 0;
        piVar3 = &bonus_pool;
        do {
          if (*piVar3 != 0) break;
          piVar3 = piVar3 + 7;
          iVar5 = iVar5 + 1;
        } while ((int)piVar3 < 0x482b08);
        if ((iVar5 == 0x10) && (uVar4 = creatures_none_active(), (char)uVar4 != '\0')) {
          tutorial_repeat_spawn_count = tutorial_repeat_spawn_count + 1;
          if ((int)tutorial_repeat_spawn_count < 8) {
            DAT_004808b0 = '\0';
            if ((tutorial_repeat_spawn_count & 1) == 0) {
              if ((int)tutorial_repeat_spawn_count < 6) {
                afStack_5c[0] = 1056.0;
                afStack_5c[1] = 1056.0;
                tutorial_hint_bonus_ptr = creature_spawn_template(0x27,afStack_5c,3.1415927);
              }
              afStack_5c[0] = 1188.0;
              afStack_5c[1] = 1136.0;
              creature_spawn_template(0x24,afStack_5c,3.1415927);
              afStack_5c[0] = 1208.0;
              afStack_5c[1] = 512.0;
              creature_spawn_template(0x26,afStack_5c,3.1415927);
              afStack_5c[0] = 1178.0;
            }
            else {
              if ((int)tutorial_repeat_spawn_count < 6) {
                afStack_5c[0] = -32.0;
                afStack_5c[1] = 1056.0;
                tutorial_hint_bonus_ptr = creature_spawn_template(0x27,afStack_5c,3.1415927);
              }
              afStack_5c[0] = -164.0;
              afStack_5c[1] = 412.0;
              creature_spawn_template(0x24,afStack_5c,3.1415927);
              afStack_5c[0] = -184.0;
              afStack_5c[1] = 512.0;
              creature_spawn_template(0x26,afStack_5c,3.1415927);
              afStack_5c[0] = -154.0;
            }
            afStack_5c[1] = 612.0;
            creature_spawn_template(0x24,afStack_5c,3.1415927);
            if (tutorial_repeat_spawn_count == 4) {
              afStack_5c[0] = 512.0;
              afStack_5c[1] = 1056.0;
              creature_spawn_template(0x40,afStack_5c,3.1415927);
            }
            if ((int)tutorial_repeat_spawn_count < 6) {
              pcVar1 = tutorial_hint_bonus_ptr;
              switch(tutorial_repeat_spawn_count) {
              case 1:
                pcVar1[0x78] = '\r';
                pcVar1[0x79] = '\0';
                pcVar1 = tutorial_hint_bonus_ptr;
                pcVar1[0x7a] = -1;
                pcVar1[0x7b] = -1;
                return;
              case 2:
                pcVar1[0x78] = '\x03';
                pcVar1[0x79] = '\0';
                pcVar1 = tutorial_hint_bonus_ptr;
                pcVar1[0x7a] = '\x05';
                pcVar1[0x7b] = '\0';
                return;
              case 3:
                pcVar1[0x78] = '\x06';
                pcVar1[0x79] = '\0';
                pcVar1 = tutorial_hint_bonus_ptr;
                pcVar1[0x7a] = -1;
                pcVar1[0x7b] = -1;
                return;
              case 4:
                pcVar1[0x78] = '\x05';
                pcVar1[0x79] = '\0';
                pcVar1 = tutorial_hint_bonus_ptr;
                pcVar1[0x7a] = -1;
                pcVar1[0x7b] = -1;
                return;
              case 5:
                pcVar1[0x78] = '\t';
                pcVar1[0x79] = '\0';
                pcVar1 = tutorial_hint_bonus_ptr;
                pcVar1[0x7a] = -1;
                pcVar1[0x7b] = -1;
                return;
              }
            }
          }
          else if (tutorial_stage_transition_timer == -1) {
            tutorial_stage_transition_timer = 0xfffffc18;
            sfx_play(sfx_ui_levelup);
            player_experience = 3000;
            return;
          }
        }
      }
      else if (tutorial_stage_index == 6) {
        if ((perk_pending_count < 1) && (tutorial_stage_transition_timer == -1)) {
          tutorial_stage_transition_timer = 0xfffffc18;
          afStack_5c[0] = -164.0;
          afStack_5c[1] = 412.0;
          creature_spawn_template(0x24,afStack_5c,3.1415927);
          afStack_5c[0] = -184.0;
          afStack_5c[1] = 512.0;
          creature_spawn_template(0x26,afStack_5c,3.1415927);
          afStack_5c[0] = -154.0;
          afStack_5c[1] = 612.0;
          creature_spawn_template(0x24,afStack_5c,3.1415927);
          afStack_5c[0] = -32.0;
          afStack_5c[1] = -32.0;
          creature_spawn_template(0x28,afStack_5c,3.1415927);
          afStack_5c[0] = 1188.0;
          afStack_5c[1] = 412.0;
          creature_spawn_template(0x24,afStack_5c,3.1415927);
          afStack_5c[0] = 1208.0;
          afStack_5c[1] = 512.0;
          creature_spawn_template(0x26,afStack_5c,3.1415927);
          afStack_5c[0] = 1178.0;
          afStack_5c[1] = 612.0;
          creature_spawn_template(0x24,afStack_5c,3.1415927);
          return;
        }
      }
      else if (tutorial_stage_index == 7) {
        iVar5 = 0;
        piVar3 = &bonus_pool;
        do {
          if (*piVar3 != 0) break;
          piVar3 = piVar3 + 7;
          iVar5 = iVar5 + 1;
        } while ((int)piVar3 < 0x482b08);
        if (((iVar5 == 0x10) && (uVar4 = creatures_none_active(), (char)uVar4 != '\0')) &&
           (tutorial_stage_transition_timer == -1)) {
          tutorial_stage_transition_timer = -1000;
        }
      }
    }
  }
  return;
}



/* camera_update @ 00409500 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* updates camera offsets and screen shake */

void camera_update(void)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  
  if (_camera_shake_timer <= 0.0) {
    _camera_shake_offset_x = 0.0;
    _camera_shake_offset_y = 0.0;
  }
  else {
    _camera_shake_timer = _camera_shake_timer - frame_dt * 3.0;
    if (_camera_shake_timer < 0.0) {
      camera_shake_pulses = camera_shake_pulses + -1;
      if (camera_shake_pulses < 1) {
        _camera_shake_timer = 0.0;
      }
      else {
        _camera_shake_timer = 0.1;
        if (time_scale_active != '\0') {
          _camera_shake_timer = 0.06;
        }
        iVar1 = _rand();
        iVar4 = camera_shake_pulses * 0x3c;
        iVar2 = _rand();
        iVar1 = iVar1 % (iVar4 / 0x14) + iVar2 % 10;
        uVar3 = _rand();
        if ((uVar3 & 1) == 0) {
          iVar1 = -iVar1;
        }
        _camera_shake_offset_x = (float)iVar1;
        iVar1 = _rand();
        iVar4 = camera_shake_pulses * 0x3c;
        iVar2 = _rand();
        iVar1 = iVar1 % (iVar4 / 0x14) + iVar2 % 10;
        uVar3 = _rand();
        if ((uVar3 & 1) == 0) {
          _camera_shake_offset_y = (float)-iVar1;
        }
        else {
          _camera_shake_offset_y = (float)iVar1;
        }
      }
    }
  }
  if (_config_player_count == 1) {
    _camera_offset_x =
         (float)(config_screen_width / 2) - (&player_pos_x)[render_overlay_player_index * 0xd8];
    _camera_offset_y =
         (float)(config_screen_height / 2) - (&player_pos_y)[render_overlay_player_index * 0xd8];
    goto LAB_004097e4;
  }
  if (0.0 < player_health) {
    if (player2_health <= 0.0) goto LAB_00409716;
  }
  else {
    if (0.0 < player2_health) {
      _camera_offset_x = (float)(config_screen_width / 2) - player2_pos_x;
      _camera_offset_y = (float)(config_screen_height / 2) - player2_pos_y;
      goto LAB_004097e4;
    }
LAB_00409716:
    if (0.0 < player_health) {
      _camera_offset_x = (float)(config_screen_width / 2) - player_pos_x;
      _camera_offset_y = (float)(config_screen_height / 2) - player_pos_y;
      goto LAB_004097e4;
    }
    if (player2_health <= 0.0) goto LAB_004097e4;
  }
  if (0.0 < player_health) {
    _camera_offset_x =
         (float)(config_screen_width / 2) - (player_pos_x - (player_pos_x - player2_pos_x) * 0.5);
    _camera_offset_y =
         (float)(config_screen_height / 2) - (player_pos_y - (player_pos_y - player2_pos_y) * 0.5);
  }
LAB_004097e4:
  _camera_offset_x = _camera_offset_x + _camera_shake_offset_x;
  _camera_offset_y = _camera_offset_y + _camera_shake_offset_y;
  if (-1.0 < _camera_offset_x) {
    _camera_offset_x = -1.0;
  }
  if (-1.0 < _camera_offset_y) {
    _camera_offset_y = -1.0;
  }
  if (_camera_offset_x < (float)(config_screen_width - terrain_texture_width)) {
    _camera_offset_x = (float)(config_screen_width - terrain_texture_width);
  }
  if ((float)(config_screen_height - terrain_texture_height) <= _camera_offset_y) {
    return;
  }
  _camera_offset_y = (float)(config_screen_height - terrain_texture_height);
  return;
}



/* bonus_apply @ 00409890 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* applies a picked bonus to the player and spawns related effects */

void __cdecl bonus_apply(int player_index,int *bonus_entry)

{
  float fVar1;
  int iVar2;
  undefined4 *puVar3;
  int iVar4;
  uint uVar5;
  float *pfVar6;
  char *pcVar7;
  float10 fVar8;
  int iVar9;
  int owner_id;
  float local_10 [4];
  
  sfx_play(sfx_ui_bonus);
  local_10[0] = 1.0;
  iVar2 = perk_count_get(perk_id_bonus_economist);
  if (iVar2 != 0) {
    local_10[0] = 1.5;
  }
  iVar2 = *bonus_entry;
  if (iVar2 == 3) {
    weapon_assign_player(player_index,bonus_entry[6]);
  }
  else if (iVar2 == 0xc) {
    pfVar6 = (float *)(&player_health + player_index * 0xd8);
    if (((float)(&player_health)[player_index * 0xd8] < 100.0) &&
       (fVar1 = *pfVar6, *pfVar6 = fVar1 + 10.0, 100.0 < fVar1 + 10.0)) {
      *pfVar6 = 100.0;
    }
  }
  else if (iVar2 == 9) {
    if (_bonus_reflex_boost_timer <= 0.0) {
      FUN_0041a810(DAT_00485484,DAT_0048548c,&bonus_reflex_boost_timer,0);
    }
    _bonus_reflex_boost_timer = (float)bonus_entry[6] * local_10[0] + _bonus_reflex_boost_timer;
    if (0 < _config_player_count) {
      puVar3 = &player_ammo;
      iVar2 = _config_player_count;
      do {
        *puVar3 = puVar3[-2];
        puVar3[1] = 0;
        puVar3 = puVar3 + 0xd8;
        iVar2 = iVar2 + -1;
      } while (iVar2 != 0);
    }
    local_10[1] = 0.6;
    local_10[0] = 0.6;
    _effect_template_color_g = 0x3f19999a;
    local_10[2] = 1.0;
    local_10[3] = 1.0;
    _effect_template_color_r = 0x3f19999a;
    _effect_template_flags = 0x19;
    _effect_template_color_b = 0x3f800000;
    _effect_template_color_a = 0x3f800000;
    _effect_template_lifetime = 0x3e800000;
    _effect_template_age = 0;
    _effect_template_half_width = 0x42000000;
    _effect_template_half_height = 0x42000000;
    _effect_template_rotation = 0.0;
    effect_template_vel_x = 0.0;
    effect_template_vel_y = 0.0;
    _effect_template_scale_step = 0x42480000;
    effect_spawn(1,(float *)(bonus_entry + 4));
    _effect_template_rotation = 0.0;
    effect_template_vel_x = 0.0;
    effect_template_vel_y = 0.0;
  }
  else if (iVar2 == 4) {
    if (_bonus_weapon_power_up_timer <= 0.0) {
      FUN_0041a810(DAT_00485420,DAT_00485428,&bonus_weapon_power_up_timer,0);
    }
    _bonus_weapon_power_up_timer =
         (float)bonus_entry[6] * local_10[0] + _bonus_weapon_power_up_timer;
    *(undefined4 *)(&player_weapon_reset_latch + player_index * 0x360) = 0;
    (&player_shot_cooldown)[player_index * 0xd8] = 0;
    (&player_reload_timer)[player_index * 0xd8] = 0;
    (&player_ammo)[player_index * 0xd8] = (&player_clip_size)[player_index * 0xd8];
  }
  else if (iVar2 == 0xd) {
    if ((player_speed_bonus_timer <= 0.0) && (player2_speed_bonus_timer <= 0.0)) {
      FUN_0041a810(DAT_004854d4,DAT_004854dc,&player_speed_bonus_timer,&player2_speed_bonus_timer);
    }
    (&player_speed_bonus_timer)[player_index * 0xd8] =
         (float)bonus_entry[6] * local_10[0] + (&player_speed_bonus_timer)[player_index * 0xd8];
  }
  else if (iVar2 == 0xb) {
    if (_bonus_freeze_timer <= 0.0) {
      FUN_0041a810(DAT_004854ac,DAT_004854b4,&bonus_freeze_timer,0);
    }
    pfVar6 = (float *)&creature_pos_x;
    _bonus_freeze_timer = (float)bonus_entry[6] * local_10[0] + _bonus_freeze_timer;
    do {
      if ((*(char *)(pfVar6 + -5) != '\0') && (pfVar6[4] <= 0.0)) {
        iVar2 = 8;
        do {
          iVar4 = _rand();
          effect_spawn_freeze_shard(pfVar6,(float)(iVar4 % 0x264) * 0.01);
          iVar2 = iVar2 + -1;
        } while (iVar2 != 0);
        iVar2 = _rand();
        effect_spawn_freeze_shatter(pfVar6,(float)(iVar2 % 0x264) * 0.01);
        *(undefined1 *)(pfVar6 + -5) = 0;
      }
      pfVar6 = pfVar6 + 0x26;
    } while ((int)pfVar6 < 0x4aa34c);
    local_10[0] = 0.3;
    local_10[1] = 0.5;
    local_10[2] = 0.8;
    local_10[3] = 1.0;
    _effect_template_color_r = 0x3e99999a;
    _effect_template_flags = 0x19;
    _effect_template_color_g = 0x3f000000;
    _effect_template_color_b = 0x3f4ccccd;
    _effect_template_color_a = 0x3f800000;
    _effect_template_lifetime = 0x3e800000;
    _effect_template_age = 0;
    _effect_template_half_width = 0x42000000;
    _effect_template_half_height = 0x42000000;
    _effect_template_rotation = 0.0;
    effect_template_vel_x = 0.0;
    effect_template_vel_y = 0.0;
    _effect_template_scale_step = 0x42480000;
    effect_spawn(1,(float *)(bonus_entry + 4));
    sfx_play_panned(sfx_shockwave);
    _effect_template_rotation = 0.0;
    effect_template_vel_x = 0.0;
    effect_template_vel_y = 0.0;
  }
  else if (iVar2 == 10) {
    if ((player_shield_timer <= 0.0) && (player2_shield_timer <= 0.0)) {
      FUN_0041a810(DAT_00485498,DAT_004854a0,&player_shield_timer,&player2_shield_timer);
    }
    (&player_shield_timer)[player_index * 0xd8] =
         (float)bonus_entry[6] * local_10[0] + (&player_shield_timer)[player_index * 0xd8];
  }
  else if (iVar2 == 7) {
    bonus_spawn_guard = 1;
    if (*(float *)(DAT_0048086c + 0xc) == 0.0) {
      iVar2 = -100;
    }
    else {
      iVar2 = -1 - player_index;
    }
    pfVar6 = (float *)(bonus_entry + 4);
    shock_chain_links_left = 0x20;
    iVar4 = FUN_00420040(pfVar6,-1,0.0);
    fVar8 = (float10)fpatan((float10)(float)(&creature_pos_y)[iVar4 * 0x26] -
                            (float10)(float)bonus_entry[5],
                            (float10)(float)(&creature_pos_x)[iVar4 * 0x26] - (float10)*pfVar6);
    shock_chain_projectile_id =
         projectile_spawn(pfVar6,(float)((fVar8 - (float10)1.5707964) - (float10)3.1415927),0x15,
                          iVar2);
    bonus_spawn_guard = 0;
    sfx_play_panned(sfx_shock_hit_01);
  }
  else if (iVar2 == 8) {
    bonus_spawn_guard = 1;
    if (*(float *)(DAT_0048086c + 0xc) == 0.0) {
      iVar2 = -100;
    }
    else {
      iVar2 = -1 - player_index;
    }
    player_index = 0;
    do {
      projectile_spawn((float *)(bonus_entry + 4),(float)player_index * 0.3926991,9,iVar2);
      player_index = player_index + 1;
    } while (player_index < 0x10);
    bonus_spawn_guard = 0;
    sfx_play_panned(sfx_explosion_medium);
  }
  else if (iVar2 == 0xe) {
    if ((player_fire_bullets_timer <= 0.0) && (player2_fire_bullets_timer <= 0.0)) {
      FUN_0041a810(DAT_004854e8,DAT_004854f0,&player_fire_bullets_timer,&player2_fire_bullets_timer)
      ;
    }
    (&player_fire_bullets_timer)[player_index * 0xd8] =
         local_10[0] * 5.0 + (&player_fire_bullets_timer)[player_index * 0xd8];
    *(undefined4 *)(&player_weapon_reset_latch + player_index * 0x360) = 0;
    (&player_shot_cooldown)[player_index * 0xd8] = 0;
    (&player_reload_timer)[player_index * 0xd8] = 0;
    (&player_ammo)[player_index * 0xd8] = (&player_clip_size)[player_index * 0xd8];
  }
  else if (iVar2 == 2) {
    if (_bonus_energizer_timer <= 0.0) {
      FUN_0041a810(DAT_004853f8,DAT_00485400,&bonus_energizer_timer,0);
    }
    _bonus_energizer_timer = local_10[0] * 8.0 + _bonus_energizer_timer;
  }
  else if (iVar2 == 6) {
    if (_bonus_double_xp_timer <= 0.0) {
      FUN_0041a810(DAT_00485448,DAT_00485450,&bonus_double_xp_timer,0);
    }
    _bonus_double_xp_timer = local_10[0] * 6.0 + _bonus_double_xp_timer;
  }
  else if (iVar2 == 5) {
    uVar5 = _rand();
    iVar2 = (uVar5 & 3) + 4;
    if (iVar2 != 0) {
      do {
        owner_id = -100;
        iVar9 = 1;
        iVar4 = _rand();
        iVar4 = projectile_spawn((float *)(bonus_entry + 4),(float)(iVar4 % 0x274) * 0.01,iVar9,
                                 owner_id);
        if (iVar4 != -1) {
          iVar9 = _rand();
          (&projectile_speed_scale)[iVar4 * 0x10] =
               ((float)(iVar9 % 0x32) * 0.01 + 0.5) * (float)(&projectile_speed_scale)[iVar4 * 0x10]
          ;
        }
        iVar2 = iVar2 + -1;
      } while (iVar2 != 0);
    }
    iVar9 = -100;
    iVar4 = 6;
    pfVar6 = (float *)(bonus_entry + 4);
    iVar2 = _rand();
    projectile_spawn(pfVar6,(float)(iVar2 % 0x274) * 0.01,iVar4,iVar9);
    iVar9 = -100;
    iVar4 = 6;
    iVar2 = _rand();
    projectile_spawn(pfVar6,(float)(iVar2 % 0x274) * 0.01,iVar4,iVar9);
    FUN_0042f6c0(pfVar6,1.0);
    camera_shake_pulses = 0x14;
    _camera_shake_timer = 0x3e4ccccd;
    bonus_spawn_guard = 1;
    iVar2 = 0;
    pcVar7 = &creature_pool;
    do {
      if ((((*pcVar7 != '\0') && (ABS(*(float *)(pcVar7 + 0x14) - *pfVar6) <= 256.0)) &&
          (ABS(*(float *)(pcVar7 + 0x18) - (float)bonus_entry[5]) <= 256.0)) &&
         (fVar1 = 256.0 - SQRT((*(float *)(pcVar7 + 0x18) - (float)bonus_entry[5]) *
                               (*(float *)(pcVar7 + 0x18) - (float)bonus_entry[5]) +
                               (*(float *)(pcVar7 + 0x14) - *pfVar6) *
                               (*(float *)(pcVar7 + 0x14) - *pfVar6)), 0.0 < fVar1)) {
        local_10[0] = 0.0;
        local_10[1] = 0.0;
        creature_apply_damage(iVar2,fVar1 * 5.0,3,local_10);
      }
      pcVar7 = pcVar7 + 0x98;
      iVar2 = iVar2 + 1;
    } while ((int)pcVar7 < 0x4aa338);
    bonus_spawn_guard = 0;
    sfx_play_panned(sfx_explosion_large);
    sfx_play_panned(sfx_shockwave);
  }
  else if (iVar2 == 1) {
    player_experience = player_experience + bonus_entry[6];
  }
  local_10[0] = 0.4;
  local_10[1] = 0.5;
  local_10[2] = 1.0;
  local_10[3] = 0.5;
  _effect_template_color_r = 0x3ecccccd;
  _effect_template_flags = 0x1d;
  _effect_template_color_g = 0x3f000000;
  _effect_template_color_b = 0x3f800000;
  _effect_template_color_a = 0x3f000000;
  _effect_template_lifetime = 0x3ecccccd;
  _effect_template_half_width = 0x42000000;
  _effect_template_half_height = 0x42000000;
  if (*bonus_entry != 5) {
    iVar2 = 0xc;
    do {
      uVar5 = _rand();
      _effect_template_rotation = (float)(uVar5 & 0x7f) * 0.049087387;
      uVar5 = _rand();
      uVar5 = uVar5 & 0x8000007f;
      if ((int)uVar5 < 0) {
        uVar5 = (uVar5 - 1 | 0xffffff80) + 1;
      }
      effect_template_vel_x = (float)(int)(uVar5 - 0x40);
      uVar5 = _rand();
      uVar5 = uVar5 & 0x8000007f;
      if ((int)uVar5 < 0) {
        uVar5 = (uVar5 - 1 | 0xffffff80) + 1;
      }
      effect_template_vel_y = (float)(int)(uVar5 - 0x40);
      _effect_template_scale_step = 0x3dcccccd;
      effect_spawn(0,(float *)(bonus_entry + 4));
      iVar2 = iVar2 + -1;
    } while (iVar2 != 0);
  }
  return;
}



/* bonus_update @ 0040a320 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* updates bonus lifetimes and handles player pickups */

void bonus_update(void)

{
  char cVar1;
  float fVar2;
  int iVar3;
  float *pfVar4;
  
  if (render_pass_mode != '\0') {
    pfVar4 = (float *)&bonus_time_left;
    iVar3 = _config_player_count;
    do {
      if (pfVar4[-2] != 0.0) {
        cVar1 = *(char *)(pfVar4 + -1);
        if (cVar1 == '\0') {
          fVar2 = *pfVar4 - frame_dt;
        }
        else {
          fVar2 = *pfVar4 - frame_dt * 3.0;
        }
        *pfVar4 = fVar2;
        if ((cVar1 == '\0') && (_config_game_mode == 8)) {
          *pfVar4 = 5.0;
        }
        if (*pfVar4 < 0.0) {
          pfVar4[-2] = 0.0;
        }
        if (cVar1 == '\0') {
          render_overlay_player_index = 0;
          if (0 < iVar3) {
            do {
              if (SQRT((pfVar4[3] - (float)(&player_pos_y)[render_overlay_player_index * 0xd8]) *
                       (pfVar4[3] - (float)(&player_pos_y)[render_overlay_player_index * 0xd8]) +
                       (pfVar4[2] - (float)(&player_pos_x)[render_overlay_player_index * 0xd8]) *
                       (pfVar4[2] - (float)(&player_pos_x)[render_overlay_player_index * 0xd8])) <
                  26.0) {
                bonus_apply(render_overlay_player_index,(int *)(pfVar4 + -2));
                iVar3 = _config_player_count;
                *(undefined1 *)(pfVar4 + -1) = 1;
                *pfVar4 = 0.5;
              }
              render_overlay_player_index = render_overlay_player_index + 1;
            } while (render_overlay_player_index < iVar3);
          }
        }
      }
      pfVar4 = pfVar4 + 7;
    } while ((int)pfVar4 < 0x482b10);
    render_overlay_player_index = 0;
    if (_bonus_freeze_timer <= 0.0) {
      _bonus_freeze_timer = 0.0;
    }
    else {
      _bonus_freeze_timer = _bonus_freeze_timer - frame_dt;
    }
    if (_bonus_double_xp_timer <= 0.0) {
      _bonus_double_xp_timer = 0.0;
    }
    else {
      _bonus_double_xp_timer = _bonus_double_xp_timer - frame_dt;
    }
    if (0.0 <= _DAT_004aaf2c) {
      _DAT_004aaf2c = (_DAT_004aaf2c + 1.0) * frame_dt * 1.8 + _DAT_004aaf2c;
    }
  }
  return;
}



/* ui_draw_clock_gauge_at @ 0040a4c0 */

/* draws the clock gauge at a position when progress > 0 */

void __cdecl ui_draw_clock_gauge_at(float *xy,float radius,float progress)

{
  if (0.0 < progress) {
    __ftol();
    __ftol();
    __ftol();
    ui_draw_clock_gauge();
  }
  return;
}



/* ui_render_aim_indicators @ 0040a510 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* renders aim reticles, reload gauges, and player HUD indicators */

void ui_render_aim_indicators(void)

{
  float fVar1;
  int iVar2;
  float10 fVar3;
  float10 fVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  
  if (demo_mode_active == '\0') {
    if ((DAT_00480340 & 1) == 0) {
      DAT_00480340 = DAT_00480340 | 1;
      crt_atexit(&DAT_0040aaa0);
    }
    if ((DAT_00480340 & 2) == 0) {
      DAT_00480340 = DAT_00480340 | 2;
      crt_atexit(&DAT_0040aa90);
    }
    (**(code **)(*grim_interface_ptr + 0x20))(0x13,5);
    (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
    render_overlay_player_index = 0;
    iVar2 = _config_player_count;
    if (0 < _config_player_count) {
      do {
        if (0.0 < (float)(&player_health)[render_overlay_player_index * 0xd8]) {
          (**(code **)(*grim_interface_ptr + 0x100))(0x3f000000,0x3f000000,0x3f000000,0x3f000000);
          uVar7 = 0x3e99999a;
          (**(code **)(*grim_interface_ptr + 0x114))(0,0,0x3dcccccd,0x3e99999a);
          aim_screen_x = _camera_offset_x +
                         (float)(&player_aim_x)[render_overlay_player_index * 0xd8];
          aim_screen_y = _camera_offset_y +
                         (float)(&player_aim_y)[render_overlay_player_index * 0xd8];
          (**(code **)(*grim_interface_ptr + 0xd8))(aim_screen_x,aim_screen_y,uVar7);
          (**(code **)(*grim_interface_ptr + 0xc4))(bullet_trail_texture,0);
          (**(code **)(*grim_interface_ptr + 0x100))(0x3f000000,0,0x3f000000,0x3f800000);
          (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,0x3f0ccccd);
          (**(code **)(*grim_interface_ptr + 0xdc))(aim_screen_x,aim_screen_y,uVar7);
          (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f333333,0x3dcccccd,0x3f4ccccd);
          aim_screen_x = _camera_offset_x +
                         (float)(&player_aim_x)[render_overlay_player_index * 0xd8];
          aim_screen_y = _camera_offset_y +
                         (float)(&player_aim_y)[render_overlay_player_index * 0xd8];
          ui_draw_clock_gauge_at
                    (&aim_screen_x,48.0,
                     (float)(&player_reload_timer)[render_overlay_player_index * 0xd8] /
                     (float)(&player_reload_timer_max)[render_overlay_player_index * 0xd8]);
          (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,0x3f333333);
          iVar2 = _config_player_count;
        }
        render_overlay_player_index = render_overlay_player_index + 1;
      } while (render_overlay_player_index < iVar2);
    }
    render_overlay_player_index = 0;
    if (0 < iVar2) {
      do {
        if ((0.0 < (float)(&player_health)[render_overlay_player_index * 0xd8]) &&
           ((&config_hud_indicator_toggle)[render_overlay_player_index] != '\0')) {
          (**(code **)(*grim_interface_ptr + 0xfc))
                    ((&player_heading)[render_overlay_player_index * 0xd8]);
          (**(code **)(*grim_interface_ptr + 0xc4))(DAT_0048f7d8,0);
          (**(code **)(*grim_interface_ptr + 0x100))(0,0,0x3f800000,0x3f800000);
          if (_config_player_count == 2) {
            if (render_overlay_player_index == 0) {
              iVar2 = *grim_interface_ptr;
              uVar6 = 0x3f19999a;
              uVar5 = 0x3f666666;
              uVar7 = 0x3f4ccccd;
              goto LAB_0040a8dc;
            }
            (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f666666,0x3f4ccccd,0x3f19999a);
          }
          else {
            uVar6 = 0x3e99999a;
            uVar5 = 0x3f800000;
            iVar2 = *grim_interface_ptr;
            uVar7 = 0x3f800000;
LAB_0040a8dc:
            (**(code **)(iVar2 + 0x114))(uVar7,uVar5,0x3f800000,uVar6);
          }
          (**(code **)(*grim_interface_ptr + 0xe8))();
          if ((&config_player_mode_flags)[render_overlay_player_index] == 4) {
            fVar1 = _camera_offset_x +
                    (float)(&player_move_target_x)[render_overlay_player_index * 0xd8];
            aim_screen_y = (_camera_offset_y +
                           (float)(&player_move_target_y)[render_overlay_player_index * 0xd8]) -
                           16.0;
          }
          else {
            fVar3 = (float10)fcos((float10)(float)(&player_heading)
                                                  [render_overlay_player_index * 0xd8] -
                                  (float10)1.5707964);
            fVar4 = (float10)fsin((float10)(float)(&player_heading)
                                                  [render_overlay_player_index * 0xd8] -
                                  (float10)1.5707964);
            fVar1 = _camera_offset_x + (float)(&player_pos_x)[render_overlay_player_index * 0xd8] +
                    (float)fVar3 * 60.0;
            aim_screen_y = (float)((fVar4 * (float10)60.0 +
                                   (float10)(_camera_offset_y +
                                            (float)(&player_pos_y)
                                                   [render_overlay_player_index * 0xd8])) -
                                  (float10)16.0);
          }
          aim_screen_x = fVar1 - 16.0;
          (**(code **)(*grim_interface_ptr + 0x11c))
                    (aim_screen_x,aim_screen_y,0x42000000,0x42000000);
          (**(code **)(*grim_interface_ptr + 0xf0))();
          iVar2 = _config_player_count;
        }
        render_overlay_player_index = render_overlay_player_index + 1;
      } while (render_overlay_player_index < iVar2);
    }
    render_overlay_player_index = 0;
    if (0 < iVar2) {
      do {
        if (0.0 < (float)(&player_health)[render_overlay_player_index * 0xd8]) {
          FUN_0041a320();
          iVar2 = _config_player_count;
        }
        render_overlay_player_index = render_overlay_player_index + 1;
      } while (render_overlay_player_index < iVar2);
    }
    render_overlay_player_index = 0;
  }
  return;
}



/* gameplay_update_and_render @ 0040aab0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* main gameplay frame loop for state 9 (timers, updates, renders, UI) */

void gameplay_update_and_render(void)

{
  float fVar1;
  float fVar2;
  char cVar3;
  int iVar4;
  undefined4 *puVar5;
  longlong lVar6;
  float fStack_20;
  
  if (time_scale_active != '\0') {
    _time_scale_factor = 0.3;
    if (_bonus_reflex_boost_timer < 1.0) {
      _time_scale_factor = (1.0 - _bonus_reflex_boost_timer) * 0.7 + 0.3;
    }
    frame_dt = _time_scale_factor * frame_dt;
    lVar6 = __ftol();
    frame_dt_ms = (int)lVar6;
  }
  if (demo_mode_active == '\0') {
    fStack_20 = 5.93891e-39;
    iVar4 = game_is_full_version();
    if (((char)iVar4 == '\0') && (_config_game_mode != 8)) {
      fStack_20 = 5.938947e-39;
      game_sequence_id = game_sequence_get();
      if (game_sequence_id < 0x249f01) {
        if (DAT_0048084c < 1) {
          if (_config_game_mode != 3) goto LAB_0040abea;
        }
        else if ((_config_game_mode != 3) || (5.0 < (float)(DAT_0048084c / 1000) * 0.016666668))
        goto LAB_0040abae;
        if ((game_state_id != 9) || ((_quest_stage_major < 2 && (_quest_stage_minor < 0xb))))
        goto LAB_0040abea;
      }
LAB_0040abae:
      frame_dt_ms = 0;
      frame_dt = 0.0;
      goto LAB_0040abf9;
    }
LAB_0040abea:
    if (game_paused_flag != '\0') goto LAB_0040abae;
LAB_0040ac01:
    if (DAT_0047eec8 == '\0') {
      fStack_20 = 5.939193e-39;
      perks_update_effects();
    }
  }
  else {
LAB_0040abf9:
    if (game_paused_flag == '\0') goto LAB_0040ac01;
  }
  fStack_20 = 5.9392e-39;
  effects_update();
  if (demo_mode_active == '\0') {
    fStack_20 = 5.939224e-39;
    iVar4 = game_is_full_version();
    if (((char)iVar4 != '\0') || (_config_game_mode == 8)) goto LAB_0040aca0;
    fStack_20 = 5.93925e-39;
    game_sequence_id = game_sequence_get();
    if (game_sequence_id < 0x249f01) {
      if (DAT_0048084c < 1) {
        if (_config_game_mode != 3) goto LAB_0040aca0;
      }
      else if ((_config_game_mode != 3) || (5.0 < (float)(DAT_0048084c / 1000) * 0.016666668))
      goto LAB_0040acbb;
      if ((game_state_id != 9) || ((_quest_stage_major < 2 && (_quest_stage_minor < 0xb))))
      goto LAB_0040aca0;
    }
  }
  else {
LAB_0040aca0:
    if ((game_paused_flag == '\0') && (game_state_id == 9)) {
      fStack_20 = 5.939429e-39;
      creature_update_all();
      fStack_20 = 5.939436e-39;
      projectile_update();
    }
  }
LAB_0040acbb:
  if (demo_mode_active == '\0') {
    fStack_20 = 5.93946e-39;
    iVar4 = game_is_full_version();
    if (((char)iVar4 != '\0') || (_config_game_mode == 8)) goto LAB_0040ad54;
    fStack_20 = 5.93949e-39;
    game_sequence_id = game_sequence_get();
    if (game_sequence_id < 0x249f01) {
      if (DAT_0048084c < 1) {
        if (_config_game_mode != 3) goto LAB_0040ad54;
      }
      else if ((_config_game_mode != 3) || (5.0 < (float)(DAT_0048084c / 1000) * 0.016666668))
      goto LAB_0040ad8e;
      if ((game_state_id != 9) || ((_quest_stage_major < 2 && (_quest_stage_minor < 0xb))))
      goto LAB_0040ad54;
    }
  }
  else {
LAB_0040ad54:
    if ((game_paused_flag == '\0') &&
       ((game_state_id == 9 && (render_overlay_player_index = 0, 0 < _config_player_count)))) {
      do {
        fStack_20 = 5.939702e-39;
        player_update();
        render_overlay_player_index = render_overlay_player_index + 1;
      } while (render_overlay_player_index < _config_player_count);
    }
  }
LAB_0040ad8e:
  render_overlay_player_index = 0;
  if (_config_game_mode == 1) {
    fStack_20 = 5.93976e-39;
    survival_update();
  }
  if (_config_game_mode == 2) {
    fStack_20 = 5.939779e-39;
    rush_mode_update();
  }
  if (_config_game_mode == 3) {
    fStack_20 = 5.939797e-39;
    quest_mode_update();
  }
  highscore_score_xp = player_experience;
  if ((DAT_0047eec8 == '\0') && (game_paused_flag == '\0')) {
    if (0.0 < _bonus_weapon_power_up_timer) {
      _bonus_weapon_power_up_timer = _bonus_weapon_power_up_timer - frame_dt;
    }
    if (0.0 < _bonus_energizer_timer) {
      _bonus_energizer_timer = _bonus_energizer_timer - frame_dt;
    }
    time_scale_active = 0.0 < _bonus_reflex_boost_timer;
    if ((bool)time_scale_active) {
      _bonus_reflex_boost_timer = _bonus_reflex_boost_timer - frame_dt;
    }
    survival_elapsed_ms = survival_elapsed_ms + frame_dt_ms;
    (&DAT_0048708c)[player_weapon_id] = (&DAT_0048708c)[player_weapon_id] + frame_dt_ms;
  }
  fStack_20 = 5.940078e-39;
  camera_update();
  fStack_20 = 5.940085e-39;
  gameplay_render_world();
  if (_config_game_mode == 8) {
    fStack_20 = 5.940104e-39;
    tutorial_timeline_update();
  }
  fStack_20 = 1.0;
  (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000);
  if (demo_mode_active == '\0') {
    if (((player_health <= 0.0) && (player_death_timer < 0.0)) &&
       ((_config_player_count == 1 || ((player2_health <= 0.0 && (_player2_death_timer < 0.0)))))) {
      render_pass_mode = 0;
      ui_transition_direction = 0;
      game_state_pending = (-(uint)(_config_game_mode != 3) & 0xfffffffb) + 0xc;
      (**(code **)(*grim_interface_ptr + 0x4c))();
      console_input_poll();
      sfx_mute_all(music_track_extra_0);
      sfx_mute_all(music_track_crimson_theme_id);
      sfx_mute_all(music_track_shortie_monk_id);
      sfx_play_exclusive(music_track_shortie_monk_id);
    }
  }
  else {
    puVar5 = &player_health;
    do {
      *puVar5 = 0x42c80000;
      puVar5 = puVar5 + 0xd8;
    } while ((int)puVar5 < 0x490f94);
  }
  if (_config_game_mode != 2) {
    FUN_00461140();
    lVar6 = __ftol();
    if (1000 - (int)lVar6 < player_experience) {
      perk_pending_count = perk_pending_count + 1;
      config_perk_prompt_counter = config_perk_prompt_counter + 1;
      if (0x32 < config_perk_prompt_counter) {
        config_perk_prompt_counter = 0;
        config_perk_prompt_state = 0;
      }
      sfx_play(sfx_ui_levelup);
      player_level = player_level + 1;
    }
  }
  if ((DAT_0047eec8 == '\0') && (game_paused_flag == '\0')) {
    if (perk_prompt_hover_active == '\0') {
      iVar4 = -frame_dt_ms;
    }
    else {
      iVar4 = frame_dt_ms * 3;
    }
    perk_prompt_pulse = perk_prompt_pulse + iVar4 * 2;
    if (perk_prompt_pulse < 0) {
      perk_prompt_pulse = 0;
    }
    else if (1000 < perk_prompt_pulse) {
      perk_prompt_pulse = 1000;
    }
  }
  if (((((demo_mode_active == '\0') && (game_paused_flag == '\0')) && (mouse_button_down == '\0'))
      && ((_config_game_mode != 2 && (0 < perk_pending_count)))) &&
     ((0.0 < player_health || ((_config_player_count == 2 && (0.0 < player2_health)))))) {
    fVar1 = ui_mouse_x - _perk_prompt_origin_x;
    fVar2 = ui_mouse_y - _perk_prompt_origin_y;
    if (game_state_pending != 6) {
      cVar3 = (**(code **)(*grim_interface_ptr + 0x80))(config_key_pick_perk);
      if (((cVar3 == '\0') &&
          (cVar3 = (**(code **)(*grim_interface_ptr + 0x48))(0x39), cVar3 == '\0')) &&
         (cVar3 = (**(code **)(*grim_interface_ptr + 0x48))(0x4e), cVar3 == '\0')) {
        if (((fVar1 <= perk_prompt_bounds_min_x) || (fVar2 <= perk_prompt_bounds_min_y)) ||
           ((_perk_prompt_bounds_max_x <= fVar1 || (_perk_prompt_bounds_max_y <= fVar2)))) {
          perk_prompt_hover_active = '\0';
        }
        else {
          perk_prompt_hover_active = '\x01';
          iVar4 = input_primary_just_pressed();
          if ((char)iVar4 != '\0') goto joined_r0x0040b1bc;
        }
      }
      else {
        perk_prompt_pulse = 1000;
joined_r0x0040b1bc:
        if (perk_choices_dirty != '\0') {
          perks_generate_choices();
          perk_choices_dirty = '\0';
        }
        game_state_set(6);
      }
    }
  }
  cVar3 = (**(code **)(*grim_interface_ptr + 0x58))(0);
  mouse_button_down = cVar3 != '\0';
  bonus_update();
  frame_dt = fStack_20;
  lVar6 = __ftol();
  frame_dt_ms = (int)lVar6;
  if (((demo_mode_active == '\0') && (perk_prompt_update_and_render(), demo_mode_active == '\0')) &&
     ((iVar4 = game_is_full_version(), (char)iVar4 == '\0' && (_config_game_mode != 8)))) {
    game_sequence_id = game_sequence_get();
    if (game_sequence_id < 0x249f01) {
      if (DAT_0048084c < 1) {
        if (_config_game_mode != 3) goto LAB_0040b2ad;
      }
      else if ((_config_game_mode != 3) || (5.0 < (float)(DAT_0048084c / 1000) * 0.016666668))
      goto LAB_0040b2b2;
      if ((game_state_id != 9) || ((_quest_stage_major < 2 && (_quest_stage_minor < 0xb))))
      goto LAB_0040b2ad;
    }
  }
  else {
LAB_0040b2ad:
    ui_render_aim_indicators();
  }
LAB_0040b2b2:
  hud_update_and_render();
  ui_elements_update_and_render();
  iVar4 = game_is_full_version();
  if ((char)iVar4 == '\0') {
    if (((demo_mode_active == '\0') && (iVar4 = game_is_full_version(), (char)iVar4 == '\0')) &&
       (_config_game_mode != 8)) {
      game_sequence_id = game_sequence_get();
      if (game_sequence_id < 0x249f01) {
        if (DAT_0048084c < 1) {
          if (_config_game_mode != 3) goto LAB_0040b3bd;
        }
        else if ((_config_game_mode != 3) || (5.0 < (float)(DAT_0048084c / 1000) * 0.016666668))
        goto LAB_0040b35f;
        if ((game_state_id != 9) || ((_quest_stage_major < 2 && (_quest_stage_minor < 0xb))))
        goto LAB_0040b3bd;
      }
LAB_0040b35f:
      DAT_00480898 = DAT_00480898 + frame_dt_ms;
      demo_trial_overlay_render((float *)&stack0xffffffe4,1.0);
      DAT_00480850 = 1;
    }
    else {
LAB_0040b3bd:
      DAT_00480898 = DAT_00480898 - frame_dt_ms;
      DAT_00480850 = 0;
    }
    if (DAT_00480898 < 0) {
      DAT_00480898 = 0;
    }
    else if (1000 < DAT_00480898) {
      DAT_00480898 = 1000;
    }
  }
  cVar3 = (**(code **)(*grim_interface_ptr + 0x48))(0x3b);
  if (cVar3 != '\0') {
    game_paused_flag = game_paused_flag == '\0';
  }
  iVar4 = game_is_full_version();
  if (((char)iVar4 == '\0') && (_config_game_mode != 8)) {
    game_sequence_id = game_sequence_get();
    if (game_sequence_id < 0x249f01) {
      if (DAT_0048084c < 1) {
        if (_config_game_mode != 3) goto LAB_0040b4bc;
      }
      else if ((_config_game_mode != 3) ||
              (fStack_20 = (float)(DAT_0048084c / 1000), 5.0 < (float)(int)fStack_20 * 0.016666668))
      goto LAB_0040b494;
      if ((game_state_id != 9) || ((_quest_stage_major < 2 && (_quest_stage_minor < 0xb))))
      goto LAB_0040b4bc;
    }
LAB_0040b494:
    game_paused_flag = '\0';
LAB_0040b49a:
    DAT_00487284 = DAT_00487284 + frame_dt_ms * -4;
  }
  else {
LAB_0040b4bc:
    if (game_paused_flag == '\0') goto LAB_0040b49a;
    DAT_00487284 = DAT_00487284 + frame_dt_ms * 2;
  }
  if (DAT_00487284 < 0) {
    DAT_00487284 = 0;
  }
  else {
    if (DAT_00487284 < 0x3e9) {
      if (DAT_00487284 < 1) goto LAB_0040b52d;
    }
    else {
      DAT_00487284 = 1000;
    }
    fStack_20 = (float)config_screen_width * 0.5 - 256.0;
    ui_render_keybind_help(&fStack_20,(float)DAT_00487284 * 0.001);
  }
LAB_0040b52d:
  iVar4 = game_is_full_version();
  if ((char)iVar4 != '\0') {
    return;
  }
  if (_config_game_mode == 8) {
    return;
  }
  game_sequence_id = game_sequence_get();
  if (game_sequence_id < 0x249f01) {
    if (DAT_0048084c < 1) {
      if (_config_game_mode != 3) {
        return;
      }
    }
    else if ((_config_game_mode != 3) ||
            (fStack_20 = (float)(DAT_0048084c / 1000), 5.0 < (float)(int)fStack_20 * 0.016666668))
    goto LAB_0040b5b4;
    if (game_state_id != 9) {
      return;
    }
    if ((_quest_stage_major < 2) && (_quest_stage_minor < 0xb)) {
      return;
    }
  }
LAB_0040b5b4:
  if (demo_mode_active == '\0') {
    ui_cursor_render();
  }
  return;
}



/* FUN_0040b5d0 @ 0040b5d0 */

void FUN_0040b5d0(void)

{
  undefined4 *puVar1;
  undefined1 *puVar2;
  
  puVar1 = &bonus_pool;
  do {
    *puVar1 = 0;
    puVar1 = puVar1 + 7;
  } while ((int)puVar1 < 0x482b08);
  puVar1 = &creature_health;
  do {
    *(undefined1 *)(puVar1 + -9) = 0;
    *puVar1 = 0xbf800000;
    puVar1 = puVar1 + 0x26;
  } while ((int)puVar1 < 0x4aa35c);
  puVar2 = &projectile_pool;
  do {
    *puVar2 = 0;
    puVar2 = puVar2 + 0x40;
  } while ((int)puVar2 < 0x493eb8);
  puVar1 = &player_health;
  do {
    *(undefined1 *)(puVar1 + -9) = 0;
    *puVar1 = 0xbf800000;
    puVar1 = puVar1 + 0xd8;
  } while ((int)puVar1 < 0x490f94);
  return;
}



/* FUN_0040b630 @ 0040b630 */

void FUN_0040b630(void)

{
  char cVar1;
  
  if (plugin_interface_ptr == (int *)0x0) {
    game_state_pending = 0x14;
    ui_transition_direction = 0;
    ui_elements_update_and_render();
    DAT_00471304 = 1;
    return;
  }
  if ((game_state_id == 0x16) && (DAT_00471304 != '\0')) {
    DAT_00471304 = '\0';
    DAT_004824d1 = '\0';
    sfx_mute_all(music_track_extra_0);
    FUN_0040b5d0();
    (**(code **)*plugin_interface_ptr)();
    *(undefined1 *)((int)plugin_interface_ptr + 9) = 0;
  }
  else {
    cVar1 = (**(code **)(*plugin_interface_ptr + 8))(frame_dt_ms);
    if (cVar1 == '\0') {
      DAT_004824d1 = '\0';
      (**(code **)(*plugin_interface_ptr + 4))();
      sfx_mute_all(music_track_extra_0);
      plugin_interface_ptr = (int *)0x0;
      FreeLibrary(DAT_004824d8);
      DAT_004824d8 = (HMODULE)0x0;
      DAT_00471304 = '\x01';
      game_state_pending = 0x14;
      ui_transition_direction = '\0';
    }
    else {
      DAT_004824d1 = '\x01';
    }
  }
  ui_elements_update_and_render();
  if (((ui_transition_direction == '\0') && (game_state_id == 0x16)) ||
     ((plugin_interface_ptr != (int *)0x0 &&
      ((DAT_004824d1 != '\0' && ((char)plugin_interface_ptr[2] != '\0')))))) {
    ui_cursor_render();
  }
  return;
}



/* demo_purchase_screen_update @ 0040b740 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* demo upsell screen: feature list, purchase link, and exit handling */

void demo_purchase_screen_update(void)

{
  char cVar1;
  int iVar2;
  int iVar3;
  char *pcVar4;
  longlong lVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  undefined1 auStack_114 [4];
  float fStack_110;
  float fStack_10c;
  undefined4 uStack_108;
  int iStack_104;
  undefined4 uStack_100;
  float fStack_fc;
  char *pcStack_f8;
  char *pcStack_f4;
  undefined4 uStack_f0;
  undefined4 uStack_ec;
  undefined4 uStack_e8;
  undefined4 uStack_e4;
  undefined4 uStack_e0;
  undefined4 uStack_dc;
  float fStack_d8;
  float fStack_d4;
  undefined4 uStack_d0;
  char *pcStack_cc;
  undefined4 uStack_c8;
  undefined4 uStack_c4;
  undefined4 uStack_c0;
  undefined4 uStack_bc;
  undefined4 uStack_b8;
  undefined4 uStack_b4;
  undefined4 uStack_b0;
  undefined4 uStack_ac;
  undefined4 uStack_a8;
  undefined4 uStack_a4;
  undefined4 uStack_a0;
  undefined4 uStack_9c;
  undefined1 *puStack_98;
  char *pcStack_94;
  float fStack_90;
  float fStack_8c;
  undefined4 uStack_88;
  undefined1 *puStack_84;
  undefined1 *puStack_80;
  undefined4 uStack_7c;
  float fVar9;
  undefined1 *puVar10;
  undefined1 *puVar11;
  undefined4 uStack_58;
  char *pcVar12;
  
  if ((ui_transition_direction != '\0') && (iVar2 = game_is_full_version(), (char)iVar2 != '\0')) {
    ui_transition_direction = 0;
    game_state_pending = 0;
    demo_mode_active = 1;
    config_load_presets();
    sfx_mute_all(music_track_intro_id);
    sfx_mute_all(music_track_shortie_monk_id);
    sfx_play_exclusive(music_track_crimson_theme_id);
    ui_elements_update_and_render();
    ui_cursor_render();
    return;
  }
  if ((DAT_00480890 == '\0') &&
     (((iVar2 = input_primary_just_pressed(), (char)iVar2 != '\0' ||
       (cVar1 = (**(code **)(*grim_interface_ptr + 0x48))(), cVar1 != '\0')) ||
      (cVar1 = (**(code **)(*grim_interface_ptr + 0x48))(), cVar1 != '\0')))) {
    DAT_00480890 = '\x01';
    DAT_004712f0 = 16000;
  }
  if ((DAT_00480320 & 1) == 0) {
    DAT_00480320 = DAT_00480320 | 1;
    DAT_004802b6 = 1;
    DAT_004802c5 = 0;
    DAT_004802c4 = 0;
    _DAT_004802c0 = 0x3f800000;
    _DAT_004802bc = 0;
    _DAT_004802b0 = (char *)0x0;
    DAT_004802b4 = 0;
    DAT_004802b5 = 0;
    _DAT_004802b8 = 0;
    crt_atexit(&DAT_0040c1b0);
  }
  _DAT_004802b0 = s_Maybe_later_00471b78;
  if ((DAT_00480320 & 2) == 0) {
    DAT_00480320 = DAT_00480320 | 2;
    DAT_0047f67e = 1;
    DAT_0047f68d = 0;
    DAT_0047f68c = 0;
    _DAT_0047f688 = 0x3f800000;
    _DAT_0047f684 = 0;
    _DAT_0047f678 = (char *)0x0;
    DAT_0047f67c = 0;
    DAT_0047f67d = 0;
    _DAT_0047f680 = 0;
    crt_atexit(&DAT_0040c1a0);
  }
  _DAT_0047f678 = s_Purchase_00471b6c;
  (**(code **)(*grim_interface_ptr + 0x114))();
  (**(code **)(*grim_interface_ptr + 0x20))();
  pcVar12 = &DAT_0047f4d8;
  if (DAT_00480890 == '\0') {
    if (quest_spawn_timeline == 0) {
      DAT_004808bc = (DAT_004808bc + 1) % 5;
    }
    if (DAT_004808bc == 0) {
      pcVar12 = s_Want_more_Levels__00472780;
    }
    else if (DAT_004808bc == 1) {
      pcVar12 = s_Want_more_Weapons__0047276c;
    }
    else if (DAT_004808bc == 2) {
      pcVar12 = s_Want_more_Perks__00472758;
    }
    else if (DAT_004808bc == 3) {
      pcVar12 = s_Want_unlimited_Play_time__0047273c;
    }
    else if (DAT_004808bc == 4) {
      pcVar12 = s_Want_to_post_your_high_scores__0047271c;
    }
  }
  else {
    ui_pulse_timer_ms = ui_pulse_timer_ms + frame_dt_ms;
    fVar9 = 0.0;
    fsin((float10)(ui_pulse_timer_ms % 1000) * (float10)6.2831855);
    (**(code **)(*grim_interface_ptr + 0x118))();
    uStack_7c = 0x3e99999a;
    puStack_80 = (undefined1 *)0x0;
    puStack_84 = (undefined1 *)0x0;
    uStack_88 = 1;
    fStack_8c = 5.944153e-39;
    (**(code **)(*grim_interface_ptr + 0x118))();
    fStack_8c = fVar9;
    fStack_90 = fStack_8c * 0.55;
    pcStack_94 = (char *)0x3ecccccd;
    puStack_98 = (undefined1 *)0x0;
    uStack_9c = 2;
    uStack_a0 = 0x40ba0a;
    (**(code **)(*grim_interface_ptr + 0x118))();
    uStack_a0 = 0x3f800000;
    uStack_a4 = 0x3ecccccd;
    uStack_a8 = 0x3ecccccd;
    uStack_ac = 0;
    uStack_b0 = 3;
    uStack_b4 = 0x40ba2a;
    (**(code **)(*grim_interface_ptr + 0x118))();
    uStack_b4 = 0;
    uStack_b8 = 0x40ba39;
    (**(code **)(*grim_interface_ptr + 0xfc))();
    uStack_b8 = 0x3f000000;
    uStack_bc = 0x3f000000;
    uStack_c0 = 0;
    uStack_c4 = 0;
    uStack_c8 = 0x40ba53;
    (**(code **)(*grim_interface_ptr + 0x100))();
    uStack_c8 = 0;
    pcStack_cc = s_backplasma_0047296c;
    iVar2 = *grim_interface_ptr;
    uStack_d0 = 0x40ba67;
    uStack_d0 = (**(code **)(iVar2 + 0xc0))();
    fStack_d4 = 5.944359e-39;
    (**(code **)(iVar2 + 0xc4))();
    fStack_d4 = (float)config_screen_height;
    fStack_d8 = (float)config_screen_width;
    uStack_dc = 0;
    uStack_e0 = 0;
    uStack_e4 = 0x40ba98;
    (**(code **)(*grim_interface_ptr + 0x11c))();
    uStack_e4 = 0x40baa6;
    (**(code **)(*grim_interface_ptr + 0xf0))();
    uStack_e4 = 0x3f800000;
    uStack_e8 = 0x3f800000;
    uStack_ec = 0x3f800000;
    uStack_f0 = 0x3f800000;
    pcStack_f4 = (char *)0x40bac8;
    (**(code **)(*grim_interface_ptr + 0x114))();
    uStack_dc = 0;
    if (config_screen_width == 800) {
      uStack_dc = 0x42800000;
    }
    else if (config_screen_width == 0x400) {
      uStack_dc = 0x43000000;
    }
    pcStack_f4 = s_mockup_00472964;
    pcStack_f8 = (char *)0x40bb08;
    pcStack_f8 = (char *)(**(code **)(*grim_interface_ptr + 0xc0))();
    fStack_fc = 3.58732e-43;
    iStack_104 = config_screen_height / 2 + -0x8c;
    uStack_100 = 0x200;
    fStack_d4 = (float)(config_screen_width / 2 + -0x80);
    uStack_108 = 0x40bb43;
    lVar5 = __ftol();
    uStack_108 = (undefined4)lVar5;
    fStack_10c = 5.944657e-39;
    FUN_00417ae0();
    pcStack_f8 = s_cl_logo_00471f70;
    fStack_fc = 5.944688e-39;
    fStack_fc = (float)(**(code **)(*grim_interface_ptr + 0xc0))();
    uStack_100 = 0x40;
    fStack_d8 = (float)(config_screen_height / 2 + -200);
    iStack_104 = 0x200;
    uStack_108 = 0x40bb8f;
    lVar5 = __ftol();
    uStack_108 = (undefined4)lVar5;
    fStack_10c = (float)(config_screen_width / 2 + -0x100);
    fStack_110 = 5.944786e-39;
    FUN_00417ae0();
    fStack_fc = 1.0;
    uStack_100 = 0x3f800000;
    iStack_104 = 0x3f800000;
    uStack_108 = 0x3f800000;
    fStack_10c = 5.944838e-39;
    (**(code **)(*grim_interface_ptr + 0x114))();
    fVar8 = 0.6;
    (**(code **)(*grim_interface_ptr + 0x20))(0x18,0x3f19999a);
    fStack_10c = (float)(config_screen_height / 2 + -0x68);
    fStack_fc = (float)(config_screen_width / 2 + -0x128);
    lVar5 = __ftol();
    fVar9 = (float)(int)lVar5;
    fVar7 = fStack_10c;
    fStack_fc = fVar9;
    (**(code **)(*grim_interface_ptr + 0x144))
              (fVar9,fStack_10c,s_Upgrade_to_the_full_version_of_C_00472930);
    fVar6 = fVar9;
    (**(code **)(*grim_interface_ptr + 0x144))(fVar9,fVar8 + 28.0,s_Full_version_features__00472918)
    ;
    fStack_10c = fVar7 + 15.0;
    iVar2 = *grim_interface_ptr;
    fStack_110 = fVar9;
    iVar3 = (**(code **)(iVar2 + 0x14c))(s_Full_version_features__00472918,0x3f800000);
    (**(code **)(iVar2 + 0xd4))(auStack_114);
    fVar6 = fVar6 + 22.0;
    fVar7 = (float)((int)lVar5 + 8);
    (**(code **)(*grim_interface_ptr + 0x144))
              (fVar7,fVar6,s__Unlimited_Play_Time_in_three_th_004728e4);
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,fVar7,(float)iVar3 + 22.0,
               s__The_varied_weapon_arsenal_consi_004728ac);
    fVar8 = (float)iVar3 + 22.0 + 17.0;
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,fVar7,fVar8,s_weapons_that_allow_you_to_deal_d_00472870);
    fVar8 = fVar8 + 17.0;
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,fVar7,fVar8,s_fire_and_electricity__00472858);
    fVar8 = fVar8 + 22.0;
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,fVar7,fVar8,s__Over_40_game_altering_Perks__00472838);
    fVar8 = fVar8 + 22.0;
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,fVar7,fVar8,s__40_insane_Levels_that_give_you_00472818);
    fVar8 = fVar8 + 18.0;
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,fVar7,fVar8,s_hours_of_intense_and_fun_gamepla_004727f4);
    (**(code **)(*grim_interface_ptr + 0x144))
              (fVar7,fVar8 + 22.0,s__The_ability_to_post_your_high_s_004727c4);
    (**(code **)(*grim_interface_ptr + 0x144))
              (fVar9,fVar6 + 22.0 + 22.0,s_Purchasing_the_game_is_very_easy_00472794);
    iVar2 = ui_button_update((float *)&stack0xffffffc4,(int *)&DAT_0047f678);
    if ((char)iVar2 != '\0') {
      DAT_00480851 = 1;
      DAT_0047ea50 = 1;
      uStack_7c = 0x40bee7;
      ShellExecuteA((HWND)0x0,&DAT_00471b38,s_http___buy_crimsonland_com_00471b40,(LPCSTR)0x0,
                    (LPCSTR)0x0,1);
      return;
    }
    iVar2 = ui_button_update((float *)&stack0xffffffc4,(int *)&DAT_004802b0);
    if ((char)iVar2 != '\0') {
      if (DAT_00480851 != '\0') {
        DAT_0047ea50 = 1;
      }
      ui_transition_direction = 0;
      game_state_pending = 0;
      demo_mode_active = 1;
      if (DAT_00480851 != '\0') {
        demo_mode_active = 1;
        ui_transition_direction = 0;
        game_state_pending = 0;
        return;
      }
      config_load_presets();
      sfx_mute_all(music_track_intro_id);
      sfx_mute_all(music_track_crimsonquest_id);
      sfx_play_exclusive(music_track_crimson_theme_id);
      return;
    }
    quest_spawn_timeline = quest_spawn_timeline + frame_dt_ms;
    if (DAT_004712f0 < quest_spawn_timeline) {
      render_pass_mode = 0;
      demo_mode_start();
    }
    if (DAT_00480890 != '\0') goto LAB_0040c103;
  }
  iVar2 = -1;
  pcVar4 = pcVar12;
  do {
    if (iVar2 == 0) break;
    iVar2 = iVar2 + -1;
    cVar1 = *pcVar4;
    pcVar4 = pcVar4 + 1;
  } while (cVar1 != '\0');
  puVar11 = &stack0xffffffcc;
  puVar10 = &stack0xffffffc4;
  (**(code **)(*grim_interface_ptr + 0xd0))();
  uStack_7c = uStack_58;
  puStack_80 = &stack0xffffffb4;
  puStack_84 = (undefined1 *)0x40c0c8;
  (**(code **)(*grim_interface_ptr + 0xd0))();
  puStack_84 = puVar11;
  uStack_88 = 0x3f800000;
  fStack_8c = 1.0;
  fStack_90 = 1.0;
  pcStack_94 = (char *)0x40c0ea;
  (**(code **)(*grim_interface_ptr + 0x114))();
  puStack_98 = puVar10;
  uStack_9c = 0x42480000;
  uStack_a0 = 0x40c103;
  pcStack_94 = pcVar12;
  (**(code **)(*grim_interface_ptr + 0x13c))();
LAB_0040c103:
  ui_elements_update_and_render();
  ui_cursor_render();
  return;
}



/* FUN_0040d000 @ 0040d000 */

void __cdecl FUN_0040d000(int param_1,uint *param_2,undefined4 param_3)

{
  char *pcVar1;
  
  (&DAT_00480984)[param_1 * 2] = param_3;
  if ((void *)(&DAT_00480980)[param_1 * 2] != (void *)0x0) {
    crt_free((void *)(&DAT_00480980)[param_1 * 2]);
  }
  pcVar1 = strdup_malloc((char *)param_2);
  (&DAT_00480980)[param_1 * 2] = pcVar1;
  DAT_004811b8 = param_1;
  return;
}



/* FUN_0040d040 @ 0040d040 */

void __cdecl FUN_0040d040(int param_1)

{
  byte *pbVar1;
  
  if (-1 < param_1) {
    pbVar1 = (byte *)(&DAT_00480984 + param_1 * 2);
    while ((*pbVar1 & 4) == 0) {
      param_1 = param_1 + -1;
      pbVar1 = pbVar1 + -8;
      if (param_1 < 0) {
        return;
      }
    }
    (&DAT_00480984)[param_1 * 2] = (&DAT_00480984)[param_1 * 2] & 0xfffffffb;
    sfx_play(sfx_trooper_inpain_01);
  }
  return;
}



/* FUN_0040d090 @ 0040d090 */

void FUN_0040d090(void)

{
  FUN_0040d000(0,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(1,(uint *)s_Crimsonland_00472d5c,1);
  FUN_0040d000(2,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(3,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(4,(uint *)s_Game_Design__00472d4c,1);
  FUN_0040d000(5,(uint *)s_Tero_Alatalo_00472d3c,0);
  FUN_0040d000(6,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(7,(uint *)s_Programming__00472d2c,1);
  FUN_0040d000(8,(uint *)s_Tero_Alatalo_00472d3c,0);
  FUN_0040d000(9,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(10,(uint *)s_Producer__00472d20,1);
  FUN_0040d000(0xb,(uint *)s_Zach_Young_00472d14,0);
  FUN_0040d000(0xc,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0xd,(uint *)s_2D_Art__00472d0c,1);
  FUN_0040d000(0xe,(uint *)s_Tero_Alatalo_00472d3c,0);
  FUN_0040d000(0xf,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x10,(uint *)s_3D_Modelling__00472cfc,1);
  FUN_0040d000(0x11,(uint *)s_Tero_Alatalo_00472d3c,0);
  FUN_0040d000(0x12,(uint *)s_Timo_Palonen_00472cec,0);
  FUN_0040d000(0x13,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x14,(uint *)s_Music__00472ce4,1);
  FUN_0040d000(0x15,(uint *)&DAT_00472ccc,0);
  FUN_0040d000(0x16,(uint *)s_Ville_Eriksson_00472cbc,0);
  FUN_0040d000(0x17,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x18,(uint *)s_Sound_Effects__00472cac,1);
  FUN_0040d000(0x19,(uint *)s_Ion_Hardie_00472ca0,0);
  FUN_0040d000(0x1a,(uint *)s_Tero_Alatalo_00472d3c,0);
  FUN_0040d000(0x1b,(uint *)&DAT_00472ccc,0);
  FUN_0040d000(0x1c,(uint *)s_Ville_Eriksson_00472cbc,0);
  FUN_0040d000(0x1d,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x1e,(uint *)s_Manual__00472c98,1);
  FUN_0040d000(0x1f,(uint *)s_Miikka_Kulmala_00472c88,0);
  FUN_0040d000(0x20,(uint *)s_Zach_Young_00472d14,0);
  FUN_0040d000(0x21,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x22,(uint *)s_Special_thanks_to__00472c74,1);
  FUN_0040d000(0x23,(uint *)&DAT_00472c58,0);
  FUN_0040d000(0x24,(uint *)s_Peter_Hajba___Remedy_00472c40,0);
  FUN_0040d000(0x25,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x26,(uint *)s_Play_testers__00472c30,1);
  FUN_0040d000(0x27,(uint *)s_Avraham_Petrosyan_00472c1c,0);
  FUN_0040d000(0x28,(uint *)s_Bryce_Baker_00472c10,0);
  FUN_0040d000(0x29,(uint *)s_Dan_Ruskin_00472c04,0);
  FUN_0040d000(0x2a,(uint *)s_Dirk_Bunk_00472bf8,0);
  FUN_0040d000(0x2b,(uint *)s_Eric_Dallaire_00472be8,0);
  FUN_0040d000(0x2c,(uint *)s_Erik_Van_Pelt_00472bd8,0);
  FUN_0040d000(0x2d,(uint *)s_Ernie_Ramirez_00472bc8,0);
  FUN_0040d000(0x2e,(uint *)s_Ion_Hardie_00472ca0,0);
  FUN_0040d000(0x2f,(uint *)s_James_C__Smith_00472bb8,0);
  FUN_0040d000(0x30,(uint *)s_Jarkko_Forsbacka_00472ba4,0);
  FUN_0040d000(0x31,(uint *)s_Jeff_McAteer_00472b94,0);
  FUN_0040d000(0x32,(uint *)s_Juha_Alatalo_00472b84,0);
  FUN_0040d000(0x33,(uint *)s_Kalle_Hahl_00472b78,0);
  FUN_0040d000(0x34,(uint *)s_Lars_Brubaker_00472b68,0);
  FUN_0040d000(0x35,(uint *)s_Lee_Cooper_00472b5c,0);
  FUN_0040d000(0x36,(uint *)s_Markus_Lassila_00472b4c,0);
  FUN_0040d000(0x37,(uint *)s_Matti_Alanen_00472b3c,0);
  FUN_0040d000(0x38,(uint *)s_Miikka_Kulmala_00472c88,0);
  FUN_0040d000(0x39,(uint *)s_Mika_Alatalo_00472b2c,0);
  FUN_0040d000(0x3a,(uint *)s_Mike_Colonnese_00472b1c,0);
  FUN_0040d000(0x3b,(uint *)s_Simon_Hallam_00472b0c,0);
  FUN_0040d000(0x3c,(uint *)s_Toni_Nurminen_00472afc,0);
  FUN_0040d000(0x3d,(uint *)&DAT_00472ccc,0);
  FUN_0040d000(0x3e,(uint *)s_Ville_Eriksson_00472cbc,0);
  FUN_0040d000(0x3f,(uint *)&DAT_00472aec,0);
  FUN_0040d000(0x40,(uint *)s_Zach_Young_00472d14,0);
  FUN_0040d000(0x41,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x42,(uint *)s_Greeting_to__00472adc,0);
  FUN_0040d000(0x42,(uint *)s_Chaos__00472ad4,0);
  FUN_0040d000(0x42,(uint *)s_Matricks_00472ac8,0);
  FUN_0040d000(0x42,(uint *)s_Muzzy_00472ac0,0);
  FUN_0040d000(0x42,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x43,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x44,(uint *)s_2003__c__10tons_entertainment_00472aa0,0);
  FUN_0040d000(0x45,(uint *)s_10tons_logo_by_00472a90,0);
  FUN_0040d000(0x46,(uint *)s_Pasi_Heinonen_00472a80,0);
  FUN_0040d000(0x47,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x48,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x49,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x4a,(uint *)s_Uses_Vorbis_Audio_Decompression_00472a60,0);
  FUN_0040d000(0x4b,(uint *)s_2003__c__Xiph_Org_Foundation_00472a40,0);
  FUN_0040d000(0x4c,(uint *)s__see_vorbis_txt__00472a2c,0);
  FUN_0040d000(0x4d,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x4e,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x4f,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x50,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x51,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x52,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x53,(uint *)&DAT_0047f4d8,0);
  DAT_004811bc = 0x54;
  FUN_0040d000(0x54,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x55,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x56,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x57,(uint *)s_You_can_stop_watching_now__00472a10,0);
  FUN_0040d000(0x58,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x59,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x5a,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x5b,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x5c,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x5d,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x5e,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x5f,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x60,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x61,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x62,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(99,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(100,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x65,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x66,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x67,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x68,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x69,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x6a,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x6b,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x6c,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x6d,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x6e,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x6f,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x70,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x71,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x72,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x73,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x74,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x75,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x76,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x77,(uint *)s_Click_the_ones_with_the_round_on_004729ec,0);
  FUN_0040d000(0x78,(uint *)(s____and_be_patient___004729d6 + 2),0);
  FUN_0040d000(0x79,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x7a,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x7b,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x7c,(uint *)&DAT_0047f4d8,0);
  FUN_0040d000(0x7d,(uint *)&DAT_0047f4d8,0);
  return;
}



/* FUN_0040e000 @ 0040e000 */

void __cdecl FUN_0040e000(byte *param_1)

{
  char local_ffc [4092];
  
  crt_vsprintf(local_ffc,(char *)param_1,&stack0x00000008);
  OutputDebugStringA(local_ffc);
  return;
}



/* FUN_0040e040 @ 0040e040 */

undefined4 * FUN_0040e040(uint *param_1)

{
  undefined4 *puVar1;
  char *unaff_ESI;
  
  puVar1 = console_cvar_find(&console_log_queue,param_1,unaff_ESI);
  if (puVar1 == (undefined4 *)0x0) {
    puVar1 = console_register_cvar(&console_log_queue,param_1,&DAT_0047125c,unaff_ESI);
  }
  puVar1[8] = puVar1 + 3;
  puVar1[6] = *puVar1;
  puVar1[7] = puVar1[4];
  return puVar1 + 6;
}



/* FUN_0040e570 @ 0040e570 */

float10 FUN_0040e570(float param_1)

{
  float fVar1;
  
  fVar1 = sfx_play_panned(param_1);
  return (float10)fVar1;
}



/* FUN_0040e690 @ 0040e690 */

void FUN_0040e690(byte *param_1)

{
  byte bVar1;
  char *pcVar2;
  int iVar3;
  bool bVar4;
  
  if (param_1 != (byte *)0x0) {
    pcVar2 = s_game_pause_00472f60;
    do {
      bVar1 = *pcVar2;
      bVar4 = bVar1 < *param_1;
      if (bVar1 != *param_1) {
LAB_0040e6c7:
        iVar3 = (1 - (uint)bVar4) - (uint)(bVar4 != 0);
        goto LAB_0040e6cc;
      }
      if (bVar1 == 0) break;
      bVar1 = ((byte *)pcVar2)[1];
      bVar4 = bVar1 < param_1[1];
      if (bVar1 != param_1[1]) goto LAB_0040e6c7;
      pcVar2 = (char *)((byte *)pcVar2 + 2);
      param_1 = param_1 + 2;
    } while (bVar1 != 0);
    iVar3 = 0;
LAB_0040e6cc:
    if (iVar3 == 0) {
      if (plugin_interface_ptr != 0) {
        *(undefined1 *)(plugin_interface_ptr + 9) = 1;
      }
      ui_transition_direction = 0;
      game_state_pending = 5;
    }
  }
  return;
}



/* FUN_0040e700 @ 0040e700 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

undefined4 * FUN_0040e700(void)

{
  FARPROC pFVar1;
  undefined4 *puVar2;
  int iVar3;
  undefined4 *puVar4;
  char local_200 [512];
  
  crt_sprintf(local_200,s_mods__s_00472f58);
  console_printf(&console_log_queue,(byte *)s_CMOD____s__00472fec);
  DAT_004824d8 = LoadLibraryA(local_200);
  if (DAT_004824d8 == (HMODULE)0x0) {
    console_printf(&console_log_queue,(byte *)s_CMOD__Load_library_failed__00472fd0);
    return (undefined4 *)0x0;
  }
  pFVar1 = GetProcAddress(DAT_004824d8,s_CMOD_GetInfo_00472fc0);
  if (pFVar1 != (FARPROC)0x0) {
    if ((DAT_004819c8 & 1) == 0) {
      DAT_004819c8 = DAT_004819c8 | 1;
      _DAT_00481cc8 = 0x3f800000;
      _DAT_00481ccc = 3;
      puVar2 = &DAT_00481c88;
      for (iVar3 = 8; iVar3 != 0; iVar3 = iVar3 + -1) {
        *puVar2 = 0;
        puVar2 = puVar2 + 1;
      }
      puVar2 = &DAT_00481ca8;
      for (iVar3 = 8; iVar3 != 0; iVar3 = iVar3 + -1) {
        *puVar2 = 0;
        puVar2 = puVar2 + 1;
      }
      crt_atexit(&DAT_0040e850);
    }
    puVar2 = (undefined4 *)(*pFVar1)();
    if (puVar2 == (undefined4 *)0x0) {
      console_printf(&console_log_queue,(byte *)s_CMOD__bad_CMOD_GetInfo_function_00472f84);
    }
    else {
      puVar4 = &DAT_00481c88;
      for (iVar3 = 0x12; iVar3 != 0; iVar3 = iVar3 + -1) {
        *puVar4 = *puVar2;
        puVar2 = puVar2 + 1;
        puVar4 = puVar4 + 1;
      }
    }
    FreeLibrary(DAT_004824d8);
    console_printf(&console_log_queue,(byte *)s_CMOD__mod_enum___s__00472f6c);
    return &DAT_00481c88;
  }
  console_printf(&console_log_queue,(byte *)s_CMOD_GetInfo_failed__00472fa8);
  FreeLibrary(DAT_004824d8);
  return (undefined4 *)0x0;
}



/* FUN_0040e860 @ 0040e860 */

int FUN_0040e860(void)

{
  FARPROC pFVar1;
  int iVar2;
  char local_200 [512];
  
  crt_sprintf(local_200,s_mods__s_00472f58);
  console_printf(&console_log_queue,(byte *)s_CMOD____s__00472fec);
  DAT_004824d8 = LoadLibraryA(local_200);
  if (DAT_004824d8 == (HMODULE)0x0) {
    console_printf(&console_log_queue,(byte *)s_CMOD__Load_library_failed__00472fd0);
    return 0;
  }
  pFVar1 = GetProcAddress(DAT_004824d8,s_CMOD_GetMod_00473044);
  if (pFVar1 == (FARPROC)0x0) {
    console_printf(&console_log_queue,(byte *)s_CMOD__CMOD_GetMod_failed__00473028);
    FreeLibrary(DAT_004824d8);
    return 0;
  }
  iVar2 = (*pFVar1)();
  if (iVar2 == 0) {
    console_printf(&console_log_queue,(byte *)s_CMOD__bad_CMOD_GetMod_function_00473008);
  }
  else {
    *(undefined **)(iVar2 + 4) = &DAT_00481a80;
  }
  console_printf(&console_log_queue,(byte *)s_CMOD_GetMod_ok_00472ff8);
  return iVar2;
}



/* FUN_0040e940 @ 0040e940 */

bool FUN_0040e940(void)

{
  HANDLE pvVar1;
  int iVar2;
  int iVar3;
  uint local_118 [70];
  
  iVar3 = 0;
  pvVar1 = FUN_00461768(s_mods___dll_00473050,local_118);
  if ((pvVar1 != (HANDLE)0xffffffff) && (&stack0x00000000 != (undefined1 *)0x104)) {
    do {
      iVar3 = iVar3 + 1;
      iVar2 = FUN_00461835(pvVar1,local_118);
    } while (iVar2 == 0);
  }
  FUN_004618fd(pvVar1);
  return iVar3 != 0;
}



/* FUN_0040f400 @ 0040f400 */

uint __cdecl FUN_0040f400(int *param_1,int *param_2,undefined1 *param_3)

{
  int iVar1;
  int *piVar2;
  int iVar3;
  int iVar4;
  int *piVar5;
  int iVar6;
  int local_4;
  
  local_4 = 0;
  iVar4 = 2;
  piVar2 = param_1;
  do {
    iVar3 = 0;
    piVar5 = piVar2;
    do {
      iVar1 = *piVar5;
      if (-1 < iVar1) {
        iVar6 = 1;
        if (param_1[iVar4 + iVar3 + -1] == iVar1) {
          iVar6 = 2;
        }
        if (param_1[iVar4 + iVar3] == iVar1) {
          iVar6 = iVar6 + 1;
        }
        if (iVar6 == 3) {
          *param_2 = iVar3 + local_4 * 6;
          *param_3 = 1;
          return CONCAT31((int3)((uint)param_3 >> 8),1);
        }
      }
      iVar3 = iVar3 + 1;
      piVar5 = piVar5 + 1;
    } while (iVar3 < 4);
    iVar4 = iVar4 + 6;
    local_4 = local_4 + 1;
    piVar2 = piVar2 + 6;
    if (0x25 < iVar4) {
      iVar4 = 0;
      do {
        iVar3 = 0;
        piVar2 = param_1;
        do {
          iVar1 = *piVar2;
          if (-1 < iVar1) {
            iVar6 = 1;
            if (piVar2[6] == iVar1) {
              iVar6 = 2;
            }
            if (piVar2[0xc] == iVar1) {
              iVar6 = iVar6 + 1;
            }
            if (iVar6 == 3) {
              *param_2 = iVar4 + iVar3 * 6;
              *param_3 = 0;
              return CONCAT31((int3)((uint)param_2 >> 8),1);
            }
          }
          iVar3 = iVar3 + 1;
          piVar2 = piVar2 + 6;
        } while (iVar3 < 4);
        iVar4 = iVar4 + 1;
        param_1 = param_1 + 1;
        if (5 < iVar4) {
          return (uint)piVar2 & 0xffffff00;
        }
      } while( true );
    }
  } while( true );
}



/* FUN_0040ff50 @ 0040ff50 */

undefined * __cdecl FUN_0040ff50(int param_1)

{
  int iVar1;
  
  iVar1 = param_1 % 0x3c;
  if (iVar1 < 10) {
    crt_sprintf(&DAT_00482624,s__d_0_d_00473150,param_1 / 0x3c,iVar1);
    return &DAT_00482624;
  }
  crt_sprintf(&DAT_00482624,s__d__d_00473148,param_1 / 0x3c,iVar1);
  return &DAT_00482624;
}



/* FUN_0040ffc0 @ 0040ffc0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_0040ffc0(void)

{
  char cVar1;
  float fVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  float unaff_EBX;
  char *pcVar7;
  undefined4 *puVar8;
  char *pcVar9;
  float local_18;
  float local_14;
  float local_10;
  float local_c;
  float local_8;
  float local_4;
  
  if ((DAT_004825fc & 1) == 0) {
    DAT_004825fc = DAT_004825fc | 1;
    DAT_004825ae = 1;
    DAT_004825bd = 0;
    DAT_004825bc = 0;
    _DAT_004825b8 = 0x3f800000;
    _DAT_004825b4 = 0;
    _DAT_004825a8 = (undefined *)0x0;
    DAT_004825ac = 0;
    DAT_004825ad = '\0';
    _DAT_004825b0 = 0;
    crt_atexit(&DAT_004107d0);
  }
  if ((DAT_004825fc & 2) == 0) {
    DAT_004825fc = DAT_004825fc | 2;
    _DAT_004825a0 = 0x3f800000;
    _DAT_00482590 = &DAT_0048256c;
    DAT_00482594 = 0;
    _DAT_00482598 = 0x18;
    _DAT_0048259c = 0x60;
    crt_atexit(&DAT_004107c0);
  }
  _bonus_reflex_boost_timer = 0;
  if ((ui_transition_direction != '\0') && (DAT_0048724d != '\0')) {
    DAT_0048724d = '\0';
    DAT_00487234 = 1;
  }
  if ((((game_state_id == 7) && (game_state_pending == 0x19)) && (ui_transition_direction != '\0'))
     && (iVar3 = sfx_is_unmuted(music_track_shortie_monk_id), (char)iVar3 == '\0')) {
    sfx_play_exclusive(music_track_shortie_monk_id);
  }
  gameplay_render_world();
  ui_elements_update_and_render();
  perk_prompt_update_and_render();
  local_4 = _DAT_0048cc64 + DAT_0048cc88;
  local_10 = DAT_0048cc84 + _DAT_0048cc60 + 180.0;
  fVar2 = local_4 + 40.0;
  local_18 = (_DAT_0048cc50 + local_10 + 44.0) - 10.0;
  local_14 = fVar2;
  local_c = fVar2;
  local_8 = local_18;
  __ftol();
  __ftol();
  FUN_00417ae0();
  if (DAT_00487234 == -1) {
    thunk_FUN_0043afa0();
    DAT_004825a4 = FUN_0043b520();
    highscore_record_game_mode = config_game_mode;
    (**(code **)(*grim_interface_ptr + 0x4c))();
    console_input_poll();
    (**(code **)(*grim_interface_ptr + 0x48))(0x1c);
    if (DAT_004825a4 < 100) {
      uVar4 = 0xffffffff;
      DAT_00487234 = 0;
      pcVar7 = (char *)&highscore_active_record;
      do {
        pcVar9 = pcVar7;
        if (uVar4 == 0) break;
        uVar4 = uVar4 - 1;
        pcVar9 = pcVar7 + 1;
        cVar1 = *pcVar7;
        pcVar7 = pcVar9;
      } while (cVar1 != '\0');
      uVar4 = ~uVar4;
      _DAT_00482598 = 0x14;
      _DAT_00482590 = &DAT_0048256c;
      pcVar7 = pcVar9 + -uVar4;
      pcVar9 = (char *)&DAT_0048256c;
      for (uVar5 = uVar4 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
        *(undefined4 *)pcVar9 = *(undefined4 *)pcVar7;
        pcVar7 = pcVar7 + 4;
        pcVar9 = pcVar9 + 4;
      }
      for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
        *pcVar9 = *pcVar7;
        pcVar7 = pcVar7 + 1;
        pcVar9 = pcVar9 + 1;
      }
      uVar4 = 0xffffffff;
      pcVar7 = (char *)&highscore_active_record;
      do {
        if (uVar4 == 0) break;
        uVar4 = uVar4 - 1;
        cVar1 = *pcVar7;
        pcVar7 = pcVar7 + 1;
      } while (cVar1 != '\0');
      DAT_00482594 = ~uVar4 - 1;
LAB_00410232:
      local_18 = local_18 + 8.0;
      DAT_00496604 = 0x3f800000;
      local_14 = local_14 + 84.0;
      (**(code **)(*grim_interface_ptr + 0x110))(&DAT_004965f8);
      (**(code **)(*grim_interface_ptr + 0x148))
                (grim_interface_ptr,unaff_EBX + 42.0,local_18,s_State_your_name__trooper__00473190);
      local_18 = local_18 + 40.0;
      DAT_00496604 = 0x3f333333;
      _DAT_004825a8 = &DAT_0047318c;
      local_14 = unaff_EBX + 170.0;
      local_10 = local_18 - 8.0;
      ui_button_update(&local_14,(int *)&DAT_004825a8);
      _DAT_0048259c = 0xa6;
      iVar3 = ui_text_input_update((float *)&stack0xffffffe4,(int *)&DAT_00482590);
      if (((char)iVar3 != '\0') || (DAT_004825ad != '\0')) {
        uVar4 = 0xffffffff;
        iVar3 = 0;
        pcVar7 = (char *)&DAT_0048256c;
        do {
          if (uVar4 == 0) break;
          uVar4 = uVar4 - 1;
          cVar1 = *pcVar7;
          pcVar7 = pcVar7 + 1;
        } while (cVar1 != '\0');
        iVar6 = ~uVar4 - 1;
        if (0 < iVar6) {
          if (0 < iVar6) {
            do {
              if (*(char *)((int)&DAT_0048256c + iVar3) != ' ') break;
              iVar3 = iVar3 + 1;
            } while (iVar3 < iVar6);
          }
          if (*(char *)((int)&DAT_0048256c + iVar3) != '\0') {
            DAT_00487234 = 1;
            sfx_play(sfx_ui_typeenter);
            puVar8 = &highscore_active_record;
            for (iVar3 = 7; iVar3 != 0; iVar3 = iVar3 + -1) {
              *puVar8 = 0;
              puVar8 = puVar8 + 1;
            }
            uVar4 = 0xffffffff;
            pcVar7 = (char *)&DAT_0048256c;
            do {
              pcVar9 = pcVar7;
              if (uVar4 == 0) break;
              uVar4 = uVar4 - 1;
              pcVar9 = pcVar7 + 1;
              cVar1 = *pcVar7;
              pcVar7 = pcVar9;
            } while (cVar1 != '\0');
            uVar4 = ~uVar4;
            _DAT_00482590 = &DAT_0048256c;
            pcVar7 = pcVar9 + -uVar4;
            pcVar9 = (char *)&highscore_active_record;
            for (uVar5 = uVar4 >> 2; iVar3 = DAT_00482594, uVar5 != 0; uVar5 = uVar5 - 1) {
              *(undefined4 *)pcVar9 = *(undefined4 *)pcVar7;
              pcVar7 = pcVar7 + 4;
              pcVar9 = pcVar9 + 4;
            }
            player_name_length = DAT_00482594;
            for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
              *pcVar9 = *pcVar7;
              pcVar7 = pcVar7 + 1;
              pcVar9 = pcVar9 + 1;
            }
            *(undefined1 *)((int)&highscore_active_record + iVar3) = 0;
            FUN_0043b510();
            thunk_FUN_0043afa0();
            goto LAB_004103c2;
          }
        }
        DAT_004825ad = '\0';
        sfx_play(sfx_shock_hit_01);
      }
LAB_004103c2:
      local_18 = local_18 + 60.0;
      (**(code **)(*grim_interface_ptr + 0x110))(&DAT_004965f8);
      if (DAT_004825a4 < 100) {
        local_10 = local_18 + 16.0;
        local_c = local_14 + 16.0;
        ui_text_input_render(&local_10,6.652423e-39,1.0);
        ui_cursor_render();
        return;
      }
      goto LAB_00410782;
    }
    DAT_00487234 = 1;
  }
  else {
    if (DAT_00487234 == 0) goto LAB_00410232;
    if (DAT_00487234 != 1) goto LAB_00410782;
  }
  local_18 = local_8 + 30.0;
  _DAT_00482590 = &DAT_0048256c;
  if (DAT_004825a4 < 100) {
    local_14 = fVar2 + 64.0;
  }
  else {
    local_14 = fVar2 + 62.0;
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,local_18 + 8.0,local_14,s_Score_too_low_for_top_d__00473170,100);
    local_14 = local_14 + 6.0;
  }
  local_10 = local_18;
  local_c = local_14 + 16.0;
  ui_text_input_render(&local_10,6.652423e-39,1.0);
  local_14 = local_14 + 146.0;
  if ((DAT_004825fc & 4) == 0) {
    DAT_004825fc = DAT_004825fc | 4;
    DAT_0048250e = 1;
    DAT_0048251d = 0;
    DAT_0048251c = 0;
    _DAT_00482518 = 0x3f800000;
    _DAT_00482514 = 0;
    _DAT_00482508 = (char *)0x0;
    DAT_0048250c = 0;
    DAT_0048250d = '\0';
    _DAT_00482510 = 0;
    crt_atexit(&DAT_004107b0);
  }
  _DAT_00482508 = s_Play_Again_00473164;
  if ((DAT_004825fc & 8) == 0) {
    DAT_004825fc = DAT_004825fc | 8;
    DAT_00482556 = 1;
    DAT_00482565 = 0;
    DAT_00482564 = 0;
    _DAT_00482560 = 0x3f800000;
    _DAT_0048255c = 0;
    _DAT_00482550 = (char *)0x0;
    DAT_00482554 = 0;
    DAT_00482555 = '\0';
    _DAT_00482558 = 0;
    crt_atexit(&DAT_004107a0);
  }
  _DAT_00482550 = s_High_scores_00473158;
  if ((DAT_004825fc & 0x10) == 0) {
    DAT_004825fc = DAT_004825fc | 0x10;
    DAT_0048253e = 1;
    DAT_0048254d = 0;
    DAT_0048254c = 0;
    _DAT_00482548 = 0x3f800000;
    _DAT_00482544 = 0;
    _DAT_00482538 = (char *)0x0;
    DAT_0048253c = 0;
    DAT_0048253d = '\0';
    _DAT_00482540 = 0;
    crt_atexit(&DAT_00410790);
  }
  _DAT_00482538 = s_Main_Menu_00472084;
  local_18 = (local_18 - 4.0) + 26.0;
  ui_button_update(&local_18,(int *)&DAT_00482508);
  local_14 = local_14 + 32.0;
  ui_button_update(&local_18,(int *)&DAT_00482550);
  local_14 = local_14 + 32.0;
  ui_button_update(&local_18,(int *)&DAT_00482538);
  local_14 = local_14 + 32.0;
  if (DAT_0048250d != '\0') {
    ui_transition_direction = '\0';
    game_state_pending = 9;
    if (_config_game_mode == 4) {
      game_state_pending = 0x12;
    }
    sfx_mute_all(music_track_crimson_theme_id);
    sfx_mute_all(music_track_shortie_monk_id);
    sfx_mute_all(music_track_extra_0);
  }
  if (DAT_00482555 != '\0') {
    DAT_00487258 = _config_game_mode;
    DAT_0048724d = '\x01';
    DAT_00487250 = _quest_stage_major;
    DAT_00487254 = _quest_stage_minor;
    DAT_0048725c = config_full_version;
    ui_transition_direction = '\0';
    game_state_pending = 0xe;
  }
  if (DAT_0048253d != '\0') {
    sfx_mute_all(music_track_extra_0);
    sfx_mute_all(music_track_crimson_theme_id);
    sfx_mute_all(music_track_shortie_monk_id);
    sfx_play_exclusive(music_track_crimson_theme_id);
    ui_transition_direction = '\0';
    game_state_pending = 0;
    DAT_00487292 = 0;
  }
LAB_00410782:
  ui_cursor_render();
  return;
}



/* FUN_004107e0 @ 004107e0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_004107e0(void)

{
  float fVar1;
  int iVar2;
  char *pcVar3;
  float local_18;
  float local_14;
  float local_10;
  float local_c;
  float local_8;
  float local_4;
  
  _bonus_reflex_boost_timer = 0;
  if ((((game_state_id == 0xc) && (game_state_pending == 0x19)) && (ui_transition_direction != '\0')
      ) && (iVar2 = sfx_is_unmuted(music_track_shortie_monk_id), (char)iVar2 == '\0')) {
    sfx_play_exclusive(music_track_shortie_monk_id);
  }
  gameplay_render_world();
  ui_elements_update_and_render();
  perk_prompt_update_and_render();
  local_4 = _DAT_0048dbdc + DAT_0048dc00;
  local_10 = DAT_0048dbfc + _DAT_0048dbd8 + 180.0;
  fVar1 = local_4 + 40.0;
  local_18 = (_DAT_0048dbc8 + local_10 + 44.0) - 10.0;
  local_14 = fVar1;
  local_c = fVar1;
  local_8 = local_18;
  __ftol();
  __ftol();
  FUN_00417ae0();
  if (DAT_00487234 == -1) {
    thunk_FUN_0043afa0();
    DAT_00482604 = FUN_0043b520();
    highscore_record_game_mode = config_game_mode;
    (**(code **)(*grim_interface_ptr + 0x4c))();
    console_input_poll();
    (**(code **)(*grim_interface_ptr + 0x48))(0x1c);
    DAT_00487234 = 0;
  }
  else if (DAT_00487234 != 0) goto LAB_00410cc1;
  local_18 = local_8 + 30.0;
  local_14 = fVar1 + 70.0 + 16.0;
  switch(DAT_00487194) {
  default:
    pcVar3 = s_Quest_failed__try_again__004731bc;
    iVar2 = *grim_interface_ptr;
    break;
  case 1:
    pcVar3 = s_You_didn_t_make_it__do_try_again_00473244;
    iVar2 = *grim_interface_ptr;
    break;
  case 2:
    pcVar3 = s_Third_time_no_good__00473230;
    iVar2 = *grim_interface_ptr;
    break;
  case 3:
    pcVar3 = s_No_luck_this_time__have_another_g_0047320c;
    iVar2 = *grim_interface_ptr;
    break;
  case 4:
    pcVar3 = s_Persistence_will_be_rewared__004731ec;
    iVar2 = *grim_interface_ptr;
    break;
  case 5:
    pcVar3 = s_Try_one_more_time__004731d8;
    iVar2 = *grim_interface_ptr;
  }
  (**(code **)(iVar2 + 0x144))(local_18,local_14,pcVar3);
  local_14 = local_14 + 16.0;
  local_18 = local_18 + 6.0;
  local_10 = local_18 + 4.0;
  local_c = local_14 + 10.0;
  ui_text_input_render(&local_10,6.652423e-39,1.0);
  local_14 = local_14 + 98.0;
  local_18 = local_18 + 16.0;
  if ((DAT_004825d8 & 1) == 0) {
    DAT_004825d8 = DAT_004825d8 | 1;
    DAT_00482686 = 1;
    DAT_00482695 = 0;
    DAT_00482694 = 0;
    _DAT_00482690 = 0x3f800000;
    _DAT_0048268c = 0;
    _DAT_00482680 = (char *)0x0;
    DAT_00482684 = 0;
    DAT_00482685 = '\0';
    _DAT_00482688 = 0;
    crt_atexit(&DAT_00410d10);
  }
  _DAT_00482680 = s_Play_Again_00473164;
  if ((DAT_004825d8 & 2) == 0) {
    DAT_004825d8 = DAT_004825d8 | 2;
    DAT_0048269e = 1;
    DAT_004826ad = 0;
    DAT_004826ac = 0;
    _DAT_004826a8 = 0x3f800000;
    _DAT_004826a4 = 0;
    _DAT_00482698 = (char *)0x0;
    DAT_0048269c = 0;
    DAT_0048269d = '\0';
    _DAT_004826a0 = 0;
    crt_atexit(&DAT_00410d00);
  }
  _DAT_00482698 = s_Play_Another_004731ac;
  if ((DAT_004825d8 & 4) == 0) {
    DAT_004825d8 = DAT_004825d8 | 4;
    DAT_004824f6 = 1;
    DAT_00482505 = 0;
    DAT_00482504 = 0;
    _DAT_00482500 = 0x3f800000;
    _DAT_004824fc = 0;
    _DAT_004824f0 = (char *)0x0;
    DAT_004824f4 = 0;
    DAT_004824f5 = '\0';
    _DAT_004824f8 = 0;
    crt_atexit(&DAT_00410cf0);
  }
  _DAT_004824f0 = s_Main_Menu_00472084;
  ui_button_update(&local_18,(int *)&DAT_00482680);
  local_14 = local_14 + 32.0;
  ui_button_update(&local_18,(int *)&DAT_00482698);
  local_14 = local_14 + 32.0;
  ui_button_update(&local_18,(int *)&DAT_004824f0);
  local_14 = local_14 + 32.0;
  if (DAT_00482685 != '\0') {
    DAT_00487194 = DAT_00487194 + 1;
    ui_transition_direction = '\0';
    game_state_pending = 9;
    sfx_mute_all(music_track_crimson_theme_id);
    sfx_mute_all(music_track_shortie_monk_id);
    sfx_mute_all(music_track_extra_0);
    render_pass_mode = 0;
  }
  if (DAT_0048269d != '\0') {
    DAT_00487194 = 0;
    ui_transition_direction = '\0';
    game_state_pending = 0xb;
    DAT_00487292 = 0;
    sfx_mute_all(music_track_crimson_theme_id);
    sfx_mute_all(music_track_shortie_monk_id);
    sfx_mute_all(music_track_extra_0);
    sfx_play_exclusive(music_track_crimson_theme_id);
  }
  if (DAT_004824f5 != '\0') {
    DAT_00487194 = 0;
    sfx_mute_all(music_track_extra_0);
    sfx_mute_all(music_track_crimson_theme_id);
    sfx_mute_all(music_track_shortie_monk_id);
    sfx_play_exclusive(music_track_crimson_theme_id);
    ui_transition_direction = '\0';
    game_state_pending = 0;
    DAT_00487292 = 0;
  }
LAB_00410cc1:
  ui_cursor_render();
  return;
}



/* quest_results_screen_update @ 00410d20 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* quest/campaign results screen: final time, perk bonus, high score entry, and buttons */

void quest_results_screen_update(void)

{
  char cVar1;
  int iVar2;
  undefined *puVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  float unaff_EBP;
  char *pcVar7;
  char *pcVar8;
  longlong lVar9;
  int *piStack_78;
  float fStack_74;
  undefined *puStack_70;
  float fStack_68;
  float fStack_60;
  float fVar10;
  float fVar11;
  float fVar12;
  float fVar13;
  float fStack_38;
  undefined4 uVar14;
  float local_18;
  float local_14;
  float local_10;
  float local_c;
  float local_8;
  float local_4;
  
  _bonus_reflex_boost_timer = 0;
  DAT_00487194 = 0;
  if ((((game_state_id == 8) && (game_state_pending == 0x19)) && (ui_transition_direction != '\0'))
     && (iVar2 = sfx_is_unmuted(music_track_shortie_monk_id), (char)iVar2 == '\0')) {
    sfx_play_exclusive(music_track_crimsonquest_id);
  }
  gameplay_render_world();
  ui_elements_update_and_render();
  if ((DAT_00482568 & 1) == 0) {
    DAT_00482568 = DAT_00482568 | 1;
    DAT_00482526 = 1;
    DAT_00482535 = 0;
    DAT_00482534 = 0;
    _DAT_00482530 = 0x3f800000;
    _DAT_0048252c = 0;
    _DAT_00482520 = (undefined *)0x0;
    DAT_00482524 = 0;
    DAT_00482525 = '\0';
    _DAT_00482528 = 0;
    crt_atexit(&DAT_00412070);
  }
  if ((DAT_00482568 & 2) == 0) {
    DAT_00482568 = DAT_00482568 | 2;
    _DAT_004826f8 = 0x3f800000;
    _DAT_004826e8 = &DAT_004825dc;
    DAT_004826ec = 0;
    _DAT_004826f0 = 0x18;
    _DAT_004826f4 = 0x60;
    crt_atexit(&DAT_00412060);
  }
  local_4 = _DAT_0048dbdc + DAT_0048dc00;
  local_18 = DAT_0048dbfc + _DAT_0048dbd8 + 180.0;
  local_14 = local_4 + 40.0;
  local_10 = local_18 + _DAT_0048dbc8 + 40.0;
  local_c = local_14;
  __ftol();
  __ftol();
  FUN_00417ae0();
  fVar13 = local_c + 56.0;
  local_8 = local_10;
  uVar14 = 0x3f800000;
  local_c = fVar13;
  (**(code **)(*grim_interface_ptr + 0x114))();
  if (((game_state_prev == 0xe) && (ui_transition_direction != '\0')) && (DAT_0048724d != '\0')) {
    DAT_0048724d = '\0';
    DAT_00487234 = 2;
  }
  else {
    if (DAT_00487234 == -2) {
      iVar2 = _quest_stage_minor + -0xb + _quest_stage_major * 10;
      DAT_00482700 = (&quest_unlock_weapon_id)[iVar2 * 0xb];
      DAT_00482704 = (&quest_unlock_perk_id)[iVar2 * 0xb];
      lVar9 = __ftol();
      player_health = (float)(int)lVar9;
      lVar9 = __ftol();
      iVar2 = (int)lVar9;
      if (_config_player_count == 2) {
        DAT_00482600 = iVar2;
        lVar9 = __ftol();
        iVar2 = iVar2 + (int)lVar9;
      }
      DAT_0048270c = (quest_spawn_timeline + perk_pending_count * -1000) - iVar2;
      survival_elapsed_ms = DAT_0048270c;
      if (DAT_0048270c == 0) {
        survival_elapsed_ms = 1;
      }
      DAT_00482708 = 0;
      DAT_00482600 = iVar2;
      FUN_0043b750();
      DAT_00482724 = 700;
      DAT_00487234 = DAT_00487234 + 1;
      DAT_00482710 = 0;
      DAT_00482714 = 0;
      DAT_00482718 = 0;
      DAT_0048271c = 0;
      DAT_00482720 = 0;
    }
    if (DAT_00487234 == -1) {
      fVar13 = 1.0;
      (**(code **)(*grim_interface_ptr + 0x114))();
      DAT_00482724 = DAT_00482724 - frame_dt_ms;
      if (DAT_00482724 < 1) {
        if (DAT_0048271c < 3) {
          if (DAT_0048271c == 0) {
            DAT_00482710 = DAT_00482710 + 2000;
            DAT_00482724 = 0x28;
            sfx_play(sfx_ui_clink_01);
            DAT_00482720 = DAT_00482710;
            if (quest_spawn_timeline <= DAT_00482710) {
              DAT_0048271c = DAT_0048271c + 1;
              DAT_00482710 = quest_spawn_timeline;
              DAT_00482720 = DAT_00482710;
            }
          }
          else if (DAT_0048271c == 1) {
            DAT_00482714 = DAT_00482714 + 1000;
            DAT_00482724 = 0x96;
            sfx_play(sfx_ui_clink_01);
            DAT_00482720 = DAT_00482720 + -1000;
            if (DAT_00482600 <= DAT_00482714) {
              DAT_00482714 = DAT_00482600;
              DAT_0048271c = DAT_0048271c + 1;
            }
          }
          else if (DAT_0048271c == 2) {
            DAT_00482718 = DAT_00482718 + 1;
            DAT_00482724 = 300;
            sfx_play(sfx_ui_clink_01);
            DAT_00482720 = DAT_00482720 + -1000;
            if (perk_pending_count <= DAT_00482718) {
              DAT_00482718 = perk_pending_count;
              DAT_0048271c = DAT_0048271c + 1;
              DAT_00482724 = 1000;
              survival_elapsed_ms = DAT_0048270c;
              DAT_00482720 = DAT_0048270c;
            }
          }
        }
        else if (DAT_0048271c == 3) {
          DAT_00482724 = 0x32;
          DAT_00482708 = DAT_00482708 + 1;
        }
      }
      fStack_38 = 1.0 - (float)DAT_00482708 * 0.1;
      if (0.0 <= fStack_38) {
        if (1.0 < fStack_38) {
          fStack_38 = 1.0;
        }
      }
      else {
        fStack_38 = 0.0;
      }
      if (DAT_0048271c == 0) {
        fVar11 = 0.1;
        fVar10 = 0.1;
        fVar12 = fStack_38;
        (**(code **)(*grim_interface_ptr + 0x114))();
      }
      else {
        fVar12 = fStack_38 * 0.4;
        fVar11 = 1.0;
        fVar10 = 1.0;
        (**(code **)(*grim_interface_ptr + 0x114))();
      }
      (**(code **)(*grim_interface_ptr + 0x148))();
      iVar2 = *grim_interface_ptr;
      puStack_70 = (undefined *)0x4112d4;
      FUN_0040ff50(DAT_00482710 / 1000);
      puStack_70 = (undefined *)0x4112fc;
      (**(code **)(iVar2 + 0x148))();
      if (DAT_0048271c == 1) {
        fStack_60 = 0.1;
        fStack_68 = 0.1;
        fVar13 = fStack_38;
        (**(code **)(*grim_interface_ptr + 0x114))();
      }
      else {
        fVar13 = fVar13 * 0.4;
        fStack_60 = 1.0;
        fStack_68 = 1.0;
        (**(code **)(*grim_interface_ptr + 0x114))();
      }
      fStack_74 = fVar11;
      puStack_70 = (undefined *)fVar12;
      if (DAT_0048271c < 1) {
        puStack_70 = (undefined *)0x3f800000;
        fStack_74 = 1.0;
        piStack_78 = (int *)0x3f800000;
        (**(code **)(*grim_interface_ptr + 0x114))();
        fStack_74 = fVar11;
        puStack_70 = (undefined *)fVar12;
      }
      piStack_78 = grim_interface_ptr;
      fVar12 = fStack_74;
      fVar11 = (float)puStack_70;
      (**(code **)(*grim_interface_ptr + 0x148))();
      iVar2 = *grim_interface_ptr;
      FUN_0040ff50(DAT_00482714 / 1000);
      fStack_74 = fVar11;
      piStack_78 = (int *)(fVar12 + 132.0);
      puStack_70 = &DAT_00471fc4;
      (**(code **)(iVar2 + 0x148))(grim_interface_ptr);
      if (DAT_0048271c == 2) {
        puStack_70 = (undefined *)0x3dcccccd;
        fStack_74 = 0.8;
        piStack_78 = (int *)0x3dcccccd;
        fVar10 = fStack_38;
        (**(code **)(*grim_interface_ptr + 0x114))();
      }
      else {
        fVar10 = fVar10 * 0.4;
        puStack_70 = (undefined *)0x3f800000;
        fStack_74 = 1.0;
        piStack_78 = (int *)0x3f800000;
        (**(code **)(*grim_interface_ptr + 0x114))();
      }
      if (DAT_0048271c < 2) {
        (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,fStack_68 * 0.2)
        ;
      }
      (**(code **)(*grim_interface_ptr + 0x148))
                (grim_interface_ptr,fStack_60,fVar13,s_Unpicked_Perk_Bonus__004732d0);
      iVar2 = *grim_interface_ptr;
      puVar3 = FUN_0040ff50(DAT_00482718);
      (**(code **)(iVar2 + 0x148))(grim_interface_ptr,fStack_60 + 132.0,fVar13,&DAT_00471fc4,puVar3)
      ;
      (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,fStack_38);
      piStack_78 = (int *)((float)puStack_70 - 4.0);
      fStack_74 = fVar10 + 1.0;
      (**(code **)(*grim_interface_ptr + 0xd4))(&piStack_78,0x43280000,0x3f800000);
      piStack_78 = (int *)((float)piStack_78 + 8.0);
      (**(code **)(*grim_interface_ptr + 0x148))
                (grim_interface_ptr,fStack_38,piStack_78,s_Final_Time__004732c4);
      iVar2 = *grim_interface_ptr;
      puVar3 = FUN_0040ff50(DAT_00482720 / 1000);
      (**(code **)(iVar2 + 0x148))
                (grim_interface_ptr,fStack_38 + 132.0,piStack_78,&DAT_00471fc4,puVar3);
      piStack_78 = (int *)((float)piStack_78 + 20.0);
      (**(code **)(*grim_interface_ptr + 0x4c))();
      (**(code **)(*grim_interface_ptr + 0x48))(0x1c);
      if ((DAT_00487234 == -1) &&
         ((cVar1 = (**(code **)(*grim_interface_ptr + 0x48))(), cVar1 != '\0' ||
          (iVar2 = input_primary_just_pressed(), (char)iVar2 != '\0')))) {
        DAT_00487234 = DAT_00487234 + 1;
        perk_prompt_update_and_render();
        ui_cursor_render();
        return;
      }
      if (10 < DAT_00482708) {
        DAT_00482708 = 0;
        DAT_00487234 = DAT_00487234 + 1;
        perk_prompt_update_and_render();
        ui_cursor_render();
        return;
      }
      goto LAB_00412007;
    }
    if (DAT_00487234 == 0) {
      thunk_FUN_0043afa0();
      DAT_00482620 = FUN_0043b520();
      (**(code **)(*grim_interface_ptr + 0x4c))();
      (**(code **)(*grim_interface_ptr + 0x48))();
      if (99 < DAT_00482620) {
        DAT_004826ec = 0;
        _DAT_004826f0 = 0;
        _DAT_004826e8 = &DAT_004825dc;
        DAT_00487234 = 2;
        perk_prompt_update_and_render();
        ui_cursor_render();
        return;
      }
      uVar4 = 0xffffffff;
      _DAT_004826f0 = 0x14;
      pcVar7 = (char *)&highscore_active_record;
      do {
        pcVar8 = pcVar7;
        if (uVar4 == 0) break;
        uVar4 = uVar4 - 1;
        pcVar8 = pcVar7 + 1;
        cVar1 = *pcVar7;
        pcVar7 = pcVar8;
      } while (cVar1 != '\0');
      uVar4 = ~uVar4;
      _DAT_004826e8 = &DAT_004825dc;
      DAT_00487234 = 1;
      pcVar7 = pcVar8 + -uVar4;
      pcVar8 = &DAT_004825dc;
      for (uVar5 = uVar4 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
        *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
        pcVar7 = pcVar7 + 4;
        pcVar8 = pcVar8 + 4;
      }
      for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
        *pcVar8 = *pcVar7;
        pcVar7 = pcVar7 + 1;
        pcVar8 = pcVar8 + 1;
      }
      uVar4 = 0xffffffff;
      pcVar7 = (char *)&highscore_active_record;
      do {
        if (uVar4 == 0) break;
        uVar4 = uVar4 - 1;
        cVar1 = *pcVar7;
        pcVar7 = pcVar7 + 1;
      } while (cVar1 != '\0');
      DAT_004826ec = ~uVar4 - 1;
      perk_prompt_update_and_render();
      ui_cursor_render();
      return;
    }
    if (DAT_00487234 == 1) {
      if (DAT_00482708 < 500) {
        DAT_00482708 = DAT_00482708 + frame_dt_ms;
      }
      else {
        DAT_00482708 = 500;
      }
      DAT_00496604 = (float)DAT_00482708 * 0.002;
      (**(code **)(*grim_interface_ptr + 0x110))();
      (**(code **)(*grim_interface_ptr + 0x148))();
      _DAT_00482530 = uVar14;
      DAT_00496604 = 0.7;
      _DAT_004826f4 = 0xa6;
      _DAT_00482520 = &DAT_0047318c;
      local_18 = (unaff_EBP + 32.0) - 8.0;
      _DAT_004826f8 = _DAT_00482530;
      ui_button_update((float *)&stack0xffffffe4,(int *)&DAT_00482520);
      iVar2 = ui_text_input_update((float *)&stack0xffffffdc,(int *)&DAT_004826e8);
      if (((char)iVar2 != '\0') || (DAT_00482525 != '\0')) {
        uVar4 = 0xffffffff;
        iVar2 = 0;
        pcVar7 = &DAT_004825dc;
        do {
          if (uVar4 == 0) break;
          uVar4 = uVar4 - 1;
          cVar1 = *pcVar7;
          pcVar7 = pcVar7 + 1;
        } while (cVar1 != '\0');
        iVar6 = ~uVar4 - 1;
        if (0 < iVar6) {
          if (0 < iVar6) {
            do {
              if ((&DAT_004825dc)[iVar2] != ' ') break;
              iVar2 = iVar2 + 1;
            } while (iVar2 < iVar6);
          }
          if ((&DAT_004825dc)[iVar2] != '\0') {
            DAT_00487234 = 2;
            sfx_play(sfx_ui_typeenter);
            iVar2 = DAT_004826ec;
            uVar4 = 0xffffffff;
            pcVar7 = &DAT_004825dc;
            do {
              pcVar8 = pcVar7;
              if (uVar4 == 0) break;
              uVar4 = uVar4 - 1;
              pcVar8 = pcVar7 + 1;
              cVar1 = *pcVar7;
              pcVar7 = pcVar8;
            } while (cVar1 != '\0');
            uVar4 = ~uVar4;
            player_name_length = DAT_004826ec;
            pcVar7 = pcVar8 + -uVar4;
            pcVar8 = (char *)&highscore_active_record;
            for (uVar5 = uVar4 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
              *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
              pcVar7 = pcVar7 + 4;
              pcVar8 = pcVar8 + 4;
            }
            DAT_004826ec = 0;
            _DAT_004826f0 = 0;
            for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
              *pcVar8 = *pcVar7;
              pcVar7 = pcVar7 + 1;
              pcVar8 = pcVar8 + 1;
            }
            *(undefined1 *)((int)&highscore_active_record + iVar2) = 0;
            _DAT_004826e8 = &DAT_004825dc;
            FUN_0043b510();
            thunk_FUN_0043afa0();
            goto LAB_00411906;
          }
        }
        DAT_00482525 = '\0';
        sfx_play(sfx_shock_hit_01);
      }
LAB_00411906:
      (**(code **)(*grim_interface_ptr + 0x110))();
      ui_text_input_render(&stack0xffffffe0,6.652423e-39,1.0);
      perk_prompt_update_and_render();
      ui_cursor_render();
      return;
    }
    if (DAT_00487234 != 2) goto LAB_00412007;
  }
  if (DAT_00482708 < 500) {
    DAT_00482708 = DAT_00482708 + frame_dt_ms;
  }
  else {
    DAT_00482708 = 500;
  }
  fVar10 = (float)DAT_00482708 * 0.002;
  fVar12 = local_18 + 30.0;
  (**(code **)(*grim_interface_ptr + 0x114))();
  if (99 < DAT_00482620) {
    (**(code **)(*grim_interface_ptr + 0x148))();
    fVar13 = fVar13 + 6.0 + 6.0;
  }
  local_14 = fVar13 + 16.0;
  local_18 = fVar12;
  ui_text_input_render(&local_18,6.652423e-39,fVar10);
  if (DAT_00482700 != 0) {
    (**(code **)(*grim_interface_ptr + 0x114))();
    (**(code **)(*grim_interface_ptr + 0x148))();
    (**(code **)(*grim_interface_ptr + 0x114))();
    iVar2 = *grim_interface_ptr;
    weapon_table_entry((&quest_unlock_weapon_id)
                       [(_quest_stage_minor + -0xb + _quest_stage_major * 10) * 0xb]);
    puStack_70 = (undefined *)0x411b4e;
    (**(code **)(iVar2 + 0x148))();
  }
  if (DAT_00482704 != perk_id_antiperk) {
    (**(code **)(*grim_interface_ptr + 0x114))();
    (**(code **)(*grim_interface_ptr + 0x148))();
    (**(code **)(*grim_interface_ptr + 0x114))();
    puStack_70 = (undefined *)0x411c35;
    (**(code **)(*grim_interface_ptr + 0x148))();
  }
  if ((DAT_00482568 & 4) == 0) {
    DAT_00482568 = DAT_00482568 | 4;
    DAT_004825c6 = 1;
    DAT_004825d5 = 0;
    DAT_004825d4 = 0;
    _DAT_004825d0 = 1.0;
    _DAT_004825cc = 0;
    _DAT_004825c0 = (char *)0x0;
    DAT_004825c4 = 0;
    DAT_004825c5 = '\0';
    _DAT_004825c8 = 0;
    crt_atexit(&DAT_00412050);
  }
  _DAT_004825c0 = s_Play_Next_00473278;
  if ((DAT_00482568 & 8) == 0) {
    DAT_00482568 = DAT_00482568 | 8;
    DAT_0048260e = 1;
    DAT_0048261d = 0;
    DAT_0048261c = 0;
    _DAT_00482618 = 1.0;
    _DAT_00482614 = 0;
    _DAT_00482608 = (char *)0x0;
    DAT_0048260c = 0;
    DAT_0048260d = '\0';
    _DAT_00482610 = 0;
    crt_atexit(&DAT_00412040);
  }
  _DAT_00482608 = s_Play_Again_00473164;
  if ((DAT_00482568 & 0x10) == 0) {
    DAT_00482568 = DAT_00482568 | 0x10;
    DAT_0048266e = 1;
    DAT_0048267d = 0;
    DAT_0048267c = 0;
    _DAT_00482678 = 1.0;
    _DAT_00482674 = 0;
    _DAT_00482668 = (char *)0x0;
    DAT_0048266c = 0;
    DAT_0048266d = '\0';
    _DAT_00482670 = 0;
    crt_atexit(&DAT_00412030);
  }
  _DAT_00482668 = s_High_scores_00473158;
  if ((DAT_00482568 & 0x20) == 0) {
    DAT_00482568 = DAT_00482568 | 0x20;
    DAT_004826b6 = 1;
    DAT_004826c5 = 0;
    DAT_004826c4 = 0;
    _DAT_004826c0 = 1.0;
    _DAT_004826bc = 0;
    _DAT_004826b0 = (char *)0x0;
    DAT_004826b4 = 0;
    DAT_004826b5 = '\0';
    _DAT_004826b8 = 0;
    crt_atexit(&DAT_00412020);
  }
  _DAT_004826b0 = s_Main_Menu_00472084;
  if ((_quest_stage_major == 5) && (_quest_stage_minor == 10)) {
    _DAT_004825c0 = s_Show_End_Note_00473268;
  }
  _DAT_004825d0 = fVar10;
  _DAT_00482618 = fVar10;
  _DAT_00482678 = fVar10;
  _DAT_004826c0 = fVar10;
  ui_button_update((float *)&stack0xffffffe0,(int *)&DAT_004825c0);
  ui_button_update((float *)&stack0xffffffe0,(int *)&DAT_00482608);
  ui_button_update((float *)&stack0xffffffe0,(int *)&DAT_00482668);
  ui_button_update((float *)&stack0xffffffe0,(int *)&DAT_004826b0);
  if (DAT_004825c5 != '\0') {
    if ((_quest_stage_major == 5) && (_quest_stage_minor == 10)) {
      render_pass_mode = 0;
      game_state_pending = 0x15;
      ui_transition_direction = '\0';
    }
    else {
      sfx_mute_all(music_track_extra_0);
      sfx_mute_all(music_track_crimson_theme_id);
      sfx_mute_all(music_track_shortie_monk_id);
      _quest_stage_minor = _quest_stage_minor + 1;
      ui_transition_direction = '\0';
      game_state_pending = 9;
      render_pass_mode = 0;
    }
  }
  if (DAT_0048260d != '\0') {
    ui_transition_direction = '\0';
    game_state_pending = 9;
    sfx_mute_all(music_track_crimson_theme_id);
    sfx_mute_all(music_track_shortie_monk_id);
    sfx_mute_all(music_track_extra_0);
    render_pass_mode = 0;
  }
  if (DAT_0048266d != '\0') {
    DAT_00487258 = _config_game_mode;
    DAT_0048724d = '\x01';
    DAT_00487250 = _quest_stage_major;
    DAT_00487254 = _quest_stage_minor;
    DAT_0048725c = config_full_version;
    ui_transition_direction = '\0';
    game_state_pending = 0xe;
  }
  if (DAT_004826b5 != '\0') {
    sfx_mute_all(music_track_extra_0);
    sfx_mute_all(music_track_crimson_theme_id);
    sfx_mute_all(music_track_shortie_monk_id);
    sfx_play_exclusive(music_track_crimson_theme_id);
    ui_transition_direction = '\0';
    game_state_pending = 0;
    DAT_00487292 = 0;
  }
LAB_00412007:
  perk_prompt_update_and_render();
  ui_cursor_render();
  return;
}



/* FUN_004120b0 @ 004120b0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_004120b0(void)

{
  char cVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  char *pcVar5;
  undefined4 *puVar6;
  char *pcVar7;
  
  puVar6 = &highscore_active_record;
  for (iVar2 = 0x12; iVar2 != 0; iVar2 = iVar2 + -1) {
    *puVar6 = 0;
    puVar6 = puVar6 + 1;
  }
  uVar3 = 0xffffffff;
  pcVar5 = &default_player_name;
  do {
    pcVar7 = pcVar5;
    if (uVar3 == 0) break;
    uVar3 = uVar3 - 1;
    pcVar7 = pcVar5 + 1;
    cVar1 = *pcVar5;
    pcVar5 = pcVar7;
  } while (cVar1 != '\0');
  uVar3 = ~uVar3;
  pcVar5 = pcVar7 + -uVar3;
  pcVar7 = (char *)&highscore_active_record;
  for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1) {
    *(undefined4 *)pcVar7 = *(undefined4 *)pcVar5;
    pcVar5 = pcVar5 + 4;
    pcVar7 = pcVar7 + 4;
  }
  for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
    *pcVar7 = *pcVar5;
    pcVar5 = pcVar5 + 1;
    pcVar7 = pcVar7 + 1;
  }
  highscore_flags = 0;
  DAT_00487086 = 0x7c;
  DAT_00487087 = 0xff;
  uVar3 = _rand();
  _DAT_00487078 = uVar3 & 0xfee050f;
  _bonus_energizer_timer = 0;
  survival_spawn_stage = 0;
  _DAT_00487028 = 0;
  DAT_00487194 = 0;
  demo_mode_active = 0;
  DAT_00486faa = 0;
  quest_unlock_index = 0;
  creature_active_count = 0;
  DAT_0048718c = 0;
  DAT_00487088 = 0xffffffff;
  _quest_stage_major = 1;
  _quest_stage_minor = 1;
  return;
}



/* FUN_00412190 @ 00412190 */

void FUN_00412190(void)

{
  FUN_00461981(&quest_selected_meta,0x2c,0x32,&LAB_004121b0);
  return;
}



/* FUN_004121f0 @ 004121f0 */

void FUN_004121f0(void)

{
  crt_atexit(&LAB_00412200);
  return;
}



/* FUN_00412360 @ 00412360 */

void FUN_00412360(void)

{
  char cVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  undefined1 *puVar6;
  char *pcVar7;
  char *pcVar8;
  
  puVar6 = &DAT_00482b56;
  iVar5 = 100;
  do {
    pcVar7 = puVar6 + -0x46;
    for (iVar2 = 0x12; iVar2 != 0; iVar2 = iVar2 + -1) {
      pcVar7[0] = '\0';
      pcVar7[1] = '\0';
      pcVar7[2] = '\0';
      pcVar7[3] = '\0';
      pcVar7 = pcVar7 + 4;
    }
    uVar3 = 0xffffffff;
    pcVar7 = &default_player_name;
    do {
      pcVar8 = pcVar7;
      if (uVar3 == 0) break;
      uVar3 = uVar3 - 1;
      pcVar8 = pcVar7 + 1;
      cVar1 = *pcVar7;
      pcVar7 = pcVar8;
    } while (cVar1 != '\0');
    uVar3 = ~uVar3;
    pcVar7 = pcVar8 + -uVar3;
    pcVar8 = puVar6 + -0x46;
    for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1) {
      *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
      pcVar7 = pcVar7 + 4;
      pcVar8 = pcVar8 + 4;
    }
    for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
      *pcVar8 = *pcVar7;
      pcVar7 = pcVar7 + 1;
      pcVar8 = pcVar8 + 1;
    }
    puVar6[-2] = 0;
    *puVar6 = 0x7c;
    puVar6[1] = 0xff;
    uVar3 = _rand();
    *(uint *)(puVar6 + -0xe) = uVar3 & 0xfee050f;
    puVar6 = puVar6 + 0x48;
    iVar5 = iVar5 + -1;
    if (iVar5 == 0) {
      return;
    }
  } while( true );
}



/* FUN_004123d0 @ 004123d0 */

void FUN_004123d0(void)

{
  FUN_00461981(&bonus_meta_label,0x14,0xf,&LAB_004123f0);
  return;
}



/* FUN_00412410 @ 00412410 */

void __fastcall FUN_00412410(undefined4 *param_1)

{
  if ((void *)*param_1 != (void *)0x0) {
    crt_free((void *)*param_1);
  }
  if ((void *)param_1[1] != (void *)0x0) {
    crt_free((void *)param_1[1]);
  }
  return;
}



/* FUN_00412440 @ 00412440 */

void FUN_00412440(void)

{
  crt_atexit(&LAB_00412450);
  return;
}



/* FUN_00412470 @ 00412470 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

uint FUN_00412470(void)

{
  bool bVar1;
  bool bVar2;
  char *pcVar3;
  int iVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  int local_4;
  
  local_4 = 0;
  bVar2 = false;
  pcVar3 = &bonus_state;
  do {
    if ((*(int *)(pcVar3 + -4) == 0xe) && (*pcVar3 == '\0')) {
      bVar2 = true;
    }
    pcVar3 = pcVar3 + 0x1c;
  } while ((int)pcVar3 < 0x482b0c);
  do {
    iVar4 = _rand();
    iVar4 = iVar4 % 0xa2;
    uVar6 = (uint)(iVar4 + 1 < 0xe);
    if ((uVar6 == 0) && (iVar4 + -0xc < 2)) {
      uVar6 = 2;
    }
    iVar4 = iVar4 + -0xd;
    uVar7 = uVar6;
    if (uVar6 == 2) {
      uVar6 = _rand();
      if ((uVar6 & 0x3f) != 0) {
        uVar6 = 0;
LAB_004124e2:
        uVar5 = 3;
        do {
          uVar7 = uVar5;
          if (iVar4 < 0xb) break;
          iVar4 = iVar4 + -10;
          uVar5 = uVar5 + 1;
          uVar7 = uVar6;
        } while ((int)uVar5 < 0xf);
      }
    }
    else if (uVar6 == 0) goto LAB_004124e2;
    if ((shock_chain_links_left < 1) || (uVar7 != 7)) {
      if (_config_game_mode == 3) {
        if ((((config_full_version == '\0') || (_quest_stage_major != 3)) &&
            (_quest_stage_major != 2)) || ((_quest_stage_minor != 10 || (uVar7 != 5)))) {
          if ((config_full_version != '\0') && (_quest_stage_major == 2)) {
            if (_quest_stage_minor == 10) {
joined_r0x00412584:
              if (uVar7 == 0xb) goto LAB_00412613;
            }
            goto LAB_0041258a;
          }
          if (_quest_stage_major == 4) {
            if (_quest_stage_minor != 10) goto LAB_0041258a;
            if (uVar7 != 5) goto joined_r0x00412584;
          }
          else if (((_quest_stage_major != 5) || (_quest_stage_minor != 10)) || (uVar7 != 5))
          goto LAB_0041258a;
        }
      }
      else {
LAB_0041258a:
        if ((((_bonus_freeze_timer <= 0.0) || (uVar7 != 0xb)) &&
            ((((player_shield_timer <= 0.0 && (player2_shield_timer <= 0.0)) || (uVar7 != 10)) &&
             ((iVar4 = perk_count_get(perk_id_my_favourite_weapon), iVar4 == 0 || (uVar7 != 3))))))
           && (((iVar4 = perk_count_get(perk_id_death_clock), iVar4 == 0 || (uVar7 != 0xc)) &&
               (((uVar7 != 3 || (!bVar2)) && ((&bonus_meta_enabled)[uVar7 * 0x14] != '\0')))))) {
          return uVar7;
        }
      }
    }
LAB_00412613:
    bVar1 = 99 < local_4;
    local_4 = local_4 + 1;
    if (bVar1) {
      return 1;
    }
  } while( true );
}



/* bonus_metadata_init @ 00412660 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* builds bonus metadata table (labels, descriptions, durations) */

void bonus_metadata_init(void)

{
  uint3 extraout_ECX;
  uint3 extraout_ECX_00;
  uint3 extraout_ECX_01;
  uint3 extraout_ECX_02;
  uint3 extraout_ECX_03;
  uint3 extraout_ECX_04;
  uint3 extraout_ECX_05;
  uint3 extraout_ECX_06;
  uint3 extraout_ECX_07;
  uint3 extraout_ECX_08;
  uint3 extraout_ECX_09;
  uint3 extraout_ECX_10;
  uint3 extraout_ECX_11;
  uint3 extraout_ECX_12;
  
  DAT_004853e4 = strdup_malloc(s_Points_00473604);
  _DAT_004853e8 = FUN_0042fd00(extraout_ECX,s_You_gain_some_experience_points__004735e0,0x100);
  _DAT_004853ec = 0xc;
  _DAT_004853f4 = 500;
  DAT_004853f0 = 1;
  _DAT_0048540c = strdup_malloc(s_Weapon_004735d8);
  _DAT_00485410 = FUN_0042fd00(extraout_ECX_00,s_You_get_a_new_weapon__004735c0,0x100);
  _DAT_00485414 = 0xffffffff;
  _DAT_0048541c = 3;
  _DAT_00485434 = strdup_malloc(&DAT_004735b8);
  _DAT_00485438 = FUN_0042fd00(extraout_ECX_01,s_An_amazing_explosion_of_ATOMIC_p_00473590,0x100);
  _DAT_0048543c = 1;
  DAT_00485448 = strdup_malloc(s_Double_Experience_0047357c);
  _DAT_0048544c = FUN_0042fd00(extraout_ECX_02,s_Every_experience_point_you_get_i_00473534,0x100);
  DAT_00485450 = 4;
  _DAT_00485470 = strdup_malloc(s_Fireblast_00473528);
  _DAT_00485474 = FUN_0042fd00(extraout_ECX_03,s_Fireballs_all_over_the_place__00473508,0x100);
  _DAT_00485478 = 2;
  _DAT_0048545c = strdup_malloc(s_Shock_Chain_004734fc);
  _DAT_00485460 = FUN_0042fd00(extraout_ECX_04,s_Chain_of_shocks_shock_the_crowd__004734d8,0x100);
  _DAT_00485464 = 3;
  DAT_00485484 = strdup_malloc(s_Reflex_Boost_004734c8);
  _DAT_00485488 = FUN_0042fd00(extraout_ECX_05,s_You_get_more_time_to_react_as_th_00473494,0x100);
  DAT_0048548c = 5;
  _DAT_00485494 = 3;
  DAT_00485498 = strdup_malloc(s_Shield_0047348c);
  _DAT_0048549c = FUN_0042fd00(extraout_ECX_06,s_Force_field_protects_you_for_a_w_00473464,0x100);
  DAT_004854a0 = 6;
  _DAT_004854a8 = 7;
  DAT_004854ac = strdup_malloc(s_Freeze_0047345c);
  _DAT_004854b0 = FUN_0042fd00(extraout_ECX_07,s_Monsters_are_frozen__00473444,0x100);
  DAT_004854b4 = 8;
  _DAT_004854bc = 5;
  DAT_004854d4 = strdup_malloc(s_Speed_0047343c);
  _DAT_004854d8 = FUN_0042fd00(extraout_ECX_08,s_Your_movement_speed_increases_fo_00473410,0x100);
  DAT_004854dc = 9;
  _DAT_004854e4 = 8;
  DAT_004853f8 = strdup_malloc(s_Energizer_00473404);
  _DAT_004853fc = FUN_0042fd00(extraout_ECX_09,s_Suddenly_monsters_run_away_from_y_004733c8,0x100);
  DAT_00485400 = 10;
  _DAT_00485408 = 8;
  DAT_00485420 = strdup_malloc(s_Weapon_Power_Up_004733b8);
  _DAT_00485424 = FUN_0042fd00(extraout_ECX_10,s_Your_firerate_and_load_time_incr_0047337c,0x100);
  DAT_00485428 = 7;
  _DAT_00485430 = 10;
  DAT_004854e8 = strdup_malloc(s_Fire_Bullets_0047336c);
  _DAT_004854ec = FUN_0042fd00(extraout_ECX_11,s_For_few_seconds____make_them_cou_00473348,0x100);
  DAT_004854f0 = 0xb;
  _DAT_004854f8 = 4;
  _DAT_004854c0 = strdup_malloc(s_MediKit_00473340);
  _DAT_004854c4 =
       FUN_0042fd00(extraout_ECX_12,s__You_regain_some_of_your_health__0047331b + 1,0x100);
  _DAT_004854d0 = 10;
  _DAT_004854c8 = 0xe;
  return;
}



/* FUN_00412940 @ 00412940 */

void FUN_00412940(void)

{
  undefined1 *puVar1;
  
  puVar1 = &bonus_meta_enabled;
  do {
    *puVar1 = 1;
    puVar1 = puVar1 + 0x14;
  } while ((int)puVar1 < 0x485508);
  bonus_meta_enabled = 0;
  return;
}



/* game_mode_label @ 00412960 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* returns a display label for the current game mode */

char * game_mode_label(void)

{
  char cVar1;
  uint uVar2;
  uint uVar3;
  char *pcVar4;
  char *pcVar5;
  
  if (_config_game_mode == 2) {
    pcVar4 = &DAT_00473614;
  }
  else {
    if (_config_game_mode == 1) {
      uVar2 = 0xffffffff;
      pcVar4 = s_Survival_004720ac;
      do {
        pcVar5 = pcVar4;
        if (uVar2 == 0) break;
        uVar2 = uVar2 - 1;
        pcVar5 = pcVar4 + 1;
        cVar1 = *pcVar4;
        pcVar4 = pcVar5;
      } while (cVar1 != '\0');
      uVar2 = ~uVar2;
      pcVar4 = pcVar5 + -uVar2;
      pcVar5 = (char *)&DAT_004854fc;
      for (uVar3 = uVar2 >> 2; uVar3 != 0; uVar3 = uVar3 - 1) {
        *(undefined4 *)pcVar5 = *(undefined4 *)pcVar4;
        pcVar4 = pcVar4 + 4;
        pcVar5 = pcVar5 + 4;
      }
      for (uVar2 = uVar2 & 3; uVar2 != 0; uVar2 = uVar2 - 1) {
        *pcVar5 = *pcVar4;
        pcVar4 = pcVar4 + 1;
        pcVar5 = pcVar5 + 1;
      }
      return (char *)&DAT_004854fc;
    }
    if (_config_game_mode == 3) {
      pcVar4 = s_Quests_0047360c;
    }
    else {
      if (_config_game_mode == 4) {
        uVar2 = 0xffffffff;
        pcVar4 = s_Typ_o_Shooter_00472090;
        do {
          pcVar5 = pcVar4;
          if (uVar2 == 0) break;
          uVar2 = uVar2 - 1;
          pcVar5 = pcVar4 + 1;
          cVar1 = *pcVar4;
          pcVar4 = pcVar5;
        } while (cVar1 != '\0');
        uVar2 = ~uVar2;
        pcVar4 = pcVar5 + -uVar2;
        pcVar5 = (char *)&DAT_004854fc;
        for (uVar3 = uVar2 >> 2; uVar3 != 0; uVar3 = uVar3 - 1) {
          *(undefined4 *)pcVar5 = *(undefined4 *)pcVar4;
          pcVar4 = pcVar4 + 4;
          pcVar5 = pcVar5 + 4;
        }
        for (uVar2 = uVar2 & 3; uVar2 != 0; uVar2 = uVar2 - 1) {
          *pcVar5 = *pcVar4;
          pcVar4 = pcVar4 + 1;
          pcVar5 = pcVar5 + 1;
        }
        return (char *)&DAT_004854fc;
      }
      pcVar4 = s_Unknown_004714a0;
    }
  }
  uVar2 = 0xffffffff;
  do {
    pcVar5 = pcVar4;
    if (uVar2 == 0) break;
    uVar2 = uVar2 - 1;
    pcVar5 = pcVar4 + 1;
    cVar1 = *pcVar4;
    pcVar4 = pcVar5;
  } while (cVar1 != '\0');
  uVar2 = ~uVar2;
  pcVar4 = pcVar5 + -uVar2;
  pcVar5 = (char *)&DAT_004854fc;
  for (uVar3 = uVar2 >> 2; uVar3 != 0; uVar3 = uVar3 - 1) {
    *(undefined4 *)pcVar5 = *(undefined4 *)pcVar4;
    pcVar4 = pcVar4 + 4;
    pcVar5 = pcVar5 + 4;
  }
  for (uVar2 = uVar2 & 3; uVar2 != 0; uVar2 = uVar2 - 1) {
    *pcVar5 = *pcVar4;
    pcVar4 = pcVar4 + 1;
    pcVar5 = pcVar5 + 1;
  }
  return (char *)&DAT_004854fc;
}



/* game_sequence_load @ 00412a10 */

/* reads the sequence value from registry */

void game_sequence_load(void)

{
  LONG LVar1;
  HKEY local_8;
  uint local_4;
  
  LVar1 = RegCreateKeyExA((HKEY)0x80000002,(LPCSTR)&DAT_004852d0,0,(LPSTR)0x0,0,0xf003f,
                          (LPSECURITY_ATTRIBUTES)0x0,(PHKEY)&local_8,(LPDWORD)0x0);
  if (LVar1 == 0) {
    reg_read_dword_default(local_8,s_sequence_0047361c,&local_4,0);
    if (game_sequence_id < local_4) {
      game_sequence_id = local_4;
    }
    RegCloseKey((HKEY)local_8);
  }
  return;
}



/* game_save_status @ 00412a80 */

/* writes registry state and saves status file */

void game_save_status(void)

{
  char cVar1;
  LONG LVar2;
  char *path;
  FILE *fp;
  char cVar3;
  int iVar4;
  int iVar5;
  uint uVar6;
  char *mode;
  HKEY local_8;
  int local_4;
  
  LVar2 = RegCreateKeyExA((HKEY)0x80000002,(LPCSTR)&DAT_004852d0,0,(LPSTR)0x0,0,0xf003f,
                          (LPSECURITY_ATTRIBUTES)0x0,(PHKEY)&local_8,(LPDWORD)0x0);
  uVar6 = game_sequence_id;
  if (LVar2 == 0) {
    reg_write_dword(local_8,s_sequence_0047361c,game_sequence_id);
    reg_write_dword(local_8,s_dataPathId_0047367c,uVar6 * 0xd + 3 >> 1);
    reg_write_dword(local_8,s_transferFailed_0047366c,0);
    RegCloseKey((HKEY)local_8);
  }
  mode = &file_mode_write_binary;
  path = game_build_path(game_status_filename);
  fp = crt_fopen(path,mode);
  if (fp != (FILE *)0x0) {
    game_status_blob._0_2_ = (undefined2)quest_unlock_index;
    local_4 = 0;
    iVar4 = 0;
    game_status_blob._2_2_ = (undefined2)quest_unlock_index_full;
    uVar6 = 0;
    do {
      cVar1 = *(char *)((int)&game_status_blob + iVar4);
      iVar5 = (cVar1 * 7 + iVar4) * (int)cVar1 + uVar6;
      cVar3 = (char)iVar4;
      uVar6 = uVar6 + 0x6f;
      local_4 = local_4 + 0xd + iVar5;
      *(char *)((int)&game_status_blob + iVar4) =
           ((cVar3 * '\a' + '\x0f') * cVar3 + '\x03') * cVar3 + cVar1 + 'o';
      iVar4 = iVar4 + 1;
    } while (uVar6 < 0x10b18);
    crt_fwrite(&game_status_blob,0x268,1,fp);
    crt_fwrite(&local_4,4,1,fp);
    crt_fclose(fp);
    if (*(float *)(DAT_00480864 + 0xc) != 0.0) {
      console_printf(&console_log_queue,(byte *)s_GAME_SaveStatus_OK__00473644);
    }
    game_load_status();
    game_sequence_load();
    game_sequence_load();
    return;
  }
  console_printf(&console_log_queue,(byte *)s_GAME_SaveStatus_FAILED__00473628);
  game_sequence_load();
  return;
}



/* game_load_status @ 00412c10 */

/* loads status file; regenerates on failure */

void game_load_status(void)

{
  char cVar1;
  char *path;
  FILE *fp;
  long lVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  int iVar6;
  char *mode;
  int local_4;
  
  mode = &file_mode_read_binary;
  path = game_build_path(game_status_filename);
  fp = crt_fopen(path,mode);
  uVar5 = 0;
  if (fp == (FILE *)0x0) {
    console_printf(&console_log_queue,(byte *)s_GAME_LoadStatus_FAILED__004736a0);
    console_printf(&console_log_queue,(byte *)s_Generating_new_file___00473688);
    game_status_blob = 0;
    game_sequence_load();
    game_save_status();
    game_sequence_load();
  }
  else {
    crt_fseek(fp,0,2);
    lVar2 = crt_ftell(fp);
    if (lVar2 != 0x26c) {
      crt_fclose(fp);
      console_printf(&console_log_queue,(byte *)s_GAME_LoadStatus_FAILED__invalid_f_00473700);
      game_sequence_load();
      return;
    }
    crt_fseek(fp,0,0);
    crt_fread(&game_status_blob,0x268,1,fp);
    local_4 = 0;
    crt_fread(&local_4,4,1,fp);
    iVar6 = 0;
    iVar3 = 0;
    do {
      cVar1 = (char)iVar3;
      cVar1 = *(char *)((int)&game_status_blob + iVar3) +
              (-0x6f - ((cVar1 * '\a' + '\x0f') * cVar1 + '\x03') * cVar1);
      *(char *)((int)&game_status_blob + iVar3) = cVar1;
      iVar4 = (cVar1 * 7 + iVar3) * (int)cVar1 + uVar5;
      uVar5 = uVar5 + 0x6f;
      iVar3 = iVar3 + 1;
      iVar6 = iVar6 + 0xd + iVar4;
    } while (uVar5 < 0x10b18);
    if (iVar6 != local_4) {
      crt_fclose(fp);
      console_printf(&console_log_queue,(byte *)s_GAME_LoadStatus_FAILED__check_su_004736d4);
      game_sequence_load();
      return;
    }
    quest_unlock_index_full = game_status_blob >> 0x10;
    quest_unlock_index = game_status_blob & 0xffff;
    crt_fclose(fp);
    if (*(float *)(DAT_00480864 + 0xc) != 0.0) {
      console_printf(&console_log_queue,(byte *)s_GAME_LoadStatus_OK__004736bc);
      return;
    }
  }
  return;
}



/* gameplay_reset_state @ 00412dc0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* resets gameplay/session globals, pools, and availability tables */

void gameplay_reset_state(void)

{
  undefined4 *puVar1;
  undefined1 *puVar2;
  int iVar3;
  int iVar4;
  undefined1 *puVar5;
  
  puVar1 = &bonus_hud_slot_y;
  DAT_0048727c = 0;
  do {
    puVar1[6] = 0x40a00000;
    *(undefined1 *)(puVar1 + -1) = 0;
    *puVar1 = 0;
    puVar1[5] = 1;
    puVar1[4] = s_Empty_00473764;
    puVar1[1] = 0x3f800000;
    puVar1 = puVar1 + 8;
  } while ((int)puVar1 < 0x48f78c);
  quest_spawn_timeline = 0;
  shock_chain_links_left = 0;
  DAT_00486fb8 = 1;
  creature_spawned_count = 0;
  survival_recent_death_count = 0;
  survival_reward_damage_seen = 0;
  survival_reward_fire_seen = 0;
  DAT_00486fa9 = 1;
  survival_reward_handout_enabled = 1;
  tutorial_stage_index = 0xffffffff;
  tutorial_stage_timer = 0;
  tutorial_stage_transition_timer = 0xfffffc18;
  DAT_00487088 = 0xffffffff;
  _bonus_double_xp_timer = 0;
  survival_spawn_stage = 0;
  camera_shake_pulses = 0;
  FUN_00412940();
  _DAT_00482940 = 6;
  _creature_type_texture = (**(code **)(*grim_interface_ptr + 0xc0))(s_zombie_0047375c);
  _creature_type_sfx_b0 = sfx_zombie_attack_01;
  _creature_type_sfx_b1 = sfx_zombie_attack_02;
  _creature_type_sfx_a0 = sfx_zombie_die_01;
  _creature_type_sfx_a1 = sfx_zombie_die_02;
  _DAT_00482748 = 0x3f800000;
  _creature_type_anim_rate = 0x3f99999a;
  _creature_type_sfx_a2 = sfx_zombie_die_03;
  _creature_type_sfx_a3 = sfx_zombie_die_04;
  _creature_type_base_frame = 0x20;
  _creature_type_corpse_frame = 0;
  _DAT_0048276c = (**(code **)(*grim_interface_ptr + 0xc0))(s_lizard_00473754);
  _DAT_00482784 = sfx_lizard_attack_02;
  _DAT_00482780 = sfx_lizard_attack_01;
  _DAT_00482770 = sfx_lizard_die_01;
  _DAT_00482778 = sfx_lizard_die_03;
  _DAT_0048278c = 0x3f800000;
  _DAT_004827a0 = 0x3fcccccd;
  _DAT_00482774 = sfx_lizard_die_02;
  _DAT_0048277c = sfx_lizard_die_04;
  _DAT_004827ac = 1;
  _DAT_004827a4 = 0x10;
  _DAT_004827a8 = 3;
  _DAT_004827f4 = (**(code **)(*grim_interface_ptr + 0xc0))(s_spider_sp1_00473748);
  _DAT_00482808 = sfx_spider_attack_01;
  _DAT_0048280c = sfx_spider_attack_02;
  _DAT_00482814 = 0x3f800000;
  _DAT_00482828 = 0x3fc00000;
  _DAT_004827f8 = sfx_spider_die_01;
  _DAT_004827fc = sfx_spider_die_02;
  _DAT_00482800 = sfx_spider_die_03;
  _DAT_00482804 = sfx_spider_die_04;
  _DAT_00482834 = 1;
  _DAT_0048282c = 0x10;
  _DAT_00482830 = 1;
  _DAT_00482838 = (**(code **)(*grim_interface_ptr + 0xc0))(s_spider_sp2_0047373c);
  _DAT_00482850 = sfx_spider_attack_02;
  _DAT_0048284c = sfx_spider_attack_01;
  _DAT_0048283c = sfx_spider_die_01;
  _DAT_00482844 = sfx_spider_die_03;
  _DAT_00482858 = 0x3f800000;
  _DAT_0048286c = 0x3fc00000;
  _DAT_00482840 = sfx_spider_die_02;
  _DAT_00482848 = sfx_spider_die_04;
  _DAT_00482878 = 1;
  _DAT_00482870 = 0x10;
  _DAT_00482874 = 2;
  DAT_004827b0 = (**(code **)(*grim_interface_ptr + 0xc0))(s_alien_00473734);
  _DAT_004827c4 = sfx_alien_attack_01;
  _DAT_004827c8 = sfx_alien_attack_02;
  _DAT_004827b4 = sfx_alien_die_01;
  _DAT_004827b8 = sfx_alien_die_02;
  _DAT_004827bc = sfx_alien_die_03;
  _DAT_004827c0 = sfx_alien_die_04;
  _DAT_00482880 = sfx_trooper_die_01;
  _DAT_004827d0 = 0x3f800000;
  _DAT_004827e4 = 0x3faccccd;
  _DAT_004827f0 = 0;
  _DAT_004827e8 = 0x20;
  _DAT_004827ec = 4;
  _DAT_00482884 = sfx_trooper_die_02;
  _DAT_00482888 = sfx_trooper_die_03;
  _DAT_004828b8 = 7;
  DAT_0048287c = (**(code **)(*grim_interface_ptr + 0xc0))(s_trooper_0047372c);
  _camera_offset_x = (float)terrain_texture_width * 0.5;
  perk_choices_dirty = 1;
  bonus_spawn_guard = 0;
  puVar1 = &DAT_0048708c;
  for (iVar4 = 0x40; iVar4 != 0; iVar4 = iVar4 + -1) {
    *puVar1 = 0;
    puVar1 = puVar1 + 1;
  }
  _camera_offset_y = (float)terrain_texture_height * 0.5;
  weapon_table_init();
  weapon_refresh_available();
  perks_rebuild_available();
  effect_defaults_reset();
  perk_pending_count = 0;
  survival_spawn_cooldown = 0;
  creatures_any_active_flag = 0;
  time_scale_active = 0;
  _time_scale_factor = 0x3f800000;
  _bonus_reflex_boost_timer = 0;
  _bonus_weapon_power_up_timer = 0;
  _bonus_energizer_timer = 0;
  plaguebearer_infection_count = 0;
  DAT_00487268 = 0xffffffff;
  highscore_full_version_marker = 0;
  survival_elapsed_ms = 0;
  highscore_score_xp = 0;
  highscore_record_quest_minor = 0;
  highscore_record_quest_major = 0;
  highscore_record_game_mode = 0;
  highscore_record_weapon_id = 0;
  creature_kill_count = 0;
  highscore_record_shots_hit = 0;
  highscore_record_shots_fired = 0;
  highscore_date_checksum = 0;
  highscore_year_offset = 0;
  highscore_month = 0;
  highscore_day = 0;
  highscore_flags = 0;
  _DAT_00487078 = _rand();
  _DAT_00487078 = _DAT_00487078 & 0xfee050f;
  _DAT_004aaf24 = 0;
  _bonus_freeze_timer = 0;
  _DAT_004aaf1c = 0;
  _DAT_004aaf2c = 0xbf800000;
  perk_prompt_timer = 0;
  projectile_reset_pools();
  FUN_0041fc80();
  DAT_004871d0 = 0;
  DAT_004871d4 = 0;
  puVar1 = &player_low_health_timer;
  do {
    puVar1[5] = 0xbf800000;
    puVar1[6] = 0xbf800000;
    *puVar1 = 0x42c80000;
    puVar1[3] = 0;
    puVar1 = puVar1 + 0xd8;
  } while ((int)puVar1 < 0x491280);
  puVar1 = &bonus_pool;
  do {
    *puVar1 = 0;
    puVar1 = puVar1 + 7;
  } while ((int)puVar1 < 0x482b08);
  puVar2 = &projectile_pool;
  do {
    *puVar2 = 0;
    puVar2 = puVar2 + 0x40;
  } while ((int)puVar2 < 0x493eb8);
  puVar2 = &sprite_effect_pool;
  do {
    *puVar2 = 0;
    puVar2 = puVar2 + 0x2c;
  } while ((int)puVar2 < 0x49aa20);
  puVar2 = &secondary_projectile_pool;
  do {
    *puVar2 = 0;
    puVar2 = puVar2 + 0x2c;
  } while ((int)puVar2 < 0x4965d8);
  iVar4 = 0;
  puVar2 = &creature_target_player;
  do {
    iVar3 = _config_player_count;
    *(undefined4 *)(puVar2 + -0x38) = 0;
    puVar2[-0x70] = 0;
    if (iVar3 == 0) {
      *puVar2 = 0;
    }
    else {
      *puVar2 = (char)(iVar4 % iVar3);
    }
    puVar2[-0x68] = 1;
    *(undefined4 *)(puVar2 + 0x1c) = 0;
    iVar3 = _rand();
    puVar5 = puVar2 + 0x98;
    iVar4 = iVar4 + 1;
    *(float *)(puVar2 + 0x24) = (float)(iVar3 % 0x1f);
    puVar2 = puVar5;
  } while ((int)puVar5 < 0x4aa3a8);
  puVar1 = &creature_spawn_slot_owner;
  do {
    *puVar1 = 0;
    puVar1 = puVar1 + 6;
  } while ((int)puVar1 < 0x4852d0);
  fx_queue_rotated = 0;
  fx_queue_count = 0;
  highscore_full_version_marker = 0;
  survival_elapsed_ms = 0;
  highscore_score_xp = 0;
  highscore_record_quest_minor = 0;
  highscore_record_quest_major = 0;
  highscore_record_game_mode = 0;
  highscore_record_weapon_id = 0;
  creature_kill_count = 0;
  highscore_record_shots_hit = 0;
  highscore_record_shots_fired = 0;
  highscore_date_checksum = 0;
  highscore_year_offset = 0;
  highscore_month = 0;
  highscore_day = 0;
  highscore_flags = 0;
  _DAT_00487078 = _rand();
  _DAT_00487078 = _DAT_00487078 & 0xfee050f;
  terrain_generate_random();
  return;
}



/* player_start_reload @ 00413430 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* starts reload for the active player, sets timers, and plays SFX */

void player_start_reload(void)

{
  float fVar1;
  int iVar2;
  int iVar3;
  
  if (((&player_reload_active)[render_overlay_player_index * 0x360] == '\0') ||
     ((iVar3 = perk_count_get(perk_id_ammunition_within), iVar3 == 0 &&
      (iVar3 = perk_count_get(perk_id_regression_bullets), iVar3 == 0)))) {
    iVar3 = render_overlay_player_index * 0x360;
    if ((&player_reload_active)[iVar3] == '\0') {
      sfx_play_panned(*(float *)(&DAT_004d7a8c +
                                (&player_weapon_id)[render_overlay_player_index * 0xd8] * 0x7c));
      iVar3 = render_overlay_player_index * 0x360;
      (&player_reload_active)[iVar3] = 1;
    }
    iVar2 = perk_id_fastloader;
    fVar1 = (float)(&DAT_004d7a78)[*(int *)((int)&player_weapon_id + iVar3) * 0x1f];
    *(float *)((int)&player_reload_timer + iVar3) = fVar1;
    if (0 < (int)(&player_perk_counts)[iVar2]) {
      *(float *)((int)&player_reload_timer + iVar3) = fVar1 * 0.7;
    }
    if (0.0 < _bonus_weapon_power_up_timer) {
      *(float *)((int)&player_reload_timer + iVar3) =
           *(float *)((int)&player_reload_timer + iVar3) * 0.6;
    }
    *(undefined4 *)((int)&player_reload_timer_max + iVar3) =
         *(undefined4 *)((int)&player_reload_timer + iVar3);
  }
  return;
}



/* FUN_00413540 @ 00413540 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __cdecl FUN_00413540(float param_1)

{
  float fVar1;
  int iVar2;
  float fVar3;
  float fVar4;
  
  iVar2 = render_overlay_player_index;
  fVar1 = (float)(&player_heading)[render_overlay_player_index * 0xd8];
  while (fVar1 < 0.0) {
    fVar1 = (float)(&player_heading)[iVar2 * 0xd8] + 6.2831855;
    (&player_heading)[iVar2 * 0xd8] = fVar1;
  }
  fVar1 = (float)(&player_heading)[iVar2 * 0xd8];
  while (6.2831855 < fVar1) {
    fVar1 = (float)(&player_heading)[iVar2 * 0xd8] - 6.2831855;
    (&player_heading)[iVar2 * 0xd8] = fVar1;
  }
  fVar3 = ABS(param_1 - (float)(&player_heading)[iVar2 * 0xd8]);
  fVar1 = (float)(&player_heading)[iVar2 * 0xd8];
  if ((float)(&player_heading)[iVar2 * 0xd8] < param_1) {
    fVar1 = param_1;
  }
  fVar4 = (float)(&player_heading)[iVar2 * 0xd8];
  if (param_1 < (float)(&player_heading)[iVar2 * 0xd8]) {
    fVar4 = param_1;
  }
  fVar4 = ABS((6.2831855 - fVar1) + fVar4);
  fVar1 = fVar4;
  if (fVar3 < fVar4) {
    fVar1 = fVar3;
  }
  if (fVar3 <= fVar4) {
    if ((float)(&player_heading)[iVar2 * 0xd8] < param_1) {
      _DAT_00487198 = frame_dt * fVar1 * 5.0;
      goto LAB_00413686;
    }
  }
  else if (param_1 < (float)(&player_heading)[iVar2 * 0xd8]) {
    _DAT_00487198 = frame_dt * fVar1 * 5.0;
    goto LAB_00413686;
  }
  _DAT_00487198 = frame_dt * fVar1 * -5.0;
LAB_00413686:
  (&player_heading)[iVar2 * 0xd8] = _DAT_00487198 + (float)(&player_heading)[iVar2 * 0xd8];
  return;
}



/* player_update @ 004136b0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* per-player gameplay update: movement, firing, status timers, and effects */

void player_update(void)

{
  float *pfVar1;
  undefined4 uVar2;
  float fVar3;
  undefined1 uVar4;
  bool bVar5;
  bool bVar6;
  int iVar7;
  char cVar8;
  bool bVar9;
  uint uVar10;
  int iVar11;
  int iVar12;
  float *pfVar13;
  char *pcVar14;
  float fVar15;
  float fVar16;
  int iVar17;
  float *pfVar18;
  float10 fVar19;
  float10 fVar20;
  longlong lVar21;
  int type_id;
  int iVar22;
  float *pfVar23;
  float local_44;
  float local_40;
  float local_3c;
  float local_38;
  float local_30 [2];
  float local_28;
  float local_24;
  float local_20;
  float local_1c;
  float local_18;
  float local_14;
  float local_10;
  float local_c;
  undefined4 uStack_8;
  undefined4 uStack_4;
  
  iVar7 = render_overlay_player_index;
  if (DAT_0047eec8 != '\0') {
    return;
  }
  (&DAT_004871f4)[render_overlay_player_index * 2] = ui_mouse_x;
  (&DAT_004871f8)[iVar7 * 2] = ui_mouse_y;
  iVar17 = iVar7 * 0x360;
  local_28 = (float)(&player_pos_x)[iVar7 * 0xd8];
  pfVar18 = (float *)(&player_pos_x + iVar7 * 0xd8);
  local_24 = (float)(&player_pos_y)[iVar7 * 0xd8];
  if ((float)(&player_health)[iVar7 * 0xd8] <= 0.0) {
    (&player_death_timer)[iVar7 * 0xd8] =
         (float)(&player_death_timer)[iVar7 * 0xd8] - frame_dt * 20.0;
    return;
  }
  if (0.0 < (float)(&player_speed_bonus_timer)[iVar7 * 0xd8]) {
    (&player_speed_multiplier)[iVar7 * 0xd8] = (float)(&player_speed_multiplier)[iVar7 * 0xd8] + 1.0
    ;
  }
  if ((((&player_low_health_timer)[iVar7 * 0xd8] != 0x42c80000) &&
      ((float)(&player_health)[iVar7 * 0xd8] < 20.0)) &&
     (fVar16 = (float)(&player_low_health_timer)[iVar7 * 0xd8] - frame_dt,
     (&player_low_health_timer)[iVar7 * 0xd8] = fVar16, fVar16 < 0.0)) {
    fVar19 = (float10)fcos(((float10)(float)(&player_aim_heading)[iVar7 * 0xd8] + (float10)1.5707964
                           ) - (float10)0.5);
    fVar20 = (float10)fsin(((float10)(float)(&player_aim_heading)[iVar7 * 0xd8] + (float10)1.5707964
                           ) - (float10)0.5);
    fVar16 = (float)(&player_aim_heading)[iVar7 * 0xd8];
    local_18 = (float)(fVar19 * (float10)-6.0 + (float10)*pfVar18);
    local_14 = (float)(fVar20 * (float10)-6.0) + (float)(&player_pos_y)[iVar7 * 0xd8];
    FUN_0042eb10(&local_18,fVar16,0.0);
    FUN_0042eb10(&local_18,fVar16,0.0);
    FUN_0042eb10(&local_18,fVar16,0.0);
    uVar10 = _rand();
    sfx_play_panned((float)((uVar10 & 1) + sfx_bloodspill_01));
    (&player_low_health_timer)[iVar7 * 0xd8] = 0x3f800000;
  }
  pfVar1 = (float *)(&player_muzzle_flash_alpha + iVar7 * 0xd8);
  fVar16 = *pfVar1 - (frame_dt + frame_dt);
  *pfVar1 = fVar16;
  if (fVar16 < 0.0) {
    *pfVar1 = 0.0;
  }
  if (_bonus_weapon_power_up_timer <= 0.0) {
    fVar16 = (float)(&player_shot_cooldown)[iVar7 * 0xd8] - frame_dt;
  }
  else {
    fVar16 = (float)(&player_shot_cooldown)[iVar7 * 0xd8] - frame_dt * 1.5;
  }
  (&player_shot_cooldown)[iVar7 * 0xd8] = fVar16;
  if ((float)(&player_shot_cooldown)[iVar7 * 0xd8] < 0.0) {
    (&player_shot_cooldown)[iVar7 * 0xd8] = 0;
  }
  iVar11 = perk_count_get(perk_id_man_bomb);
  if (iVar11 == 0) {
    (&player_man_bomb_timer)[iVar7 * 0xd8] = 0;
  }
  else {
    fVar16 = frame_dt + (float)(&player_man_bomb_timer)[iVar7 * 0xd8];
    (&player_man_bomb_timer)[iVar7 * 0xd8] = fVar16;
    if (_DAT_00473310 < fVar16) {
      if (*(float *)(DAT_0048086c + 0xc) == 0.0) {
        iVar11 = -100;
      }
      else {
        iVar11 = -1 - render_overlay_player_index;
      }
      local_38 = 0.0;
      do {
        iVar22 = iVar11;
        if (((uint)local_38 & 1) == 0) {
          type_id = 0x16;
          iVar12 = _rand();
        }
        else {
          type_id = 0x15;
          iVar12 = _rand();
        }
        projectile_spawn(pfVar18,((float)(int)local_38 * 0.7853982 + (float)(iVar12 % 0x32) * 0.01)
                                 - 0.25,type_id,iVar22);
        local_38 = (float)((int)local_38 + 1);
      } while ((int)local_38 < 8);
      sfx_play_panned(sfx_explosion_small);
      (&player_man_bomb_timer)[iVar7 * 0xd8] =
           (float)(&player_man_bomb_timer)[iVar7 * 0xd8] - _DAT_00473310;
      _DAT_00473310 = 4.0;
    }
  }
  iVar11 = perk_count_get(perk_id_living_fortress);
  if (iVar11 == 0) {
    (&player_living_fortress_timer)[iVar7 * 0xd8] = 0;
  }
  else {
    fVar16 = frame_dt + (float)(&player_living_fortress_timer)[iVar7 * 0xd8];
    (&player_living_fortress_timer)[iVar7 * 0xd8] = fVar16;
    if (30.0 < fVar16) {
      (&player_living_fortress_timer)[iVar7 * 0xd8] = 0x41f00000;
    }
  }
  iVar11 = perk_count_get(perk_id_fire_caugh);
  if (iVar11 == 0) {
    (&player_fire_cough_timer)[iVar7 * 0xd8] = 0;
  }
  else {
    fVar16 = frame_dt + (float)(&player_fire_cough_timer)[iVar7 * 0xd8];
    (&player_fire_cough_timer)[iVar7 * 0xd8] = fVar16;
    if (_DAT_00473314 < fVar16) {
      if (*(float *)(DAT_0048086c + 0xc) == 0.0) {
        local_40 = -NAN;
      }
      else {
        local_40 = (float)(-1 - render_overlay_player_index);
      }
      sfx_play_panned(DAT_004d9050);
      sfx_play_panned(DAT_004d7fd8);
      iVar22 = render_overlay_player_index;
      local_38 = (float)(&player_aim_heading)[iVar7 * 0xd8];
      fVar19 = ((float10)local_38 - (float10)1.5707964) - (float10)0.150915;
      fVar20 = (float10)fcos(fVar19);
      local_1c = (float)(&player_aim_y)[render_overlay_player_index * 0xd8];
      local_20 = (float)(&player_aim_x)[render_overlay_player_index * 0xd8];
      iVar11 = render_overlay_player_index * 0xd8;
      local_18 = (float)(fVar20 * (float10)16.0);
      fVar19 = (float10)fsin(fVar19);
      local_14 = (float)(fVar19 * (float10)16.0);
      local_c = local_1c - (float)(&player_pos_y)[render_overlay_player_index * 0xd8];
      local_10 = local_20 - (float)(&player_pos_x)[iVar11];
      fVar19 = FUN_00417660(&local_10);
      local_30[0] = (float)(fVar19 * (float10)0.5);
      uVar10 = _rand();
      fVar16 = (float)(uVar10 & 0x1ff) * 0.012271847;
      uVar10 = _rand();
      local_44 = (float)(uVar10 & 0x1ff);
      fVar19 = (float10)local_30[0] * (float10)(float)(&player_spread_heat)[iVar22 * 0xd8] *
               (float10)(int)local_44 * (float10)0.001953125;
      fVar20 = (float10)fcos((float10)fVar16);
      local_20 = (float)(fVar20 * fVar19 + (float10)local_20);
      fVar20 = (float10)fsin((float10)fVar16);
      local_1c = (float)(fVar20 * fVar19 + (float10)local_1c);
      pfVar13 = (float *)FUN_00417640(&player_pos_x + iVar11,local_30,&local_20);
      fVar19 = (float10)fpatan((float10)pfVar13[1],(float10)*pfVar13);
      local_30[0] = (float)(fVar19 - (float10)1.5707964);
      local_c = local_14 + (float)(&player_pos_y)[iVar7 * 0xd8];
      local_10 = local_18 + *pfVar18;
      projectile_spawn(&local_10,local_30[0],0x2d,(int)local_40);
      fVar19 = (float10)fcos((float10)local_38);
      local_10 = (float)(fVar19 * (float10)25.0);
      fVar19 = (float10)fsin((float10)local_38);
      local_c = (float)(fVar19 * (float10)25.0);
      local_14 = local_14 + (float)(&player_pos_y)[iVar7 * 0xd8];
      local_18 = local_18 + *pfVar18;
      iVar11 = fx_spawn_sprite(&local_18,&local_10,1.0);
      (&sprite_effect_color_r)[iVar11 * 0xb] = 0x3f000000;
      (&sprite_effect_color_g)[iVar11 * 0xb] = 0x3f000000;
      (&sprite_effect_color_b)[iVar11 * 0xb] = 0x3f000000;
      (&sprite_effect_color_a)[iVar11 * 0xb] = 0x3ed374bc;
      (&player_fire_cough_timer)[iVar7 * 0xd8] =
           (float)(&player_fire_cough_timer)[iVar7 * 0xd8] - _DAT_00473314;
      uVar10 = _rand();
      local_30[0] = (float)(uVar10 & 0x80000003);
      if ((int)local_30[0] < 0) {
        local_30[0] = (float)(((int)local_30[0] - 1U | 0xfffffffc) + 1);
      }
      _DAT_00473314 = (float)(int)local_30[0] + 2.0;
    }
  }
  iVar11 = perk_count_get(perk_id_hot_tempered);
  if (iVar11 == 0) {
    (&player_hot_tempered_timer)[iVar7 * 0xd8] = 0;
  }
  else {
    fVar16 = frame_dt + (float)(&player_hot_tempered_timer)[iVar7 * 0xd8];
    (&player_hot_tempered_timer)[iVar7 * 0xd8] = fVar16;
    if (_DAT_00473318 < fVar16) {
      if (*(float *)(DAT_0048086c + 0xc) == 0.0) {
        iVar11 = -100;
      }
      else {
        iVar11 = -1 - render_overlay_player_index;
      }
      local_38 = 0.0;
      do {
        if (((uint)local_38 & 1) == 0) {
          iVar22 = 0xb;
        }
        else {
          iVar22 = 9;
        }
        projectile_spawn(pfVar18,(float)(int)local_38 * 0.7853982,iVar22,iVar11);
        local_38 = (float)((int)local_38 + 1);
      } while ((int)local_38 < 8);
      sfx_play_panned(sfx_explosion_small);
      (&player_hot_tempered_timer)[iVar7 * 0xd8] =
           (float)(&player_hot_tempered_timer)[iVar7 * 0xd8] - _DAT_00473318;
      uVar10 = _rand();
      local_30[0] = (float)(uVar10 & 0x80000007);
      if ((int)local_30[0] < 0) {
        local_30[0] = (float)(((int)local_30[0] - 1U | 0xfffffff8) + 1);
      }
      _DAT_00473318 = (float)(int)local_30[0] + 2.0;
    }
  }
  if (_DAT_004aaf34 <= 0.0) {
    _DAT_00473a40 = frame_dt * 0.8 + _DAT_00473a40;
    if (1.0 < _DAT_00473a40) {
      _DAT_00473a40 = 1.0;
    }
  }
  else {
    _DAT_00473a40 = _DAT_00473a40 - frame_dt;
    if (_DAT_00473a40 < 0.3) {
      _DAT_00473a40 = 0.3;
    }
  }
  fVar16 = (float)(&player_speed_multiplier)[iVar7 * 0xd8];
  local_18 = 0.0;
  local_14 = 0.0;
  *(undefined4 *)(&player_move_dx + iVar17) = 0;
  *(undefined4 *)(&player_move_dy + iVar17) = 0;
  if (time_scale_active != '\0') {
    frame_dt = (0.6 / _time_scale_factor) * frame_dt;
  }
  pfVar13 = pfVar18;
  if (((demo_mode_active == '\0') && ((&config_player_mode_flags)[render_overlay_player_index] != 5)
      ) && (*(int *)(&config_aim_scheme + render_overlay_player_index * 4) != 5)) {
LAB_00413f2d:
    iVar11 = (&config_player_mode_flags)[render_overlay_player_index];
    if (iVar11 == 5) goto LAB_00414c7f;
    if (iVar11 == 4) {
      cVar8 = (**(code **)(*grim_interface_ptr + 0x80))(config_key_reload);
      if (cVar8 != '\0') {
        local_14 = (float)(&DAT_004871f8)[render_overlay_player_index * 2] - _camera_offset_y;
        local_18 = (float)(&DAT_004871f4)[render_overlay_player_index * 2] - _camera_offset_x;
        (&player_move_target_x)[iVar7 * 0xd8] = local_18;
        (&player_move_target_y)[iVar7 * 0xd8] = local_14;
      }
      if ((&player_move_target_x)[iVar7 * 0xd8] == -0x40800000) {
LAB_0041412c:
        fVar15 = (float)(&player_move_speed)[iVar7 * 0xd8] - frame_dt * 15.0;
        (&player_move_speed)[iVar7 * 0xd8] = fVar15;
        if (fVar15 < 0.0) {
          (&player_move_speed)[iVar7 * 0xd8] = 0;
        }
        pfVar23 = &local_10;
        fVar19 = (float10)fcos((float10)(float)(&player_heading)[iVar7 * 0xd8] - (float10)1.5707964)
        ;
        *(float *)(&player_move_dx + iVar17) =
             (float)(fVar19 * (float10)(float)(&player_move_speed)[iVar7 * 0xd8] * (float10)fVar16 *
                    (float10)25.0);
        fVar19 = (float10)fsin((float10)(float)(&player_heading)[iVar7 * 0xd8] - (float10)1.5707964)
        ;
        *(float *)(&player_move_dy + iVar17) =
             (float)(fVar19 * (float10)(float)(&player_move_speed)[iVar7 * 0xd8] * (float10)fVar16 *
                    (float10)25.0);
        local_c = frame_dt * *(float *)(&player_move_dy + iVar17);
        local_10 = frame_dt * *(float *)(&player_move_dx + iVar17);
        goto LAB_00414f1c;
      }
      fVar19 = (float10)(float)(&player_pos_y)[iVar7 * 0xd8] -
               (float10)(float)(&player_move_target_y)[iVar7 * 0xd8];
      fVar20 = (float10)*pfVar18 - (float10)(float)(&player_move_target_x)[iVar7 * 0xd8];
      if (SQRT(fVar19 * fVar19 + fVar20 * fVar20) <= (float10)20.0) goto LAB_0041412c;
      fVar19 = (float10)fpatan(fVar19,fVar20);
      fVar19 = fVar19 - (float10)1.5707964;
      if (fVar19 < (float10)0.0) {
        do {
          fVar19 = fVar19 + (float10)6.2831855;
        } while (fVar19 < (float10)0.0);
      }
      local_38 = (float)fVar19;
      if (fVar19 == (float10)-1.0) goto LAB_0041412c;
      fVar19 = (float10)FUN_00413540(local_38);
      if ((int)(&player_perk_counts)[perk_id_long_distance_runner] < 1) {
        fVar15 = frame_dt * 5.0 + (float)(&player_move_speed)[iVar7 * 0xd8];
        (&player_move_speed)[iVar7 * 0xd8] = fVar15;
        if (2.0 < fVar15) {
          (&player_move_speed)[iVar7 * 0xd8] = 0x40000000;
        }
      }
      else {
        if ((float)(&player_move_speed)[iVar7 * 0xd8] < 2.0) {
          (&player_move_speed)[iVar7 * 0xd8] =
               frame_dt * 4.0 + (float)(&player_move_speed)[iVar7 * 0xd8];
        }
        fVar15 = frame_dt + (float)(&player_move_speed)[iVar7 * 0xd8];
        (&player_move_speed)[iVar7 * 0xd8] = fVar15;
        if (2.8 < fVar15) {
          (&player_move_speed)[iVar7 * 0xd8] = 0x40333333;
        }
      }
      if (((&player_weapon_id)[iVar7 * 0xd8] == 7) &&
         (0.8 < (float)(&player_move_speed)[iVar7 * 0xd8])) {
        (&player_move_speed)[iVar7 * 0xd8] = 0x3f4ccccd;
      }
      fVar20 = (float10)fcos((float10)(float)(&player_heading)[iVar7 * 0xd8] - (float10)1.5707964);
      *(float *)(&player_move_dx + iVar17) =
           (float)(fVar20 * (float10)(float)(&player_move_speed)[iVar7 * 0xd8] *
                   (float10)(float)((float10)3.1415927 - fVar19) * (float10)fVar16 *
                  (float10)7.957747);
      fVar20 = (float10)fsin((float10)(float)(&player_heading)[iVar7 * 0xd8] - (float10)1.5707964);
      *(float *)(&player_move_dy + iVar17) =
           (float)(fVar20 * (float10)(float)(&player_move_speed)[iVar7 * 0xd8] *
                   (float10)(float)((float10)3.1415927 - fVar19) * (float10)fVar16 *
                  (float10)7.957747);
      local_c = frame_dt * *(float *)(&player_move_dy + iVar17);
      local_10 = frame_dt * *(float *)(&player_move_dx + iVar17);
      goto LAB_00414f13;
    }
    if (iVar11 == 3) {
      fVar19 = (float10)(**(code **)(*grim_interface_ptr + 0x84))
                                  ((&player_axis_move_y)[iVar7 * 0xd8]);
      pfVar13 = (float *)(&player_axis_move_x)[iVar7 * 0xd8];
      fVar20 = (float10)(**(code **)(*grim_interface_ptr + 0x84))();
      local_20 = (float)-fVar20;
      local_1c = local_38;
      if (SQRT(local_38 * local_38 + local_20 * local_20) <= 0.2) {
LAB_00414390:
        fVar16 = (float)(&player_move_speed)[iVar7 * 0xd8] - frame_dt * 15.0;
        (&player_move_speed)[iVar7 * 0xd8] = fVar16;
        if (fVar16 < 0.0) {
          (&player_move_speed)[iVar7 * 0xd8] = 0;
        }
        pfVar23 = &local_10;
        fVar20 = (float10)fcos((float10)(float)(&player_heading)[iVar7 * 0xd8] - (float10)1.5707964)
        ;
        *(float *)(&player_move_dx + iVar17) =
             (float)(fVar20 * (float10)(float)(&player_move_speed)[iVar7 * 0xd8] *
                     (float10)(float)-fVar19 * (float10)25.0);
        fVar20 = (float10)fsin((float10)(float)(&player_heading)[iVar7 * 0xd8] - (float10)1.5707964)
        ;
        *(float *)(&player_move_dy + iVar17) =
             (float)(fVar20 * (float10)(float)(&player_move_speed)[iVar7 * 0xd8] *
                     (float10)(float)-fVar19 * (float10)25.0);
        local_c = frame_dt * *(float *)(&player_move_dy + iVar17);
        local_10 = frame_dt * *(float *)(&player_move_dx + iVar17);
        pfVar13 = pfVar18;
      }
      else {
        pfVar23 = &local_20;
        thunk_FUN_00452f1d();
        fVar20 = (float10)fpatan((float10)local_24,(float10)local_28);
        fVar20 = fVar20 - (float10)1.5707964;
        if (fVar20 < (float10)0.0) {
          do {
            fVar20 = fVar20 + (float10)6.2831855;
          } while (fVar20 < (float10)0.0);
        }
        local_40 = (float)fVar20;
        if (fVar20 == (float10)-1.0) goto LAB_00414390;
        fVar19 = (float10)FUN_00413540(local_40);
        if ((int)(&player_perk_counts)[perk_id_long_distance_runner] < 1) {
          fVar16 = frame_dt * 5.0 + (float)(&player_move_speed)[iVar7 * 0xd8];
          (&player_move_speed)[iVar7 * 0xd8] = fVar16;
          if (2.0 < fVar16) {
            (&player_move_speed)[iVar7 * 0xd8] = 0x40000000;
          }
        }
        else {
          if ((float)(&player_move_speed)[iVar7 * 0xd8] < 2.0) {
            (&player_move_speed)[iVar7 * 0xd8] =
                 frame_dt * 4.0 + (float)(&player_move_speed)[iVar7 * 0xd8];
          }
          fVar16 = frame_dt + (float)(&player_move_speed)[iVar7 * 0xd8];
          (&player_move_speed)[iVar7 * 0xd8] = fVar16;
          if (2.8 < fVar16) {
            (&player_move_speed)[iVar7 * 0xd8] = 0x40333333;
          }
        }
        if (((&player_weapon_id)[iVar7 * 0xd8] == 7) &&
           (0.8 < (float)(&player_move_speed)[iVar7 * 0xd8])) {
          (&player_move_speed)[iVar7 * 0xd8] = 0x3f4ccccd;
        }
        local_40 = (float)((float10)3.1415927 - fVar19);
        fVar19 = (float10)fcos((float10)(float)(&player_heading)[iVar7 * 0xd8] - (float10)1.5707964)
        ;
        *(float *)(&player_move_dx + iVar17) =
             (float)(fVar19 * (float10)(float)(&player_move_speed)[iVar7 * 0xd8] * (float10)local_40
                     * (float10)local_44 * (float10)7.957747);
        fVar19 = (float10)fsin((float10)(float)(&player_heading)[iVar7 * 0xd8] - (float10)1.5707964)
        ;
        *(float *)(&player_move_dy + iVar17) =
             (float)(fVar19 * (float10)(float)(&player_move_speed)[iVar7 * 0xd8] * (float10)local_40
                     * (float10)local_44 * (float10)7.957747);
        local_14 = frame_dt * *(float *)(&player_move_dy + iVar17);
        local_18 = frame_dt * *(float *)(&player_move_dx + iVar17);
      }
      goto LAB_00414f1c;
    }
    if (iVar11 == 1) {
      bVar5 = false;
      if ((float)(&player_turn_speed)[iVar7 * 0xd8] < 1.0) {
        (&player_turn_speed)[iVar7 * 0xd8] = 0x3f800000;
      }
      if (7.0 < (float)(&player_turn_speed)[iVar7 * 0xd8]) {
        (&player_turn_speed)[iVar7 * 0xd8] = 0x40e00000;
      }
      cVar8 = (**(code **)(*grim_interface_ptr + 0x80))((&player_turn_key_left)[iVar7 * 0xd8]);
      if ((cVar8 == '\0') &&
         ((_config_player_count != 1 ||
          (cVar8 = (**(code **)(*grim_interface_ptr + 0x44))(player_alt_turn_key_left & 0xff),
          cVar8 == '\0')))) {
        cVar8 = (**(code **)(*grim_interface_ptr + 0x80))((&player_turn_key_right)[iVar7 * 0xd8]);
        if ((cVar8 != '\0') ||
           ((_config_player_count == 1 &&
            (cVar8 = (**(code **)(*grim_interface_ptr + 0x44))(player_alt_turn_key_right & 0xff),
            cVar8 != '\0')))) {
          fVar16 = frame_dt * 10.0 + (float)(&player_turn_speed)[iVar7 * 0xd8];
          (&player_turn_speed)[iVar7 * 0xd8] = fVar16;
          (&player_heading)[iVar7 * 0xd8] =
               fVar16 * frame_dt * 0.5 + (float)(&player_heading)[iVar7 * 0xd8];
          fVar16 = frame_dt * (float)(&player_turn_speed)[iVar7 * 0xd8] * 0.5 +
                   (float)(&player_aim_heading)[iVar7 * 0xd8];
          goto LAB_00414562;
        }
      }
      else {
        fVar16 = frame_dt * 10.0 + (float)(&player_turn_speed)[iVar7 * 0xd8];
        (&player_turn_speed)[iVar7 * 0xd8] = fVar16;
        (&player_heading)[iVar7 * 0xd8] =
             (float)(&player_heading)[iVar7 * 0xd8] - fVar16 * frame_dt * 0.5;
        fVar16 = (float)(&player_aim_heading)[iVar7 * 0xd8] -
                 frame_dt * (float)(&player_turn_speed)[iVar7 * 0xd8] * 0.5;
LAB_00414562:
        (&player_aim_heading)[iVar7 * 0xd8] = fVar16;
        bVar5 = true;
      }
      cVar8 = (**(code **)(*grim_interface_ptr + 0x80))((&player_move_key_forward)[iVar7 * 0xd8]);
      if ((cVar8 == '\0') &&
         ((_config_player_count != 1 ||
          (cVar8 = (**(code **)(*grim_interface_ptr + 0x44))(player_alt_move_key_forward & 0xff),
          cVar8 == '\0')))) {
        cVar8 = (**(code **)(*grim_interface_ptr + 0x80))((&player_move_key_backward)[iVar7 * 0xd8])
        ;
        if ((cVar8 == '\0') &&
           ((_config_player_count != 1 ||
            (cVar8 = (**(code **)(*grim_interface_ptr + 0x44))(player_alt_move_key_backward & 0xff),
            cVar8 == '\0')))) {
          if (!bVar5) {
            (&player_turn_speed)[iVar7 * 0xd8] = 0x3f800000;
          }
          fVar16 = (float)(&player_move_speed)[iVar7 * 0xd8] - frame_dt * 15.0;
          (&player_move_speed)[iVar7 * 0xd8] = fVar16;
          if (fVar16 < 0.0) {
            (&player_move_speed)[iVar7 * 0xd8] = 0;
          }
          fVar19 = (float10)fcos((float10)(float)(&player_heading)[iVar7 * 0xd8] -
                                 (float10)1.5707964);
          *(float *)(&player_move_dx + iVar17) =
               (float)(fVar19 * (float10)(float)(&player_move_speed)[iVar7 * 0xd8] * (float10)1.0 *
                      (float10)25.0);
          fVar19 = (float10)fsin((float10)(float)(&player_heading)[iVar7 * 0xd8] -
                                 (float10)1.5707964);
          *(float *)(&player_move_dy + iVar17) =
               (float)(fVar19 * (float10)(float)(&player_move_speed)[iVar7 * 0xd8] * (float10)1.0 *
                      (float10)25.0);
          local_c = frame_dt * *(float *)(&player_move_dy + iVar17);
          local_10 = frame_dt * *(float *)(&player_move_dx + iVar17);
        }
        else {
          if ((int)(&player_perk_counts)[perk_id_long_distance_runner] < 1) {
            fVar16 = frame_dt * 5.0 + (float)(&player_move_speed)[iVar7 * 0xd8];
            (&player_move_speed)[iVar7 * 0xd8] = fVar16;
            if (2.0 < fVar16) {
              (&player_move_speed)[iVar7 * 0xd8] = 0x40000000;
            }
          }
          else {
            if ((float)(&player_move_speed)[iVar7 * 0xd8] < 2.0) {
              (&player_move_speed)[iVar7 * 0xd8] =
                   frame_dt * 4.0 + (float)(&player_move_speed)[iVar7 * 0xd8];
            }
            fVar16 = frame_dt + (float)(&player_move_speed)[iVar7 * 0xd8];
            (&player_move_speed)[iVar7 * 0xd8] = fVar16;
            if (2.8 < fVar16) {
              (&player_move_speed)[iVar7 * 0xd8] = 0x40333333;
            }
          }
          local_38 = -1.0;
          fVar19 = (float10)fcos((float10)(float)(&player_heading)[iVar7 * 0xd8] -
                                 (float10)1.5707964);
          *(float *)(&player_move_dx + iVar17) =
               (float)(fVar19 * (float10)(float)(&player_move_speed)[iVar7 * 0xd8] * (float10)1.0 *
                      (float10)-25.0);
          fVar19 = (float10)fsin((float10)(float)(&player_heading)[iVar7 * 0xd8] -
                                 (float10)1.5707964);
          *(float *)(&player_move_dy + iVar17) =
               (float)(fVar19 * (float10)(float)(&player_move_speed)[iVar7 * 0xd8] * (float10)1.0 *
                      (float10)-25.0);
          local_c = frame_dt * *(float *)(&player_move_dy + iVar17);
          local_10 = frame_dt * *(float *)(&player_move_dx + iVar17);
        }
      }
      else {
        if ((int)(&player_perk_counts)[perk_id_long_distance_runner] < 1) {
          fVar16 = frame_dt * 5.0 + (float)(&player_move_speed)[iVar7 * 0xd8];
          (&player_move_speed)[iVar7 * 0xd8] = fVar16;
          if (2.0 < fVar16) {
            (&player_move_speed)[iVar7 * 0xd8] = 0x40000000;
          }
        }
        else {
          if ((float)(&player_move_speed)[iVar7 * 0xd8] < 2.0) {
            (&player_move_speed)[iVar7 * 0xd8] =
                 frame_dt * 4.0 + (float)(&player_move_speed)[iVar7 * 0xd8];
          }
          fVar16 = frame_dt + (float)(&player_move_speed)[iVar7 * 0xd8];
          (&player_move_speed)[iVar7 * 0xd8] = fVar16;
          if (2.8 < fVar16) {
            (&player_move_speed)[iVar7 * 0xd8] = 0x40333333;
          }
        }
        if (((&player_weapon_id)[iVar7 * 0xd8] == 7) &&
           (0.8 < (float)(&player_move_speed)[iVar7 * 0xd8])) {
          (&player_move_speed)[iVar7 * 0xd8] = 0x3f4ccccd;
        }
        fVar19 = (float10)fcos((float10)(float)(&player_heading)[iVar7 * 0xd8] - (float10)1.5707964)
        ;
        *(float *)(&player_move_dx + iVar17) =
             (float)(fVar19 * (float10)(float)(&player_move_speed)[iVar7 * 0xd8] * (float10)1.0 *
                    (float10)25.0);
        fVar19 = (float10)fsin((float10)(float)(&player_heading)[iVar7 * 0xd8] - (float10)1.5707964)
        ;
        *(float *)(&player_move_dy + iVar17) =
             (float)(fVar19 * (float10)(float)(&player_move_speed)[iVar7 * 0xd8] * (float10)1.0 *
                    (float10)25.0);
        local_c = frame_dt * *(float *)(&player_move_dy + iVar17);
        local_10 = frame_dt * *(float *)(&player_move_dx + iVar17);
      }
      FUN_0041e290(render_overlay_player_index,pfVar18,&local_10);
      fVar16 = local_38 * (float)(&player_move_speed)[iVar7 * 0xd8] * frame_dt;
      goto LAB_00414f2d;
    }
    if (iVar11 == 2) {
      local_40 = -1.0;
      cVar8 = (**(code **)(*grim_interface_ptr + 0x80))((&player_turn_key_left)[iVar7 * 0xd8]);
      if ((cVar8 == '\0') && (_config_player_count == 1)) {
        (**(code **)(*grim_interface_ptr + 0x80))(player_alt_turn_key_left);
      }
      cVar8 = (**(code **)(*grim_interface_ptr + 0x80))((&player_turn_key_right)[iVar7 * 0xd8]);
      if ((cVar8 == '\0') && (_config_player_count == 1)) {
        (**(code **)(*grim_interface_ptr + 0x80))(player_alt_turn_key_right);
      }
      cVar8 = (**(code **)(*grim_interface_ptr + 0x80))((&player_move_key_forward)[iVar7 * 0xd8]);
      if ((((cVar8 != '\0') ||
           ((_config_player_count == 1 &&
            (cVar8 = (**(code **)(*grim_interface_ptr + 0x80))(player_alt_move_key_forward),
            cVar8 != '\0')))) &&
          (cVar8 = (**(code **)(*grim_interface_ptr + 0x80))((&player_turn_key_left)[iVar7 * 0xd8]),
          cVar8 == '\0')) &&
         ((((_config_player_count != 1 ||
            (cVar8 = (**(code **)(*grim_interface_ptr + 0x80))(player_alt_turn_key_left),
            cVar8 == '\0')) &&
           (cVar8 = (**(code **)(*grim_interface_ptr + 0x80))
                              ((&player_turn_key_right)[iVar7 * 0xd8]), cVar8 == '\0')) &&
          (_config_player_count == 1)))) {
        (**(code **)(*grim_interface_ptr + 0x80))(player_alt_turn_key_right);
      }
      cVar8 = (**(code **)(*grim_interface_ptr + 0x80))((&player_move_key_backward)[iVar7 * 0xd8]);
      if ((cVar8 == '\0') &&
         ((_config_player_count != 1 ||
          (cVar8 = (**(code **)(*grim_interface_ptr + 0x80))(player_alt_move_key_backward),
          cVar8 == '\0')))) {
        fVar15 = (float)(&player_move_speed)[iVar7 * 0xd8] - frame_dt * 15.0;
        (&player_move_speed)[iVar7 * 0xd8] = fVar15;
        if (fVar15 < 0.0) {
          (&player_move_speed)[iVar7 * 0xd8] = 0;
        }
        fVar19 = (float10)fcos((float10)(float)(&player_heading)[iVar7 * 0xd8] - (float10)1.5707964)
        ;
        *(float *)(&player_move_dx + iVar17) =
             (float)(fVar19 * (float10)(float)(&player_move_speed)[iVar7 * 0xd8] * (float10)fVar16 *
                    (float10)25.0);
        fVar19 = (float10)fsin((float10)(float)(&player_heading)[iVar7 * 0xd8] - (float10)1.5707964)
        ;
        *(float *)(&player_move_dy + iVar17) =
             (float)(fVar19 * (float10)(float)(&player_move_speed)[iVar7 * 0xd8] * (float10)fVar16 *
                    (float10)25.0);
        local_c = frame_dt * *(float *)(&player_move_dy + iVar17);
        local_10 = frame_dt * *(float *)(&player_move_dx + iVar17);
      }
      else {
        cVar8 = (**(code **)(*grim_interface_ptr + 0x80))((&player_turn_key_left)[iVar7 * 0xd8]);
        if ((cVar8 == '\0') &&
           ((_config_player_count != 1 ||
            (cVar8 = (**(code **)(*grim_interface_ptr + 0x80))(player_alt_turn_key_left),
            cVar8 == '\0')))) {
          cVar8 = (**(code **)(*grim_interface_ptr + 0x80))((&player_turn_key_right)[iVar7 * 0xd8]);
          if ((cVar8 == '\0') &&
             ((_config_player_count != 1 ||
              (cVar8 = (**(code **)(*grim_interface_ptr + 0x80))(player_alt_turn_key_right),
              cVar8 == '\0')))) {
            local_40 = 3.1415927;
          }
          else {
            local_40 = 2.3561945;
          }
        }
        else {
          local_40 = 3.926991;
        }
        fVar19 = (float10)FUN_00413540(local_40);
        (&player_aim_heading)[iVar7 * 0xd8] =
             _DAT_00487198 + (float)(&player_aim_heading)[iVar7 * 0xd8];
        if ((int)(&player_perk_counts)[perk_id_long_distance_runner] < 1) {
          fVar15 = frame_dt * 5.0 + (float)(&player_move_speed)[iVar7 * 0xd8];
          (&player_move_speed)[iVar7 * 0xd8] = fVar15;
          if (2.0 < fVar15) {
            (&player_move_speed)[iVar7 * 0xd8] = 0x40000000;
          }
        }
        else {
          if ((float)(&player_move_speed)[iVar7 * 0xd8] < 2.0) {
            (&player_move_speed)[iVar7 * 0xd8] =
                 frame_dt * 4.0 + (float)(&player_move_speed)[iVar7 * 0xd8];
          }
          fVar15 = frame_dt + (float)(&player_move_speed)[iVar7 * 0xd8];
          (&player_move_speed)[iVar7 * 0xd8] = fVar15;
          if (2.8 < fVar15) {
            (&player_move_speed)[iVar7 * 0xd8] = 0x40333333;
          }
        }
        if (((&player_weapon_id)[iVar7 * 0xd8] == 7) &&
           (0.8 < (float)(&player_move_speed)[iVar7 * 0xd8])) {
          (&player_move_speed)[iVar7 * 0xd8] = 0x3f4ccccd;
        }
        fVar20 = (float10)fcos((float10)(float)(&player_heading)[iVar7 * 0xd8] - (float10)1.5707964)
        ;
        *(float *)(&player_move_dx + iVar17) =
             (float)(fVar20 * (float10)(float)(&player_move_speed)[iVar7 * 0xd8] *
                     (float10)(float)((float10)3.1415927 - fVar19) * (float10)fVar16 *
                    (float10)7.957747);
        fVar20 = (float10)fsin((float10)(float)(&player_heading)[iVar7 * 0xd8] - (float10)1.5707964)
        ;
        *(float *)(&player_move_dy + iVar17) =
             (float)(fVar20 * (float10)(float)(&player_move_speed)[iVar7 * 0xd8] *
                     (float10)(float)((float10)3.1415927 - fVar19) * (float10)fVar16 *
                    (float10)7.957747);
        local_c = frame_dt * *(float *)(&player_move_dy + iVar17);
        local_10 = frame_dt * *(float *)(&player_move_dx + iVar17);
      }
      FUN_0041e290(render_overlay_player_index,pfVar18,&local_10);
      (&player_move_phase)[iVar7 * 0xd8] =
           frame_dt * (float)(&player_move_speed)[iVar7 * 0xd8] * 19.0 +
           (float)(&player_move_phase)[iVar7 * 0xd8];
    }
  }
  else {
    if ((int)(&player_auto_target)[iVar7 * 0xd8] < 0) {
      (&player_auto_target)[iVar7 * 0xd8] = 0;
    }
    iVar11 = (&player_auto_target)[iVar7 * 0xd8];
    if (((&creature_pool)[iVar11 * 0x98] == '\0') ||
       ((float)(&creature_health)[iVar11 * 0x26] <= 0.0)) {
      fVar15 = 100000.0;
    }
    else {
      fVar15 = SQRT(((float)(&player_pos_y)[iVar7 * 0xd8] - (float)(&creature_pos_y)[iVar11 * 0x26])
                    * ((float)(&player_pos_y)[iVar7 * 0xd8] -
                      (float)(&creature_pos_y)[iVar11 * 0x26]) +
                    (*pfVar18 - (float)(&creature_pos_x)[iVar11 * 0x26]) *
                    (*pfVar18 - (float)(&creature_pos_x)[iVar11 * 0x26]));
    }
    iVar11 = 0;
    pcVar14 = &creature_pool;
    do {
      if (((*pcVar14 != '\0') && (0.0 < *(float *)(pcVar14 + 0x24))) &&
         (local_30[0] = SQRT(((float)(&player_pos_y)[iVar7 * 0xd8] - *(float *)(pcVar14 + 0x18)) *
                             ((float)(&player_pos_y)[iVar7 * 0xd8] - *(float *)(pcVar14 + 0x18)) +
                             (*pfVar18 - *(float *)(pcVar14 + 0x14)) *
                             (*pfVar18 - *(float *)(pcVar14 + 0x14))), local_30[0] < fVar15 - 64.0))
      {
        (&player_auto_target)[iVar7 * 0xd8] = iVar11;
        fVar15 = local_30[0];
      }
      pcVar14 = pcVar14 + 0x98;
      iVar11 = iVar11 + 1;
    } while ((int)pcVar14 < 0x4aa338);
    if (demo_mode_active == '\0') goto LAB_00413f2d;
LAB_00414c7f:
    if (((int)(&player_auto_target)[iVar7 * 0xd8] < 0) ||
       ((float)(&creature_health)[(&player_auto_target)[iVar7 * 0xd8] * 0x26] <= 0.0)) {
      fVar19 = (float10)fpatan((float10)(float)(&player_pos_y)[iVar7 * 0xd8] - (float10)512.0,
                               (float10)*pfVar18 - (float10)512.0);
      fVar19 = fVar19 + (float10)3.1415927;
    }
    else {
      if (SQRT(((float)(&player_pos_y)[iVar7 * 0xd8] - 512.0) *
               ((float)(&player_pos_y)[iVar7 * 0xd8] - 512.0) +
               (*pfVar18 - 512.0) * (*pfVar18 - 512.0)) <= 300.0) {
        local_14 = (float)(&player_pos_y)[iVar7 * 0xd8] -
                   (float)(&creature_pos_y)[(&player_auto_target)[iVar7 * 0xd8] * 0x26];
        local_18 = *pfVar18 - (float)(&creature_pos_x)[(&player_auto_target)[iVar7 * 0xd8] * 0x26];
      }
      else {
        local_14 = (float)(&player_pos_y)[iVar7 * 0xd8] - 512.0;
        local_18 = *pfVar18 - 512.0;
      }
      fVar19 = (float10)fpatan((float10)local_14,(float10)local_18);
      fVar19 = fVar19 - (float10)1.5707964;
      local_20 = local_18;
      local_1c = local_14;
    }
    if (fVar19 == (float10)-1.0) {
      fVar15 = (float)(&player_move_speed)[iVar7 * 0xd8] - frame_dt * 15.0;
      (&player_move_speed)[iVar7 * 0xd8] = fVar15;
      if (fVar15 < 0.0) {
        (&player_move_speed)[iVar7 * 0xd8] = 0;
      }
      fVar19 = (float10)fcos((float10)(float)(&player_heading)[iVar7 * 0xd8] - (float10)1.5707964);
      *(float *)(&player_move_dx + iVar17) =
           (float)(fVar19 * (float10)(float)(&player_move_speed)[iVar7 * 0xd8] * (float10)fVar16 *
                  (float10)25.0);
      fVar19 = (float10)fsin((float10)(float)(&player_heading)[iVar7 * 0xd8] - (float10)1.5707964);
      *(float *)(&player_move_dy + iVar17) =
           (float)(fVar19 * (float10)(float)(&player_move_speed)[iVar7 * 0xd8] * (float10)fVar16 *
                  (float10)25.0);
      local_c = frame_dt * *(float *)(&player_move_dy + iVar17);
      local_10 = frame_dt * *(float *)(&player_move_dx + iVar17);
LAB_00414f13:
      pfVar23 = &local_10;
    }
    else {
      fVar19 = (float10)FUN_00413540((float)fVar19);
      if ((int)(&player_perk_counts)[perk_id_long_distance_runner] < 1) {
        fVar15 = frame_dt * 5.0 + (float)(&player_move_speed)[iVar7 * 0xd8];
        (&player_move_speed)[iVar7 * 0xd8] = fVar15;
        if (2.0 < fVar15) {
          (&player_move_speed)[iVar7 * 0xd8] = 0x40000000;
        }
      }
      else {
        if ((float)(&player_move_speed)[iVar7 * 0xd8] < 2.0) {
          (&player_move_speed)[iVar7 * 0xd8] =
               frame_dt * 4.0 + (float)(&player_move_speed)[iVar7 * 0xd8];
        }
        fVar15 = frame_dt + (float)(&player_move_speed)[iVar7 * 0xd8];
        (&player_move_speed)[iVar7 * 0xd8] = fVar15;
        if (2.8 < fVar15) {
          (&player_move_speed)[iVar7 * 0xd8] = 0x40333333;
        }
      }
      if (((&player_weapon_id)[iVar7 * 0xd8] == 7) &&
         (0.8 < (float)(&player_move_speed)[iVar7 * 0xd8])) {
        (&player_move_speed)[iVar7 * 0xd8] = 0x3f4ccccd;
      }
      pfVar23 = &local_10;
      fVar20 = (float10)fcos((float10)(float)(&player_heading)[iVar7 * 0xd8] - (float10)1.5707964);
      *(float *)(&player_move_dx + iVar17) =
           (float)(fVar20 * (float10)(float)(&player_move_speed)[iVar7 * 0xd8] *
                   (float10)(float)((float10)3.1415927 - fVar19) * (float10)fVar16 *
                  (float10)7.957747);
      fVar20 = (float10)fsin((float10)(float)(&player_heading)[iVar7 * 0xd8] - (float10)1.5707964);
      *(float *)(&player_move_dy + iVar17) =
           (float)(fVar20 * (float10)(float)(&player_move_speed)[iVar7 * 0xd8] *
                   (float10)(float)((float10)3.1415927 - fVar19) * (float10)fVar16 *
                  (float10)7.957747);
      local_c = frame_dt * *(float *)(&player_move_dy + iVar17);
      local_10 = frame_dt * *(float *)(&player_move_dx + iVar17);
    }
LAB_00414f1c:
    FUN_0041e290(render_overlay_player_index,pfVar13,pfVar23);
    fVar16 = frame_dt * (float)(&player_move_speed)[iVar7 * 0xd8];
LAB_00414f2d:
    (&player_move_phase)[iVar7 * 0xd8] = fVar16 * 19.0 + (float)(&player_move_phase)[iVar7 * 0xd8];
  }
  if (time_scale_active != '\0') {
    frame_dt = _time_scale_factor * frame_dt * 1.6666666;
  }
  iVar11 = perk_count_get(perk_id_sharpshooter);
  if (iVar11 == 0) {
    fVar16 = (float)(&player_spread_heat)[iVar7 * 0xd8] - frame_dt * 0.4;
    (&player_spread_heat)[iVar7 * 0xd8] = fVar16;
    if (fVar16 < 0.01) {
      (&player_spread_heat)[iVar7 * 0xd8] = 0x3c23d70a;
    }
  }
  else {
    fVar16 = (float)(&player_spread_heat)[iVar7 * 0xd8] - (frame_dt + frame_dt);
    (&player_spread_heat)[iVar7 * 0xd8] = fVar16;
    if (fVar16 < 0.25) {
      (&player_spread_heat)[iVar7 * 0xd8] = 0x3e800000;
    }
    (&player_spread_heat)[iVar7 * 0xd8] = 0x3ca3d70a;
  }
  iVar11 = perk_count_get(perk_id_anxious_loader);
  if ((((iVar11 != 0) && (iVar11 = input_primary_just_pressed(), (char)iVar11 != '\0')) &&
      (0.0 < (float)(&player_reload_timer)[iVar7 * 0xd8])) &&
     (fVar16 = (float)(&player_reload_timer)[iVar7 * 0xd8],
     (&player_reload_timer)[iVar7 * 0xd8] = fVar16 - 0.05, fVar16 - 0.05 <= 0.0)) {
    (&player_reload_timer)[iVar7 * 0xd8] = frame_dt * 0.8;
  }
  if (((float)(&player_reload_timer)[iVar7 * 0xd8] - frame_dt < 0.0) &&
     (0.0 <= (float)(&player_reload_timer)[iVar7 * 0xd8])) {
    (&player_ammo)[iVar7 * 0xd8] = (&player_clip_size)[iVar7 * 0xd8];
  }
  local_38 = 1.0;
  if ((*pfVar18 == local_28) && ((float)(&player_pos_y)[iVar7 * 0xd8] == local_24)) {
    iVar11 = perk_count_get(perk_id_stationary_reloader);
    if (iVar11 != 0) {
      local_38 = 3.0;
    }
  }
  else {
    (&player_man_bomb_timer)[iVar7 * 0xd8] = 0;
    (&player_living_fortress_timer)[iVar7 * 0xd8] = 0;
  }
  iVar11 = perk_count_get(perk_id_angry_reloader);
  if (((iVar11 == 0) || ((float)(&player_reload_timer_max)[iVar7 * 0xd8] <= 0.5)) ||
     ((float)(&player_reload_timer)[iVar7 * 0xd8] <=
      (float)(&player_reload_timer_max)[iVar7 * 0xd8] * 0.5)) {
    (&player_reload_timer)[iVar7 * 0xd8] =
         (float)(&player_reload_timer)[iVar7 * 0xd8] - local_38 * frame_dt;
  }
  else {
    fVar16 = (float)(&player_reload_timer)[iVar7 * 0xd8] - local_38 * frame_dt;
    (&player_reload_timer)[iVar7 * 0xd8] = fVar16;
    if (fVar16 <= (float)(&player_reload_timer_max)[iVar7 * 0xd8] * 0.5) {
      bonus_spawn_guard = 1;
      if (*(float *)(DAT_0048086c + 0xc) == 0.0) {
        local_38 = -NAN;
      }
      else {
        local_38 = (float)(-1 - render_overlay_player_index);
      }
      lVar21 = __ftol();
      fVar16 = (float)(7 - (int)lVar21);
      local_3c = 0.0;
      local_30[0] = fVar16;
      if (0 < (int)fVar16) {
        local_30[0] = 6.2831855 / (float)(int)fVar16;
        do {
          projectile_spawn(pfVar18,(float)(int)local_3c * local_30[0] + 0.1,0xb,(int)local_38);
          local_3c = (float)((int)local_3c + 1);
        } while ((int)local_3c < (int)fVar16);
      }
      bonus_spawn_guard = 0;
      sfx_play_panned(sfx_explosion_small);
    }
  }
  if ((float)(&player_reload_timer)[iVar7 * 0xd8] < 0.0) {
    (&player_reload_timer)[iVar7 * 0xd8] = 0;
  }
  if ((((demo_mode_active == '\0') &&
       (iVar11 = perk_count_get(perk_id_alternate_weapon), iVar11 == 0)) &&
      (((&config_player_mode_flags)[render_overlay_player_index] != 4 &&
       ((cVar8 = (**(code **)(*grim_interface_ptr + 0x80))(config_key_reload), cVar8 != '\0' &&
        ((float)(&player_reload_timer)[iVar7 * 0xd8] == 0.0)))))) && (_config_player_count == 1)) {
    player_start_reload();
  }
  bVar5 = false;
  if ((demo_mode_active == '\0') &&
     (iVar11 = *(int *)(&config_aim_scheme + render_overlay_player_index * 4), iVar11 != 5)) {
    if (iVar11 == 0) {
      local_14 = (float)(&DAT_004871f8)[render_overlay_player_index * 2] - _camera_offset_y;
      local_18 = (float)(&DAT_004871f4)[render_overlay_player_index * 2] - _camera_offset_x;
      (&player_aim_x)[iVar7 * 0xd8] = local_18;
      (&player_aim_y)[iVar7 * 0xd8] = local_14;
    }
    else {
      if (iVar11 != 4) {
        if (iVar11 == 3) {
          fVar19 = (float10)(float)(&DAT_004871f8)[render_overlay_player_index * 2] - (float10)200.0
          ;
          local_20 = (float)(&DAT_004871f4)[render_overlay_player_index * 2] - 200.0;
          local_1c = (float)fVar19;
          if ((local_20 != 0.0) || (fVar19 != (float10)0.0)) {
            fVar19 = (float10)fpatan(fVar19,(float10)local_20);
            (&player_aim_heading)[iVar7 * 0xd8] = (float)(fVar19 + (float10)1.5707964);
            fVar19 = (fVar19 + (float10)1.5707964) - (float10)1.5707964;
            local_30[0] = (float)fVar19;
            fVar19 = (float10)fcos(fVar19);
            fVar20 = (float10)fsin((float10)local_30[0]);
            local_c = (float)fVar20;
            local_14 = local_c * 60.0 + (float)(&player_pos_y)[iVar7 * 0xd8];
            local_18 = (float)(fVar19 * (float10)60.0 + (float10)*pfVar18);
            (&player_aim_x)[iVar7 * 0xd8] = local_18;
            (&player_aim_y)[iVar7 * 0xd8] = local_14;
          }
          if (30.0 < SQRT(local_20 * local_20 + local_1c * local_1c)) {
            thunk_FUN_00452f1d();
            iVar11 = render_overlay_player_index;
            local_14 = local_24 * 30.0;
            local_20 = local_28 * 30.0 + 200.0;
            local_1c = local_14 + 200.0;
            (&DAT_004871f4)[render_overlay_player_index * 2] = local_20;
            (&DAT_004871f8)[iVar11 * 2] = local_1c;
          }
        }
        else if (iVar11 == 1) {
          if (((&config_player_mode_flags)[render_overlay_player_index] == 1) ||
             ((&config_player_mode_flags)[render_overlay_player_index] == 2)) {
            cVar8 = (**(code **)(*grim_interface_ptr + 0x80))((&player_aim_key_right)[iVar7 * 0xd8])
            ;
            if (cVar8 != '\0') {
              (&player_aim_heading)[iVar7 * 0xd8] =
                   frame_dt * 3.0 + (float)(&player_aim_heading)[iVar7 * 0xd8];
            }
            cVar8 = (**(code **)(*grim_interface_ptr + 0x80))((&player_aim_key_left)[iVar7 * 0xd8]);
            if (cVar8 != '\0') {
              (&player_aim_heading)[iVar7 * 0xd8] =
                   (float)(&player_aim_heading)[iVar7 * 0xd8] - frame_dt * 3.0;
            }
            local_30[0] = (float)((float10)(float)(&player_aim_heading)[iVar7 * 0xd8] -
                                 (float10)1.5707964);
            fVar19 = (float10)fcos((float10)(float)(&player_aim_heading)[iVar7 * 0xd8] -
                                   (float10)1.5707964);
            fVar20 = (float10)fsin((float10)local_30[0]);
            local_c = (float)fVar20;
            local_14 = local_c * 60.0 + (float)(&player_pos_y)[iVar7 * 0xd8];
            local_18 = (float)(fVar19 * (float10)60.0 + (float10)*pfVar18);
            (&player_aim_x)[iVar7 * 0xd8] = local_18;
            (&player_aim_y)[iVar7 * 0xd8] = local_14;
          }
        }
        else {
          bVar9 = FUN_0041e8d0();
          if (bVar9) {
            (&player_aim_heading)[iVar7 * 0xd8] =
                 (float)(&player_aim_heading)[iVar7 * 0xd8] - frame_dt * 4.0;
          }
          bVar9 = FUN_0041e8f0();
          if (bVar9) {
            (&player_aim_heading)[iVar7 * 0xd8] =
                 frame_dt * 4.0 + (float)(&player_aim_heading)[iVar7 * 0xd8];
          }
          local_30[0] = (float)((float10)(float)(&player_aim_heading)[iVar7 * 0xd8] -
                               (float10)1.5707964);
          fVar19 = (float10)fcos((float10)(float)(&player_aim_heading)[iVar7 * 0xd8] -
                                 (float10)1.5707964);
          fVar20 = (float10)fsin((float10)local_30[0]);
          local_c = (float)fVar20;
          local_14 = local_c * 60.0 + (float)(&player_pos_y)[iVar7 * 0xd8];
          local_18 = (float)(fVar19 * (float10)60.0 + (float10)*pfVar18);
          (&player_aim_x)[iVar7 * 0xd8] = local_18;
          (&player_aim_y)[iVar7 * 0xd8] = local_14;
        }
        goto LAB_0041572e;
      }
      (**(code **)(*grim_interface_ptr + 0x84))((&player_axis_aim_y)[iVar7 * 0xd8]);
      fVar19 = (float10)(**(code **)(*grim_interface_ptr + 0x84))
                                  ((&player_axis_aim_x)[iVar7 * 0xd8]);
      local_18 = (float)fVar19;
      local_14 = local_30[0];
      local_30[0] = SQRT(local_30[0] * local_30[0] + local_18 * local_18);
      if (1.0 < local_30[0]) {
        local_30[0] = 1.0;
      }
      thunk_FUN_00452f1d();
      fVar16 = local_38 * *(float *)(DAT_00480880 + 0xc) + 42.0;
      local_10 = fVar16 * local_20;
      local_14 = fVar16 * local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
      local_18 = local_10 + *pfVar18;
      (&player_aim_x)[iVar7 * 0xd8] = local_18;
      (&player_aim_y)[iVar7 * 0xd8] = local_14;
    }
    fVar19 = (float10)fpatan((float10)(float)(&player_pos_y)[iVar7 * 0xd8] -
                             (float10)(float)(&player_aim_y)[iVar7 * 0xd8],
                             (float10)*pfVar18 - (float10)(float)(&player_aim_x)[iVar7 * 0xd8]);
    (&player_aim_heading)[iVar7 * 0xd8] = (float)(fVar19 - (float10)1.5707964);
  }
  else {
    pfVar13 = (float *)(&player_aim_x + iVar7 * 0xd8);
    local_1c = (float)(&creature_pos_y)[(&player_auto_target)[iVar7 * 0xd8] * 0x26] -
               (float)(&player_aim_y)[iVar7 * 0xd8];
    local_20 = (float)(&creature_pos_x)[(&player_auto_target)[iVar7 * 0xd8] * 0x26] - *pfVar13;
    fVar16 = SQRT(local_1c * local_1c + local_20 * local_20);
    if (4.0 <= fVar16) {
      thunk_FUN_00452f1d();
      fVar15 = local_40 * 6.0 * frame_dt;
      local_18 = local_28 * fVar15;
      *pfVar13 = local_18 + *pfVar13;
      (&player_aim_y)[iVar7 * 0xd8] = fVar15 * local_24 + (float)(&player_aim_y)[iVar7 * 0xd8];
    }
    else {
      *pfVar13 = (float)(&creature_pos_x)[(&player_auto_target)[iVar7 * 0xd8] * 0x26];
      (&player_aim_y)[iVar7 * 0xd8] = (&creature_pos_y)[(&player_auto_target)[iVar7 * 0xd8] * 0x26];
    }
    if ((fVar16 < 128.0) &&
       (0.0 < (float)(&creature_health)[(&player_auto_target)[iVar7 * 0xd8] * 0x26])) {
      bVar5 = true;
    }
  }
LAB_0041572e:
  fVar19 = (float10)fpatan((float10)(float)(&player_pos_y)[iVar7 * 0xd8] -
                           (float10)(float)(&player_aim_y)[iVar7 * 0xd8],
                           (float10)*pfVar18 - (float10)(float)(&player_aim_x)[iVar7 * 0xd8]);
  pfVar13 = (float *)(&player_shot_cooldown + iVar7 * 0xd8);
  bVar9 = false;
  bVar6 = false;
  (&player_aim_heading)[iVar7 * 0xd8] = (float)(fVar19 - (float10)1.5707964);
  if ((*pfVar13 <= 0.0) && ((float)(&player_reload_timer)[iVar7 * 0xd8] == 0.0)) {
    bVar9 = true;
    (&player_reload_active)[iVar17] = 0;
  }
  if (((*pfVar13 <= 0.0) && (0 < (int)(&player_experience)[iVar7 * 0xd8])) &&
     ((iVar11 = perk_count_get(perk_id_regression_bullets), iVar11 != 0 ||
      (iVar11 = perk_count_get(perk_id_ammunition_within), iVar11 != 0)))) {
    bVar6 = true;
  }
  iVar11 = perk_count_get(perk_id_alternate_weapon);
  if (iVar11 != 0) {
    if (((DAT_0048719c < 1) || (DAT_0048719c = DAT_0048719c - frame_dt_ms, DAT_0048719c < 1)) &&
       (cVar8 = (**(code **)(*grim_interface_ptr + 0x80))(config_key_reload), cVar8 != '\0')) {
      iVar11 = (&player_alt_weapon_id)[iVar7 * 0xd8];
      (&player_alt_weapon_id)[iVar7 * 0xd8] = (&player_weapon_id)[iVar7 * 0xd8];
      (&player_weapon_id)[iVar7 * 0xd8] = iVar11;
      uVar2 = (&player_alt_clip_size)[iVar7 * 0xd8];
      (&player_alt_clip_size)[iVar7 * 0xd8] = (&player_clip_size)[iVar7 * 0xd8];
      (&player_clip_size)[iVar7 * 0xd8] = uVar2;
      uVar4 = (&player_alt_reload_active)[iVar17];
      (&player_alt_reload_active)[iVar17] = (&player_reload_active)[iVar17];
      (&player_reload_active)[iVar17] = uVar4;
      uVar2 = (&player_alt_ammo)[iVar7 * 0xd8];
      (&player_alt_ammo)[iVar7 * 0xd8] = (&player_ammo)[iVar7 * 0xd8];
      (&player_ammo)[iVar7 * 0xd8] = uVar2;
      uVar2 = (&player_alt_reload_timer)[iVar7 * 0xd8];
      (&player_alt_reload_timer)[iVar7 * 0xd8] = (&player_reload_timer)[iVar7 * 0xd8];
      (&player_reload_timer)[iVar7 * 0xd8] = uVar2;
      fVar16 = (float)(&player_alt_shot_cooldown)[iVar7 * 0xd8];
      (&player_alt_shot_cooldown)[iVar7 * 0xd8] = *pfVar13;
      *pfVar13 = fVar16;
      uVar2 = (&player_alt_reload_timer_max)[iVar7 * 0xd8];
      (&player_alt_reload_timer_max)[iVar7 * 0xd8] = (&player_reload_timer_max)[iVar7 * 0xd8];
      (&player_reload_timer_max)[iVar7 * 0xd8] = uVar2;
      sfx_play_panned(*(float *)(&DAT_004d7a8c + (&player_weapon_id)[iVar7 * 0xd8] * 0x7c));
      *pfVar13 = *pfVar13 + 0.1;
      DAT_0048719c = 200;
    }
    else {
      cVar8 = (**(code **)(*grim_interface_ptr + 0x80))(config_key_reload);
      if (cVar8 == '\0') {
        DAT_0048719c = 0;
      }
    }
  }
  if ((!bVar9) && (!bVar6)) goto LAB_0041753e;
  fVar16 = (float)(&player_aim_heading)[iVar7 * 0xd8];
  cVar8 = (**(code **)(*grim_interface_ptr + 0x80))((&player_fire_key)[iVar7 * 0xd8]);
  if ((cVar8 == '\0') && (!bVar5)) goto LAB_0041753e;
  survival_reward_fire_seen = 1;
  if (!bVar9) {
    iVar11 = perk_count_get(perk_id_regression_bullets);
    if (iVar11 == 0) {
      iVar11 = perk_count_get(perk_id_ammunition_within);
      if (iVar11 != 0) {
        if ((&weapon_ammo_class)[(&player_weapon_id)[iVar7 * 0xd8] * 0x1f] == 1) {
          fVar15 = 0.15;
        }
        else {
          fVar15 = 1.0;
        }
        player_take_damage(render_overlay_player_index,fVar15);
      }
    }
    else if ((&weapon_ammo_class)[(&player_weapon_id)[iVar7 * 0xd8] * 0x1f] == 1) {
      lVar21 = __ftol();
      (&player_experience)[iVar7 * 0xd8] = (int)lVar21;
    }
    else {
      lVar21 = __ftol();
      (&player_experience)[iVar7 * 0xd8] = (int)lVar21;
    }
    if ((int)(&player_experience)[iVar7 * 0xd8] < 0) {
      (&player_experience)[iVar7 * 0xd8] = 0;
    }
  }
  fVar15 = (float)((float10)fVar16 - (float10)1.5707964);
  fVar19 = ((float10)fVar16 - (float10)1.5707964) - (float10)0.150915;
  fVar20 = (float10)fcos(fVar19);
  local_20 = (float)(fVar20 * (float10)16.0);
  fVar19 = (float10)fsin(fVar19);
  local_1c = (float)(fVar19 * (float10)16.0);
  if ((*(byte *)(&DAT_004d7a94 + (&player_weapon_id)[iVar7 * 0xd8] * 0x1f) & 1) != 0) {
    uVar10 = _rand();
    local_30[0] = (float)(uVar10 & 0x3f);
    fVar3 = (float)(int)local_30[0] * 0.01 + fVar16;
    uVar10 = _rand();
    local_30[0] = (float)(uVar10 & 0x3f);
    local_10 = 1.0;
    local_c = 1.0;
    uStack_8 = 0x3f800000;
    uStack_4 = 0x3f19999a;
    _effect_template_color_r = 0x3f800000;
    _effect_template_flags = 0x1c5;
    fVar19 = (float10)(int)local_30[0] * (float10)0.022727273 + (float10)1.0;
    fVar20 = (float10)fcos((float10)fVar3);
    _effect_template_color_g = 0x3f800000;
    _effect_template_color_b = 0x3f800000;
    _effect_template_color_a = 0x3f19999a;
    _effect_template_lifetime = 0x3e19999a;
    _effect_template_age = 0;
    local_18 = (float)(fVar20 * fVar19);
    fVar20 = (float10)fsin((float10)fVar3);
    local_14 = (float)(fVar20 * fVar19);
    uVar10 = _rand();
    _effect_template_half_height = 0x40000000;
    local_30[0] = (float)((uVar10 & 0x3f) - 0x20);
    _effect_template_half_width = 0x40000000;
    _effect_template_rotation = (float)(int)local_30[0] * 0.1;
    effect_template_vel_x = local_18 * 100.0;
    effect_template_vel_y = local_14 * 100.0;
    iVar11 = _rand();
    _effect_template_scale_step = 0;
    local_30[0] = (float)(iVar11 % 0x14);
    _effect_template_rotation_step = ((float)(int)local_30[0] * 0.1 - 1.0) * 14.0;
    local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
    local_10 = local_20 + *pfVar18;
    effect_spawn(0x12,&local_10);
  }
  if (1.0 < *pfVar1) {
    *pfVar1 = 1.0;
  }
  iVar11 = render_overlay_player_index;
  local_38 = 1.0;
  if (*(float *)(DAT_0048086c + 0xc) == 0.0) {
    iVar22 = -100;
  }
  else {
    iVar22 = -1 - render_overlay_player_index;
  }
  local_14 = (float)(&player_aim_y)[render_overlay_player_index * 0xd8];
  local_18 = (float)(&player_aim_x)[render_overlay_player_index * 0xd8];
  local_c = local_14 - (float)(&player_pos_y)[render_overlay_player_index * 0xd8];
  local_10 = local_18 - (float)(&player_pos_x)[render_overlay_player_index * 0xd8];
  fVar19 = FUN_00417660(&local_10);
  local_28 = (float)(fVar19 * (float10)0.5);
  uVar10 = _rand();
  local_30[0] = (float)(uVar10 & 0x1ff);
  fVar3 = (float)(int)local_30[0];
  uVar10 = _rand();
  local_30[0] = (float)(uVar10 & 0x1ff);
  fVar19 = (float10)local_28 * (float10)(float)(&player_spread_heat)[iVar11 * 0xd8] *
           (float10)(int)local_30[0] * (float10)0.001953125;
  fVar20 = (float10)fcos((float10)(fVar3 * 0.012271847));
  local_18 = (float)(fVar20 * fVar19 + (float10)local_18);
  fVar20 = (float10)fsin((float10)(fVar3 * 0.012271847));
  fVar19 = (float10)fpatan((float10)(float)(&player_pos_y)[iVar11 * 0xd8] -
                           (fVar20 * fVar19 + (float10)local_14),
                           (float10)(float)(&player_pos_x)[iVar11 * 0xd8] - (float10)local_18);
  fVar3 = (float)(fVar19 - (float10)1.5707964);
  cVar8 = (**(code **)(*grim_interface_ptr + 0x80))(0x22);
  if (cVar8 != '\0') {
    (&player_fire_bullets_timer)[iVar7 * 0xd8] = 0x41200000;
  }
  if ((float)(&player_fire_bullets_timer)[iVar7 * 0xd8] <= 0.0) {
    (&player_shot_cooldown)[iVar7 * 0xd8] =
         (&DAT_004d7a74)[(&player_weapon_id)[iVar7 * 0xd8] * 0x1f];
    *pfVar1 = (float)(&DAT_004d7a7c)[(&player_weapon_id)[iVar7 * 0xd8] * 0x1f] + *pfVar1;
    iVar11 = (&player_weapon_id)[iVar7 * 0xd8];
    iVar12 = _rand();
    sfx_play_panned((float)(iVar12 % (int)(&DAT_004d7a88)[iVar11 * 0x1f] +
                           *(int *)(&DAT_004d7a84 + iVar11 * 0x7c)));
    iVar11 = (&player_weapon_id)[iVar7 * 0xd8];
    if (iVar11 == 0x18) {
      local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
      local_10 = local_20 + *pfVar18;
      projectile_spawn(&local_10,fVar3,0x18,iVar22);
      fVar19 = (float10)fcos((float10)fVar16);
      local_10 = (float)(fVar19 * (float10)25.0);
      fVar20 = (float10)fsin((float10)fVar16);
      local_c = (float)(fVar20 * (float10)25.0);
      local_14 = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
      local_18 = local_20 + *pfVar18;
      iVar17 = fx_spawn_sprite(&local_18,&local_10,1.0);
      (&sprite_effect_color_r)[iVar17 * 0xb] = 0x3f000000;
      (&sprite_effect_color_g)[iVar17 * 0xb] = 0x3f000000;
      (&sprite_effect_color_b)[iVar17 * 0xb] = 0x3f000000;
      (&sprite_effect_color_a)[iVar17 * 0xb] = 0x3e6b851f;
      local_14 = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
      local_18 = local_20 + *pfVar18;
LAB_0041600e:
      local_3c = (float)fVar20;
      local_40 = (float)fVar19;
      local_c = local_3c * 15.0;
      local_10 = local_40 * 15.0;
      iVar17 = fx_spawn_sprite(&local_18,&local_10,2.0);
      (&sprite_effect_color_r)[iVar17 * 0xb] = 0x3f000000;
      (&sprite_effect_color_g)[iVar17 * 0xb] = 0x3f000000;
      (&sprite_effect_color_b)[iVar17 * 0xb] = 0x3f000000;
      (&sprite_effect_color_a)[iVar17 * 0xb] = 0x3e5a1cac;
    }
    else {
      if (iVar11 == 1) {
        local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_10 = local_20 + *pfVar18;
        projectile_spawn(&local_10,fVar3,1,iVar22);
        fVar19 = (float10)fcos((float10)fVar16);
        local_10 = (float)(fVar19 * (float10)25.0);
        fVar20 = (float10)fsin((float10)fVar16);
        local_c = (float)(fVar20 * (float10)25.0);
        local_14 = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_18 = local_20 + *pfVar18;
        iVar17 = fx_spawn_sprite(&local_18,&local_10,1.0);
        (&sprite_effect_color_r)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_g)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_b)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_a)[iVar17 * 0xb] = 0x3e6b851f;
        local_14 = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_18 = local_20 + *pfVar18;
        goto LAB_0041600e;
      }
      if (iVar11 == 2) {
        fVar19 = (float10)fcos((float10)fVar16);
        local_10 = (float)(fVar19 * (float10)25.0);
        fVar20 = (float10)fsin((float10)fVar16);
        local_c = (float)(fVar20 * (float10)25.0);
        local_14 = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_18 = local_20 + *pfVar18;
        iVar17 = fx_spawn_sprite(&local_18,&local_10,1.0);
        local_10 = (float)fVar19 * 15.0;
        local_c = (float)fVar20 * 15.0;
        (&sprite_effect_color_r)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_g)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_b)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_a)[iVar17 * 0xb] = 0x3e6b851f;
        local_14 = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_18 = local_20 + *pfVar18;
        iVar17 = fx_spawn_sprite(&local_18,&local_10,2.0);
        (&sprite_effect_color_r)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_g)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_b)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_a)[iVar17 * 0xb] = 0x3e5a1cac;
        local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_10 = local_20 + *pfVar18;
        projectile_spawn(&local_10,fVar3,2,iVar22);
      }
      else if (iVar11 == 3) {
        fVar19 = (float10)fcos((float10)fVar16);
        local_10 = (float)(fVar19 * (float10)25.0);
        fVar20 = (float10)fsin((float10)fVar16);
        local_c = (float)(fVar20 * (float10)25.0);
        local_14 = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_18 = local_20 + *pfVar18;
        iVar17 = fx_spawn_sprite(&local_18,&local_10,1.0);
        local_10 = (float)fVar19 * 15.0;
        local_c = (float)fVar20 * 15.0;
        (&sprite_effect_color_r)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_g)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_b)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_a)[iVar17 * 0xb] = 0x3e800000;
        local_14 = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_18 = local_20 + *pfVar18;
        iVar17 = fx_spawn_sprite(&local_18,&local_10,2.0);
        local_3c = 1.68156e-44;
        (&sprite_effect_color_r)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_g)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_b)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_a)[iVar17 * 0xb] = 0x3e645a1d;
        do {
          iVar12 = 3;
          local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
          local_10 = local_20 + *pfVar18;
          iVar17 = iVar22;
          iVar11 = _rand();
          local_28 = (float)(iVar11 % 200 + -100);
          iVar17 = projectile_spawn(&local_10,(float)(int)local_28 * 0.0013 + fVar3,iVar12,iVar17);
          iVar11 = _rand();
          local_28 = (float)(iVar11 % 100);
          local_3c = (float)((int)local_3c + -1);
          (&projectile_speed_scale)[iVar17 * 0x10] = (float)(int)local_28 * 0.01 + 1.0;
        } while (local_3c != 0.0);
      }
      else if (iVar11 == 0x14) {
        fVar19 = (float10)fcos((float10)fVar16);
        local_10 = (float)(fVar19 * (float10)15.0);
        fVar19 = (float10)fsin((float10)fVar16);
        local_c = (float)(fVar19 * (float10)15.0);
        local_14 = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_18 = local_20 + *pfVar18;
        iVar17 = fx_spawn_sprite(&local_18,&local_10,2.0);
        local_3c = 5.60519e-45;
        (&sprite_effect_color_r)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_g)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_b)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_a)[iVar17 * 0xb] = 0x3e645a1d;
        do {
          iVar12 = 3;
          local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
          local_10 = local_20 + *pfVar18;
          iVar17 = iVar22;
          iVar11 = _rand();
          local_28 = (float)(iVar11 % 200 + -100);
          iVar17 = projectile_spawn(&local_10,(float)(int)local_28 * 0.0013 + fVar3,iVar12,iVar17);
          iVar11 = _rand();
          local_28 = (float)(iVar11 % 100);
          local_3c = (float)((int)local_3c + -1);
          (&projectile_speed_scale)[iVar17 * 0x10] = (float)(int)local_28 * 0.01 + 1.0;
        } while (local_3c != 0.0);
      }
      else if (iVar11 == 4) {
        fVar19 = (float10)fcos((float10)fVar16);
        local_10 = (float)(fVar19 * (float10)25.0);
        fVar20 = (float10)fsin((float10)fVar16);
        local_c = (float)(fVar20 * (float10)25.0);
        local_14 = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_18 = local_20 + *pfVar18;
        iVar17 = fx_spawn_sprite(&local_18,&local_10,1.0);
        local_10 = (float)fVar19 * 15.0;
        local_c = (float)fVar20 * 15.0;
        (&sprite_effect_color_r)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_g)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_b)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_a)[iVar17 * 0xb] = 0x3e851eb8;
        local_14 = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_18 = local_20 + *pfVar18;
        iVar17 = fx_spawn_sprite(&local_18,&local_10,2.0);
        local_3c = 1.68156e-44;
        (&sprite_effect_color_r)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_g)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_b)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_a)[iVar17 * 0xb] = 0x3e6e978d;
        do {
          iVar12 = 3;
          local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
          local_10 = local_20 + *pfVar18;
          iVar17 = iVar22;
          iVar11 = _rand();
          local_28 = (float)(iVar11 % 200 + -100);
          iVar17 = projectile_spawn(&local_10,(float)(int)local_28 * 0.004 + fVar3,iVar12,iVar17);
          iVar11 = _rand();
          local_28 = (float)(iVar11 % 100);
          local_3c = (float)((int)local_3c + -1);
          (&projectile_speed_scale)[iVar17 * 0x10] = (float)(int)local_28 * 0.01 + 1.0;
        } while (local_3c != 0.0);
      }
      else if (iVar11 == 8) {
        local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_10 = local_20 + *pfVar18;
        fx_spawn_particle(&local_10,fVar15,&player_move_dx + iVar17,1.0);
        local_38 = 0.1;
      }
      else if (iVar11 == 0x10) {
        local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_10 = local_20 + *pfVar18;
        iVar17 = fx_spawn_particle(&local_10,fVar15,&player_move_dx + iVar17,1.0);
        if (iVar17 != -1) {
          (&particle_style_id)[iVar17 * 0x38] = 2;
        }
        local_38 = 0.1;
      }
      else if (iVar11 == 0xf) {
        local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_10 = local_20 + *pfVar18;
        iVar17 = fx_spawn_particle(&local_10,fVar15,&player_move_dx + iVar17,1.0);
        if (iVar17 != -1) {
          (&particle_style_id)[iVar17 * 0x38] = 1;
        }
        local_38 = 0.05;
      }
      else if (iVar11 == 5) {
        fVar19 = (float10)fcos((float10)fVar16);
        local_10 = (float)(fVar19 * (float10)25.0);
        fVar20 = (float10)fsin((float10)fVar16);
        local_c = (float)(fVar20 * (float10)25.0);
        local_14 = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_18 = local_20 + *pfVar18;
        iVar17 = fx_spawn_sprite(&local_18,&local_10,1.0);
        local_10 = (float)fVar19 * 15.0;
        local_c = (float)fVar20 * 15.0;
        (&sprite_effect_color_r)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_g)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_b)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_a)[iVar17 * 0xb] = 0x3e6b851f;
        local_14 = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_18 = local_20 + *pfVar18;
        iVar17 = fx_spawn_sprite(&local_18,&local_10,2.0);
        (&sprite_effect_color_r)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_g)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_b)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_a)[iVar17 * 0xb] = 0x3e5a1cac;
        local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_10 = local_20 + *pfVar18;
        projectile_spawn(&local_10,fVar3,5,iVar22);
      }
      else if (iVar11 == 9) {
        local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_10 = local_20 + *pfVar18;
        projectile_spawn(&local_10,fVar3,9,iVar22);
      }
      else if (iVar11 == 10) {
        local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_10 = local_20 + *pfVar18;
        projectile_spawn(&local_10,fVar3 - 0.31415927,9,iVar22);
        local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_10 = local_20 + *pfVar18;
        projectile_spawn(&local_10,fVar3 - 0.5235988,0xb,iVar22);
        local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_10 = local_20 + *pfVar18;
        projectile_spawn(&local_10,fVar3,9,iVar22);
        local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_10 = local_20 + *pfVar18;
        projectile_spawn(&local_10,fVar3 + 0.5235988,0xb,iVar22);
        local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_10 = local_20 + *pfVar18;
        projectile_spawn(&local_10,fVar3 + 0.31415927,9,iVar22);
      }
      else if (iVar11 == 0x13) {
        local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_10 = local_20 + *pfVar18;
        projectile_spawn(&local_10,fVar3,0x13,iVar22);
      }
      else if (iVar11 == 0x19) {
        local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_10 = local_20 + *pfVar18;
        projectile_spawn(&local_10,fVar3,0x19,iVar22);
      }
      else if (iVar11 == 0x1d) {
        local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_10 = local_20 + *pfVar18;
        projectile_spawn(&local_10,fVar3,0x1d,iVar22);
      }
      else if (iVar11 == 0x15) {
        local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_10 = local_20 + *pfVar18;
        projectile_spawn(&local_10,fVar3,0x15,iVar22);
      }
      else if (iVar11 == 0x16) {
        local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_10 = local_20 + *pfVar18;
        projectile_spawn(&local_10,fVar3,0x16,iVar22);
      }
      else if (iVar11 == 0x17) {
        local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_10 = local_20 + *pfVar18;
        projectile_spawn(&local_10,fVar3,0x17,iVar22);
      }
      else if (iVar11 == 0x1c) {
        local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_10 = local_20 + *pfVar18;
        projectile_spawn(&local_10,fVar3,0x1c,iVar22);
      }
      else if (iVar11 == 0x1f) {
        local_3c = 1.12104e-44;
        do {
          iVar12 = 0x16;
          local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
          local_10 = local_20 + *pfVar18;
          iVar17 = iVar22;
          iVar11 = _rand();
          local_28 = (float)(iVar11 % 200 + -100);
          iVar17 = projectile_spawn(&local_10,(float)(int)local_28 * 0.0026 + fVar3,iVar12,iVar17);
          iVar11 = _rand();
          local_28 = (float)(iVar11 % 0x50);
          local_3c = (float)((int)local_3c + -1);
          (&projectile_speed_scale)[iVar17 * 0x10] = (float)(int)local_28 * 0.01 + 1.4;
        } while (local_3c != 0.0);
      }
      else if (iVar11 == 0xb) {
        local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_10 = local_20 + *pfVar18;
        projectile_spawn(&local_10,fVar3,0xb,iVar22);
      }
      else if (iVar11 == 0x1e) {
        fVar19 = (float10)fcos((float10)fVar16);
        local_10 = (float)(fVar19 * (float10)25.0);
        fVar20 = (float10)fsin((float10)fVar16);
        local_c = (float)(fVar20 * (float10)25.0);
        local_14 = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_18 = local_20 + *pfVar18;
        iVar17 = fx_spawn_sprite(&local_18,&local_10,1.0);
        local_10 = (float)fVar19 * 15.0;
        local_c = (float)fVar20 * 15.0;
        (&sprite_effect_color_r)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_g)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_b)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_a)[iVar17 * 0xb] = 0x3ea8f5c3;
        local_14 = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_18 = local_20 + *pfVar18;
        iVar17 = fx_spawn_sprite(&local_18,&local_10,2.0);
        local_3c = 8.40779e-45;
        (&sprite_effect_color_r)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_g)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_b)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_a)[iVar17 * 0xb] = 0x3e86a7f0;
        do {
          iVar12 = 6;
          local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
          local_10 = local_20 + *pfVar18;
          iVar17 = iVar22;
          iVar11 = _rand();
          local_28 = (float)(iVar11 % 200 + -100);
          iVar17 = projectile_spawn(&local_10,(float)(int)local_28 * 0.002 + fVar3,iVar12,iVar17);
          iVar11 = _rand();
          local_28 = (float)(iVar11 % 0x50);
          local_3c = (float)((int)local_3c + -1);
          (&projectile_speed_scale)[iVar17 * 0x10] = (float)(int)local_28 * 0.01 + 1.4;
        } while (local_3c != 0.0);
      }
      else if (iVar11 == 6) {
        fVar19 = (float10)fcos((float10)fVar16);
        local_10 = (float)(fVar19 * (float10)25.0);
        fVar20 = (float10)fsin((float10)fVar16);
        local_c = (float)(fVar20 * (float10)25.0);
        local_14 = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_18 = local_20 + *pfVar18;
        iVar17 = fx_spawn_sprite(&local_18,&local_10,1.0);
        local_10 = (float)fVar19 * 15.0;
        local_c = (float)fVar20 * 15.0;
        (&sprite_effect_color_r)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_g)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_b)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_a)[iVar17 * 0xb] = 0x3ea8f5c3;
        local_14 = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_18 = local_20 + *pfVar18;
        iVar17 = fx_spawn_sprite(&local_18,&local_10,2.0);
        (&sprite_effect_color_r)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_g)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_b)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_a)[iVar17 * 0xb] = 0x3e86a7f0;
        local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_10 = local_20 + *pfVar18;
        projectile_spawn(&local_10,fVar3,6,iVar22);
      }
      else if (iVar11 == 0xc) {
        fVar19 = (float10)fcos((float10)fVar16);
        local_10 = (float)(fVar19 * (float10)25.0);
        fVar20 = (float10)fsin((float10)fVar16);
        local_c = (float)(fVar20 * (float10)25.0);
        local_14 = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_18 = local_20 + *pfVar18;
        iVar17 = fx_spawn_sprite(&local_18,&local_10,1.0);
        local_10 = (float)fVar19 * 15.0;
        local_c = (float)fVar20 * 15.0;
        (&sprite_effect_color_r)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_g)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_b)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_a)[iVar17 * 0xb] = 0x3eae147b;
        local_14 = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_18 = local_20 + *pfVar18;
        iVar17 = fx_spawn_sprite(&local_18,&local_10,2.0);
        (&sprite_effect_color_r)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_g)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_b)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_a)[iVar17 * 0xb] = 0x3e90e560;
        local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_10 = local_20 + *pfVar18;
        fx_spawn_secondary_projectile(&local_10,fVar3,1);
      }
      else if (iVar11 == 0x11) {
        fVar19 = (float10)fcos((float10)fVar16);
        local_10 = (float)(fVar19 * (float10)25.0);
        fVar20 = (float10)fsin((float10)fVar16);
        local_c = (float)(fVar20 * (float10)25.0);
        local_14 = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_18 = local_20 + *pfVar18;
        iVar17 = fx_spawn_sprite(&local_18,&local_10,1.0);
        local_10 = (float)fVar19 * 15.0;
        local_c = (float)fVar20 * 15.0;
        (&sprite_effect_color_r)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_g)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_b)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_a)[iVar17 * 0xb] = 0x3eae147b;
        local_14 = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_18 = local_20 + *pfVar18;
        iVar17 = fx_spawn_sprite(&local_18,&local_10,2.0);
        (&sprite_effect_color_r)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_g)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_b)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_a)[iVar17 * 0xb] = 0x3e90e560;
        fVar16 = (float)(&player_ammo)[iVar7 * 0xd8];
        fVar15 = 0.0;
        local_3c = (fVar3 - 3.1415927) -
                   fVar16 * 1.0471976 * (float)(&player_ammo)[iVar7 * 0xd8] * 0.5;
        if (0.0 < (float)(&player_ammo)[iVar7 * 0xd8]) {
          do {
            local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
            local_10 = local_20 + *pfVar18;
            fx_spawn_secondary_projectile(&local_10,local_3c,2);
            local_3c = local_3c + fVar16 * 1.0471976;
            fVar15 = (float)((int)fVar15 + 1);
            local_28 = fVar15;
          } while ((float)(int)fVar15 < (float)(&player_ammo)[iVar7 * 0xd8]);
        }
        local_38 = (float)(&player_ammo)[iVar7 * 0xd8];
      }
      else if (iVar11 == 0x12) {
        fVar19 = (float10)fcos((float10)fVar16);
        local_10 = (float)(fVar19 * (float10)25.0);
        fVar19 = (float10)fsin((float10)fVar16);
        local_c = (float)(fVar19 * (float10)25.0);
        local_14 = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_18 = local_20 + *pfVar18;
        iVar17 = fx_spawn_sprite(&local_18,&local_10,1.0);
        (&sprite_effect_color_r)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_g)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_b)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_a)[iVar17 * 0xb] = 0x3eae147b;
        local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_10 = local_20 + *pfVar18;
        fx_spawn_secondary_projectile(&local_10,fVar3,4);
      }
      else if (iVar11 == 0xd) {
        fVar19 = (float10)fcos((float10)fVar16);
        local_10 = (float)(fVar19 * (float10)25.0);
        fVar20 = (float10)fsin((float10)fVar16);
        local_c = (float)(fVar20 * (float10)25.0);
        local_14 = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_18 = local_20 + *pfVar18;
        iVar17 = fx_spawn_sprite(&local_18,&local_10,1.0);
        local_10 = (float)fVar19 * 15.0;
        local_c = (float)fVar20 * 15.0;
        (&sprite_effect_color_r)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_g)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_b)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_a)[iVar17 * 0xb] = 0x3e9eb852;
        local_14 = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_18 = local_20 + *pfVar18;
        iVar17 = fx_spawn_sprite(&local_18,&local_10,2.0);
        (&sprite_effect_color_r)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_g)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_b)[iVar17 * 0xb] = 0x3f000000;
        (&sprite_effect_color_a)[iVar17 * 0xb] = 0x3e78d4fe;
        local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_10 = local_20 + *pfVar18;
        fx_spawn_secondary_projectile(&local_10,fVar3,2);
      }
      else if (iVar11 == 7) {
        local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_10 = local_20 + *pfVar18;
        projectile_spawn(&local_10,fVar3,1,iVar22);
      }
      else if (iVar11 == 0xe) {
        local_3c = 1.96182e-44;
        do {
          iVar11 = 0xb;
          local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
          local_10 = local_20 + *pfVar18;
          iVar17 = iVar22;
          uVar10 = _rand();
          local_28 = (float)((uVar10 & 0xff) - 0x80);
          iVar17 = projectile_spawn(&local_10,(float)(int)local_28 * 0.002 + fVar3,iVar11,iVar17);
          iVar11 = _rand();
          local_28 = (float)(iVar11 % 100);
          local_3c = (float)((int)local_3c + -1);
          (&projectile_speed_scale)[iVar17 * 0x10] = (float)(int)local_28 * 0.01 + 1.0;
        } while (local_3c != 0.0);
      }
      else if (iVar11 == 0x29) {
        local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_10 = local_20 + *pfVar18;
        projectile_spawn(&local_10,fVar3,0x29,iVar22);
      }
      else if (iVar11 == 0x2b) {
        local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_10 = local_20 + *pfVar18;
        projectile_spawn(&local_10,fVar3,0x2b,iVar22);
      }
      else if (iVar11 == 0x2a) {
        local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_10 = local_20 + *pfVar18;
        fx_spawn_particle_slow(&local_10,fVar3 - 1.5707964);
        local_38 = 0.15;
      }
    }
    iVar17 = perk_count_get(perk_id_sharpshooter);
    if (iVar17 == 0) {
      (&player_spread_heat)[iVar7 * 0xd8] =
           (float)(&DAT_004d7a7c)[(&player_weapon_id)[iVar7 * 0xd8] * 0x1f] * 1.3 +
           (float)(&player_spread_heat)[iVar7 * 0xd8];
    }
    if (_bonus_reflex_boost_timer <= 0.0) {
      (&player_ammo)[iVar7 * 0xd8] = (float)(&player_ammo)[iVar7 * 0xd8] - local_38;
    }
  }
  else {
    sfx_play_panned(DAT_004d9050);
    sfx_play_panned(DAT_004d7fd8);
    if ((&weapon_projectile_pellet_count)[(&player_weapon_id)[iVar7 * 0xd8] * 0x1f] == 1) {
      (&player_shot_cooldown)[iVar7 * 0xd8] = DAT_004d9040;
      fVar15 = _DAT_004d9048;
    }
    else {
      (&player_shot_cooldown)[iVar7 * 0xd8] =
           (&DAT_004d7a74)[(&player_weapon_id)[iVar7 * 0xd8] * 0x1f];
      fVar15 = (float)(&DAT_004d7a7c)[(&player_weapon_id)[iVar7 * 0xd8] * 0x1f];
    }
    iVar17 = 0;
    *pfVar1 = fVar15 + *pfVar1;
    if (0 < (int)(&weapon_projectile_pellet_count)[(&player_weapon_id)[iVar7 * 0xd8] * 0x1f]) {
      do {
        iVar11 = _rand();
        local_28 = (float)(iVar11 % 200 + -100) * 0.0015 + fVar3;
        local_c = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
        local_10 = local_20 + *pfVar18;
        projectile_spawn(&local_10,local_28,0x2d,iVar22);
        iVar17 = iVar17 + 1;
      } while (iVar17 < (int)(&weapon_projectile_pellet_count)
                             [(&player_weapon_id)[iVar7 * 0xd8] * 0x1f]);
    }
    fVar19 = (float10)fcos((float10)fVar16);
    local_10 = (float)(fVar19 * (float10)25.0);
    fVar19 = (float10)fsin((float10)fVar16);
    local_c = (float)(fVar19 * (float10)25.0);
    local_14 = local_1c + (float)(&player_pos_y)[iVar7 * 0xd8];
    local_18 = local_20 + *pfVar18;
    iVar11 = fx_spawn_sprite(&local_18,&local_10,1.0);
    iVar17 = perk_id_sharpshooter;
    (&sprite_effect_color_r)[iVar11 * 0xb] = 0x3f000000;
    (&sprite_effect_color_g)[iVar11 * 0xb] = 0x3f000000;
    (&sprite_effect_color_b)[iVar11 * 0xb] = 0x3f000000;
    (&sprite_effect_color_a)[iVar11 * 0xb] = 0x3ed374bc;
    iVar17 = perk_count_get(iVar17);
    if (iVar17 == 0) {
      (&player_spread_heat)[iVar7 * 0xd8] =
           _DAT_004d9048 * 1.3 + (float)(&player_spread_heat)[iVar7 * 0xd8];
    }
  }
  if (0.48 < (float)(&player_spread_heat)[iVar7 * 0xd8]) {
    (&player_spread_heat)[iVar7 * 0xd8] = 0x3ef5c28f;
  }
  if (0 < (int)(&player_perk_counts)[perk_id_fastshot]) {
    (&player_shot_cooldown)[iVar7 * 0xd8] = (float)(&player_shot_cooldown)[iVar7 * 0xd8] * 0.88;
  }
  if (0 < (int)(&player_perk_counts)[perk_id_sharpshooter]) {
    (&player_shot_cooldown)[iVar7 * 0xd8] = (float)(&player_shot_cooldown)[iVar7 * 0xd8] * 1.05;
  }
  if ((float)(&player_ammo)[iVar7 * 0xd8] <= 0.0) {
    player_start_reload();
  }
LAB_0041753e:
  fVar16 = (float)(&player_move_phase)[iVar7 * 0xd8];
  while (14.0 < fVar16) {
    fVar16 = (float)(&player_move_phase)[iVar7 * 0xd8] - 14.0;
    (&player_move_phase)[iVar7 * 0xd8] = fVar16;
  }
  fVar16 = (float)(&player_move_phase)[iVar7 * 0xd8];
  while (fVar16 < 0.0) {
    fVar16 = (float)(&player_move_phase)[iVar7 * 0xd8] + 14.0;
    (&player_move_phase)[iVar7 * 0xd8] = fVar16;
  }
  if (0.0 < (float)(&player_speed_bonus_timer)[iVar7 * 0xd8]) {
    (&player_speed_multiplier)[iVar7 * 0xd8] = (float)(&player_speed_multiplier)[iVar7 * 0xd8] - 1.0
    ;
  }
  fVar16 = (float)(&player_size)[iVar7 * 0xd8] * 0.5;
  if (*pfVar18 < fVar16) {
    *pfVar18 = fVar16;
  }
  if ((float)terrain_texture_width - fVar16 < *pfVar18) {
    *pfVar18 = (float)terrain_texture_width - fVar16;
  }
  pfVar18 = (float *)(&player_pos_y + iVar7 * 0xd8);
  if ((float)(&player_pos_y)[iVar7 * 0xd8] < fVar16) {
    *pfVar18 = fVar16;
  }
  if ((float)terrain_texture_height - fVar16 < *pfVar18) {
    *pfVar18 = (float)terrain_texture_height - fVar16;
  }
  if (0.8 < *pfVar1) {
    *pfVar1 = 0.8;
  }
  return;
}



/* FUN_00417640 @ 00417640 */

void __thiscall FUN_00417640(void *this,float *param_1,float *param_2)

{
  float fVar1;
  float fVar2;
  
  fVar1 = *(float *)((int)this + 4);
  fVar2 = param_2[1];
  *param_1 = *(float *)this - *param_2;
  param_1[1] = fVar1 - fVar2;
  return;
}



/* FUN_00417660 @ 00417660 */

float10 __cdecl FUN_00417660(float *param_1)

{
  return SQRT((float10)param_1[1] * (float10)param_1[1] + (float10)*param_1 * (float10)*param_1);
}



/* FUN_00417690 @ 00417690 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_00417690(void)

{
  undefined *puVar1;
  undefined4 *puVar2;
  int iVar3;
  
  puVar1 = &DAT_0048f808;
  iVar3 = 8;
  do {
    FUN_00417a90(puVar1);
    puVar1 = puVar1 + 0x1c;
    iVar3 = iVar3 + -1;
  } while (iVar3 != 0);
  puVar1 = &DAT_0048f8f0;
  _DAT_0048f8ec = 4;
  iVar3 = 8;
  do {
    FUN_00417a90(puVar1);
    puVar1 = puVar1 + 0x1c;
    iVar3 = iVar3 + -1;
  } while (iVar3 != 0);
  _DAT_0048f9d4 = 4;
  puVar1 = &DAT_0048f9d8;
  iVar3 = 8;
  do {
    FUN_00417a90(puVar1);
    puVar1 = puVar1 + 0x1c;
    iVar3 = iVar3 + -1;
  } while (iVar3 != 0);
  _DAT_0048fabc = 4;
  puVar2 = &DAT_0048fac0;
  iVar3 = 8;
  do {
    FUN_00417a90(puVar2);
    puVar2 = puVar2 + 7;
    iVar3 = iVar3 + -1;
  } while (iVar3 != 0);
  _DAT_0048fba4 = 4;
  puVar2 = &DAT_0048fba8;
  iVar3 = 8;
  do {
    FUN_00417a90(puVar2);
    puVar2 = puVar2 + 7;
    iVar3 = iVar3 + -1;
  } while (iVar3 != 0);
  _DAT_0048fc8c = 4;
  puVar2 = &DAT_0048fc90;
  iVar3 = 8;
  do {
    FUN_00417a90(puVar2);
    puVar2 = puVar2 + 7;
    iVar3 = iVar3 + -1;
  } while (iVar3 != 0);
  _DAT_0048fd74 = 4;
  FUN_004010f0(&DAT_0048fd78,0x1c,8,FUN_00417a90);
  _DAT_0048fe5c = 4;
  FUN_004010f0(&DAT_0048fe60,0x1c,8,FUN_00417a90);
  _DAT_0048ff44 = 4;
  FUN_004010f0(&DAT_0048ff48,0x1c,8,FUN_00417a90);
  _DAT_0049002c = 4;
  FUN_004010f0(&DAT_00490030,0x1c,8,FUN_00417a90);
  _DAT_00490114 = 4;
  FUN_004010f0(&DAT_00490118,0x1c,8,FUN_00417a90);
  _DAT_004901fc = 4;
  FUN_004010f0(&DAT_00490200,0x1c,8,FUN_00417a90);
  _DAT_004902e4 = 4;
  return;
}



/* FUN_00417a90 @ 00417a90 */

undefined4 __fastcall FUN_00417a90(undefined4 param_1)

{
  return param_1;
}



/* FUN_00417aa0 @ 00417aa0 */

void __fastcall FUN_00417aa0(int param_1)

{
  *(undefined4 *)(param_1 + 0xe4) = 4;
  return;
}



/* FUN_00417ab0 @ 00417ab0 */

void __fastcall FUN_00417ab0(undefined1 *param_1)

{
  *(undefined4 *)(param_1 + 0x120) = 4;
  *(undefined4 *)(param_1 + 0x208) = 4;
  *(undefined4 *)(param_1 + 0x2f0) = 4;
  *(undefined4 *)(param_1 + 0x2f8) = 0;
  param_1[0x314] = 0;
  *(undefined4 *)(param_1 + 0x38) = 0;
  *(undefined4 *)(param_1 + 0x34) = 0;
  *param_1 = 0;
  return;
}



/* FUN_00417ae0 @ 00417ae0 */

void FUN_00417ae0(void)

{
  int iVar1;
  undefined4 uStack_24;
  undefined4 uStack_20;
  
  (**(code **)(*grim_interface_ptr + 0xc4))();
  (**(code **)(*grim_interface_ptr + 0x100))(0,0,0x3f800000,0x3f800000);
  iVar1 = 1;
  (**(code **)(*grim_interface_ptr + 0x20))(0x15,1);
  (**(code **)(*grim_interface_ptr + 0x11c))
            ((float)iVar1,(float)uStack_24,(float)uStack_20,0x4a82f622);
  (**(code **)(*grim_interface_ptr + 0xf0))();
  (**(code **)(*grim_interface_ptr + 0x20))(0x15,2);
  return;
}



/* terrain_generate @ 00417b80 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* generates terrain texture into a render target using a level descriptor */

void __cdecl terrain_generate(void *desc)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  float fStack_c8;
  float fStack_c4;
  float *pfStack_c0;
  float fStack_bc;
  float fStack_b8;
  float fStack_b4;
  float fStack_b0;
  float fStack_ac;
  undefined4 uStack_a8;
  float fStack_a4;
  float fStack_a0;
  undefined4 uStack_9c;
  float fStack_98;
  float fStack_94;
  undefined4 uStack_90;
  int iStack_8c;
  float fStack_88;
  undefined4 uStack_84;
  undefined4 uStack_80;
  undefined4 uStack_7c;
  undefined4 uStack_78;
  undefined4 uStack_74;
  int iStack_70;
  undefined4 uStack_64;
  undefined4 uStack_60;
  undefined4 uStack_5c;
  undefined4 uStack_50;
  undefined4 uStack_4c;
  undefined4 uStack_48;
  undefined4 uStack_3c;
  undefined4 uStack_38;
  undefined1 local_34;
  
  _camera_offset_x = 0;
  _camera_offset_y = 0;
  if (terrain_texture_failed != '\0') {
    terrain_render_target = (float)(&DAT_0048f548)[*(int *)((int)desc + 0x10)];
    return;
  }
  uStack_38 = 0x12;
  local_34 = 1;
  uStack_3c = 0x417bf4;
  (**(code **)(*grim_interface_ptr + 0x20))();
  uStack_4c = 0x13;
  uStack_48 = 5;
  uStack_50 = 0x417c0c;
  (**(code **)(*grim_interface_ptr + 0x20))();
  uStack_60 = 0x14;
  uStack_5c = 6;
  uStack_64 = 0x417c24;
  (**(code **)(*grim_interface_ptr + 0x20))();
  uStack_74 = 0x15;
  iStack_70 = 1;
  uStack_78 = 0x417c3c;
  (**(code **)(*grim_interface_ptr + 0x20))();
  uStack_78 = 0x3f800000;
  uStack_7c = 0x3f800000;
  uStack_80 = 0;
  uStack_84 = 0;
  fStack_88 = 6.013913e-39;
  (**(code **)(*grim_interface_ptr + 0x100))();
  fStack_88 = terrain_render_target;
  iStack_8c = 0x417c6a;
  (**(code **)(*grim_interface_ptr + 0x30))();
  iStack_8c = 0x3f800000;
  uStack_90 = 0x3dc8c8c9;
  fStack_94 = 0.21960784;
  fStack_98 = 0.24705882;
  uStack_9c = 0x417c89;
  (**(code **)(*grim_interface_ptr + 0x2c))();
  iVar3 = iStack_70;
  uStack_9c = 0;
  fStack_a0 = (float)(&DAT_0048f548)[*(int *)(iStack_70 + 0x10)];
  fStack_a4 = 6.014025e-39;
  (**(code **)(*grim_interface_ptr + 0xc4))();
  fStack_a4 = 0.9;
  uStack_a8 = 0x3f333333;
  fStack_ac = 0.7;
  fStack_b0 = 0.7;
  fStack_b4 = 6.014073e-39;
  (**(code **)(*grim_interface_ptr + 0x114))();
  fStack_b4 = 6.014093e-39;
  (**(code **)(*grim_interface_ptr + 0xe8))();
  iVar4 = 0;
  iVar1 = terrain_texture_height * terrain_texture_width * 800;
  if (0 < (int)(iVar1 + (iVar1 >> 0x1f & 0x7ffffU)) >> 0x13) {
    fVar6 = fStack_a0 * 128.0;
    fStack_88 = fVar6;
    do {
      iVar1 = *grim_interface_ptr;
      fStack_b4 = 6.014196e-39;
      iVar2 = _rand();
      fStack_88 = (float)(iVar2 % 0x13a);
      fStack_b4 = (float)(int)fStack_88 * 0.01;
      fStack_b8 = 6.01425e-39;
      (**(code **)(iVar1 + 0xfc))();
      fStack_b8 = 6.014257e-39;
      iStack_8c = _rand();
      iStack_8c = iStack_8c % (terrain_texture_width + 0x80);
      fStack_a0 = (float)iStack_8c - 64.0;
      fStack_b8 = 6.01431e-39;
      iStack_8c = _rand();
      iStack_8c = iStack_8c % (terrain_texture_width + 0x80);
      pfStack_c0 = &fStack_98;
      fStack_98 = ((float)iStack_8c - 64.0) * fStack_a4;
      fStack_94 = fStack_a0 * fStack_a4;
      fStack_c4 = 6.014408e-39;
      fStack_bc = fVar6;
      fStack_b8 = fVar6;
      (**(code **)(*grim_interface_ptr + 0x120))();
      iVar4 = iVar4 + 1;
      iVar1 = terrain_texture_height * terrain_texture_width * 800;
    } while (iVar4 < (int)(iVar1 + (iVar1 >> 0x1f & 0x7ffffU)) >> 0x13);
  }
  fStack_b4 = 6.014487e-39;
  (**(code **)(*grim_interface_ptr + 0xf0))();
  fStack_b4 = 0.0;
  fStack_b8 = (float)(&DAT_0048f548)[*(int *)(iVar3 + 0x14)];
  fStack_bc = 6.014524e-39;
  (**(code **)(*grim_interface_ptr + 0xc4))();
  fStack_bc = 0.9;
  pfStack_c0 = (float *)0x3f333333;
  fStack_c4 = 0.7;
  fStack_c8 = 0.7;
  (**(code **)(*grim_interface_ptr + 0x114))();
  (**(code **)(*grim_interface_ptr + 0xe8))();
  iVar4 = 0;
  iVar1 = terrain_texture_height * terrain_texture_width * 0x23;
  if (0 < (int)(iVar1 + (iVar1 >> 0x1f & 0x7ffffU)) >> 0x13) {
    fVar6 = fStack_b8 * 128.0;
    fStack_a0 = fVar6;
    do {
      iVar1 = *grim_interface_ptr;
      iVar2 = _rand();
      fStack_a0 = (float)(iVar2 % 0x13a);
      (**(code **)(iVar1 + 0xfc))((float)(int)fStack_a0 * 0.01);
      iVar1 = _rand();
      fStack_a4 = (float)(iVar1 % (terrain_texture_width + 0x80));
      fStack_b8 = (float)(int)fStack_a4 - 64.0;
      iVar1 = _rand();
      fStack_a4 = (float)(iVar1 % (terrain_texture_width + 0x80));
      fStack_b0 = ((float)(int)fStack_a4 - 64.0) * fStack_bc;
      fStack_ac = fStack_b8 * fStack_bc;
      (**(code **)(*grim_interface_ptr + 0x120))(&fStack_b0,fVar6,fVar6);
      iVar4 = iVar4 + 1;
      iVar1 = terrain_texture_height * terrain_texture_width * 0x23;
    } while (iVar4 < (int)(iVar1 + (iVar1 >> 0x1f & 0x7ffffU)) >> 0x13);
  }
  (**(code **)(*grim_interface_ptr + 0xf0))();
  fVar6 = (float)(&DAT_0048f548)[*(int *)(iVar3 + 0x18)];
  (**(code **)(*grim_interface_ptr + 0xc4))(fVar6,0);
  fVar5 = 0.6;
  (**(code **)(*grim_interface_ptr + 0x114))(0x3f333333,0x3f333333,0x3f333333,0x3f19999a);
  (**(code **)(*grim_interface_ptr + 0xe8))();
  iVar1 = 0;
  iVar3 = terrain_texture_height * terrain_texture_width * 0xf;
  if (0 < (int)(iVar3 + (iVar3 >> 0x1f & 0x7ffffU)) >> 0x13) {
    fVar6 = fVar6 * 128.0;
    fStack_b8 = fVar6;
    do {
      iVar3 = *grim_interface_ptr;
      iVar4 = _rand();
      fStack_b8 = (float)(iVar4 % 0x13a);
      (**(code **)(iVar3 + 0xfc))((float)(int)fStack_b8 * 0.01);
      iVar3 = _rand();
      fStack_bc = (float)(iVar3 % (terrain_texture_width + 0x80));
      fVar7 = (float)(int)fStack_bc - 64.0;
      iVar3 = _rand();
      fStack_bc = (float)(iVar3 % (terrain_texture_width + 0x80));
      fStack_c8 = ((float)(int)fStack_bc - 64.0) * fVar5;
      fStack_c4 = fVar7 * fVar5;
      (**(code **)(*grim_interface_ptr + 0x120))(&fStack_c8,fVar6,fVar6);
      iVar1 = iVar1 + 1;
      iVar3 = terrain_texture_height * terrain_texture_width * 0xf;
    } while (iVar1 < (int)(iVar3 + (iVar3 >> 0x1f & 0x7ffffU)) >> 0x13);
  }
  (**(code **)(*grim_interface_ptr + 0xf0))();
  fStack_c8 = 0.0;
  _camera_offset_x = 0;
  _camera_offset_y = 0;
  (**(code **)(*grim_interface_ptr + 0x20))(0x13,5);
  (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
  (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,0x3f800000);
  (**(code **)(*grim_interface_ptr + 0x20))(0x13,1);
  (**(code **)(*grim_interface_ptr + 0x20))(0x13,5);
  (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
  (**(code **)(*grim_interface_ptr + 0x20))(0x15,2);
  (**(code **)(*grim_interface_ptr + 0x30))(0xffffffff);
  return;
}



/* terrain_generate_random @ 004181b0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* selects a terrain variant and generates the terrain texture */

void terrain_generate_random(void)

{
  int iVar1;
  int iVar2;
  int iVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fStack_d4;
  float *pfStack_d0;
  float fStack_cc;
  float fStack_c8;
  float fStack_c4;
  int iStack_c0;
  float fStack_bc;
  float fStack_b8;
  float fStack_b4;
  float fStack_b0;
  float fStack_ac;
  float fStack_a8;
  float fStack_a4;
  float fStack_a0;
  undefined4 uStack_9c;
  undefined4 uStack_98;
  undefined4 uStack_94;
  undefined4 uStack_90;
  undefined4 uStack_8c;
  undefined4 uStack_88;
  undefined4 uStack_84;
  undefined4 uStack_80;
  undefined4 uStack_74;
  undefined4 uStack_70;
  undefined4 uStack_6c;
  undefined4 uStack_60;
  undefined4 uStack_5c;
  undefined4 uStack_58;
  undefined4 uStack_4c;
  undefined4 uStack_48;
  undefined1 local_44;
  undefined4 uStack_3c;
  
  _DAT_0048f53c = _rand();
  _DAT_0048f53c = _DAT_0048f53c % 7;
  _DAT_0048f540 = _rand();
  _DAT_0048f540 = _DAT_0048f540 % 7;
  _rand();
  fVar4 = DAT_0048f54c;
  fVar5 = DAT_0048f548;
  _DAT_0048f53c = 0;
  _DAT_0048f540 = 1;
  _DAT_0048f544 = 0;
  if (0x27 < (ushort)game_status_blob) {
    iVar1 = _rand();
    if (((byte)iVar1 & 7) == 3) {
      uStack_3c = 0x41823a;
      terrain_generate(&DAT_00484c84);
      return;
    }
  }
  if (0x1d < (ushort)game_status_blob) {
    iVar1 = _rand();
    if (((byte)iVar1 & 7) == 3) {
      uStack_3c = 0x418265;
      terrain_generate(&DAT_00484acc);
      return;
    }
  }
  if (0x13 < (ushort)game_status_blob) {
    iVar1 = _rand();
    if (((byte)iVar1 & 7) == 3) {
      uStack_3c = 0x418290;
      terrain_generate(&DAT_00484914);
      return;
    }
  }
  _camera_offset_y = 0;
  _camera_offset_x = 0;
  if (terrain_texture_failed == '\0') {
    uStack_48 = 0x12;
    local_44 = 1;
    uStack_4c = 0x4182e0;
    (**(code **)(*grim_interface_ptr + 0x20))();
    uStack_5c = 0x13;
    uStack_58 = 5;
    uStack_60 = 0x4182f8;
    (**(code **)(*grim_interface_ptr + 0x20))();
    uStack_70 = 0x14;
    uStack_6c = 6;
    uStack_74 = 0x418310;
    (**(code **)(*grim_interface_ptr + 0x20))();
    uStack_84 = 0x15;
    uStack_80 = 1;
    uStack_88 = 0x418328;
    (**(code **)(*grim_interface_ptr + 0x20))();
    uStack_88 = 0x3f800000;
    uStack_8c = 0x3f800000;
    uStack_90 = 0;
    uStack_94 = 0;
    uStack_98 = 0x418342;
    (**(code **)(*grim_interface_ptr + 0x100))();
    uStack_98 = terrain_render_target;
    uStack_9c = 0x418354;
    (**(code **)(*grim_interface_ptr + 0x30))();
    uStack_9c = 0x3f800000;
    fStack_a0 = 0.09803922;
    fStack_a4 = 0.21960784;
    fStack_a8 = 0.24705882;
    fStack_ac = 6.016462e-39;
    (**(code **)(*grim_interface_ptr + 0x2c))();
    fStack_ac = 0.0;
    fStack_b0 = fVar5;
    fStack_b4 = 6.016485e-39;
    (**(code **)(*grim_interface_ptr + 0xc4))();
    fStack_b4 = 0.9;
    fStack_b8 = 0.7;
    fStack_bc = 0.7;
    iStack_c0 = 0x3f333333;
    fStack_c4 = 6.016532e-39;
    (**(code **)(*grim_interface_ptr + 0x114))();
    fStack_c4 = 6.016552e-39;
    (**(code **)(*grim_interface_ptr + 0xe8))();
    iVar3 = 0;
    iVar1 = terrain_texture_height * terrain_texture_width * 800;
    if (0 < (int)(iVar1 + (iVar1 >> 0x1f & 0x7ffffU)) >> 0x13) {
      fVar5 = fStack_b0 * 128.0;
      fStack_ac = fVar5;
      do {
        iVar1 = *grim_interface_ptr;
        fStack_c4 = 6.016654e-39;
        iVar2 = _rand();
        fStack_ac = (float)(iVar2 % 0x13a);
        fStack_c4 = (float)(int)fStack_ac * 0.01;
        fStack_c8 = 6.016708e-39;
        (**(code **)(iVar1 + 0xfc))();
        fStack_c8 = 6.016715e-39;
        iVar1 = _rand();
        fStack_b0 = (float)(iVar1 % (terrain_texture_width + 0x80));
        fStack_ac = (float)(int)fStack_b0 - 64.0;
        fStack_c8 = 6.016768e-39;
        iVar1 = _rand();
        fStack_b0 = (float)(iVar1 % (terrain_texture_width + 0x80));
        pfStack_d0 = &fStack_a4;
        fStack_a4 = ((float)(int)fStack_b0 - 64.0) * fStack_b4;
        fStack_a0 = fStack_ac * fStack_b4;
        fStack_d4 = 6.016866e-39;
        fStack_cc = fVar5;
        fStack_c8 = fVar5;
        (**(code **)(*grim_interface_ptr + 0x120))();
        iVar3 = iVar3 + 1;
        iVar1 = terrain_texture_height * terrain_texture_width * 800;
      } while (iVar3 < (int)(iVar1 + (iVar1 >> 0x1f & 0x7ffffU)) >> 0x13);
    }
    fStack_c4 = 6.016944e-39;
    (**(code **)(*grim_interface_ptr + 0xf0))();
    fStack_c4 = 0.0;
    fStack_c8 = fVar4;
    fStack_cc = 6.016968e-39;
    (**(code **)(*grim_interface_ptr + 0xc4))();
    fStack_cc = 0.9;
    pfStack_d0 = (float *)0x3f333333;
    fStack_d4 = 0.7;
    (**(code **)(*grim_interface_ptr + 0x114))(0x3f333333);
    (**(code **)(*grim_interface_ptr + 0xe8))();
    iVar3 = 0;
    iVar1 = terrain_texture_height * terrain_texture_width * 0x23;
    if (0 < (int)(iVar1 + (iVar1 >> 0x1f & 0x7ffffU)) >> 0x13) {
      fVar5 = fStack_c8 * 128.0;
      fStack_c4 = fVar5;
      do {
        iVar1 = *grim_interface_ptr;
        iStack_c0 = _rand();
        iStack_c0 = iStack_c0 % 0x13a;
        (**(code **)(iVar1 + 0xfc))((float)iStack_c0 * 0.01);
        iVar1 = _rand();
        fStack_c4 = (float)(iVar1 % (terrain_texture_width + 0x80));
        fStack_c8 = (float)(int)fStack_c4 - 64.0;
        iVar1 = _rand();
        fStack_c4 = (float)(iVar1 % (terrain_texture_width + 0x80));
        fStack_bc = ((float)(int)fStack_c4 - 64.0) * fStack_cc;
        fStack_b8 = fStack_c8 * fStack_cc;
        (**(code **)(*grim_interface_ptr + 0x120))(&fStack_bc,fVar5,fVar5);
        iVar3 = iVar3 + 1;
        iVar1 = terrain_texture_height * terrain_texture_width * 0x23;
      } while (iVar3 < (int)(iVar1 + (iVar1 >> 0x1f & 0x7ffffU)) >> 0x13);
    }
    (**(code **)(*grim_interface_ptr + 0xf0))();
    fVar5 = fStack_a8;
    (**(code **)(*grim_interface_ptr + 0xc4))(fStack_a8,0);
    fVar4 = 0.6;
    (**(code **)(*grim_interface_ptr + 0x114))(0x3f333333,0x3f333333,0x3f333333,0x3f19999a);
    (**(code **)(*grim_interface_ptr + 0xe8))();
    iVar3 = 0;
    iVar1 = terrain_texture_height * terrain_texture_width * 0xf;
    if (0 < (int)(iVar1 + (iVar1 >> 0x1f & 0x7ffffU)) >> 0x13) {
      do {
        iVar1 = *grim_interface_ptr;
        iVar2 = _rand();
        (**(code **)(iVar1 + 0xfc))((float)(iVar2 % 0x13a) * 0.01);
        iVar1 = _rand();
        fVar6 = (float)(iVar1 % (terrain_texture_width + 0x80)) - 64.0;
        iVar1 = _rand();
        fStack_d4 = ((float)(iVar1 % (terrain_texture_width + 0x80)) - 64.0) * fVar4;
        pfStack_d0 = (float *)(fVar6 * fVar4);
        (**(code **)(*grim_interface_ptr + 0x120))(&fStack_d4,fVar5 * 128.0,fVar5 * 128.0);
        iVar3 = iVar3 + 1;
        iVar1 = terrain_texture_height * terrain_texture_width * 0xf;
      } while (iVar3 < (int)(iVar1 + (iVar1 >> 0x1f & 0x7ffffU)) >> 0x13);
    }
    (**(code **)(*grim_interface_ptr + 0xf0))();
    fStack_d4 = 0.0;
    _camera_offset_x = 0;
    _camera_offset_y = 0;
    (**(code **)(*grim_interface_ptr + 0x20))(0x13,5);
    (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
    (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,0x3f800000);
    (**(code **)(*grim_interface_ptr + 0x20))(0x13,1);
    (**(code **)(*grim_interface_ptr + 0x20))(0x13,5);
    (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
    (**(code **)(*grim_interface_ptr + 0x20))(0x15,2);
    (**(code **)(*grim_interface_ptr + 0x30))(0xffffffff);
    if (*(float *)(DAT_00480864 + 0xc) != 0.0) {
      console_printf(&console_log_queue,(byte *)(s_____Generated_terrain__0047377a + 2));
    }
  }
  return;
}



/* FUN_004188a0 @ 004188a0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_004188a0(void)

{
  float fVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  float fVar7;
  uint in_stack_ffffffd0;
  
  if (*(int *)(DAT_00480858 + 0xc) == 0x40000000) {
    in_stack_ffffffd0 = 0x4188ce;
    (**(code **)(*grim_interface_ptr + 0x20))(0x15,1);
  }
  if (terrain_texture_failed != '\0') {
    (**(code **)(*grim_interface_ptr + 0xc4))();
    (**(code **)(*grim_interface_ptr + 0x20))(0x12,in_stack_ffffffd0 & 0xffffff00);
    (**(code **)(*grim_interface_ptr + 0xe8))();
    (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,0x3f800000);
    (**(code **)(*grim_interface_ptr + 0x100))(0,0,0x3f800000,0x3f800000);
    (**(code **)(*grim_interface_ptr + 0xfc))(0);
    (**(code **)(*grim_interface_ptr + 0x100))(0,0,0x3f800000,0x3f800000);
    iVar5 = 0;
    iVar2 = (int)(terrain_texture_height + (terrain_texture_height >> 0x1f & 0xffU)) >> 8;
    if (iVar2 != -1 && -1 < iVar2 + 1) {
      iVar6 = 0;
      iVar2 = terrain_texture_width;
      do {
        iVar4 = 0;
        iVar3 = (int)(iVar2 + (iVar2 >> 0x1f & 0xffU)) >> 8;
        if (iVar3 != -1 && -1 < iVar3 + 1) {
          fVar7 = (float)iVar6;
          iVar3 = 0;
          do {
            (**(code **)(*grim_interface_ptr + 0x11c))
                      ((float)iVar3 + _camera_offset_x,fVar7 + _camera_offset_y,0x43800000,
                       0x43800000);
            iVar3 = iVar3 + 0x100;
            iVar4 = iVar4 + 1;
            iVar2 = terrain_texture_width;
          } while (iVar4 < ((int)(terrain_texture_width + (terrain_texture_width >> 0x1f & 0xffU))
                           >> 8) + 1);
        }
        iVar5 = iVar5 + 1;
        iVar6 = iVar6 + 0x100;
      } while (iVar5 < ((int)(terrain_texture_height + (terrain_texture_height >> 0x1f & 0xffU)) >>
                       8) + 1);
    }
    (**(code **)(*grim_interface_ptr + 0xf0))();
    (**(code **)(*grim_interface_ptr + 0x20))(0x15,2);
    (**(code **)(*grim_interface_ptr + 0x20))(0x12,1);
    return;
  }
  (**(code **)(*grim_interface_ptr + 0xc4))(terrain_render_target,0);
  (**(code **)(*grim_interface_ptr + 0xfc))(0);
  (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,0x3f800000);
  fVar7 = -(_camera_offset_x / (float)terrain_texture_width);
  fVar1 = -(_camera_offset_y / (float)terrain_texture_height);
  (**(code **)(*grim_interface_ptr + 0x100))
            (fVar7,fVar1,(float)config_screen_width / (float)terrain_texture_width + fVar7,
             (float)config_screen_height / (float)terrain_texture_height + fVar1);
  (**(code **)(*grim_interface_ptr + 200))(0);
  (**(code **)(*grim_interface_ptr + 0x20))(0x15,2);
  return;
}



/* creature_render_type @ 00418b60 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* renders active creatures matching type_id using 8x8 atlases and animation strips */

void __cdecl creature_render_type(int type_id)

{
  float fVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  float *pfVar5;
  undefined4 *puVar6;
  int iVar7;
  longlong lVar8;
  undefined4 uVar9;
  float fVar10;
  float fStack_6c;
  float fStack_58;
  undefined4 uStack_54;
  float fStack_50;
  float fStack_3c;
  
  iVar7 = type_id * 0x44;
  fStack_50 = 0.0;
  uStack_54 = *(undefined4 *)(&creature_type_texture + iVar7);
  fStack_58 = 6.019367e-39;
  (**(code **)(*grim_interface_ptr + 0xc4))();
  fStack_58 = 1.0;
  (**(code **)(*grim_interface_ptr + 0x100))();
  if (config_fx_detail_flag0 != '\0') {
    fStack_6c = 6.019442e-39;
    iVar2 = perk_count_get(perk_id_monster_vision);
    if (iVar2 == 0) {
      (**(code **)(*grim_interface_ptr + 0x20))(0x13,1);
      (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
      (**(code **)(*grim_interface_ptr + 0xe8))();
      pfVar5 = (float *)&creature_hitbox_size;
      do {
        if ((*(char *)(pfVar5 + -4) != '\0') && (pfVar5[0x17] == (float)type_id)) {
          fVar10 = pfVar5[0x1f];
          fStack_50 = pfVar5[0xb];
          if ((((uint)fVar10 & 4) == 0) || (((uint)fVar10 & 0x40) != 0)) {
            if (16.0 <= *pfVar5) {
              lVar8 = __ftol();
              iVar2 = (int)lVar8;
              if ((((&creature_type_anim_flags)[iVar7] & 1) != 0) && (0xf < iVar2)) {
                iVar2 = 0x1f - iVar2;
              }
            }
            else if (0.0 <= *pfVar5) {
              lVar8 = __ftol();
              iVar2 = (int)lVar8;
            }
            else {
              iVar2 = *(int *)(&creature_type_base_frame + iVar7) + 0xf;
            }
            if (((uint)fVar10 & 0x10) != 0) {
              iVar2 = iVar2 + 0x20;
            }
            (**(code **)(*grim_interface_ptr + 0x104))(8,iVar2);
          }
          else {
            lVar8 = __ftol();
            uVar3 = (uint)lVar8 & 0x8000000f;
            if ((int)uVar3 < 0) {
              uVar3 = (uVar3 - 1 | 0xfffffff0) + 1;
            }
            if (7 < (int)uVar3) {
              uVar3 = 0xf - uVar3;
            }
            (**(code **)(*grim_interface_ptr + 0x104))
                      (8,*(int *)(&creature_type_base_frame + iVar7) + 0x10 + uVar3);
          }
          (**(code **)(*grim_interface_ptr + 0x110))(&fStack_58);
          (**(code **)(*grim_interface_ptr + 0xfc))(pfVar5[7] - 1.5707964);
          fVar10 = pfVar5[9] * 0.5 + 0.7;
          (**(code **)(*grim_interface_ptr + 0x11c))
                    ((_camera_offset_x + pfVar5[1]) - fVar10,(_camera_offset_y + pfVar5[2]) - fVar10
                     ,pfVar5[9] * 1.07,pfVar5[9] * 1.07);
          type_id = (int)fStack_3c;
        }
        pfVar5 = pfVar5 + 0x26;
      } while ((int)pfVar5 < 0x4aa348);
      (**(code **)(*grim_interface_ptr + 0xf0))();
    }
  }
  (**(code **)(*grim_interface_ptr + 0x20))(0x13,5);
  uVar9 = 0x14;
  fVar10 = 8.40779e-45;
  (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
  (**(code **)(*grim_interface_ptr + 0xe8))();
  if (_bonus_energizer_timer <= 0.0) {
    puVar6 = &creature_anim_phase;
    do {
      if ((*(char *)(puVar6 + -0x25) != '\0') && ((float)puVar6[-10] == fStack_3c)) {
        uVar3 = puVar6[-2];
        fStack_50 = (float)puVar6[-0x16];
        if (((uVar3 & 4) == 0) || ((uVar3 & 0x40) != 0)) {
          if (16.0 <= (float)puVar6[-0x21]) {
            lVar8 = __ftol();
            iVar2 = (int)lVar8;
            if ((((&creature_type_anim_flags)[iVar7] & 1) != 0) && (0xf < iVar2)) {
              iVar2 = 0x1f - iVar2;
            }
          }
          else if (0.0 <= (float)puVar6[-0x21]) {
            lVar8 = __ftol();
            iVar2 = (int)lVar8;
          }
          else {
            iVar2 = *(int *)(&creature_type_base_frame + iVar7) + 0xf;
          }
          if ((uVar3 & 0x10) != 0) {
            iVar2 = iVar2 + 0x20;
          }
          (**(code **)(*grim_interface_ptr + 0x104))(8,iVar2);
        }
        else {
          lVar8 = __ftol();
          uVar3 = (uint)lVar8 & 0x8000000f;
          if ((int)uVar3 < 0) {
            uVar3 = (uVar3 - 1 | 0xfffffff0) + 1;
          }
          if (7 < (int)uVar3) {
            uVar3 = 0xf - uVar3;
          }
          (**(code **)(*grim_interface_ptr + 0x104))
                    (8,*(int *)(&creature_type_base_frame + iVar7) + 0x10 + uVar3);
        }
        (**(code **)(*grim_interface_ptr + 0x110))(&fStack_58);
        (**(code **)(*grim_interface_ptr + 0xfc))((float)puVar6[-0x1a] - 1.5707964);
        uVar9 = puVar6[-0x18];
        (**(code **)(*grim_interface_ptr + 0x11c))
                  ((_camera_offset_x + (float)puVar6[-0x20]) - (float)puVar6[-0x18] * 0.5,
                   (_camera_offset_y + (float)puVar6[-0x1f]) - (float)puVar6[-0x18] * 0.5,uVar9,
                   uVar9);
        if (((float)puVar6[-0x21] < -10.0) &&
           (*(undefined1 *)(puVar6 + -0x25) = 0, (*(byte *)(puVar6 + -2) & 4) != 0)) {
          (&creature_spawn_slot_owner)[puVar6[-7] * 6] = 0;
        }
      }
      puVar6 = puVar6 + 0x26;
    } while ((int)puVar6 < 0x4aa3cc);
  }
  else {
    pfVar5 = (float *)&creature_max_health;
    do {
      if ((*(char *)(pfVar5 + -10) != '\0') && (pfVar5[0x11] == (float)type_id)) {
        if (500.0 <= *pfVar5) {
          fStack_50 = pfVar5[5];
        }
        else {
          fVar10 = _bonus_energizer_timer;
          if (1.0 <= _bonus_energizer_timer) {
            fVar10 = 1.0;
          }
          fStack_50 = (1.0 - fVar10) * pfVar5[5] + fVar10 * 0.5;
        }
        fVar10 = pfVar5[0x19];
        if ((((uint)fVar10 & 4) == 0) || (((uint)fVar10 & 0x40) != 0)) {
          if (16.0 <= pfVar5[-6]) {
            lVar8 = __ftol();
            iVar2 = (int)lVar8;
            if ((((&creature_type_anim_flags)[iVar7] & 1) != 0) && (0xf < iVar2)) {
              iVar2 = 0x1f - iVar2;
            }
          }
          else if (0.0 <= pfVar5[-6]) {
            lVar8 = __ftol();
            iVar2 = (int)lVar8;
          }
          else {
            iVar2 = *(int *)(&creature_type_base_frame + iVar7) + 0xf;
          }
          if (((uint)fVar10 & 0x10) != 0) {
            iVar2 = iVar2 + 0x20;
          }
          (**(code **)(*grim_interface_ptr + 0x104))(8,iVar2);
        }
        else {
          lVar8 = __ftol();
          uVar3 = (uint)lVar8 & 0x8000000f;
          if ((int)uVar3 < 0) {
            uVar3 = (uVar3 - 1 | 0xfffffff0) + 1;
          }
          if (7 < (int)uVar3) {
            uVar3 = 0xf - uVar3;
          }
          (**(code **)(*grim_interface_ptr + 0x104))
                    (8,*(int *)(&creature_type_base_frame + iVar7) + 0x10 + uVar3);
        }
        (**(code **)(*grim_interface_ptr + 0x110))(&fStack_58);
        (**(code **)(*grim_interface_ptr + 0xfc))(pfVar5[1] - 1.5707964);
        fVar10 = pfVar5[3];
        fStack_6c = _camera_offset_y + pfVar5[-4];
        (**(code **)(*grim_interface_ptr + 0x11c))
                  ((_camera_offset_x + pfVar5[-5]) - pfVar5[3] * 0.5,fStack_6c - pfVar5[3] * 0.5,
                   fVar10,fVar10);
        if ((pfVar5[-6] < -10.0) &&
           (*(undefined1 *)(pfVar5 + -10) = 0, ((uint)pfVar5[0x19] & 4) != 0)) {
          (&creature_spawn_slot_owner)[(int)pfVar5[0x14] * 6] = 0;
        }
      }
      pfVar5 = pfVar5 + 0x26;
    } while ((int)pfVar5 < 0x4aa360);
  }
  (**(code **)(*grim_interface_ptr + 0xf0))(uVar9,fVar10);
  if (config_fx_toggle != '\0') {
    (**(code **)(*grim_interface_ptr + 0x20))(0x14,2);
    fStack_6c = 1.0;
    fStack_58 = 1.0;
    (**(code **)(*grim_interface_ptr + 0xe8))();
    pfVar5 = (float *)&creature_hitbox_size;
    do {
      if (((*(char *)(pfVar5 + -4) != '\0') && (pfVar5[0x17] == fStack_50)) && (0.0 < pfVar5[10])) {
        fStack_58 = pfVar5[10] * 5.0;
        if (1.0 < fStack_58) {
          fStack_58 = 1.0;
        }
        fVar10 = pfVar5[0x1f];
        if ((((uint)fVar10 & 4) == 0) || (((uint)fVar10 & 0x40) != 0)) {
          if (16.0 <= *pfVar5) {
            lVar8 = __ftol();
            iVar2 = (int)lVar8;
            if ((((&creature_type_anim_flags)[iVar7] & 1) != 0) && (0xf < iVar2)) {
              iVar2 = 0x1f - iVar2;
            }
            if (((uint)fVar10 & 0x10) != 0) {
              iVar2 = iVar2 + 0x20;
            }
          }
          else if (0.0 <= *pfVar5) {
            lVar8 = __ftol();
            iVar2 = (int)lVar8;
          }
          else {
            iVar2 = *(int *)(&creature_type_base_frame + iVar7) + 0xf;
          }
          iVar4 = *grim_interface_ptr;
        }
        else {
          lVar8 = __ftol();
          uVar3 = (uint)lVar8 & 0x8000000f;
          if ((int)uVar3 < 0) {
            uVar3 = (uVar3 - 1 | 0xfffffff0) + 1;
          }
          if (7 < (int)uVar3) {
            uVar3 = 0xf - uVar3;
          }
          iVar4 = *grim_interface_ptr;
          iVar2 = *(int *)(&creature_type_base_frame + iVar7) + 0x10 + uVar3;
        }
        (**(code **)(iVar4 + 0x104))(8,iVar2);
        (**(code **)(*grim_interface_ptr + 0x110))(&fStack_6c);
        (**(code **)(*grim_interface_ptr + 0xfc))(pfVar5[7] - 1.5707964);
        fVar1 = (_camera_offset_x + pfVar5[1]) - pfVar5[9] * 0.5;
        fVar10 = (_camera_offset_y + pfVar5[2]) - pfVar5[9] * 0.5;
        (**(code **)(*grim_interface_ptr + 0x11c))(fVar1,fVar10,pfVar5[9],pfVar5[9]);
        (**(code **)(*grim_interface_ptr + 0x11c))(fVar1,fVar10,pfVar5[9],pfVar5[9]);
      }
      pfVar5 = pfVar5 + 0x26;
    } while ((int)pfVar5 < 0x4aa348);
    (**(code **)(*grim_interface_ptr + 0xf0))();
    (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
  }
  return;
}



/* creature_render_all @ 00419680 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* creature render pass: overlays + per-type draws via creature_render_type */

void creature_render_all(void)

{
  int iVar1;
  float *pfVar2;
  int iVar3;
  undefined4 uVar4;
  float fVar5;
  undefined4 uVar6;
  float fVar7;
  
  if ((((0.0 < ui_transition_alpha) && (game_state_id != 0x14)) && (game_state_id != 0x16)) &&
     ((game_state_prev != 0x14 && (game_state_prev != 0x16)))) {
    (**(code **)(*grim_interface_ptr + 0x20))(0x13,5);
    (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
    (**(code **)(*grim_interface_ptr + 0xc4))(particles_texture,0);
    effect_select_texture(0x10);
    fVar7 = 0.0;
    (**(code **)(*grim_interface_ptr + 0x114))(0,0,0,0x3f800000);
    (**(code **)(*grim_interface_ptr + 0xfc))(0);
    (**(code **)(*grim_interface_ptr + 0xe8))();
    pfVar2 = (float *)&creature_hitbox_size;
    do {
      if (*(char *)(pfVar2 + -4) != '\0') {
        iVar1 = perk_count_get(perk_id_monster_vision);
        if (iVar1 != 0) {
          if ((0.0 <= *pfVar2) || (fVar5 = (*pfVar2 + 10.0) * 0.1, 1.0 < fVar5)) {
            fVar5 = 1.0;
          }
          else if (fVar5 < 0.0) {
            fVar5 = 0.0;
          }
          (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0,fVar5 * fVar7);
          (**(code **)(*grim_interface_ptr + 0x11c))
                    ((_camera_offset_x + pfVar2[1]) - 45.0,(_camera_offset_y + pfVar2[2]) - 45.0,
                     0x42b40000,0x42b40000);
        }
        if (*(char *)((int)pfVar2 + -7) != '\0') {
          if (0.0 <= *pfVar2) {
            fVar5 = 1.0;
          }
          else {
            fVar5 = (*pfVar2 + 10.0) * 0.1;
          }
          (**(code **)(*grim_interface_ptr + 0x114))(0,0,0,fVar5 * fVar7);
          (**(code **)(*grim_interface_ptr + 0x11c))
                    ((_camera_offset_x + pfVar2[1]) - 40.0,(_camera_offset_y + pfVar2[2]) - 40.0,
                     0x42a00000,0x42a00000);
        }
        if (((uint)pfVar2[0x1f] & 1) != 0) {
          if (0.0 <= *pfVar2) {
            fVar5 = 1.0;
          }
          else {
            fVar5 = (*pfVar2 + 10.0) * 0.1;
          }
          (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0,0,fVar5 * fVar7);
          (**(code **)(*grim_interface_ptr + 0x11c))
                    ((_camera_offset_x + pfVar2[1]) - 30.0,(_camera_offset_y + pfVar2[2]) - 30.0,
                     0x42700000,0x42700000);
        }
      }
      pfVar2 = pfVar2 + 0x26;
    } while ((int)pfVar2 < 0x4aa348);
    (**(code **)(*grim_interface_ptr + 0xf0))();
    creature_render_type(0);
    fVar5 = fVar7;
    creature_render_type(3);
    creature_render_type(4);
    uVar6 = 2;
    creature_render_type(2);
    creature_render_type(1);
    if (0.0 < _bonus_freeze_timer) {
      (**(code **)(*grim_interface_ptr + 0x20))(0x13,5,fVar5);
      (**(code **)(*grim_interface_ptr + 0x20))(0x14,6,uVar6,fVar7);
      (**(code **)(*grim_interface_ptr + 0xc4))(particles_texture,0);
      effect_select_texture(0xe);
      fVar5 = 0.0;
      uVar4 = 0;
      (**(code **)(*grim_interface_ptr + 0x114))(0,0,0,0x3f800000);
      uVar6 = 0;
      (**(code **)(*grim_interface_ptr + 0xfc))(0);
      fVar7 = 1.0;
      if (_bonus_freeze_timer < 1.0) {
        if (_bonus_freeze_timer <= 1.0) {
          fVar7 = _bonus_freeze_timer;
          if (_bonus_freeze_timer < 0.0) {
            fVar7 = 0.0;
          }
        }
        else {
          fVar7 = 1.0;
        }
      }
      fVar7 = fVar7 * fVar5 * 0.7;
      (**(code **)(*grim_interface_ptr + 0xe8))();
      iVar1 = 0;
      pfVar2 = (float *)&creature_size;
      do {
        if (*(char *)(pfVar2 + -0xd) != '\0') {
          iVar3 = 0x3f800000;
          (**(code **)(*grim_interface_ptr + 0x114))
                    (0x3f800000,0x3f800000,0x3f800000,fVar7,uVar6,uVar4,iVar1);
          (**(code **)(*grim_interface_ptr + 0xfc))((float)iVar3 * 0.01 + pfVar2[-2]);
          (**(code **)(*grim_interface_ptr + 0x11c))
                    ((_camera_offset_x + pfVar2[-8]) - *pfVar2 * 0.5,
                     (_camera_offset_y + pfVar2[-7]) - *pfVar2 * 0.5,*pfVar2,*pfVar2);
        }
        pfVar2 = pfVar2 + 0x26;
        iVar1 = iVar1 + 1;
      } while ((int)pfVar2 < 0x4aa36c);
      (**(code **)(*grim_interface_ptr + 0xf0))();
      (**(code **)(*grim_interface_ptr + 0x20))(0x13,5);
      (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
    }
    (**(code **)(*grim_interface_ptr + 0x114))(0,0x3f800000,0x3f800000,0x3f800000);
  }
  return;
}



/* ui_element_set_rect @ 00419ba0 */

/* sets element quad vertices/UVs for a size and offset */

void __cdecl ui_element_set_rect(void *element,float width,float height,float *offset)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float *pfVar4;
  int iVar5;
  
  fVar1 = 1.0 / width;
  *(undefined4 *)element = 0x3f800000;
  *(undefined4 *)((int)element + 4) = 0x3f800000;
  fVar3 = 1.0 / height;
  *(float *)((int)element + 0x1c) = width - 1.0;
  *(undefined4 *)((int)element + 0x20) = 0x3f800000;
  *(undefined4 *)((int)element + 0x54) = 0x3f800000;
  *(float *)((int)element + 0x58) = height - 1.0;
  *(float *)((int)element + 0x38) = width - 1.0;
  *(float *)((int)element + 0x3c) = height - 1.0;
  *(float *)((int)element + 0x14) = fVar1;
  fVar2 = 1.0 - fVar1;
  *(float *)((int)element + 0x18) = fVar3;
  *(float *)((int)element + 0x30) = fVar2;
  *(float *)((int)element + 0x34) = fVar3;
  *(float *)((int)element + 0x68) = fVar1;
  *(float *)((int)element + 0x4c) = fVar2;
  *(float *)((int)element + 0x6c) = fVar2;
  *(float *)((int)element + 0x50) = 1.0 - fVar3;
  iVar5 = 4;
  pfVar4 = (float *)((int)element + 4);
  do {
    pfVar4[3] = -NAN;
    pfVar4[1] = 0.5;
    pfVar4[2] = 1.0;
    iVar5 = iVar5 + -1;
    pfVar4[-1] = pfVar4[-1] + *offset;
    *pfVar4 = *pfVar4 + offset[1];
    pfVar4 = pfVar4 + 7;
  } while (iVar5 != 0);
  return;
}



/* ui_element_load @ 00419d00 */

/* loads a UI element JAZ asset and logs failures */

void __cdecl ui_element_load(void *element,char *jaz_path)

{
  char cVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  char *pcVar5;
  char *pcVar6;
  char local_100 [248];
  int iStack_8;
  
  uVar3 = 0xffffffff;
  pcVar5 = jaz_path;
  do {
    pcVar6 = pcVar5;
    if (uVar3 == 0) break;
    uVar3 = uVar3 - 1;
    pcVar6 = pcVar5 + 1;
    cVar1 = *pcVar5;
    pcVar5 = pcVar6;
  } while (cVar1 != '\0');
  uVar3 = ~uVar3;
  pcVar5 = pcVar6 + -uVar3;
  pcVar6 = local_100;
  for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1) {
    *(undefined4 *)pcVar6 = *(undefined4 *)pcVar5;
    pcVar5 = pcVar5 + 4;
    pcVar6 = pcVar6 + 4;
  }
  for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
    *pcVar6 = *pcVar5;
    pcVar5 = pcVar5 + 1;
    pcVar6 = pcVar6 + 1;
  }
  uVar3 = 0xffffffff;
  pcVar5 = jaz_path;
  do {
    if (uVar3 == 0) break;
    uVar3 = uVar3 - 1;
    cVar1 = *pcVar5;
    pcVar5 = pcVar5 + 1;
  } while (cVar1 != '\0');
  local_100[~uVar3 - 5] = '\0';
  if (*(float *)(DAT_00480854 + 0xc) == 0.0) {
    console_printf(&console_log_queue,(byte *)s_Loading_uiElement__s_004737b4);
  }
  (**(code **)(*grim_interface_ptr + 0xb4))(local_100,jaz_path);
  iVar2 = (**(code **)(*grim_interface_ptr + 0xc0))(&stack0xfffffef8);
  *(int *)(iStack_8 + 0xe0) = iVar2;
  if (iVar2 == -1) {
    console_printf(&console_log_queue,(byte *)s___FAILED_Loading_uiElement__s_00473794);
  }
  return;
}



/* ui_menu_assets_init @ 00419dd0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* loads menu UI elements and seeds layout copies */

void ui_menu_assets_init(void)

{
  float *pfVar1;
  float *pfVar2;
  int iVar3;
  undefined4 *puVar4;
  undefined4 *puVar5;
  float local_8 [2];
  
  ui_element_load(&DAT_0048fac0,s_ui_ui_signCrimson_jaz_004737f4);
  local_8[0] = -577.44;
  local_8[1] = -62.0;
  ui_element_set_rect(&DAT_0048fac0,573.44,143.36,local_8);
  ui_element_load(&DAT_0048fba8,s_ui_ui_menuItem_jaz_004737e0);
  local_8[0] = -72.0;
  local_8[1] = -60.0;
  ui_element_set_rect(&DAT_0048fba8,512.0,64.0,local_8);
  ui_element_load(&DAT_0048fc90,s_ui_ui_menuPanel_jaz_004737cc);
  local_8[0] = 20.0;
  local_8[1] = -82.0;
  ui_element_set_rect(&DAT_0048fc90,512.0,256.0,local_8);
  puVar4 = &DAT_0048fc90;
  puVar5 = &DAT_0048fd78;
  for (iVar3 = 0x3a; iVar3 != 0; iVar3 = iVar3 + -1) {
    *puVar5 = *puVar4;
    puVar4 = puVar4 + 1;
    puVar5 = puVar5 + 1;
  }
  _DAT_0048fe5c = 8;
  puVar4 = &DAT_0048fdcc;
  puVar5 = &DAT_0048fe3c;
  for (iVar3 = 7; iVar3 != 0; iVar3 = iVar3 + -1) {
    *puVar5 = *puVar4;
    puVar4 = puVar4 + 1;
    puVar5 = puVar5 + 1;
  }
  puVar4 = &DAT_0048fdb0;
  puVar5 = &DAT_0048fe20;
  for (iVar3 = 7; iVar3 != 0; iVar3 = iVar3 + -1) {
    *puVar5 = *puVar4;
    puVar4 = puVar4 + 1;
    puVar5 = puVar5 + 1;
  }
  DAT_0048fdb4 = DAT_0048fdb4 - 116.0;
  DAT_0048fdd0 = DAT_0048fdd0 - 116.0;
  _DAT_0048fdc8 = 0x3f020000;
  _DAT_0048fde4 = 0x3f020000;
  puVar4 = &DAT_0048fdcc;
  puVar5 = &DAT_0048fde8;
  for (iVar3 = 7; iVar3 != 0; iVar3 = iVar3 + -1) {
    *puVar5 = *puVar4;
    puVar4 = puVar4 + 1;
    puVar5 = puVar5 + 1;
  }
  puVar4 = &DAT_0048fdb0;
  puVar5 = &DAT_0048fe04;
  for (iVar3 = 7; iVar3 != 0; iVar3 = iVar3 + -1) {
    *puVar5 = *puVar4;
    puVar4 = puVar4 + 1;
    puVar5 = puVar5 + 1;
  }
  DAT_0048fdec = DAT_0048fdec + 124.0;
  DAT_0048fe08 = DAT_0048fe08 + 124.0;
  DAT_0048fe24 = DAT_0048fe24 + 124.0;
  _DAT_0048fe00 = 0x3f160000;
  _DAT_0048fe1c = 0x3f160000;
  DAT_0048fe40 = DAT_0048fe40 + 124.0;
  pfVar1 = (float *)&DAT_0048fd78;
  do {
    pfVar1[1] = pfVar1[1];
    pfVar2 = pfVar1 + 7;
    *pfVar1 = *pfVar1 - 84.0;
    pfVar1 = pfVar2;
  } while ((int)pfVar2 < 0x48fe58);
  puVar4 = &DAT_0048fd78;
  puVar5 = &DAT_0048fe60;
  for (iVar3 = 0x3a; iVar3 != 0; iVar3 = iVar3 + -1) {
    *puVar5 = *puVar4;
    puVar4 = puVar4 + 1;
    puVar5 = puVar5 + 1;
  }
  _DAT_0048fed4 = DAT_0048fdec - 100.0;
  _DAT_0048fef0 = _DAT_0048fef0 - 100.0;
  _DAT_0048ff0c = _DAT_0048ff0c - 100.0;
  _DAT_0048ff28 = _DAT_0048ff28 - 100.0;
  FUN_0044fcb0();
  return;
}



/* ui_cursor_render @ 0041a040 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* renders the in-game cursor/crosshair sprites */

void ui_cursor_render(void)

{
  int iVar1;
  float10 fVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  float fVar5;
  
  _DAT_004902e8 = frame_dt + _DAT_004902e8;
  _DAT_004902ec = frame_dt * 1.1 + _DAT_004902ec;
  (**(code **)(*grim_interface_ptr + 0x20))(0x13,5);
  (**(code **)(*grim_interface_ptr + 0x20))(0x14,2);
  (**(code **)(*grim_interface_ptr + 0xc4))(particles_texture,0);
  effect_select_texture(0xd);
  uVar4 = 0x3f800000;
  uVar3 = 0x3f800000;
  (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,0x3f800000);
  (**(code **)(*grim_interface_ptr + 0xe8))();
  fVar2 = (float10)fsin((float10)_DAT_004902ec);
  iVar1 = *grim_interface_ptr;
  fVar5 = (float)fVar2;
  fVar2 = (float10)FUN_00461140();
  (**(code **)(iVar1 + 0x114))
            (0x3f800000,0x3f800000,0x3f800000,(float)((fVar2 + (float10)2.0) * (float10)0.32),uVar3,
             uVar4,fVar5);
  (**(code **)(*grim_interface_ptr + 0x11c))
            (ui_mouse_x - 28.0,ui_mouse_y - 28.0,0x42800000,0x42800000);
  (**(code **)(*grim_interface_ptr + 0x11c))
            (ui_mouse_x - 10.0,ui_mouse_y - 18.0,0x42800000,0x42800000);
  (**(code **)(*grim_interface_ptr + 0x11c))
            (ui_mouse_x - 18.0,ui_mouse_y - 10.0,0x42800000,0x42800000);
  (**(code **)(*grim_interface_ptr + 0x11c))
            ((ui_mouse_x - 64.0) + 16.0,(ui_mouse_y - 64.0) + 16.0,0x43000000,0x43000000);
  (**(code **)(*grim_interface_ptr + 0xf0))();
  (**(code **)(*grim_interface_ptr + 0x20))(0x13,5);
  (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
  (**(code **)(*grim_interface_ptr + 0xc4))(DAT_0048f798,0);
  (**(code **)(*grim_interface_ptr + 0x100))(0,0,0x3f800000,0x3f800000);
  (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,0x3f800000);
  (**(code **)(*grim_interface_ptr + 0xfc))(0);
  (**(code **)(*grim_interface_ptr + 0xe8))();
  (**(code **)(*grim_interface_ptr + 0x11c))
            (ui_mouse_x - 2.0,ui_mouse_y - 2.0,0x42000000,0x42000000);
  (**(code **)(*grim_interface_ptr + 0xf0))();
  return;
}



/* FUN_0041a320 @ 0041a320 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_0041a320(void)

{
  float *pfVar1;
  
  _DAT_004902f0 = frame_dt + _DAT_004902f0;
  _DAT_004902f4 = frame_dt * 0.6 + _DAT_004902f4;
  (**(code **)(*grim_interface_ptr + 0x20))(0x13,5);
  (**(code **)(*grim_interface_ptr + 0x20))(0x14,2);
  (**(code **)(*grim_interface_ptr + 0xc4))(particles_texture,0);
  effect_select_texture(0xd);
  if (1.0 < *(float *)(DAT_0048087c + 0xc)) {
    *(undefined4 *)(DAT_0048087c + 0xc) = 0x3f800000;
  }
  if (*(float *)(DAT_0048087c + 0xc) < 0.0) {
    *(undefined4 *)(DAT_0048087c + 0xc) = 0;
  }
  pfVar1 = (float *)0x3f800000;
  (**(code **)(*grim_interface_ptr + 0x114))
            (0x3f800000,0x3f800000,0x3f800000,*(undefined4 *)(DAT_0048087c + 0xc));
  (**(code **)(*grim_interface_ptr + 0xe8))();
  (**(code **)(*grim_interface_ptr + 0x11c))(*pfVar1 - 32.0,pfVar1[1] - 32.0,0x42800000,0x42800000);
  (**(code **)(*grim_interface_ptr + 0xf0))();
  (**(code **)(*grim_interface_ptr + 0x20))(0x13,5);
  (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
  (**(code **)(*grim_interface_ptr + 0xc4))(DAT_0048f79c,0);
  (**(code **)(*grim_interface_ptr + 0x100))(0,0,0x3f800000,0x3f800000);
  (**(code **)(*grim_interface_ptr + 0x114))
            (0x3f800000,0x3f800000,0x3f800000,*(undefined4 *)(DAT_0048087c + 0xc));
  (**(code **)(*grim_interface_ptr + 0xe8))();
  (**(code **)(*grim_interface_ptr + 0x11c))(*pfVar1 - 10.0,pfVar1[1] - 10.0,0x41a00000,0x41a00000);
  (**(code **)(*grim_interface_ptr + 0xf0))();
  return;
}



/* ui_elements_update_and_render @ 0041a530 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* advances UI timeline, handles transitions, updates + renders all UI elements */

void ui_elements_update_and_render(void)

{
  int iVar1;
  undefined4 *puVar2;
  float10 fVar3;
  float10 fVar4;
  
  (**(code **)(*grim_interface_ptr + 0x20))(0x15,2);
  if (DAT_0047eec8 == '\0') {
    iVar1 = frame_dt_ms;
    if (ui_transition_direction == '\0') {
      iVar1 = -frame_dt_ms;
    }
    ui_elements_timeline = ui_elements_timeline + iVar1;
  }
  if (ui_elements_timeline < 0) {
    ui_elements_timeline = 0;
    if ((demo_mode_active != '\0') && (game_state_pending == 0)) {
      terrain_generate_random();
    }
    game_state_set(game_state_pending);
    game_state_pending = 0x19;
  }
  iVar1 = ui_elements_max_timeline();
  if (iVar1 < ui_elements_timeline) {
    if ((game_state_id == 0) && (demo_mode_active != '\0')) {
      demo_mode_active = '\0';
      config_load_presets();
    }
    fVar3 = (float10)fcos((float10)0.0);
    DAT_00487292 = 1;
    _DAT_00487594 = (float)fVar3;
    fVar4 = (float10)fsin((float10)0.0);
    _DAT_00487598 = (float)-fVar4;
    _DAT_0048759c = (float)fVar4;
    _DAT_004875a0 = (float)fVar3;
    ui_elements_timeline = ui_elements_max_timeline();
  }
  if (game_state_id != 9) {
    puVar2 = &ui_element_table_start;
    do {
      FUN_00446900((char *)*puVar2);
      ui_element_render((void *)*puVar2);
      puVar2 = puVar2 + -1;
    } while (0x48f167 < (int)puVar2);
    (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,0x3f800000);
    if (game_state_id == 10) {
      DAT_0047ea50 = 1;
    }
    (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,0x3f800000);
    (**(code **)(*grim_interface_ptr + 0x20))(0x18,0x3f000000);
  }
  return;
}



/* ui_draw_progress_bar @ 0041a6d0 */

/* draws a filled progress bar with a tinted background */

void __cdecl ui_draw_progress_bar(float *xy,float width,float ratio,float *rgba)

{
  float fStack_28;
  float *pfStack_24;
  float local_18;
  float local_14;
  float local_10;
  float local_c;
  float local_8;
  float local_4;
  
  local_10 = *rgba * 0.6;
  pfStack_24 = &local_10;
  local_c = rgba[1] * 0.6;
  fStack_28 = 4.0;
  local_8 = rgba[2] * 0.6;
  local_4 = rgba[3] * 0.4;
  local_18 = *xy;
  local_14 = xy[1];
  (**(code **)(*grim_interface_ptr + 0xd0))(&local_18,width);
  fStack_28 = *xy + 1.0;
  pfStack_24 = (float *)(xy[1] + 1.0);
  (**(code **)(*grim_interface_ptr + 0xd0))(&fStack_28,(local_8 - 2.0) * local_4,0x40000000,rgba);
  return;
}



/* FUN_0041a810 @ 0041a810 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __cdecl
FUN_0041a810(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  int iVar1;
  int iVar2;
  undefined1 *puVar3;
  char *pcVar4;
  int iVar5;
  int *piVar6;
  
  iVar1 = 0;
  pcVar4 = &bonus_hud_slot_active;
  do {
    if (*pcVar4 == '\0') {
      iVar2 = iVar1 * 0x20;
      (&bonus_hud_slot_timer_ptr)[iVar1 * 8] = param_3;
      (&bonus_hud_slot_icon_id)[iVar1 * 8] = param_2;
      iVar5 = _config_player_count;
      *(undefined4 *)(&bonus_hud_slot_alt_timer_ptr + iVar2) = param_4;
      (&bonus_hud_slot_active)[iVar2] = 1;
      (&bonus_hud_slot_y)[iVar1 * 8] = 0xc3380000;
      (&bonus_hud_slot_label)[iVar1 * 8] = param_1;
      if (iVar5 < 2) {
        *(undefined4 *)(&bonus_hud_slot_alt_timer_ptr + iVar2) = 0;
      }
      iVar1 = 0;
      piVar6 = &bonus_hud_slot_timer_ptr;
      do {
        if ((char)piVar6[-3] != '\0') {
          iVar5 = 0x10;
          puVar3 = &DAT_0048f788;
          do {
            if ((*piVar6 == *(int *)(puVar3 + 0xc)) && (iVar1 != iVar5)) {
              *puVar3 = 0;
            }
            puVar3 = puVar3 + -0x20;
            iVar5 = iVar5 + -1;
          } while (0x48f587 < (int)puVar3);
        }
        piVar6 = piVar6 + 8;
        iVar1 = iVar1 + 1;
      } while ((int)piVar6 < 0x48f794);
      return;
    }
    pcVar4 = pcVar4 + 0x20;
    iVar1 = iVar1 + 1;
  } while ((int)pcVar4 < 0x48f788);
  return;
}



/* bonus_hud_slot_update_and_render @ 0041a8b0 */

/* updates bonus HUD slot animation and renders icon/timers */

void __cdecl bonus_hud_slot_update_and_render(float *xy,int slot)

{
  float fVar1;
  int iVar2;
  char *pcVar3;
  float fVar4;
  int iVar5;
  float *pfVar6;
  bool bVar7;
  undefined4 uVar8;
  float fStack_84;
  float fStack_80;
  float fStack_7c;
  undefined4 uStack_78;
  undefined4 uStack_74;
  undefined4 uStack_70;
  undefined4 uStack_6c;
  undefined4 uStack_68;
  undefined4 uStack_64;
  float fStack_60;
  float fStack_5c;
  undefined4 uStack_58;
  undefined4 uStack_54;
  undefined4 uStack_50;
  undefined4 uStack_4c;
  undefined4 uStack_48;
  float fStack_44;
  undefined4 uStack_40;
  undefined4 uStack_3c;
  undefined4 uStack_38;
  undefined4 uStack_34;
  undefined4 uStack_30;
  undefined4 uStack_2c;
  float *pfStack_28;
  float fStack_10;
  
  iVar5 = slot * 0x20;
  if ((&bonus_hud_slot_active)[iVar5] != '\0') {
    if ((0.0 < *(float *)(&bonus_hud_slot_timer_ptr)[slot * 8]) ||
       ((*(float **)(&bonus_hud_slot_alt_timer_ptr + iVar5) != (float *)0x0 &&
        (0.0 < **(float **)(&bonus_hud_slot_alt_timer_ptr + iVar5))))) {
      fVar4 = frame_dt * 350.0 + (float)(&bonus_hud_slot_y)[slot * 8];
    }
    else {
      fVar4 = (float)(&bonus_hud_slot_y)[slot * 8] - frame_dt * 320.0;
    }
    (&bonus_hud_slot_y)[slot * 8] = fVar4;
    if (-2.0 < (float)(&bonus_hud_slot_y)[slot * 8]) {
      (&bonus_hud_slot_y)[slot * 8] = 0xc0000000;
    }
    if ((float)(&bonus_hud_slot_y)[slot * 8] < -184.0) {
      iVar2 = 0xf;
      if (slot < 0x10) {
        pcVar3 = &DAT_0048f768;
        bVar7 = slot == 0xf;
        do {
          if (bVar7) {
            (&bonus_hud_slot_active)[iVar5] = '\0';
          }
          else if (*pcVar3 != '\0') break;
          iVar2 = iVar2 + -1;
          pcVar3 = pcVar3 + -0x20;
          bVar7 = slot == iVar2;
        } while (slot <= iVar2);
      }
      *xy = *xy + 52.0;
      return;
    }
    pfStack_28 = (float *)0x0;
    uStack_2c = DAT_0048f7c4;
    if (*(float *)(DAT_00480878 + 0xc) == 0.0) {
      uStack_30 = 0x41aa66;
      (**(code **)(*grim_interface_ptr + 0xc4))();
      uStack_30 = 0;
      uStack_34 = 0x41aa76;
      (**(code **)(*grim_interface_ptr + 0xfc))();
      uStack_34 = 0x3f800000;
      uStack_38 = 0x3f800000;
      uStack_3c = 0;
      uStack_40 = 0;
      fStack_44 = 6.030496e-39;
      (**(code **)(*grim_interface_ptr + 0x100))();
      fStack_44 = fStack_10 * 0.7;
      uStack_48 = 0x3f800000;
      uStack_4c = 0x3f800000;
      uStack_50 = 0x3f800000;
      uStack_54 = 0x41aac2;
      (**(code **)(*grim_interface_ptr + 0x114))();
      uStack_54 = 0x41aad0;
      (**(code **)(*grim_interface_ptr + 0xe8))();
      pfVar6 = pfStack_28;
      fStack_60 = (float)(&bonus_hud_slot_y)[slot * 8];
      uStack_54 = 0x42540000;
      fStack_5c = *pfStack_28 - 11.0;
      uStack_58 = 0x43360000;
      uStack_64 = 0x41aafc;
      (**(code **)(*grim_interface_ptr + 0x11c))();
      uStack_64 = 0x41ab0a;
      (**(code **)(*grim_interface_ptr + 0xf0))();
    }
    else {
      uStack_30 = 0x41a9a8;
      (**(code **)(*grim_interface_ptr + 0xc4))();
      uStack_30 = 0;
      uStack_34 = 0x41a9b8;
      (**(code **)(*grim_interface_ptr + 0xfc))();
      uStack_34 = 0x3f800000;
      uStack_38 = 0x3f800000;
      uStack_3c = 0;
      uStack_40 = 0;
      fStack_44 = 6.03023e-39;
      (**(code **)(*grim_interface_ptr + 0x100))();
      fStack_44 = fStack_10 * 0.7;
      uStack_48 = 0x3f800000;
      uStack_4c = 0x3f800000;
      uStack_50 = 0x3f800000;
      uStack_54 = 0x41aa04;
      (**(code **)(*grim_interface_ptr + 0x114))();
      uStack_54 = 0x41aa12;
      (**(code **)(*grim_interface_ptr + 0xe8))();
      pfVar6 = pfStack_28;
      uStack_54 = 0x41d40000;
      uStack_58 = 0x43360000;
      fStack_5c = *pfStack_28 + 5.0;
      fStack_60 = ((float)(&bonus_hud_slot_y)[slot * 8] - 100.0) + 4.0;
      uStack_64 = 0x41aa4d;
      (**(code **)(*grim_interface_ptr + 0x11c))();
      uStack_64 = 0x41aa5b;
      (**(code **)(*grim_interface_ptr + 0xf0))();
    }
    fVar4 = fStack_10 * 0.7;
    uStack_64 = uStack_30;
    uStack_68 = 0x3f800000;
    uStack_6c = 0x3f800000;
    uStack_70 = 0x3f800000;
    uStack_74 = 0x41ab2c;
    (**(code **)(*grim_interface_ptr + 0x114))();
    uStack_74 = 0;
    uStack_78 = bonus_texture;
    fStack_7c = 6.030744e-39;
    (**(code **)(*grim_interface_ptr + 0xc4))();
    fStack_7c = (float)(&bonus_hud_slot_icon_id)[slot * 8];
    fStack_80 = 5.60519e-45;
    fStack_84 = 6.030772e-39;
    (**(code **)(*grim_interface_ptr + 0x104))();
    fStack_84 = 32.0;
    (**(code **)(*grim_interface_ptr + 0x11c))
              ((float)(&bonus_hud_slot_y)[slot * 8] - 1.0,*pfVar6,0x42000000);
    (**(code **)(*grim_interface_ptr + 0xf0))();
    if (*(float *)(DAT_00480878 + 0xc) != 0.0) {
      if (*(int *)(&bonus_hud_slot_alt_timer_ptr + iVar5) == 0) {
        fStack_84 = (float)(&bonus_hud_slot_y)[slot * 8];
        fStack_80 = *pfVar6 + 21.0;
        fVar1 = *(float *)(&bonus_hud_slot_timer_ptr)[slot * 8];
      }
      else {
        fStack_84 = (float)(&bonus_hud_slot_y)[slot * 8] + 36.0;
        uStack_70 = uStack_64;
        fStack_7c = 0.1;
        uStack_78 = 0x3e99999a;
        uStack_74 = 0x3f19999a;
        fStack_80 = ((*pfVar6 + 21.0) - 4.0) - 4.0;
        ui_draw_progress_bar
                  (&fStack_84,32.0,*(float *)(&bonus_hud_slot_timer_ptr)[slot * 8] * 0.05,&fStack_7c
                  );
        fStack_84 = (float)(&bonus_hud_slot_y)[slot * 8];
        fStack_80 = *pfVar6 + 23.0;
        fVar1 = **(float **)(&bonus_hud_slot_alt_timer_ptr + iVar5);
      }
      fStack_80 = fStack_80 - 4.0;
      fStack_84 = fStack_84 + 36.0;
      uStack_74 = 0x3f19999a;
      uStack_78 = 0x3e99999a;
      fStack_7c = 0.1;
      uStack_70 = uStack_64;
      ui_draw_progress_bar(&fStack_84,32.0,fVar1 * 0.05,&fStack_7c);
      (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,fVar4);
      *pfVar6 = *pfVar6 + 52.0;
      return;
    }
    if (*(int *)(&bonus_hud_slot_alt_timer_ptr + iVar5) == 0) {
      fStack_84 = (float)(&bonus_hud_slot_y)[slot * 8] + 36.0;
      uStack_70 = uStack_64;
      fStack_80 = *pfVar6 + 21.0;
      fStack_7c = 0.1;
      uStack_78 = 0x3e99999a;
      uStack_74 = 0x3f19999a;
      ui_draw_progress_bar
                (&fStack_84,100.0,*(float *)(&bonus_hud_slot_timer_ptr)[slot * 8] * 0.05,&fStack_7c)
      ;
      (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,fVar4);
      uVar8 = (&bonus_hud_slot_label)[slot * 8];
      iVar5 = *grim_interface_ptr;
      fVar4 = *pfVar6 + 6.0;
    }
    else {
      fStack_84 = (float)(&bonus_hud_slot_y)[slot * 8] + 36.0;
      uStack_70 = uStack_64;
      fStack_7c = 0.1;
      fStack_80 = (*pfVar6 + 21.0) - 4.0;
      uStack_78 = 0x3e99999a;
      uStack_74 = 0x3f19999a;
      ui_draw_progress_bar
                (&fStack_84,100.0,*(float *)(&bonus_hud_slot_timer_ptr)[slot * 8] * 0.05,&fStack_7c)
      ;
      fStack_84 = (float)(&bonus_hud_slot_y)[slot * 8] + 36.0;
      fStack_80 = *pfVar6 + 23.0;
      uStack_70 = uStack_64;
      fStack_7c = 0.1;
      uStack_78 = 0x3e99999a;
      uStack_74 = 0x3f19999a;
      ui_draw_progress_bar
                (&fStack_84,100.0,**(float **)(&bonus_hud_slot_alt_timer_ptr + iVar5) * 0.05,
                 &fStack_7c);
      (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,fVar4);
      uVar8 = (&bonus_hud_slot_label)[slot * 8];
      iVar5 = *grim_interface_ptr;
      fVar4 = *pfVar6 + 2.0;
    }
    (**(code **)(iVar5 + 0x144))((float)(&bonus_hud_slot_y)[slot * 8] + 36.0,fVar4,uVar8);
    *pfVar6 = *pfVar6 + 52.0;
  }
  return;
}



/* ui_render_hud @ 0041aed0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* renders the in-game HUD (health, weapon icons, player UI) */

void ui_render_hud(void)

{
  char cVar1;
  undefined *puVar2;
  int *piVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  float10 fVar8;
  float10 extraout_ST0;
  longlong lVar9;
  char *pcVar10;
  float fVar11;
  float afStack_204 [12];
  int iStack_1d4;
  undefined4 uStack_1d0;
  undefined4 uStack_1cc;
  undefined *puStack_1c8;
  undefined4 uStack_1c4;
  float fStack_1c0;
  undefined4 *puStack_1bc;
  undefined4 uStack_1b8;
  undefined4 uStack_1b4;
  undefined4 uStack_1b0;
  float fStack_1ac;
  undefined4 uStack_1a8;
  undefined4 uStack_1a4;
  float fStack_1a0;
  undefined4 uStack_19c;
  undefined4 uStack_198;
  int *piStack_194;
  int *piStack_190;
  int *piStack_18c;
  undefined *puStack_188;
  undefined *puStack_184;
  undefined4 *puStack_180;
  int iStack_17c;
  float fStack_178;
  undefined4 uStack_174;
  float fStack_144;
  float *rgba;
  float fStack_100;
  float fStack_fc;
  float fStack_f8;
  float fStack_f4;
  float fStack_f0;
  char *pcStack_ec;
  char *pcStack_e8;
  undefined4 uStack_e4;
  float fStack_e0;
  float fStack_dc;
  int iStack_d8;
  float fStack_d4;
  undefined4 uStack_d0;
  float fStack_cc;
  float fStack_c8;
  undefined4 uStack_c0;
  float fStack_bc;
  undefined4 uStack_b8;
  undefined4 uStack_b4;
  undefined4 uStack_b0;
  undefined4 uStack_ac;
  undefined4 uStack_a8;
  float fStack_a4;
  undefined4 uStack_a0;
  undefined4 uStack_9c;
  undefined4 uStack_98;
  undefined4 uStack_94;
  undefined4 uStack_90;
  undefined4 uStack_8c;
  float fStack_88;
  char *pcStack_84;
  undefined4 uStack_80;
  undefined4 uStack_7c;
  undefined4 uStack_78;
  undefined4 uStack_74;
  float fStack_70;
  undefined4 uStack_6c;
  undefined4 uStack_68;
  undefined4 uStack_64;
  undefined4 uStack_60;
  undefined4 uStack_5c;
  undefined4 uStack_58;
  float fStack_50;
  undefined4 uStack_4c;
  undefined4 uStack_48;
  float fStack_24;
  
  uStack_48 = 0;
  uStack_4c = 0x41af18;
  (**(code **)(*grim_interface_ptr + 0xfc))();
  uStack_5c = 0x15;
  uStack_58 = 1;
  uStack_60 = 0x41af31;
  (**(code **)(*grim_interface_ptr + 0x20))();
  uStack_60 = 0x3f800000;
  uStack_64 = 0x3f800000;
  uStack_68 = 0;
  uStack_6c = 0;
  fStack_70 = 6.032193e-39;
  (**(code **)(*grim_interface_ptr + 0x100))();
  fStack_70 = fStack_24 * 0.7;
  uStack_74 = 0x3f800000;
  uStack_78 = 0x3f800000;
  uStack_7c = 0x3f800000;
  uStack_80 = 0x41af7d;
  fStack_50 = fStack_70;
  (**(code **)(*grim_interface_ptr + 0x114))();
  uStack_80 = 0;
  pcStack_84 = s_iGameUI_00473894;
  iVar7 = *grim_interface_ptr;
  fStack_88 = 6.03229e-39;
  fStack_88 = (float)(**(code **)(iVar7 + 0xc0))();
  uStack_8c = 0x41af9f;
  (**(code **)(iVar7 + 0xc4))();
  uStack_8c = 0;
  uStack_90 = 0x41afaf;
  (**(code **)(*grim_interface_ptr + 0xfc))();
  uStack_90 = 0x3f7c0000;
  uStack_94 = 0x3f7f8000;
  uStack_98 = 0x3c800000;
  uStack_9c = 0x3b000000;
  uStack_a0 = 0x41afd1;
  (**(code **)(*grim_interface_ptr + 0x100))();
  uStack_a0 = 0x3f800000;
  fStack_a4 = 1.0;
  uStack_a8 = 0;
  uStack_ac = 0;
  uStack_b0 = 0x41afed;
  (**(code **)(*grim_interface_ptr + 0x100))();
  uStack_b0 = 0x41affb;
  (**(code **)(*grim_interface_ptr + 0xe8))();
  uStack_b0 = 0x42800000;
  uStack_b4 = 0x44000000;
  uStack_b8 = 0;
  fStack_bc = 0.0;
  uStack_c0 = 0x41b017;
  (**(code **)(*grim_interface_ptr + 0x11c))();
  uStack_c0 = 0x41b025;
  (**(code **)(*grim_interface_ptr + 0xf0))();
  if (DAT_004871b0 != '\0') {
    uStack_d0 = 0x15;
    fStack_cc = 2.8026e-45;
    fStack_d4 = 6.032548e-39;
    (**(code **)(*grim_interface_ptr + 0x20))();
    if (_config_player_count == 1) {
      uStack_9c = 0x41a80000;
      uStack_90 = 0x41a80000;
    }
    else {
      uStack_9c = 0x41400000;
      uStack_90 = 0x41400000;
    }
    uStack_94 = 0x41d80000;
    uStack_a0 = 0x41d80000;
    fStack_d4 = fStack_88 * 0.8;
    iStack_d8 = 0x3f800000;
    fStack_dc = 1.0;
    fStack_e0 = 1.0;
    uStack_e4 = 0x41b0bf;
    (**(code **)(*grim_interface_ptr + 0x114))();
    uStack_e4 = 0;
    pcStack_e8 = s_iHeart_0047388c;
    iVar7 = *grim_interface_ptr;
    pcStack_ec = (char *)0x41b0d4;
    pcStack_ec = (char *)(**(code **)(iVar7 + 0xc0))();
    fStack_f0 = 6.03276e-39;
    (**(code **)(iVar7 + 0xc4))();
    fStack_f0 = 0.96875;
    fStack_f4 = 0.96875;
    fStack_f8 = 0.03125;
    fStack_fc = 0.03125;
    (**(code **)(*grim_interface_ptr + 0x100))();
    fStack_100 = 1.0;
    (**(code **)(*grim_interface_ptr + 0x100))();
    (**(code **)(*grim_interface_ptr + 0xe8))();
    fStack_f4 = 2.0;
    if (_config_player_count == 1) {
      if (player_health < 30.0) {
        fStack_f4 = 5.0;
      }
      fVar8 = (float10)fsin((float10)_DAT_0047ea4c * (float10)fStack_f4);
      fStack_dc = (float)fVar8;
      fVar8 = (float10)FUN_00461140();
      fVar8 = fVar8 * (float10)4.0 + (float10)14.0;
      iVar7 = *grim_interface_ptr;
      fVar8 = fVar8 + fVar8;
    }
    else {
      if (player_health < 30.0) {
        fStack_f4 = 5.0;
      }
      fVar8 = (float10)fsin((float10)_DAT_0047ea4c * (float10)fStack_f4);
      fStack_dc = (float)fVar8;
      fVar8 = (float10)FUN_00461140();
      fVar8 = (fVar8 * (float10)4.0 + (float10)14.0) * (float10)0.5;
      fStack_f8 = (float)(fVar8 + fVar8);
      (**(code **)(*grim_interface_ptr + 0x11c))();
      if (30.0 <= player2_health) {
        fVar8 = (float10)fStack_f4;
      }
      else {
        fVar8 = (float10)5.0;
      }
      fVar8 = (float10)fsin((float10)_DAT_0047ea4c * fVar8 + (float10)1.5707964);
      fStack_dc = (float)fVar8;
      fVar8 = (float10)FUN_00461140();
      iVar7 = *grim_interface_ptr;
      fVar8 = (fVar8 * (float10)4.0 + (float10)14.0) * (float10)0.5;
      fVar8 = fVar8 + fVar8;
    }
    fStack_f8 = (float)fVar8;
    (**(code **)(iVar7 + 0x11c))();
    (**(code **)(*grim_interface_ptr + 0xf0))();
  }
  uStack_d0 = 0x15;
  fStack_cc = 1.4013e-45;
  fStack_d4 = 6.033426e-39;
  (**(code **)(*grim_interface_ptr + 0x20))();
  if (DAT_004871b1 != '\0') {
    fStack_d4 = fStack_88 * 0.8;
    iStack_d8 = 0x3f800000;
    fStack_dc = 1.0;
    fStack_e0 = 1.0;
    uStack_e4 = 0x41b2f5;
    (**(code **)(*grim_interface_ptr + 0x114))();
    uStack_e4 = 0;
    pcStack_e8 = (char *)ui_weapon_icons_texture;
    pcStack_ec = (char *)0x41b30b;
    (**(code **)(*grim_interface_ptr + 0xc4))();
    pcStack_ec = (char *)0x41b319;
    (**(code **)(*grim_interface_ptr + 0xe8))();
    if (_config_player_count == 1) {
      pcStack_ec = (char *)((&effect_subrect_frame_table)[player_weapon_id * 0x1f] << 1);
      fStack_f0 = 1.4013e-45;
      fStack_f4 = 2.8026e-45;
      fStack_f8 = 1.12104e-44;
      fStack_fc = 6.033625e-39;
      (**(code **)(*grim_interface_ptr + 0x108))();
      fStack_fc = 32.0;
      fStack_100 = 64.0;
      iVar7 = *grim_interface_ptr;
    }
    else {
      pcStack_ec = (char *)((&effect_subrect_frame_table)[player_weapon_id * 0x1f] << 1);
      fStack_f0 = 1.4013e-45;
      fStack_f4 = 2.8026e-45;
      fStack_f8 = 1.12104e-44;
      fStack_fc = 6.033697e-39;
      (**(code **)(*grim_interface_ptr + 0x108))();
      fStack_fc = 16.0;
      (**(code **)(*grim_interface_ptr + 0x11c))();
      (**(code **)(*grim_interface_ptr + 0x108))();
      fStack_fc = 16.0;
      fStack_100 = 32.0;
      iVar7 = *grim_interface_ptr;
    }
    (**(code **)(iVar7 + 0x11c))();
    (**(code **)(*grim_interface_ptr + 0xf0))();
    (**(code **)(*grim_interface_ptr + 0x100))();
  }
  uStack_e4 = 0x15;
  fStack_e0 = 2.8026e-45;
  pcStack_e8 = (char *)0x41b42d;
  (**(code **)(*grim_interface_ptr + 0x20))();
  if (DAT_004871b0 != '\0') {
    pcStack_e8 = (char *)0x0;
    pcStack_ec = DAT_0048f7c0;
    fStack_f0 = 6.033991e-39;
    (**(code **)(*grim_interface_ptr + 0xc4))();
    fStack_f0 = 6.034011e-39;
    (**(code **)(*grim_interface_ptr + 0xe8))();
    if (_config_player_count == 1) {
      uStack_ac = 0x41800000;
    }
    else {
      uStack_ac = 0x40c00000;
    }
    uStack_b0 = 0x42800000;
    render_overlay_player_index = 0;
    if (0 < _config_player_count) {
      fVar11 = fStack_a4 * 0.5;
      fStack_bc = fStack_a4 * 0.8;
      fStack_cc = fVar11;
      do {
        fStack_f4 = 1.0;
        fStack_f8 = 1.0;
        fStack_fc = 1.0;
        fStack_f0 = fVar11;
        (**(code **)(*grim_interface_ptr + 0x114))();
        fStack_100 = 1.0;
        (**(code **)(*grim_interface_ptr + 0x100))();
        fStack_dc = (float)(render_overlay_player_index << 4);
        (**(code **)(*grim_interface_ptr + 0x11c))();
        (**(code **)(*grim_interface_ptr + 0x114))();
        (**(code **)(*grim_interface_ptr + 0x100))();
        (**(code **)(*grim_interface_ptr + 0x11c))();
        render_overlay_player_index = render_overlay_player_index + 1;
      } while (render_overlay_player_index < _config_player_count);
    }
    fStack_f0 = 6.03466e-39;
    (**(code **)(*grim_interface_ptr + 0xf0))();
  }
  if (DAT_004871b1 != '\0') {
    pcStack_e8 = (char *)0x0;
    pcStack_ec = (char *)0x41b64a;
    (**(code **)(*grim_interface_ptr + 0xfc))();
    pcStack_ec = (char *)0x3f800000;
    fStack_f0 = 1.0;
    fStack_f4 = 0.0;
    fStack_f8 = 0.0;
    fStack_fc = 6.03474e-39;
    (**(code **)(*grim_interface_ptr + 0x100))();
    if (_config_player_count == 1) {
      uStack_b4 = 0x43960000;
      uStack_b0 = 0x41200000;
      fStack_a4 = 10.0;
      uStack_a8 = 0x43960000;
    }
    else {
      uStack_b4 = 0x43910000;
      uStack_b0 = 0x40800000;
      fStack_a4 = 4.0;
      uStack_a8 = 0x43910000;
    }
    render_overlay_player_index = 0;
    if (0 < _config_player_count) {
      do {
        iVar7 = (&weapon_ammo_class)[(&player_weapon_id)[render_overlay_player_index * 0xd8] * 0x1f]
        ;
        if (iVar7 == 1) {
          pcStack_ec = s_ui_ui_indFire_jaz_00473878;
          iVar7 = *grim_interface_ptr;
        }
        else if (iVar7 == 0) {
          pcStack_ec = s_ui_ui_indBullet_jaz_00473864;
          iVar7 = *grim_interface_ptr;
        }
        else if (iVar7 == 2) {
          pcStack_ec = s_ui_ui_indRocket_jaz_00473850;
          iVar7 = *grim_interface_ptr;
        }
        else {
          pcStack_ec = s_ui_ui_indElectric_jaz_00473838;
          iVar7 = *grim_interface_ptr;
        }
        pcStack_e8 = (char *)0x0;
        fStack_f0 = 6.035025e-39;
        fStack_f0 = (float)(**(code **)(iVar7 + 0xc0))();
        fStack_f4 = 6.035044e-39;
        (**(code **)(iVar7 + 0xc4))();
        fStack_f4 = 6.035063e-39;
        (**(code **)(*grim_interface_ptr + 0xe8))();
        fStack_f4 = 6.035098e-39;
        lVar9 = __ftol();
        iVar7 = (int)lVar9;
        if (0x1e < iVar7) {
          iVar7 = 0x14;
        }
        fStack_f4 = 6.03513e-39;
        lVar9 = __ftol();
        fStack_f4 = 1.0;
        fStack_f8 = 1.0;
        fStack_fc = 0.0;
        fStack_100 = 0.0;
        (**(code **)(*grim_interface_ptr + 0x100))();
        iVar5 = 0;
        if (0 < iVar7) {
          pcStack_e8 = (char *)0x0;
          do {
            (**(code **)(*grim_interface_ptr + 0x114))();
            fStack_e0 = (float)(render_overlay_player_index * 0xe);
            (**(code **)(*grim_interface_ptr + 0x11c))();
            iVar5 = iVar5 + 1;
            pcStack_e8 = (char *)((int)pcStack_e8 + 6);
          } while (iVar5 < iVar7);
        }
        (**(code **)(*grim_interface_ptr + 0xf0))();
        if (iVar7 < (int)lVar9) {
          pcStack_e8 = (char *)fStack_c8;
          pcStack_ec = (char *)0x3f800000;
          fStack_f0 = 1.0;
          fStack_f4 = 1.0;
          fStack_f8 = 6.03547e-39;
          (**(code **)(*grim_interface_ptr + 0x114))();
          (**(code **)(*grim_interface_ptr + 0x20))();
          iStack_d8 = iVar5 * 6;
          (**(code **)(*grim_interface_ptr + 0x148))();
        }
        render_overlay_player_index = render_overlay_player_index + 1;
      } while (render_overlay_player_index < _config_player_count);
    }
  }
  pcStack_e8 = (char *)fStack_c8;
  pcStack_ec = (char *)0x3f800000;
  fStack_f0 = 1.0;
  fStack_f4 = 1.0;
  fStack_f8 = 6.035713e-39;
  (**(code **)(*grim_interface_ptr + 0x114))();
  (**(code **)(*grim_interface_ptr + 0x20))();
  (**(code **)(*grim_interface_ptr + 0x20))();
  iVar7 = 0x4e;
  if (DAT_004871b3 != '\0') {
    (**(code **)(*grim_interface_ptr + 0x20))();
    (**(code **)(*grim_interface_ptr + 0xc4))();
    (**(code **)(*grim_interface_ptr + 0xfc))();
    (**(code **)(*grim_interface_ptr + 0x100))();
    (**(code **)(*grim_interface_ptr + 0x114))();
    (**(code **)(*grim_interface_ptr + 0xe8))();
    fStack_144 = 0.0;
    if (quest_spawn_timeline < 1000) {
      fStack_144 = (float)(1000 - quest_spawn_timeline) * -0.128;
    }
    (**(code **)(*grim_interface_ptr + 0x11c))();
    uStack_174 = 0x43360000;
    fStack_178 = 107.0;
    iStack_17c = -0x3d600000;
    puStack_180 = (undefined4 *)0x41ba63;
    (**(code **)(*grim_interface_ptr + 0x11c))();
    puStack_180 = (undefined4 *)0x41ba71;
    (**(code **)(*grim_interface_ptr + 0xf0))();
    puStack_180 = (undefined4 *)0x3f800000;
    puStack_184 = (undefined *)0x3f800000;
    puStack_188 = (undefined *)0x0;
    piStack_18c = (int *)0x0;
    piStack_190 = (int *)0x41ba8d;
    (**(code **)(*grim_interface_ptr + 0x100))();
    fStack_144 = fStack_144 * 0.9;
    piStack_194 = (int *)0x3f800000;
    uStack_198 = 0x3f800000;
    uStack_19c = 0x3f800000;
    fStack_1a0 = 6.036296e-39;
    piStack_190 = (int *)fStack_144;
    fStack_178 = fStack_144;
    (**(code **)(*grim_interface_ptr + 0x114))();
    fStack_1a0 = 0.0;
    uStack_1a4 = ui_clock_table_texture;
    uStack_1a8 = 0x41bad4;
    (**(code **)(*grim_interface_ptr + 0xc4))();
    uStack_1a8 = 0;
    fStack_1ac = 6.036351e-39;
    (**(code **)(*grim_interface_ptr + 0xfc))();
    fStack_1ac = 1.0;
    uStack_1b0 = 0x3f800000;
    uStack_1b4 = 0;
    uStack_1b8 = 0;
    puStack_1bc = (undefined4 *)0x41bb00;
    (**(code **)(*grim_interface_ptr + 0x100))();
    puStack_1bc = (undefined4 *)0x41bb0e;
    (**(code **)(*grim_interface_ptr + 0xe8))();
    puVar2 = (undefined *)(fStack_1a0 + 2.0);
    puStack_1bc = (undefined4 *)0x42000000;
    fStack_1c0 = 32.0;
    uStack_1c4 = 0x429c0000;
    uStack_1cc = 0x41bb3e;
    puStack_1c8 = puVar2;
    puStack_188 = puVar2;
    (**(code **)(*grim_interface_ptr + 0x11c))();
    uStack_1cc = 0x41bb4c;
    (**(code **)(*grim_interface_ptr + 0xf0))();
    afStack_204[10] = 2.94273e-44;
    afStack_204[0xb] = 2.8026e-45;
    afStack_204[9] = 6.03653e-39;
    (**(code **)(*grim_interface_ptr + 0x20))();
    afStack_204[8] = 1.0;
    afStack_204[7] = 1.0;
    afStack_204[6] = 1.0;
    afStack_204[5] = 6.036572e-39;
    afStack_204[9] = fStack_144;
    (**(code **)(*grim_interface_ptr + 0x114))();
    afStack_204[5] = 0.0;
    afStack_204[4] = (float)DAT_0048f7cc;
    afStack_204[3] = 6.036603e-39;
    (**(code **)(*grim_interface_ptr + 0xc4))();
    afStack_204[3] = 1.0;
    afStack_204[2] = 1.0;
    afStack_204[1] = 0.0;
    afStack_204[0] = 0.0;
    (**(code **)(*grim_interface_ptr + 0x100))();
    (**(code **)(*grim_interface_ptr + 0xe8))();
    iStack_1d4 = quest_spawn_timeline / 1000;
    (**(code **)(*grim_interface_ptr + 0xfc))((float)iStack_1d4 * 0.10471976);
    fVar11 = 78.0;
    (**(code **)(*grim_interface_ptr + 0x11c))(puVar2,0x429c0000,0x42000000,0x42000000);
    (**(code **)(*grim_interface_ptr + 0xf0))();
    (**(code **)(*grim_interface_ptr + 0x20))(0x18,0x3f000000);
    iVar7 = (quest_spawn_timeline / 1000) % 0x3c;
    if (iVar7 < 10) {
      pcVar10 = s__d_0_d_00473150;
    }
    else {
      pcVar10 = s__d__d_00473148;
    }
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,fVar11 + 32.0,0x42ac0000,pcVar10,
               (quest_spawn_timeline / 1000) / 0x3c,iVar7);
    (**(code **)(*grim_interface_ptr + 0x20))(0x18,0x3ee66666);
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,0x41900000,0x42f40000,s_Progress_00473824);
    if ((DAT_0048f528 & 1) == 0) {
      DAT_0048f528 = DAT_0048f528 | 1;
      _DAT_004871a0 = 0x3e4ccccd;
      _DAT_004871a4 = 0x3f4ccccd;
      _DAT_004871a8 = 0x3e99999a;
      _DAT_004871ac = 1.0;
      crt_atexit(&DAT_0041ca80);
    }
    _DAT_004871ac = afStack_204[3] * 0.8;
    iVar7 = 0;
    _DAT_004902fc = 0;
    if (0 < quest_spawn_count) {
      piVar3 = &DAT_004857bc;
      iVar5 = quest_spawn_count;
      do {
        iVar6 = *piVar3;
        piVar3 = piVar3 + 6;
        iVar7 = iVar7 + iVar6;
        iVar5 = iVar5 + -1;
      } while (iVar5 != 0);
    }
    afStack_204[0] = 10.0;
    DAT_004902f8 = (float)creature_kill_count / (float)(creature_spawned_count + iVar7);
    afStack_204[1] = 139.0;
    ui_draw_progress_bar(afStack_204,70.0,DAT_004902f8,(float *)&DAT_004871a0);
    iVar7 = 0x9e;
    if (DAT_00487244 < 500) {
      fVar11 = (float)(DAT_00487244 * 2) * 0.001;
LAB_0041bde3:
      if (1.0 < fVar11) {
LAB_0041bdf8:
        fVar11 = 1.0;
      }
    }
    else {
      if (DAT_00487244 < 0x5dc) goto LAB_0041bdf8;
      if (DAT_00487244 < 2000) {
        fVar11 = 1.0 - (float)(DAT_00487244 * 2 + -3000) * 0.001;
        goto LAB_0041bde3;
      }
      fVar11 = 0.0;
    }
    (**(code **)(*grim_interface_ptr + 0x114))
              (0x3f800000,0x3f800000,0x3f800000,fVar11 * afStack_204[3]);
    uVar4 = 0xffffffff;
    pcVar10 = *(char **)(&quest_meta_name +
                        (_quest_stage_minor + -0xb + _quest_stage_major * 10) * 0x2c);
    do {
      if (uVar4 == 0) break;
      uVar4 = uVar4 - 1;
      cVar1 = *pcVar10;
      pcVar10 = pcVar10 + 1;
    } while (cVar1 != '\0');
    fStack_e0 = (float)(~uVar4 - 1);
    (**(code **)(*grim_interface_ptr + 0x20))();
    fStack_100 = (float)(config_screen_width / 2) - (float)(int)fStack_f4 * 2.94273e-44 * 8.0;
    fStack_f4 = (float)(config_screen_height / 2 + -0x20);
    (**(code **)(*grim_interface_ptr + 0x13c))();
    (**(code **)(*grim_interface_ptr + 0x20))();
    (**(code **)(*grim_interface_ptr + 0x114))();
    if (10 < _quest_stage_minor) {
      _quest_stage_major = _quest_stage_major + 1;
      _quest_stage_minor = _quest_stage_minor + -10;
    }
    uStack_174 = 0x41bf99;
    crt_sprintf(&DAT_0048f788,s__d__d_0047381c);
    iVar5 = -1;
    pcVar10 = &DAT_0048f788;
    do {
      if (iVar5 == 0) break;
      iVar5 = iVar5 + -1;
      cVar1 = *pcVar10;
      pcVar10 = pcVar10 + 1;
    } while (cVar1 != '\0');
    uStack_174 = 0x41c022;
    (**(code **)(*grim_interface_ptr + 0x140))();
    if (0 < DAT_00487088) {
      if (((499 < DAT_00487088) && (0x5db < DAT_00487088)) && (DAT_00487088 < 0x9c4)) {
        fStack_e0 = (float)(2000 - DAT_00487088);
      }
      (**(code **)(*grim_interface_ptr + 0x20))();
      (**(code **)(*grim_interface_ptr + 0x114))();
      (**(code **)(*grim_interface_ptr + 0xc4))();
      (**(code **)(*grim_interface_ptr + 0x100))();
      (**(code **)(*grim_interface_ptr + 0x11c))();
      (**(code **)(*grim_interface_ptr + 0xf0))();
    }
  }
  if (DAT_004871b4 != '\0') {
    (**(code **)(*grim_interface_ptr + 0x20))();
    (**(code **)(*grim_interface_ptr + 0x100))();
    piVar3 = (int *)(fStack_f8 * 0.9);
    (**(code **)(*grim_interface_ptr + 0x114))();
    (**(code **)(*grim_interface_ptr + 0xc4))();
    (**(code **)(*grim_interface_ptr + 0xfc))();
    (**(code **)(*grim_interface_ptr + 0x100))();
    (**(code **)(*grim_interface_ptr + 0xe8))();
    uStack_174 = 0x42000000;
    fStack_178 = 2.0;
    iStack_17c = 0x435c0000;
    puStack_180 = (undefined4 *)0x41c2e5;
    (**(code **)(*grim_interface_ptr + 0x11c))();
    puStack_180 = (undefined4 *)0x41c2f3;
    (**(code **)(*grim_interface_ptr + 0xf0))();
    piStack_190 = (int *)0x15;
    piStack_18c = (int *)0x2;
    piStack_194 = (int *)0x41c30b;
    (**(code **)(*grim_interface_ptr + 0x20))();
    uStack_198 = 0x3f800000;
    uStack_19c = 0x3f800000;
    fStack_1a0 = 1.0;
    uStack_1a4 = 0x41c329;
    piStack_194 = piVar3;
    (**(code **)(*grim_interface_ptr + 0x114))();
    uStack_1a4 = 0;
    uStack_1a8 = DAT_0048f7cc;
    fStack_1ac = 6.039348e-39;
    (**(code **)(*grim_interface_ptr + 0xc4))();
    fStack_1ac = 1.0;
    uStack_1b0 = 0x3f800000;
    uStack_1b4 = 0;
    uStack_1b8 = 0;
    puStack_1bc = (undefined4 *)0x41c35b;
    (**(code **)(*grim_interface_ptr + 0x100))();
    puStack_1bc = (undefined4 *)0x41c369;
    (**(code **)(*grim_interface_ptr + 0xe8))();
    iStack_17c = survival_elapsed_ms / 1000;
    puStack_1bc = (undefined4 *)((float)iStack_17c * 0.10471976);
    fStack_1c0 = 6.039484e-39;
    (**(code **)(*grim_interface_ptr + 0xfc))();
    fStack_1c0 = 32.0;
    uStack_1c4 = 0x42000000;
    puStack_1c8 = (undefined *)0x40000000;
    uStack_1cc = 0x435c0000;
    uStack_1d0 = 0x41c3c2;
    (**(code **)(*grim_interface_ptr + 0x11c))();
    uStack_1d0 = 0x41c3d0;
    (**(code **)(*grim_interface_ptr + 0xf0))();
    afStack_204[9] = 3.36312e-44;
    afStack_204[10] = 0.5;
    afStack_204[8] = 6.039585e-39;
    (**(code **)(*grim_interface_ptr + 0x20))();
    afStack_204[8] = fStack_c8;
    afStack_204[7] = 1.0;
    afStack_204[6] = 1.0;
    afStack_204[5] = 1.0;
    afStack_204[4] = 6.039627e-39;
    (**(code **)(*grim_interface_ptr + 0x114))();
    afStack_204[0] = 3.36312e-44;
    afStack_204[1] = 0.5;
    (**(code **)(*grim_interface_ptr + 0x20))();
    (**(code **)(*grim_interface_ptr + 0x148))
              (grim_interface_ptr,0x437f0000,0x41200000,s__d_seconds_00473810,
               survival_elapsed_ms / 1000);
  }
  if (DAT_004871b2 == '\0') goto LAB_0041c783;
  (**(code **)(*grim_interface_ptr + 0xc4))();
  (**(code **)(*grim_interface_ptr + 0xfc))();
  (**(code **)(*grim_interface_ptr + 0x100))();
  (**(code **)(*grim_interface_ptr + 0x114))();
  (**(code **)(*grim_interface_ptr + 0xe8))();
  (**(code **)(*grim_interface_ptr + 0x11c))();
  (**(code **)(*grim_interface_ptr + 0xf0))();
  if (player_experience == 0) {
    survival_xp_smoothed = player_experience;
  }
  else if (survival_xp_smoothed < player_experience) {
    iVar5 = frame_dt_ms / 2;
    if (iVar5 < 1) {
      iVar5 = 1;
    }
    uVar4 = survival_xp_smoothed - player_experience >> 0x1f;
    iVar6 = (survival_xp_smoothed - player_experience ^ uVar4) - uVar4;
    if (1000 < iVar6) {
      iVar5 = iVar5 * (iVar6 / 100);
    }
    survival_xp_smoothed = survival_xp_smoothed + iVar5;
    if (player_experience < survival_xp_smoothed) {
LAB_0041c5bf:
      survival_xp_smoothed = player_experience;
    }
  }
  else if (player_experience < survival_xp_smoothed) {
    iVar5 = frame_dt_ms / 2;
    if (iVar5 < 1) {
      iVar5 = 1;
    }
    uVar4 = survival_xp_smoothed - player_experience >> 0x1f;
    iVar6 = (survival_xp_smoothed - player_experience ^ uVar4) - uVar4;
    if (1000 < iVar6) {
      iVar5 = iVar5 * (iVar6 / 100);
    }
    survival_xp_smoothed = survival_xp_smoothed - iVar5;
    if (survival_xp_smoothed < player_experience) goto LAB_0041c5bf;
  }
  (**(code **)(*grim_interface_ptr + 0x114))();
  iStack_17c = 0x18;
  fStack_178 = 0.5;
  puStack_180 = (undefined4 *)0x41c608;
  (**(code **)(*grim_interface_ptr + 0x20))();
  puStack_180 = (undefined4 *)&DAT_0047380c;
  puStack_184 = (undefined *)0x4e7e0000;
  puStack_188 = (undefined *)0x40800000;
  piStack_18c = grim_interface_ptr;
  piStack_190 = (int *)0x41c628;
  (**(code **)(*grim_interface_ptr + 0x148))();
  puStack_180 = (undefined4 *)survival_xp_smoothed;
  puStack_188 = (undefined *)(float)(iVar7 + -4);
  puStack_184 = &DAT_00471f40;
  piStack_18c = (int *)0x41d00000;
  piStack_190 = grim_interface_ptr;
  piStack_194 = (int *)0x41c659;
  (**(code **)(*grim_interface_ptr + 0x148))();
  DAT_00496604 = 0;
  puStack_180 = &DAT_004965f8;
  puStack_184 = (undefined *)0x41c679;
  (**(code **)(*grim_interface_ptr + 0x110))();
  puStack_184 = (undefined *)player_level;
  piStack_18c = (int *)(float)(iVar7 + 1);
  puStack_188 = &DAT_00471f40;
  piStack_190 = (int *)0x42aa0000;
  piStack_194 = grim_interface_ptr;
  uStack_198 = 0x41c6a7;
  (**(code **)(*grim_interface_ptr + 0x148))();
  iVar5 = player_level;
  DAT_00496604 = 0x3f333333;
  fStack_e0 = (float)(player_level + -1);
  FUN_00461140();
  lVar9 = __ftol();
  iVar6 = 1000 - (int)lVar9;
  if (iVar5 == 1) {
    iVar6 = 0;
  }
  fStack_f0 = fStack_100;
  pcStack_e8 = (char *)(float)(iVar7 + 0xd);
  rgba = &fStack_fc;
  fStack_e0 = (float)(player_experience - iVar6);
  fStack_fc = 0.1;
  fStack_f8 = 0.3;
  fStack_f4 = 0.6;
  pcStack_ec = (char *)0x41d00000;
  fVar8 = (float10)FUN_00461140();
  fStack_e0 = (float)fVar8;
  lVar9 = __ftol();
  fStack_e0 = (float)((1000 - (int)lVar9) - iVar6);
  ui_draw_progress_bar
            ((float *)&pcStack_ec,54.0,(float)(extraout_ST0 / (float10)(int)fStack_e0),rgba);
LAB_0041c783:
  (**(code **)(*grim_interface_ptr + 0x20))();
  fStack_f8 = 2.0;
  iVar7 = 0;
  do {
    bonus_hud_slot_update_and_render(&fStack_f8,iVar7);
    iVar7 = iVar7 + 1;
  } while (iVar7 < 0x10);
  __ftol();
  render_overlay_player_index = 0;
  if (0 < _config_player_count) {
    do {
      if (0.0 < (float)(&DAT_004871d0)[render_overlay_player_index]) {
        if (1.0 <= (float)(&DAT_004871d0)[render_overlay_player_index]) {
          fVar11 = 1.4;
        }
        else {
          fVar11 = 0.5;
        }
        (&DAT_004871d0)[render_overlay_player_index] =
             (float)(&DAT_004871d0)[render_overlay_player_index] - frame_dt * fVar11;
        (**(code **)(*grim_interface_ptr + 0x114))();
        (**(code **)(*grim_interface_ptr + 0xc4))();
        (**(code **)(*grim_interface_ptr + 0xfc))();
        (**(code **)(*grim_interface_ptr + 0x100))();
        (**(code **)(*grim_interface_ptr + 0xe8))();
        (**(code **)(*grim_interface_ptr + 0x11c))();
        (**(code **)(*grim_interface_ptr + 0xf0))();
        uStack_174 = ui_weapon_icons_texture;
        fStack_178 = 6.041487e-39;
        (**(code **)(*grim_interface_ptr + 0xc4))();
        fStack_178 = (float)((&effect_subrect_frame_table)
                             [(&player_weapon_id)[render_overlay_player_index * 0xd8] * 0x1f] << 1);
        iStack_17c = 1;
        puStack_180 = (undefined4 *)0x2;
        puStack_184 = (undefined *)0x8;
        puStack_188 = (undefined *)0x41c96e;
        (**(code **)(*grim_interface_ptr + 0x108))();
        puStack_188 = (undefined *)0x41c97c;
        (**(code **)(*grim_interface_ptr + 0xe8))();
        puStack_188 = (undefined *)0x41f00000;
        piStack_190 = (int *)0x4e866c00;
        piStack_18c = (int *)0x42700000;
        piStack_194 = (int *)0x42d20000;
        uStack_198 = 0x41c9a1;
        (**(code **)(*grim_interface_ptr + 0x11c))();
        uStack_198 = 0x41c9af;
        (**(code **)(*grim_interface_ptr + 0xf0))();
        uStack_1a8 = 0x18;
        uStack_1a4 = 0x3f000000;
        fStack_1ac = 6.041691e-39;
        (**(code **)(*grim_interface_ptr + 0x20))();
        fStack_1ac = fStack_178;
        uStack_1b0 = 0x3f800000;
        uStack_1b4 = 0x3f800000;
        uStack_1b8 = 0x3f800000;
        puStack_1bc = (undefined4 *)0x41c9e9;
        (**(code **)(*grim_interface_ptr + 0x114))();
        fStack_1c0 = (float)(int)fStack_1a0;
        puStack_1bc = &weapon_table + (&player_weapon_id)[render_overlay_player_index * 0xd8] * 0x1f
        ;
        uStack_1c4 = 0x41000000;
        puStack_1c8 = (undefined *)0x41ca27;
        (**(code **)(*grim_interface_ptr + 0x144))();
      }
      render_overlay_player_index = render_overlay_player_index + 1;
    } while (render_overlay_player_index < _config_player_count);
  }
  (**(code **)(*grim_interface_ptr + 0x20))();
  render_overlay_player_index = 0;
  return;
}



/* hud_update_and_render @ 0041ca90 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* updates HUD flags/targets and renders the HUD */

void hud_update_and_render(void)

{
  float fVar1;
  float local_28;
  float local_20;
  float local_1c;
  float local_14;
  float local_10;
  float local_c;
  undefined4 local_8;
  undefined4 local_4;
  
  fVar1 = (float)ui_elements_timeline / (float)(DAT_0048eb48 - DAT_0048eb4c);
  if ((1.0 < fVar1) || (fVar1 == 1.0)) {
    DAT_00487241 = 0;
  }
  if (DAT_00487268 != -1) {
    local_14 = _camera_offset_y + (float)(&creature_pos_y)[DAT_00487268 * 0x26];
    local_28 = (float)(&creature_health)[DAT_00487268 * 0x26] /
               (float)(&creature_max_health)[DAT_00487268 * 0x26];
    if (local_28 <= 1.0) {
      if (local_28 < 0.0) {
        local_28 = 0.0;
      }
    }
    else {
      local_28 = 1.0;
    }
    local_8 = 0x3e4ccccd;
    local_10 = (1.0 - local_28) * 0.9 + 0.1;
    local_4 = 0x3f333333;
    local_c = local_28 * 0.9 + 0.1;
    local_20 = (_camera_offset_x + (float)(&creature_pos_x)[DAT_00487268 * 0x26]) - 32.0;
    local_1c = local_14 + 32.0;
    ui_draw_progress_bar(&local_20,64.0,local_28,&local_10);
    (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,0x3f800000);
  }
  if (_config_game_mode == 3) {
    DAT_004871b0 = 1;
    DAT_004871b1 = 1;
    DAT_004871b2 = 1;
    DAT_004871b3 = 1;
  }
  else {
    if (_config_game_mode == 1) {
      DAT_004871b0 = 1;
      DAT_004871b1 = 1;
      DAT_004871b2 = 1;
    }
    else {
      if (_config_game_mode == 2) {
        DAT_004871b0 = 1;
        DAT_004871b1 = 0;
        DAT_004871b2 = 0;
        DAT_004871b3 = 0;
        DAT_004871b4 = 1;
        goto LAB_0041cc88;
      }
      if (_config_game_mode == 4) {
        DAT_004871b0 = 1;
        DAT_004871b1 = 0;
        DAT_004871b2 = 1;
        DAT_004871b3 = 0;
        DAT_004871b4 = 1;
        goto LAB_0041cc88;
      }
      DAT_004871b0 = 0;
      DAT_004871b1 = 0;
      DAT_004871b2 = 0;
    }
    DAT_004871b3 = 0;
  }
  DAT_004871b4 = 0;
LAB_0041cc88:
  if (demo_mode_active == '\0') {
    ui_render_hud();
  }
  return;
}



/* dx_get_version @ 0041ccb0 */

/* query DirectX version */

int __cdecl dx_get_version(int *version,char *out,int out_len)

{
  char *dst;
  int size;
  char cVar1;
  int iVar2;
  int local_4;
  
  size = out_len;
  dst = out;
  if (version != (int *)0x0) {
    *version = 0;
  }
  if ((out != (char *)0x0) && (0 < out_len)) {
    *out = '\0';
  }
  out_len = 0;
  local_4 = 0;
  out = (char *)CONCAT31(out._1_3_,0x20);
  iVar2 = FUN_0041cdb0();
  if (iVar2 < 0) {
    iVar2 = FUN_0041cfe0(&out_len,&local_4,(undefined1 *)&out);
    if (iVar2 < 0) {
      return -0x7fffbffb;
    }
  }
  iVar2 = crt_tolower((int)(char)out);
  cVar1 = (char)iVar2;
  out = (char *)CONCAT31(out._1_3_,cVar1);
  if (version != (int *)0x0) {
    iVar2 = (out_len * 0x100 + local_4) * 0x100;
    if (('`' < cVar1) && (cVar1 < '{')) {
      iVar2 = iVar2 + -0x60 + (int)cVar1;
    }
    *version = iVar2;
  }
  if ((dst != (char *)0x0) && (0 < size)) {
    if (cVar1 == ' ') {
      crt_snprintf(dst,size,s__d__d_0047381c,out_len,local_4);
      dst[size + -1] = '\0';
      return 0;
    }
    crt_snprintf(dst,size,s__d__d_c_0047389c,out_len,local_4,(int)cVar1);
    dst[size + -1] = '\0';
  }
  return 0;
}



/* FUN_0041cdb0 @ 0041cdb0 */

/* WARNING: Removing unreachable block (ram,0x0041ce9f) */
/* WARNING: Removing unreachable block (ram,0x0041cea7) */
/* WARNING: Removing unreachable block (ram,0x0041cead) */
/* WARNING: Removing unreachable block (ram,0x0041cf52) */
/* WARNING: Removing unreachable block (ram,0x0041cf5a) */
/* WARNING: Enum "tagCALLCONV": Some values do not have unique names */

int FUN_0041cdb0(void)

{
  HRESULT HVar1;
  HRESULT HVar2;
  int iVar3;
  char cVar4;
  int *unaff_EDI;
  undefined4 uStack_74;
  int *piVar5;
  wchar_t *pwStack_64;
  wchar_t *pwStack_60;
  undefined2 uVar6;
  undefined4 uVar7;
  undefined4 lpWideCharStr;
  undefined2 uVar8;
  undefined4 local_3c;
  undefined4 uStack_38;
  _union_2156 local_34;
  undefined4 *puStack_24;
  undefined4 local_10;
  undefined4 local_c;
  undefined4 local_8;
  undefined4 local_4;
  
  HVar1 = CoInitialize((LPVOID)0x0);
  local_34._0_4_ = (wchar_t *)0x0;
  local_3c = (uint)(-1 < HVar1) << 0x18;
  HVar2 = CoCreateInstance((IID *)&DAT_0046f5c8,(LPUNKNOWN)0x0,1,(IID *)&DAT_0046f5b8,
                           (LPVOID *)&local_34);
  if (HVar2 < 0) {
    cVar4 = '\0';
  }
  else {
    local_10 = 0x10;
    local_c = 0x6f;
    local_8 = 0;
    local_4 = 0;
    uVar7 = local_34._0_4_;
    iVar3 = (**(code **)(*(int *)local_34._0_4_ + 0xc))();
    if (-1 < iVar3) {
      uStack_38 = (int *)0x0;
      iVar3 = (**(code **)(*(int *)local_3c + 0x10))();
      if (-1 < iVar3) {
        lpWideCharStr = &stack0xffffffc0;
        iVar3 = (**(code **)(iRam00000000 + 0x14))();
        if (iVar3 < 0) {
          cVar4 = (char)lpWideCharStr;
          pwStack_60 = (wchar_t *)0x41cf96;
          (**(code **)(*unaff_EDI + 8))();
          pwStack_60 = (wchar_t *)uVar7;
          pwStack_64 = (wchar_t *)0x41cfa0;
          (**(code **)(*(int *)pwStack_60 + 8))();
        }
        else {
          pwStack_60 = (wchar_t *)0x41ce7f;
          pwStack_64 = (wchar_t *)uVar7;
          VariantInit((VARIANTARG *)&local_34.field0);
          pwStack_60 = u_dwDirectXVersionMajor_00473900;
          uVar7 = pwStack_64;
          (**(code **)(*(int *)pwStack_64 + 0x20))();
          uVar8 = (undefined2)uVar7;
          VariantClear((VARIANTARG *)&stack0xffffffc0);
          piVar5 = (int *)&stack0xffffffc0;
          uVar7 = uStack_38;
          iVar3 = (**(code **)(*(int *)uStack_38 + 0x20))();
          uVar6 = (undefined2)uVar7;
          if (((-1 < iVar3) && (uVar8 == 0x13)) && (puStack_24 != (undefined4 *)0x0)) {
            *puStack_24 = unaff_EDI;
          }
          VariantClear((VARIANTARG *)&stack0xffffffb4);
          iVar3 = (**(code **)(*(int *)pwStack_64 + 0x20))
                            (pwStack_64,u_szDirectXVersionLetter_004738a4,&stack0xffffffb4);
          uStack_74 = uStack_38;
          if (((-1 < iVar3) && (uVar6 == 8)) && ((LPCWCH)lpWideCharStr != (LPCWCH)0x0)) {
            WideCharToMultiByte(0,0,(LPCWCH)lpWideCharStr,-1,(LPSTR)&pwStack_64,10,(LPCCH)0x0,
                                (LPBOOL)0x0);
            if ((undefined1 *)local_34._8_4_ != (undefined1 *)0x0) {
              *(undefined1 *)local_34._8_4_ = pwStack_64._0_1_;
            }
            uStack_74._3_1_ = (undefined1)((uint)uStack_38 >> 0x18);
            uStack_74._0_3_ = CONCAT12(1,(short)uStack_38);
          }
          VariantClear((VARIANTARG *)&stack0xffffffa8);
          cVar4 = (char)uStack_74;
          (**(code **)(u_dwDirectXVersionMinor_004738d4._0_4_ + 8))
                    (u_dwDirectXVersionMinor_004738d4);
          (**(code **)(*piVar5 + 8))(piVar5);
          (**(code **)(*(int *)uStack_74 + 8))(uStack_74);
        }
        goto LAB_0041cfb6;
      }
    }
    cVar4 = (char)unaff_EDI;
    (**(code **)(*(int *)local_3c + 8))();
  }
LAB_0041cfb6:
  if (-1 < HVar1) {
    CoUninitialize();
  }
  return (-(uint)(cVar4 != '\0') & 0x7fffbffb) + 0x80004005;
}



/* FUN_0041cfe0 @ 0041cfe0 */

undefined4 __cdecl FUN_0041cfe0(undefined4 *param_1,undefined4 *param_2,undefined1 *param_3)

{
  char cVar1;
  bool bVar2;
  UINT UVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  char *pcVar7;
  char *pcVar8;
  char *pcVar9;
  undefined8 uVar10;
  uint local_408;
  uint local_404;
  char local_400 [512];
  CHAR local_200 [259];
  undefined1 local_fd;
  
  bVar2 = false;
  UVar3 = GetSystemDirectoryA(local_200,0x104);
  if (UVar3 == 0) goto LAB_0041db13;
  uVar4 = 0xffffffff;
  local_fd = 0;
  pcVar7 = local_200;
  do {
    pcVar9 = pcVar7;
    if (uVar4 == 0) break;
    uVar4 = uVar4 - 1;
    pcVar9 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar9;
  } while (cVar1 != '\0');
  uVar4 = ~uVar4;
  pcVar7 = pcVar9 + -uVar4;
  pcVar9 = local_400;
  for (uVar5 = uVar4 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
    *(undefined4 *)pcVar9 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar9 = pcVar9 + 4;
  }
  for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
    *pcVar9 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar9 = pcVar9 + 1;
  }
  uVar4 = 0xffffffff;
  pcVar7 = s__ddraw_dll_004739ac;
  do {
    pcVar9 = pcVar7;
    if (uVar4 == 0) break;
    uVar4 = uVar4 - 1;
    pcVar9 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar9;
  } while (cVar1 != '\0');
  uVar4 = ~uVar4;
  iVar6 = -1;
  pcVar7 = local_400;
  do {
    pcVar8 = pcVar7;
    if (iVar6 == 0) break;
    iVar6 = iVar6 + -1;
    pcVar8 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar1 != '\0');
  pcVar7 = pcVar9 + -uVar4;
  pcVar9 = pcVar8 + -1;
  for (uVar5 = uVar4 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
    *(undefined4 *)pcVar9 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar9 = pcVar9 + 4;
  }
  for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
    *pcVar9 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar9 = pcVar9 + 1;
  }
  iVar6 = FUN_0041db50(local_400,&local_408);
  if (-1 < iVar6) {
    uVar10 = FUN_0041dc10(4,2,0,0x5f);
    iVar6 = FUN_0041dc50(local_408,local_404,(uint)uVar10,(uint)((ulonglong)uVar10 >> 0x20));
    if (-1 < iVar6) {
      if (param_1 != (undefined4 *)0x0) {
        *param_1 = 1;
      }
      if (param_2 != (undefined4 *)0x0) {
        *param_2 = 0;
      }
      if (param_3 != (undefined1 *)0x0) {
        *param_3 = 0x20;
      }
      bVar2 = true;
    }
    uVar10 = FUN_0041dc10(4,3,0,0x448);
    iVar6 = FUN_0041dc50(local_408,local_404,(uint)uVar10,(uint)((ulonglong)uVar10 >> 0x20));
    if (-1 < iVar6) {
      if (param_1 != (undefined4 *)0x0) {
        *param_1 = 2;
      }
      if (param_2 != (undefined4 *)0x0) {
        *param_2 = 0;
      }
      if (param_3 != (undefined1 *)0x0) {
        *param_3 = 0x20;
      }
      bVar2 = true;
    }
    uVar10 = FUN_0041dc10(4,4,0,0x44);
    iVar6 = FUN_0041dc50(local_408,local_404,(uint)uVar10,(uint)((ulonglong)uVar10 >> 0x20));
    if (-1 < iVar6) {
      if (param_1 != (undefined4 *)0x0) {
        *param_1 = 3;
      }
      if (param_2 != (undefined4 *)0x0) {
        *param_2 = 0;
      }
      if (param_3 != (undefined1 *)0x0) {
        *param_3 = 0x20;
      }
      bVar2 = true;
    }
  }
  uVar4 = 0xffffffff;
  pcVar7 = local_200;
  do {
    pcVar9 = pcVar7;
    if (uVar4 == 0) break;
    uVar4 = uVar4 - 1;
    pcVar9 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar9;
  } while (cVar1 != '\0');
  uVar4 = ~uVar4;
  pcVar7 = pcVar9 + -uVar4;
  pcVar9 = local_400;
  for (uVar5 = uVar4 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
    *(undefined4 *)pcVar9 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar9 = pcVar9 + 4;
  }
  for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
    *pcVar9 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar9 = pcVar9 + 1;
  }
  uVar4 = 0xffffffff;
  pcVar7 = &DAT_0047399c;
  do {
    pcVar9 = pcVar7;
    if (uVar4 == 0) break;
    uVar4 = uVar4 - 1;
    pcVar9 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar9;
  } while (cVar1 != '\0');
  uVar4 = ~uVar4;
  iVar6 = -1;
  pcVar7 = local_400;
  do {
    pcVar8 = pcVar7;
    if (iVar6 == 0) break;
    iVar6 = iVar6 + -1;
    pcVar8 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar1 != '\0');
  pcVar7 = pcVar9 + -uVar4;
  pcVar9 = pcVar8 + -1;
  for (uVar5 = uVar4 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
    *(undefined4 *)pcVar9 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar9 = pcVar9 + 4;
  }
  for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
    *pcVar9 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar9 = pcVar9 + 1;
  }
  iVar6 = FUN_0041db50(local_400,&local_408);
  if (-1 < iVar6) {
    uVar10 = FUN_0041dc10(4,4,0,0x46);
    iVar6 = FUN_0041dc50(local_408,local_404,(uint)uVar10,(uint)((ulonglong)uVar10 >> 0x20));
    if (-1 < iVar6) {
      if (param_1 != (undefined4 *)0x0) {
        *param_1 = 3;
      }
      if (param_2 != (undefined4 *)0x0) {
        *param_2 = 0;
      }
      if (param_3 != (undefined1 *)0x0) {
        *param_3 = 0x61;
      }
      bVar2 = true;
    }
  }
  uVar4 = 0xffffffff;
  pcVar7 = local_200;
  do {
    pcVar9 = pcVar7;
    if (uVar4 == 0) break;
    uVar4 = uVar4 - 1;
    pcVar9 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar9;
  } while (cVar1 != '\0');
  uVar4 = ~uVar4;
  pcVar7 = pcVar9 + -uVar4;
  pcVar9 = local_400;
  for (uVar5 = uVar4 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
    *(undefined4 *)pcVar9 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar9 = pcVar9 + 4;
  }
  for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
    *pcVar9 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar9 = pcVar9 + 1;
  }
  uVar4 = 0xffffffff;
  pcVar7 = s__ddraw_dll_004739ac;
  do {
    pcVar9 = pcVar7;
    if (uVar4 == 0) break;
    uVar4 = uVar4 - 1;
    pcVar9 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar9;
  } while (cVar1 != '\0');
  uVar4 = ~uVar4;
  iVar6 = -1;
  pcVar7 = local_400;
  do {
    pcVar8 = pcVar7;
    if (iVar6 == 0) break;
    iVar6 = iVar6 + -1;
    pcVar8 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar1 != '\0');
  pcVar7 = pcVar9 + -uVar4;
  pcVar9 = pcVar8 + -1;
  for (uVar5 = uVar4 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
    *(undefined4 *)pcVar9 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar9 = pcVar9 + 4;
  }
  for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
    *pcVar9 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar9 = pcVar9 + 1;
  }
  iVar6 = FUN_0041db50(local_400,&local_408);
  if (-1 < iVar6) {
    uVar10 = FUN_0041dc10(4,5,0,0x9b);
    iVar6 = FUN_0041dc50(local_408,local_404,(uint)uVar10,(uint)((ulonglong)uVar10 >> 0x20));
    if (-1 < iVar6) {
      if (param_1 != (undefined4 *)0x0) {
        *param_1 = 5;
      }
      if (param_2 != (undefined4 *)0x0) {
        *param_2 = 0;
      }
      if (param_3 != (undefined1 *)0x0) {
        *param_3 = 0x20;
      }
      bVar2 = true;
    }
    uVar10 = FUN_0041dc10(4,6,0,0x13e);
    iVar6 = FUN_0041dc50(local_408,local_404,(uint)uVar10,(uint)((ulonglong)uVar10 >> 0x20));
    if (-1 < iVar6) {
      if (param_1 != (undefined4 *)0x0) {
        *param_1 = 6;
      }
      if (param_2 != (undefined4 *)0x0) {
        *param_2 = 0;
      }
      if (param_3 != (undefined1 *)0x0) {
        *param_3 = 0x20;
      }
      bVar2 = true;
    }
    uVar10 = FUN_0041dc10(4,6,0,0x1b4);
    iVar6 = FUN_0041dc50(local_408,local_404,(uint)uVar10,(uint)((ulonglong)uVar10 >> 0x20));
    if (-1 < iVar6) {
      if (param_1 != (undefined4 *)0x0) {
        *param_1 = 6;
      }
      if (param_2 != (undefined4 *)0x0) {
        *param_2 = 1;
      }
      if (param_3 != (undefined1 *)0x0) {
        *param_3 = 0x20;
      }
      bVar2 = true;
    }
  }
  uVar4 = 0xffffffff;
  pcVar7 = local_200;
  do {
    pcVar9 = pcVar7;
    if (uVar4 == 0) break;
    uVar4 = uVar4 - 1;
    pcVar9 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar9;
  } while (cVar1 != '\0');
  uVar4 = ~uVar4;
  pcVar7 = pcVar9 + -uVar4;
  pcVar9 = local_400;
  for (uVar5 = uVar4 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
    *(undefined4 *)pcVar9 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar9 = pcVar9 + 4;
  }
  for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
    *pcVar9 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar9 = pcVar9 + 1;
  }
  uVar4 = 0xffffffff;
  pcVar7 = &DAT_00473990;
  do {
    pcVar9 = pcVar7;
    if (uVar4 == 0) break;
    uVar4 = uVar4 - 1;
    pcVar9 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar9;
  } while (cVar1 != '\0');
  uVar4 = ~uVar4;
  iVar6 = -1;
  pcVar7 = local_400;
  do {
    pcVar8 = pcVar7;
    if (iVar6 == 0) break;
    iVar6 = iVar6 + -1;
    pcVar8 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar1 != '\0');
  pcVar7 = pcVar9 + -uVar4;
  pcVar9 = pcVar8 + -1;
  for (uVar5 = uVar4 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
    *(undefined4 *)pcVar9 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar9 = pcVar9 + 4;
  }
  for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
    *pcVar9 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar9 = pcVar9 + 1;
  }
  iVar6 = FUN_0041db50(local_400,&local_408);
  if (-1 < iVar6) {
    uVar10 = FUN_0041dc10(4,6,3,0x206);
    iVar6 = FUN_0041dc50(local_408,local_404,(uint)uVar10,(uint)((ulonglong)uVar10 >> 0x20));
    if (-1 < iVar6) {
      if (param_1 != (undefined4 *)0x0) {
        *param_1 = 6;
      }
      if (param_2 != (undefined4 *)0x0) {
        *param_2 = 1;
      }
      if (param_3 != (undefined1 *)0x0) {
        *param_3 = 0x61;
      }
      bVar2 = true;
    }
  }
  uVar4 = 0xffffffff;
  pcVar7 = local_200;
  do {
    pcVar9 = pcVar7;
    if (uVar4 == 0) break;
    uVar4 = uVar4 - 1;
    pcVar9 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar9;
  } while (cVar1 != '\0');
  uVar4 = ~uVar4;
  pcVar7 = pcVar9 + -uVar4;
  pcVar9 = local_400;
  for (uVar5 = uVar4 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
    *(undefined4 *)pcVar9 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar9 = pcVar9 + 4;
  }
  for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
    *pcVar9 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar9 = pcVar9 + 1;
  }
  uVar4 = 0xffffffff;
  pcVar7 = s__ddraw_dll_004739ac;
  do {
    pcVar9 = pcVar7;
    if (uVar4 == 0) break;
    uVar4 = uVar4 - 1;
    pcVar9 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar9;
  } while (cVar1 != '\0');
  uVar4 = ~uVar4;
  iVar6 = -1;
  pcVar7 = local_400;
  do {
    pcVar8 = pcVar7;
    if (iVar6 == 0) break;
    iVar6 = iVar6 + -1;
    pcVar8 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar1 != '\0');
  pcVar7 = pcVar9 + -uVar4;
  pcVar9 = pcVar8 + -1;
  for (uVar5 = uVar4 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
    *(undefined4 *)pcVar9 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar9 = pcVar9 + 4;
  }
  for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
    *pcVar9 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar9 = pcVar9 + 1;
  }
  iVar6 = FUN_0041db50(local_400,&local_408);
  if (-1 < iVar6) {
    uVar10 = FUN_0041dc10(4,7,0,700);
    iVar6 = FUN_0041dc50(local_408,local_404,(uint)uVar10,(uint)((ulonglong)uVar10 >> 0x20));
    if (-1 < iVar6) {
      if (param_1 != (undefined4 *)0x0) {
        *param_1 = 7;
      }
      if (param_2 != (undefined4 *)0x0) {
        *param_2 = 0;
      }
      if (param_3 != (undefined1 *)0x0) {
        *param_3 = 0x20;
      }
      bVar2 = true;
    }
  }
  uVar4 = 0xffffffff;
  pcVar7 = local_200;
  do {
    pcVar9 = pcVar7;
    if (uVar4 == 0) break;
    uVar4 = uVar4 - 1;
    pcVar9 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar9;
  } while (cVar1 != '\0');
  uVar4 = ~uVar4;
  pcVar7 = pcVar9 + -uVar4;
  pcVar9 = local_400;
  for (uVar5 = uVar4 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
    *(undefined4 *)pcVar9 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar9 = pcVar9 + 4;
  }
  for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
    *pcVar9 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar9 = pcVar9 + 1;
  }
  uVar4 = 0xffffffff;
  pcVar7 = s__dinput_dll_00473984;
  do {
    pcVar9 = pcVar7;
    if (uVar4 == 0) break;
    uVar4 = uVar4 - 1;
    pcVar9 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar9;
  } while (cVar1 != '\0');
  uVar4 = ~uVar4;
  iVar6 = -1;
  pcVar7 = local_400;
  do {
    pcVar8 = pcVar7;
    if (iVar6 == 0) break;
    iVar6 = iVar6 + -1;
    pcVar8 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar1 != '\0');
  pcVar7 = pcVar9 + -uVar4;
  pcVar9 = pcVar8 + -1;
  for (uVar5 = uVar4 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
    *(undefined4 *)pcVar9 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar9 = pcVar9 + 4;
  }
  for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
    *pcVar9 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar9 = pcVar9 + 1;
  }
  iVar6 = FUN_0041db50(local_400,&local_408);
  if (-1 < iVar6) {
    uVar10 = FUN_0041dc10(4,7,0,0x2cc);
    iVar6 = FUN_0041dc50(local_408,local_404,(uint)uVar10,(uint)((ulonglong)uVar10 >> 0x20));
    if (-1 < iVar6) {
      if (param_1 != (undefined4 *)0x0) {
        *param_1 = 7;
      }
      if (param_2 != (undefined4 *)0x0) {
        *param_2 = 0;
      }
      if (param_3 != (undefined1 *)0x0) {
        *param_3 = 0x61;
      }
      bVar2 = true;
    }
  }
  uVar4 = 0xffffffff;
  pcVar7 = local_200;
  do {
    pcVar9 = pcVar7;
    if (uVar4 == 0) break;
    uVar4 = uVar4 - 1;
    pcVar9 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar9;
  } while (cVar1 != '\0');
  uVar4 = ~uVar4;
  pcVar7 = pcVar9 + -uVar4;
  pcVar9 = local_400;
  for (uVar5 = uVar4 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
    *(undefined4 *)pcVar9 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar9 = pcVar9 + 4;
  }
  for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
    *pcVar9 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar9 = pcVar9 + 1;
  }
  uVar4 = 0xffffffff;
  pcVar7 = s__ddraw_dll_004739ac;
  do {
    pcVar9 = pcVar7;
    if (uVar4 == 0) break;
    uVar4 = uVar4 - 1;
    pcVar9 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar9;
  } while (cVar1 != '\0');
  uVar4 = ~uVar4;
  iVar6 = -1;
  pcVar7 = local_400;
  do {
    pcVar8 = pcVar7;
    if (iVar6 == 0) break;
    iVar6 = iVar6 + -1;
    pcVar8 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar1 != '\0');
  pcVar7 = pcVar9 + -uVar4;
  pcVar9 = pcVar8 + -1;
  for (uVar5 = uVar4 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
    *(undefined4 *)pcVar9 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar9 = pcVar9 + 4;
  }
  for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
    *pcVar9 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar9 = pcVar9 + 1;
  }
  iVar6 = FUN_0041db50(local_400,&local_408);
  if (-1 < iVar6) {
    if (local_404 >> 0x10 == 4) {
      uVar10 = FUN_0041dc10(4,8,0,400);
      iVar6 = FUN_0041dc50(local_408,local_404,(uint)uVar10,(uint)((ulonglong)uVar10 >> 0x20));
      if (iVar6 < 0) goto LAB_0041d692;
LAB_0041d6c4:
      if (param_1 != (undefined4 *)0x0) {
        *param_1 = 8;
      }
      if (param_2 != (undefined4 *)0x0) {
        *param_2 = 0;
      }
      if (param_3 != (undefined1 *)0x0) {
        *param_3 = 0x20;
      }
      bVar2 = true;
    }
    else {
LAB_0041d692:
      if (local_404 >> 0x10 == 5) {
        uVar10 = FUN_0041dc10(5,1,0x8d2,400);
        iVar6 = FUN_0041dc50(local_408,local_404,(uint)uVar10,(uint)((ulonglong)uVar10 >> 0x20));
        if (-1 < iVar6) goto LAB_0041d6c4;
      }
    }
  }
  uVar4 = 0xffffffff;
  pcVar7 = local_200;
  do {
    pcVar9 = pcVar7;
    if (uVar4 == 0) break;
    uVar4 = uVar4 - 1;
    pcVar9 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar9;
  } while (cVar1 != '\0');
  uVar4 = ~uVar4;
  pcVar7 = pcVar9 + -uVar4;
  pcVar9 = local_400;
  for (uVar5 = uVar4 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
    *(undefined4 *)pcVar9 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar9 = pcVar9 + 4;
  }
  for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
    *pcVar9 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar9 = pcVar9 + 1;
  }
  uVar4 = 0xffffffff;
  pcVar7 = &DAT_00473978;
  do {
    pcVar9 = pcVar7;
    if (uVar4 == 0) break;
    uVar4 = uVar4 - 1;
    pcVar9 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar9;
  } while (cVar1 != '\0');
  uVar4 = ~uVar4;
  iVar6 = -1;
  pcVar7 = local_400;
  do {
    pcVar8 = pcVar7;
    if (iVar6 == 0) break;
    iVar6 = iVar6 + -1;
    pcVar8 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar1 != '\0');
  pcVar7 = pcVar9 + -uVar4;
  pcVar9 = pcVar8 + -1;
  for (uVar5 = uVar4 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
    *(undefined4 *)pcVar9 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar9 = pcVar9 + 4;
  }
  for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
    *pcVar9 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar9 = pcVar9 + 1;
  }
  iVar6 = FUN_0041db50(local_400,&local_408);
  if (-1 < iVar6) {
    if (local_404 >> 0x10 == 4) {
      uVar10 = FUN_0041dc10(4,8,1,0x371);
      iVar6 = FUN_0041dc50(local_408,local_404,(uint)uVar10,(uint)((ulonglong)uVar10 >> 0x20));
      if (iVar6 < 0) goto LAB_0041d79c;
LAB_0041d7d0:
      if (param_1 != (undefined4 *)0x0) {
        *param_1 = 8;
      }
      if (param_2 != (undefined4 *)0x0) {
        *param_2 = 1;
      }
      if (param_3 != (undefined1 *)0x0) {
        *param_3 = 0x20;
      }
      bVar2 = true;
    }
    else {
LAB_0041d79c:
      if (local_404 >> 0x10 == 5) {
        uVar10 = FUN_0041dc10(5,1,0xa28,0x371);
        iVar6 = FUN_0041dc50(local_408,local_404,(uint)uVar10,(uint)((ulonglong)uVar10 >> 0x20));
        if (-1 < iVar6) goto LAB_0041d7d0;
      }
    }
    if (local_404 >> 0x10 == 4) {
      uVar10 = FUN_0041dc10(4,8,1,0x385);
      iVar6 = FUN_0041dc50(local_408,local_404,(uint)uVar10,(uint)((ulonglong)uVar10 >> 0x20));
      if (iVar6 < 0) goto LAB_0041d84c;
LAB_0041d87e:
      if (param_1 != (undefined4 *)0x0) {
        *param_1 = 8;
      }
      if (param_2 != (undefined4 *)0x0) {
        *param_2 = 1;
      }
      if (param_3 != (undefined1 *)0x0) {
        *param_3 = 0x61;
      }
      bVar2 = true;
    }
    else {
LAB_0041d84c:
      if (local_404 >> 0x10 == 5) {
        uVar10 = FUN_0041dc10(5,1,0xa28,0x385);
        iVar6 = FUN_0041dc50(local_408,local_404,(uint)uVar10,(uint)((ulonglong)uVar10 >> 0x20));
        if (-1 < iVar6) goto LAB_0041d87e;
      }
    }
  }
  uVar4 = 0xffffffff;
  pcVar7 = local_200;
  do {
    pcVar9 = pcVar7;
    if (uVar4 == 0) break;
    uVar4 = uVar4 - 1;
    pcVar9 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar9;
  } while (cVar1 != '\0');
  uVar4 = ~uVar4;
  pcVar7 = pcVar9 + -uVar4;
  pcVar9 = local_400;
  for (uVar5 = uVar4 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
    *(undefined4 *)pcVar9 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar9 = pcVar9 + 4;
  }
  for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
    *pcVar9 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar9 = pcVar9 + 1;
  }
  uVar4 = 0xffffffff;
  pcVar7 = &DAT_00473968;
  do {
    pcVar9 = pcVar7;
    if (uVar4 == 0) break;
    uVar4 = uVar4 - 1;
    pcVar9 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar9;
  } while (cVar1 != '\0');
  uVar4 = ~uVar4;
  iVar6 = -1;
  pcVar7 = local_400;
  do {
    pcVar8 = pcVar7;
    if (iVar6 == 0) break;
    iVar6 = iVar6 + -1;
    pcVar8 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar1 != '\0');
  pcVar7 = pcVar9 + -uVar4;
  pcVar9 = pcVar8 + -1;
  for (uVar5 = uVar4 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
    *(undefined4 *)pcVar9 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar9 = pcVar9 + 4;
  }
  for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
    *pcVar9 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar9 = pcVar9 + 1;
  }
  iVar6 = FUN_0041db50(local_400,&local_408);
  if (-1 < iVar6) {
    uVar10 = FUN_0041dc10(6,3,1,0x375);
    iVar6 = FUN_0041dc50(local_408,local_404,(uint)uVar10,(uint)((ulonglong)uVar10 >> 0x20));
    if (-1 < iVar6) {
      if (param_1 != (undefined4 *)0x0) {
        *param_1 = 8;
      }
      if (param_2 != (undefined4 *)0x0) {
        *param_2 = 1;
      }
      if (param_3 != (undefined1 *)0x0) {
        *param_3 = 0x62;
      }
      bVar2 = true;
    }
  }
  uVar4 = 0xffffffff;
  pcVar7 = local_200;
  do {
    pcVar9 = pcVar7;
    if (uVar4 == 0) break;
    uVar4 = uVar4 - 1;
    pcVar9 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar9;
  } while (cVar1 != '\0');
  uVar4 = ~uVar4;
  pcVar7 = pcVar9 + -uVar4;
  pcVar9 = local_400;
  for (uVar5 = uVar4 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
    *(undefined4 *)pcVar9 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar9 = pcVar9 + 4;
  }
  for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
    *pcVar9 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar9 = pcVar9 + 1;
  }
  uVar4 = 0xffffffff;
  pcVar7 = s__dpnet_dll_0047395c;
  do {
    pcVar9 = pcVar7;
    if (uVar4 == 0) break;
    uVar4 = uVar4 - 1;
    pcVar9 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar9;
  } while (cVar1 != '\0');
  uVar4 = ~uVar4;
  iVar6 = -1;
  pcVar7 = local_400;
  do {
    pcVar8 = pcVar7;
    if (iVar6 == 0) break;
    iVar6 = iVar6 + -1;
    pcVar8 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar1 != '\0');
  pcVar7 = pcVar9 + -uVar4;
  pcVar9 = pcVar8 + -1;
  for (uVar5 = uVar4 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
    *(undefined4 *)pcVar9 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar9 = pcVar9 + 4;
  }
  for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
    *pcVar9 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar9 = pcVar9 + 1;
  }
  iVar6 = FUN_0041db50(local_400,&local_408);
  if (-1 < iVar6) {
    if (local_404 >> 0x10 == 4) {
      uVar10 = FUN_0041dc10(4,9,0,0x86);
      iVar6 = FUN_0041dc50(local_408,local_404,(uint)uVar10,(uint)((ulonglong)uVar10 >> 0x20));
      if (iVar6 < 0) goto LAB_0041da0b;
LAB_0041da3d:
      if (param_1 != (undefined4 *)0x0) {
        *param_1 = 8;
      }
      if (param_2 != (undefined4 *)0x0) {
        *param_2 = 2;
      }
      if (param_3 != (undefined1 *)0x0) {
        *param_3 = 0x20;
      }
      bVar2 = true;
    }
    else {
LAB_0041da0b:
      if (local_404 >> 0x10 == 5) {
        uVar10 = FUN_0041dc10(5,2,0xe5d,0x86);
        iVar6 = FUN_0041dc50(local_408,local_404,(uint)uVar10,(uint)((ulonglong)uVar10 >> 0x20));
        if (-1 < iVar6) goto LAB_0041da3d;
      }
    }
  }
  uVar4 = 0xffffffff;
  pcVar7 = local_200;
  do {
    pcVar9 = pcVar7;
    if (uVar4 == 0) break;
    uVar4 = uVar4 - 1;
    pcVar9 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar9;
  } while (cVar1 != '\0');
  uVar4 = ~uVar4;
  pcVar7 = pcVar9 + -uVar4;
  pcVar9 = local_400;
  for (uVar5 = uVar4 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
    *(undefined4 *)pcVar9 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar9 = pcVar9 + 4;
  }
  for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
    *pcVar9 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar9 = pcVar9 + 1;
  }
  uVar4 = 0xffffffff;
  pcVar7 = &DAT_00473950;
  do {
    pcVar9 = pcVar7;
    if (uVar4 == 0) break;
    uVar4 = uVar4 - 1;
    pcVar9 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar9;
  } while (cVar1 != '\0');
  uVar4 = ~uVar4;
  iVar6 = -1;
  pcVar7 = local_400;
  do {
    pcVar8 = pcVar7;
    if (iVar6 == 0) break;
    iVar6 = iVar6 + -1;
    pcVar8 = pcVar7 + 1;
    cVar1 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar1 != '\0');
  pcVar7 = pcVar9 + -uVar4;
  pcVar9 = pcVar8 + -1;
  for (uVar5 = uVar4 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
    *(undefined4 *)pcVar9 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar9 = pcVar9 + 4;
  }
  for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
    *pcVar9 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar9 = pcVar9 + 1;
  }
  iVar6 = FUN_0041db50(local_400,&local_408);
  if (-1 < iVar6) {
    if (param_1 != (undefined4 *)0x0) {
      *param_1 = 9;
    }
    if (param_2 != (undefined4 *)0x0) {
      *param_2 = 0;
    }
    if (param_3 == (undefined1 *)0x0) {
      return 0;
    }
    *param_3 = 0x20;
    return 0;
  }
  if (bVar2) {
    return 0;
  }
LAB_0041db13:
  if (param_1 != (undefined4 *)0x0) {
    *param_1 = 0;
  }
  if (param_2 != (undefined4 *)0x0) {
    *param_2 = 0;
  }
  if (param_3 != (undefined1 *)0x0) {
    *param_3 = 0x20;
  }
  return 0;
}



/* FUN_0041db50 @ 0041db50 */

undefined4 __cdecl FUN_0041db50(LPCSTR param_1,undefined4 *param_2)

{
  LPCSTR lptstrFilename;
  undefined4 *puVar1;
  void *lpData;
  WINBOOL WVar2;
  DWORD local_4;
  
  puVar1 = param_2;
  lptstrFilename = param_1;
  if ((param_1 == (LPCSTR)0x0) || (param_2 == (undefined4 *)0x0)) {
    return 0x80070057;
  }
  param_1 = (LPCSTR)GetFileVersionInfoSizeA(param_1,&local_4);
  if (param_1 != (LPCSTR)0x0) {
    lpData = operator_new((uint)param_1);
    if (lpData == (void *)0x0) {
      return 0x8007000e;
    }
    WVar2 = GetFileVersionInfoA(lptstrFilename,0,(DWORD)param_1,lpData);
    if (WVar2 != 0) {
      param_2 = (undefined4 *)0x0;
      WVar2 = VerQueryValueA(lpData,&DAT_004739b8,&param_2,(PUINT)&param_1);
      if ((WVar2 != 0) && (param_2 != (undefined4 *)0x0)) {
        puVar1[1] = param_2[2];
        *puVar1 = param_2[3];
        crt_free(lpData);
        return 0;
      }
    }
    crt_free(lpData);
  }
  return 0x80004005;
}



/* FUN_0041dc10 @ 0041dc10 */

undefined8 __cdecl FUN_0041dc10(int param_1,uint param_2,int param_3,uint param_4)

{
  return CONCAT44(param_1 << 0x10 | param_2 & 0xffff,param_3 << 0x10 | param_4 & 0xffff);
}



/* FUN_0041dc50 @ 0041dc50 */

int __cdecl FUN_0041dc50(uint param_1,uint param_2,uint param_3,uint param_4)

{
  if (param_4 < param_2) {
    return 1;
  }
  if (param_2 < param_4) {
    return -1;
  }
  if (param_3 < param_1) {
    return 1;
  }
  return -(uint)(param_1 < param_3);
}



/* grim_load_interface @ 0041dc80 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* load grim DLL and fetch GRIM_GetInterface */

int __cdecl grim_load_interface(char *dll_name)

{
  char cVar1;
  FARPROC pFVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  char *pcVar6;
  char *pcVar7;
  
  _DAT_00490304 = LoadLibraryA(dll_name);
  if (_DAT_00490304 == (HMODULE)0x0) {
    return 0;
  }
  pFVar2 = GetProcAddress(_DAT_00490304,s_GRIM__GetInterface_004739bc);
  uVar4 = 0xffffffff;
  do {
    pcVar6 = dll_name;
    if (uVar4 == 0) break;
    uVar4 = uVar4 - 1;
    pcVar6 = dll_name + 1;
    cVar1 = *dll_name;
    dll_name = pcVar6;
  } while (cVar1 != '\0');
  uVar4 = ~uVar4;
  pcVar6 = pcVar6 + -uVar4;
  pcVar7 = (char *)&DAT_00490308;
  for (uVar5 = uVar4 >> 2; uVar5 != 0; uVar5 = uVar5 - 1) {
    *(undefined4 *)pcVar7 = *(undefined4 *)pcVar6;
    pcVar6 = pcVar6 + 4;
    pcVar7 = pcVar7 + 4;
  }
  for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
    *pcVar7 = *pcVar6;
    pcVar6 = pcVar6 + 1;
    pcVar7 = pcVar7 + 1;
  }
  if (pFVar2 == (FARPROC)0x0) {
    return 0;
  }
  iVar3 = (*pFVar2)();
  return iVar3;
}



/* FUN_0041dce0 @ 0041dce0 */

void __cdecl FUN_0041dce0(undefined4 *param_1,int param_2,int param_3,int param_4)

{
  int iVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  undefined4 *puVar5;
  
  if (*(uint *)(param_4 + -8) <= *(uint *)(param_4 + -4)) {
    *(undefined4 *)(param_4 + -4) = 0;
  }
  iVar1 = *(int *)(param_4 + -4);
  uVar4 = param_2 * param_3;
  uVar3 = uVar4;
  if (*(uint *)(param_4 + -8) < uVar4 + iVar1) {
    uVar3 = *(uint *)(param_4 + -8) - iVar1;
  }
  puVar5 = (undefined4 *)(iVar1 + param_4);
  for (uVar2 = uVar3 >> 2; uVar2 != 0; uVar2 = uVar2 - 1) {
    *param_1 = *puVar5;
    puVar5 = puVar5 + 1;
    param_1 = param_1 + 1;
  }
  for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
    *(undefined1 *)param_1 = *(undefined1 *)puVar5;
    puVar5 = (undefined4 *)((int)puVar5 + 1);
    param_1 = (undefined4 *)((int)param_1 + 1);
  }
  *(uint *)(param_4 + -4) = *(int *)(param_4 + -4) + uVar4;
  return;
}



/* FUN_0041dda0 @ 0041dda0 */

undefined4 __cdecl FUN_0041dda0(int param_1)

{
  return *(undefined4 *)(param_1 + -4);
}



/* FUN_0041ddb0 @ 0041ddb0 */

void __thiscall FUN_0041ddb0(void *this,undefined4 param_1)

{
  uint unaff_retaddr;
  
  ov_pcm_seek((OggVorbis_File *)((int)this + 0x10),(ulonglong)unaff_retaddr << 0x20);
  return;
}



/* FUN_0041ddd0 @ 0041ddd0 */

uint __thiscall FUN_0041ddd0(void *this,undefined4 *param_1,undefined4 param_2)

{
  OggVorbis_File *vf;
  int iVar1;
  uint uVar2;
  vorbis_info *pvVar3;
  undefined4 uVar4;
  int *piVar5;
  ogg_int64_t oVar6;
  longlong lVar7;
  undefined8 uVar8;
  
  *(code **)this = FUN_0041dce0;
  *(undefined1 **)((int)this + 4) = &LAB_0041dd40;
  *(undefined1 **)((int)this + 8) = &LAB_0041dd90;
  *(code **)((int)this + 0xc) = FUN_0041dda0;
  *(undefined4 *)((int)this + 0x2e0) = 0;
  *(undefined4 **)((int)this + 0x2ec) = param_1;
  *param_1 = param_2;
  *(undefined4 *)(*(int *)((int)this + 0x2ec) + 4) = 0;
  vf = (OggVorbis_File *)((int)this + 0x10);
  iVar1 = ov_open_callbacks((void *)(*(int *)((int)this + 0x2ec) + 8),vf,(char *)0x0,0,
                            *(ov_callbacks *)this);
  if (iVar1 < 0) {
    uVar2 = FUN_00461fd5((byte *)s_Input_does_not_appear_to_be_an_O_004739d0);
    return uVar2 & 0xffffff00;
  }
  pvVar3 = ov_info(vf,-1);
  piVar5 = (int *)((int)this + 0x2f0);
  for (iVar1 = 8; iVar1 != 0; iVar1 = iVar1 + -1) {
    *piVar5 = pvVar3->version;
    pvVar3 = (vorbis_info *)&pvVar3->channels;
    piVar5 = piVar5 + 1;
  }
  oVar6 = ov_pcm_total(vf,-1);
  lVar7 = __allmul((uint)oVar6,(int)((ulonglong)oVar6 >> 0x20),*(uint *)((int)this + 0x2f4),
                   (int)*(uint *)((int)this + 0x2f4) >> 0x1f);
  lVar7 = __allmul((uint)lVar7,(int)((ulonglong)lVar7 >> 0x20),0x10,0);
  uVar8 = __alldiv((uint)lVar7,(uint)((ulonglong)lVar7 >> 0x20),8,0);
  *(int *)((int)this + 0x2e4) = (int)uVar8;
  uVar4 = FUN_0041dda0(*(int *)((int)this + 0x2ec) + 8);
  *(undefined4 *)((int)this + 0x2e8) = uVar4;
  return CONCAT31((int3)((uint)uVar4 >> 8),1);
}



/* FUN_0041dee0 @ 0041dee0 */

void __fastcall FUN_0041dee0(int param_1)

{
  crt_free(*(void **)(param_1 + 0x2ec));
  ov_clear((OggVorbis_File *)(param_1 + 0x10));
  return;
}



/* FUN_0041df00 @ 0041df00 */

uint __thiscall FUN_0041df00(void *this,char *param_1,int param_2)

{
  uint uVar1;
  
  uVar1 = ov_read((OggVorbis_File *)((int)this + 0x10),param_1,param_2,0,2,1,
                  (int *)((int)this + 0x2e0));
  if (uVar1 == 0) {
    return 0;
  }
  return uVar1 & ((int)uVar1 < 0) - 1;
}



/* game_is_full_version @ 0041df40 */

/* returns non-zero when full version/unlimited mode is enabled */

int game_is_full_version(void)

{
  undefined4 in_EAX;
  
  return CONCAT31((int3)((uint)in_EAX >> 8),1);
}



/* FUN_0041df50 @ 0041df50 */

undefined4 FUN_0041df50(void)

{
  return 2400000;
}



/* game_sequence_get @ 0041df60 */

/* returns the saved game_sequence_id */

int game_sequence_get(void)

{
  return game_sequence_id;
}



/* FUN_0041e270 @ 0041e270 */

undefined4 __cdecl FUN_0041e270(float *param_1,float *param_2)

{
  *param_1 = *param_1 + *param_2;
  param_1[1] = param_2[1] + param_1[1];
  return 0;
}



/* FUN_0041e290 @ 0041e290 */

undefined4 __cdecl FUN_0041e290(int param_1,float *param_2,float *param_3)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  int iVar5;
  int *piVar6;
  
  iVar5 = perk_count_get(perk_id_alternate_weapon);
  if (iVar5 != 0) {
    *param_3 = *param_3 * 0.8;
    param_3[1] = param_3[1] * 0.8;
  }
  piVar6 = &creature_spawn_slot_owner;
  *param_2 = *param_2 + *param_3;
  param_2[1] = param_3[1] + param_2[1];
  do {
    iVar5 = *piVar6;
    if ((iVar5 != 0) &&
       (fVar3 = (*(float *)(iVar5 + 0x34) + (float)(&player_size)[param_1 * 0xd8]) * 0.33333334,
       fVar1 = *(float *)(iVar5 + 0x14) - *param_2, fVar2 = *(float *)(iVar5 + 0x18) - param_2[1],
       SQRT(fVar1 * fVar1 + fVar2 * fVar2) <= fVar3)) {
      *param_2 = *param_2 - *param_3;
      fVar1 = param_2[1];
      fVar2 = param_3[1];
      param_2[1] = fVar1 - fVar2;
      fVar4 = *(float *)(iVar5 + 0x14) - *param_2;
      fVar1 = *(float *)(iVar5 + 0x18) - (fVar1 - fVar2);
      fVar2 = *param_2 + *param_3;
      if (fVar3 < SQRT(fVar4 * fVar4 + fVar1 * fVar1)) {
        *param_2 = fVar2;
        fVar1 = *(float *)(iVar5 + 0x14) - fVar2;
        fVar4 = *(float *)(iVar5 + 0x18) - param_2[1];
        if (SQRT(fVar1 * fVar1 + fVar4 * fVar4) <= fVar3) {
          *param_2 = fVar2 - *param_3;
          fVar1 = param_3[1] + param_2[1];
          param_2[1] = fVar1;
          fVar4 = *(float *)(iVar5 + 0x14) - *param_2;
          fVar2 = *(float *)(iVar5 + 0x18) - fVar1;
          if (SQRT(fVar4 * fVar4 + fVar2 * fVar2) <= fVar3) {
            param_2[1] = fVar1 - param_3[1];
          }
        }
      }
      else {
        *param_2 = fVar2;
        param_2[1] = param_3[1] + param_2[1];
      }
    }
    piVar6 = piVar6 + 6;
  } while ((int)piVar6 < 0x4852d0);
  return 0;
}



/* vec2_add_inplace @ 0041e400 */

/* adds delta XY into pos; unused param_1 in decompile */

void __cdecl vec2_add_inplace(int unused,float *pos,float *delta)

{
  *pos = *pos + *delta;
  pos[1] = delta[1] + pos[1];
  return;
}



/* fx_queue_add @ 0041e840 */

/* pushes a quad entry into DAT_004aaf18 (capped at 0x80); returns 1 on success */

int __cdecl fx_queue_add(int effect_id,float *pos,float w,float h,float rotation,float *rgba)

{
  int iVar1;
  int iVar2;
  int iVar3;
  uint3 uVar4;
  int iVar5;
  
  iVar2 = fx_queue_count;
  iVar3 = fx_queue_count * 0x28;
  iVar5 = fx_queue_count + 1;
  (&fx_queue_pos_x)[fx_queue_count * 10] = *pos;
  (&fx_queue_pos_y)[fx_queue_count * 10] = pos[1];
  (&fx_queue_color_r)[fx_queue_count * 10] = *rgba;
  (&fx_queue_color_g)[fx_queue_count * 10] = rgba[1];
  (&fx_queue_color_b)[fx_queue_count * 10] = rgba[2];
  iVar1 = fx_queue_count * 10;
  fx_queue_count = iVar5;
  (&fx_queue_color_a)[iVar1] = rgba[3];
  (&fx_queue_width)[iVar2 * 10] = w;
  (&fx_queue_height)[iVar2 * 10] = h;
  (&fx_queue_rotation)[iVar2 * 10] = rotation;
  (&fx_queue)[iVar2 * 10] = effect_id;
  uVar4 = (uint3)((uint)iVar3 >> 8);
  if (0x7f < iVar5) {
    fx_queue_count = 0x7f;
    return (uint)uVar4 << 8;
  }
  return CONCAT31(uVar4,1);
}



/* FUN_0041e8d0 @ 0041e8d0 */

bool FUN_0041e8d0(void)

{
  int iVar1;
  
  iVar1 = (**(code **)(*grim_interface_ptr + 0xa4))(0);
  return iVar1 == DAT_004804fc;
}



/* FUN_0041e8f0 @ 0041e8f0 */

bool FUN_0041e8f0(void)

{
  int iVar1;
  
  iVar1 = (**(code **)(*grim_interface_ptr + 0xa4))(0);
  return iVar1 == DAT_004804f8;
}



/* creature_handle_death @ 0041e910 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* death handler: bonus spawns, split-on-death, score, and cleanup */

void __cdecl creature_handle_death(int creature_id,bool keep_corpse)

{
  float *pos;
  char *pcVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  char *pcVar5;
  undefined4 *puVar6;
  longlong lVar7;
  
  iVar2 = creature_id * 0x98;
  pcVar1 = &creature_pool + iVar2;
  if ((*(uint *)(&creature_flags + creature_id * 0x98) & 0x400) != 0) {
    bonus_spawn_at((float *)(&creature_pos_x + creature_id * 0x26),
                   (int)*(short *)(&creature_link_index + creature_id * 0x26),
                   (int)*(short *)((int)&creature_link_index + iVar2 + 2));
  }
  if (survival_recent_death_count < 6) {
    if (survival_recent_death_count < 3) {
      *(undefined4 *)(&survival_recent_death_pos_x + survival_recent_death_count * 8) =
           (&creature_pos_x)[creature_id * 0x26];
      (&survival_recent_death_pos_y)[survival_recent_death_count * 2] =
           (&creature_pos_y)[creature_id * 0x26];
    }
    survival_recent_death_count = survival_recent_death_count + 1;
    if (survival_recent_death_count == 3) {
      survival_reward_fire_seen = 0;
      survival_reward_handout_enabled = 0;
    }
  }
  if (*pcVar1 != '\0') {
    if (((&creature_flags)[iVar2] & 4) != 0) {
      (&creature_spawn_slot_owner)[(&creature_link_index)[creature_id * 0x26] * 6] = 0;
    }
    if ((((&creature_flags)[iVar2] & 8) != 0) &&
       (35.0 < (float)(&creature_size)[creature_id * 0x26])) {
      iVar2 = creature_alloc_slot();
      pcVar5 = pcVar1;
      puVar6 = (undefined4 *)(&creature_pool + iVar2 * 0x98);
      for (iVar4 = 0x26; iVar4 != 0; iVar4 = iVar4 + -1) {
        *puVar6 = *(undefined4 *)pcVar5;
        pcVar5 = pcVar5 + 4;
        puVar6 = puVar6 + 1;
      }
      uVar3 = _rand();
      (&creature_phase_seed)[iVar2 * 0x26] = uVar3 & 0xff;
      (&creature_heading)[iVar2 * 0x26] = (float)(&creature_heading)[creature_id * 0x26] - 1.5707964
      ;
      (&creature_health)[iVar2 * 0x26] = (float)(&creature_max_health)[creature_id * 0x26] * 0.25;
      (&creature_reward_value)[iVar2 * 0x26] =
           (float)(&creature_reward_value)[iVar2 * 0x26] * 0.6666667;
      (&creature_size)[iVar2 * 0x26] = (float)(&creature_size)[iVar2 * 0x26] - 8.0;
      (&creature_move_speed)[iVar2 * 0x26] = (float)(&creature_move_speed)[iVar2 * 0x26] + 0.1;
      (&creature_contact_damage)[iVar2 * 0x26] =
           (float)(&creature_contact_damage)[iVar2 * 0x26] * 0.7;
      (&creature_hitbox_size)[iVar2 * 0x26] = 0x41800000;
      iVar2 = creature_alloc_slot();
      pcVar5 = pcVar1;
      puVar6 = (undefined4 *)(&creature_pool + iVar2 * 0x98);
      for (iVar4 = 0x26; iVar4 != 0; iVar4 = iVar4 + -1) {
        *puVar6 = *(undefined4 *)pcVar5;
        pcVar5 = pcVar5 + 4;
        puVar6 = puVar6 + 1;
      }
      uVar3 = _rand();
      (&creature_phase_seed)[iVar2 * 0x26] = uVar3 & 0xff;
      (&creature_heading)[iVar2 * 0x26] = (float)(&creature_heading)[creature_id * 0x26] + 1.5707964
      ;
      (&creature_health)[iVar2 * 0x26] = (float)(&creature_max_health)[creature_id * 0x26] * 0.25;
      (&creature_size)[iVar2 * 0x26] = (float)(&creature_size)[iVar2 * 0x26] - 8.0;
      (&creature_move_speed)[iVar2 * 0x26] = (float)(&creature_move_speed)[iVar2 * 0x26] + 0.1;
      (&creature_reward_value)[iVar2 * 0x26] =
           (float)(&creature_reward_value)[iVar2 * 0x26] * 0.6666667;
      (&creature_hitbox_size)[iVar2 * 0x26] = 0x41800000;
      (&creature_contact_damage)[iVar2 * 0x26] =
           (float)(&creature_contact_damage)[iVar2 * 0x26] * 0.7;
      effect_spawn_burst((float *)(&creature_pos_x + creature_id * 0x26),8);
    }
    if (keep_corpse) {
      (&creature_hitbox_size)[creature_id * 0x26] =
           (float)(&creature_hitbox_size)[creature_id * 0x26] - frame_dt;
    }
    else {
      *pcVar1 = '\0';
    }
    iVar2 = perk_id_bloody_mess_quick_learner;
    if ((int)(&player_perk_counts)[perk_id_bloody_mess_quick_learner] < 1) {
      lVar7 = __ftol();
      player_experience = (int)lVar7;
    }
    else {
      lVar7 = __ftol();
      player_experience = player_experience + (int)lVar7;
    }
    if (0.0 < _bonus_double_xp_timer) {
      if ((int)(&player_perk_counts)[iVar2] < 1) {
        lVar7 = __ftol();
        player_experience = (int)lVar7;
      }
      else {
        lVar7 = __ftol();
        player_experience = player_experience + (int)lVar7;
      }
    }
    if (bonus_spawn_guard == '\0') {
      FUN_0041f8d0((float *)(&creature_pos_x + creature_id * 0x26));
    }
    if (0.0 < _bonus_freeze_timer) {
      pos = (float *)(&creature_pos_x + creature_id * 0x26);
      iVar2 = 8;
      do {
        iVar4 = _rand();
        effect_spawn_freeze_shard(pos,(float)(iVar4 % 0x264) * 0.01);
        iVar2 = iVar2 + -1;
      } while (iVar2 != 0);
      iVar2 = _rand();
      effect_spawn_freeze_shatter(pos,(float)(iVar2 % 0x264) * 0.01);
      creature_kill_count = creature_kill_count + 1;
      *pcVar1 = '\0';
      fx_queue_add_random(pos);
    }
  }
  return;
}



/* config_sync_from_grim @ 0041ec60 */

/* syncs Grim config values into config blob and writes crimson.cfg */

int config_sync_from_grim(void)

{
  char cVar1;
  undefined1 *puVar2;
  undefined4 *puVar3;
  FILE *pFVar4;
  long lVar5;
  uint uVar6;
  uint uVar7;
  char *pcVar8;
  int iVar9;
  int *piVar10;
  char *pcVar11;
  char *pcVar12;
  undefined4 uStack_4b8;
  undefined1 *puStack_4b4;
  undefined4 uStack_4b0;
  undefined4 *puStack_4ac;
  undefined4 uStack_4a8;
  undefined4 local_490 [9];
  undefined4 uStack_46c;
  undefined4 uStack_468;
  undefined4 uStack_444;
  undefined4 uStack_440;
  char acStack_43c [12];
  undefined4 uStack_430;
  undefined4 uStack_42c;
  int aiStack_428 [8];
  char acStack_408 [216];
  char acStack_330 [36];
  undefined4 uStack_30c;
  undefined4 uStack_308;
  undefined4 uStack_304;
  undefined4 uStack_300;
  undefined4 uStack_2fc;
  undefined4 uStack_2f8;
  undefined4 uStack_2f4;
  undefined4 uStack_2f0;
  undefined1 uStack_2ec;
  undefined4 uStack_2e8;
  undefined4 uStack_2e4;
  undefined4 uStack_2e0;
  undefined4 uStack_2dc;
  undefined4 uStack_2d8;
  undefined4 uStack_2d4;
  undefined4 uStack_2d0;
  undefined4 uStack_2cc;
  undefined4 uStack_2c8;
  undefined4 uStack_2c4;
  undefined4 uStack_2c0;
  undefined4 uStack_2bc;
  undefined4 uStack_2b8;
  undefined4 uStack_2b4;
  undefined4 uStack_2b0;
  undefined4 uStack_2ac;
  undefined4 uStack_2a8;
  undefined4 uStack_2a4;
  undefined4 uStack_2a0;
  undefined4 uStack_29c;
  undefined4 uStack_298;
  undefined4 uStack_294;
  undefined4 uStack_290;
  undefined4 uStack_28c;
  undefined4 uStack_288;
  undefined4 uStack_284;
  undefined4 uStack_280;
  undefined4 uStack_27c;
  undefined4 uStack_278;
  undefined4 uStack_274;
  undefined4 uStack_270;
  undefined4 uStack_26c;
  undefined1 uStack_68;
  undefined1 uStack_67;
  undefined4 uStack_64;
  undefined4 uStack_60;
  undefined1 uStack_50;
  undefined4 uStack_4c;
  undefined4 uStack_48;
  undefined1 uStack_44;
  undefined1 uStack_43;
  undefined1 uStack_42;
  undefined4 uStack_40;
  undefined4 uStack_3c;
  undefined4 uStack_38;
  undefined4 uStack_34;
  
  puStack_4ac = local_490;
  uStack_4a8 = 8;
  uStack_4b0 = 0x41ec7c;
  puVar2 = (undefined1 *)(**(code **)(*grim_interface_ptr + 0x24))();
  config_windowed = *puVar2;
  puStack_4b4 = &stack0xfffffb68;
  uStack_4b0 = 0x2b;
  uStack_4b8 = 0x41ec95;
  puVar3 = (undefined4 *)(**(code **)(*grim_interface_ptr + 0x24))();
  config_display_bpp = *puVar3;
  uStack_4b8 = 0x29;
  puVar3 = (undefined4 *)(**(code **)(*grim_interface_ptr + 0x24))(&stack0xfffffb60);
  config_screen_width = *puVar3;
  puVar3 = (undefined4 *)(**(code **)(*grim_interface_ptr + 0x24))(&uStack_4a8,0x2a);
  config_screen_height = *puVar3;
  puVar3 = (undefined4 *)(**(code **)(*grim_interface_ptr + 0x24))(&uStack_4b0,0x59);
  config_texture_scale = *puVar3;
  puVar2 = (undefined1 *)(**(code **)(*grim_interface_ptr + 0x24))(&uStack_4b8,0x54);
  config_player_name_length = player_name_length;
  DAT_004807b6 = *puVar2;
  uVar6 = 0xffffffff;
  pcVar8 = (char *)&highscore_active_record;
  do {
    pcVar12 = pcVar8;
    if (uVar6 == 0) break;
    uVar6 = uVar6 - 1;
    pcVar12 = pcVar8 + 1;
    cVar1 = *pcVar8;
    pcVar8 = pcVar12;
  } while (cVar1 != '\0');
  uVar6 = ~uVar6;
  pcVar8 = pcVar12 + -uVar6;
  pcVar12 = (char *)&config_player_name;
  for (uVar7 = uVar6 >> 2; uVar7 != 0; uVar7 = uVar7 - 1) {
    *(undefined4 *)pcVar12 = *(undefined4 *)pcVar8;
    pcVar8 = pcVar8 + 4;
    pcVar12 = pcVar12 + 4;
  }
  for (uVar6 = uVar6 & 3; uVar6 != 0; uVar6 = uVar6 - 1) {
    *pcVar12 = *pcVar8;
    pcVar8 = pcVar8 + 1;
    pcVar12 = pcVar12 + 1;
  }
  if (grim_config_invoked != '\0') {
    pcVar8 = acStack_408;
    acStack_43c[0] = '\0';
    acStack_43c[1] = '\0';
    acStack_43c[2] = '\0';
    acStack_43c[3] = '\0';
    uStack_68 = 0;
    acStack_43c[4] = '\0';
    acStack_43c[5] = '\0';
    acStack_43c[6] = '\0';
    acStack_43c[7] = '\0';
    uStack_67 = 1;
    uStack_64 = 0;
    uStack_3c = 0x3f000000;
    uStack_60 = 1;
    uStack_38 = 0x101;
    uStack_34 = 0x102;
    uStack_42 = 0;
    uStack_440 = 0x3f800000;
    uStack_43 = 0;
    acStack_43c[8] = 0;
    iVar9 = 0;
    piVar10 = aiStack_428;
    do {
      uVar6 = 0xffffffff;
      *piVar10 = iVar9;
      pcVar12 = s_default_0047131c;
      do {
        pcVar11 = pcVar12;
        if (uVar6 == 0) break;
        uVar6 = uVar6 - 1;
        pcVar11 = pcVar12 + 1;
        cVar1 = *pcVar12;
        pcVar12 = pcVar11;
      } while (cVar1 != '\0');
      uVar6 = ~uVar6;
      piVar10 = piVar10 + 1;
      pcVar12 = pcVar11 + -uVar6;
      pcVar11 = pcVar8;
      for (uVar7 = uVar6 >> 2; uVar7 != 0; uVar7 = uVar7 - 1) {
        *(undefined4 *)pcVar11 = *(undefined4 *)pcVar12;
        pcVar12 = pcVar12 + 4;
        pcVar11 = pcVar11 + 4;
      }
      iVar9 = iVar9 + 1;
      for (uVar6 = uVar6 & 3; uVar6 != 0; uVar6 = uVar6 - 1) {
        *pcVar11 = *pcVar12;
        pcVar12 = pcVar12 + 1;
        pcVar11 = pcVar11 + 1;
      }
      pcVar8 = pcVar8 + 0x1b;
    } while (iVar9 < 8);
    pcVar8 = acStack_330;
    for (iVar9 = 8; iVar9 != 0; iVar9 = iVar9 + -1) {
      pcVar8[0] = '\0';
      pcVar8[1] = '\0';
      pcVar8[2] = '\0';
      pcVar8[3] = '\0';
      pcVar8 = pcVar8 + 4;
    }
    uVar6 = 0xffffffff;
    pcVar8 = &default_player_name;
    do {
      pcVar12 = pcVar8;
      if (uVar6 == 0) break;
      uVar6 = uVar6 - 1;
      pcVar12 = pcVar8 + 1;
      cVar1 = *pcVar8;
      pcVar8 = pcVar12;
    } while (cVar1 != '\0');
    uVar6 = ~uVar6;
    pcVar8 = pcVar12 + -uVar6;
    pcVar12 = acStack_330;
    for (uVar7 = uVar6 >> 2; uVar7 != 0; uVar7 = uVar7 - 1) {
      *(undefined4 *)pcVar12 = *(undefined4 *)pcVar8;
      pcVar8 = pcVar8 + 4;
      pcVar12 = pcVar12 + 4;
    }
    for (uVar6 = uVar6 & 3; uVar6 != 0; uVar6 = uVar6 - 1) {
      *pcVar12 = *pcVar8;
      pcVar8 = pcVar8 + 1;
      pcVar12 = pcVar12 + 1;
    }
    uStack_42c = 1;
    uStack_50 = 1;
    uStack_2f8 = 0x20;
    uStack_2dc = 0x20;
    uStack_430 = 0;
    uStack_40 = 5;
    uStack_4b0 = 0;
    uStack_44 = 0;
    uStack_308 = 0;
    uStack_304 = 0;
    uStack_300 = 9000;
    uStack_2fc = 27000;
    uStack_30c = 100;
    uStack_444 = 0;
    uStack_2f4 = 800;
    uStack_2f0 = 600;
    uStack_2ec = 0;
    local_490[0] = 2;
    uStack_46c = 0;
    uStack_468 = 0;
    uStack_4c = 0x3f800000;
    uStack_48 = 0x3f800000;
    uStack_2e8 = 0x11;
    uStack_2e4 = 0x1f;
    uStack_2e0 = 0x1e;
    uStack_2d8 = 0x100;
    uStack_2d4 = 0x17e;
    uStack_2d0 = 0x17e;
    uStack_2cc = 0x10;
    uStack_2c8 = 0x12;
    uStack_2c4 = 0x13f;
    uStack_2c0 = 0x140;
    uStack_2bc = 0x141;
    uStack_2b8 = 0x153;
    uStack_2b4 = 0x17e;
    uStack_2b0 = 0x17e;
    uStack_2ac = 0x17e;
    uStack_2a8 = 200;
    uStack_2a4 = 0xd0;
    uStack_2a0 = 0xcb;
    uStack_29c = 0xcd;
    uStack_298 = 0x9d;
    uStack_294 = 0x17e;
    uStack_290 = 0x17e;
    uStack_28c = 0xd3;
    pcVar12 = &file_mode_read_binary;
    uStack_288 = 0xd1;
    uStack_284 = 0x13f;
    uStack_280 = 0x140;
    uStack_27c = 0x141;
    uStack_278 = 0x153;
    uStack_274 = 0x17e;
    uStack_270 = 0x17e;
    uStack_26c = 0x17e;
    puStack_4ac = (undefined4 *)CONCAT22(puStack_4ac._2_2_,0x101);
    pcVar8 = game_build_path(config_filename);
    pFVar4 = crt_fopen(pcVar8,pcVar12);
    if (pFVar4 != (FILE *)0x0) {
      crt_fseek(pFVar4,0,2);
      lVar5 = crt_ftell(pFVar4);
      if (lVar5 == 0x480) {
        crt_fseek(pFVar4,0,0);
        crt_fread(&uStack_4b0,0x480,1,pFVar4);
        uVar6 = 0xffffffff;
        pcVar8 = acStack_43c;
        do {
          pcVar12 = pcVar8;
          if (uVar6 == 0) break;
          uVar6 = uVar6 - 1;
          pcVar12 = pcVar8 + 1;
          cVar1 = *pcVar8;
          pcVar8 = pcVar12;
        } while (cVar1 != '\0');
        uVar6 = ~uVar6;
        config_fx_toggle = uStack_44;
        pcVar8 = pcVar12 + -uVar6;
        pcVar12 = (char *)&config_player_name_buf;
        for (uVar7 = uVar6 >> 2; uVar7 != 0; uVar7 = uVar7 - 1) {
          *(undefined4 *)pcVar12 = *(undefined4 *)pcVar8;
          pcVar8 = pcVar8 + 4;
          pcVar12 = pcVar12 + 4;
        }
        for (uVar6 = uVar6 & 3; uVar6 != 0; uVar6 = uVar6 - 1) {
          *pcVar12 = *pcVar8;
          pcVar8 = pcVar8 + 1;
          pcVar12 = pcVar12 + 1;
        }
      }
      crt_fclose(pFVar4);
    }
  }
  pcVar12 = &file_mode_write_binary;
  pcVar8 = game_build_path(config_filename);
  pFVar4 = crt_fopen(pcVar8,pcVar12);
  iVar9 = 0;
  if (pFVar4 != (FILE *)0x0) {
    crt_fwrite(&config_blob,0x480,1,pFVar4);
    iVar9 = crt_fclose(pFVar4);
  }
  return CONCAT31((int3)((uint)iVar9 >> 8),1);
}



/* config_ensure_file @ 0041f130 */

/* creates crimson.cfg when missing (writes default config blob) */

void config_ensure_file(void)

{
  char *pcVar1;
  FILE *pFVar2;
  char *pcVar3;
  
  pcVar3 = &file_mode_read_binary;
  pcVar1 = game_build_path(config_filename);
  pFVar2 = crt_fopen(pcVar1,pcVar3);
  if (pFVar2 != (FILE *)0x0) {
    crt_fclose(pFVar2);
    return;
  }
  pcVar3 = &file_mode_write_binary;
  config_fx_toggle = 1;
  pcVar1 = game_build_path(config_filename);
  pFVar2 = crt_fopen(pcVar1,pcVar3);
  if (pFVar2 != (FILE *)0x0) {
    crt_fwrite(&config_blob,0x480,1,pFVar2);
    crt_fclose(pFVar2);
  }
  return;
}



/* config_load_presets @ 0041f1a0 */

/* loads config presets into globals */

uint config_load_presets(void)

{
  char *pcVar1;
  FILE *fp;
  long lVar2;
  uint uVar3;
  undefined4 *puVar4;
  undefined4 *puVar5;
  undefined4 *puVar6;
  uint uVar7;
  char cVar8;
  char *pcVar9;
  
  pcVar9 = &file_mode_read_binary;
  player_move_key_forward = 0x11;
  player_move_key_backward = 0x1f;
  player_turn_key_left = 0x1e;
  player_turn_key_right = 0x20;
  player_fire_key = 0xf;
  player_key_reserved_0 = 0x11;
  player_key_reserved_1 = 0x1f;
  player_aim_key_left = 0x10;
  player_aim_key_right = 0x12;
  player_alt_move_key_forward = 200;
  player_alt_move_key_backward = 0xd0;
  player_alt_turn_key_left = 0xcb;
  player_alt_turn_key_right = 0xcd;
  player_alt_fire_key = 0x9d;
  player_alt_key_reserved_0 = 0x11;
  player_alt_key_reserved_1 = 0x1f;
  player_alt_key_reserved_2 = 0xd3;
  player_alt_key_reserved_3 = 0xc9;
  pcVar1 = game_build_path(config_filename);
  fp = crt_fopen(pcVar1,pcVar9);
  if (fp == (FILE *)0x0) {
    return 0;
  }
  crt_fseek(fp,0,2);
  lVar2 = crt_ftell(fp);
  if (lVar2 != 0x480) {
    crt_fclose(fp);
    uVar3 = config_sync_from_grim();
    return uVar3 & 0xffffff00;
  }
  cVar8 = '\0';
  crt_fseek(fp,0,0);
  crt_fread(&config_blob,0x480,1,fp);
  crt_fclose(fp);
  puVar6 = &player_move_key_backward;
  puVar4 = &config_keybind_table_p2;
  do {
    puVar5 = puVar4 + 0x10;
    puVar6[-1] = puVar4[-0xc];
    *puVar6 = puVar4[-0xb];
    puVar6[1] = puVar4[-10];
    puVar6[2] = puVar4[-9];
    puVar6[3] = puVar4[-8];
    puVar6[4] = puVar4[-7];
    puVar6[5] = puVar4[-6];
    puVar6[6] = puVar4[-5];
    puVar6[7] = puVar4[-4];
    puVar6[9] = puVar4[-3];
    puVar6[8] = puVar4[-2];
    puVar6[0xb] = puVar4[-1];
    puVar6[10] = *puVar4;
    puVar6 = puVar6 + 0xd8;
    puVar4 = puVar5;
  } while ((int)puVar5 < 0x4805c0);
  (**(code **)(*grim_interface_ptr + 0x20))(0x59,config_texture_scale);
  if (cVar8 == '\0') {
    (**(code **)(*grim_interface_ptr + 0x20))(0x54,DAT_004807b6);
    (**(code **)(*grim_interface_ptr + 0x20))(8,config_windowed);
    (**(code **)(*grim_interface_ptr + 0x20))(0x2b,config_display_bpp);
    (**(code **)(*grim_interface_ptr + 0x20))(0x29,config_screen_width);
    (**(code **)(*grim_interface_ptr + 0x20))(0x2a,config_screen_height);
    (**(code **)(*grim_interface_ptr + 0x20))(0x53,config_blob);
  }
  uVar3 = 0xffffffff;
  pcVar1 = (char *)&config_player_name;
  do {
    pcVar9 = pcVar1;
    if (uVar3 == 0) break;
    uVar3 = uVar3 - 1;
    pcVar9 = pcVar1 + 1;
    cVar8 = *pcVar1;
    pcVar1 = pcVar9;
  } while (cVar8 != '\0');
  uVar3 = ~uVar3;
  pcVar1 = pcVar9 + -uVar3;
  pcVar9 = (char *)&highscore_active_record;
  for (uVar7 = uVar3 >> 2; uVar7 != 0; uVar7 = uVar7 - 1) {
    *(undefined4 *)pcVar9 = *(undefined4 *)pcVar1;
    pcVar1 = pcVar1 + 4;
    pcVar9 = pcVar9 + 4;
  }
  for (uVar7 = uVar3 & 3; uVar7 != 0; uVar7 = uVar7 - 1) {
    *pcVar9 = *pcVar1;
    pcVar1 = pcVar1 + 1;
    pcVar9 = pcVar9 + 1;
  }
  player_name_length = config_player_name_length;
  config_highscore_date_mode = 0;
  config_name_slot_selected = 0;
  return CONCAT31((int3)(uVar3 >> 8),1);
}



/* angle_approach @ 0041f430 */

/* wraps angle into [0,2pi] and steps toward target using shortest arc */

void __cdecl angle_approach(float *angle,float target,float rate)

{
  float fVar1;
  float fVar2;
  float fVar3;
  
  fVar1 = *angle;
  while (fVar1 < 0.0) {
    fVar1 = *angle + 6.2831855;
    *angle = fVar1;
  }
  fVar1 = *angle;
  while (6.2831855 < fVar1) {
    fVar1 = *angle - 6.2831855;
    *angle = fVar1;
  }
  fVar2 = ABS(target - *angle);
  fVar1 = *angle;
  if (*angle < target) {
    fVar1 = target;
  }
  fVar3 = *angle;
  if (target < *angle) {
    fVar3 = target;
  }
  fVar3 = ABS((6.2831855 - fVar1) + fVar3);
  fVar1 = fVar3;
  if (fVar2 < fVar3) {
    fVar1 = fVar2;
  }
  if (1.0 < fVar1) {
    fVar1 = 1.0;
  }
  if (fVar2 <= fVar3) {
    fVar1 = frame_dt * fVar1 * rate;
    if (*angle < target) {
      *angle = fVar1 + *angle;
      return;
    }
  }
  else {
    fVar1 = frame_dt * fVar1 * rate;
    if (target < *angle) {
      *angle = fVar1 + *angle;
      return;
    }
  }
  *angle = *angle - fVar1;
  return;
}



/* bonus_alloc_slot @ 0041f580 */

/* returns a free bonus slot in DAT_00482948 (or DAT_00490630 sentinel) */

undefined4 * bonus_alloc_slot(void)

{
  int *piVar1;
  int iVar2;
  
  iVar2 = 0;
  piVar1 = &bonus_pool;
  do {
    if (*piVar1 == 0) {
      return &bonus_pool + iVar2 * 7;
    }
    piVar1 = piVar1 + 7;
    iVar2 = iVar2 + 1;
  } while ((int)piVar1 < 0x482b08);
  return (undefined4 *)&bonus_pool_sentinel;
}



/* bonus_spawn_at @ 0041f5b0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* clamps position, fills bonus entry fields, and spawns pickup effect */

int * __cdecl bonus_spawn_at(float *pos,int bonus_id,int duration_override)

{
  int *piVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  
  if (*pos < 32.0) {
    *pos = 32.0;
  }
  if (pos[1] < 32.0) {
    pos[1] = 32.0;
  }
  if ((float)(terrain_texture_width + -0x20) < *pos) {
    *pos = (float)(terrain_texture_width + -0x20);
  }
  if ((float)(terrain_texture_height + -0x20) < pos[1]) {
    pos[1] = (float)(terrain_texture_height + -0x20);
  }
  if (_config_game_mode != 2) {
    piVar1 = bonus_alloc_slot();
    *(undefined1 *)(piVar1 + 1) = 0;
    piVar1[4] = (int)*pos;
    piVar1[5] = (int)pos[1];
    piVar1[2] = 0x41200000;
    piVar1[3] = 0x41200000;
    *piVar1 = bonus_id;
    piVar1[6] = duration_override;
    if (duration_override == -1) {
      piVar1[6] = *(int *)(&bonus_meta_default_amount + bonus_id * 0x14);
    }
    _effect_template_color_r = 0x3ecccccd;
    _effect_template_flags = 0x1d;
    _effect_template_color_g = 0x3f000000;
    _effect_template_color_b = 0x3f800000;
    _effect_template_color_a = 0x3f000000;
    _effect_template_lifetime = 0x3f000000;
    _effect_template_half_width = 0x42000000;
    _effect_template_half_height = 0x42000000;
    iVar4 = 0x10;
    do {
      uVar2 = _rand();
      _effect_template_rotation = (float)(uVar2 & 0x7f) * 0.049087387;
      uVar2 = _rand();
      uVar2 = uVar2 & 0x8000007f;
      if ((int)uVar2 < 0) {
        uVar2 = (uVar2 - 1 | 0xffffff80) + 1;
      }
      effect_template_vel_x = (float)(int)(uVar2 - 0x40);
      uVar2 = _rand();
      uVar2 = uVar2 & 0x8000007f;
      if ((int)uVar2 < 0) {
        uVar2 = (uVar2 - 1 | 0xffffff80) + 1;
      }
      effect_template_vel_y = (float)(int)(uVar2 - 0x40);
      iVar3 = _rand();
      _effect_template_scale_step = (float)(iVar3 % 100) * 0.01 + 0.1;
      effect_spawn(0,pos);
      iVar4 = iVar4 + -1;
    } while (iVar4 != 0);
    return piVar1;
  }
  return (int *)&bonus_pool_sentinel;
}



/* FUN_0041f790 @ 0041f790 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

uint * __cdecl FUN_0041f790(float *param_1)

{
  uint *puVar1;
  uint uVar2;
  int iVar3;
  int *piVar4;
  
  if ((((*param_1 < 32.0) || ((float)(terrain_texture_width + -0x20) < *param_1)) ||
      (param_1[1] < 32.0)) ||
     (((float)(terrain_texture_height + -0x20) < param_1[1] || (_config_game_mode == 2)))) {
    return (uint *)&bonus_pool_sentinel;
  }
  puVar1 = bonus_alloc_slot();
  piVar4 = &bonus_pool;
  while ((*piVar4 == 0 ||
         (32.0 <= SQRT((param_1[1] - (float)piVar4[5]) * (param_1[1] - (float)piVar4[5]) +
                       (*param_1 - (float)piVar4[4]) * (*param_1 - (float)piVar4[4]))))) {
    piVar4 = piVar4 + 7;
    if (0x482b07 < (int)piVar4) {
LAB_0041f853:
      *(undefined1 *)(puVar1 + 1) = 0;
      puVar1[4] = (uint)*param_1;
      puVar1[5] = (uint)param_1[1];
      puVar1[2] = 0x41200000;
      puVar1[3] = 0x41200000;
      uVar2 = FUN_00412470();
      *puVar1 = uVar2;
      if (uVar2 == 3) {
        uVar2 = weapon_pick_random_available();
        puVar1[6] = uVar2;
        return puVar1;
      }
      if (*puVar1 == 1) {
        puVar1[6] = 500;
        iVar3 = _rand();
        if (((byte)iVar3 & 7) < 3) {
          puVar1[6] = 1000;
          return puVar1;
        }
      }
      else {
        puVar1[6] = *(uint *)(&bonus_meta_default_amount + *puVar1 * 0x14);
      }
      return puVar1;
    }
  }
  puVar1 = (uint *)&bonus_pool_sentinel;
  goto LAB_0041f853;
}



/* FUN_0041f8d0 @ 0041f8d0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

uint * __cdecl FUN_0041f8d0(float *param_1)

{
  int iVar1;
  uint *puVar2;
  uint *puVar3;
  uint uVar4;
  int iVar5;
  uint *puVar6;
  
  if (_config_game_mode == (uint *)0x4) {
    return (uint *)0x4;
  }
  if (demo_mode_active != '\0') {
    return _config_game_mode;
  }
  if (_config_game_mode == (uint *)0x2) {
    return (uint *)0x2;
  }
  if (_config_game_mode == (uint *)0x8) {
    return (uint *)0x8;
  }
  if (((player_weapon_id == (uint *)0x1) ||
      ((player2_weapon_id == 1 && (_config_player_count == 2)))) &&
     (iVar1 = _rand(), ((byte)iVar1 & 3) < 3)) {
    puVar2 = FUN_0041f790(param_1);
    *puVar2 = 3;
    puVar3 = (uint *)weapon_pick_random_available();
    puVar2[6] = (uint)puVar3;
    if (puVar3 == (uint *)0x1) {
      puVar3 = (uint *)weapon_pick_random_available();
      puVar2[6] = (uint)puVar3;
    }
    iVar1 = 0;
    if (*puVar2 != 1) {
      puVar3 = &bonus_pool;
      do {
        if (*puVar3 == *puVar2) {
          iVar1 = iVar1 + 1;
        }
        puVar3 = puVar3 + 7;
      } while ((int)puVar3 < 0x482b08);
      if (1 < iVar1) goto LAB_0041f998;
    }
    if (puVar2[6] == 1) {
LAB_0041f998:
      *puVar2 = 0;
      return puVar3;
    }
    puVar3 = (uint *)perk_count_get(perk_id_my_favourite_weapon);
    puVar6 = (uint *)0x0;
    if (puVar3 != (uint *)0x0) goto LAB_0041f998;
  }
  else {
    iVar1 = _rand();
    if ((iVar1 % 9 != 1) && ((player_weapon_id != (uint *)0x1 || (iVar1 = _rand(), iVar1 % 5 != 1)))
       ) {
      iVar1 = perk_count_get(perk_id_bonus_magnet);
      if (iVar1 == 0) {
        return (uint *)0x0;
      }
      iVar1 = _rand();
      if (iVar1 % 10 != 2) {
        return (uint *)(iVar1 / 10);
      }
    }
    puVar2 = FUN_0041f790(param_1);
    if ((*puVar2 == 3) &&
       (SQRT((param_1[1] - player_pos_y) * (param_1[1] - player_pos_y) +
             (*param_1 - player_pos_x) * (*param_1 - player_pos_x)) < 56.0)) {
      *puVar2 = 1;
      puVar2[6] = 100;
    }
    iVar1 = 0;
    if (*puVar2 != 1) {
      puVar3 = &bonus_pool;
      do {
        if (*puVar3 == *puVar2) {
          iVar1 = iVar1 + 1;
        }
        puVar3 = puVar3 + 7;
      } while ((int)puVar3 < 0x482b08);
      if (1 < iVar1) goto LAB_0041fa76;
    }
    puVar3 = player_weapon_id;
    puVar6 = player_weapon_id;
    if ((uint *)puVar2[6] == player_weapon_id) {
LAB_0041fa76:
      *puVar2 = 0;
      return puVar3;
    }
  }
  if ((puVar2 != (uint *)0x0) && (puVar2 != (uint *)&bonus_pool_sentinel)) {
    _effect_template_color_r = 0x3ecccccd;
    _effect_template_flags = 0x1d;
    _effect_template_color_g = 0x3f000000;
    _effect_template_color_b = 0x3f800000;
    _effect_template_color_a = 0x3f000000;
    _effect_template_lifetime = 0x3f000000;
    _effect_template_half_width = 0x42000000;
    _effect_template_half_height = 0x42000000;
    iVar1 = 0x10;
    do {
      uVar4 = _rand();
      _effect_template_rotation = (float)(uVar4 & 0x7f) * 0.049087387;
      uVar4 = _rand();
      uVar4 = uVar4 & 0x8000007f;
      if ((int)uVar4 < 0) {
        uVar4 = (uVar4 - 1 | 0xffffff80) + 1;
      }
      effect_template_vel_x = (float)(int)(uVar4 - 0x40);
      uVar4 = _rand();
      uVar4 = uVar4 & 0x8000007f;
      if ((int)uVar4 < 0) {
        uVar4 = (uVar4 - 1 | 0xffffff80) + 1;
      }
      effect_template_vel_y = (float)(int)(uVar4 - 0x40);
      iVar5 = _rand();
      _effect_template_scale_step = (float)(iVar5 % 100) * 0.01 + 0.1;
      puVar6 = effect_spawn(0,param_1);
      iVar1 = iVar1 + -1;
    } while (iVar1 != 0);
  }
  return puVar6;
}



/* fx_spawn_sprite @ 0041fbb0 */

/* spawns a sprite effect entry in DAT_00496820 */

int __cdecl fx_spawn_sprite(float *pos,float *vel,float scale)

{
  char *pcVar1;
  int iVar2;
  int iVar3;
  
  iVar3 = 0;
  pcVar1 = &sprite_effect_pool;
  do {
    if (*pcVar1 == '\0') goto LAB_0041fbd8;
    pcVar1 = pcVar1 + 0x2c;
    iVar3 = iVar3 + 1;
  } while ((int)pcVar1 < 0x49aa20);
  iVar3 = _rand();
  iVar3 = iVar3 % 0x180;
LAB_0041fbd8:
  (&sprite_effect_pool)[iVar3 * 0x2c] = 1;
  (&sprite_effect_color_b)[iVar3 * 0xb] = 0x3f800000;
  (&sprite_effect_color_g)[iVar3 * 0xb] = 0x3f800000;
  (&sprite_effect_color_r)[iVar3 * 0xb] = 0x3f800000;
  (&sprite_effect_color_a)[iVar3 * 0xb] = 0x3f800000;
  (&sprite_effect_pos_x)[iVar3 * 0xb] = *pos;
  (&sprite_effect_pos_y)[iVar3 * 0xb] = pos[1];
  (&sprite_effect_vel_x)[iVar3 * 0xb] = *vel;
  (&sprite_effect_vel_y)[iVar3 * 0xb] = vel[1];
  (&sprite_effect_scale)[iVar3 * 0xb] = scale;
  iVar2 = _rand();
  (&sprite_effect_rotation)[iVar3 * 0xb] = (float)(iVar2 % 0x274) * 0.01;
  return iVar3;
}



/* weapon_table_entry @ 0041fc60 */

/* returns the entry base (&DAT_004d7a2c + weapon_id * 0x1f) */

char * __cdecl weapon_table_entry(int weapon_id)

{
  return (char *)(&weapon_table + weapon_id * 0x1f);
}



/* FUN_0041fc80 @ 0041fc80 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_0041fc80(void)

{
  float fVar1;
  float fVar2;
  char cVar3;
  uint uVar4;
  undefined4 uVar5;
  int iVar6;
  undefined1 *puVar7;
  uint uVar8;
  undefined4 *puVar9;
  bool bVar10;
  
  if (*(float *)(DAT_00480864 + 0xc) != 0.0) {
    console_printf(&console_log_queue,(byte *)s___Reseting_players__00473e54);
  }
  render_overlay_player_index = 0;
  do {
    uVar4 = render_overlay_player_index;
    fVar1 = (float)terrain_texture_width;
    _DAT_004aaf30 = 0;
    iVar6 = render_overlay_player_index * 0x360;
    fVar2 = (float)terrain_texture_height;
    (&player_speed_bonus_timer)[render_overlay_player_index * 0xd8] = 0;
    (&player_shield_timer)[uVar4 * 0xd8] = 0;
    (&player_state_aux)[uVar4 * 0xd8] = 0;
    (&player_plaguebearer_active)[iVar6] = 0;
    (&player_pos_x)[uVar4 * 0xd8] = fVar1 * 0.5;
    (&player_pos_y)[uVar4 * 0xd8] = fVar2 * 0.5;
    uVar8 = uVar4 & 0x80000001;
    bVar10 = uVar8 == 0;
    (&player_health)[uVar4 * 0xd8] = 0x42c80000;
    if ((int)uVar8 < 0) {
      bVar10 = (uVar8 - 1 | 0xfffffffe) == 0xffffffff;
    }
    if (bVar10) {
      (&player_pos_x)[uVar4 * 0xd8] =
           (float)(int)(uVar4 * 0x50) + (float)(&player_pos_x)[uVar4 * 0xd8];
      (&player_pos_y)[uVar4 * 0xd8] =
           (float)(int)(uVar4 * 0x50) + (float)(&player_pos_y)[uVar4 * 0xd8];
    }
    else {
      (&player_pos_x)[uVar4 * 0xd8] =
           (float)(&player_pos_x)[uVar4 * 0xd8] - (float)(int)(uVar4 * 0x50);
      (&player_pos_y)[uVar4 * 0xd8] =
           (float)(&player_pos_y)[uVar4 * 0xd8] - (float)(int)(uVar4 * 0x50);
    }
    fVar1 = (float)_DAT_004d7aec;
    (&player_size)[render_overlay_player_index * 0xd8] = 0x42400000;
    (&player_speed_multiplier)[render_overlay_player_index * 0xd8] = 0x40000000;
    (&player_level)[render_overlay_player_index * 0xd8] = 1;
    (&player_heading)[render_overlay_player_index * 0xd8] = 0;
    (&player_experience)[render_overlay_player_index * 0xd8] = 0;
    (&DAT_00490960)[render_overlay_player_index * 0xd8] = 0;
    (&player_spread_heat)[render_overlay_player_index * 0xd8] = 0;
    (&player_move_speed)[render_overlay_player_index * 0xd8] = 0;
    (&player_ammo)[render_overlay_player_index * 0xd8] = 0x41200000;
    (&player_clip_size)[render_overlay_player_index * 0xd8] = 0x41200000;
    (&player_reload_timer_max)[render_overlay_player_index * 0xd8] = 0x3f800000;
    (&player_reload_timer)[render_overlay_player_index * 0xd8] = 0;
    (&player_alt_weapon_id)[render_overlay_player_index * 0xd8] = 1;
    (&player_alt_clip_size)[render_overlay_player_index * 0xd8] = fVar1;
    (&player_alt_reload_active)[render_overlay_player_index * 0x360] = 0;
    (&player_alt_ammo)[render_overlay_player_index * 0xd8] =
         (&player_alt_clip_size)[render_overlay_player_index * 0xd8];
    uVar5 = DAT_004d7af4;
    (&player_alt_reload_timer)[render_overlay_player_index * 0xd8] = 0;
    (&player_alt_shot_cooldown)[render_overlay_player_index * 0xd8] = 0;
    (&player_alt_reload_timer_max)[render_overlay_player_index * 0xd8] = uVar5;
    cVar3 = demo_mode_active;
    (&player_shot_cooldown)[render_overlay_player_index * 0xd8] = 0x3f4ccccd;
    (&player_weapon_id)[render_overlay_player_index * 0xd8] = 1;
    (&DAT_00490ba8)[render_overlay_player_index * 0xd8] = 0;
    (&player_death_timer)[render_overlay_player_index * 0xd8] = 0x41800000;
    if (cVar3 == '\0') {
      ui_mouse_x = 0x43a00000;
      ui_mouse_y = 0x430c0000;
    }
    puVar9 = &player_perk_counts + render_overlay_player_index * 0xd8;
    for (iVar6 = 0x80; iVar6 != 0; iVar6 = iVar6 + -1) {
      *puVar9 = 0;
      puVar9 = puVar9 + 1;
    }
    puVar7 = &creature_collision_flag;
    do {
      *puVar7 = 0;
      puVar7 = puVar7 + 0x98;
    } while ((int)puVar7 < 0x4aa341);
    render_overlay_player_index = render_overlay_player_index + 1;
  } while ((int)render_overlay_player_index < 2);
  render_overlay_player_index = 0;
  return;
}



/* effect_uv_tables_init @ 0041fed0 */

/* precomputes UV grids for 2x2, 4x4, 8x8, 16x16 effect atlases */

void effect_uv_tables_init(void)

{
  float fVar1;
  undefined4 *puVar2;
  undefined4 *puVar3;
  float *pfVar4;
  float *pfVar5;
  int local_8;
  int local_4;
  
  local_8 = 0;
  puVar2 = &DAT_00490f84;
  do {
    fVar1 = (float)local_8;
    puVar3 = puVar2 + 2;
    local_8 = local_8 + 1;
    puVar2[-1] = fVar1 * 0.0625;
    *puVar2 = 0;
    puVar2 = puVar3;
  } while ((int)puVar3 < 0x491004);
  local_4 = 0;
  pfVar5 = (float *)&effect_uv2_v;
  do {
    local_8 = 0;
    pfVar4 = pfVar5;
    do {
      fVar1 = (float)local_8;
      local_8 = local_8 + 1;
      pfVar4[-1] = fVar1 * 0.5;
      *pfVar4 = (float)local_4 * 0.5;
      pfVar4 = pfVar4 + 2;
    } while (local_8 < 2);
    local_4 = local_4 + 1;
    pfVar5 = pfVar5 + 4;
  } while (local_4 < 2);
  local_4 = 0;
  pfVar5 = (float *)&effect_uv4_v;
  do {
    local_8 = 0;
    pfVar4 = pfVar5;
    do {
      fVar1 = (float)local_8;
      local_8 = local_8 + 1;
      pfVar4[-1] = fVar1 * 0.25;
      *pfVar4 = (float)local_4 * 0.25;
      pfVar4 = pfVar4 + 2;
    } while (local_8 < 4);
    local_4 = local_4 + 1;
    pfVar5 = pfVar5 + 8;
  } while (local_4 < 4);
  local_4 = 0;
  pfVar5 = (float *)&effect_uv8_v;
  do {
    local_8 = 0;
    pfVar4 = pfVar5;
    do {
      fVar1 = (float)local_8;
      local_8 = local_8 + 1;
      pfVar4[-1] = fVar1 * 0.125;
      *pfVar4 = (float)local_4 * 0.125;
      pfVar4 = pfVar4 + 2;
    } while (local_8 < 8);
    local_4 = local_4 + 1;
    pfVar5 = pfVar5 + 0x10;
  } while (local_4 < 8);
  local_4 = 0;
  pfVar5 = (float *)&effect_uv16_v;
  do {
    local_8 = 0;
    pfVar4 = pfVar5;
    do {
      fVar1 = (float)local_8;
      local_8 = local_8 + 1;
      pfVar4[-1] = fVar1 * 0.0625;
      *pfVar4 = (float)local_4 * 0.0625;
      pfVar4 = pfVar4 + 2;
    } while (local_8 < 0x10);
    local_4 = local_4 + 1;
    pfVar5 = pfVar5 + 0x20;
  } while (local_4 < 0x10);
  return;
}



/* FUN_00420040 @ 00420040 */

int __cdecl FUN_00420040(float *param_1,int param_2,float param_3)

{
  float fVar1;
  float fVar2;
  char *pcVar3;
  int iVar4;
  int iVar5;
  
  fVar1 = 1e+06;
  iVar5 = 0;
  if (param_2 == -1) {
    iVar4 = 0;
    pcVar3 = &creature_pool;
    do {
      if (((*pcVar3 != '\0') && (*(int *)(pcVar3 + 0x10) == 0x41800000)) &&
         (fVar2 = SQRT((param_1[1] - *(float *)(pcVar3 + 0x18)) *
                       (param_1[1] - *(float *)(pcVar3 + 0x18)) +
                       (*param_1 - *(float *)(pcVar3 + 0x14)) *
                       (*param_1 - *(float *)(pcVar3 + 0x14))), fVar2 < fVar1)) {
        iVar5 = iVar4;
        fVar1 = fVar2;
      }
      pcVar3 = pcVar3 + 0x98;
      iVar4 = iVar4 + 1;
    } while ((int)pcVar3 < 0x4aa338);
    return iVar5;
  }
  iVar4 = 0;
  pcVar3 = &creature_pool;
  do {
    if ((((*pcVar3 != '\0') && (iVar4 != param_2)) &&
        (fVar2 = SQRT((*param_1 - *(float *)(pcVar3 + 0x14)) *
                      (*param_1 - *(float *)(pcVar3 + 0x14)) +
                      (param_1[1] - *(float *)(pcVar3 + 0x18)) *
                      (param_1[1] - *(float *)(pcVar3 + 0x18))), param_3 < fVar2)) &&
       (fVar2 < fVar1)) {
      iVar5 = iVar4;
      fVar1 = fVar2;
    }
    pcVar3 = pcVar3 + 0x98;
    iVar4 = iVar4 + 1;
  } while ((int)pcVar3 < 0x4aa338);
  return iVar5;
}



/* fx_spawn_particle @ 00420130 */

/* spawns a fast particle entry in DAT_00493eb8 */

int __cdecl fx_spawn_particle(float *pos,float angle,void *unused,float intensity)

{
  char *pcVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  float10 fVar5;
  
  pcVar1 = &particle_pool;
  uVar4 = 0;
  do {
    if (*pcVar1 == '\0') goto LAB_00420160;
    pcVar1 = pcVar1 + 0x38;
    uVar4 = uVar4 + 1;
  } while ((int)pcVar1 < 0x495ab8);
  uVar4 = _rand();
  uVar4 = uVar4 & 0x8000007f;
  if ((int)uVar4 < 0) {
    uVar4 = (uVar4 - 1 | 0xffffff80) + 1;
  }
LAB_00420160:
  fVar5 = (float10)fcos((float10)angle);
  iVar3 = uVar4 * 0x38;
  (&particle_pool)[iVar3] = 1;
  (&particle_pos_x)[uVar4 * 0xe] = *pos;
  (&particle_pos_y)[uVar4 * 0xe] = pos[1];
  (&particle_vel_x)[uVar4 * 0xe] = (float)(fVar5 * (float10)90.0);
  fVar5 = (float10)fsin((float10)angle);
  (&particle_vel_y)[uVar4 * 0xe] = (float)(fVar5 * (float10)90.0);
  (&particle_intensity)[uVar4 * 0xe] = intensity;
  (&particle_scale_x)[uVar4 * 0xe] = 0x3f800000;
  (&particle_scale_y)[uVar4 * 0xe] = 0x3f800000;
  (&particle_scale_z)[uVar4 * 0xe] = 0x3f800000;
  (&particle_age)[uVar4 * 0xe] = 0;
  *(float *)(&particle_angle + iVar3) = angle;
  iVar2 = _rand();
  (&particle_spin)[uVar4 * 0xe] = (float)(iVar2 % 0x274) * 0.01;
  (&DAT_00493eb9)[iVar3] = 1;
  (&particle_style_id)[iVar3] = 0;
  return uVar4;
}



/* fx_spawn_particle_slow @ 00420240 */

/* spawns a slow particle entry in DAT_00493eb8 */

int __cdecl fx_spawn_particle_slow(float *pos,float angle)

{
  char *pcVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  float10 fVar5;
  
  pcVar1 = &particle_pool;
  uVar4 = 0;
  do {
    if (*pcVar1 == '\0') goto LAB_00420270;
    pcVar1 = pcVar1 + 0x38;
    uVar4 = uVar4 + 1;
  } while ((int)pcVar1 < 0x495ab8);
  uVar4 = _rand();
  uVar4 = uVar4 & 0x8000007f;
  if ((int)uVar4 < 0) {
    uVar4 = (uVar4 - 1 | 0xffffff80) + 1;
  }
LAB_00420270:
  fVar5 = (float10)fcos((float10)angle);
  iVar3 = uVar4 * 0x38;
  (&particle_pool)[iVar3] = 1;
  (&particle_pos_x)[uVar4 * 0xe] = *pos;
  (&particle_pos_y)[uVar4 * 0xe] = pos[1];
  (&particle_vel_x)[uVar4 * 0xe] = (float)(fVar5 * (float10)30.0);
  fVar5 = (float10)fsin((float10)angle);
  (&particle_vel_y)[uVar4 * 0xe] = (float)(fVar5 * (float10)30.0);
  (&particle_intensity)[uVar4 * 0xe] = 0x3f800000;
  (&particle_scale_x)[uVar4 * 0xe] = 0x3f800000;
  (&particle_scale_y)[uVar4 * 0xe] = 0x3f800000;
  (&particle_scale_z)[uVar4 * 0xe] = 0x3f800000;
  (&particle_age)[uVar4 * 0xe] = 0;
  *(float *)(&particle_angle + iVar3) = angle;
  iVar2 = _rand();
  (&particle_spin)[uVar4 * 0xe] = (float)(iVar2 % 0x274) * 0.01;
  (&DAT_00493eb9)[iVar3] = 1;
  (&particle_style_id)[iVar3] = 8;
  (&particle_target_id)[uVar4 * 0xe] = 0xffffffff;
  return uVar4;
}



/* fx_spawn_secondary_projectile @ 00420360 */

/* spawns a typed entry in DAT_00495ad8 (secondary projectile pool) */

int __cdecl fx_spawn_secondary_projectile(float *pos,float angle,int type_id)

{
  char *pcVar1;
  int iVar2;
  int iVar3;
  float10 fVar4;
  float10 fVar5;
  
  iVar3 = 0;
  pcVar1 = &secondary_projectile_pool;
  do {
    if (*pcVar1 == '\0') goto LAB_0042037f;
    pcVar1 = pcVar1 + 0x2c;
    iVar3 = iVar3 + 1;
  } while ((int)pcVar1 < 0x4965d8);
  iVar3 = 0x3f;
LAB_0042037f:
  highscore_record_shots_fired = highscore_record_shots_fired + 1;
  fVar4 = (float10)fcos((float10)angle - (float10)1.5707964);
  (&secondary_projectile_pool)[iVar3 * 0x2c] = 1;
  (&secondary_proj_pos_x)[iVar3 * 0xb] = *pos;
  (&secondary_proj_pos_y)[iVar3 * 0xb] = pos[1];
  (&secondary_proj_speed)[iVar3 * 0xb] = 0x40000000;
  (&secondary_proj_angle)[iVar3 * 0xb] = angle;
  (&secondary_proj_lifetime)[iVar3 * 0xb] = 0;
  (&secondary_proj_type_id)[iVar3 * 0xb] = type_id;
  (&secondary_proj_vel_x)[iVar3 * 0xb] = (float)(fVar4 * (float10)90.0);
  fVar5 = (float10)fsin((float10)angle - (float10)1.5707964);
  (&secondary_proj_vel_y)[iVar3 * 0xb] = (float)(fVar5 * (float10)90.0);
  if (type_id == 2) {
    iVar2 = FUN_00420040((float *)(&player_aim_x + render_overlay_player_index * 0xd8),-1,0.0);
    *(int *)(&secondary_proj_target_id + iVar3 * 0x2c) = iVar2;
    (&secondary_proj_vel_x)[iVar3 * 0xb] = (float)fVar4 * 190.0;
    (&secondary_proj_vel_y)[iVar3 * 0xb] = (float)fVar5 * 190.0;
  }
  return iVar3;
}



/* projectile_spawn @ 00420440 */

/* allocates a projectile slot, initializes fields, and returns the index (overrides to type 0x2d
   when Fire Bullets is active) */

int __cdecl projectile_spawn(float *pos,float angle,int type_id,int owner_id)

{
  char *pcVar1;
  int iVar2;
  int iVar3;
  float10 fVar4;
  
  if (bonus_spawn_guard == '\0') {
    while (((((owner_id == -100 || (owner_id == -1)) || (owner_id == -2)) || (owner_id == -3)) &&
           ((highscore_record_shots_fired = highscore_record_shots_fired + 1, type_id != 0x2d &&
            ((0.0 < player_fire_bullets_timer || (0.0 < player2_fire_bullets_timer))))))) {
      type_id = 0x2d;
    }
  }
  iVar2 = 0;
  pcVar1 = &projectile_pool;
  do {
    if (*pcVar1 == '\0') goto LAB_004204d7;
    pcVar1 = pcVar1 + 0x40;
    iVar2 = iVar2 + 1;
  } while ((int)pcVar1 < 0x493eb8);
  iVar2 = 0x5f;
LAB_004204d7:
  fVar4 = (float10)fcos((float10)angle);
  iVar3 = iVar2 * 0x40;
  (&projectile_owner_id)[iVar2 * 0x10] = owner_id;
  (&projectile_pool)[iVar3] = 1;
  (&projectile_base_damage)[iVar2 * 0x10] = (&weapon_projectile_meta)[type_id * 0x1f];
  (&projectile_pos_x)[iVar2 * 0x10] = *pos;
  (&projectile_pos_y)[iVar2 * 0x10] = pos[1];
  (&projectile_origin_x)[iVar2 * 0x10] = *pos;
  (&projectile_origin_y)[iVar2 * 0x10] = pos[1];
  (&projectile_angle)[iVar2 * 0x10] = angle;
  (&projectile_type_id)[iVar2 * 0x10] = type_id;
  (&projectile_life_timer)[iVar2 * 0x10] = 0x3ecccccd;
  *(undefined4 *)(&projectile_reserved + iVar3) = 0;
  (&projectile_speed_scale)[iVar2 * 0x10] = 0x3f800000;
  (&projectile_vel_x)[iVar2 * 0x10] = (float)(fVar4 * (float10)1.5);
  fVar4 = (float10)fsin((float10)angle);
  (&projectile_vel_y)[iVar2 * 0x10] = (float)(fVar4 * (float10)1.5);
  if (type_id == 0x16) {
    (&projectile_hit_radius)[iVar2 * 0x10] = 0x40400000;
    *(undefined4 *)(&projectile_damage_pool + iVar3) = 0x3f800000;
    return iVar2;
  }
  if (type_id == 0x15) {
    (&projectile_hit_radius)[iVar2 * 0x10] = 0x40a00000;
    *(undefined4 *)(&projectile_damage_pool + iVar3) = 0x3f800000;
    return iVar2;
  }
  if ((type_id == 0x17) || (type_id == 0x1c)) {
    (&projectile_hit_radius)[iVar2 * 0x10] = 0x41200000;
  }
  else {
    (&projectile_hit_radius)[iVar2 * 0x10] = 0x3f800000;
    if (type_id == 6) {
      *(undefined4 *)(&projectile_damage_pool + iVar3) = 0x43960000;
      return iVar2;
    }
    if (type_id == 0x2d) {
      *(undefined4 *)(&projectile_damage_pool + iVar3) = 0x43700000;
      return iVar2;
    }
    if (type_id == 0x19) {
      *(undefined4 *)(&projectile_damage_pool + iVar3) = 0x42480000;
      return iVar2;
    }
  }
  *(undefined4 *)(&projectile_damage_pool + iVar3) = 0x3f800000;
  return iVar2;
}



/* projectile_reset_pools @ 004205d0 */

/* clears projectile and effect pools (DAT_004926b8, DAT_00493eb8) */

void projectile_reset_pools(void)

{
  undefined1 *puVar1;
  
  puVar1 = &projectile_pool;
  do {
    *puVar1 = 0;
    puVar1 = puVar1 + 0x40;
  } while ((int)puVar1 < 0x493eb8);
  puVar1 = &particle_pool;
  do {
    *puVar1 = 0;
    puVar1 = puVar1 + 0x38;
  } while ((int)puVar1 < 0x495ab8);
  return;
}



/* creatures_apply_radius_damage @ 00420600 */

/* applies damage to creatures within radius using FUN_004207c0 */

void __cdecl creatures_apply_radius_damage(float *pos,float radius,float damage,int damage_type)

{
  char *pcVar1;
  int creature_id;
  float local_8 [2];
  
  local_8[0] = 0.0;
  local_8[1] = 0.0;
  creature_id = 0;
  pcVar1 = &creature_pool;
  do {
    if (((*pcVar1 != '\0') &&
        (SQRT((*(float *)(pcVar1 + 0x18) - pos[1]) * (*(float *)(pcVar1 + 0x18) - pos[1]) +
              (*(float *)(pcVar1 + 0x14) - *pos) * (*(float *)(pcVar1 + 0x14) - *pos)) - radius <
         *(float *)(pcVar1 + 0x34) * 0.14285715 + 3.0)) && (5.0 < *(float *)(pcVar1 + 0x10))) {
      creature_apply_damage(creature_id,damage,damage_type,local_8);
    }
    pcVar1 = pcVar1 + 0x98;
    creature_id = creature_id + 1;
  } while ((int)pcVar1 < 0x4aa338);
  return;
}



/* creature_find_in_radius @ 004206a0 */

/* returns the first creature index in range, or -1 */

int __cdecl creature_find_in_radius(float *pos,float radius,int start_index)

{
  char *pcVar1;
  
  if (start_index < 0x180) {
    pcVar1 = &creature_pool + start_index * 0x98;
    do {
      if (*pcVar1 != '\0') {
        if (SQRT((*(float *)(pcVar1 + 0x18) - pos[1]) * (*(float *)(pcVar1 + 0x18) - pos[1]) +
                 (*(float *)(pcVar1 + 0x14) - *pos) * (*(float *)(pcVar1 + 0x14) - *pos)) - radius <
            *(float *)(pcVar1 + 0x34) * 0.14285715 + 3.0) {
          if (5.0 < *(float *)(pcVar1 + 0x10)) {
            return start_index;
          }
        }
      }
      pcVar1 = pcVar1 + 0x98;
      start_index = start_index + 1;
    } while ((int)pcVar1 < 0x4aa338);
  }
  return -1;
}



/* player_find_in_radius @ 00420730 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* returns a player index in range, skipping owner_id (-1/-2/-3 -> player 0/1/2) */

int __cdecl player_find_in_radius(int owner_id,float *pos,float radius)

{
  int iVar1;
  float *pfVar2;
  
  iVar1 = 0;
  if (0 < _config_player_count) {
    pfVar2 = (float *)&player_health;
    do {
      if (iVar1 != -1 - owner_id) {
        if (0.0 < *pfVar2) {
          if (SQRT((pfVar2[-3] - pos[1]) * (pfVar2[-3] - pos[1]) +
                   (pfVar2[-4] - *pos) * (pfVar2[-4] - *pos)) - radius <
              pfVar2[4] * 0.14285715 + 3.0) {
            return iVar1;
          }
        }
      }
      iVar1 = iVar1 + 1;
      pfVar2 = pfVar2 + 0xd8;
    } while (iVar1 < _config_player_count);
  }
  return -1;
}



/* creature_apply_damage @ 004207c0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* applies damage + impulse, handles death side effects; returns 1 when killed */

int __cdecl creature_apply_damage(int creature_id,float damage,int damage_type,float *impulse)

{
  float fVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  float *pfVar5;
  
  (&creature_hit_flash_timer)[creature_id * 0x26] = 0x3e4ccccd;
  if (damage_type == 1) {
    iVar2 = perk_count_get(perk_id_uranium_filled_bullets);
    if (iVar2 != 0) {
      damage = damage + damage;
    }
    iVar2 = perk_count_get(perk_id_living_fortress);
    if ((iVar2 != 0) && (0 < _config_player_count)) {
      pfVar5 = (float *)&player_living_fortress_timer;
      iVar2 = _config_player_count;
      do {
        if (0.0 < pfVar5[-0x20]) {
          damage = (*pfVar5 * 0.05 + 1.0) * damage;
        }
        pfVar5 = pfVar5 + 0xd8;
        iVar2 = iVar2 + -1;
      } while (iVar2 != 0);
    }
    iVar2 = perk_count_get(perk_id_barrel_greaser);
    if (iVar2 != 0) {
      damage = damage * 1.4;
    }
    iVar2 = perk_count_get(perk_id_doctor);
    if (iVar2 != 0) {
      damage = damage * 1.2;
    }
    if (((&creature_flags)[creature_id * 0x98] & 4) == 0) {
      uVar3 = _rand();
      fVar1 = ((float)(int)((uVar3 & 0x7f) - 0x40) * 0.002) /
              ((float)(&creature_size)[creature_id * 0x26] * 0.025);
      if (1.5707964 < fVar1) {
        fVar1 = 1.5707964;
      }
      (&creature_heading)[creature_id * 0x26] =
           fVar1 + (float)(&creature_heading)[creature_id * 0x26];
    }
  }
  else if ((damage_type == 7) && (iVar2 = perk_count_get(perk_id_ion_gun_master), iVar2 != 0)) {
    damage = damage * 1.2;
  }
  if ((float)(&creature_health)[creature_id * 0x26] <= 0.0) {
    (&creature_hitbox_size)[creature_id * 0x26] =
         (float)(&creature_hitbox_size)[creature_id * 0x26] - frame_dt * 15.0;
  }
  else {
    if ((damage_type == 4) && (iVar2 = perk_count_get(perk_id_pyromaniac), iVar2 != 0)) {
      damage = damage * 1.5;
      _rand();
    }
    (&creature_health)[creature_id * 0x26] = (float)(&creature_health)[creature_id * 0x26] - damage;
    (&creature_vel_x)[creature_id * 0x26] = (float)(&creature_vel_x)[creature_id * 0x26] - *impulse;
    (&creature_vel_y)[creature_id * 0x26] =
         (float)(&creature_vel_y)[creature_id * 0x26] - impulse[1];
    if ((float)(&creature_health)[creature_id * 0x26] <= 0.0) {
      (&creature_hitbox_size)[creature_id * 0x26] =
           (float)(&creature_hitbox_size)[creature_id * 0x26] - frame_dt;
      creature_handle_death(creature_id,true);
      fVar1 = impulse[1];
      (&creature_vel_x)[creature_id * 0x26] =
           (float)(&creature_vel_x)[creature_id * 0x26] - (*impulse + *impulse);
      (&creature_vel_y)[creature_id * 0x26] =
           (float)(&creature_vel_y)[creature_id * 0x26] - (fVar1 + fVar1);
      if (((&creature_flags)[creature_id * 0x98] & 0x10) == 0) {
        uVar3 = _rand();
        uVar3 = uVar3 & 0x80000003;
        if ((int)uVar3 < 0) {
          uVar3 = (uVar3 - 1 | 0xfffffffc) + 1;
        }
        sfx_play_panned(*(float *)(&creature_type_sfx_a0 +
                                  (uVar3 + (&creature_type_id)[creature_id * 0x26] * 0x11) * 4));
      }
      else {
        _effect_template_color_r = 0x3f4ccccd;
        _effect_template_flags = 0x1d;
        _effect_template_color_g = 0x3f4ccccd;
        _effect_template_color_b = 0x3e99999a;
        _effect_template_color_a = 0x3f000000;
        _effect_template_lifetime = 0x3f333333;
        _effect_template_half_width = 0x42100000;
        _effect_template_half_height = 0x42100000;
        iVar2 = 5;
        do {
          uVar3 = _rand();
          _effect_template_rotation = (float)(uVar3 & 0x7f) * 0.049087387;
          uVar3 = _rand();
          effect_template_vel_x = (float)(int)((uVar3 & 0x7f) - 0x40);
          uVar3 = _rand();
          effect_template_vel_y = (float)(int)((uVar3 & 0x7f) - 0x40);
          iVar4 = _rand();
          _effect_template_scale_step = (float)(iVar4 % 0x8c) * 0.01 + 0.3;
          effect_spawn(0,(float *)(&creature_pos_x + creature_id * 0x26));
          iVar2 = iVar2 + -1;
        } while (iVar2 != 0);
      }
    }
  }
  if (0.0 < (float)(&creature_health)[creature_id * 0x26]) {
    return 0;
  }
  return 1;
}



/* projectile_update @ 00420b90 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* updates projectile movement, collisions, and hit effects */

void projectile_update(void)

{
  float fVar1;
  float fVar2;
  char cVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  uint uVar8;
  float fVar9;
  int iVar10;
  float *pfVar11;
  float *pfVar12;
  float10 fVar13;
  float10 fVar14;
  float10 fVar15;
  float10 fVar16;
  float10 fVar17;
  float10 fVar18;
  longlong lVar19;
  float fVar20;
  int local_ec;
  int local_e8;
  int local_e4;
  float local_dc;
  int local_d8;
  float local_cc;
  float local_c8;
  float local_c4;
  float local_c0;
  float local_bc;
  float local_b8;
  float local_b4;
  float local_b0;
  float local_ac;
  float local_a8;
  float local_a4;
  float local_a0;
  float local_9c;
  float local_98;
  float local_94;
  float local_90;
  float local_8c;
  float local_88;
  float local_84;
  float local_80;
  float local_7c;
  float local_78;
  float local_74;
  float local_70;
  float local_6c;
  float local_68;
  undefined4 local_64;
  undefined4 local_60;
  undefined4 local_5c;
  float local_58;
  float fStack_50;
  float local_4c;
  float local_48;
  float local_44;
  float fStack_40;
  float local_3c;
  float fStack_38;
  float local_34;
  float fStack_30;
  float local_2c;
  float local_28;
  float local_20;
  float local_1c;
  float fStack_18;
  float local_14;
  float local_10 [4];
  
  DAT_004aaf54 = DAT_004aaf54 + 1;
  local_c0 = 1.0;
  iVar4 = perk_count_get(perk_id_ion_gun_master);
  if (iVar4 != 0) {
    local_c0 = 1.2;
  }
  local_e8 = 0;
  do {
    iVar4 = local_e8 * 0x40;
    if ((&projectile_pool)[iVar4] != '\0') {
      if ((float)(&projectile_life_timer)[local_e8 * 0x10] <= 0.0) {
        (&projectile_pool)[iVar4] = 0;
      }
      if (0.4 <= (float)(&projectile_life_timer)[local_e8 * 0x10]) {
        pfVar11 = (float *)(&projectile_pos_x + local_e8 * 0x10);
        if (((((float)(&projectile_pos_x)[local_e8 * 0x10] < -64.0) ||
             ((float)(&projectile_pos_y)[local_e8 * 0x10] < -64.0)) ||
            ((float)(terrain_texture_width + 0x40) < *pfVar11)) ||
           ((float)(terrain_texture_height + 0x40) < (float)(&projectile_pos_y)[local_e8 * 0x10])) {
LAB_004219ef:
          fVar9 = (float)(&projectile_life_timer)[local_e8 * 0x10] - frame_dt;
LAB_004219f8:
          (&projectile_life_timer)[local_e8 * 0x10] = fVar9;
        }
        else {
          lVar19 = __ftol();
          local_dc = (float)lVar19;
          fVar13 = (float10)fcos((float10)(float)(&projectile_angle)[local_e8 * 0x10] -
                                 (float10)1.5707964);
          fVar17 = (float10)frame_dt;
          fVar14 = (float10)fsin((float10)(float)(&projectile_angle)[local_e8 * 0x10] -
                                 (float10)1.5707964);
          fVar16 = (float10)frame_dt;
          iVar10 = perk_count_get(perk_id_barrel_greaser);
          if ((iVar10 != 0) && ((int)(&projectile_owner_id)[local_e8 * 0x10] < 0)) {
            lVar19 = __ftol();
            local_dc = (float)lVar19;
          }
          local_c8 = 0.0;
          local_cc = 0.0;
          local_c4 = 0.0;
          if (0 < (int)local_dc) {
            do {
              fVar9 = local_c4;
              local_cc = (float)(fVar13 * fVar17 * (float10)20.0) *
                         (float)(&projectile_speed_scale)[local_e8 * 0x10] * 3.0 + local_cc;
              local_c8 = (float)(fVar14 * fVar16 * (float10)20.0) *
                         (float)(&projectile_speed_scale)[local_e8 * 0x10] * 3.0 + local_c8;
              if ((4.0 <= SQRT(local_c8 * local_c8 + local_cc * local_cc)) ||
                 ((int)local_dc <= (int)local_c4 + 3)) {
                FUN_0041e270(pfVar11,&local_cc);
                iVar10 = creature_find_in_radius
                                   (pfVar11,(float)(&projectile_hit_radius)[local_e8 * 0x10],0);
                if ((iVar10 == -1) || (iVar10 == (&projectile_owner_id)[local_e8 * 0x10])) {
                  if (local_e8 != shock_chain_projectile_id) {
                    if ((&projectile_owner_id)[local_e8 * 0x10] != -100) {
                      iVar10 = player_find_in_radius
                                         ((&projectile_owner_id)[local_e8 * 0x10],pfVar11,
                                          (float)(&projectile_hit_radius)[local_e8 * 0x10]);
                    }
                    if (iVar10 != -1) {
                      (&projectile_life_timer)[local_e8 * 0x10] = 0x3e800000;
                      if ((float)(&player_shield_timer)[iVar10 * 0xd8] <= 0.0) {
                        (&player_health)[iVar10 * 0xd8] =
                             (float)(&player_health)[iVar10 * 0xd8] - 10.0;
                      }
                    }
                  }
                }
                else {
                  iVar7 = perk_count_get(perk_id_poison_bullets);
                  if ((iVar7 != 0) && (iVar7 = _rand(), ((byte)iVar7 & 7) == 1)) {
                    *(uint *)(&creature_flags + iVar10 * 0x98) =
                         *(uint *)(&creature_flags + iVar10 * 0x98) | 1;
                  }
                  if ((&projectile_type_id)[local_e8 * 0x10] == 0x19) {
                    iVar7 = 8;
                    do {
                      fVar9 = 0.0;
                      uVar8 = _rand();
                      FUN_0042eb10(pfVar11,(float)(uVar8 & 0xff) * 0.024543693,fVar9);
                      iVar7 = iVar7 + -1;
                    } while (iVar7 != 0);
                  }
                  else if ((&projectile_type_id)[local_e8 * 0x10] == 0x1d) {
                    FUN_0042f3f0(pfVar11,0x41d00000,3);
                    projectile_spawn(pfVar11,(float)(&projectile_angle)[local_e8 * 0x10] - 1.0471976
                                     ,0x1d,iVar10);
                    projectile_spawn(pfVar11,(float)(&projectile_angle)[local_e8 * 0x10] + 1.0471976
                                     ,0x1d,iVar10);
                  }
                  local_64 = 0x3f800000;
                  local_68 = 1.0;
                  _effect_template_color_g = 0x3f800000;
                  local_60 = 0x3f800000;
                  local_5c = 0x3f800000;
                  _effect_template_color_r = 0x3f800000;
                  _effect_template_flags = 0x59;
                  _effect_template_color_b = 0x3f800000;
                  _effect_template_color_a = 0x3f800000;
                  _effect_template_lifetime = 0x3eb33333;
                  _effect_template_age = 0;
                  _effect_template_half_width = 0x40800000;
                  _effect_template_half_height = 0x40800000;
                  if (config_fx_toggle == '\0') {
                    iVar7 = perk_count_get(perk_id_bloody_mess_quick_learner);
                    if (iVar7 == 0) {
                      if (_bonus_freeze_timer <= 0.0) {
                        iVar7 = 2;
                        do {
                          FUN_0042eb10(pfVar11,(float)(&projectile_angle)[local_e8 * 0x10] -
                                               1.5707964,0.0);
                          iVar5 = _rand();
                          if (((byte)iVar5 & 7) == 2) {
                            FUN_0042eb10(pfVar11,((float)(&projectile_angle)[local_e8 * 0x10] -
                                                 1.5707964) + 3.1415927,0.0);
                          }
                          iVar7 = iVar7 + -1;
                        } while (iVar7 != 0);
                      }
                    }
                    else {
                      iVar7 = 8;
                      do {
                        fVar9 = 0.0;
                        uVar8 = _rand();
                        FUN_0042eb10(pfVar11,((float)(&projectile_angle)[local_e8 * 0x10] -
                                             1.5707964) +
                                             (float)(int)((uVar8 & 0x1f) - 0x10) * 0.0625,fVar9);
                        iVar7 = iVar7 + -1;
                      } while (iVar7 != 0);
                      FUN_0042eb10(pfVar11,((float)(&projectile_angle)[local_e8 * 0x10] - 1.5707964)
                                           + 3.1415927,0.0);
                    }
                  }
                  if ((&creature_hitbox_size)[iVar10 * 0x26] == 0x41800000) {
                    highscore_record_shots_hit = highscore_record_shots_hit + 1;
                  }
                  iVar7 = perk_count_get(perk_id_bloody_mess_quick_learner);
                  if (iVar7 != 0) {
                    local_d8 = 0x1e;
                    iVar7 = -0x1e;
                    do {
                      iVar5 = local_d8 - iVar7;
                      iVar6 = _rand();
                      local_58 = (float)(iVar6 % iVar5 + iVar7);
                      iVar6 = _rand();
                      local_20 = local_58 + (float)(&creature_pos_x)[iVar10 * 0x26];
                      local_1c = (float)(iVar6 % iVar5 + iVar7) +
                                 (float)(&creature_pos_y)[iVar10 * 0x26];
                      fx_queue_add_random(&local_20);
                      iVar6 = _rand();
                      local_28 = (float)(iVar6 % iVar5 + iVar7);
                      iVar6 = _rand();
                      local_48 = local_28 + (float)(&creature_pos_x)[iVar10 * 0x26];
                      local_44 = (float)(iVar6 % iVar5 + iVar7) +
                                 (float)(&creature_pos_y)[iVar10 * 0x26];
                      fx_queue_add_random(&local_48);
                      iVar7 = iVar7 + -10;
                      local_d8 = local_d8 + 10;
                    } while (-0x3c < iVar7);
                  }
                  iVar7 = (&projectile_type_id)[local_e8 * 0x10];
                  if (((iVar7 != 0x2d) && (iVar7 != 6)) && (iVar7 != 0x19)) {
                    (&projectile_life_timer)[local_e8 * 0x10] = 0x3e800000;
                    uVar8 = _rand();
                    fVar15 = (float10)fcos((float10)(float)(&projectile_angle)[local_e8 * 0x10] -
                                           (float10)1.5707964);
                    *pfVar11 = (float)(fVar15 * (float10)(uVar8 & 3) + (float10)*pfVar11);
                    fVar15 = (float10)fsin((float10)(float)(&projectile_angle)[local_e8 * 0x10] -
                                           (float10)1.5707964);
                    (&projectile_pos_y)[local_e8 * 0x10] =
                         (float)(fVar15 * (float10)(uVar8 & 3) +
                                (float10)(float)(&projectile_pos_y)[local_e8 * 0x10]);
                  }
                  fVar9 = SQRT(((float)(&projectile_origin_x)[local_e8 * 0x10] - *pfVar11) *
                               ((float)(&projectile_origin_x)[local_e8 * 0x10] - *pfVar11) +
                               ((float)(&projectile_origin_y)[local_e8 * 0x10] -
                               (float)(&projectile_pos_y)[local_e8 * 0x10]) *
                               ((float)(&projectile_origin_y)[local_e8 * 0x10] -
                               (float)(&projectile_pos_y)[local_e8 * 0x10]));
                  if (fVar9 < 50.0) {
                    fVar9 = 50.0;
                  }
                  iVar7 = (&projectile_type_id)[local_e8 * 0x10];
                  fVar20 = (float)(&weapon_projectile_damage_scale)[iVar7 * 0x1f];
                  if (iVar7 == 0x16) {
                    FUN_0042f270(pfVar11,1.5,0.1);
                    FUN_0042f540(pfVar11,0.8);
                  }
                  else if (iVar7 == 0x15) {
                    if ((0 < shock_chain_links_left) && (local_e8 == shock_chain_projectile_id)) {
                      shock_chain_links_left = shock_chain_links_left + -1;
                      iVar7 = FUN_00420040(pfVar11,iVar10,100.0);
                      bonus_spawn_guard = 1;
                      fVar15 = (float10)fpatan((float10)(float)(&creature_pos_y)[iVar7 * 0x26] -
                                               (float10)(float)(&creature_pos_y)[iVar10 * 0x26],
                                               (float10)(float)(&creature_pos_x)[iVar7 * 0x26] -
                                               (float10)(float)(&creature_pos_x)[iVar10 * 0x26]);
                      shock_chain_projectile_id =
                           projectile_spawn(pfVar11,(float)((fVar15 - (float10)1.5707964) -
                                                           (float10)3.1415927),0x15,iVar10);
                      bonus_spawn_guard = 0;
                    }
                    FUN_0042f270(pfVar11,1.2,0.4);
                    FUN_0042f540(pfVar11,1.2);
                  }
                  else if (iVar7 == 0x17) {
                    FUN_0042f270(pfVar11,1.0,1.0);
                    FUN_0042f540(pfVar11,2.2);
                    sfx_play_panned(sfx_shockwave);
                  }
                  else if (iVar7 == 0x1c) {
                    bonus_spawn_guard = 1;
                    local_e4 = 0;
                    fVar2 = (float)(&creature_size)[iVar10 * 0x26] * 0.5 + 1.0;
                    do {
                      fVar1 = (float)((float10)local_e4 * (float10)0.5235988);
                      fVar15 = (float10)fcos((float10)local_e4 * (float10)0.5235988);
                      fVar18 = (float10)fsin((float10)fVar1);
                      local_34 = (float)(fVar18 * (float10)fVar2);
                      local_88 = (float)(fVar15 * (float10)fVar2 + (float10)*pfVar11);
                      local_84 = local_34 + (float)(&projectile_pos_y)[local_e8 * 0x10];
                      projectile_spawn(&local_88,fVar1,9,-100);
                      local_e4 = local_e4 + 1;
                    } while (local_e4 < 0xc);
                    bonus_spawn_guard = 0;
                    sfx_play_panned(sfx_explosion_medium);
                    sfx_play_panned(sfx_shockwave);
                    FUN_0042f330(pfVar11,1.5,0x3f800000);
                    FUN_0042f330(pfVar11,1.0,0x3f800000);
                  }
                  else if (iVar7 == 0x18) {
                    FUN_0042f080(pfVar11);
                    fVar2 = (float)(&creature_size)[iVar10 * 0x26];
                    (&projectile_life_timer)[local_e8 * 0x10] = 0x3e800000;
                    (&creature_size)[iVar10 * 0x26] = fVar2 * 0.65;
                    if (fVar2 * 0.65 < 16.0) {
                      creature_handle_death(iVar10,true);
                    }
                  }
                  else if (iVar7 == 0x13) {
                    local_14 = local_c8 * 3.0;
                    (&creature_pos_x)[iVar10 * 0x26] =
                         local_cc * 3.0 + (float)(&creature_pos_x)[iVar10 * 0x26];
                    (&creature_pos_y)[iVar10 * 0x26] =
                         local_14 + (float)(&creature_pos_y)[iVar10 * 0x26];
                  }
                  else if (iVar7 == 0x29) {
                    (&creature_collision_flag)[iVar10 * 0x98] = 1;
                  }
                  fVar9 = ((100.0 / fVar9) * fVar20 * 30.0 + 10.0) * 0.95;
                  if ((0.0 < fVar9) && (0.0 < (float)(&creature_health)[iVar10 * 0x26])) {
                    fVar20 = *(float *)(&projectile_damage_pool + iVar4) - 1.0;
                    *(float *)(&projectile_damage_pool + iVar4) = fVar20;
                    fVar15 = (float10)fcos((float10)(float)(&projectile_angle)[local_e8 * 0x10] -
                                           (float10)1.5707964);
                    if (fVar20 <= 0.0) {
                      local_98 = (float)(fVar15 * (float10)(float)(&projectile_speed_scale)
                                                                  [local_e8 * 0x10]);
                      local_94 = (float)(fVar15 * (float10)(float)(&projectile_speed_scale)
                                                                  [local_e8 * 0x10]);
                      creature_apply_damage(iVar10,fVar9,1,&local_98);
                      if ((&projectile_life_timer)[local_e8 * 0x10] != 0x3e800000) {
                        (&projectile_life_timer)[local_e8 * 0x10] = 0x3e800000;
                      }
                    }
                    else {
                      local_78 = (float)(fVar15 * (float10)(float)(&projectile_speed_scale)
                                                                  [local_e8 * 0x10]);
                      local_74 = (float)(fVar15 * (float10)(float)(&projectile_speed_scale)
                                                                  [local_e8 * 0x10]);
                      creature_apply_damage(iVar10,fVar20,1,&local_78);
                      *(float *)(&projectile_damage_pool + iVar4) =
                           *(float *)(&projectile_damage_pool + iVar4) -
                           (float)(&creature_health)[iVar10 * 0x26];
                    }
                  }
                  if ((*(int *)(&projectile_damage_pool + iVar4) == 0x3f800000) &&
                     (iVar7 = (&projectile_life_timer)[local_e8 * 0x10],
                     *(undefined4 *)(&projectile_damage_pool + iVar4) = 0, iVar7 != 0x3e800000)) {
                    (&projectile_life_timer)[local_e8 * 0x10] = 0x3e800000;
                  }
                  (&creature_state_flag)[iVar10 * 0x98] = 1;
                  _rand();
                  if (((&projectile_type_id)[local_e8 * 0x10] == 6) ||
                     ((&projectile_type_id)[local_e8 * 0x10] == 0x2d)) {
                    perk_count_get(perk_id_bloody_mess_quick_learner);
                    local_ec = 6;
                    do {
                      iVar7 = _rand();
                      fVar15 = (float10)(iVar7 % 100) * (float10)0.1;
                      if ((float10)4.0 < fVar15) {
                        iVar7 = _rand();
                        fVar15 = (float10)(iVar7 % 0x5a + 10) * (float10)0.1;
                      }
                      if ((float10)7.0 < fVar15) {
                        iVar7 = _rand();
                        fVar15 = (float10)(iVar7 % 0x50 + 0x14) * (float10)0.1;
                      }
                      fVar18 = (float10)fcos((float10)(float)(&projectile_angle)[local_e8 * 0x10] -
                                             (float10)1.5707964);
                      local_a8 = 0.0;
                      local_a4 = 0.0;
                      fVar9 = (float)(fVar18 * fVar15 * (float10)20.0);
                      fVar18 = (float10)fsin((float10)(float)(&projectile_angle)[local_e8 * 0x10] -
                                             (float10)1.5707964);
                      fVar20 = (float)(fVar18 * fVar15 * (float10)20.0);
                      local_b0 = fVar9 + (float)(&creature_pos_x)[iVar10 * 0x26];
                      local_ac = fVar20 + (float)(&creature_pos_y)[iVar10 * 0x26];
                      vec2_add_inplace(iVar10,&local_b0,&local_a8);
                      _rand();
                      if (0.0 < _bonus_freeze_timer) {
                        local_a0 = fVar9 + *pfVar11;
                        local_9c = fVar20 + (float)(&projectile_pos_y)[local_e8 * 0x10];
                        iVar7 = _rand();
                        effect_spawn_freeze_shard
                                  (&local_a0,
                                   ((float)(&projectile_angle)[local_e8 * 0x10] - 1.5707964) +
                                   (float)(iVar7 % 100) * 0.01);
                      }
                      local_b8 = fVar9 + (float)(&creature_pos_x)[iVar10 * 0x26];
                      local_b4 = fVar20 + (float)(&creature_pos_y)[iVar10 * 0x26];
                      fx_queue_add_random(&local_b8);
                      local_ec = local_ec + -1;
                    } while (local_ec != 0);
                  }
                  else if (_bonus_freeze_timer <= 0.0) {
                    pfVar12 = (float *)(&creature_pos_x + iVar10 * 0x26);
                    iVar7 = 3;
                    do {
                      iVar5 = _rand();
                      fVar18 = ((float10)(float)(&projectile_angle)[local_e8 * 0x10] -
                               (float10)1.5707964) + (float10)(iVar5 % 0x14 + -10) * (float10)0.1;
                      fVar15 = (float10)fcos(fVar18);
                      fVar9 = (float)(fVar15 * (float10)20.0);
                      fVar15 = (float10)fsin(fVar18);
                      fVar20 = (float)(fVar15 * (float10)20.0);
                      fx_queue_add_random(pfVar12);
                      local_4c = fVar20 * 1.5;
                      local_70 = fVar9 * 1.5 + *pfVar12;
                      local_6c = local_4c + (float)(&creature_pos_y)[iVar10 * 0x26];
                      fx_queue_add_random(&local_70);
                      local_3c = fVar20 + fVar20;
                      local_80 = fVar9 + fVar9 + *pfVar12;
                      local_7c = local_3c + (float)(&creature_pos_y)[iVar10 * 0x26];
                      fx_queue_add_random(&local_80);
                      local_2c = fVar20 * 2.5;
                      local_90 = fVar9 * 2.5 + *pfVar12;
                      local_8c = local_2c + (float)(&creature_pos_y)[iVar10 * 0x26];
                      fx_queue_add_random(&local_90);
                      iVar7 = iVar7 + -1;
                    } while (iVar7 != 0);
                  }
                  else {
                    iVar10 = _rand();
                    effect_spawn_freeze_shard
                              (pfVar11,((float)(&projectile_angle)[local_e8 * 0x10] - 1.5707964) +
                                       (float)(iVar10 % 100) * 0.01);
                  }
                  if (((demo_mode_active == '\0') && (DAT_004cc8d4 == '\0')) &&
                     (_config_game_mode != 2)) {
                    sfx_play_exclusive(music_track_extra_0);
                  }
                  else {
                    fVar9 = sfx_shock_hit_01;
                    if ((&weapon_ammo_class)[(&projectile_type_id)[local_e8 * 0x10] * 0x1f] != 4) {
                      iVar10 = _rand();
                      fVar9 = (float)(iVar10 % 6 + sfx_bullet_hit_01);
                    }
                    sfx_play_panned(fVar9);
                  }
                  fVar9 = local_c4;
                  if (*(float *)(&projectile_damage_pool + iVar4) <= 0.0) break;
                }
                local_c8 = 0.0;
                local_cc = 0.0;
              }
              local_c4 = (float)((int)fVar9 + 3);
            } while ((int)local_c4 < (int)local_dc);
          }
        }
      }
      else {
        iVar4 = (&projectile_type_id)[local_e8 * 0x10];
        if ((iVar4 == 0x15) || (iVar4 == 0x16)) {
          if (local_e8 == shock_chain_projectile_id) {
            shock_chain_projectile_id = -1;
            shock_chain_links_left = 0;
          }
          (&projectile_life_timer)[local_e8 * 0x10] =
               (float)(&projectile_life_timer)[local_e8 * 0x10] - frame_dt;
          if (iVar4 == 0x15) {
            fVar20 = frame_dt * 100.0;
            fVar9 = local_c0 * 88.0;
          }
          else {
            fVar20 = frame_dt * 40.0;
            fVar9 = local_c0 * 60.0;
          }
        }
        else {
          if (iVar4 != 0x17) {
            if (iVar4 != 6) goto LAB_004219ef;
            fVar9 = (float)(&projectile_life_timer)[local_e8 * 0x10] - frame_dt * 0.1;
            goto LAB_004219f8;
          }
          (&projectile_life_timer)[local_e8 * 0x10] =
               (float)(&projectile_life_timer)[local_e8 * 0x10] - frame_dt * 0.7;
          fVar20 = frame_dt * 300.0;
          fVar9 = local_c0 * 128.0;
        }
        creatures_apply_radius_damage((float *)(&projectile_pos_x + local_e8 * 0x10),fVar9,fVar20,7)
        ;
      }
    }
    local_e8 = local_e8 + 1;
  } while (local_e8 < 0x60);
  pfVar11 = (float *)&secondary_proj_vel_y;
  do {
    if (*(char *)(pfVar11 + -6) != '\0') {
      if (pfVar11[1] == 4.2039e-45) {
        camera_shake_pulses = 4;
        fVar9 = frame_dt * 3.0 + pfVar11[-1];
        pfVar11[-1] = fVar9;
        if (1.0 < fVar9) {
          local_10[0] = 0.0;
          local_10[1] = 0.0;
          local_10[2] = 0.0;
          local_10[3] = 0.25;
          fx_queue_add(0x10,pfVar11 + -3,*pfVar11 * 256.0,*pfVar11 * 256.0,0.0,local_10);
          *(undefined1 *)(pfVar11 + -6) = 0;
        }
        fVar9 = *pfVar11;
        fVar20 = pfVar11[-1];
        iVar4 = 0;
        pfVar12 = (float *)&creature_pos_y;
        do {
          if ((*(char *)(pfVar12 + -6) != '\0') && (0.0 < pfVar12[3])) {
            fVar2 = pfVar12[-1] - pfVar11[-3];
            fVar1 = *pfVar12 - pfVar11[-2];
            if (SQRT(fVar2 * fVar2 + fVar1 * fVar1) < fVar9 * fVar20 * 80.0) {
              local_c0 = fVar2;
              local_bc = fVar1;
              thunk_FUN_00452f1d();
              local_c0 = local_c8 * 0.1;
              local_bc = local_c4 * 0.1;
              creature_apply_damage(iVar4,frame_dt * *pfVar11 * 700.0,3,&local_c0);
              if (pfVar12[3] <= 0.0) {
                fx_queue_add_random(pfVar12 + -1);
                fx_queue_add_random(pfVar12 + -1);
                creature_handle_death(iVar4,true);
              }
            }
          }
          pfVar12 = pfVar12 + 0x26;
          iVar4 = iVar4 + 1;
        } while ((int)pfVar12 < 0x4aa350);
      }
      else {
        local_a0 = frame_dt * pfVar11[-1];
        pfVar12 = pfVar11 + -3;
        local_9c = frame_dt * *pfVar11;
        FUN_0041e270(pfVar12,&local_a0);
        fVar9 = pfVar11[1];
        if (fVar9 == 1.4013e-45) {
          if (SQRT(pfVar11[-1] * pfVar11[-1] + *pfVar11 * *pfVar11) < 500.0) {
            fVar9 = 3.0;
LAB_00421c48:
            fVar9 = frame_dt * fVar9 + 1.0;
            pfVar11[-1] = fVar9 * pfVar11[-1];
            *pfVar11 = fVar9 * *pfVar11;
          }
LAB_00421c5a:
          fVar9 = pfVar11[-4] - frame_dt;
LAB_00421d65:
          pfVar11[-4] = fVar9;
        }
        else {
          if (fVar9 == 5.60519e-45) {
            if (SQRT(pfVar11[-1] * pfVar11[-1] + *pfVar11 * *pfVar11) < 600.0) {
              fVar9 = 4.0;
              goto LAB_00421c48;
            }
            goto LAB_00421c5a;
          }
          if (fVar9 == 2.8026e-45) {
            if ((&creature_pool)[(int)pfVar11[3] * 0x98] == '\0') {
              fVar9 = (float)FUN_00420040(pfVar12,-1,0.0);
              pfVar11[3] = fVar9;
            }
            fVar17 = (float10)fpatan((float10)pfVar11[-2] -
                                     (float10)(float)(&creature_pos_y)[(int)pfVar11[3] * 0x26],
                                     (float10)*pfVar12 -
                                     (float10)(float)(&creature_pos_x)[(int)pfVar11[3] * 0x26]);
            pfVar11[-5] = (float)(fVar17 - (float10)1.5707964);
            fVar17 = (float10)fcos((fVar17 - (float10)1.5707964) - (float10)1.5707964);
            pfVar11[-1] = (float)(fVar17 * (float10)frame_dt * (float10)800.0 + (float10)pfVar11[-1]
                                 );
            fVar17 = (float10)fsin((float10)pfVar11[-5] - (float10)1.5707964);
            *pfVar11 = (float)(fVar17 * (float10)frame_dt * (float10)800.0 + (float10)*pfVar11);
            if (350.0 < SQRT(pfVar11[-1] * pfVar11[-1] + *pfVar11 * *pfVar11)) {
              fVar17 = (float10)fcos((float10)pfVar11[-5] - (float10)1.5707964);
              pfVar11[-1] = (float)((float10)pfVar11[-1] -
                                   fVar17 * (float10)frame_dt * (float10)800.0);
              fVar17 = (float10)fsin((float10)pfVar11[-5] - (float10)1.5707964);
              *pfVar11 = (float)((float10)*pfVar11 - fVar17 * (float10)frame_dt * (float10)800.0);
            }
            fVar9 = pfVar11[-4] - frame_dt * 0.5;
            goto LAB_00421d65;
          }
        }
        local_c4 = *pfVar11;
        fVar9 = pfVar11[2] - (ABS(local_c4) + ABS(pfVar11[-1])) * frame_dt * 0.01;
        pfVar11[2] = fVar9;
        if (fVar9 < 0.0) {
          fVar17 = (float10)fcos((float10)pfVar11[-5] + (float10)1.5707964);
          fStack_30 = (float)fVar17;
          local_b0 = fStack_30 * 90.0;
          local_ac = (float)(fVar17 * (float10)90.0);
          fVar17 = (float10)fcos((float10)pfVar11[-5] - (float10)1.5707964);
          fStack_40 = (float)fVar17;
          fVar17 = (float10)fsin((float10)pfVar11[-5] - (float10)1.5707964);
          fStack_50 = fStack_40 * 9.0;
          local_a8 = *pfVar12 - fStack_50;
          local_a4 = (float)((float10)pfVar11[-2] - fVar17 * (float10)9.0);
          iVar4 = fx_spawn_sprite(&local_a8,&local_b0,14.0);
          pfVar11[2] = 0.06;
          (&sprite_effect_color_a)[iVar4 * 0xb] = 0x3e800000;
        }
        iVar4 = creature_find_in_radius(pfVar12,8.0,0);
        if (iVar4 != -1) {
          if ((&creature_hitbox_size)[iVar4 * 0x26] == 0x41800000) {
            highscore_record_shots_hit = highscore_record_shots_hit + 1;
          }
          if (_bonus_freeze_timer <= 0.0) {
            iVar10 = _rand();
            fStack_18 = (float)(iVar10 % 0x14 + -10);
            iVar10 = _rand();
            local_90 = fStack_18 + (float)(&creature_pos_x)[iVar4 * 0x26];
            local_8c = (float)(iVar10 % 0x14 + -10) + (float)(&creature_pos_y)[iVar4 * 0x26];
            fx_queue_add_random(&local_90);
            iVar10 = _rand();
            fStack_38 = (float)(iVar10 % 0x14 + -10);
            iVar10 = _rand();
            local_80 = fStack_38 + (float)(&creature_pos_x)[iVar4 * 0x26];
            local_7c = (float)(iVar10 % 0x14 + -10) + (float)(&creature_pos_y)[iVar4 * 0x26];
            fx_queue_add_random(&local_80);
            iVar10 = _rand();
            local_28 = (float)(iVar10 % 0x14 + -10);
            iVar10 = _rand();
            local_70 = local_28 + (float)(&creature_pos_x)[iVar4 * 0x26];
            local_6c = (float)(iVar10 % 0x14 + -10) + (float)(&creature_pos_y)[iVar4 * 0x26];
            fx_queue_add_random(&local_70);
          }
          else {
            local_ec = 4;
            do {
              iVar10 = _rand();
              effect_spawn_freeze_shard(pfVar12,(float)(iVar10 % 0x264) * 0.01);
              local_ec = local_ec + -1;
            } while (local_ec != 0);
          }
          fVar9 = pfVar11[1];
          local_dc = 150.0;
          if (fVar9 == 1.4013e-45) {
            local_dc = pfVar11[-4] * 50.0 + 500.0;
            if (2 < config_detail_preset) {
              FUN_0042f6c0(pfVar12,0.4);
            }
          }
          else if (fVar9 == 2.8026e-45) {
            local_dc = pfVar11[-4] * 20.0 + 80.0;
          }
          else if (fVar9 == 5.60519e-45) {
            local_dc = pfVar11[-4] * 20.0 + 40.0;
          }
          if (((demo_mode_active == '\0') && (DAT_004cc8d4 == '\0')) && (_config_game_mode != 2)) {
            sfx_play_exclusive(music_track_extra_0);
          }
          else {
            sfx_play_panned(sfx_explosion_medium);
          }
          local_94 = 1.0 / frame_dt;
          (&creature_state_flag)[iVar4 * 0x98] = 1;
          local_98 = local_94 * pfVar11[-1];
          local_94 = local_94 * *pfVar11;
          creature_apply_damage(iVar4,local_dc,3,&local_98);
          fVar20 = _bonus_freeze_timer;
          fVar9 = pfVar11[1];
          if (fVar9 == 1.4013e-45) {
            pfVar11[1] = 4.2039e-45;
            pfVar11[-1] = 0.0;
            *pfVar11 = 1.0;
            if (fVar20 <= 0.0) {
              iVar10 = 0x14;
              do {
                iVar7 = _rand();
                fVar9 = (float)(iVar7 % 0x274) * 0.01;
                iVar7 = _rand();
                fVar17 = (float10)fcos((float10)fVar9);
                local_58 = (float)(fVar17 * (float10)(iVar7 % 0x5a));
                fVar17 = (float10)fsin((float10)fVar9);
                local_78 = local_58 + (float)(&creature_pos_x)[iVar4 * 0x26];
                local_74 = (float)(fVar17 * (float10)(iVar7 % 0x5a) +
                                  (float10)(float)(&creature_pos_y)[iVar4 * 0x26]);
                fx_queue_add_random(&local_78);
                iVar10 = iVar10 + -1;
              } while (iVar10 != 0);
            }
            else {
              iVar4 = 8;
              do {
                iVar10 = _rand();
                effect_spawn_freeze_shard(pfVar12,(float)(iVar10 % 0x264) * 0.01);
                iVar4 = iVar4 + -1;
              } while (iVar4 != 0);
            }
          }
          else if (fVar9 == 2.8026e-45) {
            pfVar11[1] = 4.2039e-45;
            pfVar11[-1] = 0.0;
            *pfVar11 = 0.35;
            if (fVar20 <= 0.0) {
              iVar10 = 10;
              do {
                iVar7 = _rand();
                fVar9 = (float)(iVar7 % 0x274) * 0.01;
                uVar8 = _rand();
                uVar8 = uVar8 & 0x8000003f;
                if ((int)uVar8 < 0) {
                  uVar8 = (uVar8 - 1 | 0xffffffc0) + 1;
                }
                fVar17 = (float10)fcos((float10)fVar9);
                fVar16 = (float10)fsin((float10)fVar9);
                local_88 = (float)(fVar17 * (float10)(int)uVar8) +
                           (float)(&creature_pos_x)[iVar4 * 0x26];
                local_84 = (float)(fVar16 * (float10)(int)uVar8 +
                                  (float10)(float)(&creature_pos_y)[iVar4 * 0x26]);
                fx_queue_add_random(&local_88);
                iVar10 = iVar10 + -1;
              } while (iVar10 != 0);
            }
            else {
              iVar4 = 8;
              do {
                iVar10 = _rand();
                effect_spawn_freeze_shard(pfVar12,(float)(iVar10 % 0x264) * 0.01);
                iVar4 = iVar4 + -1;
              } while (iVar4 != 0);
            }
          }
          else if (fVar9 == 5.60519e-45) {
            pfVar11[1] = 4.2039e-45;
            pfVar11[-1] = 0.0;
            *pfVar11 = 0.25;
            if (fVar20 <= 0.0) {
              iVar10 = 3;
              do {
                iVar7 = _rand();
                fVar9 = (float)(iVar7 % 0x274) * 0.01;
                iVar7 = _rand();
                fVar17 = (float10)fcos((float10)fVar9);
                fVar16 = (float10)fsin((float10)fVar9);
                local_48 = (float)(fVar17 * (float10)(iVar7 % 0x2c)) +
                           (float)(&creature_pos_x)[iVar4 * 0x26];
                local_44 = (float)(fVar16 * (float10)(iVar7 % 0x2c) +
                                  (float10)(float)(&creature_pos_y)[iVar4 * 0x26]);
                fx_queue_add_random(&local_48);
                iVar10 = iVar10 + -1;
              } while (iVar10 != 0);
            }
            else {
              iVar10 = 8;
              do {
                iVar7 = _rand();
                effect_spawn_freeze_shard
                          ((float *)(&creature_pos_x + iVar4 * 0x26),(float)(iVar7 % 0x264) * 0.01);
                iVar10 = iVar10 + -1;
              } while (iVar10 != 0);
            }
          }
          local_ec = 0;
          do {
            iVar4 = _rand();
            fVar17 = (float10)(iVar4 % 800) * (float10)0.1;
            fVar16 = (float10)fcos((float10)local_ec * (float10)0.62831855);
            local_68 = (float)fVar16;
            fVar16 = (float10)fsin((float10)local_ec * (float10)0.62831855);
            local_20 = (float)(fVar17 * (float10)local_68);
            local_1c = (float)(fVar16 * fVar17);
            iVar4 = fx_spawn_sprite(pfVar12,&local_20,14.0);
            local_ec = local_ec + 1;
            (&sprite_effect_color_a)[iVar4 * 0xb] = 0x3ebd70a4;
          } while (local_ec < 10);
        }
        if (pfVar11[-4] <= 0.0) {
          pfVar11[1] = 4.2039e-45;
          pfVar11[-1] = 0.0;
          *pfVar11 = 0.5;
        }
      }
    }
    pfVar11 = pfVar11 + 0xb;
  } while ((int)pfVar11 < 0x4965f0);
  pfVar11 = (float *)&sprite_effect_pos_y;
  do {
    if (*(char *)(pfVar11 + -7) != '\0') {
      local_68 = frame_dt * pfVar11[1];
      fVar9 = frame_dt * pfVar11[2];
      pfVar11[-1] = local_68 + pfVar11[-1];
      *pfVar11 = fVar9 + *pfVar11;
      pfVar11[-2] = frame_dt * 3.0 + pfVar11[-2];
      fVar9 = pfVar11[-3] - frame_dt;
      pfVar11[-3] = fVar9;
      if (fVar9 <= 0.0) {
        *(undefined1 *)(pfVar11 + -7) = 0;
      }
      pfVar11[3] = frame_dt * 60.0 + pfVar11[3];
    }
    pfVar11 = pfVar11 + 0xb;
  } while ((int)pfVar11 < 0x49aa3c);
  local_e8 = 0;
  pfVar11 = (float *)&particle_vel_y;
  do {
    if (*(char *)(pfVar11 + -4) != '\0') {
      if (*(char *)(pfVar11 + 8) == '\b') {
        pfVar11[5] = pfVar11[5] - frame_dt * 0.11;
        pfVar11[7] = frame_dt * 5.0 + pfVar11[7];
        if (*(char *)((int)pfVar11 + -0xf) != '\0') {
          fVar9 = frame_dt * pfVar11[-1];
          if (pfVar11[5] <= 0.15) {
            fStack_40 = fVar9 * 0.55;
            fVar20 = fStack_40 * pfVar11[5];
            fVar2 = frame_dt * *pfVar11 * 0.55 * pfVar11[5];
            fStack_50 = fVar20;
            fStack_30 = fVar9;
            goto LAB_004226a3;
          }
          local_b8 = fVar9 * pfVar11[5];
          local_b4 = frame_dt * *pfVar11 * pfVar11[5];
          local_68 = fVar9;
          FUN_0041e270(pfVar11 + -3,&local_b8);
        }
      }
      else {
        pfVar11[5] = pfVar11[5] - frame_dt * 0.9;
        pfVar11[7] = frame_dt + pfVar11[7];
        fVar9 = frame_dt * pfVar11[-1];
        if (pfVar11[5] <= 0.15) {
          local_58 = fVar9 * 2.5;
          fVar20 = local_58 * 0.15;
          fVar2 = frame_dt * *pfVar11 * 2.5 * 0.15;
          local_90 = fVar20;
          local_28 = fVar9;
LAB_004226a3:
          pfVar11[-3] = fVar20 + pfVar11[-3];
          pfVar11[-2] = fVar2 + pfVar11[-2];
        }
        else {
          fStack_38 = fVar9 * 2.5;
          local_a0 = fStack_38 * pfVar11[5];
          local_9c = frame_dt * *pfVar11 * 2.5 * pfVar11[5];
          fStack_18 = fVar9;
          FUN_0041e270(pfVar11 + -3,&local_a0);
        }
      }
      cVar3 = *(char *)(pfVar11 + 8);
      if (cVar3 == '\0') {
        if (0.0 < pfVar11[5]) {
LAB_00422767:
          if (*(char *)((int)pfVar11 + -0xf) == '\x01') {
            if (cVar3 == '\0') {
              iVar4 = _rand();
              fVar17 = (float10)(iVar4 % 100 + -0x32) * (float10)0.06 * (float10)pfVar11[5] *
                       (float10)frame_dt * (float10)1.96;
LAB_00422821:
              fVar9 = pfVar11[6];
              pfVar11[6] = (float)((float10)fVar9 - fVar17);
              fVar17 = (float10)fcos((float10)fVar9 - fVar17);
              pfVar11[-1] = (float)(fVar17 * (float10)82.0);
              fVar17 = (float10)fsin((float10)pfVar11[6]);
              fVar17 = fVar17 * (float10)82.0;
            }
            else {
              if (cVar3 != '\b') {
                iVar4 = _rand();
                fVar17 = (float10)(iVar4 % 100 + -0x32) * (float10)0.06 * (float10)pfVar11[5] *
                         (float10)frame_dt * (float10)1.1;
                goto LAB_00422821;
              }
              iVar4 = _rand();
              fVar17 = (float10)pfVar11[6] -
                       (float10)(iVar4 % 100 + -0x32) * (float10)0.06 * (float10)pfVar11[5] *
                       (float10)frame_dt * (float10)1.1;
              pfVar11[6] = (float)fVar17;
              fVar17 = (float10)fcos(fVar17);
              pfVar11[-1] = (float)(fVar17 * (float10)62.0);
              fVar17 = (float10)fsin((float10)pfVar11[6]);
              fVar17 = fVar17 * (float10)62.0;
            }
            *pfVar11 = (float)fVar17;
          }
          if (pfVar11[5] <= 1.0) {
            fVar9 = pfVar11[5];
          }
          else {
            fVar9 = 1.0;
          }
          pfVar11[4] = fVar9;
          fVar9 = 1.0 - pfVar11[5] * 0.95;
          pfVar11[1] = fVar9;
          pfVar11[2] = fVar9;
          if (*(char *)((int)pfVar11 + -0xf) != '\0') {
            pfVar12 = pfVar11 + -3;
            fVar9 = (float)creature_find_in_radius(pfVar12,pfVar11[5] * 8.0,0);
            if (fVar9 != -NAN) {
              *(undefined1 *)((int)pfVar11 + -0xf) = 0;
              if (*(char *)(pfVar11 + 8) == '\b') {
                fVar20 = (float)(&creature_pos_y)[(int)fVar9 * 0x26];
                *pfVar12 = (float)(&creature_pos_x)[(int)fVar9 * 0x26];
                pfVar11[-2] = fVar20;
                pfVar11[-1] = 0.0;
                *pfVar11 = 0.0;
                (&creature_state_flag)[(int)fVar9 * 0x98] = 0;
                pfVar11[9] = fVar9;
              }
              else {
                fVar20 = pfVar11[6];
                while (6.2831855 < fVar20) {
                  fVar20 = pfVar11[6] - 6.2831855;
                  pfVar11[6] = fVar20;
                }
                fVar20 = pfVar11[6];
                while (fVar20 < 0.0) {
                  fVar20 = pfVar11[6] + 6.2831855;
                  pfVar11[6] = fVar20;
                }
                local_80 = (float)((float10)frame_dt * (float10)pfVar11[-1]);
                local_70 = *pfVar12 - local_80;
                pfVar12 = (float *)(&creature_pos_x + (int)fVar9 * 0x26);
                local_98 = local_70 - *pfVar12;
                fVar17 = (float10)fpatan(((float10)pfVar11[-2] -
                                         (float10)frame_dt * (float10)*pfVar11) -
                                         (float10)(float)(&creature_pos_y)[(int)fVar9 * 0x26],
                                         (float10)local_98);
                if ((float10)6.2831855 < fVar17) {
                  do {
                    fVar17 = fVar17 - (float10)6.2831855;
                  } while ((float10)6.2831855 < fVar17);
                }
                if (fVar17 < (float10)0.0) {
                  do {
                    fVar17 = fVar17 + (float10)6.2831855;
                  } while (fVar17 < (float10)0.0);
                }
                if ((float10)pfVar11[6] <= fVar17) {
                  fVar20 = pfVar11[6] + 1.2566371;
                }
                else {
                  fVar20 = pfVar11[6] - 1.2566371;
                }
                pfVar11[6] = fVar20;
                fVar17 = (float10)fcos((float10)pfVar11[6]);
                pfVar11[-1] = (float)(fVar17 * (float10)82.0);
                fVar17 = (float10)fsin((float10)pfVar11[6]);
                *pfVar11 = (float)(fVar17 * (float10)82.0);
                iVar4 = _rand();
                (&creature_state_flag)[(int)fVar9 * 0x98] = 1;
                local_b0 = 0.0;
                local_ac = 0.0;
                fVar20 = (float)(iVar4 % 10) * 0.1;
                pfVar11[-1] = fVar20 * pfVar11[-1];
                *pfVar11 = fVar20 * *pfVar11;
                creature_apply_damage((int)fVar9,pfVar11[5] * 10.0,4,&local_b0);
                if (1.6 < (float)(&creature_tint_g)[(int)fVar9 * 0x26] +
                          (float)(&creature_tint_b)[(int)fVar9 * 0x26] +
                          (float)(&creature_tint_r)[(int)fVar9 * 0x26]) {
                  fVar20 = 1.0 - pfVar11[5] * 0.01;
                  (&creature_tint_r)[(int)fVar9 * 0x26] =
                       fVar20 * (float)(&creature_tint_r)[(int)fVar9 * 0x26];
                  (&creature_tint_g)[(int)fVar9 * 0x26] =
                       fVar20 * (float)(&creature_tint_g)[(int)fVar9 * 0x26];
                  (&creature_tint_b)[(int)fVar9 * 0x26] =
                       fVar20 * (float)(&creature_tint_b)[(int)fVar9 * 0x26];
                  if (0.0 <= (float)(&creature_tint_r)[(int)fVar9 * 0x26]) {
                    if (1.0 < (float)(&creature_tint_r)[(int)fVar9 * 0x26]) {
                      (&creature_tint_r)[(int)fVar9 * 0x26] = 0x3f800000;
                    }
                  }
                  else {
                    (&creature_tint_r)[(int)fVar9 * 0x26] = 0;
                  }
                  if (0.0 <= (float)(&creature_tint_g)[(int)fVar9 * 0x26]) {
                    if (1.0 < (float)(&creature_tint_g)[(int)fVar9 * 0x26]) {
                      (&creature_tint_g)[(int)fVar9 * 0x26] = 0x3f800000;
                    }
                  }
                  else {
                    (&creature_tint_g)[(int)fVar9 * 0x26] = 0;
                  }
                  if (0.0 <= (float)(&creature_tint_b)[(int)fVar9 * 0x26]) {
                    if (1.0 < (float)(&creature_tint_b)[(int)fVar9 * 0x26]) {
                      (&creature_tint_b)[(int)fVar9 * 0x26] = 0x3f800000;
                    }
                  }
                  else {
                    (&creature_tint_b)[(int)fVar9 * 0x26] = 0;
                  }
                  if (0.0 <= (float)(&creature_tint_a)[(int)fVar9 * 0x26]) {
                    if (1.0 < (float)(&creature_tint_a)[(int)fVar9 * 0x26]) {
                      (&creature_tint_a)[(int)fVar9 * 0x26] = 0x3f800000;
                    }
                  }
                  else {
                    (&creature_tint_a)[(int)fVar9 * 0x26] = 0;
                  }
                }
                if (local_e8 % 3 == 0) {
                  iVar4 = _rand();
                  iVar10 = _rand();
                  local_a4 = (float)(iVar10 % 0x3c + -0x1e);
                  local_a8 = (float)(iVar4 % 0x3c + -0x1e);
                  iVar4 = fx_spawn_sprite(pfVar12,&local_a8,13.0);
                  (&sprite_effect_color_a)[iVar4 * 0xb] = 0x3f333333;
                }
                fx_queue_add_random(pfVar12);
                local_74 = *pfVar11;
                local_84 = local_74 * frame_dt;
                *pfVar12 = pfVar11[-1] * frame_dt + *pfVar12;
                (&creature_pos_y)[(int)fVar9 * 0x26] =
                     local_84 + (float)(&creature_pos_y)[(int)fVar9 * 0x26];
              }
            }
          }
        }
        else {
          *(undefined1 *)(pfVar11 + -4) = 0;
        }
      }
      else {
        if (0.8 < pfVar11[5]) goto LAB_00422767;
        *(undefined1 *)(pfVar11 + -4) = 0;
        if ((*(char *)(pfVar11 + 8) == '\b') && (pfVar11[9] != -NAN)) {
          if ((&creature_pool)[(int)pfVar11[9] * 0x98] != '\0') {
            iVar4 = _rand();
            sfx_play_panned(*(float *)(&creature_type_sfx_a0 +
                                      (iVar4 % 3 +
                                      (&creature_type_id)[(int)pfVar11[9] * 0x26] * 0x11) * 4));
          }
          creature_handle_death((int)pfVar11[9],false);
        }
      }
    }
    pfVar11 = pfVar11 + 0xe;
    local_e8 = local_e8 + 1;
    if (0x495ac7 < (int)pfVar11) {
      return;
    }
  } while( true );
}



/* projectile_render @ 00422c70 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* renders projectiles/secondary projectiles and related beam/trail effects */

void projectile_render(void)

{
  float fVar1;
  float *pfVar2;
  float *pfVar3;
  char *pcVar4;
  undefined4 *puVar5;
  int iVar6;
  float *pfVar7;
  float10 fVar8;
  float10 fVar9;
  float10 fVar10;
  float10 fVar11;
  ulonglong uVar12;
  longlong lVar13;
  float fVar14;
  undefined4 uVar15;
  undefined4 uVar16;
  float fStack_32c;
  undefined4 uVar17;
  float *pfVar18;
  float in_stack_fffffd48;
  float fVar19;
  float fVar20;
  float fVar21;
  undefined4 uVar22;
  float *pfVar23;
  float fVar24;
  float fVar25;
  float fVar26;
  float fVar27;
  float fVar28;
  float fVar29;
  float fVar30;
  float fVar31;
  float fVar32;
  float in_stack_fffffd88;
  float fStack_274;
  float fStack_270;
  float fStack_26c;
  float fStack_268;
  float fStack_264;
  float *pfStack_260;
  float fStack_25c;
  float fStack_258;
  float fStack_254;
  float fStack_250;
  float fStack_24c;
  float fStack_248;
  float fStack_244;
  float fStack_240;
  float fStack_23c;
  float fStack_238;
  float fStack_234;
  float fStack_230;
  float fStack_22c;
  float fStack_228;
  float fStack_224;
  float fStack_220;
  float fStack_21c;
  float fStack_218;
  float fStack_214;
  float fStack_210;
  float fStack_20c;
  float fStack_208;
  float fStack_204;
  float fStack_200;
  float fStack_1fc;
  float fStack_1f8;
  float fStack_1f4;
  float fStack_1f0;
  float fStack_1ec;
  float fStack_1e8;
  float fStack_1e4;
  float fStack_1e0;
  float fStack_1dc;
  float fStack_1d8;
  float fStack_1d4;
  float fStack_1d0;
  float fStack_1cc;
  float fStack_1c8;
  float fStack_1c4;
  float fStack_1c0;
  float fStack_1bc;
  float fStack_1b8;
  float fStack_1b4;
  float fStack_1b0;
  float fStack_188;
  undefined4 uStack_114;
  float fStack_110;
  float fStack_10c;
  float fStack_104;
  float fStack_f4;
  float fStack_f0;
  undefined4 uStack_e8;
  float fStack_e4;
  float fStack_e0;
  float fStack_ac;
  float fStack_1c;
  float fStack_c;
  
  fStack_1b0 = 1.0;
  fStack_1b4 = 1.0;
  fStack_1b8 = 0.0;
  fStack_1bc = 0.0;
  fStack_1c0 = 6.077137e-39;
  (**(code **)(*grim_interface_ptr + 0x100))();
  fStack_1c0 = fStack_c * 0.5;
  fStack_1c4 = 0.0;
  fStack_1c8 = 0.0;
  fStack_1cc = 1.0;
  fStack_1d0 = 6.0772e-39;
  (**(code **)(*grim_interface_ptr + 0x114))();
  fVar31 = fStack_1c * 0.2;
  fStack_1d4 = 0.0;
  fStack_1d8 = 0.0;
  fStack_1dc = 0.0;
  fStack_1e0 = 2.8026e-45;
  fStack_1e4 = 6.077262e-39;
  fStack_1d0 = fVar31;
  fStack_1b8 = fVar31;
  (**(code **)(*grim_interface_ptr + 0x118))();
  fStack_1e8 = 0.0;
  fStack_1ec = 0.0;
  fStack_1f0 = 0.0;
  fStack_1f4 = 4.2039e-45;
  fStack_1f8 = 6.077294e-39;
  fStack_1e4 = fVar31;
  (**(code **)(*grim_interface_ptr + 0x118))();
  fStack_1f8 = 0.0;
  fStack_1fc = bullet_trail_texture;
  fStack_200 = 6.077325e-39;
  (**(code **)(*grim_interface_ptr + 0xc4))();
  fStack_200 = 0.5;
  fStack_204 = 1.0;
  fStack_208 = 0.0;
  fStack_20c = 0.0;
  fStack_210 = 6.077364e-39;
  (**(code **)(*grim_interface_ptr + 0x100))();
  iVar6 = 0;
  if (0 < _config_player_count) {
    pfVar2 = (float *)&player_aim_heading;
    do {
      if (0.0 < pfVar2[-0xb7]) {
        fVar8 = (float10)*pfVar2 - (float10)1.5707964;
        fVar9 = (float10)fcos(fVar8);
        fVar10 = (float10)fsin(fVar8);
        fStack_1dc = (float)fVar10;
        fVar29 = fStack_1dc * 512.0;
        fVar31 = pfVar2[-0xbb];
        fVar10 = (float10)fcos(fVar8 - (float10)0.150915);
        fVar8 = (float10)fsin(fVar8 - (float10)0.150915);
        fStack_1c8 = pfVar2[-0xbb] + (float)(fVar10 * (float10)15.0);
        fStack_1c4 = (float)((float10)pfVar2[-0xba] + fVar8 * (float10)15.0);
        fVar11 = (float10)fcos((float10)*pfVar2);
        fsin((float10)*pfVar2);
        fStack_10c = fStack_1c4 + _camera_offset_y;
        fStack_1b0 = (float)(((float10)fStack_1c8 + (float10)_camera_offset_x) -
                            fVar11 * (float10)1.1);
        fVar8 = (float10)_camera_offset_x;
        fStack_1f8 = fVar29 + pfVar2[-0xba] + _camera_offset_y;
        fStack_1cc = fStack_1f8;
        if (0 < (int)(&player_perk_counts)[perk_id_sharpshooter]) {
          fStack_220 = 2.8026e-44;
          fStack_21c = 2.8026e-45;
          fStack_224 = 6.07801e-39;
          (**(code **)(*grim_interface_ptr + 0x20))();
          fStack_224 = 6.07803e-39;
          (**(code **)(*grim_interface_ptr + 0xe8))();
          fStack_23c = fStack_1c0;
          fStack_240 = fStack_1c4;
          fStack_244 = 6.07813e-39;
          fStack_22c = (float)(fVar10 * (float10)15.0);
          fStack_228 = fVar29;
          fStack_224 = (float)((float10)(float)(fVar9 * (float10)512.0 + (float10)fVar31) + fVar8 +
                              fVar11 * (float10)1.1);
          (**(code **)(*grim_interface_ptr + 0x138))();
          fStack_244 = 6.07815e-39;
          (**(code **)(*grim_interface_ptr + 0xf0))();
          fStack_254 = 2.8026e-44;
          fStack_250 = 8.40779e-45;
          fStack_258 = 6.078184e-39;
          (**(code **)(*grim_interface_ptr + 0x20))();
        }
      }
      iVar6 = iVar6 + 1;
      pfVar2 = pfVar2 + 0xd8;
    } while (iVar6 < _config_player_count);
  }
  fStack_1f8 = 0.0;
  fStack_210 = 0.0;
  fStack_214 = 0.5;
  fStack_218 = 0.5;
  fStack_21c = 0.5;
  fStack_220 = 0.0;
  fStack_224 = 6.078274e-39;
  (**(code **)(*grim_interface_ptr + 0x118))();
  fStack_224 = 0.0;
  fStack_228 = 0.5;
  fStack_22c = 0.5;
  fStack_230 = 0.5;
  fStack_234 = 1.4013e-45;
  fStack_238 = 6.078318e-39;
  (**(code **)(*grim_interface_ptr + 0x118))();
  fStack_248 = 2.66247e-44;
  fStack_244 = 7.00649e-45;
  fStack_24c = 6.078352e-39;
  (**(code **)(*grim_interface_ptr + 0x20))();
  fStack_25c = 2.8026e-44;
  fStack_258 = 2.8026e-45;
  pfStack_260 = (float *)0x423011;
  (**(code **)(*grim_interface_ptr + 0x20))();
  pfVar2 = (float *)&projectile_vel_y;
  do {
    if ((*(char *)(pfVar2 + -7) != '\0') &&
       ((fVar31 = pfVar2[1], (int)fVar31 < 8 || (fVar31 == 4.06377e-44)))) {
      if (fVar31 == 0.0) {
        *(undefined1 *)(pfVar2 + -7) = 0;
      }
      fStack_e4 = pfVar2[2];
      if (fStack_e4 <= 1.0) {
        if (fStack_e4 < 0.0) {
          fStack_e4 = 0.0;
        }
      }
      else {
        fStack_e4 = 1.0;
      }
      fStack_e4 = fStack_e4 * fStack_ac;
      fStack_264 = 0.5;
      fStack_268 = 0.5;
      fStack_26c = 0.5;
      fStack_270 = 2.8026e-45;
      fStack_274 = 6.078621e-39;
      pfStack_260 = (float *)fStack_e4;
      fStack_248 = fStack_e4;
      (**(code **)(*grim_interface_ptr + 0x118))();
      in_stack_fffffd88 = 0.5;
      fStack_274 = fStack_e4;
      (**(code **)(*grim_interface_ptr + 0x118))(3,0x3f000000,0x3f000000,0x3f000000);
      fVar31 = pfVar2[1];
      if (fVar31 == 2.8026e-45) {
        fVar32 = (_camera_offset_x + pfVar2[-3]) - pfVar2[-1];
        fVar31 = (_camera_offset_y + pfVar2[-2]) - *pfVar2;
        fVar14 = _camera_offset_x + pfVar2[-3] + pfVar2[-1];
        fVar29 = _camera_offset_y + pfVar2[-2] + *pfVar2;
        fStack_274 = _camera_offset_y + pfVar2[-4];
        fStack_248 = _camera_offset_x + pfVar2[-5] + pfVar2[-1];
        fStack_244 = fStack_274 + *pfVar2;
        fStack_218 = (_camera_offset_x + pfVar2[-5]) - pfVar2[-1];
        fVar30 = fStack_274 - *pfVar2;
        fStack_1f8 = fStack_218;
        fStack_1f4 = fVar30;
        fStack_1e8 = fStack_248;
        fStack_1e4 = fStack_244;
        fStack_1d8 = fVar32;
        fStack_1d4 = fVar31;
        fStack_1c8 = fVar14;
        fStack_1c4 = fVar29;
        fStack_f4 = fStack_274;
      }
      else if (fVar31 == 1.4013e-45) {
        fStack_228 = pfVar2[-1] * 1.2;
        fStack_24c = *pfVar2 * 1.2;
        fStack_104 = _camera_offset_y + pfVar2[-2];
        fVar32 = (_camera_offset_x + pfVar2[-3]) - fStack_228;
        fVar31 = fStack_104 - fStack_24c;
        fVar14 = _camera_offset_x + pfVar2[-3] + fStack_228;
        fVar29 = fStack_104 + fStack_24c;
        fStack_250 = _camera_offset_x + pfVar2[-5];
        fStack_274 = _camera_offset_y + pfVar2[-4];
        fStack_248 = fStack_250 + fStack_228;
        fStack_244 = fStack_274 + fStack_24c;
        fStack_220 = fStack_250 - fStack_228;
        fVar30 = fStack_274 - fStack_24c;
        fStack_240 = fVar32;
        fStack_23c = fVar31;
        fStack_224 = fStack_24c;
        fStack_21c = fVar30;
        fStack_218 = fStack_220;
        fStack_1f0 = fStack_228;
        fStack_1ec = fStack_24c;
        fStack_1b0 = fVar14;
      }
      else if (fVar31 == 8.40779e-45) {
        (**(code **)(*grim_interface_ptr + 0x118))(2,0x3e4ccccd,0x3f000000,0x3f800000,fStack_10c);
        (**(code **)(*grim_interface_ptr + 0x118))(3,0x3e4ccccd,0x3f000000,0x3f800000,fStack_10c);
        fStack_238 = pfVar2[-1] * 1.1;
        fStack_24c = *pfVar2 * 1.1;
        fVar32 = (_camera_offset_x + pfVar2[-3]) - fStack_238;
        fVar31 = (_camera_offset_y + pfVar2[-2]) - fStack_24c;
        fVar14 = _camera_offset_x + pfVar2[-3] + fStack_238;
        fVar29 = _camera_offset_y + pfVar2[-2] + fStack_24c;
        fStack_250 = _camera_offset_x + pfVar2[-5];
        fStack_274 = _camera_offset_y + pfVar2[-4];
        fStack_248 = fStack_250 + fStack_238;
        fStack_244 = fStack_274 + fStack_24c;
        fStack_26c = fStack_250 - fStack_238;
        fVar30 = fStack_274 - fStack_24c;
        fStack_268 = fVar30;
        fStack_234 = fStack_24c;
        fStack_218 = fStack_26c;
        fStack_210 = fStack_248;
        fStack_20c = fStack_244;
        fStack_1e0 = fVar14;
        fStack_1dc = fVar29;
      }
      else {
        pfStack_260 = (float *)(pfVar2[-1] * 0.7);
        fStack_25c = *pfVar2 * 0.7;
        fVar32 = (_camera_offset_x + pfVar2[-3]) - (float)pfStack_260;
        fVar31 = (_camera_offset_y + pfVar2[-2]) - fStack_25c;
        fVar14 = _camera_offset_x + pfVar2[-3] + (float)pfStack_260;
        fVar29 = _camera_offset_y + pfVar2[-2] + fStack_25c;
        fStack_250 = _camera_offset_x + pfVar2[-5];
        fStack_274 = _camera_offset_y + pfVar2[-4];
        fStack_248 = fStack_250 + (float)pfStack_260;
        fStack_244 = fStack_274 + fStack_25c;
        fStack_258 = fStack_250 - (float)pfStack_260;
        fVar30 = fStack_274 - fStack_25c;
        fStack_254 = fVar30;
        fStack_24c = fStack_25c;
        fStack_218 = fStack_258;
        fStack_208 = fVar14;
        fStack_204 = fVar29;
        fStack_200 = fStack_248;
        fStack_1fc = fStack_244;
        fStack_1cc = fStack_25c;
        fStack_1bc = fStack_274;
        fStack_1b4 = fStack_25c;
        fStack_188 = (float)pfStack_260;
      }
      (**(code **)(*grim_interface_ptr + 0x138))
                (fVar32,fVar31,fVar14,fVar29,fStack_248,fStack_244,fStack_218,fVar30);
    }
    pfVar2 = pfVar2 + 0x10;
  } while ((int)pfVar2 < 0x493ed4);
  pfStack_260 = (float *)0x423680;
  (**(code **)(*grim_interface_ptr + 0xf0))();
  fStack_270 = 2.66247e-44;
  fStack_26c = 7.00649e-45;
  fStack_274 = 6.080727e-39;
  (**(code **)(*grim_interface_ptr + 0x20))();
  fVar30 = 2.8026e-44;
  fVar31 = 2.8026e-45;
  (**(code **)(*grim_interface_ptr + 0x20))(0x14,2);
  pfVar2 = (float *)0x0;
  (**(code **)(*grim_interface_ptr + 0xc4))(particles_texture);
  effect_select_texture(0xd);
  fVar29 = 0.0;
  (**(code **)(*grim_interface_ptr + 0xfc))();
  if (0.0 < (float)(&player_muzzle_flash_alpha)[render_overlay_player_index * 0xd8]) {
    fVar8 = ((float10)(float)(&player_aim_heading)[render_overlay_player_index * 0xd8] -
            (float10)1.5707964) - (float10)0.150915;
    fVar9 = (float10)fcos(fVar8);
    fStack_264 = (float)(fVar9 * (float10)15.0);
    fVar8 = (float10)fsin(fVar8);
    pfStack_260 = (float *)(float)(fVar8 * (float10)15.0);
    (**(code **)(*grim_interface_ptr + 0x114))
              (0x3f800000,0x3f800000,0x3f800000,
               fStack_e0 * (float)(&player_muzzle_flash_alpha)[render_overlay_player_index * 0xd8]);
    (**(code **)(*grim_interface_ptr + 0xe8))();
    (**(code **)(*grim_interface_ptr + 0x11c))
              ((fStack_274 + (float)(&player_pos_x)[render_overlay_player_index * 0xd8] +
               _camera_offset_x) - 80.0,
               (fStack_270 + (float)(&player_pos_y)[render_overlay_player_index * 0xd8] +
               _camera_offset_y) - 80.0,0x43200000,0x43200000);
    (**(code **)(*grim_interface_ptr + 0xf0))();
  }
  (**(code **)(*grim_interface_ptr + 0xe8))();
  pfVar3 = (float *)&projectile_pos_y;
  do {
    if ((*(char *)(pfVar3 + -3) != '\0') &&
       ((((fVar32 = pfVar3[5], fVar32 == 1.26117e-44 || (fVar32 == 1.54143e-44)) ||
         (fVar32 == 3.64338e-44)) || ((fVar32 == 3.36312e-44 || (fVar32 == 3.92364e-44)))))) {
      if (pfVar3[6] == 0.4) {
        if (fVar32 == 1.26117e-44) {
          uVar12 = __ftol();
          lVar13 = __ftol();
          iVar6 = (int)((longlong)
                        ((ulonglong)(uint)((int)uVar12 >> 0x1f) << 0x20 | uVar12 & 0xffffffff) /
                       (longlong)(int)lVar13);
          if (8 < iVar6) {
            iVar6 = 8;
          }
          fVar8 = (float10)fcos((float10)pfVar3[-2] + (float10)1.5707964);
          fStack_244 = (float)(fVar8 * (float10)pfVar3[8] * (float10)2.5);
          fVar8 = (float10)fsin((float10)pfVar3[-2] + (float10)1.5707964);
          fVar31 = (float)(fVar8 * (float10)pfVar3[8] * (float10)2.5);
          (**(code **)(*grim_interface_ptr + 0x114))
                    (0x3f800000,0x3f800000,0x3f800000,fStack_e0 * 0.4);
          pfVar2 = (float *)0x0;
          if (0 < iVar6) {
            do {
              (**(code **)(*grim_interface_ptr + 0x11c))
                        (((float)(int)pfVar2 * fStack_254 + pfVar3[-1] + _camera_offset_x) - 11.0,
                         ((float)(int)pfVar2 * fVar29 + *pfVar3 + _camera_offset_y) - 11.0,
                         0x41b00000,0x41b00000);
              pfVar2 = (float *)((int)pfVar2 + 1);
            } while ((int)pfVar2 < iVar6);
          }
          (**(code **)(*grim_interface_ptr + 0x114))
                    (0x3f800000,0x3f800000,0x3f800000,fStack_f0 * 0.45);
          in_stack_fffffd48 = 56.0;
          (**(code **)(*grim_interface_ptr + 0x11c))
                    ((_camera_offset_x + pfVar3[-1]) - 28.0,(_camera_offset_y + *pfVar3) - 28.0,
                     0x42600000,0x42600000);
          fVar32 = fStack_110 * 0.3;
          iVar6 = *grim_interface_ptr;
LAB_00423cb4:
          (**(code **)(iVar6 + 0x114))(0x3f800000,0x3f800000,0x3f800000,fVar32);
          if (config_fx_detail_flag1 != '\0') {
            (**(code **)(*grim_interface_ptr + 0x11c))
                      ((_camera_offset_x + pfVar3[-1]) - 128.0,(_camera_offset_y + *pfVar3) - 128.0,
                       0x43800000,0x43800000);
          }
        }
        else {
          if (fVar32 == 1.54143e-44) {
            uVar12 = __ftol();
            lVar13 = __ftol();
            iVar6 = (int)((longlong)
                          ((ulonglong)(uint)((int)uVar12 >> 0x1f) << 0x20 | uVar12 & 0xffffffff) /
                         (longlong)(int)lVar13);
            if (3 < iVar6) {
              iVar6 = 3;
            }
            fVar8 = (float10)fcos((float10)pfVar3[-2] + (float10)1.5707964);
            fStack_244 = (float)(fVar8 * (float10)pfVar3[8] * (float10)2.1);
            fVar8 = (float10)fsin((float10)pfVar3[-2] + (float10)1.5707964);
            fVar31 = (float)(fVar8 * (float10)pfVar3[8] * (float10)2.1);
            (**(code **)(*grim_interface_ptr + 0x114))
                      (0x3f800000,0x3f800000,0x3f800000,fStack_e0 * 0.4);
            pfVar2 = (float *)0x0;
            if (0 < iVar6) {
              do {
                (**(code **)(*grim_interface_ptr + 0x11c))
                          (((float)(int)pfVar2 * fStack_254 + pfVar3[-1] + _camera_offset_x) - 6.0,
                           ((float)(int)pfVar2 * fVar29 + *pfVar3 + _camera_offset_y) - 6.0,
                           0x41400000,0x41400000);
                pfVar2 = (float *)((int)pfVar2 + 1);
              } while ((int)pfVar2 < iVar6);
            }
            (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,fVar31);
            in_stack_fffffd48 = 16.0;
            (**(code **)(*grim_interface_ptr + 0x11c))
                      ((_camera_offset_x + pfVar3[-1]) - 8.0,(_camera_offset_y + *pfVar3) - 8.0,
                       0x41800000,0x41800000);
            iVar6 = *grim_interface_ptr;
            uVar15 = 0x3f800000;
            uVar17 = 0x3f800000;
            uVar16 = 0x3f800000;
          }
          else {
            if (fVar32 == 3.92364e-44) {
              uVar12 = __ftol();
              lVar13 = __ftol();
              iVar6 = (int)((longlong)
                            ((ulonglong)(uint)((int)uVar12 >> 0x1f) << 0x20 | uVar12 & 0xffffffff) /
                           (longlong)(int)lVar13);
              if (0x12 < iVar6) {
                iVar6 = 0x12;
              }
              fVar8 = (float10)fcos((float10)pfVar3[-2] + (float10)1.5707964);
              fStack_244 = (float)(fVar8 * (float10)pfVar3[8] * (float10)2.6);
              fVar8 = (float10)fsin((float10)pfVar3[-2] + (float10)1.5707964);
              fVar31 = (float)(fVar8 * (float10)pfVar3[8] * (float10)2.6);
              fVar32 = fStack_e0 * 0.4;
              (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,fVar32);
              pfVar2 = (float *)0x0;
              if (0 < iVar6) {
                do {
                  (**(code **)(*grim_interface_ptr + 0x11c))
                            (((float)(int)pfVar2 * fStack_254 + pfVar3[-1] + _camera_offset_x) -
                             22.0,((float)(int)pfVar2 * fVar29 + *pfVar3 + _camera_offset_y) - 22.0,
                             0x42300000,0x42300000);
                  pfVar2 = (float *)((int)pfVar2 + 1);
                } while ((int)pfVar2 < iVar6);
              }
              (**(code **)(*grim_interface_ptr + 0x114))
                        (0x3f800000,0x3f800000,0x3f800000,fStack_f0 * 0.45);
              in_stack_fffffd48 = 84.0;
              (**(code **)(*grim_interface_ptr + 0x11c))
                        ((_camera_offset_x + pfVar3[-1]) - 42.0,(_camera_offset_y + *pfVar3) - 42.0,
                         0x42a80000,0x42a80000);
              iVar6 = *grim_interface_ptr;
              goto LAB_00423cb4;
            }
            if (fVar32 == 3.64338e-44) {
              uVar12 = __ftol();
              lVar13 = __ftol();
              iVar6 = (int)((longlong)
                            ((ulonglong)(uint)((int)uVar12 >> 0x1f) << 0x20 | uVar12 & 0xffffffff) /
                           (longlong)(int)lVar13);
              if (3 < iVar6) {
                iVar6 = 3;
              }
              fVar8 = (float10)fcos((float10)pfVar3[-2] + (float10)1.5707964);
              fStack_244 = (float)(fVar8 * (float10)pfVar3[8] * (float10)2.1);
              fVar8 = (float10)fsin((float10)pfVar3[-2] + (float10)1.5707964);
              fVar31 = (float)(fVar8 * (float10)pfVar3[8] * (float10)2.1);
              (**(code **)(*grim_interface_ptr + 0x114))
                        (0x3e99999a,0x3f800000,0x3e99999a,fStack_e0 * 0.4);
              pfVar2 = (float *)0x0;
              if (0 < iVar6) {
                do {
                  (**(code **)(*grim_interface_ptr + 0x11c))
                            (((float)(int)pfVar2 * fStack_254 + pfVar3[-1] + _camera_offset_x) - 6.0
                             ,((float)(int)pfVar2 * fVar29 + *pfVar3 + _camera_offset_y) - 6.0,
                             0x41400000,0x41400000);
                  pfVar2 = (float *)((int)pfVar2 + 1);
                } while ((int)pfVar2 < iVar6);
              }
              (**(code **)(*grim_interface_ptr + 0x114))(0x3e99999a,0x3f800000,0x3e99999a,fVar31);
              in_stack_fffffd48 = 16.0;
              (**(code **)(*grim_interface_ptr + 0x11c))
                        ((_camera_offset_x + pfVar3[-1]) - 8.0,(_camera_offset_y + *pfVar3) - 8.0,
                         0x41800000,0x41800000);
              iVar6 = *grim_interface_ptr;
              uVar15 = 0x3e99999a;
              uVar17 = 0x3f800000;
            }
            else {
              if (fVar32 != 3.36312e-44) goto LAB_00424111;
              uVar12 = __ftol();
              lVar13 = __ftol();
              iVar6 = (int)((longlong)
                            ((ulonglong)(uint)((int)uVar12 >> 0x1f) << 0x20 | uVar12 & 0xffffffff) /
                           (longlong)(int)lVar13);
              if (3 < iVar6) {
                iVar6 = 3;
              }
              fVar8 = (float10)fcos((float10)pfVar3[-2] + (float10)1.5707964);
              fStack_244 = (float)(fVar8 * (float10)pfVar3[8] * (float10)2.1);
              fVar8 = (float10)fsin((float10)pfVar3[-2] + (float10)1.5707964);
              fVar31 = (float)(fVar8 * (float10)pfVar3[8] * (float10)2.1);
              (**(code **)(*grim_interface_ptr + 0x114))
                        (0x3e99999a,0x3e99999a,0x3f800000,fStack_e0 * 0.4);
              pfVar2 = (float *)0x0;
              if (0 < iVar6) {
                do {
                  (**(code **)(*grim_interface_ptr + 0x11c))
                            (((float)(int)pfVar2 * fStack_254 + pfVar3[-1] + _camera_offset_x) - 6.0
                             ,((float)(int)pfVar2 * fVar29 + *pfVar3 + _camera_offset_y) - 6.0,
                             0x41400000,0x41400000);
                  pfVar2 = (float *)((int)pfVar2 + 1);
                } while ((int)pfVar2 < iVar6);
              }
              (**(code **)(*grim_interface_ptr + 0x114))(0x3e99999a,0x3e99999a,0x3f800000,fVar31);
              in_stack_fffffd48 = 16.0;
              (**(code **)(*grim_interface_ptr + 0x11c))
                        ((_camera_offset_x + pfVar3[-1]) - 8.0,(_camera_offset_y + *pfVar3) - 8.0,
                         0x41800000,0x41800000);
              iVar6 = *grim_interface_ptr;
              uVar15 = 0x3f800000;
              uVar17 = 0x3e99999a;
            }
            uVar16 = 0x3e99999a;
          }
          (**(code **)(iVar6 + 0x114))(uVar16,uVar17,uVar15,fStack_110 * 0.15);
          if (config_fx_detail_flag1 != '\0') {
            uVar15 = 0x42f00000;
            uVar17 = 0x42f00000;
            fVar32 = (_camera_offset_y + *pfVar3) - 60.0;
            iVar6 = *grim_interface_ptr;
            fVar14 = (_camera_offset_x + pfVar3[-1]) - 60.0;
            goto LAB_00424107;
          }
        }
      }
      else {
        fVar32 = pfVar3[6] * 2.5;
        if (fVar32 <= 1.0) {
          if (fVar32 < 0.0) {
            fVar32 = 0.0;
          }
        }
        else {
          fVar32 = 1.0;
        }
        (**(code **)(*grim_interface_ptr + 0x114))
                  (0x3f800000,0x3f800000,0x3f800000,fVar32 * fStack_e0);
        uVar15 = 0x42600000;
        uVar17 = 0x42600000;
        fVar32 = (_camera_offset_y + *pfVar3) - 28.0;
        iVar6 = *grim_interface_ptr;
        fVar14 = (_camera_offset_x + pfVar3[-1]) - 28.0;
LAB_00424107:
        (**(code **)(iVar6 + 0x11c))(fVar14,fVar32,uVar17,uVar15);
      }
    }
LAB_00424111:
    pfVar3 = pfVar3 + 0x10;
  } while ((int)pfVar3 < 0x493ec4);
  (**(code **)(*grim_interface_ptr + 0xf0))();
  fVar32 = 1.0;
  iVar6 = perk_count_get(perk_id_ion_gun_master);
  if (iVar6 != 0) {
    fVar32 = 1.2;
  }
  (**(code **)(*grim_interface_ptr + 0xc4))(projectile_texture,0);
  (**(code **)(*grim_interface_ptr + 0xe8))();
  fStack_264 = 0.0;
  pfVar3 = (float *)&projectile_origin_y;
  uVar17 = uStack_e8;
  do {
    pfVar7 = pfVar3 + -5;
    pfStack_260 = pfVar7;
    if (*(char *)(pfVar3 + -5) != '\0') {
      fVar14 = pfVar3[3];
      if (fVar14 == 2.66247e-44) {
        if (pfVar3[4] == 0.4) {
          fStack_274 = SQRT((*pfVar3 - pfVar3[-2]) * (*pfVar3 - pfVar3[-2]) +
                            (pfVar3[-1] - pfVar3[-3]) * (pfVar3[-1] - pfVar3[-3])) * 0.01;
          (**(code **)(*grim_interface_ptr + 0xfc))(pfVar3[-4]);
          (**(code **)(*grim_interface_ptr + 0x104))(2,0);
          (**(code **)(*grim_interface_ptr + 0x114))
                    (0x3dcccccd,0x3f19999a,0x3e4ccccd,fStack_f4 * 0.7);
          in_stack_fffffd48 = fVar29 * 16.0;
          iVar6 = *grim_interface_ptr;
          fVar14 = fVar29 * 8.0;
          fStack_210 = in_stack_fffffd48;
LAB_00424257:
          (**(code **)(iVar6 + 0x11c))
                    ((_camera_offset_x + pfVar3[-3]) - fVar14,
                     (_camera_offset_y + pfVar3[-2]) - fVar14,in_stack_fffffd48,in_stack_fffffd48);
        }
        else {
          (**(code **)(*grim_interface_ptr + 0xfc))(pfVar3[-4]);
          (**(code **)(*grim_interface_ptr + 0x104))(2,0);
          fVar14 = pfVar3[4] * 2.5;
          if (fVar14 <= 1.0) {
            if (fVar14 < 0.0) {
              fVar14 = 0.0;
            }
          }
          else {
            fVar14 = 1.0;
          }
          (**(code **)(*grim_interface_ptr + 0x114))
                    (0x3f800000,0x3f800000,0x3f800000,fVar14 * fStack_f4);
          in_stack_fffffd48 = 56.0;
          (**(code **)(*grim_interface_ptr + 0x11c))
                    ((_camera_offset_x + pfVar3[-3]) - 28.0,(_camera_offset_y + pfVar3[-2]) - 28.0,
                     0x42600000,0x42600000);
        }
      }
      else if (fVar14 == 4.06377e-44) {
        if (pfVar3[4] == 0.4) {
          fStack_274 = SQRT((*pfVar3 - pfVar3[-2]) * (*pfVar3 - pfVar3[-2]) +
                            (pfVar3[-1] - pfVar3[-3]) * (pfVar3[-1] - pfVar3[-3]));
          if (20.0 < fStack_274) {
            fStack_274 = 20.0;
          }
          (**(code **)(*grim_interface_ptr + 0xfc))(pfVar3[-4]);
          (**(code **)(*grim_interface_ptr + 0x104))(4,3);
          uVar22 = 0x3f800000;
          uVar16 = 0x3f800000;
          iVar6 = *grim_interface_ptr;
          uVar15 = 0x3f800000;
          in_stack_fffffd48 = fVar29;
LAB_00424475:
          (**(code **)(iVar6 + 0x114))(uVar15,uVar16,uVar22,uVar17);
          fVar14 = in_stack_fffffd48 * 0.5;
          iVar6 = *grim_interface_ptr;
          fVar29 = in_stack_fffffd48;
          goto LAB_00424257;
        }
      }
      else if (fVar14 == 3.50325e-44) {
        if (pfVar3[4] == 0.4) {
          fStack_274 = SQRT((*pfVar3 - pfVar3[-2]) * (*pfVar3 - pfVar3[-2]) +
                            (pfVar3[-1] - pfVar3[-3]) * (pfVar3[-1] - pfVar3[-3]));
          if (20.0 < fStack_274) {
            fStack_274 = 20.0;
          }
          (**(code **)(*grim_interface_ptr + 0xfc))
                    ((float)(int)fStack_264 * 0.1 - (float)quest_spawn_timeline * 0.1);
          (**(code **)(*grim_interface_ptr + 0x104))(4,6);
          uVar22 = 0x3f4ccccd;
          uVar16 = 0x3f4ccccd;
          iVar6 = *grim_interface_ptr;
          uVar15 = 0x3f4ccccd;
          in_stack_fffffd48 = fVar29;
          goto LAB_00424475;
        }
      }
      else if (((fVar14 == 3.08286e-44) || (fVar14 == 2.94273e-44)) ||
              ((fVar14 == 3.22299e-44 || (fVar14 == 6.30584e-44)))) {
        if (pfVar3[4] == 0.4) {
          if (fVar14 == 3.08286e-44) {
            fStack_274 = 1.05;
          }
          else if (fVar14 == 2.94273e-44) {
            fStack_274 = 2.2;
          }
          else {
            fStack_274 = 0.8;
            if (fVar14 != 6.30584e-44) {
              fStack_274 = 3.5;
            }
          }
          fVar14 = 2.8026e-45;
          (**(code **)(*grim_interface_ptr + 0x104))(2);
          fStack_24c = pfVar3[-3] - pfVar3[-1];
          pfVar7 = &fStack_24c;
          fStack_248 = pfVar3[-2] - *pfVar3;
          pfVar23 = &fStack_24c;
          fStack_22c = SQRT(fStack_248 * fStack_248 + fStack_24c * fStack_24c);
          fStack_20c = fStack_24c;
          fStack_208 = fStack_248;
          thunk_FUN_00452f1d();
          if (pfVar3[3] == 6.30584e-44) {
            fVar20 = 0.1;
            in_stack_fffffd48 = 1.0;
            (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f19999a,0x3dcccccd,uVar17);
            pfVar7 = pfVar2;
          }
          else {
            fVar20 = 1.0;
            in_stack_fffffd48 = 0.5;
            (**(code **)(*grim_interface_ptr + 0x114))
                      (0x3f000000,0x3f19999a,0x3f800000,uVar17,pfVar23,pfVar7);
            pfVar7 = pfVar2;
          }
          (**(code **)(*grim_interface_ptr + 0x104))(4,2);
          fStack_21c = fVar14 * 16.0;
          fStack_224 = (_camera_offset_x + pfVar3[-1]) - fStack_21c;
          fStack_220 = (_camera_offset_y + *pfVar3) - fStack_21c;
          if (fStack_24c <= 256.0) {
            fStack_274 = 0.0;
            fStack_1dc = fStack_24c;
          }
          else {
            fStack_274 = fStack_24c - 256.0;
            fStack_1dc = 256.0;
          }
          fVar25 = fVar14 * 3.1;
          if (9.0 < fVar25) {
            fVar25 = 9.0;
          }
          fStack_1cc = fStack_274;
          if (fStack_274 < fStack_24c) {
            do {
              if (pfVar3[3] == 6.30584e-44) {
                (**(code **)(*grim_interface_ptr + 0x114))
                          (0x3f800000,0x3f19999a,0x3dcccccd,
                           ((fStack_274 - fStack_1cc) / fStack_1dc) * fStack_110);
              }
              else {
                (**(code **)(*grim_interface_ptr + 0x114))
                          (0x3f000000,0x3f19999a,0x3f800000,
                           ((fStack_274 - fStack_1cc) / fStack_1dc) * fStack_110);
              }
              (**(code **)(*grim_interface_ptr + 0x11c))
                        (fVar32 * fVar30 + fStack_234,in_stack_fffffd88 * fVar30 + fStack_230,
                         fVar14 * 32.0,fVar14 * 32.0);
              fStack_274 = fVar25 + fStack_274;
            } while (fStack_274 < fStack_24c);
          }
          pfVar2 = pfVar7;
          (**(code **)(*grim_interface_ptr + 0xfc))(pfVar7[1]);
          (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f333333,uStack_114);
          (**(code **)(*grim_interface_ptr + 0x11c))
                    ((_camera_offset_x + pfVar7[2]) - fStack_230,
                     (_camera_offset_y + pfVar7[3]) - fStack_230,fVar20 * 32.0,fVar20 * 32.0);
          uVar17 = uStack_114;
        }
        else {
          fVar14 = pfVar3[-4];
          (**(code **)(*grim_interface_ptr + 0xfc))(fVar14);
          (**(code **)(*grim_interface_ptr + 0x104))(4,2);
          fVar20 = pfVar3[4] * 2.5;
          if (fVar20 <= 1.0) {
            if (fVar20 < 0.0) {
              fVar20 = 0.0;
            }
          }
          else {
            fVar20 = 1.0;
          }
          fStack_250 = pfVar3[-3] - pfVar3[-1];
          pfVar7 = &fStack_250;
          fStack_24c = pfVar3[-2] - *pfVar3;
          pfVar23 = &fStack_250;
          fStack_230 = SQRT(fStack_24c * fStack_24c + fStack_250 * fStack_250);
          fStack_218 = fStack_250;
          fStack_214 = fStack_24c;
          thunk_FUN_00452f1d();
          fVar25 = pfVar3[3];
          if (fVar25 == 3.08286e-44) {
            pfVar2 = (float *)0x3f866666;
          }
          else if (fVar25 == 2.94273e-44) {
            pfVar2 = (float *)0x400ccccd;
          }
          else {
            pfVar2 = (float *)0x3f4ccccd;
            if (fVar25 != 6.30584e-44) {
              pfVar2 = (float *)0x40600000;
            }
          }
          fVar25 = 5.60519e-45;
          (**(code **)(*grim_interface_ptr + 0x104))(4,2,pfVar23,pfVar7);
          fStack_210 = fVar29 * 16.0;
          fStack_218 = (_camera_offset_x + pfVar3[-1]) - fStack_210;
          fStack_214 = (_camera_offset_y + *pfVar3) - fStack_210;
          if (fStack_240 <= 256.0) {
            fVar27 = 0.0;
            fStack_1c8 = fStack_240;
          }
          else {
            fVar27 = fStack_240 - 256.0;
            fStack_1c8 = 256.0;
          }
          fStack_250 = fVar29 * 3.1;
          if (9.0 < fStack_250) {
            fStack_250 = 9.0;
          }
          fStack_1e0 = fVar27;
          if (fVar27 < fStack_240) {
            fVar1 = fVar29 * 32.0;
            do {
              if (pfVar3[3] == 6.30584e-44) {
                (**(code **)(*grim_interface_ptr + 0x114))
                          (0x3f800000,0x3f19999a,0x3dcccccd,
                           ((fVar27 - fStack_1e0) / fStack_1c8) * fVar14 * fStack_104);
              }
              else {
                (**(code **)(*grim_interface_ptr + 0x114))
                          (0x3f000000,0x3f19999a,0x3f800000,
                           ((fVar27 - fStack_1e0) / fStack_1c8) * fVar14 * fStack_104);
              }
              (**(code **)(*grim_interface_ptr + 0x11c))
                        (fVar25 * fStack_270 + fStack_228,fVar25 * fStack_26c + fStack_224,fVar1,
                         fVar1);
              fVar27 = fStack_250 + fVar27;
            } while (fVar27 < fStack_240);
          }
          fVar14 = fVar14 * fStack_104;
          in_stack_fffffd48 = fVar14;
          fStack_250 = fVar14;
          (**(code **)(*grim_interface_ptr + 0x114))(0x3f000000,0x3f19999a,0x3f800000,fVar14);
          pfVar23 = (float *)((int)fVar20 + 8);
          (**(code **)(*grim_interface_ptr + 0x11c))
                    ((_camera_offset_x + *pfVar23) - 16.0,
                     (_camera_offset_y + *(float *)((int)fVar20 + 0xc)) - 16.0,0x42000000,0x42000000
                    );
          (**(code **)(*grim_interface_ptr + 0x114))(0x3f000000,0x3f19999a,0x3f800000,fVar14);
          fStack_224 = fStack_274 * fVar30 * 40.0;
          uVar17 = uStack_e8;
          pfVar7 = pfStack_260;
          if ((*(int *)((int)fVar20 + 0x20) != 0x2d) &&
             (iVar6 = creature_find_in_radius(pfVar23,fStack_224,1), pfVar7 = pfStack_260,
             iVar6 != -1)) {
            in_stack_fffffd88 = fStack_274 * 32.0;
            fVar14 = fVar32;
            do {
              (**(code **)(*grim_interface_ptr + 0x10c))(0,0x3f200000,0);
              fVar26 = 0.25;
              fVar24 = 0.625;
              fVar21 = 1.4013e-45;
              (**(code **)(*grim_interface_ptr + 0x10c))(1,0x3f200000,0x3e800000);
              fVar19 = 0.25;
              in_stack_fffffd48 = 0.625;
              (**(code **)(*grim_interface_ptr + 0x10c))(2,0x3f200000,0x3e800000);
              (**(code **)(*grim_interface_ptr + 0x10c))(3,0x3f200000,0);
              pfVar7 = &fStack_274;
              fVar25 = (float)(&creature_pos_x)[iVar6 * 0x26] - *pfVar23;
              fVar27 = (float)(&creature_pos_y)[iVar6 * 0x26] - *(float *)((int)fVar20 + 0xc);
              pfVar18 = &fStack_274;
              fStack_274 = fVar25;
              fStack_270 = fVar27;
              thunk_FUN_00452f1d();
              fVar32 = -in_stack_fffffd88;
              fStack_214 = _camera_offset_x + *pfVar23;
              fStack_210 = _camera_offset_y + *(float *)((int)fVar20 + 0xc);
              fVar1 = fVar32 * fVar24;
              fStack_26c = fVar24 * fVar14;
              fStack_208 = fStack_26c * 10.0;
              pfVar2 = (float *)(fStack_210 - fStack_208);
              fStack_1f0 = fStack_26c * 10.0;
              fStack_274 = fStack_214 + fVar1 * 10.0;
              fStack_270 = fStack_1f0 + fStack_210;
              fStack_224 = _camera_offset_x + (float)(&creature_pos_x)[iVar6 * 0x26];
              fStack_220 = _camera_offset_y + (float)(&creature_pos_y)[iVar6 * 0x26];
              fVar28 = fVar1 * 10.0 + fStack_224;
              fVar29 = fStack_26c * 10.0 + fStack_220;
              fStack_264 = fStack_224 - fVar1 * 10.0;
              pfStack_260 = (float *)(fStack_220 - fStack_26c * 10.0);
              fStack_218 = fStack_26c;
              fStack_200 = fStack_26c;
              (**(code **)(*grim_interface_ptr + 0x138))
                        (fStack_214 - fVar1 * 10.0,pfVar2,fStack_274,fStack_270,fVar28,fVar29,
                         fStack_264,pfStack_260,pfVar18);
              fVar25 = fVar25 * (float)pfVar7;
              fStack_188 = fVar27 * (float)pfVar7;
              fStack_1e8 = fStack_188 * 4.0;
              fStack_1d8 = fStack_188 * 4.0;
              fVar27 = fVar30 - fVar25 * 4.0;
              fVar31 = fVar31 - fStack_1d8;
              fVar29 = fStack_188 * 4.0 + fVar29;
              fVar30 = fVar27;
              fStack_1e0 = fStack_188;
              fStack_1d0 = fStack_188;
              (**(code **)(*grim_interface_ptr + 0x138))
                        (fVar24 - fVar25 * 4.0,fVar26 - fStack_188 * 4.0,fVar28 + fVar25 * 4.0,
                         fVar29,fVar19 + fVar25 * 4.0,fStack_1e8 + fVar21,fVar27,fVar31);
              (**(code **)(*grim_interface_ptr + 0x104))(4,2);
              fStack_32c = 6.08967e-39;
              (**(code **)(*grim_interface_ptr + 0x11c))
                        ((_camera_offset_x + (float)(&creature_pos_x)[iVar6 * 0x26]) - fStack_274,
                         (_camera_offset_y + (float)(&creature_pos_y)[iVar6 * 0x26]) - fStack_274,
                         fVar27,fVar27);
              in_stack_fffffd88 = fVar14;
              iVar6 = creature_find_in_radius(pfVar23,fStack_224,iVar6 + 1);
              pfVar7 = pfStack_260;
              fVar14 = fVar32;
            } while (iVar6 != -1);
          }
        }
      }
    }
    pfVar3 = pfVar3 + 0x10;
    fStack_264 = (float)((int)fStack_264 + 1);
  } while ((int)pfVar3 < 0x493ecc);
  (**(code **)(*grim_interface_ptr + 0xf0))();
  fStack_1c4 = (float)survival_elapsed_ms * 0.001 * 9.0;
  (**(code **)(*grim_interface_ptr + 0x20))(0x13,1);
  fVar31 = 8.40779e-45;
  (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
  (**(code **)(*grim_interface_ptr + 0xe8))();
  pfVar2 = (float *)&projectile_pos_y;
  do {
    if ((*(char *)(pfVar2 + -3) != '\0') && (pfVar2[5] == 5.74532e-44)) {
      if (pfVar2[6] == 0.4) {
        (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,uVar17);
        fVar32 = (_camera_offset_x + pfVar2[-1]) - 30.0;
        (**(code **)(*grim_interface_ptr + 0x11c))
                  (fVar32,(_camera_offset_y + *pfVar2) - 30.0,0x42700000,0x42700000);
        fVar8 = (float10)fsin((float10)pfVar2[-2] + (float10)1.5707964);
        fVar9 = (float10)fcos((float10)pfVar2[-2] + (float10)1.5707964);
        fVar29 = (float)((((float10)_camera_offset_x + (float10)pfVar2[-1]) - (float10)30.0) +
                        fVar9 * (float10)15.0);
        (**(code **)(*grim_interface_ptr + 0x11c))
                  (fVar29,(float)((((float10)_camera_offset_y + (float10)*pfVar2) - (float10)30.0) +
                                 fVar8 * (float10)15.0),0x42700000,0x42700000);
        fVar8 = (float10)fcos((float10)(int)fVar31 + (float10)fStack_21c);
        fVar9 = (float10)fsin((float10)(float)((float10)(int)fVar31 + (float10)fStack_21c));
        fVar30 = (float)((((float10)_camera_offset_y + (float10)*pfVar2) - (float10)31.0) +
                        fVar9 * (float10)11.0);
        (**(code **)(*grim_interface_ptr + 0x11c))
                  ((float)(fVar8 * fVar8 +
                          (((float10)_camera_offset_x + (float10)pfVar2[-1]) - (float10)31.0)),
                   fVar30,0x42500000,0x42500000);
        fVar8 = (float10)fsin((float10)fVar32 + (float10)2.0943952);
        fVar9 = (float10)fcos((float10)fVar32 + (float10)2.0943952);
        (**(code **)(*grim_interface_ptr + 0x11c))
                  ((float)((((float10)_camera_offset_x + (float10)pfVar2[-1]) - (float10)31.0) +
                          fVar9 * (float10)10.0),
                   (float)fVar8 * 10.0 + ((_camera_offset_y + *pfVar2) - 31.0),0x42780000,0x42780000
                  );
        fVar8 = (float10)fsin((float10)fVar29 + (float10)4.1887903);
        fVar9 = (float10)fcos((float10)fVar29 + (float10)4.1887903);
        (**(code **)(*grim_interface_ptr + 0x11c))
                  ((float)((((float10)_camera_offset_x + (float10)pfVar2[-1]) - (float10)31.0) +
                          fVar9 * (float10)10.0),
                   (float)((((float10)_camera_offset_y + (float10)*pfVar2) - (float10)31.0) +
                          fVar8 * (float10)fVar30),0x42780000,0x42780000);
      }
      else {
        fVar31 = pfVar2[6] * 2.5;
        if (fVar31 <= 1.0) {
          if (fVar31 < 0.0) {
            fVar31 = 0.0;
          }
        }
        else {
          fVar31 = 1.0;
        }
        (**(code **)(*grim_interface_ptr + 0x114))
                  (0x3f800000,0x3f800000,0x3f800000,fVar31 * fStack_110);
        fVar31 = in_stack_fffffd48 * 40.0 + 32.0;
        fVar29 = in_stack_fffffd48 * 20.0 + 16.0;
        (**(code **)(*grim_interface_ptr + 0x11c))
                  ((_camera_offset_x + pfVar2[-1]) - fVar29,(_camera_offset_y + *pfVar2) - fVar29,
                   fVar31,fVar31);
      }
    }
    pfVar2 = pfVar2 + 0x10;
  } while ((int)pfVar2 < 0x493ec4);
  (**(code **)(*grim_interface_ptr + 0xf0))();
  (**(code **)(*grim_interface_ptr + 0x100))(0,0,0x3f800000,0x3f800000);
  (**(code **)(*grim_interface_ptr + 0x20))(0x13,5);
  (**(code **)(*grim_interface_ptr + 0x20))(0x14,2);
  (**(code **)(*grim_interface_ptr + 0xc4))(particles_texture,0);
  effect_select_texture(0xd);
  (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,uVar17);
  (**(code **)(*grim_interface_ptr + 0xe8))();
  pcVar4 = &projectile_pool;
  do {
    if (((*pcVar4 != '\0') && (pfVar7[8] == 6.30584e-44)) && (*(int *)(pcVar4 + 0x24) == 0x3ecccccd)
       ) {
      (**(code **)(*grim_interface_ptr + 0xfc))(*(undefined4 *)(pcVar4 + 4));
      fStack_25c = _camera_offset_y + *(float *)(pcVar4 + 0xc);
      (**(code **)(*grim_interface_ptr + 0x11c))
                ((_camera_offset_x + *(float *)(pcVar4 + 8)) - 32.0,fStack_25c - 32.0,0x42800000,
                 0x42800000);
    }
    pcVar4 = pcVar4 + 0x40;
  } while ((int)pcVar4 < 0x493eb8);
  (**(code **)(*grim_interface_ptr + 0xf0))();
  uVar17 = 5;
  fVar29 = 6.091442e-39;
  (**(code **)(*grim_interface_ptr + 0x20))(0x13,5);
  (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
  fVar31 = fStack_188 * 0.9;
  fVar30 = fVar31;
  (**(code **)(*grim_interface_ptr + 0x114))(0x3f4ccccd,0x3f4ccccd,0x3f4ccccd,fVar31);
  (**(code **)(*grim_interface_ptr + 0xc4))(DAT_0049bb30,0);
  (**(code **)(*grim_interface_ptr + 0xe8))();
  pfVar2 = (float *)&projectile_pos_y;
  do {
    if (((*(char *)(pfVar2 + -3) != '\0') && (pfVar2[6] == 0.4)) &&
       ((fVar32 = pfVar2[5], fVar32 != 1.26117e-44 &&
        ((fVar32 != 1.54143e-44 && (fVar32 != 2.66247e-44)))))) {
      (**(code **)(*grim_interface_ptr + 0xfc))(pfVar2[-2]);
      if (pfVar2[5] == 1.4013e-45) {
        uVar16 = 0x40c00000;
        uVar15 = 0x40c00000;
        iVar6 = *grim_interface_ptr;
        fVar14 = (_camera_offset_x + pfVar2[-1]) - 3.0;
        fVar32 = (_camera_offset_y + *pfVar2) - 3.0;
        fVar29 = fVar14;
        fVar30 = fVar32;
      }
      else if (pfVar2[5] == 5.60519e-45) {
        uVar16 = 0x41000000;
        fVar14 = (_camera_offset_x + pfVar2[-1]) - 4.0;
        iVar6 = *grim_interface_ptr;
        uVar15 = 0x41000000;
        fVar32 = (_camera_offset_y + *pfVar2) - 4.0;
      }
      else {
        uVar16 = 0x40800000;
        fVar14 = (_camera_offset_x + pfVar2[-1]) - 2.0;
        iVar6 = *grim_interface_ptr;
        uVar15 = 0x40800000;
        fVar32 = (_camera_offset_y + *pfVar2) - 2.0;
      }
      (**(code **)(iVar6 + 0x11c))(fVar14,fVar32,uVar15,uVar16);
    }
    pfVar2 = pfVar2 + 0x10;
  } while ((int)pfVar2 < 0x493ec4);
  (**(code **)(*grim_interface_ptr + 0xf0))();
  if (config_fx_detail_flag1 != '\0') {
    (**(code **)(*grim_interface_ptr + 0x20))(0x13,5);
    (**(code **)(*grim_interface_ptr + 0x20))(0x14,2);
    (**(code **)(*grim_interface_ptr + 0xc4))(particles_texture,0);
    effect_select_texture(0xd);
    (**(code **)(*grim_interface_ptr + 0xe8))();
    pfVar2 = (float *)&secondary_proj_angle;
    do {
      if (*(char *)(pfVar2 + -1) != '\0') {
        (**(code **)(*grim_interface_ptr + 0x114))
                  (0x3f800000,0x3f800000,0x3f800000,fStack_1d0 * 0.48);
        fVar8 = (float10)fcos((float10)*pfVar2 - (float10)1.5707964);
        fVar9 = (float10)fsin((float10)*pfVar2 - (float10)1.5707964);
        (**(code **)(*grim_interface_ptr + 0x11c))
                  (((_camera_offset_x + pfVar2[2]) - (float)fVar8 * 5.0) - 70.0,
                   (float)(((float10)(_camera_offset_y + pfVar2[3]) - fVar9 * (float10)5.0) -
                          (float10)70.0),0x430c0000,0x430c0000);
      }
      pfVar2 = pfVar2 + 0xb;
    } while ((int)pfVar2 < 0x4965dc);
    (**(code **)(*grim_interface_ptr + 0xf0))();
    (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
  }
  (**(code **)(*grim_interface_ptr + 0x20))(0x13,5);
  fVar14 = 2.8026e-44;
  (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
  fVar32 = fVar31;
  (**(code **)(*grim_interface_ptr + 0x114))(0x3f4ccccd,0x3f4ccccd,0x3f4ccccd,fVar31);
  (**(code **)(*grim_interface_ptr + 0xc4))(projectile_texture,0);
  (**(code **)(*grim_interface_ptr + 0x104))(4,3);
  (**(code **)(*grim_interface_ptr + 0xe8))();
  puVar5 = &secondary_proj_pos_y;
  do {
    if ((*(char *)(puVar5 + -4) != '\0') && (puVar5[3] != 3)) {
      (**(code **)(*grim_interface_ptr + 0xfc))(puVar5[-3]);
      iVar6 = puVar5[3];
      if (iVar6 == 1) {
        fVar25 = fVar14;
        (**(code **)(*grim_interface_ptr + 0x114))(0x3f4ccccd,0x3f4ccccd,0x3f4ccccd,fVar31);
        uVar16 = 0x41600000;
        uVar15 = 0x41600000;
        iVar6 = *grim_interface_ptr;
        fVar20 = fVar32;
        fVar14 = fVar25;
LAB_00425a07:
        (**(code **)(iVar6 + 0x11c))(fVar20,fVar25,uVar15,uVar16);
      }
      else if (iVar6 == 2) {
        (**(code **)(*grim_interface_ptr + 0x114))(0x3f4ccccd,0x3f4ccccd,0x3f4ccccd,fVar31);
        (**(code **)(*grim_interface_ptr + 0x11c))(fVar30,uVar17,0x41200000,0x41200000);
      }
      else if (iVar6 == 4) {
        fVar25 = fVar29;
        (**(code **)(*grim_interface_ptr + 0x114))(0x3f4ccccd,0x3f4ccccd,0x3f4ccccd,fVar31);
        uVar16 = 0x41000000;
        uVar15 = 0x41000000;
        iVar6 = *grim_interface_ptr;
        fVar20 = fStack_32c;
        fVar29 = fVar25;
        goto LAB_00425a07;
      }
    }
    puVar5 = puVar5 + 0xb;
  } while ((int)puVar5 < 0x4965e8);
  (**(code **)(*grim_interface_ptr + 0xf0))();
  if (config_fx_detail_flag1 != '\0') {
    (**(code **)(*grim_interface_ptr + 0x20))(0x13,5);
    (**(code **)(*grim_interface_ptr + 0x20))(0x14,2);
    (**(code **)(*grim_interface_ptr + 0xc4))(particles_texture,0);
    effect_select_texture(0xd);
    (**(code **)(*grim_interface_ptr + 0xe8))();
    pfVar2 = (float *)&secondary_proj_pos_y;
    do {
      if (*(char *)(pfVar2 + -4) != '\0') {
        fVar31 = pfVar2[3];
        if (fVar31 == 5.60519e-45) {
          (**(code **)(*grim_interface_ptr + 0x114))
                    (0x3f333333,0x3f333333,0x3f800000,fStack_218 * 0.158);
          uVar15 = 0x41f00000;
          uVar17 = 0x41f00000;
          fVar8 = (float10)fcos((float10)pfVar2[-3] - (float10)1.5707964);
          iVar6 = *grim_interface_ptr;
          fVar9 = (float10)fsin((float10)pfVar2[-3] - (float10)1.5707964);
          fVar31 = ((_camera_offset_x + pfVar2[-1]) - (float)fVar8 * 9.0) - 15.0;
          fVar8 = ((float10)(_camera_offset_y + *pfVar2) - fVar9 * (float10)9.0) - (float10)15.0;
LAB_00425d30:
          (**(code **)(iVar6 + 0x11c))(fVar31,(float)fVar8,uVar17,uVar15);
        }
        else if (fVar31 == 1.4013e-45) {
          (**(code **)(*grim_interface_ptr + 0x114))
                    (0x3f800000,0x3f800000,0x3f800000,fStack_218 * 0.68);
          fVar8 = (float10)fcos((float10)pfVar2[-3] - (float10)1.5707964);
          fVar9 = (float10)fsin((float10)pfVar2[-3] - (float10)1.5707964);
          (**(code **)(*grim_interface_ptr + 0x11c))
                    (((_camera_offset_x + pfVar2[-1]) - (float)fVar8 * 9.0) - 30.0,
                     (float)(((float10)(_camera_offset_y + *pfVar2) - fVar9 * (float10)9.0) -
                            (float10)30.0),0x42700000,0x42700000);
        }
        else if (fVar31 == 2.8026e-45) {
          (**(code **)(*grim_interface_ptr + 0x114))
                    (0x3f800000,0x3f800000,0x3f800000,fStack_218 * 0.58);
          uVar15 = 0x42200000;
          uVar17 = 0x42200000;
          fVar8 = (float10)fcos((float10)pfVar2[-3] - (float10)1.5707964);
          iVar6 = *grim_interface_ptr;
          fVar9 = (float10)fsin((float10)pfVar2[-3] - (float10)1.5707964);
          fVar31 = ((_camera_offset_x + pfVar2[-1]) - (float)fVar8 * 9.0) - 20.0;
          fVar8 = ((float10)(_camera_offset_y + *pfVar2) - fVar9 * (float10)9.0) - (float10)20.0;
          goto LAB_00425d30;
        }
      }
      pfVar2 = pfVar2 + 0xb;
    } while ((int)pfVar2 < 0x4965e8);
    (**(code **)(*grim_interface_ptr + 0xf0))();
    (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
  }
  return;
}



/* FUN_00425d80 @ 00425d80 */

int __cdecl FUN_00425d80(int param_1)

{
  char *pcVar1;
  int iVar2;
  
  iVar2 = 0;
  pcVar1 = &creature_pool;
  do {
    if (*pcVar1 != '\0') {
      if (SQRT((*(float *)(pcVar1 + 0x18) - (float)(&creature_pos_y)[param_1 * 0x26]) *
               (*(float *)(pcVar1 + 0x18) - (float)(&creature_pos_y)[param_1 * 0x26]) +
               (*(float *)(pcVar1 + 0x14) - (float)(&creature_pos_x)[param_1 * 0x26]) *
               (*(float *)(pcVar1 + 0x14) - (float)(&creature_pos_x)[param_1 * 0x26])) < 45.0) {
        if (((&creature_collision_flag)[iVar2 * 0x98] != '\0') &&
           ((float)(&creature_health)[param_1 * 0x26] < 150.0)) {
          (&creature_collision_flag)[param_1 * 0x98] = 1;
        }
        if (((&creature_collision_flag)[param_1 * 0x98] != '\0') &&
           ((float)(&creature_health)[iVar2 * 0x26] < 150.0)) {
          (&creature_collision_flag)[iVar2 * 0x98] = 1;
        }
        return iVar2;
      }
    }
    pcVar1 = pcVar1 + 0x98;
    iVar2 = iVar2 + 1;
  } while ((int)pcVar1 < 0x4aa338);
  return 0;
}



/* player_take_damage @ 00425e50 */

/* applies player damage with perk modifiers, SFX, and retaliation effects */

void __cdecl player_take_damage(int player_index,float damage)

{
  float *pfVar1;
  float fVar2;
  bool bVar3;
  int iVar4;
  uint uVar5;
  char *pcVar6;
  bool bVar7;
  float local_c;
  float local_8 [2];
  
  iVar4 = perk_count_get(perk_id_death_clock);
  if (iVar4 != 0) {
    return;
  }
  iVar4 = perk_count_get(perk_id_tough_reloader);
  if ((iVar4 != 0) && ((&player_reload_active)[player_index * 0x360] != '\0')) {
    damage = damage * 0.5;
  }
  survival_reward_damage_seen = 1;
  local_c = 1.0;
  if (0.0 < (float)(&player_shield_timer)[player_index * 0xd8]) {
    survival_reward_damage_seen = 1;
    return;
  }
  bVar7 = player_health <= 0.0;
  iVar4 = perk_count_get(perk_id_thick_skinned);
  if (iVar4 != 0) {
    local_c = 0.666;
  }
  bVar3 = false;
  iVar4 = perk_count_get(perk_id_ninja);
  if (iVar4 == 0) {
    iVar4 = perk_count_get(perk_id_dodger);
    if ((iVar4 != 0) && (iVar4 = _rand(), iVar4 % 5 == 0)) {
      bVar3 = true;
      goto LAB_00425fa1;
    }
  }
  else {
    iVar4 = _rand();
    if (iVar4 % 3 == 0) {
      bVar3 = true;
      goto LAB_00425fa1;
    }
  }
  iVar4 = perk_count_get(perk_id_highlander);
  if (iVar4 == 0) {
    (&player_health)[player_index * 0xd8] = (&player_health)[player_index * 0xd8] - local_c * damage
    ;
  }
  else {
    iVar4 = _rand();
    if (iVar4 % 10 == 0) {
      (&player_health)[player_index * 0xd8] = 0.0;
    }
  }
LAB_00425fa1:
  if (0.0 <= (&player_health)[player_index * 0xd8]) {
    iVar4 = _rand();
    sfx_play_panned((float)(iVar4 % 3 + sfx_trooper_inpain_01));
    if (bVar7) {
      return;
    }
  }
  else {
    (&player_death_timer)[player_index * 0xd8] =
         (float)(&player_death_timer)[player_index * 0xd8] - frame_dt * 28.0;
    if (bVar7) {
      return;
    }
    iVar4 = perk_count_get(perk_id_final_revenge);
    if (iVar4 == 0) {
      uVar5 = _rand();
      uVar5 = uVar5 & 0x80000001;
      if ((int)uVar5 < 0) {
        uVar5 = (uVar5 - 1 | 0xfffffffe) + 1;
      }
      sfx_play_panned((float)(uVar5 + sfx_trooper_die_01));
    }
    else {
      pfVar1 = (float *)(&player_pos_x + player_index * 0xd8);
      FUN_0042f6c0(pfVar1,1.8);
      bonus_spawn_guard = 1;
      iVar4 = 0;
      pcVar6 = &creature_pool;
      do {
        if ((((*pcVar6 != '\0') && (ABS(*(float *)(pcVar6 + 0x14) - *pfVar1) <= 512.0)) &&
            (ABS(*(float *)(pcVar6 + 0x18) - (float)(&player_pos_y)[player_index * 0xd8]) <= 512.0))
           && (fVar2 = 512.0 - SQRT((*(float *)(pcVar6 + 0x14) - *pfVar1) *
                                    (*(float *)(pcVar6 + 0x14) - *pfVar1) +
                                    (*(float *)(pcVar6 + 0x18) -
                                    (float)(&player_pos_y)[player_index * 0xd8]) *
                                    (*(float *)(pcVar6 + 0x18) -
                                    (float)(&player_pos_y)[player_index * 0xd8])), 0.0 < fVar2)) {
          local_8[0] = 0.0;
          local_8[1] = 0.0;
          creature_apply_damage(iVar4,fVar2 * 5.0,3,local_8);
        }
        pcVar6 = pcVar6 + 0x98;
        iVar4 = iVar4 + 1;
      } while ((int)pcVar6 < 0x4aa338);
      bonus_spawn_guard = 0;
      sfx_play_panned(sfx_explosion_large);
      sfx_play_panned(sfx_shockwave);
    }
  }
  if (!bVar3) {
    iVar4 = perk_count_get(perk_id_unstoppable);
    if (iVar4 == 0) {
      iVar4 = _rand();
      (&player_heading)[player_index * 0xd8] =
           (float)(iVar4 % 100 + -0x32) * 0.04 + (float)(&player_heading)[player_index * 0xd8];
      fVar2 = damage * 0.01 + (float)(&player_spread_heat)[player_index * 0xd8];
      (&player_spread_heat)[player_index * 0xd8] = fVar2;
      if (0.48 < fVar2) {
        (&player_spread_heat)[player_index * 0xd8] = 0x3ef5c28f;
      }
    }
    if (((&player_health)[player_index * 0xd8] <= 20.0) && (iVar4 = _rand(), ((byte)iVar4 & 7) == 3)
       ) {
      (&player_low_health_timer)[player_index * 0xd8] = 0;
    }
  }
  return;
}



/* creature_update_all @ 00426220 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* primary creature update loop: AI, movement, attacks, and animation phase */

void creature_update_all(void)

{
  float *pfVar1;
  char *pcVar2;
  float *pfVar3;
  char *pcVar4;
  undefined4 uVar5;
  int iVar6;
  uint uVar7;
  int iVar8;
  char cVar9;
  float10 fVar10;
  float10 fVar11;
  longlong lVar12;
  float *pfVar13;
  float fVar14;
  float *pfVar15;
  float fVar16;
  int local_7c;
  float local_78;
  float local_70;
  float local_6c;
  float local_60;
  float local_50 [12];
  float local_20;
  float local_1c;
  float local_18;
  float local_14;
  float local_10;
  float local_8;
  
  creature_update_tick = creature_update_tick + 1;
  creature_active_count = 0;
  local_7c = 0;
  do {
    if ((&creature_pool)[local_7c * 0x98] != '\0') {
      creature_active_count = creature_active_count + 1;
      if (0.0 < (float)(&creature_hit_flash_timer)[local_7c * 0x26]) {
        (&creature_hit_flash_timer)[local_7c * 0x26] =
             (float)(&creature_hit_flash_timer)[local_7c * 0x26] - frame_dt;
      }
      if (_bonus_freeze_timer <= 0.0) {
        pfVar13 = (float *)(&creature_health + local_7c * 0x26);
        if (((float)(&creature_health)[local_7c * 0x26] <= 0.0) &&
           ((&creature_hitbox_size)[local_7c * 0x26] == 0x41800000)) {
          (&creature_hitbox_size)[local_7c * 0x26] =
               (float)(&creature_hitbox_size)[local_7c * 0x26] - frame_dt;
        }
        if ((*(uint *)(&creature_flags + local_7c * 0x98) & 2) == 0) {
          if ((*(uint *)(&creature_flags + local_7c * 0x98) & 1) != 0) {
            fVar16 = frame_dt * 60.0;
            pfVar15 = local_50 + 2;
            local_50[2] = 0.0;
            local_50[3] = 0.0;
            goto LAB_0042634c;
          }
        }
        else {
          fVar16 = frame_dt * 180.0;
          pfVar15 = local_50;
          local_50[0] = 0.0;
          local_50[1] = 0.0;
LAB_0042634c:
          creature_apply_damage(local_7c,fVar16,0,pfVar15);
        }
        if (((&creature_flags)[local_7c * 0x98] & 0x80) != 0) {
          iVar6 = (&creature_link_index)[local_7c * 0x26];
          if (iVar6 < 0) {
            iVar6 = iVar6 + frame_dt_ms;
            (&creature_link_index)[local_7c * 0x26] = iVar6;
            if (-1 < iVar6) {
              uVar7 = _rand();
              (&creature_ai_mode)[local_7c * 0x26] = 7;
              (&creature_link_index)[local_7c * 0x26] = (uVar7 & 0x1ff) + 500;
            }
          }
          else {
            iVar6 = iVar6 - frame_dt_ms;
            (&creature_link_index)[local_7c * 0x26] = iVar6;
            if (iVar6 < 1) {
              uVar7 = _rand();
              (&creature_link_index)[local_7c * 0x26] = -700 - (uVar7 & 0x3ff);
            }
          }
        }
        if ((*pfVar13 <= 0.0) && ((&creature_hitbox_size)[local_7c * 0x26] == 0x41800000)) {
          (&creature_hitbox_size)[local_7c * 0x26] =
               (float)(&creature_hitbox_size)[local_7c * 0x26] - frame_dt;
        }
        cVar9 = (&creature_target_player)[local_7c * 0x98];
        iVar6 = (int)cVar9;
        pfVar15 = (float *)(&creature_pos_x + local_7c * 0x26);
        iVar8 = iVar6 * 0x360;
        local_78 = SQRT(((&player_pos_y)[iVar6 * 0xd8] - (float)(&creature_pos_y)[local_7c * 0x26])
                        * ((&player_pos_y)[iVar6 * 0xd8] - (float)(&creature_pos_y)[local_7c * 0x26]
                          ) + ((&player_pos_x)[iVar6 * 0xd8] - *pfVar15) *
                              ((&player_pos_x)[iVar6 * 0xd8] - *pfVar15));
        if (creature_update_tick % 0x46 != 0) {
          if (_config_player_count == 2) {
            if ((0.0 < (float)(&player2_health)[iVar6 * -0xd8]) &&
               (local_6c = SQRT(((float)(&player2_pos_y)[iVar6 * -0xd8] -
                                (float)(&creature_pos_y)[local_7c * 0x26]) *
                                ((float)(&player2_pos_y)[iVar6 * -0xd8] -
                                (float)(&creature_pos_y)[local_7c * 0x26]) +
                                ((float)(&player2_pos_x)[iVar6 * -0xd8] - *pfVar15) *
                                ((float)(&player2_pos_x)[iVar6 * -0xd8] - *pfVar15)),
               local_6c < local_78)) {
              (&creature_target_player)[local_7c * 0x98] = '\x01' - cVar9;
              local_78 = local_6c;
            }
          }
          else {
            local_6c = SQRT((player_pos_y - (float)(&creature_pos_y)[local_7c * 0x26]) *
                            (player_pos_y - (float)(&creature_pos_y)[local_7c * 0x26]) +
                            (player_pos_x - *pfVar15) * (player_pos_x - *pfVar15));
          }
          cVar9 = (&creature_target_player)[local_7c * 0x98];
          iVar6 = (int)cVar9;
          iVar8 = iVar6 * 0x360;
          if (local_6c <
              SQRT((player_pos_y -
                   (float)(&creature_pos_y)[(&player_auto_target)[iVar6 * 0xd8] * 0x26]) *
                   (player_pos_y -
                   (float)(&creature_pos_y)[(&player_auto_target)[iVar6 * 0xd8] * 0x26]) +
                   (player_pos_x -
                   (float)(&creature_pos_x)[(&player_auto_target)[iVar6 * 0xd8] * 0x26]) *
                   (player_pos_x -
                   (float)(&creature_pos_x)[(&player_auto_target)[iVar6 * 0xd8] * 0x26]))) {
            (&player_auto_target)[iVar6 * 0xd8] = local_7c;
          }
        }
        if (*(float *)((int)&player_health + iVar8) <= 0.0) {
          (&creature_target_player)[local_7c * 0x98] = '\x01' - cVar9;
        }
        pfVar1 = (float *)(&creature_hitbox_size + local_7c * 0x26);
        if ((&creature_hitbox_size)[local_7c * 0x26] == 0x41800000) {
          pcVar2 = &creature_collision_flag + local_7c * 0x98;
          if ((&creature_collision_flag)[local_7c * 0x98] != '\0') {
            fVar16 = (float)(&creature_collision_timer)[local_7c * 0x26] - frame_dt;
            (&creature_collision_timer)[local_7c * 0x26] = fVar16;
            if (fVar16 < 0.0) {
              (&creature_state_flag)[local_7c * 0x98] = 1;
              (&creature_collision_timer)[local_7c * 0x26] = fVar16 + 0.5;
              fVar16 = *pfVar13;
              *pfVar13 = fVar16 - 15.0;
              if (fVar16 - 15.0 < 0.0) {
                plaguebearer_infection_count = plaguebearer_infection_count + 1;
                creature_handle_death(local_7c,true);
                uVar7 = _rand();
                uVar7 = uVar7 & 0x80000001;
                if ((int)uVar7 < 0) {
                  uVar7 = (uVar7 - 1 | 0xfffffffe) + 1;
                }
                sfx_play_panned(*(float *)(&creature_type_sfx_b0 +
                                          (uVar7 + (&creature_type_id)[local_7c * 0x26] * 0x11) * 4)
                               );
              }
              fx_queue_add_random(pfVar15);
            }
          }
          iVar8 = evil_eyes_target_creature;
          iVar6 = (&creature_phase_seed)[local_7c * 0x26];
          (&creature_force_target)[local_7c * 0x98] = 0;
          local_70 = 1.0;
          fVar16 = (float)iVar6 * 3.7 * 3.1415927;
          if (local_7c != iVar8) {
            iVar6 = (&creature_ai_mode)[local_7c * 0x26];
            if (iVar6 == 0) {
              iVar6 = (int)(char)(&creature_target_player)[local_7c * 0x98];
              if (800.0 < local_78) {
LAB_0042676e:
                uVar5 = (&player_pos_y)[iVar6 * 0xd8];
                (&creature_target_x)[local_7c * 0x26] = (&player_pos_x)[iVar6 * 0xd8];
                (&creature_target_y)[local_7c * 0x26] = uVar5;
              }
              else {
                fVar10 = (float10)fcos((float10)fVar16);
                (&creature_target_x)[local_7c * 0x26] =
                     (float)(fVar10 * (float10)local_78 * (float10)0.85 +
                            (float10)(&player_pos_x)[iVar6 * 0xd8]);
                fVar10 = (float10)fsin((float10)fVar16);
                (&creature_target_y)[local_7c * 0x26] =
                     (float)(fVar10 * (float10)local_78 * (float10)0.85 +
                            (float10)(&player_pos_y)[iVar6 * 0xd8]);
              }
            }
            else if (iVar6 == 8) {
              fVar10 = (float10)fcos((float10)fVar16);
              cVar9 = (&creature_target_player)[local_7c * 0x98];
              (&creature_target_x)[local_7c * 0x26] =
                   (float)(fVar10 * (float10)local_78 * (float10)0.9 +
                          (float10)(&player_pos_x)[cVar9 * 0xd8]);
              fVar10 = (float10)fsin((float10)fVar16);
              (&creature_target_y)[local_7c * 0x26] =
                   (float)(fVar10 * (float10)local_78 * (float10)0.9 +
                          (float10)(&player_pos_y)[cVar9 * 0xd8]);
            }
            else if (iVar6 == 1) {
              iVar6 = (int)(char)(&creature_target_player)[local_7c * 0x98];
              if (800.0 < local_78) goto LAB_0042676e;
              fVar10 = (float10)fcos((float10)fVar16);
              (&creature_target_x)[local_7c * 0x26] =
                   (float)(fVar10 * (float10)local_78 * (float10)0.55 +
                          (float10)(&player_pos_x)[iVar6 * 0xd8]);
              fVar10 = (float10)fsin((float10)fVar16);
              (&creature_target_y)[local_7c * 0x26] =
                   (float)(fVar10 * (float10)local_78 * (float10)0.55 +
                          (float10)(&player_pos_y)[iVar6 * 0xd8]);
            }
            else if (iVar6 == 3) {
              iVar6 = (&creature_link_index)[local_7c * 0x26];
              if ((float)(&creature_health)[iVar6 * 0x26] <= 0.0) {
                (&creature_ai_mode)[local_7c * 0x26] = 0;
              }
              else {
                (&creature_target_x)[local_7c * 0x26] =
                     (float)(&creature_pos_x)[iVar6 * 0x26] +
                     (float)(&creature_target_offset_x)[local_7c * 0x26];
                (&creature_target_y)[local_7c * 0x26] =
                     (float)(&creature_pos_y)[iVar6 * 0x26] +
                     (float)(&creature_target_offset_y)[local_7c * 0x26];
              }
            }
            else if (iVar6 == 5) {
              iVar6 = (&creature_link_index)[local_7c * 0x26];
              if ((float)(&creature_health)[iVar6 * 0x26] <= 0.0) {
                (&creature_ai_mode)[local_7c * 0x26] = 0;
                local_50[4] = 0.0;
                local_50[5] = 0.0;
                creature_apply_damage(local_7c,1000.0,1,local_50 + 4);
              }
              else {
                (&creature_target_x)[local_7c * 0x26] =
                     (float)(&creature_pos_x)[iVar6 * 0x26] +
                     (float)(&creature_target_offset_x)[local_7c * 0x26];
                (&creature_target_y)[local_7c * 0x26] =
                     (float)(&creature_pos_y)[iVar6 * 0x26] +
                     (float)(&creature_target_offset_y)[local_7c * 0x26];
                fVar14 = SQRT(((float)(&creature_target_x)[local_7c * 0x26] - *pfVar15) *
                              ((float)(&creature_target_x)[local_7c * 0x26] - *pfVar15) +
                              ((float)(&creature_target_y)[local_7c * 0x26] -
                              (float)(&creature_pos_y)[local_7c * 0x26]) *
                              ((float)(&creature_target_y)[local_7c * 0x26] -
                              (float)(&creature_pos_y)[local_7c * 0x26]));
                if (fVar14 <= 64.0) {
                  local_70 = fVar14 * 0.015625;
                }
              }
            }
            iVar6 = (&creature_ai_mode)[local_7c * 0x26];
            if (iVar6 == 4) {
              if ((float)(&creature_health)[(&creature_link_index)[local_7c * 0x26] * 0x26] <= 0.0)
              {
                (&creature_ai_mode)[local_7c * 0x26] = 0;
                local_50[6] = 0.0;
                local_50[7] = 0.0;
                creature_apply_damage(local_7c,1000.0,1,local_50 + 6);
              }
              else {
                iVar6 = (int)(char)(&creature_target_player)[local_7c * 0x98];
                if (local_78 <= 800.0) {
                  fVar10 = (float10)fcos((float10)fVar16);
                  (&creature_target_x)[local_7c * 0x26] =
                       (float)(fVar10 * (float10)local_78 * (float10)0.85 +
                              (float10)(&player_pos_x)[iVar6 * 0xd8]);
                  fVar10 = (float10)fsin((float10)fVar16);
                  (&creature_target_y)[local_7c * 0x26] =
                       (float)(fVar10 * (float10)local_78 * (float10)0.85 +
                              (float10)(&player_pos_y)[iVar6 * 0xd8]);
                }
                else {
                  uVar5 = (&player_pos_y)[iVar6 * 0xd8];
                  (&creature_target_x)[local_7c * 0x26] = (&player_pos_x)[iVar6 * 0xd8];
                  (&creature_target_y)[local_7c * 0x26] = uVar5;
                }
              }
            }
            else if (iVar6 == 7) {
              if (((*(uint *)(&creature_flags + local_7c * 0x98) & 0x80) == 0) ||
                 ((int)(&creature_link_index)[local_7c * 0x26] < 1)) {
                if (((float)(&creature_orbit_radius)[local_7c * 0x26] <= 0.0) ||
                   ((*(uint *)(&creature_flags + local_7c * 0x98) & 0x80) != 0)) {
LAB_00426ac8:
                  (&creature_ai_mode)[local_7c * 0x26] = 0;
                }
                else {
                  fVar16 = (float)(&creature_orbit_radius)[local_7c * 0x26] - frame_dt;
                  (&creature_target_x)[local_7c * 0x26] = *pfVar15;
                  (&creature_target_y)[local_7c * 0x26] = (&creature_pos_y)[local_7c * 0x26];
                  (&creature_orbit_radius)[local_7c * 0x26] = fVar16;
                }
              }
              else {
                (&creature_target_x)[local_7c * 0x26] = *pfVar15;
                (&creature_target_y)[local_7c * 0x26] = (&creature_pos_y)[local_7c * 0x26];
              }
            }
            else if (iVar6 == 6) {
              iVar6 = (&creature_link_index)[local_7c * 0x26];
              if ((float)(&creature_health)[iVar6 * 0x26] <= 0.0) goto LAB_00426ac8;
              fVar10 = (float10)fcos((float10)(float)(&creature_orbit_angle)[local_7c * 0x26] +
                                     (float10)(float)(&creature_heading)[local_7c * 0x26]);
              (&creature_target_x)[local_7c * 0x26] =
                   (float)(fVar10 * (float10)(float)(&creature_orbit_radius)[local_7c * 0x26] +
                          (float10)(float)(&creature_pos_x)[iVar6 * 0x26]);
              fVar10 = (float10)fsin((float10)(float)(&creature_orbit_angle)[local_7c * 0x26] +
                                     (float10)(float)(&creature_heading)[local_7c * 0x26]);
              (&creature_target_y)[local_7c * 0x26] =
                   (float)(fVar10 * (float10)(float)(&creature_orbit_radius)[local_7c * 0x26] +
                          (float10)(float)(&creature_pos_y)[iVar6 * 0x26]);
            }
            if (SQRT(((float)(&creature_target_x)[local_7c * 0x26] - *pfVar15) *
                     ((float)(&creature_target_x)[local_7c * 0x26] - *pfVar15) +
                     ((float)(&creature_target_y)[local_7c * 0x26] -
                     (float)(&creature_pos_y)[local_7c * 0x26]) *
                     ((float)(&creature_target_y)[local_7c * 0x26] -
                     (float)(&creature_pos_y)[local_7c * 0x26])) < 40.0) {
              (&creature_force_target)[local_7c * 0x98] = 1;
            }
            if (400.0 < SQRT(((float)(&creature_target_x)[local_7c * 0x26] - *pfVar15) *
                             ((float)(&creature_target_x)[local_7c * 0x26] - *pfVar15) +
                             ((float)(&creature_target_y)[local_7c * 0x26] -
                             (float)(&creature_pos_y)[local_7c * 0x26]) *
                             ((float)(&creature_target_y)[local_7c * 0x26] -
                             (float)(&creature_pos_y)[local_7c * 0x26]))) {
              (&creature_force_target)[local_7c * 0x98] = 1;
            }
            if (((&creature_force_target)[local_7c * 0x98] != '\0') ||
               ((&creature_ai_mode)[local_7c * 0x26] == 2)) {
              cVar9 = (&creature_target_player)[local_7c * 0x98];
              (&creature_target_x)[local_7c * 0x26] = (&player_pos_x)[cVar9 * 0xd8];
              (&creature_target_y)[local_7c * 0x26] = (&player_pos_y)[cVar9 * 0xd8];
            }
            fVar10 = (float10)fpatan((float10)(float)(&creature_target_y)[local_7c * 0x26] -
                                     (float10)(float)(&creature_pos_y)[local_7c * 0x26],
                                     (float10)(float)(&creature_target_x)[local_7c * 0x26] -
                                     (float10)*pfVar15);
            (&creature_target_heading)[local_7c * 0x26] = (float)(fVar10 + (float10)1.5707964);
            if (((0.0 < _bonus_energizer_timer) &&
                ((float)(&creature_max_health)[local_7c * 0x26] < 500.0)) || (*pcVar2 != '\0')) {
              (&creature_target_heading)[local_7c * 0x26] =
                   (float)(fVar10 + (float10)1.5707964 + (float10)3.1415927);
            }
            uVar7 = *(uint *)(&creature_flags + local_7c * 0x98);
            if ((uVar7 & 4) == 0) {
              if ((&creature_ai_mode)[local_7c * 0x26] != 7) {
                angle_approach((float *)(&creature_heading + local_7c * 0x26),
                               (float)(&creature_target_heading)[local_7c * 0x26],
                               (float)(&creature_move_speed)[local_7c * 0x26] * 0.33333334 * 4.0);
                fVar10 = (float10)(float)(&creature_heading)[local_7c * 0x26] - (float10)1.5707964;
                fVar11 = (float10)fcos(fVar10);
                (&creature_vel_x)[local_7c * 0x26] =
                     (float)(fVar11 * (float10)frame_dt * (float10)local_70 *
                             (float10)(float)(&creature_move_speed)[local_7c * 0x26] * (float10)30.0
                            );
                fVar10 = (float10)fsin(fVar10);
                (&creature_vel_y)[local_7c * 0x26] =
                     (float)(fVar10 * (float10)frame_dt * (float10)local_70 *
                             (float10)(float)(&creature_move_speed)[local_7c * 0x26] * (float10)30.0
                            );
                vec2_add_inplace(local_7c,pfVar15,(float *)(&creature_vel_x + local_7c * 0x26));
              }
            }
            else {
              if (*pfVar15 < (float)(&creature_size)[local_7c * 0x26]) {
                *pfVar15 = (float)(&creature_size)[local_7c * 0x26];
              }
              if ((float)(&creature_pos_y)[local_7c * 0x26] <
                  (float)(&creature_size)[local_7c * 0x26]) {
                (&creature_pos_y)[local_7c * 0x26] = (&creature_size)[local_7c * 0x26];
              }
              fVar16 = 1024.0 - (float)(&creature_size)[local_7c * 0x26];
              if (fVar16 < *pfVar15) {
                *pfVar15 = fVar16;
              }
              if (fVar16 < (float)(&creature_pos_y)[local_7c * 0x26]) {
                (&creature_pos_y)[local_7c * 0x26] = fVar16;
              }
              if ((uVar7 & 0x40) == 0) {
                (&creature_vel_y)[local_7c * 0x26] = 0;
                (&creature_vel_x)[local_7c * 0x26] = 0;
              }
              else {
                angle_approach((float *)(&creature_heading + local_7c * 0x26),
                               (float)(&creature_target_heading)[local_7c * 0x26],
                               (float)(&creature_move_speed)[local_7c * 0x26] * 0.33333334 * 4.0);
                fVar10 = (float10)(float)(&creature_heading)[local_7c * 0x26] - (float10)1.5707964;
                fVar11 = (float10)fcos(fVar10);
                (&creature_vel_x)[local_7c * 0x26] =
                     (float)(fVar11 * (float10)frame_dt * (float10)local_70 *
                             (float10)(float)(&creature_move_speed)[local_7c * 0x26] * (float10)30.0
                            );
                fVar10 = (float10)fsin(fVar10);
                (&creature_vel_y)[local_7c * 0x26] =
                     (float)(fVar10 * (float10)frame_dt * (float10)local_70 *
                             (float10)(float)(&creature_move_speed)[local_7c * 0x26] * (float10)30.0
                            );
                vec2_add_inplace(local_7c,pfVar15,(float *)(&creature_vel_x + local_7c * 0x26));
              }
              iVar6 = (&creature_link_index)[local_7c * 0x26];
              fVar16 = (float)(&creature_spawn_slot_timer)[iVar6 * 6] - frame_dt;
              (&creature_spawn_slot_timer)[iVar6 * 6] = fVar16;
              if (fVar16 < 0.0) {
                (&creature_spawn_slot_timer)[iVar6 * 6] =
                     fVar16 + (float)(&creature_spawn_slot_interval)[iVar6 * 6];
                if ((int)(&creature_spawn_slot_count)[iVar6 * 6] <
                    (int)(&creature_spawn_slot_limit)[iVar6 * 6]) {
                  (&creature_spawn_slot_count)[iVar6 * 6] =
                       (&creature_spawn_slot_count)[iVar6 * 6] + 1;
                  creature_spawn_template
                            (*(int *)(&creature_spawn_slot_template + iVar6 * 0x18),pfVar15,-100.0);
                }
              }
            }
            iVar6 = perk_count_get(perk_id_plaguebearer);
            if ((iVar6 != 0) && (plaguebearer_infection_count < 0x3c)) {
              FUN_00425d80(local_7c);
            }
            if (((*(uint *)(&creature_flags + local_7c * 0x98) & 4) == 0) ||
               ((*(uint *)(&creature_flags + local_7c * 0x98) & 0x40) != 0)) {
              if ((&creature_ai_mode)[local_7c * 0x26] != 7) {
                fVar16 = *(float *)(&creature_type_anim_rate +
                                   (&creature_type_id)[local_7c * 0x26] * 0x44) *
                         (float)(&creature_move_speed)[local_7c * 0x26] * frame_dt *
                         (30.0 / (float)(&creature_size)[local_7c * 0x26]) * local_70 * 25.0 +
                         (float)(&creature_anim_phase)[local_7c * 0x26];
                (&creature_anim_phase)[local_7c * 0x26] = fVar16;
                while (31.0 < fVar16) {
                  fVar16 = (float)(&creature_anim_phase)[local_7c * 0x26] - 31.0;
                  (&creature_anim_phase)[local_7c * 0x26] = fVar16;
                }
              }
            }
            else {
              fVar16 = *(float *)(&creature_type_anim_rate +
                                 (&creature_type_id)[local_7c * 0x26] * 0x44) *
                       (float)(&creature_move_speed)[local_7c * 0x26] * frame_dt *
                       (30.0 / (float)(&creature_size)[local_7c * 0x26]) * local_70 * 22.0 +
                       (float)(&creature_anim_phase)[local_7c * 0x26];
              (&creature_anim_phase)[local_7c * 0x26] = fVar16;
              if (15.0 < fVar16) {
                fVar16 = (float)(&creature_anim_phase)[local_7c * 0x26];
                do {
                  fVar16 = fVar16 - 15.0;
                } while (15.0 < fVar16);
                (&creature_anim_phase)[local_7c * 0x26] = fVar16;
              }
            }
            pfVar3 = (float *)(&creature_attack_cooldown + local_7c * 0x26);
            if ((float)(&creature_attack_cooldown)[local_7c * 0x26] <= 0.0) {
              *pfVar3 = 0.0;
            }
            else {
              *pfVar3 = *pfVar3 - frame_dt;
            }
            pcVar4 = &creature_target_player + local_7c * 0x98;
            fVar16 = SQRT((*pfVar15 -
                          (&player_pos_x)[(char)(&creature_target_player)[local_7c * 0x98] * 0xd8])
                          * (*pfVar15 -
                            (&player_pos_x)[(char)(&creature_target_player)[local_7c * 0x98] * 0xd8]
                            ) + ((float)(&creature_pos_y)[local_7c * 0x26] -
                                (&player_pos_y)
                                [(char)(&creature_target_player)[local_7c * 0x98] * 0xd8]) *
                                ((float)(&creature_pos_y)[local_7c * 0x26] -
                                (&player_pos_y)
                                [(char)(&creature_target_player)[local_7c * 0x98] * 0xd8]));
            if ((((fVar16 < 100.0) && (iVar6 = perk_count_get(perk_id_radioactive), iVar6 != 0)) &&
                (fVar14 = (float)(&creature_collision_timer)[local_7c * 0x26] - frame_dt * 1.5,
                (&creature_collision_timer)[local_7c * 0x26] = fVar14, fVar14 < 0.0)) &&
               (0.0 < *pfVar13)) {
              (&creature_collision_timer)[local_7c * 0x26] = 0x3f000000;
              (&creature_state_flag)[local_7c * 0x98] = 1;
              fVar14 = *pfVar13 - (100.0 - fVar16) * 0.3;
              *pfVar13 = fVar14;
              if (fVar14 < 0.0) {
                if ((&creature_type_id)[local_7c * 0x26] == 1) {
                  *pfVar13 = 1.0;
                }
                else {
                  lVar12 = __ftol();
                  player_experience = (undefined4)lVar12;
                  *pfVar1 = *pfVar1 - frame_dt;
                }
              }
              fx_queue_add_random(pfVar15);
            }
            if (64.0 < fVar16) {
              if ((((&creature_flags)[local_7c * 0x98] & 0x10) != 0) && (*pfVar3 <= 0.0)) {
                projectile_spawn(pfVar15,(float)(&creature_heading)[local_7c * 0x26],9,local_7c);
                fVar14 = sfx_shock_fire;
                *pfVar3 = *pfVar3 + 1.0;
                sfx_play_panned(fVar14);
              }
              if (((*(uint *)(&creature_flags + local_7c * 0x98) & 0x100) != 0) && (*pfVar3 <= 0.0))
              {
                projectile_spawn(pfVar15,(float)(&creature_heading)[local_7c * 0x26],
                                 (&creature_orbit_radius)[local_7c * 0x26],local_7c);
                uVar7 = _rand();
                fVar14 = sfx_plasmaminigun_fire;
                local_60 = (float)(uVar7 & 3);
                *pfVar3 = (float)(int)local_60 * 0.1 +
                          (float)(&creature_orbit_angle)[local_7c * 0x26] + *pfVar3;
                sfx_play_panned(fVar14);
              }
            }
            if (fVar16 < 20.0) {
              *pfVar15 = *pfVar15 - (float)(&creature_vel_x)[local_7c * 0x26];
              (&creature_pos_y)[local_7c * 0x26] =
                   (float)(&creature_pos_y)[local_7c * 0x26] -
                   (float)(&creature_vel_y)[local_7c * 0x26];
              if (((float)(&creature_max_health)[local_7c * 0x26] < 380.0) &&
                 (0.0 < _bonus_energizer_timer)) {
                lVar12 = __ftol();
                player_experience = (undefined4)lVar12;
                effect_spawn_burst(pfVar15,6);
                sfx_play_panned(sfx_ui_bonus);
                bonus_spawn_guard = 1;
                creature_handle_death(local_7c,false);
                bonus_spawn_guard = 0;
              }
            }
            if (16.0 < (float)(&creature_size)[local_7c * 0x26]) {
              if (30.0 <= fVar16) goto LAB_004276d6;
              if ((0.0 < (float)(&player_health)[*pcVar4 * 0xd8]) && (_bonus_energizer_timer <= 0.0)
                 ) {
                if (*pfVar3 <= 0.0) {
                  uVar7 = _rand();
                  uVar7 = uVar7 & 0x80000001;
                  if ((int)uVar7 < 0) {
                    uVar7 = (uVar7 - 1 | 0xfffffffe) + 1;
                  }
                  sfx_play_panned(*(float *)(&creature_type_sfx_b0 +
                                            (uVar7 + (&creature_type_id)[local_7c * 0x26] * 0x11) *
                                            4));
                  iVar6 = perk_count_get(perk_id_mr_melee);
                  if (iVar6 != 0) {
                    local_50[8] = 0.0;
                    local_50[9] = 0.0;
                    creature_apply_damage(local_7c,25.0,2,local_50 + 8);
                  }
                  if ((float)(&player_shield_timer)[*pcVar4 * 0xd8] <= 0.0) {
                    iVar6 = perk_count_get(perk_id_toxic_avenger);
                    if (iVar6 == 0) {
                      iVar6 = perk_count_get(perk_id_veins_of_poison);
                      if (iVar6 == 0) goto LAB_0042733a;
                      uVar7 = *(uint *)(&creature_flags + local_7c * 0x98) | 1;
                    }
                    else {
                      uVar7 = *(uint *)(&creature_flags + local_7c * 0x98) | 3;
                    }
                    *(uint *)(&creature_flags + local_7c * 0x98) = uVar7;
                  }
LAB_0042733a:
                  player_take_damage((int)*pcVar4,(float)(&creature_contact_damage)[local_7c * 0x26]
                                    );
                  thunk_FUN_00452f1d();
                  local_50[9] = (float)pcVar2 * 3.0 + (&player_pos_y)[*pcVar4 * 0xd8];
                  local_50[8] = local_60 * 3.0 + (&player_pos_x)[*pcVar4 * 0xd8];
                  fx_queue_add_random(local_50 + 8);
                  *pfVar3 = *pfVar3 + 1.0;
                }
                if ((((&player_plaguebearer_active)[*pcVar4 * 0x360] != '\0') && (*pfVar13 < 150.0))
                   && (plaguebearer_infection_count < 0x32)) {
                  *pcVar2 = '\x01';
                }
              }
            }
            if ((fVar16 < 30.0) && ((float)(&creature_size)[local_7c * 0x26] <= 30.0)) {
              *pfVar13 = 0.0;
              *pfVar1 = *pfVar1 - frame_dt;
            }
          }
        }
        else if (*pfVar1 <= 0.0) {
          *pfVar1 = *pfVar1 - frame_dt * 20.0;
        }
        else {
          fVar16 = *pfVar1 - frame_dt * 28.0;
          *pfVar1 = fVar16;
          if (0.0 < fVar16) {
            if (((*(uint *)(&creature_flags + local_7c * 0x98) & 4) == 0) ||
               ((*(uint *)(&creature_flags + local_7c * 0x98) & 0x40) != 0)) {
              fVar10 = (float10)fcos((float10)(float)(&creature_heading)[local_7c * 0x26] -
                                     (float10)1.5707964);
              (&creature_vel_x)[local_7c * 0x26] =
                   (float)(fVar10 * (float10)fVar16 * (float10)frame_dt * (float10)9.0);
              fVar10 = (float10)fsin((float10)(float)(&creature_heading)[local_7c * 0x26] -
                                     (float10)1.5707964);
              (&creature_vel_y)[local_7c * 0x26] =
                   (float)(fVar10 * (float10)fVar16 * (float10)frame_dt * (float10)9.0);
              *pfVar15 = *pfVar15 - (float)(&creature_vel_x)[local_7c * 0x26];
              (&creature_pos_y)[local_7c * 0x26] =
                   (float)(&creature_pos_y)[local_7c * 0x26] -
                   (float)(&creature_vel_y)[local_7c * 0x26];
            }
            else {
              (&creature_vel_x)[local_7c * 0x26] = 0;
              (&creature_vel_y)[local_7c * 0x26] = 0;
            }
          }
          else {
            if (config_fx_toggle == '\0') {
              if (((*(uint *)(&creature_flags + local_7c * 0x98) & 4) == 0) ||
                 ((*(uint *)(&creature_flags + local_7c * 0x98) & 0x40) != 0)) {
                local_8 = (float)(&creature_size)[local_7c * 0x26] * 0.5;
                iVar6 = (&creature_type_id)[local_7c * 0x26];
                fVar16 = (float)(&creature_size)[local_7c * 0x26];
                fVar14 = (float)(&creature_heading)[local_7c * 0x26];
                local_18 = *pfVar15 - local_8;
                pfVar13 = &local_18;
                local_14 = (float)(&creature_pos_y)[local_7c * 0x26] - local_8;
              }
              else {
                local_10 = (float)(&creature_size)[local_7c * 0x26] * 0.5;
                fVar16 = (float)(&creature_size)[local_7c * 0x26];
                fVar14 = (float)(&creature_heading)[local_7c * 0x26];
                iVar6 = 7;
                local_20 = *pfVar15 - local_10;
                pfVar13 = &local_20;
                local_1c = (float)(&creature_pos_y)[local_7c * 0x26] - local_10;
              }
              iVar6 = fx_queue_add_rotated
                                (pfVar13,(float *)(&creature_tint_r + local_7c * 0x26),fVar14,fVar16
                                 ,iVar6);
              if ((char)iVar6 == '\0') {
                *pfVar1 = 0.001;
                goto LAB_004276d6;
              }
            }
            creature_kill_count = creature_kill_count + 1;
            if ((config_fx_toggle == '\0') && (((&creature_flags)[local_7c * 0x98] & 4) != 0)) {
              iVar6 = 8;
              do {
                fVar16 = 0.0;
                iVar8 = _rand();
                FUN_0042eb10(pfVar15,(float)(iVar8 % 0x264) * 0.01,fVar16);
                iVar6 = iVar6 + -1;
              } while (iVar6 != 0);
              iVar6 = 6;
              do {
                fVar16 = -0.07;
                iVar8 = _rand();
                FUN_0042eb10(pfVar15,(float)(iVar8 % 0x264) * 0.01,fVar16);
                iVar6 = iVar6 + -1;
              } while (iVar6 != 0);
              iVar6 = 5;
              do {
                fVar16 = -0.12;
                iVar8 = _rand();
                FUN_0042eb10(pfVar15,(float)(iVar8 % 0x264) * 0.01,fVar16);
                iVar6 = iVar6 + -1;
              } while (iVar6 != 0);
            }
            if (*(float *)(DAT_0048085c + 0xc) == 0.0) {
              (&creature_pool)[local_7c * 0x98] = 0;
            }
          }
        }
      }
    }
LAB_004276d6:
    local_7c = local_7c + 1;
    if (0x17f < local_7c) {
      return;
    }
  } while( true );
}



/* fx_queue_add_random @ 00427700 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* spawns a random fx_queue_add entry (effect ids 3..7) with grayscale color/size */

void __cdecl fx_queue_add_random(float *pos)

{
  uint uVar1;
  int iVar2;
  float *pos_00;
  float w;
  float h;
  float rotation;
  float *rgba;
  float local_8;
  float local_4;
  
  if (config_fx_toggle == '\0') {
    if ((DAT_004912b0 & 1) == 0) {
      DAT_004912b0 = DAT_004912b0 | 1;
      _fx_queue_random_color_r = 0.9;
      _fx_queue_random_color_g = 0.9;
      _fx_queue_random_color_b = 0.9;
      _fx_queue_random_color_a = 0x3f47ae14;
      crt_atexit(&DAT_00427830);
    }
    uVar1 = _rand();
    _fx_queue_random_color_r = (float)(uVar1 & 0xf) * 0.01 + 0.84;
    _fx_queue_random_color_g = _fx_queue_random_color_r;
    _fx_queue_random_color_b = _fx_queue_random_color_r;
    iVar2 = _rand();
    w = (float)(iVar2 % 0x18 + -0xc) + 30.0;
    iVar2 = _rand();
    rgba = (float *)&fx_queue_random_color_r;
    rotation = (float)(iVar2 % 0x274) * 0.01;
    local_8 = *pos - w * 0.5;
    local_4 = pos[1] - w * 0.5;
    pos_00 = &local_8;
    h = w;
    iVar2 = _rand();
    fx_queue_add(iVar2 % 5 + 3,pos_00,w,h,rotation,rgba);
  }
  return;
}



/* fx_queue_add_rotated @ 00427840 */

/* pushes a rotated sprite into DAT_004aaf3c (capped at 0x40); returns 1 on success */

int __cdecl fx_queue_add_rotated(float *pos,float *rgba,float rotation,float scale,int effect_id)

{
  undefined4 in_EAX;
  float fVar1;
  uint3 uVar2;
  
  uVar2 = (uint3)((uint)in_EAX >> 8);
  fVar1 = (float)CONCAT31(uVar2,terrain_texture_failed);
  if (terrain_texture_failed == '\0') {
    if (fx_queue_rotated == 0x3f) {
      return (uint)uVar2 << 8;
    }
    (&fx_rotated_color_r)[fx_queue_rotated * 4] = *rgba;
    (&fx_rotated_color_g)[fx_queue_rotated * 4] = rgba[1];
    (&fx_rotated_color_b)[fx_queue_rotated * 4] = rgba[2];
    (&fx_rotated_color_a)[fx_queue_rotated * 4] = rgba[3];
    if (*(float *)(DAT_00480860 + 0xc) == 0.0) {
      fVar1 = (float)(&fx_rotated_color_a)[fx_queue_rotated * 4] * 0.8;
    }
    else {
      fVar1 = (1.0 / *(float *)(DAT_00480860 + 0xc)) *
              (float)(&fx_rotated_color_a)[fx_queue_rotated * 4];
    }
    (&fx_rotated_color_a)[fx_queue_rotated * 4] = fVar1;
    (&fx_rotated_rotation)[fx_queue_rotated] = rotation;
    (&fx_rotated_effect_id)[fx_queue_rotated] = effect_id;
    (&fx_rotated_scale)[fx_queue_rotated] = scale;
    (&fx_rotated_pos_x)[fx_queue_rotated * 2] = *pos;
    fVar1 = pos[1];
    (&fx_rotated_pos_y)[fx_queue_rotated * 2] = fVar1;
    fx_queue_rotated = fx_queue_rotated + 1;
    if (0x3f < fx_queue_rotated) {
      fx_queue_rotated = 0x3f;
    }
  }
  return CONCAT31((int3)((uint)fVar1 >> 8),1);
}



/* fx_queue_render @ 00427920 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* renders DAT_004aaf18/DAT_004aaf3c queues and clears them */

void fx_queue_render(void)

{
  int iVar1;
  float *pfVar2;
  int iVar3;
  undefined4 *puVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  
  if (terrain_texture_failed == '\0') {
    if ((fx_queue_rotated != 0) || (fx_queue_count != 0)) {
      (**(code **)(*grim_interface_ptr + 0x30))(terrain_render_target);
      (**(code **)(*grim_interface_ptr + 0xc4))(particles_texture,0);
      if (0 < fx_queue_count) {
        (**(code **)(*grim_interface_ptr + 0xe8))();
        fVar7 = 1.0;
        (**(code **)(*grim_interface_ptr + 0x100))(0,0,0x3f800000,0x3f800000);
        iVar3 = 0;
        if (0 < fx_queue_count) {
          puVar4 = &fx_queue_rotation;
          do {
            (**(code **)(*grim_interface_ptr + 0x110))(puVar4 + 5);
            (**(code **)(*grim_interface_ptr + 0xfc))(*puVar4);
            effect_select_texture(puVar4[-1]);
            (**(code **)(*grim_interface_ptr + 0x11c))
                      (((float)puVar4[1] - (float)puVar4[4] * 0.5) * fVar7,
                       ((float)puVar4[2] - (float)puVar4[3] * 0.5) * fVar7,fVar7 * (float)puVar4[4],
                       fVar7 * (float)puVar4[3]);
            iVar3 = iVar3 + 1;
            puVar4 = puVar4 + 10;
          } while (iVar3 < fx_queue_count);
        }
        (**(code **)(*grim_interface_ptr + 0xf0))();
      }
      if (0 < fx_queue_rotated) {
        (**(code **)(*grim_interface_ptr + 0xc4))(bodyset_texture,0);
        (**(code **)(*grim_interface_ptr + 0x20))(0x13,1);
        (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
        (**(code **)(*grim_interface_ptr + 0xe8))();
        iVar3 = 0;
        if (0 < fx_queue_rotated) {
          pfVar2 = (float *)&fx_rotated_pos_x;
          puVar4 = &fx_rotated_color_b;
          do {
            iVar1 = *(int *)(&creature_type_corpse_frame + (&fx_rotated_effect_id)[iVar3] * 0x44);
            DAT_004965d8 = (float)(&effect_uv4_u)[iVar1 * 2];
            DAT_004965dc = (float)(&effect_uv4_v)[iVar1 * 2];
            _DAT_004965e0 = (float)(&effect_uv4_u)[iVar1 * 2] + 0.25;
            _DAT_004965e4 = (float)(&effect_uv4_v)[iVar1 * 2] + 0.25;
            fVar6 = DAT_004965d8;
            (**(code **)(*grim_interface_ptr + 0x100))
                      (DAT_004965d8,DAT_004965dc,_DAT_004965e0,_DAT_004965e4);
            fVar7 = (float)puVar4[1] * 0.5;
            (**(code **)(*grim_interface_ptr + 0x114))(puVar4[-2],puVar4[-1],*puVar4,fVar7);
            (**(code **)(*grim_interface_ptr + 0xfc))
                      ((float)(&fx_rotated_rotation)[iVar3] - 1.5707964);
            DAT_004965d8 = *pfVar2 - 0.5;
            DAT_004965dc = pfVar2[1] - 0.5;
            fVar5 = fVar7 * (float)(&fx_rotated_scale)[iVar3] * 1.064;
            (**(code **)(*grim_interface_ptr + 0x11c))
                      (DAT_004965d8 * fVar7 - fVar6,DAT_004965dc * fVar7 - fVar6,fVar5,fVar5);
            iVar3 = iVar3 + 1;
            puVar4 = puVar4 + 4;
            pfVar2 = pfVar2 + 2;
          } while (iVar3 < fx_queue_rotated);
        }
        (**(code **)(*grim_interface_ptr + 0xf0))();
        (**(code **)(*grim_interface_ptr + 0x20))(0x13,5);
        (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
        (**(code **)(*grim_interface_ptr + 0xe8))();
        iVar3 = 0;
        if (0 < fx_queue_rotated) {
          pfVar2 = (float *)&fx_rotated_pos_x;
          puVar4 = &fx_rotated_color_b;
          do {
            iVar1 = *(int *)(&creature_type_corpse_frame + (&fx_rotated_effect_id)[iVar3] * 0x44);
            DAT_004965d8 = (float)(&effect_uv4_u)[iVar1 * 2];
            DAT_004965dc = (float)(&effect_uv4_v)[iVar1 * 2];
            _DAT_004965e0 = (float)(&effect_uv4_u)[iVar1 * 2] + 0.25;
            _DAT_004965e4 = (float)(&effect_uv4_v)[iVar1 * 2] + 0.25;
            fVar5 = DAT_004965d8;
            (**(code **)(*grim_interface_ptr + 0x100))
                      (DAT_004965d8,DAT_004965dc,_DAT_004965e0,_DAT_004965e4);
            fVar7 = (float)puVar4[1];
            (**(code **)(*grim_interface_ptr + 0x114))(puVar4[-2],puVar4[-1],*puVar4,fVar7);
            (**(code **)(*grim_interface_ptr + 0xfc))
                      ((float)(&fx_rotated_rotation)[iVar3] - 1.5707964);
            (**(code **)(*grim_interface_ptr + 0x11c))
                      (fVar7 * *pfVar2 - fVar5,fVar7 * pfVar2[1] - fVar5,
                       fVar7 * (float)(&fx_rotated_scale)[iVar3],
                       fVar7 * (float)(&fx_rotated_scale)[iVar3]);
            iVar3 = iVar3 + 1;
            puVar4 = puVar4 + 4;
            pfVar2 = pfVar2 + 2;
          } while (iVar3 < fx_queue_rotated);
        }
        (**(code **)(*grim_interface_ptr + 0xf0))();
      }
      fx_queue_count = 0;
      fx_queue_rotated = 0;
      (**(code **)(*grim_interface_ptr + 0x30))(0xffffffff);
    }
  }
  else if (0 < fx_queue_rotated) {
    (**(code **)(*grim_interface_ptr + 0xc4))(bodyset_texture,0);
    (**(code **)(*grim_interface_ptr + 0x20))(0x13,1);
    (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
    (**(code **)(*grim_interface_ptr + 0xe8))();
    iVar3 = 0;
    if (0 < fx_queue_rotated) {
      pfVar2 = (float *)&fx_rotated_pos_x;
      puVar4 = &fx_rotated_color_b;
      do {
        iVar1 = *(int *)(&creature_type_corpse_frame + (&fx_rotated_effect_id)[iVar3] * 0x44);
        DAT_004965d8 = (float)(&effect_uv4_u)[iVar1 * 2];
        DAT_004965dc = (float)(&effect_uv4_v)[iVar1 * 2];
        _DAT_004965e0 = (float)(&effect_uv4_u)[iVar1 * 2] + 0.25;
        _DAT_004965e4 = (float)(&effect_uv4_v)[iVar1 * 2] + 0.25;
        (**(code **)(*grim_interface_ptr + 0x100))
                  (DAT_004965d8,DAT_004965dc,_DAT_004965e0,_DAT_004965e4);
        (**(code **)(*grim_interface_ptr + 0x114))
                  (puVar4[-2],puVar4[-1],*puVar4,(float)puVar4[1] * 0.5);
        (**(code **)(*grim_interface_ptr + 0xfc))((float)(&fx_rotated_rotation)[iVar3] - 1.5707964);
        DAT_004965d8 = *pfVar2 + 2.0;
        DAT_004965dc = pfVar2[1] + 2.0;
        (**(code **)(*grim_interface_ptr + 0x11c))
                  (DAT_004965d8 + _camera_offset_x,DAT_004965dc + _camera_offset_y,
                   (float)(&fx_rotated_scale)[iVar3] * 1.04,(float)(&fx_rotated_scale)[iVar3] * 1.04
                  );
        iVar3 = iVar3 + 1;
        puVar4 = puVar4 + 4;
        pfVar2 = pfVar2 + 2;
      } while (iVar3 < fx_queue_rotated);
    }
    (**(code **)(*grim_interface_ptr + 0xf0))();
    (**(code **)(*grim_interface_ptr + 0x20))(0x13,5);
    (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
    (**(code **)(*grim_interface_ptr + 0xe8))();
    iVar3 = 0;
    if (0 < fx_queue_rotated) {
      pfVar2 = (float *)&fx_rotated_pos_x;
      puVar4 = &fx_rotated_color_b;
      do {
        iVar1 = *(int *)(&creature_type_corpse_frame + (&fx_rotated_effect_id)[iVar3] * 0x44);
        DAT_004965d8 = (float)(&effect_uv4_u)[iVar1 * 2];
        DAT_004965dc = (float)(&effect_uv4_v)[iVar1 * 2];
        _DAT_004965e0 = (float)(&effect_uv4_u)[iVar1 * 2] + 0.25;
        _DAT_004965e4 = (float)(&effect_uv4_v)[iVar1 * 2] + 0.25;
        (**(code **)(*grim_interface_ptr + 0x100))
                  (DAT_004965d8,DAT_004965dc,_DAT_004965e0,_DAT_004965e4);
        (**(code **)(*grim_interface_ptr + 0x114))(puVar4[-2],puVar4[-1],*puVar4,puVar4[1]);
        (**(code **)(*grim_interface_ptr + 0xfc))((float)(&fx_rotated_rotation)[iVar3] - 1.5707964);
        (**(code **)(*grim_interface_ptr + 0x11c))
                  (_camera_offset_x + *pfVar2,_camera_offset_y + pfVar2[1],
                   (&fx_rotated_scale)[iVar3],(&fx_rotated_scale)[iVar3]);
        iVar3 = iVar3 + 1;
        puVar4 = puVar4 + 4;
        pfVar2 = pfVar2 + 2;
      } while (iVar3 < fx_queue_rotated);
    }
    (**(code **)(*grim_interface_ptr + 0xf0))();
    return;
  }
  return;
}



/* creature_alloc_slot @ 00428140 */

/* finds a free creature entry in DAT_0049bf38 and seeds defaults */

int creature_alloc_slot(void)

{
  char *pcVar1;
  uint uVar2;
  int iVar3;
  
  iVar3 = 0;
  pcVar1 = &creature_pool;
  do {
    if (*pcVar1 == '\0') {
      *(undefined4 *)(&creature_flags + iVar3 * 0x98) = 0;
      uVar2 = _rand();
      (&creature_phase_seed)[iVar3 * 0x26] = uVar2 & 0x17f;
      (&DAT_0049bfac)[iVar3 * 0x26] = 0;
      (&creature_anim_phase)[iVar3 * 0x26] = 0;
      creature_spawned_count = creature_spawned_count + 1;
      return iVar3;
    }
    pcVar1 = pcVar1 + 0x98;
    iVar3 = iVar3 + 1;
  } while ((int)pcVar1 < 0x4aa338);
  if (*(float *)(DAT_00480864 + 0xc) != 0.0) {
    console_printf(&console_log_queue,(byte *)s_No_free_creatures_to_spawn__00473e6c);
  }
  return 0x180;
}



/* FUN_004281e0 @ 004281e0 */

void FUN_004281e0(void)

{
  byte *pbVar1;
  
  pbVar1 = &creature_flags;
  do {
    pbVar1[-0x8c] = 0;
    if ((*pbVar1 & 4) != 0) {
      (&creature_spawn_slot_owner)[*(int *)(pbVar1 + -0x14) * 6] = 0;
    }
    pbVar1 = pbVar1 + 0x98;
  } while ((int)pbVar1 < 0x4aa3c4);
  return;
}



/* creatures_none_active @ 00428210 */

/* returns low byte 1 when no active creature entries exist (0 otherwise); sets DAT_0048700c */

uint creatures_none_active(void)

{
  char *pcVar1;
  
  pcVar1 = &creature_pool;
  do {
    if (*pcVar1 != '\0') {
      creatures_any_active_flag = 0;
      return (uint)pcVar1 & 0xffffff00;
    }
    pcVar1 = pcVar1 + 0x98;
  } while ((int)pcVar1 < 0x4aa338);
  creatures_any_active_flag = 1;
  return CONCAT31((int3)((uint)pcVar1 >> 8),1);
}



/* creature_spawn @ 00428240 */

/* allocates a creature slot and seeds position, type, and tint defaults */

int __cdecl creature_spawn(float *pos,float *tint_rgba,int type_id)

{
  float fVar1;
  int iVar2;
  int iVar3;
  
  iVar2 = creature_alloc_slot();
  iVar3 = iVar2 * 0x98;
  (&creature_pos_x)[iVar2 * 0x26] = *pos;
  (&creature_pos_y)[iVar2 * 0x26] = pos[1];
  (&creature_type_id)[iVar2 * 0x26] = type_id;
  (&creature_ai_mode)[iVar2 * 0x26] = 0;
  (&creature_collision_flag)[iVar3] = 0;
  (&creature_collision_timer)[iVar2 * 0x26] = 0;
  (&creature_pool)[iVar3] = 1;
  (&creature_force_target)[iVar3] = 0;
  (&creature_state_flag)[iVar3] = 1;
  (&creature_hitbox_size)[iVar2 * 0x26] = 0x41800000;
  fVar1 = (float)survival_elapsed_ms;
  (&creature_vel_x)[iVar2 * 0x26] = 0;
  (&creature_vel_y)[iVar2 * 0x26] = 0;
  (&creature_health)[iVar2 * 0x26] = fVar1 * 0.000100000005 + 10.0;
  iVar3 = _rand();
  (&creature_heading)[iVar2 * 0x26] = (float)(iVar3 % 0x13a) * 0.01;
  (&creature_move_speed)[iVar2 * 0x26] = (float)survival_elapsed_ms * 1.0000001e-05 + 2.5;
  iVar3 = _rand();
  (&creature_attack_cooldown)[iVar2 * 0x26] = 0;
  (&creature_reward_value)[iVar2 * 0x26] = (float)(iVar3 % 0x1e + 0x8c);
  (&creature_tint_r)[iVar2 * 0x26] = *tint_rgba;
  (&creature_tint_g)[iVar2 * 0x26] = tint_rgba[1];
  (&creature_tint_b)[iVar2 * 0x26] = tint_rgba[2];
  (&creature_tint_a)[iVar2 * 0x26] = tint_rgba[3];
  fVar1 = (float)survival_elapsed_ms;
  (&creature_contact_damage)[iVar2 * 0x26] = 0x40800000;
  (&creature_max_health)[iVar2 * 0x26] = (&creature_health)[iVar2 * 0x26];
  (&creature_size)[iVar2 * 0x26] = fVar1 * 1.0000001e-05 + 47.0;
  return iVar2;
}



/* player_render_overlays @ 00428390 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* renders per-player overlays/indicators using DAT_004908** tables */

void player_render_overlays(void)

{
  float *pfVar1;
  float *pfVar2;
  int iVar3;
  int iVar4;
  int *piVar5;
  float10 fVar6;
  longlong lVar7;
  undefined1 *puVar8;
  undefined1 *puVar9;
  float fVar10;
  float fVar11;
  float in_stack_fffffe7c;
  undefined4 uVar12;
  float in_stack_fffffe80;
  float fStack_17c;
  float in_stack_fffffe88;
  float fVar13;
  float fVar14;
  
  if (((((DAT_0048727c == '\0') && (0.0 < ui_transition_alpha)) && (game_state_id != 0x14)) &&
      ((game_state_id != 0x16 && (game_state_prev != 0x14)))) && (game_state_prev != 0x16)) {
    iVar3 = perk_count_get(perk_id_radioactive);
    if (iVar3 != 0) {
      (**(code **)(*grim_interface_ptr + 0x20))();
      (**(code **)(*grim_interface_ptr + 0x20))();
      (**(code **)(*grim_interface_ptr + 0xc4))();
      effect_select_texture(0x10);
      fsin((float10)_DAT_0047ea4c);
      (**(code **)(*grim_interface_ptr + 0x114))();
      (**(code **)(*grim_interface_ptr + 0xfc))();
      (**(code **)(*grim_interface_ptr + 0xe8))();
      (**(code **)(*grim_interface_ptr + 0x11c))();
      (**(code **)(*grim_interface_ptr + 0xf0))();
    }
    (**(code **)(*grim_interface_ptr + 0xc4))();
    (**(code **)(*grim_interface_ptr + 0x20))();
    (**(code **)(*grim_interface_ptr + 0x20))();
    iVar3 = render_overlay_player_index;
    if ((float)(&player_health)[render_overlay_player_index * 0xd8] <= 0.0) {
      if (0.0 <= (float)(&player_death_timer)[render_overlay_player_index * 0xd8]) {
        lVar7 = __ftol();
        iVar3 = (int)lVar7;
      }
      else {
        iVar3 = 0x34;
      }
      (**(code **)(*grim_interface_ptr + 0xe8))();
      DAT_004965d8 = (float)(&effect_uv8_u)[iVar3 * 2];
      DAT_004965dc = (float)(&effect_uv8_v)[iVar3 * 2];
      _DAT_004965e0 = (float)(&effect_uv8_u)[iVar3 * 2] + 0.125;
      _DAT_004965e4 = (float)(&effect_uv8_v)[iVar3 * 2] + 0.125;
      (**(code **)(*grim_interface_ptr + 0x100))();
      (**(code **)(*grim_interface_ptr + 0x114))();
      (**(code **)(*grim_interface_ptr + 0xfc))();
      DAT_004965d8 = (_camera_offset_x + (float)(&player_pos_x)[render_overlay_player_index * 0xd8])
                     - (float)(&player_size)[render_overlay_player_index * 0xd8] * 0.5;
      DAT_004965dc = (_camera_offset_y + (float)(&player_pos_y)[render_overlay_player_index * 0xd8])
                     - (float)(&player_size)[render_overlay_player_index * 0xd8] * 0.5;
      (**(code **)(*grim_interface_ptr + 0x11c))();
      (**(code **)(*grim_interface_ptr + 0xf0))();
      (**(code **)(*grim_interface_ptr + 0x20))();
      (**(code **)(*grim_interface_ptr + 0x20))();
      if (_config_player_count == 1) {
        iVar3 = *grim_interface_ptr;
      }
      else {
        iVar3 = *grim_interface_ptr;
      }
      (**(code **)(iVar3 + 0x114))();
      (**(code **)(*grim_interface_ptr + 0xe8))();
      (**(code **)(*grim_interface_ptr + 0x11c))();
      (**(code **)(*grim_interface_ptr + 0xf0))();
      return;
    }
    lVar7 = __ftol();
    iVar4 = (int)lVar7;
    fcos((float10)(float)(&player_aim_heading)[iVar3 * 0xd8] + (float10)1.5707964);
    fsin((float10)(float)(&player_aim_heading)[iVar3 * 0xd8] + (float10)1.5707964);
    (**(code **)(*grim_interface_ptr + 0x114))();
    (**(code **)(*grim_interface_ptr + 0xfc))();
    DAT_004965d8 = (float)(&effect_uv8_u)[iVar4 * 2];
    DAT_004965dc = (float)(&effect_uv8_v)[iVar4 * 2];
    pfVar1 = (float *)(&effect_uv8_u + iVar4 * 2);
    fVar14 = *pfVar1;
    fVar11 = (float)(&effect_uv8_v)[iVar4 * 2];
    _DAT_004965e0 = fVar14 + 0.125;
    _DAT_004965e4 = fVar11 + 0.125;
    (**(code **)(*grim_interface_ptr + 0x100))();
    (**(code **)(*grim_interface_ptr + 0xe8))();
    fVar10 = (float)(&player_size)[render_overlay_player_index * 0xd8] * 0.5 - 2.0;
    DAT_004965d8 = (_camera_offset_x + (float)(&player_pos_x)[render_overlay_player_index * 0xd8]) -
                   fVar10;
    DAT_004965dc = (_camera_offset_y + (float)(&player_pos_y)[render_overlay_player_index * 0xd8]) -
                   fVar10;
    (**(code **)(*grim_interface_ptr + 0x11c))();
    DAT_004965d8 = *(float *)(&DAT_00491090 + iVar4 * 8);
    DAT_004965dc = *(float *)(&DAT_00491094 + iVar4 * 8);
    iVar3 = iVar4 * 8;
    pfVar2 = (float *)(&DAT_00491090 + iVar3);
    _DAT_004965e0 = *pfVar2 + 0.125;
    _DAT_004965e4 = *(float *)(&DAT_00491094 + iVar3) + 0.125;
    (**(code **)(*grim_interface_ptr + 0x100))();
    (**(code **)(*grim_interface_ptr + 0xfc))();
    DAT_004965d8 = ((_camera_offset_x + (float)(&player_pos_x)[render_overlay_player_index * 0xd8])
                   - (float)(&player_size)[render_overlay_player_index * 0xd8] * 0.5) +
                   fVar14 + 0.125;
    DAT_004965dc = ((_camera_offset_y + (float)(&player_pos_y)[render_overlay_player_index * 0xd8])
                   - (float)(&player_size)[render_overlay_player_index * 0xd8] * 0.5) +
                   fVar11 + 0.125;
    (**(code **)(*grim_interface_ptr + 0x11c))();
    (**(code **)(*grim_interface_ptr + 0xf0))();
    (**(code **)(*grim_interface_ptr + 0xc4))();
    (**(code **)(*grim_interface_ptr + 0x20))();
    (**(code **)(*grim_interface_ptr + 0x20))();
    (**(code **)(*grim_interface_ptr + 0xe8))();
    (**(code **)(*grim_interface_ptr + 0x114))();
    (**(code **)(*grim_interface_ptr + 0xfc))();
    DAT_004965d8 = *pfVar1;
    DAT_004965dc = (float)(&effect_uv8_v)[iVar4 * 2];
    _DAT_004965e0 = *pfVar1 + 0.125;
    _DAT_004965e4 = (float)(&effect_uv8_v)[iVar4 * 2] + 0.125;
    (**(code **)(*grim_interface_ptr + 0x100))();
    fVar14 = (float)(&player_size)[render_overlay_player_index * 0xd8];
    DAT_004965d8 = (_camera_offset_x + (float)(&player_pos_x)[render_overlay_player_index * 0xd8]) -
                   (float)(&player_size)[render_overlay_player_index * 0xd8] * 0.5;
    DAT_004965dc = (_camera_offset_y + (float)(&player_pos_y)[render_overlay_player_index * 0xd8]) -
                   (float)(&player_size)[render_overlay_player_index * 0xd8] * 0.5;
    (**(code **)(*grim_interface_ptr + 0x11c))();
    (**(code **)(*grim_interface_ptr + 0x114))();
    if (1 < _config_player_count) {
      if (render_overlay_player_index == 0) {
        (**(code **)(*grim_interface_ptr + 0x114))();
      }
      else {
        (**(code **)(*grim_interface_ptr + 0x114))();
      }
    }
    DAT_004965d8 = *pfVar2;
    DAT_004965dc = *(float *)(&DAT_00491094 + iVar3);
    _DAT_004965e0 = *pfVar2 + 0.125;
    _DAT_004965e4 = *(float *)(&DAT_00491094 + iVar3) + 0.125;
    (**(code **)(*grim_interface_ptr + 0x100))();
    (**(code **)(*grim_interface_ptr + 0xfc))();
    DAT_004965d8 = ((_camera_offset_x + (float)(&player_pos_x)[render_overlay_player_index * 0xd8])
                   - (float)(&player_size)[render_overlay_player_index * 0xd8] * 0.5) + fVar14;
    DAT_004965dc = ((_camera_offset_y + (float)(&player_pos_y)[render_overlay_player_index * 0xd8])
                   - (float)(&player_size)[render_overlay_player_index * 0xd8] * 0.5) + fVar14;
    (**(code **)(*grim_interface_ptr + 0x11c))();
    (**(code **)(*grim_interface_ptr + 0xf0))();
    if (0.0 < (float)(&player_shield_timer)[render_overlay_player_index * 0xd8]) {
      fVar14 = 7.00649e-45;
      (**(code **)(*grim_interface_ptr + 0x20))(0x13,5);
      in_stack_fffffe80 = 2.8026e-45;
      (**(code **)(*grim_interface_ptr + 0x20))(0x14);
      fVar11 = particles_texture;
      (**(code **)(*grim_interface_ptr + 0xc4))(particles_texture,0);
      effect_select_texture(2);
      fVar6 = (float10)fsin((float10)_DAT_0047ea4c);
      pfVar1 = (float *)(&player_shield_timer + render_overlay_player_index * 0xd8);
      fVar6 = (fVar6 + (float10)1.0) * (float10)0.25 + (float10)*pfVar1;
      if (*pfVar1 < 1.0) {
        fVar6 = fVar6 * (float10)*pfVar1;
      }
      if ((float10)1.0 < fVar6) {
        fVar6 = (float10)1.0;
      }
      fVar10 = (float)(fVar6 * (float10)fStack_17c) * 0.4;
      (**(code **)(*grim_interface_ptr + 0x114))(0x3eb6b6b7,0x3f34b4b5,0x3f800000,fVar10);
      fsin((float10)_DAT_0047ea4c * (float10)3.0);
      fVar6 = (float10)fcos((float10)(float)(&player_aim_heading)
                                            [render_overlay_player_index * 0xd8] -
                            (float10)1.5707964);
      fsin((float10)(float)(&player_aim_heading)[render_overlay_player_index * 0xd8] -
           (float10)1.5707964);
      (**(code **)(*grim_interface_ptr + 0xfc))(_DAT_0047ea4c + _DAT_0047ea4c);
      (**(code **)(*grim_interface_ptr + 0xe8))();
      in_stack_fffffe7c = fVar11 + fVar11;
      fVar14 = ((_camera_offset_x + (float)(&player_pos_x)[render_overlay_player_index * 0xd8]) -
               fVar11) + fVar14;
      (**(code **)(*grim_interface_ptr + 0x11c))
                (fVar14,((float)(fVar6 * (float10)3.0) +
                         (float)(&player_pos_y)[render_overlay_player_index * 0xd8] +
                        _camera_offset_y) - fVar11,in_stack_fffffe7c,in_stack_fffffe7c);
      (**(code **)(*grim_interface_ptr + 0x114))(0x3eb6b6b7,0x3f34b4b5,0x3f800000,fVar11 * 0.3);
      fsin((float10)_DAT_0047ea4c * (float10)3.0);
      (**(code **)(*grim_interface_ptr + 0xfc))(_DAT_0047ea4c * -2.0);
      (**(code **)(*grim_interface_ptr + 0x11c))
                (((_camera_offset_x + (float)(&player_pos_x)[render_overlay_player_index * 0xd8]) -
                 fVar14) + fVar10,
                 (fVar11 + (float)(&player_pos_y)[render_overlay_player_index * 0xd8] +
                 _camera_offset_y) - fVar14,fVar14 + fVar14,fVar14 + fVar14);
      (**(code **)(*grim_interface_ptr + 0xf0))();
      (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
    }
    if ((*(byte *)(&DAT_004d7a94 + (&player_weapon_id)[render_overlay_player_index * 0xd8] * 0x1f) &
        8) == 0) {
      fcos((float10)(float)(&player_aim_heading)[render_overlay_player_index * 0xd8] +
           (float10)1.5707964);
      fsin((float10)(float)(&player_aim_heading)[render_overlay_player_index * 0xd8] +
           (float10)1.5707964);
      (**(code **)(*grim_interface_ptr + 0xc4))(DAT_0048f7e0);
      (**(code **)(*grim_interface_ptr + 0x20))(0x13,2);
      fVar11 = 2.8026e-44;
      (**(code **)(*grim_interface_ptr + 0x20))(0x14,2);
      (**(code **)(*grim_interface_ptr + 0x100))(0,0,0x3f800000,0x3f800000);
      fVar14 = (float)(&player_muzzle_flash_alpha)[render_overlay_player_index * 0xd8] * 0.8;
      if (1.0 < fVar14) {
        fVar14 = 1.0;
      }
      (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,fVar14 * fVar11);
      (**(code **)(*grim_interface_ptr + 0xe8))();
      (**(code **)(*grim_interface_ptr + 0xfc))
                ((&player_aim_heading)[render_overlay_player_index * 0xd8]);
      if ((*(byte *)(&DAT_004d7a94 + (&player_weapon_id)[render_overlay_player_index * 0xd8] * 0x1f)
          & 4) == 0) {
        fVar11 = (float)(&player_size)[render_overlay_player_index * 0xd8] * 0.5;
        fVar14 = (float)(&player_size)[render_overlay_player_index * 0xd8];
        fVar10 = (_camera_offset_x + (float)(&player_pos_x)[render_overlay_player_index * 0xd8]) -
                 fVar11;
        fVar11 = (_camera_offset_y + (float)(&player_pos_y)[render_overlay_player_index * 0xd8]) -
                 fVar11;
        iVar3 = *grim_interface_ptr;
      }
      else {
        fVar11 = (float)(&player_size)[render_overlay_player_index * 0xd8] * 0.25;
        fVar10 = (_camera_offset_x + (float)(&player_pos_x)[render_overlay_player_index * 0xd8]) -
                 fVar11;
        fVar11 = (_camera_offset_y + (float)(&player_pos_y)[render_overlay_player_index * 0xd8]) -
                 fVar11;
        fVar14 = (float)(&player_size)[render_overlay_player_index * 0xd8] * 0.5;
        iVar3 = *grim_interface_ptr;
      }
      fStack_17c = fVar10 + in_stack_fffffe7c;
      DAT_004965dc = fVar11 + in_stack_fffffe80;
      DAT_004965d8 = fStack_17c;
      in_stack_fffffe88 = DAT_004965dc;
      (**(code **)(iVar3 + 0x11c))(fStack_17c,DAT_004965dc,fVar14,fVar14);
      (**(code **)(*grim_interface_ptr + 0xf0))();
    }
    iVar3 = perk_count_get(DAT_004c2bcc);
    if (iVar3 != 0) {
      fVar14 = 6.113987e-39;
      (**(code **)(*grim_interface_ptr + 0x20))(0x13,5);
      uVar12 = 0x14;
      (**(code **)(*grim_interface_ptr + 0x20))(0x14,2);
      (**(code **)(*grim_interface_ptr + 0xc4))(projectile_texture,0);
      (**(code **)(*grim_interface_ptr + 0x104))(4,2);
      (**(code **)(*grim_interface_ptr + 0xe8))();
      iVar3 = 0;
      if (0 < _config_player_count) {
        piVar5 = &player_auto_target;
        do {
          if ((0.25 < (float)piVar5[-0xa2]) &&
             (iVar4 = *piVar5,
             SQRT(((float)(&creature_pos_x)[iVar4 * 0x26] - (float)piVar5[-0xc3]) *
                  ((float)(&creature_pos_x)[iVar4 * 0x26] - (float)piVar5[-0xc3]) +
                  ((float)(&creature_pos_y)[iVar4 * 0x26] - (float)piVar5[-0xc2]) *
                  ((float)(&creature_pos_y)[iVar4 * 0x26] - (float)piVar5[-0xc2])) <= 80.0)) {
            fVar11 = (float)(&creature_pos_x)[iVar4 * 0x26] - (float)piVar5[-0xc3];
            fVar10 = (float)(&creature_pos_y)[iVar4 * 0x26] - (float)piVar5[-0xc2];
            puVar9 = &stack0xfffffea0;
            puVar8 = &stack0xfffffea0;
            fVar13 = SQRT(fVar11 * fVar11 + fVar10 * fVar10);
            thunk_FUN_00452f1d();
            (**(code **)(*grim_interface_ptr + 0x114))
                      (0x3f000000,0x3f19999a,0x3f800000,uVar12,puVar8,puVar9);
            fStack_17c = 0.0;
            if (0.0 < fVar13) {
              do {
                (**(code **)(*grim_interface_ptr + 0x11c))
                          (fVar11 * fStack_17c + in_stack_fffffe88,fVar10 * fStack_17c + fVar14,
                           0x42000000,0x42000000);
                fStack_17c = fStack_17c + 8.0;
              } while (fStack_17c < fVar13);
            }
          }
          iVar3 = iVar3 + 1;
          piVar5 = piVar5 + 0xd8;
        } while (iVar3 < _config_player_count);
      }
      (**(code **)(*grim_interface_ptr + 0xf0))();
    }
    (**(code **)(*grim_interface_ptr + 0x20))(0x13,5);
    (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
  }
  return;
}



/* bonus_label_for_entry @ 00429580 */

/* returns the label string for a bonus entry (formatting weapon/score cases) */

char * __cdecl bonus_label_for_entry(int *bonus_entry)

{
  int iVar1;
  char *pcVar2;
  
  iVar1 = *bonus_entry;
  if (iVar1 == 3) {
    pcVar2 = weapon_table_entry(bonus_entry[6]);
    crt_sprintf(&DAT_0049679c,&DAT_00471fc4,pcVar2);
    return &DAT_0049679c;
  }
  if (iVar1 == 1) {
    crt_sprintf(&DAT_0049679c,s__s___d_00473e8c,DAT_004853e4,bonus_entry[6]);
    return &DAT_0049679c;
  }
  return *(char **)(&bonus_meta_label + iVar1 * 0x14);
}



/* bonus_render @ 004295f0 */

/* WARNING: Type propagation algorithm not settling */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* renders bonus icons and labels from the pickup pool */

void bonus_render(void)

{
  float fVar1;
  int iVar2;
  uint uVar3;
  int *piVar4;
  int iVar5;
  float *pfVar6;
  char *pcVar7;
  undefined4 *puVar8;
  uint uVar9;
  bool bVar10;
  float10 fVar11;
  float10 fVar12;
  undefined4 uVar13;
  float *pfVar14;
  int *piVar15;
  int iVar16;
  float fVar17;
  float fVar18;
  float fStack_94;
  float fStack_90;
  float afStack_8c [14];
  undefined4 uStack_54;
  
  if ((((0.0 < ui_transition_alpha) && (game_state_id != 0x14)) && (game_state_id != 0x16)) &&
     ((game_state_prev != 0x14 && (game_state_prev != 0x16)))) {
    _DAT_004aaf5c = frame_dt * 1.3 + _DAT_004aaf5c;
    (**(code **)(*grim_interface_ptr + 0xc4))();
    uStack_54 = 0x429696;
    effect_select_texture(0x10);
    afStack_8c[0xb] = 2.66247e-44;
    afStack_8c[0xc] = 7.00649e-45;
    afStack_8c[10] = 6.115196e-39;
    (**(code **)(*grim_interface_ptr + 0x20))();
    afStack_8c[6] = 2.8026e-44;
    afStack_8c[7] = 2.8026e-45;
    afStack_8c[5] = 6.11523e-39;
    (**(code **)(*grim_interface_ptr + 0x20))();
    afStack_8c[2] = 7.00649e-45;
    afStack_8c[1] = 2.66247e-44;
    afStack_8c[0] = 6.115353e-39;
    (**(code **)(*grim_interface_ptr + 0x20))();
    fVar18 = 2.8026e-44;
    (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
    fVar17 = bonus_texture;
    (**(code **)(*grim_interface_ptr + 0xc4))(bonus_texture,0);
    iVar16 = 0;
    (**(code **)(*grim_interface_ptr + 0xfc))(0);
    afStack_8c[6] = 1.0;
    afStack_8c[7] = 1.0;
    afStack_8c[8] = 1.0;
    afStack_8c[9] = 1.0;
    afStack_8c[2] = 1.0;
    afStack_8c[3] = 1.0;
    afStack_8c[4] = 1.0;
    afStack_8c[5] = 1.0;
    (**(code **)(*grim_interface_ptr + 0xe8))();
    pfVar6 = (float *)&bonus_time_left;
    do {
      if (pfVar6[-2] != 0.0) {
        fVar1 = 1.0;
        if (*pfVar6 < 2.0) {
          fVar11 = (float10)fsin((float10)*pfVar6 * (float10)18.849556);
          if (fVar11 <= (float10)0.0) {
            fVar1 = *pfVar6 * 0.5;
          }
          else {
            fVar1 = *pfVar6 * 0.25;
          }
        }
        afStack_8c[0] = pfVar6[1] - *pfVar6;
        if (afStack_8c[0] < 0.5) {
          fVar1 = afStack_8c[0] + afStack_8c[0];
        }
        afStack_8c[5] = fVar1 * 0.9 * fStack_94;
        if (0.0 <= afStack_8c[2]) {
          if (1.0 < afStack_8c[2]) {
            afStack_8c[2] = 1.0;
          }
        }
        else {
          afStack_8c[2] = 0.0;
        }
        if (0.0 <= afStack_8c[3]) {
          if (1.0 < afStack_8c[3]) {
            afStack_8c[3] = 1.0;
          }
        }
        else {
          afStack_8c[3] = 0.0;
        }
        if (0.0 <= afStack_8c[4]) {
          if (1.0 < afStack_8c[4]) {
            afStack_8c[4] = 1.0;
          }
        }
        else {
          afStack_8c[4] = 0.0;
        }
        if (0.0 <= afStack_8c[5]) {
          if (1.0 < afStack_8c[5]) {
            afStack_8c[5] = 1.0;
          }
        }
        else {
          afStack_8c[5] = 0.0;
        }
        (**(code **)(*grim_interface_ptr + 0x110))(afStack_8c + 2);
        (**(code **)(*grim_interface_ptr + 0xfc))(0);
        (**(code **)(*grim_interface_ptr + 0x104))(4,0);
        (**(code **)(*grim_interface_ptr + 0x11c))
                  ((_camera_offset_x + pfVar6[2]) - 16.0,(_camera_offset_y + pfVar6[3]) - 16.0,
                   0x42000000,0x42000000);
        iVar5 = *(int *)(&bonus_meta_icon_id + (int)pfVar6[-2] * 0x14);
        if (-1 < iVar5) {
          if (0.5 <= *pfVar6) {
            fStack_90 = pfVar6[1] - *pfVar6;
            if (0.5 <= fStack_90) {
              fStack_90 = 1.0;
            }
            else {
              fStack_90 = fStack_90 + fStack_90;
            }
          }
          else {
            fStack_90 = *pfVar6 + *pfVar6;
          }
          fStack_90 = fStack_90 * fStack_94;
          afStack_8c[5] = fStack_94;
          if (0.0 <= afStack_8c[2]) {
            if (1.0 < afStack_8c[2]) {
              afStack_8c[2] = 1.0;
            }
          }
          else {
            afStack_8c[2] = 0.0;
          }
          if (0.0 <= afStack_8c[3]) {
            if (1.0 < afStack_8c[3]) {
              afStack_8c[3] = 1.0;
            }
          }
          else {
            afStack_8c[3] = 0.0;
          }
          if (0.0 <= afStack_8c[4]) {
            if (1.0 < afStack_8c[4]) {
              afStack_8c[4] = 1.0;
            }
          }
          else {
            afStack_8c[4] = 0.0;
          }
          if (1.0 < fStack_94) {
            afStack_8c[5] = 1.0;
          }
          (**(code **)(*grim_interface_ptr + 0x110))(afStack_8c + 2);
          fStack_90 = (float)(int)fVar18;
          fVar11 = (float10)fsin((float10)(int)fVar18 + (float10)_DAT_004aaf5c);
          afStack_8c[0] = (float)fVar11;
          fVar11 = (float10)FUN_00461140();
          fStack_94 = (float)((fVar11 * (float10)0.25 + (float10)0.75) * (float10)fStack_94);
          (**(code **)(*grim_interface_ptr + 0x110))(afStack_8c + 1);
          fVar11 = (float10)fsin((float10)fStack_94 - (float10)survival_elapsed_ms * (float10)0.003)
          ;
          (**(code **)(*grim_interface_ptr + 0xfc))((float)(fVar11 * (float10)0.2));
          if ((pfVar6[-2] == 1.4013e-45) && (pfVar6[4] == 1.4013e-42)) {
            (**(code **)(*grim_interface_ptr + 0x104))(4,iVar5 + 1);
          }
          else {
            (**(code **)(*grim_interface_ptr + 0x104))(4,iVar5);
          }
          fVar18 = fVar17 * 32.0;
          (**(code **)(*grim_interface_ptr + 0x11c))
                    ((_camera_offset_x + pfVar6[2]) - fVar17 * 16.0,
                     (_camera_offset_y + pfVar6[3]) - fVar17 * 16.0,fVar18,fVar18);
        }
      }
      pfVar6 = pfVar6 + 7;
    } while ((int)pfVar6 < 0x482b10);
    (**(code **)(*grim_interface_ptr + 0xf0))();
    iVar5 = 0;
    (**(code **)(*grim_interface_ptr + 0xc4))(ui_weapon_icons_texture,0);
    (**(code **)(*grim_interface_ptr + 0xe8))();
    pfVar6 = (float *)&bonus_time_left;
    do {
      if (pfVar6[-2] == 4.2039e-45) {
        if (0.5 <= *pfVar6) {
          afStack_8c[3] = pfVar6[1] - *pfVar6;
          if (0.5 <= afStack_8c[3]) {
            afStack_8c[3] = 1.0;
          }
          else {
            afStack_8c[3] = afStack_8c[3] + afStack_8c[3];
          }
        }
        else {
          afStack_8c[3] = *pfVar6 + *pfVar6;
        }
        afStack_8c[3] = afStack_8c[3] * fVar18;
        (**(code **)(*grim_interface_ptr + 0x110))(afStack_8c);
        fsin((float10)_DAT_004aaf5c);
        fVar11 = (float10)FUN_00461140();
        pfVar14 = &fStack_90;
        fVar18 = (float)((fVar11 * (float10)0.25 + (float10)0.75) * (float10)fVar18);
        (**(code **)(*grim_interface_ptr + 0x110))(pfVar14);
        fVar11 = (float10)fsin((float10)iVar16 - (float10)survival_elapsed_ms * (float10)0.003);
        (**(code **)(*grim_interface_ptr + 0xfc))((float)fVar11);
        (**(code **)(*grim_interface_ptr + 0xfc))(0);
        (**(code **)(*grim_interface_ptr + 0x108))
                  (8,2,1,(&effect_subrect_frame_table)[(int)pfVar6[4] * 0x1f] << 1);
        (**(code **)(*grim_interface_ptr + 0x11c))
                  ((_camera_offset_x + pfVar6[2]) - (float)pfVar14 * 30.0,
                   (_camera_offset_y + pfVar6[3]) - (float)pfVar14 * 15.0,(float)pfVar14 * 60.0,
                   (float)pfVar14 * 30.0);
      }
      pfVar6 = pfVar6 + 7;
    } while ((int)pfVar6 < 0x482b10);
    (**(code **)(*grim_interface_ptr + 0xf0))();
    uVar13 = 0x18;
    (**(code **)(*grim_interface_ptr + 0x20))(0x18,0x3f000000);
    (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,0x3f333333);
    if (0 < _config_player_count) {
      pfVar6 = (float *)&player_aim_x;
      piVar15 = &DAT_004aaf60;
      do {
        if (0.0 < pfVar6[-0xb]) {
          iVar16 = 0;
          piVar4 = &bonus_pool;
          do {
            if ((*piVar4 != 0) &&
               (SQRT((*pfVar6 - (float)piVar4[4]) * (*pfVar6 - (float)piVar4[4]) +
                     (pfVar6[1] - (float)piVar4[5]) * (pfVar6[1] - (float)piVar4[5])) < 24.0)) {
              if (game_state_id == 9) {
                *piVar15 = *piVar15 + frame_dt_ms;
              }
              pcVar7 = bonus_label_for_entry(&bonus_pool + iVar16 * 7);
              fVar18 = (_camera_offset_y + pfVar6[1]) - 7.0;
              piVar15 = (int *)(**(code **)(*grim_interface_ptr + 0x14c))(pcVar7);
              if ((float)config_screen_width < (float)(int)piVar15 + fVar18) {
                fVar18 = (float)config_screen_width - (float)(int)piVar15;
              }
              (**(code **)(*grim_interface_ptr + 0x144))(fVar18,uVar13,pcVar7);
              goto LAB_00429df8;
            }
            piVar4 = piVar4 + 7;
            iVar16 = iVar16 + 1;
          } while ((int)piVar4 < 0x482b08);
          *piVar15 = 0;
LAB_00429df8:
          if (((0x28a < *piVar15) && (iVar2 = perk_count_get(perk_id_telekinetic), iVar2 != 0)) &&
             ((&bonus_state)[iVar16 * 0x1c] == '\0')) {
            bonus_apply(iVar5,&bonus_pool + iVar16 * 7);
            (&bonus_state)[iVar16 * 0x1c] = 1;
            (&bonus_time_left)[iVar16 * 7] = 0x3f000000;
            (&DAT_004aaf60)[iVar5] = 0;
            break;
          }
        }
        iVar5 = iVar5 + 1;
        pfVar6 = pfVar6 + 0xd8;
        piVar15 = piVar15 + 1;
      } while (iVar5 < _config_player_count);
    }
    if (config_fx_detail_flag1 != '\0') {
      (**(code **)(*grim_interface_ptr + 0x20))(0x13,5);
      (**(code **)(*grim_interface_ptr + 0x20))(0x14,2);
      (**(code **)(*grim_interface_ptr + 0xc4))(particles_texture,0);
      effect_select_texture(0xd);
      (**(code **)(*grim_interface_ptr + 0xfc))(0);
      (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,0x3d851eb8);
      (**(code **)(*grim_interface_ptr + 0xe8))();
      uVar9 = 0;
      pcVar7 = &particle_style_id;
      do {
        if (pcVar7[-0x30] != '\0') {
          uVar3 = uVar9 & 0x80000001;
          bVar10 = uVar3 == 0;
          if ((int)uVar3 < 0) {
            bVar10 = (uVar3 - 1 | 0xfffffffe) == 0xffffffff;
          }
          if ((bVar10) && (*pcVar7 != '\b')) {
            fVar11 = (float10)fsin(((float10)1.0 - (float10)*(float *)(pcVar7 + -0xc)) *
                                   (float10)1.5707964);
            fVar11 = (fVar11 + (float10)0.1) * (float10)55.0 + (float10)4.0;
            if (fVar11 < (float10)16.0) {
              fVar11 = (float10)16.0;
            }
            (**(code **)(*grim_interface_ptr + 0x11c))
                      ((float)(((float10)_camera_offset_x + (float10)*(float *)(pcVar7 + -0x2c)) -
                              fVar11),
                       (float)(((float10)_camera_offset_y + (float10)*(float *)(pcVar7 + -0x28)) -
                              fVar11),(float)(fVar11 + fVar11),(float)(fVar11 + fVar11));
          }
        }
        pcVar7 = pcVar7 + 0x38;
        uVar9 = uVar9 + 1;
      } while ((int)pcVar7 < 0x495ae8);
      (**(code **)(*grim_interface_ptr + 0xf0))();
      (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
    }
    (**(code **)(*grim_interface_ptr + 0x20))(0x13,5);
    (**(code **)(*grim_interface_ptr + 0x20))(0x14,2);
    (**(code **)(*grim_interface_ptr + 0xc4))(particles_texture,0);
    effect_select_texture(0xc);
    (**(code **)(*grim_interface_ptr + 0xfc))(0);
    (**(code **)(*grim_interface_ptr + 0xe8))();
    puVar8 = &particle_spin;
    do {
      if ((*(char *)(puVar8 + -0xb) != '\0') && (*(char *)(puVar8 + 1) != '\b')) {
        (**(code **)(*grim_interface_ptr + 0xfc))(*puVar8);
        (**(code **)(*grim_interface_ptr + 0x114))(puVar8[-6],puVar8[-5],puVar8[-4],puVar8[-3]);
        fVar11 = (float10)fsin(((float10)1.0 - (float10)(float)puVar8[-2]) * (float10)1.5707964);
        fVar11 = fVar11 * (float10)24.0;
        if (*(char *)(puVar8 + 1) == '\x01') {
          fVar11 = fVar11 * (float10)0.8;
        }
        if (fVar11 < (float10)2.0) {
          fVar11 = (float10)2.0;
        }
        (**(code **)(*grim_interface_ptr + 0x11c))
                  ((float)(((float10)_camera_offset_x + (float10)(float)puVar8[-10]) - fVar11),
                   (float)(((float10)_camera_offset_y + (float10)(float)puVar8[-9]) - fVar11),
                   (float)(fVar11 + fVar11),(float)(fVar11 + fVar11));
      }
      puVar8 = puVar8 + 0xe;
    } while ((int)puVar8 < 0x495ae4);
    (**(code **)(*grim_interface_ptr + 0xf0))();
    effect_select_texture(2);
    (**(code **)(*grim_interface_ptr + 0xfc))(0);
    (**(code **)(*grim_interface_ptr + 0xe8))();
    pcVar7 = &particle_style_id;
    do {
      if ((pcVar7[-0x30] != '\0') && (*pcVar7 == '\b')) {
        (**(code **)(*grim_interface_ptr + 0x114))
                  (0x3f800000,0x3f800000,0x3f800000,*(undefined4 *)(pcVar7 + -0x10));
        fVar11 = (float10)fsin((float10)*(float *)(pcVar7 + -4));
        fVar12 = (fVar11 * (float10)3.0 + (float10)15.0) * (float10)*(float *)(pcVar7 + -0x1c) *
                 (float10)7.0;
        fVar18 = (float)((float10)15.0 - fVar11 * (float10)3.0) * *(float *)(pcVar7 + -0x1c) * 7.0;
        (**(code **)(*grim_interface_ptr + 0x11c))
                  ((_camera_offset_x + *(float *)(pcVar7 + -0x2c)) - fVar18,
                   (float)(((float10)_camera_offset_y + (float10)*(float *)(pcVar7 + -0x28)) -
                          fVar12),fVar18 + fVar18,(float)(fVar12 + fVar12));
      }
      pcVar7 = pcVar7 + 0x38;
    } while ((int)pcVar7 < 0x495ae8);
    (**(code **)(*grim_interface_ptr + 0xf0))();
    (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
    (**(code **)(*grim_interface_ptr + 0x20))(0x13,5);
    (**(code **)(*grim_interface_ptr + 0x20))(0x14,2);
    (**(code **)(*grim_interface_ptr + 0x100))(0,0,0x3f800000,0x3f800000);
    (**(code **)(*grim_interface_ptr + 0xfc))(0);
    (**(code **)(*grim_interface_ptr + 0xe8))();
    pfVar6 = (float *)&secondary_proj_vel_x;
    do {
      if ((*(char *)(pfVar6 + -5) != '\0') && (pfVar6[2] == 4.2039e-45)) {
        (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f19999a,0x3dcccccd,1.0 - *pfVar6);
        fVar18 = pfVar6[1] * *pfVar6 * 64.0;
        (**(code **)(*grim_interface_ptr + 0x11c))
                  ((_camera_offset_x + pfVar6[-2]) - fVar18 * 0.5,
                   (_camera_offset_y + pfVar6[-1]) - fVar18 * 0.5,fVar18,fVar18);
        (**(code **)(*grim_interface_ptr + 0x114))
                  (0x3f800000,0x3f19999a,0x3dcccccd,(1.0 - *pfVar6) * 0.3);
        fVar18 = pfVar6[1] * *pfVar6 * 200.0;
        (**(code **)(*grim_interface_ptr + 0x11c))
                  ((_camera_offset_x + pfVar6[-2]) - fVar18 * 0.5,
                   (_camera_offset_y + pfVar6[-1]) - fVar18 * 0.5,fVar18,fVar18);
      }
      pfVar6 = pfVar6 + 0xb;
    } while ((int)pfVar6 < 0x4965ec);
    (**(code **)(*grim_interface_ptr + 0xf0))();
    (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
    if (config_fx_detail_flag2 != '\0') {
      (**(code **)(*grim_interface_ptr + 0x20))(0x13,5);
      (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
      (**(code **)(*grim_interface_ptr + 0xc4))(particles_texture,0);
      fVar18 = DAT_00491248 + 0.25;
      (**(code **)(*grim_interface_ptr + 0x100))
                (DAT_00491248,DAT_0049124c,fVar18,DAT_0049124c + 0.25);
      (**(code **)(*grim_interface_ptr + 0xe8))();
      puVar8 = &sprite_effect_scale;
      do {
        if (*(char *)(puVar8 + -10) != '\0') {
          (**(code **)(*grim_interface_ptr + 0xfc))(puVar8[-5]);
          (**(code **)(*grim_interface_ptr + 0x114))(puVar8[-9],puVar8[-8],puVar8[-7],puVar8[-6]);
          (**(code **)(*grim_interface_ptr + 0x11c))
                    ((_camera_offset_x + (float)puVar8[-4]) - fVar18 * 0.5,
                     (_camera_offset_y + (float)puVar8[-3]) - fVar18 * 0.5,fVar18,fVar18);
        }
        puVar8 = puVar8 + 0xb;
      } while ((int)puVar8 < 0x49aa48);
      (**(code **)(*grim_interface_ptr + 0xf0))();
    }
    effects_render();
  }
  return;
}



/* audio_resume_all @ 0042a5f0 */

/* resume active audio channels */

int audio_resume_all(void)

{
  float fVar1;
  undefined4 uVar2;
  
  audio_resume_channels();
  fVar1 = *(float *)(DAT_00480864 + 0xc);
  uVar2 = CONCAT22((short)((uint)DAT_00480864 >> 0x10),
                   (ushort)(fVar1 < 0.0) << 8 | (ushort)NAN(fVar1) << 10 |
                   (ushort)(fVar1 == 0.0) << 0xe);
  if ((fVar1 == 0.0) == 0) {
    uVar2 = console_printf(&console_log_queue,(byte *)s_<___Restored_00473e94);
  }
  DAT_004aaf84 = 0;
  return CONCAT31((int3)((uint)uVar2 >> 8),1);
}



/* audio_suspend_all @ 0042a630 */

/* suspend active audio channels */

void audio_suspend_all(void)

{
  audio_suspend_channels();
  if (*(float *)(DAT_00480864 + 0xc) != 0.0) {
    console_printf(&console_log_queue,(byte *)s_<___Suspended_00473ea4);
  }
  DAT_004aaf84 = 1;
  return;
}



/* texture_get_or_load @ 0042a670 */

/* lookup texture handle; load if missing */

int __cdecl texture_get_or_load(char *name)

{
  char cVar1;
  int iVar2;
  
  iVar2 = (**(code **)(*grim_interface_ptr + 0xc0))(name);
  if (iVar2 == -1) {
    cVar1 = (**(code **)(*grim_interface_ptr + 0xb4))(name,name);
    if (cVar1 != '\0') {
      if (*(float *)(DAT_00480854 + 0xc) == 0.0) {
        console_printf(&console_log_queue,(byte *)s____loading_texture___s__ok_00473ed4);
      }
      iVar2 = (**(code **)(*grim_interface_ptr + 0xc0))(name);
      return iVar2;
    }
    console_printf(&console_log_queue,(byte *)s____loading_texture___s__failed_00473eb4);
    iVar2 = -1;
  }
  return iVar2;
}



/* texture_get_or_load_alt @ 0042a700 */

/* duplicate of texture_get_or_load (callers are mostly .jaz assets) */

int __cdecl texture_get_or_load_alt(char *name)

{
  char cVar1;
  int iVar2;
  
  iVar2 = (**(code **)(*grim_interface_ptr + 0xc0))(name);
  if (iVar2 == -1) {
    cVar1 = (**(code **)(*grim_interface_ptr + 0xb4))(name,name);
    if (cVar1 != '\0') {
      if (*(float *)(DAT_00480854 + 0xc) == 0.0) {
        console_printf(&console_log_queue,(byte *)s____loading_texture___s__ok_00473ed4);
      }
      iVar2 = (**(code **)(*grim_interface_ptr + 0xc0))(name);
      return iVar2;
    }
    console_printf(&console_log_queue,(byte *)s____loading_texture___s__failed_00473eb4);
    iVar2 = -1;
  }
  return iVar2;
}



/* reg_read_dword_default @ 0042a980 */

/* reads a registry DWORD or writes fallback to output */

int __cdecl reg_read_dword_default(HKEY key,char *name,uint *out,uint fallback)

{
  uint *puVar1;
  LONG LVar2;
  DWORD local_4;
  
  puVar1 = out;
  local_4 = 4;
  LVar2 = RegQueryValueExA((HKEY)key,name,(LPDWORD)0x0,(LPDWORD)&out,(LPBYTE)out,&local_4);
  if (LVar2 != 0) {
    *puVar1 = fallback;
  }
  return 0;
}



/* reg_write_dword @ 0042a9c0 */

/* writes a registry DWORD */

int __cdecl reg_write_dword(HKEY key,char *name,uint value)

{
  LONG LVar1;
  
  LVar1 = RegSetValueExA((HKEY)key,name,0,4,(BYTE *)&value,4);
  return -(uint)(LVar1 != 0) & 0x80004005;
}



/* init_audio_and_terrain @ 0042a9f0 */

/* sound init + terrain texture setup */

void init_audio_and_terrain(void)

{
  float fVar1;
  char cVar2;
  int iVar3;
  undefined4 uVar4;
  char *extraout_EDX;
  char *extraout_EDX_00;
  char *extraout_EDX_01;
  longlong lVar5;
  char *pcVar6;
  
  console_printf(&console_log_queue,(byte *)s_Init_Grim_successful__00474114);
  console_printf(&console_log_queue,&DAT_004711c0);
  console_printf(&console_log_queue,(byte *)s________________________004740fc);
  console_printf(&console_log_queue,(byte *)s___Sound_init___________004740e4);
  console_printf(&console_log_queue,(byte *)s________________________004740fc);
  if (DAT_004aaeea == '\0') {
    iVar3 = sfx_system_init();
    if ((char)iVar3 == '\0') {
      DAT_004aaeea = '\x01';
    }
  }
  else {
    console_printf(&console_log_queue,(byte *)s____no_sounds_selected_004740cc);
  }
  console_printf(&console_log_queue,&DAT_004711c0);
  terrain_texture_width = 0x400;
  terrain_texture_height = 0x400;
  if (0.5 <= config_texture_scale) {
    if (4.0 < config_texture_scale) {
      config_texture_scale = 4.0;
    }
  }
  else {
    config_texture_scale = 0.5;
  }
  if (terrain_texture_failed == '\0') {
    lVar5 = __ftol();
    cVar2 = (**(code **)(*grim_interface_ptr + 0xac))(s_ground_004740c4,(int)lVar5,(int)lVar5);
    fVar1 = config_texture_scale;
    pcVar6 = extraout_EDX;
    if (cVar2 == '\0') {
      config_texture_scale = config_texture_scale + config_texture_scale;
      iVar3 = *grim_interface_ptr;
      lVar5 = __ftol();
      uVar4 = (undefined4)lVar5;
      lVar5 = __ftol();
      cVar2 = (**(code **)(iVar3 + 0xac))(s_ground_004740c4,(int)lVar5,uVar4);
      if (cVar2 == '\0') {
        terrain_texture_failed = '\x01';
        config_texture_scale = fVar1;
        console_printf(&console_log_queue,(byte *)s_Failed_to_create_terrain_texture_004740a0);
        pcVar6 = s___>_entering_safemode__00474088;
      }
      else {
        pcVar6 = s_Created_terrain_texture__0047406c;
      }
      console_printf(&console_log_queue,(byte *)pcVar6);
      pcVar6 = extraout_EDX_00;
    }
    if (terrain_texture_failed == '\0') goto LAB_0042abbf;
  }
  console_printf(&console_log_queue,(byte *)s_Running_in_safemode__using_stati_00474034);
  pcVar6 = extraout_EDX_01;
LAB_0042abbf:
  console_flush_log(&console_log_queue,pcVar6);
  return;
}



/* load_textures_step @ 0042abd0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* stage-based texture loading (advances DAT_004aaf88) */

int load_textures_step(void)

{
  undefined4 in_EDX;
  undefined4 extraout_EDX;
  undefined4 extraout_EDX_00;
  undefined4 extraout_EDX_01;
  undefined4 extraout_EDX_02;
  undefined4 extraout_EDX_03;
  undefined4 extraout_EDX_04;
  undefined4 extraout_EDX_05;
  undefined4 extraout_EDX_06;
  undefined4 extraout_EDX_07;
  undefined4 extraout_EDX_08;
  undefined8 uVar1;
  undefined8 uVar2;
  
  if (DAT_004aaf88 == 0) {
    texture_get_or_load(s_GRIM_Font2_004745d8);
    texture_get_or_load(s_trooper_0047372c);
    texture_get_or_load(s_zombie_0047375c);
    texture_get_or_load(s_spider_sp1_00473748);
    texture_get_or_load(s_spider_sp2_0047373c);
    texture_get_or_load(s_alien_00473734);
    texture_get_or_load(s_lizard_00473754);
    in_EDX = extraout_EDX;
  }
  if (DAT_004aaf88 == 1) {
    DAT_0048f7d8 = texture_get_or_load(s_arrow_00474554);
    texture_get_or_load(s_bullet_i_00474534);
    bullet_trail_texture = texture_get_or_load(s_bulletTrail_00474510);
    texture_get_or_load(s_bodyset_004744f4);
    bodyset_texture = (**(code **)(*grim_interface_ptr + 0xc0))(s_bodyset_004744f4);
    projectile_texture = texture_get_or_load(s_projs_004744dc);
    in_EDX = extraout_EDX_00;
  }
  if (DAT_004aaf88 == 2) {
    texture_get_or_load(s_ui_iconAim_004744bc);
    texture_get_or_load(s_ui_buttonSm_00474498);
    texture_get_or_load(s_ui_buttonMd_00474474);
    texture_get_or_load(s_ui_checkOn_00474454);
    texture_get_or_load(s_ui_checkOff_00474434);
    texture_get_or_load(s_ui_rectOff_00474414);
    texture_get_or_load(s_ui_rectOn_004743f4);
    texture_get_or_load(s_bonuses_004743d8);
    in_EDX = extraout_EDX_01;
  }
  if (DAT_004aaf88 == 3) {
    texture_get_or_load_alt(s_ui_ui_indBullet_jaz_00473864);
    texture_get_or_load_alt(s_ui_ui_indRocket_jaz_00473850);
    texture_get_or_load_alt(s_ui_ui_indElectric_jaz_00473838);
    texture_get_or_load_alt(s_ui_ui_indFire_jaz_00473878);
    bonus_texture = (**(code **)(*grim_interface_ptr + 0xc0))(s_bonuses_004743d8);
    particles_texture = texture_get_or_load_alt(s_game_particles_jaz_004743c4);
    in_EDX = extraout_EDX_02;
  }
  if (DAT_004aaf88 == 4) {
    DAT_0048f7c0 = texture_get_or_load_alt(s_ui_ui_indLife_jaz_004743b0);
    DAT_0048f7c4 = texture_get_or_load_alt(s_ui_ui_indPanel_jaz_0047439c);
    DAT_0048f7bc = texture_get_or_load_alt(s_ui_ui_arrow_jaz_0047438c);
    DAT_0048f798 = texture_get_or_load_alt(s_ui_ui_cursor_jaz_00474378);
    DAT_0048f79c = texture_get_or_load_alt(s_ui_ui_aim_jaz_00474368);
    in_EDX = extraout_EDX_03;
  }
  if (DAT_004aaf88 == 5) {
    if (terrain_texture_failed == '\0') {
      DAT_0048f548 = texture_get_or_load_alt(s_ter_ter_q1_base_jaz_00474354);
      DAT_0048f54c = texture_get_or_load_alt(s_ter_ter_q1_tex1_jaz_00474340);
      _DAT_0048f550 = texture_get_or_load_alt(s_ter_ter_q2_base_jaz_0047432c);
      _DAT_0048f554 = texture_get_or_load_alt(s_ter_ter_q2_tex1_jaz_00474318);
      _DAT_0048f558 = texture_get_or_load_alt(s_ter_ter_q3_base_jaz_00474304);
      _DAT_0048f55c = texture_get_or_load_alt(s_ter_ter_q3_tex1_jaz_004742f0);
      _DAT_0048f560 = texture_get_or_load_alt(s_ter_ter_q4_base_jaz_004742dc);
      _DAT_0048f564 = texture_get_or_load_alt(s_ter_ter_q4_tex1_jaz_004742c8);
      in_EDX = extraout_EDX_04;
    }
    else {
      DAT_0048f548 = texture_get_or_load_alt(s_ter_fb_q1_jaz_004742b8);
      DAT_0048f54c = texture_get_or_load_alt(s_ter_fb_q2_jaz_004742a8);
      _DAT_0048f550 = texture_get_or_load_alt(s_ter_fb_q3_jaz_00474298);
      _DAT_0048f554 = texture_get_or_load_alt(s_ter_fb_q4_jaz_00474288);
      terrain_render_target = DAT_0048f548;
      in_EDX = extraout_EDX_05;
    }
  }
  if (DAT_004aaf88 == 6) {
    DAT_0048f7a0 = texture_get_or_load_alt(s_ui_ui_textLevComp_jaz_00474270);
    DAT_0048f7a4 = texture_get_or_load_alt(s_ui_ui_textQuest_jaz_0047425c);
    DAT_0048f7a8 = texture_get_or_load_alt(s_ui_ui_num1_jaz_0047424c);
    DAT_0048f7ac = texture_get_or_load_alt(s_ui_ui_num2_jaz_0047423c);
    _DAT_0048f7b0 = texture_get_or_load_alt(s_ui_ui_num3_jaz_0047422c);
    DAT_0048f7b4 = texture_get_or_load_alt(s_ui_ui_num4_jaz_0047421c);
    _DAT_0048f7b8 = texture_get_or_load_alt(s_ui_ui_num5_jaz_0047420c);
    in_EDX = extraout_EDX_06;
  }
  if (DAT_004aaf88 == 7) {
    ui_weapon_icons_texture = texture_get_or_load(s_ui_wicons_004741ec);
    texture_get_or_load(s_iGameUI_00473894);
    texture_get_or_load(s_iHeart_0047388c);
    ui_clock_table_texture = texture_get_or_load_alt(s_ui_ui_clockTable_jaz_004741ac);
    DAT_0048f7cc = texture_get_or_load_alt(s_ui_ui_clockPointer_jaz_00474194);
    in_EDX = extraout_EDX_07;
  }
  uVar1 = CONCAT44(in_EDX,terrain_render_target);
  if (DAT_004aaf88 == 8) {
    DAT_0048f7e0 = texture_get_or_load_alt(s_game_muzzleFlash_jaz_0047417c);
    texture_get_or_load(s_ui_dropOn_00474158);
    texture_get_or_load(s_ui_dropOff_00474134);
    uVar1 = CONCAT44(extraout_EDX_08,terrain_render_target);
    if (terrain_texture_failed == '\0') {
      uVar1 = (**(code **)(*grim_interface_ptr + 0xc0))(s_ground_004740c4);
    }
  }
  terrain_render_target = (int)uVar1;
  if (DAT_004aaf88 == 9) {
    game_state_id = 0;
    DAT_0049bb30 = (**(code **)(*grim_interface_ptr + 0xc0))(s_bullet_i_00474534);
    uVar2 = (**(code **)(*grim_interface_ptr + 0xc0))(s_aim64_0047412c);
    uVar1 = CONCAT44((int)((ulonglong)uVar2 >> 0x20),terrain_render_target);
    _DAT_00496698 = (undefined4)uVar2;
    DAT_004aaf86 = 1;
  }
  terrain_render_target = (int)uVar1;
  DAT_004aaf88 = DAT_004aaf88 + 1;
  DAT_00473a5c = 0xb;
  console_flush_log(&console_log_queue,(char *)((ulonglong)uVar1 >> 0x20));
  return (uint)(10 < DAT_004aaf88);
}



/* game_startup_init @ 0042b090 */

/* WARNING: Type propagation algorithm not settling */
/* startup init: logs, builds perks/weapons, seeds UI/effects, and loads registry time */

void game_startup_init(void)

{
  LONG LVar1;
  char *filename;
  HKEY pHStack_60;
  uint uStack_5c;
  uint uStack_58;
  
  DAT_004aaee4 = strdup_malloc(&DAT_0047f4d8);
  (**(code **)(*grim_interface_ptr + 0x20))();
  (**(code **)(*grim_interface_ptr + 0x20))();
  (**(code **)(*grim_interface_ptr + 0x20))();
  effect_uv_tables_init();
  console_flush_log(&console_log_queue,filename);
  uStack_58 = 0x42b10a;
  console_printf(&console_log_queue,(byte *)s_Entering_Crimsonland___0047465c);
  perks_init_database();
  weapon_table_init();
  game_core_init();
  GetLocalTime((LPSYSTEMTIME)&local_system_time);
  if (local_system_time._2_2_ == 9) {
    if (local_system_day != 0xc) goto LAB_0042b17a;
  }
  else if (local_system_time._2_2_ == 0xb) {
    if (local_system_day != 8) goto LAB_0042b17a;
  }
  else if ((local_system_time._2_2_ != 0xc) || (local_system_day != 0x12)) goto LAB_0042b17a;
  DAT_004aaed8 = 1;
  uStack_58 = 0x42b177;
  texture_get_or_load(s_balloon_00474648);
LAB_0042b17a:
  DAT_004aaed8 = 0;
  uStack_58 = 0x42b190;
  console_printf(&console_log_queue,(byte *)s_Unloaded_resource_paq_00474630);
  pHStack_60 = (HKEY)0x10;
  (**(code **)(*grim_interface_ptr + 0x20))();
  uStack_58 = (uint)qpc_timestamp_scratch;
  QueryPerformanceCounter((LARGE_INTEGER *)&uStack_58);
  FUN_00461739(uStack_58);
  gameplay_reset_state();
  DAT_004aaed9 = 1;
  terrain_generate_random();
  DAT_004aaed9 = 0;
  LVar1 = RegCreateKeyExA((HKEY)0x80000001,s_Software_10tons_entertainment_Cr_00474604,0,(LPSTR)0x0,
                          0,0xf003f,(LPSECURITY_ATTRIBUTES)0x0,&pHStack_60,(LPDWORD)0x0);
  if (LVar1 == 0) {
    reg_read_dword_default((HKEY)pHStack_60,s_timePlayed_004745f8,&uStack_5c,0);
    DAT_0048718c = uStack_5c;
    RegCloseKey(pHStack_60);
  }
  return;
}



/* crimsonland_main @ 0042c450 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* WARNING: Enum "_D3DFORMAT": Some values do not have unique names */
/* primary game init/run/shutdown sequence */

int crimsonland_main(void)

{
  char cVar1;
  DWORD DVar2;
  int iVar3;
  HRESULT HVar4;
  IDirect3D8 *This;
  char *pcVar5;
  undefined1 *puVar6;
  float *pfVar7;
  int *piVar8;
  LPCSTR lpText;
  void *pvVar9;
  undefined4 *puVar10;
  undefined4 *puVar11;
  LONG LVar12;
  uint uVar13;
  undefined4 *puVar14;
  uint uVar15;
  char *filename;
  char *filename_00;
  char *filename_01;
  char *extraout_EDX;
  char *extraout_EDX_00;
  char *filename_02;
  char *filename_03;
  char *filename_04;
  char *filename_05;
  char *extraout_EDX_01;
  char *extraout_EDX_02;
  char *extraout_EDX_03;
  char *extraout_EDX_04;
  char *filename_06;
  char *filename_07;
  char *extraout_EDX_05;
  char *extraout_EDX_06;
  char *extraout_EDX_07;
  LPCCH pCVar16;
  HKEY pHStack_5bc;
  undefined4 uStack_5b8;
  undefined4 uStack_5b4;
  undefined4 uStack_5b0;
  undefined4 uStack_5ac;
  undefined1 uStack_5a8;
  undefined4 uStack_59c;
  undefined4 uStack_598;
  UINT uType;
  uint local_420 [5];
  char local_40c [12];
  WCHAR local_400 [512];
  
  DVar2 = FUN_004623b2((int *)0x0);
  FUN_00461739(DVar2);
  local_420[0] = 0;
  iVar3 = dx_get_version((int *)local_420,local_40c,10);
  if (iVar3 < 0) {
    iVar3 = MessageBoxA((HWND)0x0,s_Unknown_DirectX_version_detected_00474d74,s_Crimsonland_00472d5c
                        ,4);
    if (iVar3 == 7) {
      return 0;
    }
  }
  else if (local_420[0] < 0x80100) {
    iVar3 = MessageBoxA((HWND)0x0,s_DirectX8_1_or_newer_not_detected_00474e60,s_Crimsonland_00472d5c
                        ,0x23);
    if (iVar3 != 6) {
      return 0;
    }
    MultiByteToWideChar(0,0,s_http___www_microsoft_com_windows_00474e28,-1,local_400,0x104);
    HVar4 = HlinkNavigateString((IUnknown *)0x0,local_400);
    if (-1 < HVar4) {
      return 0;
    }
    MessageBoxA((HWND)0x0,s_Failed_to_launch_web_browser__00474e08,s_Crimsonland_00472d5c,0);
    return 0;
  }
  crt_getcwd(&game_base_path,0x103);
  GetCommandLineA();
  DAT_00473a64 = 0x7b;
  This = Direct3DCreate8(0xdc);
  console_printf(&console_log_queue,(byte *)s_Crimsonland_00474d64);
  console_printf(&console_log_queue,(byte *)s_____________00474d54);
  console_printf(&console_log_queue,&DAT_004711c0);
  console_flush_log(&console_log_queue,filename);
  if (This == (IDirect3D8 *)0x0) {
    MessageBoxA((HWND)0x0,s_DirectX8_1_not_detected__Crimson_00474cb8,s_Crimsonland_00472d5c,0);
    return 0;
  }
  (*This->lpVtbl->Release)(This);
  console_printf(&console_log_queue,(byte *)s_Game_base_path____s__00474ca0);
  console_flush_log(&console_log_queue,filename_00);
  config_ensure_file();
  console_register_command(&console_log_queue,(uint *)s_setGammaRamp_00474c90,&LAB_0042c3d0);
  console_register_command(&console_log_queue,(uint *)s_snd_addGameTune_00474c80,&LAB_0042c360);
  console_register_command(&console_log_queue,(uint *)s_generateterrain_00474c70,&LAB_0042a970);
  console_register_command(&console_log_queue,(uint *)s_telltimesurvived_00474c5c,&LAB_0042a860);
  console_register_command(&console_log_queue,(uint *)s_setresourcepaq_00474c4c,&LAB_0042a7c0);
  console_register_command(&console_log_queue,(uint *)s_loadtexture_00474c40,&LAB_0042a780);
  console_register_command(&console_log_queue,(uint *)s_openurl_00474c38,&LAB_0042a890);
  console_register_command(&console_log_queue,(uint *)s_sndfreqadjustment_00474c24,&LAB_0042a930);
  puVar10 = &DAT_004852d0;
  for (iVar3 = 0x3f; iVar3 != 0; iVar3 = iVar3 + -1) {
    *puVar10 = 0;
    puVar10 = puVar10 + 1;
  }
  *(undefined2 *)puVar10 = 0;
  *(undefined1 *)((int)puVar10 + 2) = 0;
  DAT_004852d0._0_1_ = 0x53;
  DAT_004852d0._1_1_ = 0x6f;
  DAT_004852d0._2_1_ = 0x66;
  DAT_004852d0._3_1_ = 0x74;
  DAT_004852d4._0_1_ = 0x77;
  DAT_004852d4._1_1_ = 0x61;
  DAT_004852d6 = 0x72;
  DAT_004852d7 = 0x65;
  DAT_004852d8 = 0x5c;
  DAT_004852d9 = 0x53;
  DAT_004852da = 0x6f;
  DAT_004852db = 99;
  DAT_004852dc = 0x6b;
  grim_interface_ptr = (int *)grim_load_interface(s____grim_grSystem_c_Release_grim__00474c00);
  console_printf(&console_log_queue,(byte *)s________________________004740fc);
  console_printf(&console_log_queue,(byte *)s_______Grim2D_API_______00474be8);
  console_printf(&console_log_queue,(byte *)s________________________004740fc);
  console_printf(&console_log_queue,(byte *)s_Initiating_Grim_00474bd4);
  console_flush_log(&console_log_queue,filename_01);
  DAT_004852e1 = 0x75;
  DAT_004852eb = 0x75;
  DAT_004852dd = 0x65;
  DAT_004852de = 0x74;
  DAT_004852df = 0x50;
  DAT_004852e0 = 0x6c;
  DAT_004852e2 = 0x67;
  DAT_004852e3 = 0x69;
  DAT_004852e4 = 0x6e;
  DAT_004852e5 = 0x73;
  DAT_004852e6 = 0x5c;
  DAT_004852e7 = 0x44;
  DAT_004852e8 = 0x65;
  DAT_004852e9 = 0x66;
  DAT_004852ea = 0x61;
  DAT_004852ec = 0x6c;
  DAT_004852ed = 0x74;
  DAT_004852ee = 0x5c;
  pcVar5 = extraout_EDX;
  if (grim_interface_ptr == (int *)0x0) {
    console_printf(&console_log_queue,(byte *)s____DEV_dll_not_found__trying_to_f_00474ba4);
    grim_interface_ptr = (int *)grim_load_interface(s_grim_dll_00474b98);
    pcVar5 = extraout_EDX_00;
  }
  console_flush_log(&console_log_queue,pcVar5);
  if (grim_interface_ptr == grim_interface_ptr + 1) {
    console_printf(&console_log_queue,PTR_DAT_00473a14);
    console_printf(&console_log_queue,PTR_s_I_ll_tell_you_a_little_secret__t_00473a18);
    console_printf(&console_log_queue,PTR_s__ReDistrBuildXX__00473a10);
    console_printf(&console_log_queue,PTR_s_Do_remember_you_re_probably_seei_00473a1c);
    console_printf(&console_log_queue,PTR_s_Inside_AlienZooKeeper_can_be_fou_00473a20);
    console_printf(&console_log_queue,PTR_s_I_ll_state_this_as_clearly_as_I_c_00473a24);
    console_printf(&console_log_queue,PTR_s_This_is_all_about_fixing_city_wa_00473a28);
    console_printf(&console_log_queue,PTR_s_Brave_little_haxx0r_aren_t_you__00473a34);
    console_printf(&console_log_queue,PTR_DAT_00473a2c);
  }
  if (grim_interface_ptr == (int *)0x0) {
    MessageBoxA((HWND)0x0,s_Grim_dll_is_corrupted_or_missing_00474b10,&DAT_00474b90,0);
    return 0;
  }
  console_printf(&console_log_queue,(byte *)s____interface_created_00474af8);
  console_printf(&console_log_queue,(byte *)s____registering_core_variables_00474ad8);
  register_core_cvars();
  if (DAT_00473a64 != 0x7b) {
    grim_interface_ptr = (int *)0x0;
  }
  console_flush_log(&console_log_queue,filename_02);
  console_printf(&console_log_queue,(byte *)s____loading_config_pre_sets_00474abc);
  config_load_presets();
  game_load_status();
  game_sequence_load();
  console_flush_log(&console_log_queue,filename_03);
  console_printf(&console_log_queue,(byte *)s____invoking_grim_config_00474aa0);
  console_flush_log(&console_log_queue,filename_04);
  cVar1 = (**(code **)(*grim_interface_ptr + 0x10))();
  grim_config_invoked = 1;
  if (cVar1 == '\0') {
    config_sync_from_grim();
    grim_config_invoked = 0;
    (**(code **)*grim_interface_ptr)();
    return 0;
  }
  config_sync_from_grim();
  grim_config_invoked = 0;
  config_load_presets();
  console_printf(&console_log_queue,(byte *)s____setting_system_states_00474a84);
  console_flush_log(&console_log_queue,filename_05);
  pcVar5 = (char *)(**(code **)(*grim_interface_ptr + 0x24))();
  terrain_texture_failed = *pcVar5;
  puVar6 = (undefined1 *)(**(code **)(*grim_interface_ptr + 0x24))();
  DAT_004aaeea = *puVar6;
  pfVar7 = (float *)(**(code **)(*grim_interface_ptr + 0x24))();
  config_texture_scale = *pfVar7;
  if ((((config_texture_scale != 0.5) && (config_texture_scale != 1.0)) &&
      (config_texture_scale != 2.0)) && (config_texture_scale != 4.0)) {
    config_texture_scale = 1.0;
  }
  config_blob = DAT_004aaeea;
  pcVar5 = (char *)(**(code **)(*grim_interface_ptr + 0x24))();
  config_windowed = *pcVar5;
  if (terrain_texture_failed == '\0') {
    pcVar5 = s____using_PRIMARY_backend_00474a44;
  }
  else {
    pcVar5 = s____using_SAFEMODE_fallback_backe_00474a60;
  }
  console_printf(&console_log_queue,(byte *)pcVar5);
  pcVar5 = extraout_EDX_01;
  if (grim_interface_ptr == (int *)0x0) {
    console_printf(&console_log_queue,(byte *)s____using_DEVELOPER_backend_00474a28);
    pcVar5 = extraout_EDX_02;
  }
  console_flush_log(&console_log_queue,pcVar5);
  (**(code **)(*grim_interface_ptr + 0x20))();
  (**(code **)(*grim_interface_ptr + 0x20))();
  (**(code **)(*grim_interface_ptr + 0x20))();
  (**(code **)(*grim_interface_ptr + 0x20))();
  console_printf(&console_log_queue,(byte *)s____setting_system_states_00474a84);
  (**(code **)(*grim_interface_ptr + 0x20))();
  piVar8 = (int *)(**(code **)(*grim_interface_ptr + 0x24))();
  config_screen_width = *piVar8;
  piVar8 = (int *)(**(code **)(*grim_interface_ptr + 0x24))();
  config_screen_height = *piVar8;
  if (config_windowed == '\0') {
    console_printf(&console_log_queue,(byte *)s____selected_fullscreen_mode__dx__004749d0);
  }
  else {
    console_printf(&console_log_queue,(byte *)s____selected_windowed_mode__windo_004749f8);
  }
  DAT_004aaeda = config_music_disabled;
  (**(code **)(*grim_interface_ptr + 0x20))();
  console_printf(&console_log_queue,(byte *)s____using_keyboard_004749bc);
  (**(code **)(*grim_interface_ptr + 0x20))();
  console_printf(&console_log_queue,(byte *)s____using_mouse_004749ac);
  pcVar5 = (char *)0xe;
  (**(code **)(*grim_interface_ptr + 0x20))();
  console_printf(&console_log_queue,(byte *)s____using_joystick_00474998);
  console_printf(&console_log_queue,(byte *)s____initiating_Grim_system_0047497c);
  cVar1 = (**(code **)(*grim_interface_ptr + 0x14))();
  if (cVar1 == '\0') {
    console_printf(&console_log_queue,(byte *)s_Critical_failure__00474968);
    uType = 0;
    pcVar5 = s_Crimsonland__00474958;
    lpText = (LPCSTR)(**(code **)(*grim_interface_ptr + 0x28))();
    MessageBoxA((HWND)0x0,lpText,pcVar5,uType);
    (**(code **)*grim_interface_ptr)();
    return 0;
  }
  console_exec_line(&console_log_queue,s_exec_autoexec_txt_00474944,pcVar5);
  (**(code **)(*grim_interface_ptr + 0x20))();
  (**(code **)(*grim_interface_ptr + 0x20))();
  (**(code **)(*grim_interface_ptr + 0x20))();
  pcVar5 = (char *)0x18;
  (**(code **)(*grim_interface_ptr + 0x20))();
  screen_width_f = (float)config_screen_width;
  _DAT_00471144 = (float)config_screen_height;
  pvVar9 = console_register_cvar(&console_log_queue,s_v_width_00474938,&DAT_00474940,pcVar5);
  *(float *)((int)pvVar9 + 0xc) = (float)config_screen_width;
  pvVar9 = console_register_cvar(&console_log_queue,s_v_height_00474928,&DAT_00474934,pcVar5);
  *(float *)((int)pvVar9 + 0xc) = (float)config_screen_height;
  init_audio_and_terrain();
  (**(code **)(*grim_interface_ptr + 0x20))();
  console_printf(&console_log_queue,(byte *)s_Set_resource_paq_to__crimson_paq_004748f8);
  texture_get_or_load(s_backplasma_0047296c);
  texture_get_or_load(s_mockup_00472964);
  texture_get_or_load(s_logo_esrb_004746d8);
  texture_get_or_load(s_loading_004746e4);
  uStack_598 = 0x42ce2b;
  texture_get_or_load(s_cl_logo_00471f70);
  (**(code **)(*grim_interface_ptr + 0x2c))();
  (**(code **)(*grim_interface_ptr + 0x20))();
  uStack_598 = 0;
  uStack_59c = 0x42ce69;
  (**(code **)(*grim_interface_ptr + 0x2c))();
  uStack_5ac = 0x36;
  uStack_5a8 = 1;
  uStack_5b0 = 0x42ce7e;
  (**(code **)(*grim_interface_ptr + 0x20))();
  uStack_5b0 = 0x3f800000;
  uStack_5b4 = 0;
  uStack_5b8 = 0;
  pHStack_5bc = (HKEY)0x0;
  (**(code **)(*grim_interface_ptr + 0x2c))();
  uVar15 = DAT_00473a30;
  _key_char_count = 0;
  puVar10 = &key_char_buffer;
  for (uVar13 = DAT_00473a30 >> 2; uVar13 != 0; uVar13 = uVar13 - 1) {
    *puVar10 = 0;
    puVar10 = puVar10 + 1;
  }
  for (uVar13 = uVar15 & 3; uVar13 != 0; uVar13 = uVar13 - 1) {
    *(undefined1 *)puVar10 = 0;
    puVar10 = (undefined4 *)((int)puVar10 + 1);
  }
  (**(code **)(*grim_interface_ptr + 0x54))(&key_char_buffer,&key_char_count,uVar15);
  config_sync_from_grim();
  puVar14 = &player_move_key_backward;
  puVar10 = &config_keybind_table_p2;
  do {
    puVar11 = puVar10 + 0x10;
    puVar14[-1] = puVar10[-0xc];
    *puVar14 = puVar10[-0xb];
    puVar14[1] = puVar10[-10];
    puVar14[2] = puVar10[-9];
    puVar14[3] = puVar10[-8];
    puVar14[4] = puVar10[-7];
    puVar14[5] = puVar10[-6];
    puVar14[6] = puVar10[-5];
    puVar14[7] = puVar10[-4];
    puVar14[9] = puVar10[-3];
    puVar14[8] = puVar10[-2];
    puVar14[0xb] = puVar10[-1];
    puVar14[10] = *puVar10;
    puVar14 = puVar14 + 0xd8;
    puVar10 = puVar11;
  } while ((int)puVar11 < 0x4805c0);
  (**(code **)(*grim_interface_ptr + 0x1c))();
  LVar12 = RegCreateKeyExA((HKEY)0x80000001,s_Software_10tons_entertainment_Cr_00474604,0,(LPSTR)0x0
                           ,0,0xf003f,(LPSECURITY_ATTRIBUTES)0x0,&pHStack_5bc,(LPDWORD)0x0);
  if (LVar12 == 0) {
    reg_write_dword((HKEY)pHStack_5bc,s_timePlayed_004745f8,DAT_0048718c);
    RegCloseKey(pHStack_5bc);
  }
  else {
    console_printf(&console_log_queue,(byte *)s_Kameli_was_NOT_hairy__00474874);
  }
  game_save_status();
  console_printf(&console_log_queue,(byte *)s_Leaving_Crimsonland___0047485c);
  pcVar5 = extraout_EDX_03;
  if (DAT_004aaee4 != (void *)0x0) {
    crt_free(DAT_004aaee4);
    pcVar5 = extraout_EDX_04;
  }
  console_flush_log(&console_log_queue,pcVar5);
  audio_shutdown_all();
  console_printf(&console_log_queue,(byte *)s_Shutdown_Grim___00474848);
  (**(code **)(*grim_interface_ptr + 0x18))();
  console_flush_log(&console_log_queue,filename_06);
  (**(code **)*grim_interface_ptr)();
  console_printf(&console_log_queue,(byte *)s_Waving_the_Grim_Reaper_goodbye___00474824);
  console_flush_log(&console_log_queue,filename_07);
  pcVar5 = extraout_EDX_05;
  if (((DAT_004d11f0 == 0) && (DAT_004d11f8 != '\0')) && (DAT_004d11f4 != (LPCCH)0x0)) {
    Sleep(200);
    uStack_598 = uStack_598 & 0xffff0000;
    puVar10 = (undefined4 *)((int)&uStack_598 + 2);
    for (iVar3 = 0xff; iVar3 != 0; iVar3 = iVar3 + -1) {
      *puVar10 = 0;
      puVar10 = puVar10 + 1;
    }
    *(undefined2 *)puVar10 = 0;
    uVar15 = 0xffffffff;
    pCVar16 = DAT_004d11f4;
    do {
      if (uVar15 == 0) break;
      uVar15 = uVar15 - 1;
      cVar1 = *pCVar16;
      pCVar16 = pCVar16 + 1;
    } while (cVar1 != '\0');
    MultiByteToWideChar(0,1,DAT_004d11f4,~uVar15 - 1,(LPWSTR)&uStack_598,0x1ff);
    HVar4 = HlinkNavigateString((IUnknown *)0x0,(LPCWSTR)&uStack_598);
    pcVar5 = extraout_EDX_06;
    if (HVar4 < 0) {
      console_printf(&console_log_queue,(byte *)s_Failed_to_open_browser_at___s___00474800);
      pcVar5 = extraout_EDX_07;
    }
    DAT_004d11f8 = '\0';
  }
  console_flush_log(&console_log_queue,pcVar5);
  return 0;
}



/* effect_init_entry @ 0042de80 */

/* initializes an effect entry to default values */

void __cdecl effect_init_entry(void *entry)

{
  undefined4 *puVar1;
  int iVar2;
  
  *(undefined4 *)((int)entry + 0x2c) = 0;
  *(undefined4 *)((int)entry + 0x24) = 0;
  *(undefined4 *)((int)entry + 0x14) = 0;
  *(undefined4 *)((int)entry + 0x30) = 0x3f800000;
  *(undefined4 *)((int)entry + 0x34) = 0x3f800000;
  *(undefined4 *)((int)entry + 0x18) = 0x3f800000;
  *(undefined4 *)((int)entry + 0x38) = 0x3f800000;
  *(undefined4 *)((int)entry + 0x3c) = 0x3f800000;
  puVar1 = (undefined4 *)((int)entry + 0x50);
  iVar2 = 4;
  do {
    puVar1[2] = 0xffffffff;
    *puVar1 = 0x3f000000;
    puVar1[1] = 0x3f800000;
    puVar1 = puVar1 + 7;
    iVar2 = iVar2 + -1;
  } while (iVar2 != 0);
  return;
}



/* effect_defaults_reset @ 0042df10 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* resets global effect template values */

void effect_defaults_reset(void)

{
  undefined4 *puVar1;
  
  _effect_template_color_r = 0x3f800000;
  _effect_template_color_g = 0x3f800000;
  _effect_template_color_b = 0x3f800000;
  _effect_template_color_a = 0x3f800000;
  _DAT_004ab1b0 = 0;
  _effect_template_flags = 1;
  _effect_template_rotation = 0;
  _effect_template_scale = 0x3f800000;
  _effect_template_age = 0;
  _effect_template_lifetime = 0x3f000000;
  _effect_template_half_height = 0x42000000;
  _effect_template_half_width = 0x42000000;
  _DAT_004ab1b4 = 0;
  _effect_template_rotation_step = 0x3f800000;
  _effect_template_scale_step = 0x3f800000;
  effect_template_vel_x = 0;
  effect_template_vel_y = 0;
  _DAT_004ab268 = 0;
  _DAT_004ab3e8 = &DAT_004ab3ec;
  effect_init_entry(&effect_pool_pos_x);
  puVar1 = &DAT_004ab4a4;
  do {
    *puVar1 = puVar1 + 1;
    effect_init_entry(puVar1 + -0x2e);
    puVar1 = puVar1 + 0x2f;
  } while ((int)puVar1 < 0x4c2b2c);
  _DAT_004c2a70 = &DAT_004c2a74;
  effect_init_entry(&DAT_004c29b8);
  effect_free_list_head = &effect_pool_pos_x;
  _DAT_004c2b34 = 0;
  return;
}



/* effect_free @ 0042e080 */

/* returns an effect entry to the free list */

void __cdecl effect_free(void *entry)

{
  *(void **)((int)entry + 0xb8) = effect_free_list_head;
  *(undefined4 *)((int)entry + 0x2c) = 0;
  effect_free_list_head = entry;
  return;
}



/* effect_select_texture @ 0042e0a0 */

/* selects effect texture page based on effect id */

void __cdecl effect_select_texture(int effect_id)

{
  int iVar1;
  undefined4 uVar2;
  
  iVar1 = *(int *)(&effect_id_size_code + effect_id * 8);
  uVar2 = *(undefined4 *)(&effect_id_frame + effect_id * 8);
  if (iVar1 == 0x10) {
    (**(code **)(*grim_interface_ptr + 0x104))(0x10,uVar2);
    return;
  }
  if (iVar1 == 0x20) {
    (**(code **)(*grim_interface_ptr + 0x104))(8,uVar2);
    return;
  }
  if (iVar1 == 0x40) {
    (**(code **)(*grim_interface_ptr + 0x104))(4,uVar2);
    return;
  }
  if (iVar1 == 0x80) {
    (**(code **)(*grim_interface_ptr + 0x104))(2,uVar2);
  }
  return;
}



/* effect_spawn @ 0042e120 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* allocates an effect entry and assigns quad UVs */

void * __cdecl effect_spawn(int effect_id,float *pos)

{
  float fVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  float *pfVar5;
  int iVar6;
  float *pfVar7;
  float *pfVar8;
  
  if (config_detail_preset < 3) {
    uVar4 = DAT_004c2b38 & 1;
    DAT_004c2b38 = DAT_004c2b38 + 1;
    if (uVar4 != 0) {
      return &DAT_004ab270;
    }
  }
  iVar2 = *(int *)(&effect_id_size_code + effect_id * 8);
  iVar3 = *(int *)(&effect_id_frame + effect_id * 8);
  pfVar5 = effect_free_list_head;
  pfVar7 = (float *)effect_free_list_head[0x2e];
  if ((float *)effect_free_list_head[0x2e] == (float *)0x0) {
    pfVar5 = (float *)&DAT_004ab270;
    pfVar7 = effect_free_list_head;
  }
  effect_free_list_head = pfVar7;
  pfVar7 = (float *)&effect_template_vel_x;
  pfVar8 = pfVar5 + 3;
  for (iVar6 = 0xf; iVar6 != 0; iVar6 = iVar6 + -1) {
    *pfVar8 = *pfVar7;
    pfVar7 = pfVar7 + 1;
    pfVar8 = pfVar8 + 1;
  }
  *pfVar5 = *pos;
  pfVar5[1] = pos[1];
  *(char *)(pfVar5 + 2) = (char)effect_id;
  if (iVar2 == 0x10) {
    pfVar5[0x17] = (float)(&effect_uv16_u)[iVar3 * 2];
    pfVar5[0x18] = (float)(&effect_uv16_v)[iVar3 * 2];
    fVar1 = -_effect_template_half_height;
    pfVar5[0x12] = -_effect_template_half_width;
    pfVar5[0x13] = fVar1;
    fVar1 = (float)(&effect_uv16_v)[iVar3 * 2];
    pfVar5[0x1e] = _effect_uv_step_16 + (float)(&effect_uv16_u)[iVar3 * 2];
    pfVar5[0x1f] = fVar1;
    fVar1 = -_effect_template_half_height;
    pfVar5[0x19] = _effect_template_half_width;
    pfVar5[0x1a] = fVar1;
    fVar1 = _effect_uv_step_16 + (float)(&effect_uv16_v)[iVar3 * 2];
    pfVar5[0x25] = _effect_uv_step_16 + (float)(&effect_uv16_u)[iVar3 * 2];
    pfVar5[0x26] = fVar1;
    fVar1 = _effect_template_half_height;
    pfVar5[0x20] = _effect_template_half_width;
    pfVar5[0x21] = fVar1;
    fVar1 = _effect_uv_step_16 + (float)(&effect_uv16_v)[iVar3 * 2];
    pfVar5[0x2c] = (float)(&effect_uv16_u)[iVar3 * 2];
    pfVar5[0x2d] = fVar1;
    fVar1 = _effect_template_half_height;
    pfVar5[0x27] = -_effect_template_half_width;
    pfVar5[0x28] = fVar1;
    return pfVar5;
  }
  if (iVar2 == 0x20) {
    pfVar5[0x17] = (float)(&effect_uv8_u)[iVar3 * 2];
    pfVar5[0x18] = (float)(&effect_uv8_v)[iVar3 * 2];
    fVar1 = -_effect_template_half_height;
    pfVar5[0x12] = -_effect_template_half_width;
    pfVar5[0x13] = fVar1;
    fVar1 = (float)(&effect_uv8_v)[iVar3 * 2];
    pfVar5[0x1e] = _effect_uv_step_8 + (float)(&effect_uv8_u)[iVar3 * 2];
    pfVar5[0x1f] = fVar1;
    fVar1 = -_effect_template_half_height;
    pfVar5[0x19] = _effect_template_half_width;
    pfVar5[0x1a] = fVar1;
    fVar1 = _effect_uv_step_8 + (float)(&effect_uv8_v)[iVar3 * 2];
    pfVar5[0x25] = _effect_uv_step_8 + (float)(&effect_uv8_u)[iVar3 * 2];
    pfVar5[0x26] = fVar1;
    fVar1 = _effect_template_half_height;
    pfVar5[0x20] = _effect_template_half_width;
    pfVar5[0x21] = fVar1;
    fVar1 = _effect_uv_step_8 + (float)(&effect_uv8_v)[iVar3 * 2];
    pfVar5[0x2c] = (float)(&effect_uv8_u)[iVar3 * 2];
    pfVar5[0x2d] = fVar1;
    fVar1 = _effect_template_half_height;
    pfVar5[0x27] = -_effect_template_half_width;
    pfVar5[0x28] = fVar1;
    return pfVar5;
  }
  if (iVar2 != 0x40) {
    if (iVar2 == 0x80) {
      pfVar5[0x17] = (float)(&effect_uv2_u)[iVar3 * 2];
      pfVar5[0x18] = (float)(&effect_uv2_v)[iVar3 * 2];
      fVar1 = -_effect_template_half_height;
      pfVar5[0x12] = -_effect_template_half_width;
      pfVar5[0x13] = fVar1;
      fVar1 = (float)(&effect_uv2_v)[iVar3 * 2];
      pfVar5[0x1e] = _effect_uv_step_2 + (float)(&effect_uv2_u)[iVar3 * 2];
      pfVar5[0x1f] = fVar1;
      fVar1 = -_effect_template_half_height;
      pfVar5[0x19] = _effect_template_half_width;
      pfVar5[0x1a] = fVar1;
      fVar1 = _effect_uv_step_2 + (float)(&effect_uv2_v)[iVar3 * 2];
      pfVar5[0x25] = _effect_uv_step_2 + (float)(&effect_uv2_u)[iVar3 * 2];
      pfVar5[0x26] = fVar1;
      fVar1 = _effect_template_half_height;
      pfVar5[0x20] = _effect_template_half_width;
      pfVar5[0x21] = fVar1;
      fVar1 = _effect_uv_step_2 + (float)(&effect_uv2_v)[iVar3 * 2];
      pfVar5[0x2c] = (float)(&effect_uv2_u)[iVar3 * 2];
      pfVar5[0x2d] = fVar1;
      fVar1 = _effect_template_half_height;
      pfVar5[0x27] = -_effect_template_half_width;
      pfVar5[0x28] = fVar1;
    }
    return pfVar5;
  }
  pfVar5[0x17] = (float)(&effect_uv4_u)[iVar3 * 2];
  pfVar5[0x18] = (float)(&effect_uv4_v)[iVar3 * 2];
  fVar1 = -_effect_template_half_height;
  pfVar5[0x12] = -_effect_template_half_width;
  pfVar5[0x13] = fVar1;
  fVar1 = (float)(&effect_uv4_v)[iVar3 * 2];
  pfVar5[0x1e] = _effect_uv_step_4 + (float)(&effect_uv4_u)[iVar3 * 2];
  pfVar5[0x1f] = fVar1;
  fVar1 = -_effect_template_half_height;
  pfVar5[0x19] = _effect_template_half_width;
  pfVar5[0x1a] = fVar1;
  fVar1 = _effect_uv_step_4 + (float)(&effect_uv4_v)[iVar3 * 2];
  pfVar5[0x25] = _effect_uv_step_4 + (float)(&effect_uv4_u)[iVar3 * 2];
  pfVar5[0x26] = fVar1;
  fVar1 = _effect_template_half_height;
  pfVar5[0x20] = _effect_template_half_width;
  pfVar5[0x21] = fVar1;
  fVar1 = _effect_uv_step_4 + (float)(&effect_uv4_v)[iVar3 * 2];
  pfVar5[0x2c] = (float)(&effect_uv4_u)[iVar3 * 2];
  pfVar5[0x2d] = fVar1;
  fVar1 = _effect_template_half_height;
  pfVar5[0x27] = -_effect_template_half_width;
  pfVar5[0x28] = fVar1;
  return pfVar5;
}



/* effects_update @ 0042e710 */

/* ticks active effects and frees expired entries */

void effects_update(void)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float *pfVar4;
  
  pfVar4 = (float *)&effect_pool_age;
  do {
    fVar1 = pfVar4[2];
    if (fVar1 != 0.0) {
      fVar2 = frame_dt + *pfVar4;
      *pfVar4 = fVar2;
      if (fVar2 < pfVar4[1]) {
        if (0.0 <= fVar2) {
          fVar3 = frame_dt * pfVar4[-5];
          pfVar4[-9] = frame_dt * pfVar4[-6] + pfVar4[-9];
          pfVar4[-8] = fVar3 + pfVar4[-8];
          if (((uint)fVar1 & 4) != 0) {
            pfVar4[-4] = frame_dt * pfVar4[7] + pfVar4[-4];
          }
          if (((uint)fVar1 & 8) != 0) {
            pfVar4[-3] = frame_dt * pfVar4[8] + pfVar4[-3];
          }
          if (((uint)fVar1 & 0x10) != 0) {
            pfVar4[6] = 1.0 - fVar2 / pfVar4[1];
          }
        }
      }
      else {
        if (((uint)fVar1 & 0x80) != 0) {
          if (((uint)fVar1 & 0x100) == 0) {
            pfVar4[6] = 0.8;
          }
          else {
            pfVar4[6] = 0.35;
          }
          fx_queue_add((uint)*(byte *)(pfVar4 + -7),pfVar4 + -9,pfVar4[-2] + pfVar4[-2],
                       pfVar4[-1] + pfVar4[-1],pfVar4[-4],pfVar4 + 3);
        }
        effect_free(pfVar4 + -9);
      }
    }
    pfVar4 = pfVar4 + 0x2f;
  } while ((int)pfVar4 < 0x4c2b54);
  return;
}



/* effects_render @ 0042e820 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* renders active effects (rotated quads) */

void effects_render(void)

{
  undefined1 uVar1;
  undefined4 *puVar2;
  float10 fVar3;
  float10 fVar4;
  longlong lVar5;
  undefined2 uVar7;
  undefined3 uVar6;
  float *pfStack_64;
  float *pfStack_60;
  float *pfStack_5c;
  float fStack_58;
  undefined4 uStack_54;
  float fStack_50;
  float fStack_4c;
  float fStack_48;
  float fStack_44;
  float fStack_40;
  float fStack_3c;
  float local_38;
  float fStack_34;
  
  fStack_3c = 2.66247e-44;
  local_38 = 7.00649e-45;
  fStack_40 = 6.144453e-39;
  (**(code **)(*grim_interface_ptr + 0x20))();
  fStack_50 = 2.8026e-44;
  fStack_4c = 8.40779e-45;
  uStack_54 = 6.144486e-39;
  (**(code **)(*grim_interface_ptr + 0x20))();
  uStack_54 = 0.0;
  fStack_58 = particles_texture;
  pfStack_5c = (float *)0x42e86b;
  (**(code **)(*grim_interface_ptr + 0xc4))();
  pfStack_5c = (float *)0x42e879;
  (**(code **)(*grim_interface_ptr + 0xe8))();
  puVar2 = &effect_pool_color_g;
  do {
    if (((puVar2[-2] != 0) && (0.0 <= (float)puVar2[-4])) && ((puVar2[-2] & 0x40) != 0)) {
      fStack_4c = (float)puVar2[-8];
      fVar3 = (float10)fcos((float10)fStack_4c);
      fVar4 = (float10)fsin((float10)fStack_4c);
      fStack_40 = (float)fVar3 * (float)puVar2[-7];
      fStack_3c = (float)-fVar4 * (float)puVar2[-7];
      local_38 = (float)fVar4 * (float)puVar2[-7];
      fStack_34 = (float)(fVar3 * (float10)(float)puVar2[-7]);
      pfStack_5c = (float *)0x42e8ff;
      lVar5 = __ftol();
      uStack_54 = (float)CONCAT13((char)lVar5,(undefined3)uStack_54);
      pfStack_5c = (float *)0x42e911;
      lVar5 = __ftol();
      uStack_54._0_3_ = CONCAT12((char)lVar5,(undefined2)uStack_54);
      pfStack_5c = (float *)0x42e922;
      lVar5 = __ftol();
      uStack_54._0_2_ = CONCAT11((char)lVar5,(undefined1)uStack_54);
      pfStack_5c = (float *)0x42e934;
      lVar5 = __ftol();
      fStack_48 = _camera_offset_x + (float)puVar2[-0xd];
      uStack_54 = (float)CONCAT31(uStack_54._1_3_,(char)lVar5);
      fStack_50 = uStack_54;
      pfStack_5c = &fStack_50;
      fStack_44 = _camera_offset_y + (float)puVar2[-0xc];
      pfStack_60 = &fStack_40;
      pfStack_64 = &fStack_48;
      (**(code **)(*grim_interface_ptr + 0x134))(puVar2 + 5,4);
    }
    puVar2 = puVar2 + 0x2f;
  } while ((int)puVar2 < 0x4c2b64);
  pfStack_5c = (float *)0x42e99d;
  (**(code **)(*grim_interface_ptr + 0xf0))();
  (**(code **)(*grim_interface_ptr + 0x20))(0x14,2);
  (**(code **)(*grim_interface_ptr + 0xe8))();
  puVar2 = &effect_pool_color_g;
  do {
    if (((puVar2[-2] != 0) && (0.0 <= (float)puVar2[-4])) && ((puVar2[-2] & 0x40) == 0)) {
      pfStack_60 = (float *)puVar2[-8];
      fVar3 = (float10)fcos((float10)(float)pfStack_60);
      fVar4 = (float10)fsin((float10)(float)pfStack_60);
      uStack_54 = (float)fVar3 * (float)puVar2[-7];
      fStack_50 = (float)-fVar4 * (float)puVar2[-7];
      fStack_4c = (float)fVar4 * (float)puVar2[-7];
      fStack_48 = (float)(fVar3 * (float10)(float)puVar2[-7]);
      lVar5 = __ftol();
      uVar1 = (undefined1)lVar5;
      lVar5 = __ftol();
      uVar7 = CONCAT11(uVar1,(char)lVar5);
      lVar5 = __ftol();
      uVar6 = CONCAT21(uVar7,(char)lVar5);
      lVar5 = __ftol();
      pfStack_5c = (float *)(_camera_offset_x + (float)puVar2[-0xd]);
      pfStack_64 = (float *)CONCAT31(uVar6,(char)lVar5);
      fStack_58 = _camera_offset_y + (float)puVar2[-0xc];
      (**(code **)(*grim_interface_ptr + 0x134))(puVar2 + 5,4,&pfStack_5c,&uStack_54,&pfStack_64);
    }
    puVar2 = puVar2 + 0x2f;
  } while ((int)puVar2 < 0x4c2b64);
  (**(code **)(*grim_interface_ptr + 0xf0))();
  (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
  return;
}



/* FUN_0042eb10 @ 0042eb10 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __cdecl FUN_0042eb10(undefined4 *param_1,float param_2,float param_3)

{
  uint uVar1;
  int iVar2;
  float10 fVar3;
  float10 fVar4;
  float10 fVar5;
  
  if (config_fx_toggle == '\0') {
    _effect_template_lifetime = 0.25 - param_3;
    fVar3 = (float10)param_2 + (float10)3.1415927;
    _effect_template_color_r = 0x3f800000;
    _effect_template_color_g = 0x3f800000;
    fVar4 = (float10)fcos(fVar3);
    _effect_template_flags = 0xc9;
    _effect_template_color_b = 0x3f800000;
    _effect_template_color_a = 0x3f000000;
    _effect_template_scale_step = 0.0;
    _effect_template_age = param_3;
    iVar2 = 2;
    fVar5 = (float10)fsin(fVar3);
    do {
      uVar1 = _rand();
      _effect_template_rotation = (float)(int)((uVar1 & 0x3f) - 0x20) * 0.1 + (float)fVar3;
      uVar1 = _rand();
      _effect_template_half_width = (float)((uVar1 & 7) + 1);
      _effect_template_half_height = _effect_template_half_width;
      uVar1 = _rand();
      effect_template_vel_x = (float)((uVar1 & 0x3f) + 100) * (float)fVar4;
      uVar1 = _rand();
      _effect_template_rotation_step = 0;
      effect_template_vel_y = (float)((uVar1 & 0x3f) + 100) * (float)fVar5;
      uVar1 = _rand();
      _effect_template_scale_step = (float)(uVar1 & 0x7f) * 0.03 + 0.1;
      effect_spawn(7,(float *)param_1);
      iVar2 = iVar2 + -1;
    } while (iVar2 != 0);
  }
  return;
}



/* effect_spawn_freeze_shard @ 0042ec80 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* spawns a random freeze shard effect (ids 8..10) around the given angle */

void __cdecl effect_spawn_freeze_shard(float *pos,float angle)

{
  float fVar1;
  uint uVar2;
  int iVar3;
  float10 fVar4;
  
  _effect_template_color_r = 0x3f800000;
  _effect_template_flags = 0x1cd;
  _effect_template_color_g = 0x3f800000;
  _effect_template_color_b = 0x3f800000;
  _effect_template_color_a = 0x3f000000;
  uVar2 = _rand();
  _effect_template_age = 0;
  _effect_template_half_width = 8.0;
  _effect_template_half_height = 8.0;
  _effect_template_lifetime = (float)(uVar2 & 0xf) * 0.01 + 0.2;
  fVar1 = angle + 3.1415927;
  iVar3 = _rand();
  _effect_template_rotation = (float)(iVar3 % 100) * 0.01 + fVar1;
  iVar3 = _rand();
  _effect_template_half_width = (float)(iVar3 % 5 + 7);
  fVar4 = (float10)fcos((float10)fVar1);
  effect_template_vel_x = (float)(fVar4 * (float10)114.0);
  fVar4 = (float10)fsin((float10)fVar1);
  effect_template_vel_y = (float)(fVar4 * (float10)114.0);
  _effect_template_half_height = _effect_template_half_width;
  iVar3 = _rand();
  _effect_template_rotation_step = ((float)(iVar3 % 0x14) * 0.1 - 1.0) * 4.0;
  uVar2 = _rand();
  _effect_template_scale_step = (float)(int)-(uVar2 & 0xf) * 0.1;
  iVar3 = _rand();
  effect_spawn(iVar3 % 3 + 8,pos);
  return;
}



/* effect_spawn_freeze_shatter @ 0042ee00 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* four-way shatter burst (id 0xe) plus extra freeze shards */

void __cdecl effect_spawn_freeze_shatter(float *pos,float angle)

{
  int iVar1;
  int iVar2;
  float10 fVar3;
  undefined4 local_14;
  
  _effect_template_color_r = 0x3f800000;
  _effect_template_flags = 0x5d;
  _effect_template_color_g = 0x3f800000;
  _effect_template_color_b = 0x3f800000;
  _effect_template_color_a = 0x3f000000;
  _effect_template_age = 0;
  _effect_template_lifetime = 0x3f8ccccd;
  _effect_template_scale_step = 0;
  local_14 = 0;
  do {
    fVar3 = (float10)local_14 * (float10)1.5707964 + (float10)angle;
    _effect_template_rotation = (float)fVar3;
    fVar3 = (float10)fcos(fVar3);
    effect_template_vel_x = (float)(fVar3 * (float10)42.0);
    fVar3 = (float10)fsin((float10)_effect_template_rotation);
    effect_template_vel_y = (float)(fVar3 * (float10)42.0);
    iVar1 = _rand();
    _effect_template_half_width = (float)(iVar1 % 10 + 0x12);
    _effect_template_half_height = _effect_template_half_width;
    iVar1 = _rand();
    _effect_template_rotation_step = ((float)(iVar1 % 0x14) * 0.1 - 1.0) * 1.9;
    effect_spawn(0xe,pos);
    local_14 = local_14 + 1;
  } while (local_14 < 4);
  iVar1 = 4;
  do {
    iVar2 = _rand();
    effect_spawn_freeze_shard(pos,(float)(iVar2 % 0x264) * 0.01);
    iVar1 = iVar1 + -1;
  } while (iVar1 != 0);
  return;
}



/* effect_spawn_burst @ 0042ef60 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* generic burst loop for effect id 0 */

void __cdecl effect_spawn_burst(float *pos,int count)

{
  uint uVar1;
  int iVar2;
  
  _effect_template_color_r = 0x3ecccccd;
  _effect_template_flags = 0x1d;
  _effect_template_color_g = 0x3f000000;
  _effect_template_color_b = 0x3f800000;
  _effect_template_color_a = 0x3f000000;
  _effect_template_age = 0;
  _effect_template_lifetime = 0x3f000000;
  _effect_template_half_width = 0x42000000;
  _effect_template_half_height = 0x42000000;
  if (0 < count) {
    do {
      uVar1 = _rand();
      _effect_template_rotation = (float)(uVar1 & 0x7f) * 0.049087387;
      uVar1 = _rand();
      effect_template_vel_x = (float)(int)((uVar1 & 0x7f) - 0x40);
      uVar1 = _rand();
      effect_template_vel_y = (float)(int)((uVar1 & 0x7f) - 0x40);
      iVar2 = _rand();
      _effect_template_scale_step = (float)(iVar2 % 100) * 0.01 + 0.1;
      effect_spawn(0,pos);
      count = count + -1;
    } while (count != 0);
  }
  return;
}



/* FUN_0042f080 @ 0042f080 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __cdecl FUN_0042f080(undefined4 *param_1)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  
  _effect_template_color_r = 0x3e99999a;
  _effect_template_flags = 0x19;
  _effect_template_color_g = 0x3f19999a;
  _effect_template_color_b = 0x3f666666;
  _effect_template_color_a = 0x3f800000;
  _effect_template_age = 0;
  _effect_template_lifetime = 0x3e99999a;
  _effect_template_half_width = 0x42100000;
  _effect_template_half_height = 0x42100000;
  _effect_template_rotation = 0.0;
  effect_template_vel_x = 0.0;
  effect_template_vel_y = 0.0;
  _effect_template_scale_step = -4.0;
  effect_spawn(1,(float *)param_1);
  _effect_template_color_b = 0x3f800000;
  _effect_template_color_r = 0x3ecccccd;
  _effect_template_flags = 0x1d;
  _effect_template_color_g = 0x3f000000;
  _effect_template_color_a = 0x3f000000;
  _effect_template_age = 0;
  _effect_template_lifetime = 0x3e99999a;
  _effect_template_half_width = 0x42000000;
  _effect_template_half_height = 0x42000000;
  iVar3 = 4;
  if (config_detail_preset < 3) {
    iVar3 = 2;
  }
  for (; iVar3 != 0; iVar3 = iVar3 + -1) {
    uVar1 = _rand();
    _effect_template_rotation = (float)(uVar1 & 0x7f) * 0.049087387;
    uVar1 = _rand();
    effect_template_vel_x = (float)(int)((uVar1 & 0x7f) - 0x40) * 1.4;
    uVar1 = _rand();
    effect_template_vel_y = (float)(int)((uVar1 & 0x7f) - 0x40) * 1.4;
    iVar2 = _rand();
    _effect_template_scale_step = (float)(iVar2 % 100) * 0.01 + 0.1;
    effect_spawn(0,(float *)param_1);
  }
  return;
}



/* FUN_0042f270 @ 0042f270 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __cdecl FUN_0042f270(undefined4 *param_1,float param_2,float param_3)

{
  _effect_template_lifetime = param_3 * 0.8;
  _effect_template_color_g = 0x3f19999a;
  _effect_template_scale_step = param_2 * 45.0;
  _effect_template_color_r = 0x3f19999a;
  _effect_template_flags = 0x19;
  _effect_template_color_b = 0x3f666666;
  _effect_template_color_a = 0x3f800000;
  _effect_template_age = 0;
  _effect_template_half_width = 0x40800000;
  _effect_template_half_height = 0x40800000;
  _effect_template_rotation = 0;
  effect_template_vel_x = 0;
  effect_template_vel_y = 0;
  effect_spawn(1,(float *)param_1);
  return;
}



/* FUN_0042f330 @ 0042f330 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __cdecl FUN_0042f330(undefined4 *param_1,float param_2,undefined4 param_3)

{
  _effect_template_scale_step = param_2 * 45.0;
  _effect_template_color_b = 0x3e99999a;
  _effect_template_color_r = 0x3f666666;
  _effect_template_color_g = 0x3f19999a;
  _effect_template_flags = 0x19;
  _effect_template_color_a = 0x3f800000;
  _effect_template_age = 0x3dcccccd;
  _effect_template_lifetime = param_3;
  _effect_template_half_width = 0x40800000;
  _effect_template_half_height = 0x40800000;
  _effect_template_rotation = 0;
  effect_template_vel_x = 0;
  effect_template_vel_y = 0;
  effect_spawn(1,(float *)param_1);
  return;
}



/* FUN_0042f3f0 @ 0042f3f0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __cdecl FUN_0042f3f0(float *param_1,undefined4 param_2,int param_3)

{
  float fVar1;
  uint uVar2;
  int iVar3;
  float10 fVar4;
  float10 fVar5;
  longlong lVar6;
  float local_10;
  float local_c;
  undefined4 local_8;
  undefined4 local_4;
  
  local_10 = 1.0;
  local_c = 0.9;
  local_8 = 0x3dcccccd;
  local_4 = 0x3f800000;
  _effect_template_color_r = 0x3f800000;
  _effect_template_flags = 0x19;
  _effect_template_color_g = 0x3f666666;
  _effect_template_color_b = 0x3dcccccd;
  _effect_template_color_a = 0x3f800000;
  _effect_template_half_width = 0x40800000;
  _effect_template_half_height = 0x40800000;
  _effect_template_rotation = 0;
  effect_template_vel_x = 0;
  effect_template_vel_y = 0;
  _effect_template_scale_step = 0x425c0000;
  if (0 < param_3) {
    lVar6 = __ftol();
    do {
      uVar2 = _rand();
      fVar1 = (float)(uVar2 & 0x1ff) * 0.001953125 * 6.2831855;
      iVar3 = _rand();
      fVar4 = (float10)(iVar3 % (int)lVar6);
      fVar5 = (float10)fcos((float10)fVar1);
      local_10 = (float)(fVar5 * fVar4 + (float10)*param_1);
      fVar5 = (float10)fsin((float10)fVar1);
      local_c = (float)(fVar5 * fVar4 + (float10)param_1[1]);
      uVar2 = _rand();
      _effect_template_age = (float)(int)-(uVar2 & 0xff) * 0.0012;
      _effect_template_lifetime = 0.1 - _effect_template_age;
      effect_spawn(0,&local_10);
      param_3 = param_3 + -1;
    } while (param_3 != 0);
  }
  return;
}



/* FUN_0042f540 @ 0042f540 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __cdecl FUN_0042f540(undefined4 *param_1,float param_2)

{
  float fVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  longlong lVar5;
  
  fVar1 = param_2 * 0.8;
  _effect_template_color_r = 0x3ecccccd;
  _effect_template_lifetime = fVar1 * 0.7;
  _effect_template_color_a = 0x3f000000;
  _effect_template_flags = 0x1d;
  _effect_template_color_g = 0x3f000000;
  _effect_template_color_b = 0x3f800000;
  _effect_template_age = 0;
  if (1.1 < _effect_template_lifetime) {
    _effect_template_lifetime = 1.1;
  }
  _effect_template_half_width = fVar1 * 32.0;
  _effect_template_half_height = _effect_template_half_width;
  lVar5 = __ftol();
  iVar2 = (int)lVar5;
  if (config_detail_preset < 3) {
    iVar2 = iVar2 / 2;
  }
  if (0 < iVar2) {
    do {
      uVar3 = _rand();
      _effect_template_rotation = (float)(uVar3 & 0x7f) * 0.049087387;
      uVar3 = _rand();
      effect_template_vel_x = (float)(int)((uVar3 & 0x7f) - 0x40) * fVar1 * 1.4;
      uVar3 = _rand();
      effect_template_vel_y = (float)(int)((uVar3 & 0x7f) - 0x40) * fVar1 * 1.4;
      iVar4 = _rand();
      _effect_template_scale_step = ((float)(iVar4 % 100) * 0.01 + 0.1) * fVar1;
      effect_spawn(0,(float *)param_1);
      iVar2 = iVar2 + -1;
    } while (iVar2 != 0);
  }
  return;
}



/* FUN_0042f6c0 @ 0042f6c0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __cdecl FUN_0042f6c0(undefined4 *param_1,float param_2)

{
  undefined4 *pos;
  int iVar1;
  int iVar2;
  uint uVar3;
  
  pos = param_1;
  _effect_template_scale_step = param_2 * 25.0;
  _effect_template_color_r = 0x3f19999a;
  _effect_template_flags = 0x19;
  _effect_template_color_g = 0x3f19999a;
  _effect_template_color_b = 0x3f19999a;
  _effect_template_color_a = 0x3f800000;
  _effect_template_lifetime = 0.35;
  _effect_template_age = -0.1;
  _effect_template_half_width = 0x42000000;
  _effect_template_half_height = 0x42000000;
  _effect_template_rotation = 0.0;
  effect_template_vel_x = 0.0;
  effect_template_vel_y = 0.0;
  effect_spawn(1,(float *)param_1);
  _effect_template_color_b = 0x3dcccccd;
  _effect_template_color_r = 0x3dcccccd;
  _effect_template_flags = 0x5d;
  _effect_template_color_g = 0x3dcccccd;
  _effect_template_color_a = 0x3f800000;
  _effect_template_rotation = 0.0;
  effect_template_vel_x = 0.0;
  effect_template_vel_y = 0.0;
  if (3 < config_detail_preset) {
    param_1 = (undefined4 *)0x0;
    do {
      _effect_template_half_width = 0x42000000;
      _effect_template_half_height = 0x42000000;
      _effect_template_age = (float)(int)param_1 * 0.2 - 0.5;
      _effect_template_lifetime = (float)(int)param_1 * 0.2 + 0.6;
      iVar1 = _rand();
      _effect_template_rotation_step = 1.4;
      _effect_template_rotation = (float)(iVar1 % 0x266) * 0.02;
      _effect_template_scale_step = param_2 * 5.0;
      effect_spawn(0x11,(float *)pos);
      param_1 = (undefined4 *)((int)param_1 + 1);
    } while ((int)param_1 < 2);
  }
  _effect_template_scale_step = param_2 * 45.0;
  _effect_template_color_r = 0x3f800000;
  _effect_template_flags = 0x19;
  _effect_template_color_g = 0x3f800000;
  _effect_template_color_b = 0x3f800000;
  _effect_template_color_a = 0x3f800000;
  _effect_template_age = 0.0;
  _effect_template_lifetime = 0.3;
  _effect_template_half_width = 0x42000000;
  _effect_template_half_height = 0x42000000;
  _effect_template_rotation = 0.0;
  effect_template_vel_x = 0.0;
  effect_template_vel_y = 0.0;
  effect_spawn(0,(float *)pos);
  _effect_template_color_b = 0x3f800000;
  _effect_template_color_r = 0x3f800000;
  _effect_template_flags = 0x1d;
  _effect_template_color_g = 0x3f800000;
  _effect_template_color_a = 0x3f800000;
  _effect_template_lifetime = 0.7;
  _effect_template_age = 0.0;
  _effect_template_half_width = 0x42000000;
  _effect_template_half_height = 0x42000000;
  if (config_detail_preset < 2) {
    iVar1 = 1;
  }
  else {
    iVar1 = (3 < config_detail_preset) + 3;
  }
  for (; iVar1 != 0; iVar1 = iVar1 + -1) {
    iVar2 = _rand();
    _effect_template_rotation = (float)(iVar2 % 0x13a) * 0.02;
    uVar3 = _rand();
    effect_template_vel_x = (float)(int)((uVar3 & 0x3f) * 2 + -0x40);
    uVar3 = _rand();
    effect_template_vel_y = (float)(int)((uVar3 & 0x3f) * 2 + -0x40);
    iVar2 = _rand();
    _effect_template_scale_step = (float)(iVar2 - 3U & 7) * param_2;
    iVar2 = _rand();
    _effect_template_rotation_step = (float)(iVar2 + 3U & 7);
    effect_spawn(0xc,(float *)pos);
  }
  return;
}



/* FUN_0042faa0 @ 0042faa0 */

void FUN_0042faa0(void)

{
  FUN_00461981(&perk_name_table,0x14,0x80,&LAB_0042fac0);
  return;
}



/* FUN_0042fae0 @ 0042fae0 */

void FUN_0042fae0(void)

{
  crt_atexit(&LAB_0042faf0);
  return;
}



/* perk_can_offer @ 0042fb10 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* returns nonzero when perk is eligible for selection */

int __cdecl perk_can_offer(int perk_index)

{
  int iVar1;
  uint uVar2;
  
  uVar2 = _config_game_mode;
  if (((((_config_game_mode != 3) || (config_full_version == '\0')) || (_quest_stage_minor != 10))
      || ((_quest_stage_major != 2 ||
          (((perk_index != perk_id_poison_bullets && (perk_index != perk_id_veins_of_poison)) &&
           (perk_index != perk_id_plaguebearer)))))) &&
     (((_config_player_count != 2 || (((&perk_flags_table)[perk_index * 0x14] & 2) != 0)) &&
      ((_config_game_mode != 3 ||
       (uVar2 = perk_index * 5, ((&perk_flags_table)[perk_index * 0x14] & 1) != 0)))))) {
    iVar1 = *(int *)(&perk_prereq_table + perk_index * 0x14);
    if (iVar1 == -1) {
      return -0xff;
    }
    if (0 < (int)(&player_perk_counts)[iVar1]) {
      return CONCAT31((int3)((uint)iVar1 >> 8),1);
    }
    uVar2 = game_is_full_version();
    if (((((char)uVar2 == '\0') && (perk_index != perk_id_living_fortress)) &&
        (perk_index != perk_id_man_bomb)) && (perk_index != perk_id_fire_caugh)) {
      uVar2 = perk_id_tough_reloader;
    }
  }
  return uVar2 & 0xffffff00;
}



/* perk_select_random @ 0042fbd0 */

/* randomly selects an eligible perk index */

int perk_select_random(void)

{
  int iVar1;
  int iVar2;
  int iVar3;
  
  iVar3 = 1;
  do {
    iVar1 = _rand();
    iVar1 = iVar1 % DAT_004c2c38 + 1;
    if ((&perk_available_table)[iVar1 * 0x14] != '\0') {
      iVar2 = perk_can_offer(iVar1);
      if ((char)iVar2 != '\0') {
        return iVar1;
      }
    }
    iVar3 = iVar3 + 1;
  } while (iVar3 < 0x3e9);
  console_printf(&console_log_queue,(byte *)(s___Perk_Randomizer_failed_to_gene_00475696 + 2));
  return perk_id_instant_winner;
}



/* perks_rebuild_available @ 0042fc30 */

/* rebuilds perk availability/unlock flags */

void perks_rebuild_available(void)

{
  int iVar1;
  int iVar2;
  undefined1 *puVar3;
  int iVar4;
  int iVar5;
  int *piVar6;
  
  iVar4 = DAT_004c2c38 + 1;
  if (0 < iVar4) {
    puVar3 = &perk_available_table;
    do {
      *puVar3 = 0;
      puVar3 = puVar3 + 0x14;
      iVar4 = iVar4 + -1;
    } while (iVar4 != 0);
  }
  iVar4 = perk_id_antiperk;
  puVar3 = &DAT_004c2c60;
  (&perk_available_table)[perk_id_antiperk * 0x14] = 0;
  do {
    *puVar3 = 1;
    iVar1 = perk_id_fire_caugh;
    iVar5 = perk_id_living_fortress;
    iVar2 = quest_unlock_index;
    puVar3 = puVar3 + 0x14;
  } while ((int)puVar3 < 0x4c2e7c);
  (&perk_available_table)[perk_id_man_bomb * 0x14] = 1;
  (&perk_available_table)[iVar5 * 0x14] = 1;
  (&perk_available_table)[iVar1 * 0x14] = 1;
  (&perk_available_table)[perk_id_tough_reloader * 0x14] = 1;
  iVar5 = 0;
  if (0 < iVar2) {
    piVar6 = &quest_unlock_perk_id;
    do {
      if (0x484fe7 < (int)piVar6) break;
      iVar1 = *piVar6;
      iVar5 = iVar5 + 1;
      piVar6 = piVar6 + 0xb;
      (&perk_available_table)[iVar1 * 0x14] = 1;
    } while (iVar5 < iVar2);
  }
  (&perk_available_table)[iVar4 * 0x14] = 0;
  return;
}



/* perk_count_get @ 0042fcf0 */

/* returns perk count from DAT_00490968 */

int __cdecl perk_count_get(int perk_id)

{
  return (&player_perk_counts)[perk_id];
}



/* FUN_0042fd00 @ 0042fd00 */

char * __thiscall FUN_0042fd00(uint3 param_1,char *param_2,int param_3)

{
  char cVar1;
  char *pcVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  uint uVar6;
  char *pcVar7;
  int iVar8;
  char *pcVar9;
  int iVar10;
  undefined4 uStack_4;
  
  uVar4 = 0xffffffff;
  pcVar2 = param_2;
  do {
    if (uVar4 == 0) break;
    uVar4 = uVar4 - 1;
    cVar1 = *pcVar2;
    pcVar2 = pcVar2 + 1;
  } while (cVar1 != '\0');
  iVar5 = ~uVar4 - 1;
  uStack_4 = (uint)param_1;
  pcVar2 = operator_new(~uVar4);
  uVar4 = 0xffffffff;
  do {
    pcVar7 = param_2;
    if (uVar4 == 0) break;
    uVar4 = uVar4 - 1;
    pcVar7 = param_2 + 1;
    cVar1 = *param_2;
    param_2 = pcVar7;
  } while (cVar1 != '\0');
  uVar4 = ~uVar4;
  pcVar7 = pcVar7 + -uVar4;
  pcVar9 = pcVar2;
  for (uVar6 = uVar4 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar9 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar9 = pcVar9 + 4;
  }
  for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
    *pcVar9 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar9 = pcVar9 + 1;
  }
  iVar8 = 0;
  iVar10 = param_3;
  if (0 < iVar5) {
    do {
      uStack_4._0_3_ = CONCAT12(pcVar2[iVar8],(undefined2)uStack_4);
      iVar3 = (**(code **)(*grim_interface_ptr + 0x14c))((int)&uStack_4 + 2);
      iVar10 = iVar10 - iVar3;
      if (iVar10 < 0) {
        do {
          iVar10 = iVar8 + -1;
          iVar8 = iVar8 + -1;
        } while (pcVar2[iVar10] != ' ');
        pcVar2[iVar8] = '\n';
        iVar10 = param_3;
      }
      iVar8 = iVar8 + 1;
    } while (iVar8 < iVar5);
  }
  return pcVar2;
}



/* perks_init_database @ 0042fd90 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* builds the perk table (ids, names, descriptions) */

void __fastcall perks_init_database(void)

{
  char *pcVar1;
  char *pcVar2;
  int iVar3;
  uint3 in_ECX;
  undefined4 extraout_ECX;
  undefined4 extraout_ECX_00;
  undefined4 extraout_ECX_01;
  undefined4 extraout_ECX_02;
  undefined4 extraout_ECX_03;
  char *pcVar4;
  undefined4 extraout_ECX_04;
  undefined4 extraout_ECX_05;
  undefined4 extraout_ECX_06;
  undefined4 extraout_ECX_07;
  undefined4 extraout_ECX_08;
  undefined4 extraout_ECX_09;
  undefined4 extraout_ECX_10;
  undefined4 extraout_ECX_11;
  undefined4 extraout_ECX_12;
  undefined4 extraout_ECX_13;
  undefined4 extraout_ECX_14;
  undefined4 extraout_ECX_15;
  undefined4 extraout_ECX_16;
  undefined4 extraout_ECX_17;
  undefined4 extraout_ECX_18;
  undefined4 extraout_ECX_19;
  undefined4 extraout_ECX_20;
  undefined4 extraout_ECX_21;
  undefined4 extraout_ECX_22;
  undefined4 extraout_ECX_23;
  undefined4 extraout_ECX_24;
  undefined4 extraout_ECX_25;
  undefined4 extraout_ECX_26;
  undefined4 extraout_ECX_27;
  undefined4 extraout_ECX_28;
  undefined4 extraout_ECX_29;
  undefined4 extraout_ECX_30;
  undefined4 extraout_ECX_31;
  undefined4 extraout_ECX_32;
  undefined4 extraout_ECX_33;
  undefined4 extraout_ECX_34;
  undefined4 extraout_ECX_35;
  undefined4 extraout_ECX_36;
  undefined4 extraout_ECX_37;
  undefined4 extraout_ECX_38;
  undefined4 extraout_ECX_39;
  undefined4 extraout_ECX_40;
  undefined4 extraout_ECX_41;
  undefined4 extraout_ECX_42;
  undefined4 extraout_ECX_43;
  undefined4 extraout_ECX_44;
  undefined4 extraout_ECX_45;
  undefined4 extraout_ECX_46;
  undefined4 extraout_ECX_47;
  undefined4 extraout_ECX_48;
  undefined4 extraout_ECX_49;
  undefined4 extraout_ECX_50;
  undefined4 extraout_ECX_51;
  undefined4 extraout_ECX_52;
  undefined4 extraout_ECX_53;
  undefined4 extraout_ECX_54;
  undefined4 extraout_ECX_55;
  undefined4 extraout_ECX_56;
  undefined4 extraout_ECX_57;
  undefined4 extraout_ECX_58;
  undefined4 extraout_ECX_59;
  undefined4 extraout_ECX_60;
  undefined4 extraout_ECX_61;
  undefined4 extraout_ECX_62;
  undefined4 extraout_ECX_63;
  undefined4 extraout_ECX_64;
  undefined4 extraout_ECX_65;
  undefined4 extraout_ECX_66;
  undefined4 extraout_ECX_67;
  undefined4 extraout_ECX_68;
  undefined4 extraout_ECX_69;
  undefined4 extraout_ECX_70;
  undefined4 extraout_ECX_71;
  undefined4 extraout_ECX_72;
  undefined4 extraout_ECX_73;
  undefined4 extraout_ECX_74;
  undefined4 extraout_ECX_75;
  undefined4 extraout_ECX_76;
  undefined4 extraout_ECX_77;
  undefined4 extraout_ECX_78;
  undefined4 extraout_ECX_79;
  undefined4 extraout_ECX_80;
  undefined4 extraout_ECX_81;
  undefined4 extraout_ECX_82;
  undefined4 extraout_ECX_83;
  undefined4 extraout_ECX_84;
  undefined4 extraout_ECX_85;
  undefined4 extraout_ECX_86;
  undefined4 extraout_ECX_87;
  undefined4 extraout_ECX_88;
  undefined4 extraout_ECX_89;
  undefined4 extraout_ECX_90;
  undefined4 extraout_ECX_91;
  undefined4 extraout_ECX_92;
  undefined4 extraout_ECX_93;
  undefined4 extraout_ECX_94;
  undefined4 extraout_ECX_95;
  undefined4 extraout_ECX_96;
  undefined4 extraout_ECX_97;
  undefined4 extraout_ECX_98;
  undefined4 extraout_ECX_99;
  undefined4 extraout_ECX_x00100;
  undefined4 extraout_ECX_x00101;
  undefined4 extraout_ECX_x00102;
  undefined4 extraout_ECX_x00103;
  undefined4 extraout_ECX_x00104;
  undefined4 extraout_ECX_x00105;
  undefined4 extraout_ECX_x00106;
  undefined4 extraout_ECX_x00107;
  undefined4 extraout_ECX_x00108;
  undefined4 extraout_ECX_x00109;
  undefined4 extraout_ECX_x00110;
  undefined4 extraout_ECX_x00111;
  undefined4 extraout_ECX_x00112;
  
  perk_id_antiperk = 0;
  perk_name_table = FUN_0042fd00(in_ECX,s_AntiPerk_00477728,0x100);
  _perk_desc_table =
       FUN_0042fd00((uint3)extraout_ECX,s_You_shouldn_t_be_seeing_this___00477708,0x100);
  perk_id_bloody_mess_quick_learner = 1;
  DAT_004c3640 = FUN_0042fd00((uint3)extraout_ECX_00,s_Bloody_Mess_004776fc,0x100);
  DAT_004c3648 = FUN_0042fd00((uint3)extraout_ECX_01,s_More_the_merrier__More_blood_gua_00477684,
                              0x100);
  DAT_004c3644 = FUN_0042fd00((uint3)extraout_ECX_02,s_Quick_Learner_00477674,0x100);
  pcVar2 = FUN_0042fd00((uint3)extraout_ECX_03,s_You_learn_things_faster_than_a_r_00477600,0x100);
  pcVar1 = DAT_004c3648;
  pcVar4 = DAT_004c3640;
  DAT_004c364c = pcVar2;
  if (config_fx_toggle == '\0') {
    iVar3 = perk_id_bloody_mess_quick_learner * 0x14;
    (&perk_name_table)[perk_id_bloody_mess_quick_learner * 5] = DAT_004c3640;
    *(char **)(&perk_desc_table + iVar3) = pcVar1;
  }
  else {
    pcVar4 = (char *)(perk_id_bloody_mess_quick_learner * 0x14);
    *(char **)(pcVar4 + 0x4c2c40) = DAT_004c3644;
    *(char **)(pcVar4 + 0x4c2c44) = pcVar2;
  }
  perk_id_sharpshooter = 2;
  _DAT_004c2c68 = FUN_0042fd00((uint3)pcVar4,s_Sharpshooter_004775f0,0x100);
  _DAT_004c2c6c =
       FUN_0042fd00((uint3)extraout_ECX_04,s_Miraculously_your_aiming_improve_00477538,0x100);
  perk_id_fastloader = 3;
  _DAT_004c2c7c = FUN_0042fd00((uint3)extraout_ECX_05,s_Fastloader_0047752c,0x100);
  _DAT_004c2c80 =
       FUN_0042fd00((uint3)extraout_ECX_06,s_Man__you_sure_know_how_to_load_a_00477504,0x100);
  perk_id_lean_mean_exp_machine = 4;
  _DAT_004c2c90 = FUN_0042fd00((uint3)extraout_ECX_07,s_Lean_Mean_Exp_Machine_004774ec,0x100);
  _DAT_004c2c94 =
       FUN_0042fd00((uint3)extraout_ECX_08,s_Why_kill_for_experience_when_you_0047745c,0x100);
  perk_id_long_distance_runner = 5;
  _DAT_004c2ca4 = FUN_0042fd00((uint3)extraout_ECX_09,s_Long_Distance_Runner_00477444,0x100);
  _DAT_004c2ca8 =
       FUN_0042fd00((uint3)extraout_ECX_10,s_You_move_like_a_train_that_has_f_004773a4,0x100);
  perk_id_pyrokinetic = 6;
  _DAT_004c2cb8 = FUN_0042fd00((uint3)extraout_ECX_11,s_Pyrokinetic_00477398,0x100);
  _DAT_004c2cbc =
       FUN_0042fd00((uint3)extraout_ECX_12,s_You_see_flames_everywhere__Bare_a_0047734c,0x100);
  perk_id_instant_winner = 7;
  _DAT_004c2ccc = FUN_0042fd00((uint3)extraout_ECX_13,s_Instant_Winner_0047733c,0x100);
  _DAT_004c2cd0 =
       FUN_0042fd00((uint3)extraout_ECX_14,s_2500_experience_points__Right_aw_00477300,0x100);
  DAT_004c2cd4 = DAT_004c2cd4 | 4;
  perk_id_grim_deal = 8;
  _DAT_004c2ce8 = 0;
  _DAT_004c2ce0 = FUN_0042fd00((uint3)DAT_004c2cd4,s_Grim_Deal_004772f4,0x100);
  _DAT_004c2ce4 =
       FUN_0042fd00((uint3)extraout_ECX_15,s_I_ll_make_you_a_deal__I_ll_give_y_00477258,0x100);
  perk_id_alternate_weapon = 9;
  _DAT_004c2cfc = 1;
  _DAT_004c2cf4 = FUN_0042fd00((uint3)extraout_ECX_16,s_Alternate_Weapon_00477244,0x100);
  _DAT_004c2cf8 =
       FUN_0042fd00((uint3)extraout_ECX_17,s_Ever_fancied_about_having_two_we_00477140,0x100);
  perk_id_plaguebearer = 10;
  _DAT_004c2d08 = FUN_0042fd00((uint3)extraout_ECX_18,s_Plaguebearer_00477130,0x100);
  _DAT_004c2d0c =
       FUN_0042fd00((uint3)extraout_ECX_19,s_You_carry_a_horrible_disease__Go_004770a4,0x100);
  perk_id_evil_eyes = 0xb;
  _DAT_004c2d1c = FUN_0042fd00((uint3)extraout_ECX_20,s_Evil_Eyes_00477098,0x100);
  _DAT_004c2d20 =
       FUN_0042fd00((uint3)extraout_ECX_21,s_No_living__nor_dead__can_resist_t_0047702c,0x100);
  perk_id_ammo_maniac = 0xc;
  _DAT_004c2d30 = FUN_0042fd00((uint3)extraout_ECX_22,s_Ammo_Maniac_00477020,0x100);
  _DAT_004c2d34 =
       FUN_0042fd00((uint3)extraout_ECX_23,s_You_squeeze_and_you_push_and_you_00476f80,0x100);
  perk_id_radioactive = 0xd;
  _DAT_004c2d44 = FUN_0042fd00((uint3)extraout_ECX_24,s_Radioactive_00476f74,0x100);
  _DAT_004c2d48 =
       FUN_0042fd00((uint3)extraout_ECX_25,s_You_are_the_Radioactive_man__you_00476eb0,0x100);
  perk_id_fastshot = 0xe;
  _DAT_004c2d58 = FUN_0042fd00((uint3)extraout_ECX_26,s_Fastshot_00476ea4,0x100);
  _DAT_004c2d5c =
       FUN_0042fd00((uint3)extraout_ECX_27,s_Funny_how_you_make_your_gun_spit_00476e28,0x100);
  perk_id_fatal_lottery = 0xf;
  _DAT_004c2d74 = 4;
  _DAT_004c2d6c = FUN_0042fd00((uint3)extraout_ECX_28,s_Fatal_Lottery_00476e18,0x100);
  _DAT_004c2d70 =
       FUN_0042fd00((uint3)extraout_ECX_29,s_Fifty_fifty_chance_of_dying_OR_g_00476db4,0x100);
  perk_id_random_weapon = 0x10;
  _DAT_004c2d88 = 5;
  _DAT_004c2d80 = FUN_0042fd00((uint3)extraout_ECX_30,s_Random_Weapon_00476da4,0x100);
  _DAT_004c2d84 =
       FUN_0042fd00((uint3)extraout_ECX_31,s_Here__have_this_weapon__No_quest_00476d78,0x100);
  perk_id_mr_melee = 0x11;
  _DAT_004c2d94 = FUN_0042fd00((uint3)extraout_ECX_32,s_Mr__Melee_00476d6c,0x100);
  _DAT_004c2d98 =
       FUN_0042fd00((uint3)extraout_ECX_33,s_You_master_the_art_of_melee_figh_00476cfc,0x100);
  perk_id_anxious_loader = 0x12;
  _DAT_004c2da8 = FUN_0042fd00((uint3)extraout_ECX_34,s_Anxious_Loader_00476cec,0x100);
  _DAT_004c2dac =
       FUN_0042fd00((uint3)extraout_ECX_35,s_When_you_can_t_stand_waiting_you_00476c5c,0x100);
  perk_id_final_revenge = 0x13;
  _DAT_004c2dc4 = 0;
  _DAT_004c2dbc = FUN_0042fd00((uint3)extraout_ECX_36,s_Final_Revenge_00476c4c,0x100);
  _DAT_004c2dc0 =
       FUN_0042fd00((uint3)extraout_ECX_37,s_Pick_this_and_you_ll_get_your_re_00476c14,0x100);
  perk_id_telekinetic = 0x14;
  _DAT_004c2dd0 = FUN_0042fd00((uint3)extraout_ECX_38,s_Telekinetic_00476c08,0x100);
  _DAT_004c2dd4 =
       FUN_0042fd00((uint3)extraout_ECX_39,s_Picking_up_bonuses_has_never_bee_00476b8c,0x100);
  perk_id_perk_expert = 0x15;
  _DAT_004c2de4 = FUN_0042fd00((uint3)extraout_ECX_40,s_Perk_Expert_00476b80,0x100);
  _DAT_004c2de8 =
       FUN_0042fd00((uint3)extraout_ECX_41,s_You_sure_know_how_to_pick_a_perk_00476acc,0x100);
  perk_id_unstoppable = 0x16;
  _DAT_004c2df8 = FUN_0042fd00((uint3)extraout_ECX_42,s_Unstoppable_00476ac0,0x100);
  _DAT_004c2dfc =
       FUN_0042fd00((uint3)extraout_ECX_43,s_Monsters_can_t_slow_you_down_wit_00476a4c,0x100);
  perk_id_regression_bullets = 0x17;
  _DAT_004c2e0c = FUN_0042fd00((uint3)extraout_ECX_44,s_Regression_Bullets_00476a38,0x100);
  _DAT_004c2e10 =
       FUN_0042fd00((uint3)extraout_ECX_45,s_Attempt_to_shoot_with_an_empty_c_004769c0,0x100);
  perk_id_infernal_contract = 0x18;
  _DAT_004c2e20 = FUN_0042fd00((uint3)extraout_ECX_46,s_Infernal_Contract_004769ac,0x100);
  _DAT_004c2e24 =
       FUN_0042fd00((uint3)extraout_ECX_47,s_In_exchange_for_your_soul__a_dar_004768d0,0x100);
  perk_id_poison_bullets = 0x19;
  _DAT_004c2e34 = FUN_0042fd00((uint3)extraout_ECX_48,s_Poison_Bullets_004768c0,0x100);
  _DAT_004c2e38 =
       FUN_0042fd00((uint3)extraout_ECX_49,s_You_tend_to_explicitly_treat_eac_00476834,0x100);
  perk_id_dodger = 0x1a;
  _DAT_004c2e48 = FUN_0042fd00((uint3)extraout_ECX_50,s_Dodger_0047682c,0x100);
  _DAT_004c2e4c =
       FUN_0042fd00((uint3)extraout_ECX_51,s_It_seems_so_stupid_just_to_take_t_004767b8,0x100);
  perk_id_bonus_magnet = 0x1b;
  _DAT_004c2e5c = FUN_0042fd00((uint3)extraout_ECX_52,s_Bonus_Magnet_004767a8,0x100);
  _DAT_004c2e60 =
       FUN_0042fd00((uint3)extraout_ECX_53,s_You_somehow_seem_to_lure_all_kin_00476758,0x100);
  perk_id_uranium_filled_bullets = 0x1c;
  _DAT_004c2e70 = FUN_0042fd00((uint3)extraout_ECX_54,s_Uranium_Filled_Bullets_00476740,0x100);
  _DAT_004c2e74 =
       FUN_0042fd00((uint3)extraout_ECX_55,s_Your_bullets_have_a_nice_creamy_u_004766d8,0x100);
  perk_id_doctor = 0x1d;
  _DAT_004c2e84 = FUN_0042fd00((uint3)extraout_ECX_56,s_Doctor_004766d0,0x100);
  _DAT_004c2e88 =
       FUN_0042fd00((uint3)extraout_ECX_57,s_With_a_single_glance_you_can_tel_0047660c,0x100);
  perk_id_monster_vision = 0x1e;
  _DAT_004c2e98 = FUN_0042fd00((uint3)extraout_ECX_58,s_Monster_Vision_004765fc,0x100);
  _DAT_004c2e9c =
       FUN_0042fd00((uint3)extraout_ECX_59,s_With_your_newly_enhanced_senses_y_00476598,0x100);
  perk_id_hot_tempered = 0x1f;
  _DAT_004c2eac = FUN_0042fd00((uint3)extraout_ECX_60,s_Hot_Tempered_00476588,0x100);
  _DAT_004c2eb0 =
       FUN_0042fd00((uint3)extraout_ECX_61,s_It_literally_boils_inside_you__T_0047650c,0x100);
  perk_id_bonus_economist = 0x20;
  _DAT_004c2ec0 = FUN_0042fd00((uint3)extraout_ECX_62,s_Bonus_Economist_004764fc,0x100);
  _DAT_004c2ec4 =
       FUN_0042fd00((uint3)extraout_ECX_63,s_Your_bonus_power_ups_last_50__lo_004764bc,0x100);
  DAT_004c2bcc = 0;
  perk_id_thick_skinned = 0x21;
  _DAT_004c2ed4 = FUN_0042fd00((uint3)extraout_ECX_64,s_Thick_Skinned_004764ac,0x100);
  _DAT_004c2ed8 =
       FUN_0042fd00((uint3)extraout_ECX_65,s_Trade_1_3_of_your_health_for_onl_00476464,0x100);
  perk_id_barrel_greaser = 0x22;
  _DAT_004c2ee8 = FUN_0042fd00((uint3)extraout_ECX_66,s_Barrel_Greaser_00476454,0x100);
  _DAT_004c2eec =
       FUN_0042fd00((uint3)extraout_ECX_67,s_After_studying_a_lot_of_physics_a_004763d0,0x100);
  perk_id_ammunition_within = 0x23;
  _DAT_004c2efc = FUN_0042fd00((uint3)extraout_ECX_68,s_Ammunition_Within_004763bc,0x100);
  _DAT_004c2f00 =
       FUN_0042fd00((uint3)extraout_ECX_69,s_Empty_clip_doesn_t_prevent_you_f_00476334,0x100);
  perk_id_veins_of_poison = 0x24;
  _DAT_004c2f10 = FUN_0042fd00((uint3)extraout_ECX_70,s_Veins_of_Poison_00476324,0x100);
  _DAT_004c2f14 =
       FUN_0042fd00((uint3)extraout_ECX_71,s_A_strong_poison_runs_through_you_004762ac,0x100);
  perk_id_toxic_avenger = 0x25;
  _DAT_004c2f24 = FUN_0042fd00((uint3)extraout_ECX_72,s_Toxic_Avenger_0047629c,0x100);
  _DAT_004c2f28 =
       FUN_0042fd00((uint3)extraout_ECX_73,s_You_started_out_just_by_being_po_004761dc,0x100);
  perk_id_regeneration = 0x26;
  _DAT_004c2f34 = perk_id_veins_of_poison;
  _DAT_004c2f38 = FUN_0042fd00((uint3)extraout_ECX_74,s_Regeneration_004761cc,0x100);
  _DAT_004c2f3c =
       FUN_0042fd00((uint3)extraout_ECX_75,s_Your_health_replenishes_but_very_00476188,0x100);
  perk_id_pyromaniac = 0x27;
  _DAT_004c2f4c = FUN_0042fd00((uint3)extraout_ECX_76,s_Pyromaniac_0047617c,0x100);
  _DAT_004c2f50 =
       FUN_0042fd00((uint3)extraout_ECX_77,s_You_just_enjoy_using_fire_as_you_004760fc,0x100);
  perk_id_ninja = 0x28;
  _DAT_004c2f60 = FUN_0042fd00((uint3)extraout_ECX_78,s_Ninja_004760f4,0x100);
  _DAT_004c2f64 =
       FUN_0042fd00((uint3)extraout_ECX_79,s_You_ve_taken_your_dodging_abilit_00476090,0x100);
  _DAT_004c2f70 = perk_id_dodger;
  perk_id_highlander = 0x29;
  _DAT_004c2f7c = 0;
  _DAT_004c2f74 = FUN_0042fd00((uint3)perk_id_dodger,s_Highlander_00476084,0x100);
  _DAT_004c2f78 =
       FUN_0042fd00((uint3)extraout_ECX_80,s_You_are_immortal__Well__almost_i_00475fb8,0x100);
  perk_id_jinxed = 0x2a;
  _DAT_004c2f88 = FUN_0042fd00((uint3)extraout_ECX_81,s_Jinxed_00475fb0,0x100);
  _DAT_004c2f8c =
       FUN_0042fd00((uint3)extraout_ECX_82,s_Things_happen_near_you__Stranges_00475f4c,0x100);
  perk_id_perk_master = 0x2b;
  _DAT_004c2f9c = FUN_0042fd00((uint3)extraout_ECX_83,s_Perk_Master_00475f40,0x100);
  _DAT_004c2fa0 =
       FUN_0042fd00((uint3)extraout_ECX_84,s_Being_the_Perk_Expert_taught_you_00475eb4,0x100);
  _DAT_004c2fac = perk_id_perk_expert;
  perk_id_reflex_boosted = 0x2c;
  _DAT_004c2fb0 = FUN_0042fd00((uint3)extraout_ECX_85,s_Reflex_Boosted_00475ea4,0x100);
  _DAT_004c2fb4 =
       FUN_0042fd00((uint3)extraout_ECX_86,s_To_you_the_world_seems_to_go_on_a_00475e00,0x100);
  perk_id_greater_regeneration = 0x2d;
  _DAT_004c2fc4 = FUN_0042fd00((uint3)extraout_ECX_87,s_Greater_Regeneration_00475de8,0x100);
  _DAT_004c2fc8 =
       FUN_0042fd00((uint3)extraout_ECX_88,s_Your_health_replenishes_faster_t_00475dbc,0x100);
  perk_id_breathing_room = 0x2e;
  _DAT_004c2fd4 = perk_id_regeneration;
  _DAT_004c2fe0 = 2;
  _DAT_004c2fd8 = FUN_0042fd00((uint3)extraout_ECX_89,s_Breathing_Room_00475dac,0x100);
  _DAT_004c2fdc =
       FUN_0042fd00((uint3)extraout_ECX_90,s_Trade_2_3rds_of_your_health_for_t_00475d34,0x100);
  perk_id_death_clock = 0x2f;
  _DAT_004c2fec = FUN_0042fd00((uint3)extraout_ECX_91,s_Death_Clock_00475d28,0x100);
  _DAT_004c2ff0 =
       FUN_0042fd00((uint3)extraout_ECX_92,s_You_die_exactly_in_30_seconds__Y_00475cbc,0x100);
  perk_id_my_favourite_weapon = 0x30;
  _DAT_004c3000 = FUN_0042fd00((uint3)extraout_ECX_93,s_My_Favourite_Weapon_00475ca8,0x100);
  _DAT_004c3004 =
       FUN_0042fd00((uint3)extraout_ECX_94,s_You_ve_grown_very_fond_of_your_p_00475c14,0x100);
  perk_id_bandage = 0x31;
  _DAT_004c3014 = FUN_0042fd00((uint3)extraout_ECX_95,s_Bandage_00475c0c,0x100);
  _DAT_004c3018 =
       FUN_0042fd00((uint3)extraout_ECX_96,s_Here__eat_this_bandage_and_you_l_00475bb0,0x100);
  perk_id_angry_reloader = 0x32;
  _DAT_004c3028 = FUN_0042fd00((uint3)extraout_ECX_97,s_Angry_Reloader_00475ba0,0x100);
  _DAT_004c302c =
       FUN_0042fd00((uint3)extraout_ECX_98,s_You_hate_it_when_you_run_out_of_s_00475ab4,0x100);
  perk_id_ion_gun_master = 0x33;
  _DAT_004c303c = FUN_0042fd00((uint3)extraout_ECX_99,s_Ion_Gun_Master_00475aa4,0x100);
  _DAT_004c3040 =
       FUN_0042fd00((uint3)extraout_ECX_x00100,s_You_re_good_with_ion_weapons__Yo_00475a18,0x100);
  perk_id_stationary_reloader = 0x34;
  _DAT_004c3050 = FUN_0042fd00((uint3)extraout_ECX_x00101,s_Stationary_Reloader_00475a04,0x100);
  _DAT_004c3054 =
       FUN_0042fd00((uint3)extraout_ECX_x00102,s_It_s_incredibly_hard_to_reload_y_0047594c,0x100);
  perk_id_man_bomb = 0x35;
  _DAT_004c3064 = FUN_0042fd00((uint3)extraout_ECX_x00103,s_Man_Bomb_00475940,0x100);
  _DAT_004c3068 =
       FUN_0042fd00((uint3)extraout_ECX_x00104,s_You_have_the_ability_to_go_boom_f_004758a8,0x100);
  perk_id_fire_caugh = 0x36;
  _DAT_004c3078 = FUN_0042fd00((uint3)extraout_ECX_x00105,s_Fire_Caugh_0047589c,0x100);
  _DAT_004c307c =
       FUN_0042fd00((uint3)extraout_ECX_x00106,s_You_have_a_fireball_stuck_in_you_00475850,0x100);
  perk_id_living_fortress = 0x37;
  _DAT_004c308c = FUN_0042fd00((uint3)extraout_ECX_x00107,s_Living_Fortress_00475840,0x100);
  _DAT_004c3090 =
       FUN_0042fd00((uint3)extraout_ECX_x00108,s_It_comes_a_time_in_each_man_s_li_0047577c,0x100);
  perk_id_tough_reloader = 0x38;
  _DAT_004c30a0 = FUN_0042fd00((uint3)extraout_ECX_x00109,s_Tough_Reloader_0047576c,0x100);
  _DAT_004c30a4 =
       FUN_0042fd00((uint3)extraout_ECX_x00110,s_Damage_received_during_reloading_00475734,0x100);
  perk_id_lifeline_50_50 = 0x39;
  _DAT_004c30b4 = FUN_0042fd00((uint3)extraout_ECX_x00111,s_Lifeline_50_50_00475724,0x100);
  _DAT_004c30b8 =
       FUN_0042fd00((uint3)extraout_ECX_x00112,s_The_computer_removes_half_of_the_004756cc,0x100);
  DAT_004c2c38 = 0x39;
  DAT_004c2b8c = 0x3a;
  perks_rebuild_available();
  return;
}



/* FUN_00430a20 @ 00430a20 */

void __cdecl FUN_00430a20(int *param_1,int param_2,uint param_3,uint *param_4)

{
  int iVar1;
  char *pcVar2;
  uint uVar3;
  
  if ((void *)param_1[3] != (void *)0x0) {
    crt_free((void *)param_1[3]);
    console_printf(&console_log_queue,(byte *)(s___Quest_overwritten__00477742 + 2));
  }
  pcVar2 = strdup_malloc((char *)param_4);
  param_1[3] = (int)pcVar2;
  param_1[8] = perk_id_antiperk;
  iVar1 = param_2 * 2 + -2;
  param_1[9] = 0;
  *param_1 = param_2;
  param_1[1] = param_3;
  param_1[4] = iVar1;
  if ((int)param_3 < 6) {
    param_1[5] = param_2 * 2 + -1;
    param_1[6] = iVar1;
  }
  else {
    param_1[5] = iVar1;
    param_1[6] = param_2 * 2 + -1;
  }
  if (4 < param_2) {
    uVar3 = param_3 & 0x80000003;
    if ((int)uVar3 < 0) {
      uVar3 = (uVar3 - 1 | 0xfffffffc) + 1;
    }
    param_1[4] = uVar3;
    param_1[5] = 1;
    param_1[6] = 3;
    param_1[7] = 5;
  }
  quest_meta_cursor = param_1;
  return;
}



/* FUN_00430ad0 @ 00430ad0 */

int FUN_00430ad0(void)

{
  int iVar1;
  int *piVar2;
  
  iVar1 = 0;
  piVar2 = &creature_spawn_slot_owner;
  do {
    if (*piVar2 == 0) {
      return iVar1;
    }
    piVar2 = piVar2 + 6;
    iVar1 = iVar1 + 1;
  } while ((int)piVar2 < 0x4852d0);
  return 0x1f;
}



/* creature_spawn_template @ 00430af0 */

/* spawns creature(s) from template id; heading -100 uses a random heading */

void * __cdecl creature_spawn_template(int template_id,float *pos,float heading)

{
  float fVar1;
  float fVar2;
  float *pfVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  int iVar8;
  undefined1 *puVar9;
  float10 fVar10;
  float10 fVar11;
  int local_48;
  undefined4 local_4;
  
  pfVar3 = pos;
  iVar4 = creature_alloc_slot();
  if (heading == -100.0) {
    iVar5 = _rand();
    heading = (float)(iVar5 % 0x274) * 0.01;
  }
  iVar8 = iVar4 * 0x98;
  puVar9 = &creature_pool + iVar8;
  (&creature_ai_mode)[iVar4 * 0x26] = 0;
  (&creature_pos_x)[iVar4 * 0x26] = *pos;
  fVar2 = pos[1];
  (&creature_vel_x)[iVar4 * 0x26] = 0;
  (&creature_pos_y)[iVar4 * 0x26] = fVar2;
  (&creature_collision_flag)[iVar8] = 0;
  (&creature_collision_timer)[iVar4 * 0x26] = 0;
  *puVar9 = 1;
  (&creature_force_target)[iVar8] = 0;
  (&creature_state_flag)[iVar8] = 1;
  (&creature_hitbox_size)[iVar4 * 0x26] = 0x41800000;
  (&creature_vel_y)[iVar4 * 0x26] = 0;
  iVar5 = _rand();
  (&creature_attack_cooldown)[iVar4 * 0x26] = 0;
  (&creature_heading)[iVar4 * 0x26] = (float)(iVar5 % 0x13a) * 0.01;
  if (template_id == 0x12) {
    (&creature_tint_r)[iVar4 * 0x26] = 0x3f266666;
    (&creature_type_id)[iVar4 * 0x26] = 2;
    (&creature_tint_g)[iVar4 * 0x26] = 0x3f59999a;
    (&creature_health)[iVar4 * 0x26] = 0x43480000;
    (&creature_move_speed)[iVar4 * 0x26] = 0x400ccccd;
    (&creature_tint_b)[iVar4 * 0x26] = 0x3f7851ec;
    (&creature_reward_value)[iVar4 * 0x26] = 0x44160000;
    (&creature_size)[iVar4 * 0x26] = 0x425c0000;
    (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
    (&creature_contact_damage)[iVar4 * 0x26] = 0x41600000;
    (&creature_max_health)[iVar4 * 0x26] = 0x43480000;
    pos = (float *)0x0;
    do {
      iVar8 = creature_alloc_slot();
      fVar10 = (float10)fcos((float10)(int)pos * (float10)0.7853982);
      iVar5 = iVar8 * 0x98;
      puVar9 = &creature_pool + iVar5;
      (&creature_ai_mode)[iVar8 * 0x26] = 3;
      (&creature_link_index)[iVar8 * 0x26] = iVar4;
      (&creature_target_offset_x)[iVar8 * 0x26] = (float)(fVar10 * (float10)100.0);
      fVar10 = (float10)fsin((float10)(int)pos * (float10)0.7853982);
      (&creature_target_offset_y)[iVar8 * 0x26] = (float)(fVar10 * (float10)100.0);
      (&creature_pos_x)[iVar8 * 0x26] = *pfVar3;
      (&creature_pos_y)[iVar8 * 0x26] = pfVar3[1];
      (&creature_vel_x)[iVar8 * 0x26] = 0;
      (&creature_vel_y)[iVar8 * 0x26] = 0;
      (&creature_collision_flag)[iVar5] = 0;
      (&creature_tint_r)[iVar8 * 0x26] = 0x3ea3d70b;
      (&creature_health)[iVar8 * 0x26] = 0x42200000;
      (&creature_max_health)[iVar8 * 0x26] = 0x42200000;
      (&creature_tint_g)[iVar8 * 0x26] = 0x3f16872c;
      pos = (float *)((int)pos + 1);
      (&creature_tint_b)[iVar8 * 0x26] = 0x3eda1cac;
      (&creature_collision_timer)[iVar8 * 0x26] = 0;
      *puVar9 = 1;
      (&creature_state_flag)[iVar5] = 1;
      (&creature_hitbox_size)[iVar8 * 0x26] = 0x41800000;
      (&creature_attack_cooldown)[iVar8 * 0x26] = 0;
      (&creature_type_id)[iVar8 * 0x26] = 2;
      (&creature_move_speed)[iVar8 * 0x26] = 0x4019999a;
      (&creature_reward_value)[iVar8 * 0x26] = 0x42700000;
      (&creature_tint_a)[iVar8 * 0x26] = 0x3f800000;
      (&creature_size)[iVar8 * 0x26] = 0x42480000;
      (&creature_contact_damage)[iVar8 * 0x26] = 0x40800000;
    } while ((int)pos < 8);
  }
  else if (template_id == 0x19) {
    (&creature_tint_r)[iVar4 * 0x26] = 0x3f733333;
    (&creature_type_id)[iVar4 * 0x26] = 2;
    (&creature_tint_g)[iVar4 * 0x26] = 0x3f0ccccd;
    (&creature_health)[iVar4 * 0x26] = 0x42480000;
    (&creature_move_speed)[iVar4 * 0x26] = 0x40733333;
    (&creature_tint_b)[iVar4 * 0x26] = 0x3ebd70a4;
    (&creature_reward_value)[iVar4 * 0x26] = 0x43960000;
    (&creature_size)[iVar4 * 0x26] = 0x425c0000;
    (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
    (&creature_contact_damage)[iVar4 * 0x26] = 0x42200000;
    (&creature_max_health)[iVar4 * 0x26] = 0x42480000;
    pos = (float *)0x0;
    do {
      iVar8 = creature_alloc_slot();
      fVar10 = (float10)fcos((float10)(int)pos * (float10)1.2566371);
      iVar5 = iVar8 * 0x98;
      puVar9 = &creature_pool + iVar5;
      (&creature_ai_mode)[iVar8 * 0x26] = 5;
      (&creature_link_index)[iVar8 * 0x26] = iVar4;
      (&creature_target_offset_x)[iVar8 * 0x26] = (float)(fVar10 * (float10)110.0);
      fVar10 = (float10)fsin((float10)(int)pos * (float10)1.2566371);
      (&creature_target_offset_y)[iVar8 * 0x26] = (float)(fVar10 * (float10)110.0);
      fVar2 = *pfVar3;
      fVar1 = pfVar3[1];
      (&creature_vel_x)[iVar8 * 0x26] = 0;
      (&creature_pos_x)[iVar8 * 0x26] = (float)(&creature_target_offset_x)[iVar8 * 0x26] + fVar2;
      (&creature_vel_y)[iVar8 * 0x26] = 0;
      (&creature_pos_y)[iVar8 * 0x26] = (float)(&creature_target_offset_y)[iVar8 * 0x26] + fVar1;
      (&creature_health)[iVar8 * 0x26] = 0x435c0000;
      (&creature_max_health)[iVar8 * 0x26] = 0x435c0000;
      (&creature_tint_r)[iVar8 * 0x26] = 0x3f366666;
      pos = (float *)((int)pos + 1);
      (&creature_tint_g)[iVar8 * 0x26] = 0x3ed33334;
      (&creature_collision_flag)[iVar5] = 0;
      (&creature_tint_b)[iVar8 * 0x26] = 0x3e8e147b;
      (&creature_collision_timer)[iVar8 * 0x26] = 0;
      *puVar9 = 1;
      (&creature_state_flag)[iVar5] = 1;
      (&creature_hitbox_size)[iVar8 * 0x26] = 0x41800000;
      (&creature_attack_cooldown)[iVar8 * 0x26] = 0;
      (&creature_type_id)[iVar8 * 0x26] = 2;
      (&creature_move_speed)[iVar8 * 0x26] = 0x40733333;
      (&creature_reward_value)[iVar8 * 0x26] = 0x42700000;
      (&creature_tint_a)[iVar8 * 0x26] = 0x3f19999a;
      (&creature_size)[iVar8 * 0x26] = 0x42480000;
      (&creature_contact_damage)[iVar8 * 0x26] = 0x420c0000;
    } while ((int)pos < 5);
  }
  else {
    if (template_id == 0x11) {
      (&creature_type_id)[iVar4 * 0x26] = 1;
      (&creature_pos_x)[iVar4 * 0x26] = *pos;
      (&creature_pos_y)[iVar4 * 0x26] = pos[1];
      (&creature_ai_mode)[iVar4 * 0x26] = 1;
      (&creature_tint_r)[iVar4 * 0x26] = 0x3f7d70a4;
      (&creature_tint_g)[iVar4 * 0x26] = 0x3f7d70a4;
      (&creature_health)[iVar4 * 0x26] = 0x44bb8000;
      (&creature_move_speed)[iVar4 * 0x26] = 0x40066666;
      (&creature_tint_b)[iVar4 * 0x26] = 0x3e570a3d;
      (&creature_reward_value)[iVar4 * 0x26] = 0x447a0000;
      (&creature_size)[iVar4 * 0x26] = 0x428a0000;
      (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
      (&creature_contact_damage)[iVar4 * 0x26] = 0x43160000;
      (&creature_max_health)[iVar4 * 0x26] = 0x44bb8000;
      local_48 = 2;
      pos = (float *)0xffffff00;
      iVar5 = iVar4;
      do {
        iVar6 = creature_alloc_slot();
        (&creature_target_offset_x)[iVar6 * 0x26] = (float)(int)pos;
        iVar8 = iVar6 * 0x98;
        puVar9 = &creature_pool + iVar8;
        (&creature_ai_mode)[iVar6 * 0x26] = 3;
        (&creature_link_index)[iVar6 * 0x26] = iVar5;
        (&creature_target_offset_y)[iVar6 * 0x26] = 0xc3800000;
        fVar10 = (float10)fcos((float10)local_48 * (float10)0.3926991);
        fVar11 = (float10)fsin((float10)local_48 * (float10)0.3926991);
        fVar2 = pfVar3[1];
        (&creature_pos_x)[iVar6 * 0x26] = (float)fVar10 * 256.0 + *pfVar3;
        (&creature_vel_x)[iVar6 * 0x26] = 0;
        (&creature_tint_r)[iVar6 * 0x26] = 0x3f19999a;
        (&creature_pos_y)[iVar6 * 0x26] = (float)(fVar11 * (float10)256.0 + (float10)fVar2);
        (&creature_tint_g)[iVar6 * 0x26] = 0x3f19999a;
        (&creature_vel_y)[iVar6 * 0x26] = 0;
        (&creature_tint_b)[iVar6 * 0x26] = 0x3e9eb852;
        (&creature_health)[iVar6 * 0x26] = 0x42700000;
        (&creature_reward_value)[iVar6 * 0x26] = 0x42700000;
        (&creature_max_health)[iVar6 * 0x26] = 0x42700000;
        (&creature_tint_a)[iVar6 * 0x26] = 0x3f800000;
        pos = pos + 0x10;
        local_48 = local_48 + 2;
        (&creature_collision_flag)[iVar8] = 0;
        (&creature_collision_timer)[iVar6 * 0x26] = 0;
        *puVar9 = 1;
        (&creature_state_flag)[iVar8] = 1;
        (&creature_hitbox_size)[iVar6 * 0x26] = 0x41800000;
        (&creature_attack_cooldown)[iVar6 * 0x26] = 0;
        (&creature_type_id)[iVar6 * 0x26] = 1;
        (&creature_move_speed)[iVar6 * 0x26] = 0x4019999a;
        (&creature_size)[iVar6 * 0x26] = 0x42480000;
        (&creature_contact_damage)[iVar6 * 0x26] = 0x41600000;
        iVar5 = iVar6;
      } while ((int)pos < 0);
    }
    else {
      if (template_id != 0x13) {
        if (template_id == 0x14) {
          (&creature_type_id)[iVar4 * 0x26] = 2;
          (&creature_pos_x)[iVar4 * 0x26] = *pos;
          (&creature_pos_y)[iVar4 * 0x26] = pos[1];
          (&creature_ai_mode)[iVar4 * 0x26] = 2;
          (&creature_tint_r)[iVar4 * 0x26] = 0x3f333333;
          (&creature_tint_g)[iVar4 * 0x26] = 0x3f4ccccd;
          (&creature_health)[iVar4 * 0x26] = 0x44bb8000;
          (&creature_move_speed)[iVar4 * 0x26] = 0x40000000;
          (&creature_tint_b)[iVar4 * 0x26] = 0x3e9eb852;
          (&creature_reward_value)[iVar4 * 0x26] = 0x44160000;
          (&creature_size)[iVar4 * 0x26] = 0x42480000;
          (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
          (&creature_contact_damage)[iVar4 * 0x26] = 0x42200000;
          (&creature_pos_x)[iVar4 * 0x26] = *pos;
          (&creature_pos_y)[iVar4 * 0x26] = pos[1];
          (&creature_max_health)[iVar4 * 0x26] = 0x44bb8000;
          local_48 = 0;
          do {
            pos = (float *)0x80;
            do {
              iVar8 = creature_alloc_slot();
              (&creature_target_offset_y)[iVar8 * 0x26] = (float)(int)pos;
              iVar5 = iVar8 * 0x98;
              puVar9 = &creature_pool + iVar5;
              (&creature_ai_mode)[iVar8 * 0x26] = 5;
              (&creature_heading)[iVar8 * 0x26] = 0;
              (&creature_anim_phase)[iVar8 * 0x26] = 0;
              (&creature_link_index)[iVar8 * 0x26] = iVar4;
              (&creature_target_offset_x)[iVar8 * 0x26] = (float)local_48;
              fVar2 = *pfVar3;
              fVar1 = pfVar3[1];
              (&creature_vel_x)[iVar8 * 0x26] = 0;
              (&creature_pos_x)[iVar8 * 0x26] =
                   fVar2 + (float)(&creature_target_offset_x)[iVar8 * 0x26];
              (&creature_vel_y)[iVar8 * 0x26] = 0;
              (&creature_pos_y)[iVar8 * 0x26] =
                   (float)(&creature_target_offset_y)[iVar8 * 0x26] + fVar1;
              (&creature_tint_r)[iVar8 * 0x26] = 0x3ecccccd;
              (&creature_health)[iVar8 * 0x26] = 0x42200000;
              (&creature_max_health)[iVar8 * 0x26] = 0x42200000;
              (&creature_tint_g)[iVar8 * 0x26] = 0x3f333333;
              pos = pos + 0x10;
              (&creature_tint_b)[iVar8 * 0x26] = 0x3de147ae;
              (&creature_collision_flag)[iVar5] = 0;
              (&creature_collision_timer)[iVar8 * 0x26] = 0;
              *puVar9 = 1;
              (&creature_state_flag)[iVar5] = 1;
              (&creature_hitbox_size)[iVar8 * 0x26] = 0x41800000;
              (&creature_attack_cooldown)[iVar8 * 0x26] = 0;
              (&creature_type_id)[iVar8 * 0x26] = 2;
              (&creature_move_speed)[iVar8 * 0x26] = 0x40000000;
              (&creature_reward_value)[iVar8 * 0x26] = 0x42700000;
              (&creature_tint_a)[iVar8 * 0x26] = 0x3f800000;
              (&creature_size)[iVar8 * 0x26] = 0x42480000;
              (&creature_contact_damage)[iVar8 * 0x26] = 0x40800000;
            } while ((int)pos < 0x101);
            local_48 = local_48 + -0x40;
          } while (-0x240 < local_48);
        }
        else if (template_id == 0x15) {
          (&creature_type_id)[iVar4 * 0x26] = 2;
          (&creature_pos_x)[iVar4 * 0x26] = *pos;
          (&creature_pos_y)[iVar4 * 0x26] = pos[1];
          (&creature_ai_mode)[iVar4 * 0x26] = 2;
          (&creature_tint_r)[iVar4 * 0x26] = 0x3f800000;
          (&creature_tint_g)[iVar4 * 0x26] = 0x3f800000;
          (&creature_health)[iVar4 * 0x26] = 0x44bb8000;
          (&creature_move_speed)[iVar4 * 0x26] = 0x40000000;
          (&creature_tint_b)[iVar4 * 0x26] = 0x3f800000;
          (&creature_reward_value)[iVar4 * 0x26] = 0x44160000;
          (&creature_size)[iVar4 * 0x26] = 0x42700000;
          (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
          (&creature_contact_damage)[iVar4 * 0x26] = 0x42200000;
          (&creature_pos_x)[iVar4 * 0x26] = *pos;
          (&creature_pos_y)[iVar4 * 0x26] = pos[1];
          (&creature_max_health)[iVar4 * 0x26] = 0x44bb8000;
          local_48 = 0;
          do {
            pos = (float *)0x80;
            do {
              iVar8 = creature_alloc_slot();
              (&creature_target_offset_y)[iVar8 * 0x26] = (float)(int)pos;
              iVar5 = iVar8 * 0x98;
              puVar9 = &creature_pool + iVar5;
              (&creature_ai_mode)[iVar8 * 0x26] = 4;
              (&creature_heading)[iVar8 * 0x26] = 0;
              (&creature_anim_phase)[iVar8 * 0x26] = 0;
              (&creature_link_index)[iVar8 * 0x26] = iVar4;
              (&creature_target_offset_x)[iVar8 * 0x26] = (float)local_48;
              fVar2 = *pfVar3;
              fVar1 = pfVar3[1];
              (&creature_vel_x)[iVar8 * 0x26] = 0;
              (&creature_pos_x)[iVar8 * 0x26] =
                   fVar2 + (float)(&creature_target_offset_x)[iVar8 * 0x26];
              (&creature_vel_y)[iVar8 * 0x26] = 0;
              (&creature_pos_y)[iVar8 * 0x26] =
                   (float)(&creature_target_offset_y)[iVar8 * 0x26] + fVar1;
              (&creature_health)[iVar8 * 0x26] = 0x42200000;
              (&creature_max_health)[iVar8 * 0x26] = 0x42200000;
              (&creature_tint_r)[iVar8 * 0x26] = 0x3ecccccd;
              pos = pos + 0x10;
              (&creature_tint_g)[iVar8 * 0x26] = 0x3f333333;
              (&creature_collision_flag)[iVar5] = 0;
              (&creature_tint_b)[iVar8 * 0x26] = 0x3de147ae;
              (&creature_collision_timer)[iVar8 * 0x26] = 0;
              *puVar9 = 1;
              (&creature_state_flag)[iVar5] = 1;
              (&creature_hitbox_size)[iVar8 * 0x26] = 0x41800000;
              (&creature_attack_cooldown)[iVar8 * 0x26] = 0;
              (&creature_type_id)[iVar8 * 0x26] = 2;
              (&creature_move_speed)[iVar8 * 0x26] = 0x40000000;
              (&creature_reward_value)[iVar8 * 0x26] = 0x42700000;
              (&creature_tint_a)[iVar8 * 0x26] = 0x3f800000;
              (&creature_size)[iVar8 * 0x26] = 0x42480000;
              (&creature_contact_damage)[iVar8 * 0x26] = 0x40800000;
            } while ((int)pos < 0x101);
            local_48 = local_48 + -0x40;
          } while (-0x240 < local_48);
        }
        else if (template_id == 0x17) {
          (&creature_type_id)[iVar4 * 0x26] = 3;
          (&creature_pos_x)[iVar4 * 0x26] = *pos;
          (&creature_pos_y)[iVar4 * 0x26] = pos[1];
          (&creature_tint_r)[iVar4 * 0x26] = 0x3f800000;
          (&creature_tint_g)[iVar4 * 0x26] = 0x3f800000;
          (&creature_ai_mode)[iVar4 * 0x26] = 2;
          (&creature_health)[iVar4 * 0x26] = 0x44bb8000;
          (&creature_tint_b)[iVar4 * 0x26] = 0x3f800000;
          (&creature_move_speed)[iVar4 * 0x26] = 0x40000000;
          (&creature_reward_value)[iVar4 * 0x26] = 0x44160000;
          (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
          (&creature_size)[iVar4 * 0x26] = 0x42700000;
          (&creature_contact_damage)[iVar4 * 0x26] = 0x42200000;
          (&creature_pos_x)[iVar4 * 0x26] = *pos;
          (&creature_pos_y)[iVar4 * 0x26] = pos[1];
          (&creature_max_health)[iVar4 * 0x26] = 0x44bb8000;
          local_48 = 0;
          do {
            pos = (float *)0x80;
            do {
              iVar8 = creature_alloc_slot();
              (&creature_target_offset_y)[iVar8 * 0x26] = (float)(int)pos;
              iVar5 = iVar8 * 0x98;
              puVar9 = &creature_pool + iVar5;
              (&creature_ai_mode)[iVar8 * 0x26] = 4;
              (&creature_heading)[iVar8 * 0x26] = 0;
              (&creature_anim_phase)[iVar8 * 0x26] = 0;
              (&creature_link_index)[iVar8 * 0x26] = iVar4;
              (&creature_target_offset_x)[iVar8 * 0x26] = (float)local_48;
              fVar2 = *pfVar3;
              fVar1 = pfVar3[1];
              (&creature_vel_x)[iVar8 * 0x26] = 0;
              (&creature_pos_x)[iVar8 * 0x26] =
                   (float)(&creature_target_offset_x)[iVar8 * 0x26] + fVar2;
              (&creature_vel_y)[iVar8 * 0x26] = 0;
              (&creature_pos_y)[iVar8 * 0x26] =
                   (float)(&creature_target_offset_y)[iVar8 * 0x26] + fVar1;
              (&creature_health)[iVar8 * 0x26] = 0x42200000;
              (&creature_max_health)[iVar8 * 0x26] = 0x42200000;
              (&creature_tint_r)[iVar8 * 0x26] = 0x3ecccccd;
              pos = pos + 0x10;
              (&creature_tint_g)[iVar8 * 0x26] = 0x3f333333;
              (&creature_collision_flag)[iVar5] = 0;
              (&creature_tint_b)[iVar8 * 0x26] = 0x3de147ae;
              (&creature_collision_timer)[iVar8 * 0x26] = 0;
              *puVar9 = 1;
              (&creature_state_flag)[iVar5] = 1;
              (&creature_hitbox_size)[iVar8 * 0x26] = 0x41800000;
              (&creature_attack_cooldown)[iVar8 * 0x26] = 0;
              (&creature_type_id)[iVar8 * 0x26] = 3;
              (&creature_move_speed)[iVar8 * 0x26] = 0x40000000;
              (&creature_reward_value)[iVar8 * 0x26] = 0x42700000;
              (&creature_tint_a)[iVar8 * 0x26] = 0x3f800000;
              (&creature_size)[iVar8 * 0x26] = 0x42480000;
              (&creature_contact_damage)[iVar8 * 0x26] = 0x40800000;
            } while ((int)pos < 0x101);
            local_48 = local_48 + -0x40;
          } while (-0x240 < local_48);
        }
        else if (template_id == 0x16) {
          (&creature_type_id)[iVar4 * 0x26] = 1;
          (&creature_pos_x)[iVar4 * 0x26] = *pos;
          (&creature_pos_y)[iVar4 * 0x26] = pos[1];
          (&creature_tint_r)[iVar4 * 0x26] = 0x3f800000;
          (&creature_tint_g)[iVar4 * 0x26] = 0x3f800000;
          (&creature_ai_mode)[iVar4 * 0x26] = 2;
          (&creature_health)[iVar4 * 0x26] = 0x44bb8000;
          (&creature_tint_b)[iVar4 * 0x26] = 0x3f800000;
          (&creature_move_speed)[iVar4 * 0x26] = 0x40000000;
          (&creature_reward_value)[iVar4 * 0x26] = 0x44160000;
          (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
          (&creature_size)[iVar4 * 0x26] = 0x42800000;
          (&creature_contact_damage)[iVar4 * 0x26] = 0x42200000;
          (&creature_pos_x)[iVar4 * 0x26] = *pos;
          (&creature_pos_y)[iVar4 * 0x26] = pos[1];
          (&creature_max_health)[iVar4 * 0x26] = 0x44bb8000;
          local_48 = 0;
          do {
            pos = (float *)0x80;
            do {
              iVar8 = creature_alloc_slot();
              (&creature_target_offset_y)[iVar8 * 0x26] = (float)(int)pos;
              iVar5 = iVar8 * 0x98;
              puVar9 = &creature_pool + iVar5;
              (&creature_ai_mode)[iVar8 * 0x26] = 4;
              (&creature_heading)[iVar8 * 0x26] = 0;
              (&creature_anim_phase)[iVar8 * 0x26] = 0;
              (&creature_link_index)[iVar8 * 0x26] = iVar4;
              (&creature_target_offset_x)[iVar8 * 0x26] = (float)local_48;
              fVar2 = *pfVar3;
              fVar1 = pfVar3[1];
              (&creature_vel_x)[iVar8 * 0x26] = 0;
              (&creature_pos_x)[iVar8 * 0x26] =
                   (float)(&creature_target_offset_x)[iVar8 * 0x26] + fVar2;
              (&creature_vel_y)[iVar8 * 0x26] = 0;
              (&creature_pos_y)[iVar8 * 0x26] =
                   (float)(&creature_target_offset_y)[iVar8 * 0x26] + fVar1;
              (&creature_health)[iVar8 * 0x26] = 0x42200000;
              (&creature_max_health)[iVar8 * 0x26] = 0x42200000;
              (&creature_tint_r)[iVar8 * 0x26] = 0x3ecccccd;
              pos = pos + 0x10;
              (&creature_tint_g)[iVar8 * 0x26] = 0x3f333333;
              (&creature_collision_flag)[iVar5] = 0;
              (&creature_tint_b)[iVar8 * 0x26] = 0x3de147ae;
              (&creature_collision_timer)[iVar8 * 0x26] = 0;
              *puVar9 = 1;
              (&creature_state_flag)[iVar5] = 1;
              (&creature_hitbox_size)[iVar8 * 0x26] = 0x41800000;
              (&creature_attack_cooldown)[iVar8 * 0x26] = 0;
              (&creature_type_id)[iVar8 * 0x26] = 1;
              (&creature_move_speed)[iVar8 * 0x26] = 0x40000000;
              (&creature_reward_value)[iVar8 * 0x26] = 0x42700000;
              (&creature_tint_a)[iVar8 * 0x26] = 0x3f800000;
              (&creature_size)[iVar8 * 0x26] = 0x42700000;
              (&creature_contact_damage)[iVar8 * 0x26] = 0x40800000;
            } while ((int)pos < 0x101);
            local_48 = local_48 + -0x40;
          } while (-0x240 < local_48);
        }
        else {
          if (template_id != 0xf) {
            if (template_id == 0x18) {
              (&creature_type_id)[iVar4 * 0x26] = 2;
              (&creature_pos_x)[iVar4 * 0x26] = *pos;
              fVar2 = pos[1];
              (&creature_ai_mode)[iVar4 * 0x26] = 2;
              (&creature_tint_r)[iVar4 * 0x26] = 0x3f333333;
              (&creature_pos_y)[iVar4 * 0x26] = fVar2;
              (&creature_tint_g)[iVar4 * 0x26] = 0x3f4ccccd;
              (&creature_health)[iVar4 * 0x26] = 0x43fa0000;
              (&creature_move_speed)[iVar4 * 0x26] = 0x40000000;
              (&creature_tint_b)[iVar4 * 0x26] = 0x3e9eb852;
              (&creature_reward_value)[iVar4 * 0x26] = 0x44160000;
              (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
              (&creature_size)[iVar4 * 0x26] = 0x42200000;
              (&creature_contact_damage)[iVar4 * 0x26] = 0x42200000;
              (&creature_pos_x)[iVar4 * 0x26] = *pos;
              (&creature_pos_y)[iVar4 * 0x26] = pos[1];
              (&creature_max_health)[iVar4 * 0x26] = 0x43fa0000;
              local_48 = 0;
              do {
                pos = (float *)0x80;
                do {
                  iVar8 = creature_alloc_slot();
                  (&creature_target_offset_y)[iVar8 * 0x26] = (float)(int)pos;
                  iVar5 = iVar8 * 0x98;
                  puVar9 = &creature_pool + iVar5;
                  (&creature_ai_mode)[iVar8 * 0x26] = 3;
                  (&creature_heading)[iVar8 * 0x26] = 0;
                  (&creature_anim_phase)[iVar8 * 0x26] = 0;
                  (&creature_link_index)[iVar8 * 0x26] = iVar4;
                  (&creature_target_offset_x)[iVar8 * 0x26] = (float)local_48;
                  fVar2 = *pfVar3;
                  fVar1 = pfVar3[1];
                  (&creature_vel_x)[iVar8 * 0x26] = 0;
                  (&creature_pos_x)[iVar8 * 0x26] =
                       (float)(&creature_target_offset_x)[iVar8 * 0x26] + fVar2;
                  (&creature_vel_y)[iVar8 * 0x26] = 0;
                  (&creature_pos_y)[iVar8 * 0x26] =
                       (float)(&creature_target_offset_y)[iVar8 * 0x26] + fVar1;
                  (&creature_health)[iVar8 * 0x26] = 0x43820000;
                  (&creature_max_health)[iVar8 * 0x26] = 0x43820000;
                  (&creature_tint_r)[iVar8 * 0x26] = 0x3f366666;
                  pos = pos + 0x10;
                  (&creature_tint_g)[iVar8 * 0x26] = 0x3ed33334;
                  (&creature_collision_flag)[iVar5] = 0;
                  (&creature_tint_b)[iVar8 * 0x26] = 0x3e8e147b;
                  (&creature_collision_timer)[iVar8 * 0x26] = 0;
                  *puVar9 = 1;
                  (&creature_state_flag)[iVar5] = 1;
                  (&creature_hitbox_size)[iVar8 * 0x26] = 0x41800000;
                  (&creature_attack_cooldown)[iVar8 * 0x26] = 0;
                  (&creature_type_id)[iVar8 * 0x26] = 2;
                  (&creature_move_speed)[iVar8 * 0x26] = 0x40733333;
                  (&creature_reward_value)[iVar8 * 0x26] = 0x42700000;
                  (&creature_tint_a)[iVar8 * 0x26] = 0x3f19999a;
                  (&creature_size)[iVar8 * 0x26] = 0x42480000;
                  (&creature_contact_damage)[iVar8 * 0x26] = 0x420c0000;
                } while ((int)pos < 0x101);
                local_48 = local_48 + -0x40;
              } while (-0x240 < local_48);
              goto LAB_004310b8;
            }
            if (template_id == 1) {
              (&creature_type_id)[iVar4 * 0x26] = 4;
              *(undefined4 *)(&creature_flags + iVar8) = 8;
              (&creature_size)[iVar4 * 0x26] = 0x42a00000;
              (&creature_health)[iVar4 * 0x26] = 0x43c80000;
              (&creature_move_speed)[iVar4 * 0x26] = 0x40000000;
              (&creature_reward_value)[iVar4 * 0x26] = 0x447a0000;
              (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
              (&creature_tint_r)[iVar4 * 0x26] = 0x3f4ccccd;
              (&creature_tint_g)[iVar4 * 0x26] = 0x3f333333;
              (&creature_tint_b)[iVar4 * 0x26] = 0x3ecccccd;
              (&creature_contact_damage)[iVar4 * 0x26] = 0x41880000;
              goto LAB_004310b8;
            }
            if (template_id == 10) {
              (&creature_type_id)[iVar4 * 0x26] = 2;
              *(undefined4 *)(&creature_flags + iVar8) = 4;
              iVar5 = FUN_00430ad0();
              (&creature_link_index)[iVar4 * 0x26] = iVar5;
              (&creature_spawn_slot_timer)[iVar5 * 6] = 0x40000000;
              (&creature_spawn_slot_count)[iVar5 * 6] = 0;
              (&creature_spawn_slot_limit)[iVar5 * 6] = 100;
              (&creature_spawn_slot_interval)[iVar5 * 6] = 0x40a00000;
              *(undefined4 *)(&creature_spawn_slot_template + iVar5 * 0x18) = 0x32;
              (&creature_spawn_slot_owner)[iVar5 * 6] = puVar9;
              (&creature_size)[iVar4 * 0x26] = 0x425c0000;
              (&creature_health)[iVar4 * 0x26] = 0x447a0000;
              (&creature_move_speed)[iVar4 * 0x26] = 0x3fc00000;
              (&creature_reward_value)[iVar4 * 0x26] = 0x453b8000;
              (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
              (&creature_tint_r)[iVar4 * 0x26] = 0x3f4ccccd;
              (&creature_tint_g)[iVar4 * 0x26] = 0x3f333333;
              (&creature_tint_b)[iVar4 * 0x26] = 0x3ecccccd;
              (&creature_contact_damage)[iVar4 * 0x26] = 0;
              goto LAB_004310b8;
            }
            if (template_id == 0xb) {
              (&creature_type_id)[iVar4 * 0x26] = 2;
              *(undefined4 *)(&creature_flags + iVar8) = 4;
              iVar5 = FUN_00430ad0();
              (&creature_link_index)[iVar4 * 0x26] = iVar5;
              (&creature_spawn_slot_timer)[iVar5 * 6] = 0x40000000;
              (&creature_spawn_slot_count)[iVar5 * 6] = 0;
              (&creature_spawn_slot_limit)[iVar5 * 6] = 100;
              (&creature_spawn_slot_interval)[iVar5 * 6] = 0x40c00000;
              *(undefined4 *)(&creature_spawn_slot_template + iVar5 * 0x18) = 0x3c;
              (&creature_spawn_slot_owner)[iVar5 * 6] = puVar9;
              (&creature_size)[iVar4 * 0x26] = 0x42820000;
              (&creature_health)[iVar4 * 0x26] = 0x455ac000;
              (&creature_move_speed)[iVar4 * 0x26] = 0x3fc00000;
              (&creature_reward_value)[iVar4 * 0x26] = 0x459c4000;
              (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
              (&creature_tint_r)[iVar4 * 0x26] = 0x3f666666;
              (&creature_tint_g)[iVar4 * 0x26] = 0x3dcccccd;
              (&creature_tint_b)[iVar4 * 0x26] = 0x3dcccccd;
              (&creature_contact_damage)[iVar4 * 0x26] = 0;
              goto LAB_004310b8;
            }
            if (template_id == 0x10) {
              (&creature_type_id)[iVar4 * 0x26] = 2;
              *(undefined4 *)(&creature_flags + iVar8) = 4;
              iVar5 = FUN_00430ad0();
              (&creature_link_index)[iVar4 * 0x26] = iVar5;
              (&creature_spawn_slot_timer)[iVar5 * 6] = 0x3fc00000;
              (&creature_spawn_slot_count)[iVar5 * 6] = 0;
              (&creature_spawn_slot_limit)[iVar5 * 6] = 100;
              (&creature_spawn_slot_interval)[iVar5 * 6] = 0x40133333;
              *(undefined4 *)(&creature_spawn_slot_template + iVar5 * 0x18) = 0x32;
              (&creature_spawn_slot_owner)[iVar5 * 6] = puVar9;
              (&creature_size)[iVar4 * 0x26] = 0x42000000;
              (&creature_health)[iVar4 * 0x26] = 0x42480000;
              (&creature_move_speed)[iVar4 * 0x26] = 0x40333333;
              (&creature_reward_value)[iVar4 * 0x26] = 0x44480000;
            }
            else {
              if (template_id == 0xe) {
                (&creature_type_id)[iVar4 * 0x26] = 2;
                *(undefined4 *)(&creature_flags + iVar8) = 4;
                iVar5 = FUN_00430ad0();
                (&creature_link_index)[iVar4 * 0x26] = iVar5;
                pos = (float *)0x0;
                (&creature_spawn_slot_timer)[iVar5 * 6] = 0x3fc00000;
                (&creature_spawn_slot_count)[iVar5 * 6] = 0;
                (&creature_spawn_slot_limit)[iVar5 * 6] = 0x40;
                (&creature_spawn_slot_interval)[iVar5 * 6] = 0x3f866666;
                *(undefined4 *)(&creature_spawn_slot_template + iVar5 * 0x18) = 0x1c;
                (&creature_spawn_slot_owner)[iVar5 * 6] = puVar9;
                (&creature_size)[iVar4 * 0x26] = 0x42000000;
                (&creature_health)[iVar4 * 0x26] = 0x42480000;
                (&creature_move_speed)[iVar4 * 0x26] = 0x40333333;
                (&creature_reward_value)[iVar4 * 0x26] = 0x459c4000;
                (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                (&creature_tint_r)[iVar4 * 0x26] = 0x3f666666;
                (&creature_tint_g)[iVar4 * 0x26] = 0x3f4ccccd;
                (&creature_tint_b)[iVar4 * 0x26] = 0x3ecccccd;
                (&creature_contact_damage)[iVar4 * 0x26] = 0;
                do {
                  iVar8 = creature_alloc_slot();
                  fVar10 = (float10)fcos((float10)(int)pos * (float10)0.2617994);
                  iVar5 = iVar8 * 0x98;
                  puVar9 = &creature_pool + iVar5;
                  (&creature_ai_mode)[iVar8 * 0x26] = 3;
                  (&creature_heading)[iVar8 * 0x26] = 0;
                  (&creature_anim_phase)[iVar8 * 0x26] = 0;
                  (&creature_link_index)[iVar8 * 0x26] = iVar4;
                  (&creature_target_offset_x)[iVar8 * 0x26] = (float)(fVar10 * (float10)100.0);
                  fVar10 = (float10)fsin((float10)(int)pos * (float10)0.2617994);
                  (&creature_target_offset_y)[iVar8 * 0x26] = (float)(fVar10 * (float10)100.0);
                  (&creature_pos_x)[iVar8 * 0x26] = *pfVar3;
                  (&creature_pos_y)[iVar8 * 0x26] = pfVar3[1];
                  (&creature_vel_x)[iVar8 * 0x26] = 0;
                  (&creature_vel_y)[iVar8 * 0x26] = 0;
                  (&creature_collision_flag)[iVar5] = 0;
                  (&creature_tint_r)[iVar8 * 0x26] = 0x3f800000;
                  (&creature_health)[iVar8 * 0x26] = 0x42200000;
                  (&creature_max_health)[iVar8 * 0x26] = 0x42200000;
                  (&creature_tint_g)[iVar8 * 0x26] = 0x3e99999a;
                  pos = (float *)((int)pos + 1);
                  (&creature_tint_b)[iVar8 * 0x26] = 0x3e99999a;
                  (&creature_collision_timer)[iVar8 * 0x26] = 0;
                  *puVar9 = 1;
                  (&creature_state_flag)[iVar5] = 1;
                  (&creature_hitbox_size)[iVar8 * 0x26] = 0x41800000;
                  (&creature_attack_cooldown)[iVar8 * 0x26] = 0;
                  (&creature_type_id)[iVar8 * 0x26] = 2;
                  (&creature_move_speed)[iVar8 * 0x26] = 0x40800000;
                  (&creature_reward_value)[iVar8 * 0x26] = 0x43af0000;
                  (&creature_tint_a)[iVar8 * 0x26] = 0x3f800000;
                  (&creature_size)[iVar8 * 0x26] = 0x420c0000;
                  (&creature_contact_damage)[iVar8 * 0x26] = 0x41f00000;
                } while ((int)pos < 0x18);
                goto LAB_004310b8;
              }
              if (template_id == 0xc) {
                (&creature_type_id)[iVar4 * 0x26] = 2;
                *(undefined4 *)(&creature_flags + iVar8) = 4;
                iVar5 = FUN_00430ad0();
                (&creature_link_index)[iVar4 * 0x26] = iVar5;
                (&creature_spawn_slot_timer)[iVar5 * 6] = 0x3fc00000;
                (&creature_spawn_slot_count)[iVar5 * 6] = 0;
                (&creature_spawn_slot_limit)[iVar5 * 6] = 100;
                (&creature_spawn_slot_interval)[iVar5 * 6] = 0x40000000;
                *(undefined4 *)(&creature_spawn_slot_template + iVar5 * 0x18) = 0x31;
                (&creature_spawn_slot_owner)[iVar5 * 6] = puVar9;
                (&creature_size)[iVar4 * 0x26] = 0x42000000;
                (&creature_health)[iVar4 * 0x26] = 0x42480000;
                (&creature_move_speed)[iVar4 * 0x26] = 0x40333333;
                (&creature_reward_value)[iVar4 * 0x26] = 0x447a0000;
              }
              else {
                if (template_id != 0xd) {
                  if (template_id == 9) {
                    (&creature_type_id)[iVar4 * 0x26] = 2;
                    *(undefined4 *)(&creature_flags + iVar8) = 4;
                    iVar5 = FUN_00430ad0();
                    (&creature_link_index)[iVar4 * 0x26] = iVar5;
                    (&creature_spawn_slot_timer)[iVar5 * 6] = 0x3f800000;
                    (&creature_spawn_slot_count)[iVar5 * 6] = 0;
                    (&creature_spawn_slot_limit)[iVar5 * 6] = 0x10;
                    (&creature_spawn_slot_interval)[iVar5 * 6] = 0x40000000;
                    *(undefined4 *)(&creature_spawn_slot_template + iVar5 * 0x18) = 0x1d;
                    (&creature_spawn_slot_owner)[iVar5 * 6] = puVar9;
                    (&creature_size)[iVar4 * 0x26] = 0x42200000;
                    (&creature_health)[iVar4 * 0x26] = 0x43e10000;
                    (&creature_move_speed)[iVar4 * 0x26] = 0x40000000;
                    (&creature_reward_value)[iVar4 * 0x26] = 0x447a0000;
                    (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                    (&creature_tint_r)[iVar4 * 0x26] = 0x3f800000;
                    (&creature_tint_g)[iVar4 * 0x26] = 0x3f800000;
                    (&creature_tint_b)[iVar4 * 0x26] = 0x3f800000;
                    (&creature_contact_damage)[iVar4 * 0x26] = 0;
                    goto LAB_004310b8;
                  }
                  if (template_id == 7) {
                    (&creature_type_id)[iVar4 * 0x26] = 2;
                    *(undefined4 *)(&creature_flags + iVar8) = 4;
                    iVar5 = FUN_00430ad0();
                    (&creature_link_index)[iVar4 * 0x26] = iVar5;
                    (&creature_spawn_slot_timer)[iVar5 * 6] = 0x3f800000;
                    (&creature_spawn_slot_count)[iVar5 * 6] = 0;
                    (&creature_spawn_slot_limit)[iVar5 * 6] = 100;
                    (&creature_spawn_slot_interval)[iVar5 * 6] = 0x400ccccd;
                  }
                  else {
                    if (template_id != 8) {
                      if (template_id == 0x1a) {
                        (&creature_type_id)[iVar4 * 0x26] = 2;
                        (&creature_size)[iVar4 * 0x26] = 0x42480000;
                        (&creature_ai_mode)[iVar4 * 0x26] = 1;
                        (&creature_health)[iVar4 * 0x26] = 0x42480000;
                        (&creature_move_speed)[iVar4 * 0x26] = 0x4019999a;
                        (&creature_reward_value)[iVar4 * 0x26] = 0x42fa0000;
                        (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                        iVar5 = _rand();
                        fVar2 = (float)(iVar5 % 0x28);
                      }
                      else if (template_id == 0x1b) {
                        (&creature_type_id)[iVar4 * 0x26] = 3;
                        (&creature_size)[iVar4 * 0x26] = 0x42480000;
                        (&creature_ai_mode)[iVar4 * 0x26] = 1;
                        (&creature_health)[iVar4 * 0x26] = 0x42200000;
                        (&creature_move_speed)[iVar4 * 0x26] = 0x4019999a;
                        (&creature_reward_value)[iVar4 * 0x26] = 0x42fa0000;
                        (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                        iVar5 = _rand();
                        fVar2 = (float)(iVar5 % 0x28);
                      }
                      else {
                        if (template_id != 0x1c) {
                          if (template_id == 0x41) {
                            (&creature_type_id)[iVar4 * 0x26] = 0;
                            iVar5 = _rand();
                            (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                            fVar2 = (float)(iVar5 % 0x1e + 0x28);
                            (&creature_size)[iVar4 * 0x26] = fVar2;
                            (&creature_health)[iVar4 * 0x26] = fVar2 * 1.1428572 + 10.0;
                            (&creature_move_speed)[iVar4 * 0x26] = fVar2 * 0.0025 + 0.9;
                            (&creature_reward_value)[iVar4 * 0x26] = fVar2 + fVar2 + 50.0;
                            iVar5 = _rand();
                            fVar2 = (float)(iVar5 % 0x28) * 0.01 + 0.6;
                            (&creature_tint_r)[iVar4 * 0x26] = fVar2;
                            (&creature_tint_g)[iVar4 * 0x26] = fVar2;
                            (&creature_tint_b)[iVar4 * 0x26] = fVar2;
                            iVar5 = _rand();
                            (&creature_contact_damage)[iVar4 * 0x26] = (float)(iVar5 % 10) + 4.0;
                            goto LAB_004310b8;
                          }
                          if (template_id == 0x31) {
                            (&creature_type_id)[iVar4 * 0x26] = 1;
                            iVar5 = _rand();
                            fVar2 = (float)(iVar5 % 0x1e + 0x28);
                            (&creature_size)[iVar4 * 0x26] = fVar2;
                            (&creature_health)[iVar4 * 0x26] = fVar2 * 1.1428572 + 10.0;
                            iVar5 = _rand();
                            (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                            (&creature_move_speed)[iVar4 * 0x26] = (float)(iVar5 % 0x12) * 0.1 + 1.1
                            ;
                            (&creature_reward_value)[iVar4 * 0x26] =
                                 (float)(&creature_size)[iVar4 * 0x26] +
                                 (float)(&creature_size)[iVar4 * 0x26] + 50.0;
                            iVar5 = _rand();
                            (&creature_tint_b)[iVar4 * 0x26] = 0x3ec28f5c;
                            fVar2 = (float)(iVar5 % 0x1e) * 0.01 + 0.6;
                            (&creature_tint_r)[iVar4 * 0x26] = fVar2;
                            (&creature_tint_g)[iVar4 * 0x26] = fVar2;
                          }
                          else {
                            if (template_id != 0x32) {
                              if (template_id == 0x33) {
                                (&creature_type_id)[iVar4 * 0x26] = 3;
                                iVar5 = _rand();
                                fVar2 = (float)(iVar5 % 0xf + 0x2d);
                                (&creature_size)[iVar4 * 0x26] = fVar2;
                                (&creature_health)[iVar4 * 0x26] = fVar2 * 1.1428572 + 20.0;
                                iVar5 = _rand();
                                (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                (&creature_move_speed)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x12) * 0.1 + 1.1;
                                (&creature_reward_value)[iVar4 * 0x26] =
                                     (float)(&creature_size)[iVar4 * 0x26] +
                                     (float)(&creature_size)[iVar4 * 0x26] + 50.0;
                                iVar5 = _rand();
                                (&creature_tint_g)[iVar4 * 0x26] = 0x3f000000;
                                (&creature_tint_b)[iVar4 * 0x26] = 0x3f000000;
                                (&creature_tint_r)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x28) * 0.01 + 0.6;
                                iVar5 = _rand();
                                (&creature_contact_damage)[iVar4 * 0x26] = (float)(iVar5 % 10) + 4.0
                                ;
                                goto LAB_004310b8;
                              }
                              if (template_id == 0x34) {
                                (&creature_type_id)[iVar4 * 0x26] = 3;
                                iVar5 = _rand();
                                fVar2 = (float)(iVar5 % 0x14 + 0x28);
                                (&creature_size)[iVar4 * 0x26] = fVar2;
                                (&creature_health)[iVar4 * 0x26] = fVar2 * 1.1428572 + 20.0;
                                iVar5 = _rand();
                                (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                (&creature_move_speed)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x12) * 0.1 + 1.1;
                                (&creature_reward_value)[iVar4 * 0x26] =
                                     (float)(&creature_size)[iVar4 * 0x26] +
                                     (float)(&creature_size)[iVar4 * 0x26] + 50.0;
                                iVar5 = _rand();
                                (&creature_tint_r)[iVar4 * 0x26] = 0x3f000000;
                                (&creature_tint_b)[iVar4 * 0x26] = 0x3f000000;
                                (&creature_tint_g)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x28) * 0.01 + 0.6;
                                iVar5 = _rand();
                                (&creature_contact_damage)[iVar4 * 0x26] = (float)(iVar5 % 10) + 4.0
                                ;
                                goto LAB_004310b8;
                              }
                              if (template_id == 0x20) {
                                (&creature_type_id)[iVar4 * 0x26] = 2;
                                iVar5 = _rand();
                                fVar2 = (float)(iVar5 % 0x1e + 0x28);
                                (&creature_size)[iVar4 * 0x26] = fVar2;
                                (&creature_health)[iVar4 * 0x26] = fVar2 * 1.1428572 + 20.0;
                                iVar5 = _rand();
                                (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                (&creature_tint_r)[iVar4 * 0x26] = 0x3e99999a;
                                (&creature_move_speed)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x12) * 0.1 + 1.1;
                                (&creature_reward_value)[iVar4 * 0x26] =
                                     (float)(&creature_size)[iVar4 * 0x26] +
                                     (float)(&creature_size)[iVar4 * 0x26] + 50.0;
                                iVar5 = _rand();
                                (&creature_tint_b)[iVar4 * 0x26] = 0x3e99999a;
                                (&creature_tint_g)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x28) * 0.01 + 0.6;
                                iVar5 = _rand();
                                (&creature_contact_damage)[iVar4 * 0x26] = (float)(iVar5 % 10) + 4.0
                                ;
                                goto LAB_004310b8;
                              }
                              if (template_id == 3) {
                                (&creature_type_id)[iVar4 * 0x26] = 3;
                                iVar5 = _rand();
                                fVar2 = (float)(iVar5 % 0xf + 0x26);
                                (&creature_size)[iVar4 * 0x26] = fVar2;
                                (&creature_health)[iVar4 * 0x26] = fVar2 * 1.1428572 + 20.0;
                                iVar5 = _rand();
                                (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                (&creature_tint_r)[iVar4 * 0x26] = 0x3f19999a;
                                (&creature_tint_g)[iVar4 * 0x26] = 0x3f19999a;
                                (&creature_move_speed)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x12) * 0.1 + 1.1;
                                (&creature_reward_value)[iVar4 * 0x26] =
                                     (float)(&creature_size)[iVar4 * 0x26] +
                                     (float)(&creature_size)[iVar4 * 0x26] + 50.0;
                                iVar5 = _rand();
                                (&creature_tint_b)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x19) * 0.01 + 0.8;
                                if (0.0 <= (float)(&creature_tint_r)[iVar4 * 0x26]) {
                                  if (1.0 < (float)(&creature_tint_r)[iVar4 * 0x26]) {
                                    (&creature_tint_r)[iVar4 * 0x26] = 0x3f800000;
                                  }
                                }
                                else {
                                  (&creature_tint_r)[iVar4 * 0x26] = 0;
                                }
                                if (0.0 <= (float)(&creature_tint_g)[iVar4 * 0x26]) {
                                  if (1.0 < (float)(&creature_tint_g)[iVar4 * 0x26]) {
                                    (&creature_tint_g)[iVar4 * 0x26] = 0x3f800000;
                                  }
                                }
                                else {
                                  (&creature_tint_g)[iVar4 * 0x26] = 0;
                                }
                                if (0.0 <= (float)(&creature_tint_b)[iVar4 * 0x26]) {
                                  if (1.0 < (float)(&creature_tint_b)[iVar4 * 0x26]) {
                                    (&creature_tint_b)[iVar4 * 0x26] = 0x3f800000;
                                  }
                                }
                                else {
                                  (&creature_tint_b)[iVar4 * 0x26] = 0;
                                }
                                if (0.0 <= (float)(&creature_tint_a)[iVar4 * 0x26]) {
                                  if (1.0 < (float)(&creature_tint_a)[iVar4 * 0x26]) {
                                    (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                  }
                                }
                                else {
                                  (&creature_tint_a)[iVar4 * 0x26] = 0;
                                }
                                iVar5 = _rand();
                                (&creature_contact_damage)[iVar4 * 0x26] = (float)(iVar5 % 10) + 4.0
                                ;
                                goto LAB_004310b8;
                              }
                              if (template_id == 5) {
                                (&creature_type_id)[iVar4 * 0x26] = 4;
                                iVar5 = _rand();
                                fVar2 = (float)(iVar5 % 0xf + 0x26);
                                (&creature_size)[iVar4 * 0x26] = fVar2;
                                (&creature_health)[iVar4 * 0x26] = fVar2 * 1.1428572 + 20.0;
                                iVar5 = _rand();
                                (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                (&creature_tint_r)[iVar4 * 0x26] = 0x3f19999a;
                                (&creature_tint_g)[iVar4 * 0x26] = 0x3f19999a;
                                (&creature_move_speed)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x12) * 0.1 + 1.1;
                                (&creature_reward_value)[iVar4 * 0x26] =
                                     (float)(&creature_size)[iVar4 * 0x26] +
                                     (float)(&creature_size)[iVar4 * 0x26] + 50.0;
                                iVar5 = _rand();
                                (&creature_tint_b)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x19) * 0.01 + 0.8;
                                if (0.0 <= (float)(&creature_tint_r)[iVar4 * 0x26]) {
                                  if (1.0 < (float)(&creature_tint_r)[iVar4 * 0x26]) {
                                    (&creature_tint_r)[iVar4 * 0x26] = 0x3f800000;
                                  }
                                }
                                else {
                                  (&creature_tint_r)[iVar4 * 0x26] = 0;
                                }
                                if (0.0 <= (float)(&creature_tint_g)[iVar4 * 0x26]) {
                                  if (1.0 < (float)(&creature_tint_g)[iVar4 * 0x26]) {
                                    (&creature_tint_g)[iVar4 * 0x26] = 0x3f800000;
                                  }
                                }
                                else {
                                  (&creature_tint_g)[iVar4 * 0x26] = 0;
                                }
                                if (0.0 <= (float)(&creature_tint_b)[iVar4 * 0x26]) {
                                  if (1.0 < (float)(&creature_tint_b)[iVar4 * 0x26]) {
                                    (&creature_tint_b)[iVar4 * 0x26] = 0x3f800000;
                                  }
                                }
                                else {
                                  (&creature_tint_b)[iVar4 * 0x26] = 0;
                                }
                                if (0.0 <= (float)(&creature_tint_a)[iVar4 * 0x26]) {
                                  if (1.0 < (float)(&creature_tint_a)[iVar4 * 0x26]) {
                                    (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                  }
                                }
                                else {
                                  (&creature_tint_a)[iVar4 * 0x26] = 0;
                                }
                                iVar5 = _rand();
                                (&creature_contact_damage)[iVar4 * 0x26] = (float)(iVar5 % 10) + 4.0
                                ;
                                goto LAB_004310b8;
                              }
                              if (template_id == 4) {
                                (&creature_type_id)[iVar4 * 0x26] = 1;
                                iVar5 = _rand();
                                fVar2 = (float)(iVar5 % 0xf + 0x26);
                                (&creature_size)[iVar4 * 0x26] = fVar2;
                                (&creature_health)[iVar4 * 0x26] = fVar2 * 1.1428572 + 20.0;
                                iVar5 = _rand();
                                (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                (&creature_tint_r)[iVar4 * 0x26] = 0x3f2b851f;
                                (&creature_tint_g)[iVar4 * 0x26] = 0x3f2b851f;
                                (&creature_tint_b)[iVar4 * 0x26] = 0x3f800000;
                                (&creature_move_speed)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x12) * 0.1 + 1.1;
                                (&creature_reward_value)[iVar4 * 0x26] =
                                     (float)(&creature_size)[iVar4 * 0x26] +
                                     (float)(&creature_size)[iVar4 * 0x26] + 50.0;
                                iVar5 = _rand();
                                (&creature_contact_damage)[iVar4 * 0x26] = (float)(iVar5 % 10) + 4.0
                                ;
                                goto LAB_004310b8;
                              }
                              if (template_id == 6) {
                                (&creature_type_id)[iVar4 * 0x26] = 2;
                                iVar5 = _rand();
                                fVar2 = (float)(iVar5 % 0xf + 0x26);
                                (&creature_size)[iVar4 * 0x26] = fVar2;
                                (&creature_health)[iVar4 * 0x26] = fVar2 * 1.1428572 + 20.0;
                                iVar5 = _rand();
                                (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                (&creature_tint_r)[iVar4 * 0x26] = 0x3f19999a;
                                (&creature_tint_g)[iVar4 * 0x26] = 0x3f19999a;
                                (&creature_move_speed)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x12) * 0.1 + 1.1;
                                (&creature_reward_value)[iVar4 * 0x26] =
                                     (float)(&creature_size)[iVar4 * 0x26] +
                                     (float)(&creature_size)[iVar4 * 0x26] + 50.0;
                                iVar5 = _rand();
                                (&creature_tint_b)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x19) * 0.01 + 0.8;
                                if (0.0 <= (float)(&creature_tint_r)[iVar4 * 0x26]) {
                                  if (1.0 < (float)(&creature_tint_r)[iVar4 * 0x26]) {
                                    (&creature_tint_r)[iVar4 * 0x26] = 0x3f800000;
                                  }
                                }
                                else {
                                  (&creature_tint_r)[iVar4 * 0x26] = 0;
                                }
                                if (0.0 <= (float)(&creature_tint_g)[iVar4 * 0x26]) {
                                  if (1.0 < (float)(&creature_tint_g)[iVar4 * 0x26]) {
                                    (&creature_tint_g)[iVar4 * 0x26] = 0x3f800000;
                                  }
                                }
                                else {
                                  (&creature_tint_g)[iVar4 * 0x26] = 0;
                                }
                                if (0.0 <= (float)(&creature_tint_b)[iVar4 * 0x26]) {
                                  if (1.0 < (float)(&creature_tint_b)[iVar4 * 0x26]) {
                                    (&creature_tint_b)[iVar4 * 0x26] = 0x3f800000;
                                  }
                                }
                                else {
                                  (&creature_tint_b)[iVar4 * 0x26] = 0;
                                }
                                if (0.0 <= (float)(&creature_tint_a)[iVar4 * 0x26]) {
                                  if (1.0 < (float)(&creature_tint_a)[iVar4 * 0x26]) {
                                    (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                  }
                                }
                                else {
                                  (&creature_tint_a)[iVar4 * 0x26] = 0;
                                }
                                iVar5 = _rand();
                                (&creature_contact_damage)[iVar4 * 0x26] = (float)(iVar5 % 10) + 4.0
                                ;
                                goto LAB_004310b8;
                              }
                              if (template_id == 0x35) {
                                (&creature_type_id)[iVar4 * 0x26] = 4;
                                iVar5 = _rand();
                                fVar2 = (float)(iVar5 % 10 + 0x1e);
                                (&creature_size)[iVar4 * 0x26] = fVar2;
                                (&creature_health)[iVar4 * 0x26] = fVar2 * 1.1428572 + 20.0;
                                iVar5 = _rand();
                                (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                (&creature_tint_b)[iVar4 * 0x26] = 0x3f4ccccd;
                                (&creature_move_speed)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x12) * 0.1 + 1.1;
                                (&creature_reward_value)[iVar4 * 0x26] =
                                     (float)(&creature_size)[iVar4 * 0x26] +
                                     (float)(&creature_size)[iVar4 * 0x26] + 50.0;
                                iVar5 = _rand();
                                (&creature_tint_r)[iVar4 * 0x26] = 0x3f4ccccd;
                                (&creature_tint_g)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x14) * 0.01 + 0.8;
                                iVar5 = _rand();
                                (&creature_contact_damage)[iVar4 * 0x26] = (float)(iVar5 % 10) + 4.0
                                ;
                                goto LAB_004310b8;
                              }
                              if (template_id == 0x2e) {
                                (&creature_type_id)[iVar4 * 0x26] = 1;
                                iVar5 = _rand();
                                fVar2 = (float)(iVar5 % 0x1e + 0x28);
                                (&creature_size)[iVar4 * 0x26] = fVar2;
                                (&creature_health)[iVar4 * 0x26] = fVar2 * 1.1428572 + 20.0;
                                iVar5 = _rand();
                                (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                (&creature_move_speed)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x12) * 0.1 + 1.1;
                                (&creature_reward_value)[iVar4 * 0x26] =
                                     (float)(&creature_size)[iVar4 * 0x26] +
                                     (float)(&creature_size)[iVar4 * 0x26] + 50.0;
                                iVar5 = _rand();
                                (&creature_tint_r)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x28) * 0.01 + 0.6;
                                iVar5 = _rand();
                                (&creature_tint_g)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x28) * 0.01 + 0.6;
                                iVar5 = _rand();
                                (&creature_tint_b)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x28) * 0.01 + 0.6;
                                iVar5 = _rand();
                                (&creature_contact_damage)[iVar4 * 0x26] = (float)(iVar5 % 10) + 4.0
                                ;
                                goto LAB_004310b8;
                              }
                              if (template_id == 0x36) {
                                (&creature_type_id)[iVar4 * 0x26] = 2;
                                (&creature_size)[iVar4 * 0x26] = 0x42480000;
                                (&creature_ai_mode)[iVar4 * 0x26] = 7;
                                (&creature_orbit_radius)[iVar4 * 0x26] = 0x3fc00000;
                                (&creature_health)[iVar4 * 0x26] = 0x41200000;
                                (&creature_move_speed)[iVar4 * 0x26] = 0x3fe66666;
                                (&creature_reward_value)[iVar4 * 0x26] = 0x43160000;
                                (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                iVar5 = _rand();
                                (&creature_tint_g)[iVar4 * 0x26] = (float)(iVar5 % 5) * 0.01 + 0.65;
                                (&creature_tint_r)[iVar4 * 0x26] = 0x3f266666;
                                (&creature_tint_b)[iVar4 * 0x26] = 0x3f733333;
                                (&creature_contact_damage)[iVar4 * 0x26] = 0x42200000;
                                goto LAB_004310b8;
                              }
                              if (template_id == 0x1d) {
                                (&creature_type_id)[iVar4 * 0x26] = 2;
                                iVar5 = _rand();
                                fVar2 = (float)(iVar5 % 0x14 + 0x23);
                                (&creature_size)[iVar4 * 0x26] = fVar2;
                                (&creature_health)[iVar4 * 0x26] = fVar2 * 1.1428572 + 10.0;
                                iVar5 = _rand();
                                (&creature_move_speed)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0xf) * 0.1 + 1.1;
                                iVar5 = _rand();
                                (&creature_reward_value)[iVar4 * 0x26] = (float)(iVar5 % 100 + 0x32)
                                ;
                                (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                iVar5 = _rand();
                                (&creature_tint_r)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x32) * 0.001 + 0.6;
                                iVar5 = _rand();
                                (&creature_tint_g)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x32) * 0.01 + 0.5;
                                iVar5 = _rand();
                                (&creature_tint_b)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x32) * 0.001 + 0.6;
                                iVar5 = _rand();
                                (&creature_contact_damage)[iVar4 * 0x26] = (float)(iVar5 % 10) + 4.0
                                ;
                                goto LAB_004310b8;
                              }
                              if (template_id == 0x1e) {
                                (&creature_type_id)[iVar4 * 0x26] = 2;
                                iVar5 = _rand();
                                fVar2 = (float)(iVar5 % 0x1e + 0x23);
                                (&creature_size)[iVar4 * 0x26] = fVar2;
                                (&creature_health)[iVar4 * 0x26] = fVar2 * 2.2857144 + 10.0;
                                iVar5 = _rand();
                                (&creature_move_speed)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x11) * 0.1 + 1.5;
                                iVar5 = _rand();
                                (&creature_reward_value)[iVar4 * 0x26] = (float)(iVar5 % 200 + 0x32)
                                ;
                                (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                iVar5 = _rand();
                                (&creature_tint_r)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x32) * 0.001 + 0.6;
                                iVar5 = _rand();
                                (&creature_tint_g)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x32) * 0.001 + 0.6;
                                iVar5 = _rand();
                                (&creature_tint_b)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x32) * 0.01 + 0.5;
                                iVar5 = _rand();
                                (&creature_contact_damage)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x1e) + 4.0;
                                goto LAB_004310b8;
                              }
                              if (template_id == 0x1f) {
                                (&creature_type_id)[iVar4 * 0x26] = 2;
                                iVar5 = _rand();
                                fVar2 = (float)(iVar5 % 0x1e + 0x2d);
                                (&creature_size)[iVar4 * 0x26] = fVar2;
                                (&creature_health)[iVar4 * 0x26] = fVar2 * 3.7142856 + 30.0;
                                iVar5 = _rand();
                                (&creature_move_speed)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x15) * 0.1 + 1.6;
                                iVar5 = _rand();
                                (&creature_reward_value)[iVar4 * 0x26] = (float)(iVar5 % 200 + 0x50)
                                ;
                                (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                iVar5 = _rand();
                                (&creature_tint_r)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x32) * 0.01 + 0.5;
                                iVar5 = _rand();
                                (&creature_tint_g)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x32) * 0.001 + 0.6;
                                iVar5 = _rand();
                                (&creature_tint_b)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x32) * 0.001 + 0.6;
                                iVar5 = _rand();
                                (&creature_contact_damage)[iVar4 * 0x26] =
                                     (float)(iVar5 % 0x23) + 8.0;
                                goto LAB_004310b8;
                              }
                              if (template_id == 0x24) {
                                (&creature_type_id)[iVar4 * 0x26] = 2;
                                (&creature_health)[iVar4 * 0x26] = 0x41a00000;
                                (&creature_move_speed)[iVar4 * 0x26] = 0x40000000;
                                (&creature_reward_value)[iVar4 * 0x26] = 0x42dc0000;
                                (&creature_tint_r)[iVar4 * 0x26] = 0x3dcccccd;
                                (&creature_tint_g)[iVar4 * 0x26] = 0x3f333333;
                                (&creature_tint_b)[iVar4 * 0x26] = 0x3de147ae;
                                (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                (&creature_size)[iVar4 * 0x26] = 0x42480000;
                                (&creature_contact_damage)[iVar4 * 0x26] = 0x40800000;
                                goto LAB_004310b8;
                              }
                              if (template_id == 0x25) {
                                (&creature_type_id)[iVar4 * 0x26] = 2;
                                (&creature_health)[iVar4 * 0x26] = 0x41c80000;
                                (&creature_move_speed)[iVar4 * 0x26] = 0x40200000;
                                (&creature_reward_value)[iVar4 * 0x26] = 0x42fa0000;
                                (&creature_tint_r)[iVar4 * 0x26] = 0x3dcccccd;
                                (&creature_tint_g)[iVar4 * 0x26] = 0x3f4ccccd;
                                (&creature_tint_b)[iVar4 * 0x26] = 0x3de147ae;
                                (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                (&creature_size)[iVar4 * 0x26] = 0x41f00000;
                                (&creature_contact_damage)[iVar4 * 0x26] = 0x40400000;
                                goto LAB_004310b8;
                              }
                              if (template_id == 0x26) {
                                (&creature_type_id)[iVar4 * 0x26] = 2;
                                (&creature_health)[iVar4 * 0x26] = 0x42480000;
                                (&creature_move_speed)[iVar4 * 0x26] = 0x400ccccd;
                                (&creature_reward_value)[iVar4 * 0x26] = 0x42fa0000;
                                (&creature_tint_r)[iVar4 * 0x26] = 0x3f19999a;
                                (&creature_tint_g)[iVar4 * 0x26] = 0x3f4ccccd;
                                (&creature_tint_b)[iVar4 * 0x26] = 0x3f19999a;
                                (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                (&creature_size)[iVar4 * 0x26] = 0x42340000;
                                (&creature_contact_damage)[iVar4 * 0x26] = 0x41200000;
                                goto LAB_004310b8;
                              }
                              if (template_id == 0x27) {
                                (&creature_type_id)[iVar4 * 0x26] = 2;
                                (&creature_health)[iVar4 * 0x26] = 0x42480000;
                                (&creature_move_speed)[iVar4 * 0x26] = 0x40066666;
                                *(undefined4 *)(&creature_flags + iVar8) = 0x400;
                                (&creature_reward_value)[iVar4 * 0x26] = 0x42fa0000;
                                (&creature_tint_r)[iVar4 * 0x26] = 0x3f800000;
                                (&creature_tint_g)[iVar4 * 0x26] = 0x3f4ccccd;
                                (&creature_tint_b)[iVar4 * 0x26] = 0x3dcccccd;
                                (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                *(undefined2 *)(&creature_link_index + iVar4 * 0x26) = 3;
                                *(undefined2 *)((int)&creature_link_index + iVar8 + 2) = 5;
                                (&creature_size)[iVar4 * 0x26] = 0x42340000;
                                (&creature_contact_damage)[iVar4 * 0x26] = 0x41200000;
                                goto LAB_004310b8;
                              }
                              if (template_id == 0x21) {
                                (&creature_type_id)[iVar4 * 0x26] = 2;
                                (&creature_health)[iVar4 * 0x26] = 0x42540000;
                                (&creature_move_speed)[iVar4 * 0x26] = 0x3fd9999a;
                                (&creature_reward_value)[iVar4 * 0x26] = 0x42f00000;
                                (&creature_tint_r)[iVar4 * 0x26] = 0x3f333333;
                                (&creature_tint_g)[iVar4 * 0x26] = 0x3dcccccd;
                                (&creature_tint_b)[iVar4 * 0x26] = 0x3f028f5c;
                                local_4 = 0x3f000000;
                              }
                              else {
                                if (template_id == 0x22) {
                                  (&creature_type_id)[iVar4 * 0x26] = 2;
                                  (&creature_health)[iVar4 * 0x26] = 0x41c80000;
                                  (&creature_move_speed)[iVar4 * 0x26] = 0x3fd9999a;
                                  (&creature_reward_value)[iVar4 * 0x26] = 0x43160000;
                                  (&creature_tint_r)[iVar4 * 0x26] = 0x3dcccccd;
                                  (&creature_tint_g)[iVar4 * 0x26] = 0x3f333333;
                                  (&creature_tint_b)[iVar4 * 0x26] = 0x3f028f5c;
                                  (&creature_tint_a)[iVar4 * 0x26] = 0x3d4ccccd;
                                  (&creature_size)[iVar4 * 0x26] = 0x42480000;
                                  (&creature_contact_damage)[iVar4 * 0x26] = 0x41000000;
                                  goto LAB_004310b8;
                                }
                                if (template_id == 0x23) {
                                  (&creature_type_id)[iVar4 * 0x26] = 2;
                                  (&creature_health)[iVar4 * 0x26] = 0x40a00000;
                                  (&creature_move_speed)[iVar4 * 0x26] = 0x3fd9999a;
                                  (&creature_reward_value)[iVar4 * 0x26] = 0x43340000;
                                  (&creature_tint_r)[iVar4 * 0x26] = 0x3dcccccd;
                                  (&creature_tint_g)[iVar4 * 0x26] = 0x3f333333;
                                  (&creature_tint_b)[iVar4 * 0x26] = 0x3f028f5c;
                                  (&creature_tint_a)[iVar4 * 0x26] = 0x3d23d70a;
                                  (&creature_size)[iVar4 * 0x26] = 0x42340000;
                                  (&creature_contact_damage)[iVar4 * 0x26] = 0x41000000;
                                  goto LAB_004310b8;
                                }
                                if (template_id != 0x28) {
                                  if (template_id == 0x29) {
                                    (&creature_type_id)[iVar4 * 0x26] = 2;
                                    (&creature_health)[iVar4 * 0x26] = 0x44480000;
                                    (&creature_move_speed)[iVar4 * 0x26] = 0x40200000;
                                    (&creature_reward_value)[iVar4 * 0x26] = 0x43e10000;
                                    (&creature_tint_r)[iVar4 * 0x26] = 0x3f4ccccd;
                                    (&creature_tint_g)[iVar4 * 0x26] = 0x3f4ccccd;
                                    (&creature_tint_b)[iVar4 * 0x26] = 0x3f4ccccd;
                                    (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                    (&creature_size)[iVar4 * 0x26] = 0x428c0000;
                                    (&creature_contact_damage)[iVar4 * 0x26] = 0x41a00000;
                                    goto LAB_004310b8;
                                  }
                                  if (template_id == 0x2a) {
                                    (&creature_type_id)[iVar4 * 0x26] = 2;
                                    (&creature_health)[iVar4 * 0x26] = 0x42480000;
                                    (&creature_move_speed)[iVar4 * 0x26] = 0x40466666;
                                    (&creature_reward_value)[iVar4 * 0x26] = 0x43960000;
                                    (&creature_tint_r)[iVar4 * 0x26] = 0x3e99999a;
                                    (&creature_tint_g)[iVar4 * 0x26] = 0x3e99999a;
                                    (&creature_tint_b)[iVar4 * 0x26] = 0x3e99999a;
                                    (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                    (&creature_size)[iVar4 * 0x26] = 0x42700000;
                                    (&creature_contact_damage)[iVar4 * 0x26] = 0x41000000;
                                    goto LAB_004310b8;
                                  }
                                  if (template_id == 0x2b) {
                                    (&creature_type_id)[iVar4 * 0x26] = 2;
                                    (&creature_health)[iVar4 * 0x26] = 0x41f00000;
                                    (&creature_move_speed)[iVar4 * 0x26] = 0x40666666;
                                    (&creature_reward_value)[iVar4 * 0x26] = 0x43e10000;
                                    (&creature_tint_r)[iVar4 * 0x26] = 0x3f800000;
                                    (&creature_tint_g)[iVar4 * 0x26] = 0x3e99999a;
                                    (&creature_tint_b)[iVar4 * 0x26] = 0x3e99999a;
                                  }
                                  else {
                                    if (template_id == 0x2c) {
                                      (&creature_type_id)[iVar4 * 0x26] = 2;
                                      (&creature_health)[iVar4 * 0x26] = 0x456d8000;
                                      (&creature_move_speed)[iVar4 * 0x26] = 0x40000000;
                                      (&creature_reward_value)[iVar4 * 0x26] = 0x44bb8000;
                                      (&creature_tint_r)[iVar4 * 0x26] = 0x3f59999a;
                                      (&creature_tint_g)[iVar4 * 0x26] = 0x3e4ccccd;
                                      (&creature_tint_b)[iVar4 * 0x26] = 0x3e4ccccd;
                                      (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                      (&creature_size)[iVar4 * 0x26] = 0x42a00000;
                                      (&creature_contact_damage)[iVar4 * 0x26] = 0x42200000;
                                      goto LAB_004310b8;
                                    }
                                    if (template_id == 0x2d) {
                                      (&creature_type_id)[iVar4 * 0x26] = 2;
                                      (&creature_health)[iVar4 * 0x26] = 0x42340000;
                                      (&creature_move_speed)[iVar4 * 0x26] = 0x40466666;
                                      (&creature_reward_value)[iVar4 * 0x26] = 0x43480000;
                                      (&creature_tint_r)[iVar4 * 0x26] = 0;
                                      (&creature_tint_g)[iVar4 * 0x26] = 0x3f666666;
                                      (&creature_tint_b)[iVar4 * 0x26] = 0x3f4ccccd;
                                      (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                      (&creature_size)[iVar4 * 0x26] = 0x42180000;
                                      (&creature_contact_damage)[iVar4 * 0x26] = 0x40400000;
                                      (&creature_ai_mode)[iVar4 * 0x26] = 2;
                                      goto LAB_004310b8;
                                    }
                                    if (template_id == 0x2f) {
                                      (&creature_type_id)[iVar4 * 0x26] = 1;
                                      (&creature_health)[iVar4 * 0x26] = 0x41a00000;
                                      (&creature_move_speed)[iVar4 * 0x26] = 0x40200000;
                                      (&creature_reward_value)[iVar4 * 0x26] = 0x43160000;
                                      (&creature_tint_r)[iVar4 * 0x26] = 0x3f4ccccd;
                                      (&creature_tint_g)[iVar4 * 0x26] = 0x3f4ccccd;
                                      (&creature_tint_b)[iVar4 * 0x26] = 0x3f4ccccd;
                                      (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                      (&creature_size)[iVar4 * 0x26] = 0x42340000;
                                      (&creature_contact_damage)[iVar4 * 0x26] = 0x40800000;
                                      goto LAB_004310b8;
                                    }
                                    if (template_id == 0x30) {
                                      (&creature_type_id)[iVar4 * 0x26] = 1;
                                      (&creature_health)[iVar4 * 0x26] = 0x447a0000;
                                      (&creature_move_speed)[iVar4 * 0x26] = 0x40000000;
                                      (&creature_reward_value)[iVar4 * 0x26] = 0x43c80000;
                                      (&creature_tint_r)[iVar4 * 0x26] = 0x3f666666;
                                      (&creature_tint_g)[iVar4 * 0x26] = 0x3f4ccccd;
                                      (&creature_tint_b)[iVar4 * 0x26] = 0x3dcccccd;
                                      (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                      (&creature_size)[iVar4 * 0x26] = 0x42820000;
                                      (&creature_contact_damage)[iVar4 * 0x26] = 0x41200000;
                                      goto LAB_004310b8;
                                    }
                                    if (template_id == 0x3b) {
                                      (&creature_type_id)[iVar4 * 0x26] = 3;
                                      (&creature_health)[iVar4 * 0x26] = 0x44960000;
                                      (&creature_move_speed)[iVar4 * 0x26] = 0x40000000;
                                      (&creature_reward_value)[iVar4 * 0x26] = 0x457a0000;
                                      (&creature_tint_r)[iVar4 * 0x26] = 0x3f666666;
                                      (&creature_tint_g)[iVar4 * 0x26] = 0;
                                      (&creature_tint_b)[iVar4 * 0x26] = 0;
                                      (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                      (&creature_size)[iVar4 * 0x26] = 0x428c0000;
                                      (&creature_contact_damage)[iVar4 * 0x26] = 0x41a00000;
                                      goto LAB_004310b8;
                                    }
                                    if (template_id == 0x3c) {
                                      (&creature_type_id)[iVar4 * 0x26] = 3;
                                      *(undefined4 *)(&creature_flags + iVar8) = 0x100;
                                      (&creature_orbit_angle)[iVar4 * 0x26] = 0x3ecccccd;
                                      (&creature_orbit_radius)[iVar4 * 0x26] = 0x1a;
                                      (&creature_health)[iVar4 * 0x26] = 0x43480000;
                                      (&creature_move_speed)[iVar4 * 0x26] = 0x40000000;
                                      (&creature_reward_value)[iVar4 * 0x26] = 0x43480000;
                                      (&creature_tint_r)[iVar4 * 0x26] = 0x3f666666;
                                      (&creature_tint_g)[iVar4 * 0x26] = 0x3dcccccd;
                                      (&creature_tint_b)[iVar4 * 0x26] = 0x3dcccccd;
                                      (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                      (&creature_size)[iVar4 * 0x26] = 0x42200000;
                                      (&creature_contact_damage)[iVar4 * 0x26] = 0x41a00000;
                                      (&creature_ai_mode)[iVar4 * 0x26] = 2;
                                      goto LAB_004310b8;
                                    }
                                    if (template_id == 0x3d) {
                                      (&creature_type_id)[iVar4 * 0x26] = 3;
                                      (&creature_health)[iVar4 * 0x26] = 0x428c0000;
                                      (&creature_move_speed)[iVar4 * 0x26] = 0x40266666;
                                      (&creature_reward_value)[iVar4 * 0x26] = 0x42f00000;
                                      (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                      iVar5 = _rand();
                                      fVar2 = (float)(iVar5 % 0x14) * 0.01 + 0.8;
                                      (&creature_tint_r)[iVar4 * 0x26] = fVar2;
                                      (&creature_tint_b)[iVar4 * 0x26] = fVar2;
                                      (&creature_tint_g)[iVar4 * 0x26] = fVar2;
                                      iVar5 = _rand();
                                      fVar2 = (float)(iVar5 % 7 + 0x2d);
                                      (&creature_size)[iVar4 * 0x26] = fVar2;
                                      (&creature_contact_damage)[iVar4 * 0x26] = fVar2 * 0.22;
                                      goto LAB_004310b8;
                                    }
                                    if (template_id == 0x3e) {
                                      (&creature_type_id)[iVar4 * 0x26] = 3;
                                      (&creature_health)[iVar4 * 0x26] = 0x447a0000;
                                      (&creature_move_speed)[iVar4 * 0x26] = 0x40333333;
                                      (&creature_reward_value)[iVar4 * 0x26] = 0x43fa0000;
                                      (&creature_tint_r)[iVar4 * 0x26] = 0x3f800000;
                                      (&creature_tint_g)[iVar4 * 0x26] = 0x3f800000;
                                      (&creature_tint_b)[iVar4 * 0x26] = 0x3f800000;
                                      (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                      (&creature_size)[iVar4 * 0x26] = 0x42800000;
                                      (&creature_contact_damage)[iVar4 * 0x26] = 0x42200000;
                                      goto LAB_004310b8;
                                    }
                                    if (template_id == 0) {
                                      (&creature_type_id)[iVar4 * 0x26] = 0;
                                      *(undefined4 *)(&creature_flags + iVar8) = 0x44;
                                      (&creature_health)[iVar4 * 0x26] = 0x4604d000;
                                      (&creature_move_speed)[iVar4 * 0x26] = 0x3fa66666;
                                      (&creature_reward_value)[iVar4 * 0x26] = 0x45ce4000;
                                      (&creature_tint_r)[iVar4 * 0x26] = 0x3f19999a;
                                      (&creature_tint_g)[iVar4 * 0x26] = 0x3f19999a;
                                      (&creature_tint_b)[iVar4 * 0x26] = 0x3f800000;
                                      (&creature_tint_a)[iVar4 * 0x26] = 0x3f4ccccd;
                                      (&creature_size)[iVar4 * 0x26] = 0x42800000;
                                      (&creature_contact_damage)[iVar4 * 0x26] = 0x42480000;
                                      iVar5 = FUN_00430ad0();
                                      (&creature_link_index)[iVar4 * 0x26] = iVar5;
                                      (&creature_spawn_slot_timer)[iVar5 * 6] = 0x3f800000;
                                      (&creature_spawn_slot_count)[iVar5 * 6] = 0;
                                      (&creature_spawn_slot_limit)[iVar5 * 6] = 0x32c;
                                      (&creature_spawn_slot_interval)[iVar5 * 6] = 0x3f333333;
                                      *(undefined4 *)(&creature_spawn_slot_template + iVar5 * 0x18)
                                           = 0x41;
                                      (&creature_spawn_slot_owner)[iVar5 * 6] = puVar9;
                                      goto LAB_004310b8;
                                    }
                                    if (template_id == 0x38) {
                                      (&creature_type_id)[iVar4 * 0x26] = 3;
                                      *(undefined4 *)(&creature_flags + iVar8) = 0x80;
                                      (&creature_link_index)[iVar4 * 0x26] = 0;
                                      (&creature_health)[iVar4 * 0x26] = 0x42480000;
                                      (&creature_move_speed)[iVar4 * 0x26] = 0x4099999a;
                                      (&creature_reward_value)[iVar4 * 0x26] = 0x43d88000;
                                      (&creature_tint_r)[iVar4 * 0x26] = 0x3f800000;
                                      (&creature_tint_g)[iVar4 * 0x26] = 0x3f400000;
                                      (&creature_tint_b)[iVar4 * 0x26] = 0x3dcccccd;
                                      (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                      uVar7 = _rand();
                                      uVar7 = uVar7 & 0x80000003;
                                      if ((int)uVar7 < 0) {
                                        uVar7 = (uVar7 - 1 | 0xfffffffc) + 1;
                                      }
                                      (&creature_size)[iVar4 * 0x26] = (float)(int)(uVar7 + 0x29);
                                      (&creature_contact_damage)[iVar4 * 0x26] = 0x41200000;
                                      goto LAB_004310b8;
                                    }
                                    if (template_id == 0x37) {
                                      (&creature_type_id)[iVar4 * 0x26] = 4;
                                      *(undefined4 *)(&creature_flags + iVar8) = 0x100;
                                      (&creature_link_index)[iVar4 * 0x26] = 0;
                                      (&creature_health)[iVar4 * 0x26] = 0x42480000;
                                      (&creature_move_speed)[iVar4 * 0x26] = 0x404ccccd;
                                      (&creature_reward_value)[iVar4 * 0x26] = 0x43d88000;
                                      (&creature_tint_r)[iVar4 * 0x26] = 0x3f800000;
                                      (&creature_tint_g)[iVar4 * 0x26] = 0x3f400000;
                                      (&creature_tint_b)[iVar4 * 0x26] = 0x3dcccccd;
                                      (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                      uVar7 = _rand();
                                      uVar7 = uVar7 & 0x80000003;
                                      if ((int)uVar7 < 0) {
                                        uVar7 = (uVar7 - 1 | 0xfffffffc) + 1;
                                      }
                                      (&creature_size)[iVar4 * 0x26] = (float)(int)(uVar7 + 0x29);
                                      (&creature_contact_damage)[iVar4 * 0x26] = 0x41200000;
                                      goto LAB_004310b8;
                                    }
                                    if (template_id == 0x39) {
                                      (&creature_type_id)[iVar4 * 0x26] = 3;
                                      *(undefined4 *)(&creature_flags + iVar8) = 0x80;
                                      (&creature_link_index)[iVar4 * 0x26] = 0;
                                      (&creature_health)[iVar4 * 0x26] = 0x40800000;
                                      (&creature_move_speed)[iVar4 * 0x26] = 0x4099999a;
                                      (&creature_reward_value)[iVar4 * 0x26] = 0x42480000;
                                      (&creature_tint_r)[iVar4 * 0x26] = 0x3f4ccccd;
                                      (&creature_tint_g)[iVar4 * 0x26] = 0x3f266666;
                                      (&creature_tint_b)[iVar4 * 0x26] = 0x3dcccccd;
                                      (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                      uVar7 = _rand();
                                      uVar7 = uVar7 & 0x80000003;
                                      if ((int)uVar7 < 0) {
                                        uVar7 = (uVar7 - 1 | 0xfffffffc) + 1;
                                      }
                                      (&creature_size)[iVar4 * 0x26] = (float)(int)(uVar7 + 0x1a);
                                      (&creature_contact_damage)[iVar4 * 0x26] = 0x41200000;
                                      goto LAB_004310b8;
                                    }
                                    if (template_id == 0x3a) {
                                      (&creature_type_id)[iVar4 * 0x26] = 3;
                                      *(undefined4 *)(&creature_flags + iVar8) = 0x10;
                                      (&creature_orbit_angle)[iVar4 * 0x26] = 0x3f666666;
                                      (&creature_orbit_radius)[iVar4 * 0x26] = 9;
                                      (&creature_health)[iVar4 * 0x26] = 0x458ca000;
                                      (&creature_move_speed)[iVar4 * 0x26] = 0x40000000;
                                      (&creature_reward_value)[iVar4 * 0x26] = 0x458ca000;
                                      (&creature_tint_r)[iVar4 * 0x26] = 0x3f800000;
                                      (&creature_tint_g)[iVar4 * 0x26] = 0x3f800000;
                                      (&creature_tint_b)[iVar4 * 0x26] = 0x3f800000;
                                      (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                      (&creature_size)[iVar4 * 0x26] = 0x42800000;
                                      (&creature_contact_damage)[iVar4 * 0x26] = 0x42480000;
                                      goto LAB_004310b8;
                                    }
                                    if (template_id != 0x3f) {
                                      if (template_id == 0x40) {
                                        (&creature_type_id)[iVar4 * 0x26] = 3;
                                        (&creature_health)[iVar4 * 0x26] = 0x428c0000;
                                        (&creature_move_speed)[iVar4 * 0x26] = 0x400ccccd;
                                        (&creature_reward_value)[iVar4 * 0x26] = 0x43200000;
                                        (&creature_tint_r)[iVar4 * 0x26] = 0x3f000000;
                                        (&creature_tint_g)[iVar4 * 0x26] = 0x3f19999a;
                                        (&creature_tint_b)[iVar4 * 0x26] = 0x3f666666;
                                        (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                        (&creature_size)[iVar4 * 0x26] = 0x42340000;
                                        (&creature_contact_damage)[iVar4 * 0x26] = 0x40a00000;
                                        goto LAB_004310b8;
                                      }
                                      if (template_id == 0x42) {
                                        (&creature_type_id)[iVar4 * 0x26] = 0;
                                        (&creature_health)[iVar4 * 0x26] = 0x43480000;
                                        (&creature_move_speed)[iVar4 * 0x26] = 0x3fd9999a;
                                        (&creature_reward_value)[iVar4 * 0x26] = 0x43200000;
                                        (&creature_tint_r)[iVar4 * 0x26] = 0x3f666666;
                                        (&creature_tint_g)[iVar4 * 0x26] = 0x3f666666;
                                        (&creature_tint_b)[iVar4 * 0x26] = 0x3f666666;
                                        (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                        (&creature_size)[iVar4 * 0x26] = 0x42340000;
                                        (&creature_contact_damage)[iVar4 * 0x26] = 0x41700000;
                                        goto LAB_004310b8;
                                      }
                                      if (template_id == 0x43) {
                                        (&creature_type_id)[iVar4 * 0x26] = 0;
                                        (&creature_health)[iVar4 * 0x26] = 0x44fa0000;
                                        (&creature_move_speed)[iVar4 * 0x26] = 0x40066666;
                                        (&creature_reward_value)[iVar4 * 0x26] = 0x43e60000;
                                        (&creature_tint_r)[iVar4 * 0x26] = 0x3e4ccccd;
                                        (&creature_tint_g)[iVar4 * 0x26] = 0x3f19999a;
                                        (&creature_tint_b)[iVar4 * 0x26] = 0x3dcccccd;
                                        (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                        (&creature_size)[iVar4 * 0x26] = 0x428c0000;
                                        (&creature_contact_damage)[iVar4 * 0x26] = 0x41700000;
                                        goto LAB_004310b8;
                                      }
                                      goto LAB_00431094;
                                    }
                                    (&creature_type_id)[iVar4 * 0x26] = 3;
                                    (&creature_health)[iVar4 * 0x26] = 0x43480000;
                                    (&creature_move_speed)[iVar4 * 0x26] = 0x40133333;
                                    (&creature_reward_value)[iVar4 * 0x26] = 0x43520000;
                                    (&creature_tint_r)[iVar4 * 0x26] = 0x3f333333;
                                    (&creature_tint_g)[iVar4 * 0x26] = 0x3ecccccd;
                                    (&creature_tint_b)[iVar4 * 0x26] = 0x3dcccccd;
                                  }
                                  (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                                  (&creature_size)[iVar4 * 0x26] = 0x420c0000;
                                  (&creature_contact_damage)[iVar4 * 0x26] = 0x41a00000;
                                  goto LAB_004310b8;
                                }
                                (&creature_type_id)[iVar4 * 0x26] = 2;
                                (&creature_health)[iVar4 * 0x26] = 0x42480000;
                                (&creature_move_speed)[iVar4 * 0x26] = 0x3fd9999a;
                                (&creature_reward_value)[iVar4 * 0x26] = 0x43160000;
                                (&creature_tint_r)[iVar4 * 0x26] = 0x3f333333;
                                local_4 = 0x3f800000;
                                (&creature_tint_g)[iVar4 * 0x26] = 0x3dcccccd;
                                (&creature_tint_b)[iVar4 * 0x26] = 0x3f028f5c;
                              }
                              (&creature_tint_a)[iVar4 * 0x26] = local_4;
                              (&creature_size)[iVar4 * 0x26] = 0x425c0000;
                              (&creature_contact_damage)[iVar4 * 0x26] = 0x41000000;
                              goto LAB_004310b8;
                            }
                            (&creature_type_id)[iVar4 * 0x26] = 3;
                            iVar5 = _rand();
                            fVar2 = (float)(iVar5 % 0x19 + 0x28);
                            (&creature_size)[iVar4 * 0x26] = fVar2;
                            (&creature_health)[iVar4 * 0x26] = fVar2 + 10.0;
                            iVar5 = _rand();
                            (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                            (&creature_move_speed)[iVar4 * 0x26] = (float)(iVar5 % 0x11) * 0.1 + 1.1
                            ;
                            (&creature_reward_value)[iVar4 * 0x26] =
                                 (float)(&creature_size)[iVar4 * 0x26] +
                                 (float)(&creature_size)[iVar4 * 0x26] + 50.0;
                            iVar5 = _rand();
                            fVar2 = (float)(iVar5 % 0x28) * 0.01 + 0.6;
                            (&creature_tint_r)[iVar4 * 0x26] = fVar2;
                            (&creature_tint_g)[iVar4 * 0x26] = fVar2;
                            (&creature_tint_b)[iVar4 * 0x26] = fVar2;
                          }
                          (&creature_contact_damage)[iVar4 * 0x26] =
                               (float)(&creature_size)[iVar4 * 0x26] * 0.14 + 4.0;
                          goto LAB_004310b8;
                        }
                        (&creature_type_id)[iVar4 * 0x26] = 1;
                        (&creature_size)[iVar4 * 0x26] = 0x42480000;
                        (&creature_ai_mode)[iVar4 * 0x26] = 1;
                        (&creature_health)[iVar4 * 0x26] = 0x42480000;
                        (&creature_move_speed)[iVar4 * 0x26] = 0x4019999a;
                        (&creature_reward_value)[iVar4 * 0x26] = 0x42fa0000;
                        (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                        iVar5 = _rand();
                        fVar2 = (float)(iVar5 % 0x28);
                      }
                      fVar2 = fVar2 * 0.01 + 0.5;
                      (&creature_tint_r)[iVar4 * 0x26] = fVar2;
                      (&creature_tint_g)[iVar4 * 0x26] = fVar2;
                      (&creature_tint_b)[iVar4 * 0x26] = 0x3f800000;
                      (&creature_contact_damage)[iVar4 * 0x26] = 0x40a00000;
                      goto LAB_004310b8;
                    }
                    (&creature_type_id)[iVar4 * 0x26] = 2;
                    *(undefined4 *)(&creature_flags + iVar8) = 4;
                    iVar5 = FUN_00430ad0();
                    (&creature_link_index)[iVar4 * 0x26] = iVar5;
                    (&creature_spawn_slot_timer)[iVar5 * 6] = 0x3f800000;
                    (&creature_spawn_slot_count)[iVar5 * 6] = 0;
                    (&creature_spawn_slot_limit)[iVar5 * 6] = 100;
                    (&creature_spawn_slot_interval)[iVar5 * 6] = 0x40333333;
                  }
                  *(undefined4 *)(&creature_spawn_slot_template + iVar5 * 0x18) = 0x1d;
                  (&creature_spawn_slot_owner)[iVar5 * 6] = puVar9;
                  (&creature_size)[iVar4 * 0x26] = 0x42480000;
                  (&creature_health)[iVar4 * 0x26] = 0x447a0000;
                  (&creature_move_speed)[iVar4 * 0x26] = 0x40000000;
                  (&creature_reward_value)[iVar4 * 0x26] = 0x453b8000;
                  (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
                  (&creature_tint_r)[iVar4 * 0x26] = 0x3f800000;
                  (&creature_tint_g)[iVar4 * 0x26] = 0x3f800000;
                  (&creature_tint_b)[iVar4 * 0x26] = 0x3f800000;
                  (&creature_contact_damage)[iVar4 * 0x26] = 0;
                  goto LAB_004310b8;
                }
                (&creature_type_id)[iVar4 * 0x26] = 2;
                *(undefined4 *)(&creature_flags + iVar8) = 4;
                iVar5 = FUN_00430ad0();
                (&creature_link_index)[iVar4 * 0x26] = iVar5;
                (&creature_spawn_slot_timer)[iVar5 * 6] = 0x40000000;
                (&creature_spawn_slot_count)[iVar5 * 6] = 0;
                (&creature_spawn_slot_limit)[iVar5 * 6] = 100;
                (&creature_spawn_slot_interval)[iVar5 * 6] = 0x40c00000;
                *(undefined4 *)(&creature_spawn_slot_template + iVar5 * 0x18) = 0x31;
                (&creature_spawn_slot_owner)[iVar5 * 6] = puVar9;
                (&creature_size)[iVar4 * 0x26] = 0x42000000;
                (&creature_health)[iVar4 * 0x26] = 0x42480000;
                (&creature_move_speed)[iVar4 * 0x26] = 0x3fa66666;
                (&creature_reward_value)[iVar4 * 0x26] = 0x447a0000;
              }
            }
            (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
            (&creature_tint_r)[iVar4 * 0x26] = 0x3f666666;
            (&creature_tint_g)[iVar4 * 0x26] = 0x3f4ccccd;
            (&creature_tint_b)[iVar4 * 0x26] = 0x3ecccccd;
            (&creature_contact_damage)[iVar4 * 0x26] = 0;
            goto LAB_004310b8;
          }
          (&creature_type_id)[iVar4 * 0x26] = 2;
          (&creature_pos_x)[iVar4 * 0x26] = *pos;
          (&creature_pos_y)[iVar4 * 0x26] = pos[1];
          (&creature_type_id)[iVar4 * 0x26] = 2;
          (&creature_tint_r)[iVar4 * 0x26] = 0x3f2a3d70;
          (&creature_tint_g)[iVar4 * 0x26] = 0x3ec51eb8;
          (&creature_ai_mode)[iVar4 * 0x26] = 0;
          (&creature_health)[iVar4 * 0x26] = 0x41a00000;
          (&creature_tint_b)[iVar4 * 0x26] = 0x3e849ba6;
          (&creature_move_speed)[iVar4 * 0x26] = 0x4039999a;
          (&creature_reward_value)[iVar4 * 0x26] = 0x42700000;
          (&creature_tint_a)[iVar4 * 0x26] = 0x3f0f5c29;
          (&creature_size)[iVar4 * 0x26] = 0x42480000;
          (&creature_contact_damage)[iVar4 * 0x26] = 0x420c0000;
          (&creature_max_health)[iVar4 * 0x26] = 0x41a00000;
        }
        goto LAB_00431094;
      }
      (&creature_type_id)[iVar4 * 0x26] = 2;
      iVar5 = terrain_texture_height / 2;
      (&creature_ai_mode)[iVar4 * 0x26] = 2;
      (&creature_pos_x)[iVar4 * 0x26] = 0xc1200000;
      fVar10 = (float10)fcos((float10)0.0);
      (&creature_tint_r)[iVar4 * 0x26] = 0x3f19999a;
      (&creature_pos_y)[iVar4 * 0x26] = (float)iVar5;
      (&creature_tint_g)[iVar4 * 0x26] = 0x3f4ccccd;
      (&creature_tint_b)[iVar4 * 0x26] = 0x3f68f5c3;
      (&creature_health)[iVar4 * 0x26] = 0x43480000;
      (&creature_move_speed)[iVar4 * 0x26] = 0x40000000;
      (&creature_reward_value)[iVar4 * 0x26] = 0x44160000;
      (&creature_tint_a)[iVar4 * 0x26] = 0x3f800000;
      (&creature_size)[iVar4 * 0x26] = 0x42200000;
      (&creature_contact_damage)[iVar4 * 0x26] = 0x41a00000;
      pos = (float *)0x2;
      fVar11 = (float10)fsin((float10)0.0);
      fVar2 = *pfVar3;
      fVar1 = pfVar3[1];
      (&creature_max_health)[iVar4 * 0x26] = 0x43480000;
      (&creature_pos_x)[iVar4 * 0x26] = (float)(fVar10 * (float10)256.0 + (float10)fVar2);
      (&creature_ai_mode)[iVar4 * 0x26] = 6;
      (&creature_pos_y)[iVar4 * 0x26] = (float)fVar11 * 256.0 + fVar1;
      iVar5 = iVar4;
      do {
        iVar6 = creature_alloc_slot();
        fVar10 = (float10)fcos((float10)(int)pos * (float10)0.34906587);
        iVar8 = iVar6 * 0x98;
        puVar9 = &creature_pool + iVar8;
        (&creature_ai_mode)[iVar6 * 0x26] = 6;
        (&creature_link_index)[iVar6 * 0x26] = iVar5;
        (&creature_orbit_angle)[iVar6 * 0x26] = 0x40490fdb;
        (&creature_orbit_radius)[iVar6 * 0x26] = 0x41200000;
        fVar11 = (float10)fsin((float10)(int)pos * (float10)0.34906587);
        fVar2 = pfVar3[1];
        (&creature_pos_x)[iVar6 * 0x26] = (float)fVar10 * 256.0 + *pfVar3;
        (&creature_vel_x)[iVar6 * 0x26] = 0;
        (&creature_health)[iVar6 * 0x26] = 0x42700000;
        (&creature_pos_y)[iVar6 * 0x26] = (float)(fVar11 * (float10)256.0 + (float10)fVar2);
        (&creature_vel_y)[iVar6 * 0x26] = 0;
        (&creature_reward_value)[iVar6 * 0x26] = 0x42700000;
        (&creature_max_health)[iVar6 * 0x26] = 0x42700000;
        (&creature_tint_r)[iVar6 * 0x26] = 0x3ecccccd;
        pos = (float *)((int)pos + 2);
        (&creature_tint_g)[iVar6 * 0x26] = 0x3f333333;
        (&creature_collision_flag)[iVar8] = 0;
        (&creature_tint_b)[iVar6 * 0x26] = 0x3de147ae;
        (&creature_collision_timer)[iVar6 * 0x26] = 0;
        *puVar9 = 1;
        (&creature_tint_a)[iVar6 * 0x26] = 0x3f800000;
        (&creature_state_flag)[iVar8] = 1;
        (&creature_hitbox_size)[iVar6 * 0x26] = 0x41800000;
        (&creature_attack_cooldown)[iVar6 * 0x26] = 0;
        (&creature_type_id)[iVar6 * 0x26] = 2;
        (&creature_move_speed)[iVar6 * 0x26] = 0x40000000;
        (&creature_size)[iVar6 * 0x26] = 0x42480000;
        (&creature_contact_damage)[iVar6 * 0x26] = 0x40800000;
        iVar5 = iVar6;
      } while ((int)pos < 0x16);
    }
    (&creature_link_index)[iVar4 * 0x26] = iVar6;
  }
LAB_00431094:
  *(undefined4 *)(puVar9 + 0x6c) = 2;
  *(undefined4 *)(puVar9 + 0x24) = 0x41a00000;
  console_printf(&console_log_queue,(byte *)s_Unhandled_creatureType__00477758);
LAB_004310b8:
  if ((((demo_mode_active == '\0') && (0.0 < *(float *)(puVar9 + 0x14))) &&
      (*(float *)(puVar9 + 0x14) < (float)terrain_texture_width)) &&
     ((0.0 < *(float *)(puVar9 + 0x18) &&
      (*(float *)(puVar9 + 0x18) < (float)terrain_texture_height)))) {
    effect_spawn_burst((float *)(puVar9 + 0x14),8);
  }
  *(undefined4 *)(puVar9 + 0x28) = *(undefined4 *)(puVar9 + 0x24);
  uVar7 = *(uint *)(puVar9 + 0x8c);
  if ((((uVar7 & 0x10) == 0) && (*(int *)(puVar9 + 0x6c) == 3)) && ((uVar7 & 0x80) == 0)) {
    *(uint *)(puVar9 + 0x8c) = uVar7 | 0x80;
    *(undefined4 *)(puVar9 + 0x78) = 0;
    *(float *)(puVar9 + 0x5c) = *(float *)(puVar9 + 0x5c) * 1.2;
  }
  if ((template_id == 0x38) && (config_full_version != '\0')) {
    *(float *)(puVar9 + 0x5c) = *(float *)(puVar9 + 0x5c) * 0.7;
  }
  *(float *)(puVar9 + 0x2c) = heading;
  if ((config_full_version == '\0') &&
     (((puVar9[0x8c] & 4) == 0 ||
      ((&creature_spawn_slot_interval)[*(int *)(puVar9 + 0x78) * 6] =
            (float)(&creature_spawn_slot_interval)[*(int *)(puVar9 + 0x78) * 6] + 0.2,
      config_full_version == '\0')))) {
    if (0 < DAT_00487194) {
      switch(DAT_00487194) {
      case 1:
        *(float *)(puVar9 + 100) = *(float *)(puVar9 + 100) * 0.9;
        *(float *)(puVar9 + 0x5c) = *(float *)(puVar9 + 0x5c) * 0.95;
        *(float *)(puVar9 + 0x58) = *(float *)(puVar9 + 0x58) * 0.95;
        fVar2 = *(float *)(puVar9 + 0x24) * 0.95;
        break;
      case 2:
        *(float *)(puVar9 + 100) = *(float *)(puVar9 + 100) * 0.85;
        *(float *)(puVar9 + 0x5c) = *(float *)(puVar9 + 0x5c) * 0.9;
        *(float *)(puVar9 + 0x58) = *(float *)(puVar9 + 0x58) * 0.9;
        fVar2 = *(float *)(puVar9 + 0x24) * 0.9;
        break;
      case 3:
        *(float *)(puVar9 + 100) = *(float *)(puVar9 + 100) * 0.85;
        *(float *)(puVar9 + 0x5c) = *(float *)(puVar9 + 0x5c) * 0.8;
        *(float *)(puVar9 + 0x58) = *(float *)(puVar9 + 0x58) * 0.8;
        fVar2 = *(float *)(puVar9 + 0x24) * 0.8;
        break;
      case 4:
        *(float *)(puVar9 + 100) = *(float *)(puVar9 + 100) * 0.8;
        *(float *)(puVar9 + 0x5c) = *(float *)(puVar9 + 0x5c) * 0.7;
        *(float *)(puVar9 + 0x58) = *(float *)(puVar9 + 0x58) * 0.7;
        fVar2 = *(float *)(puVar9 + 0x24) * 0.7;
        break;
      default:
        *(float *)(puVar9 + 100) = *(float *)(puVar9 + 100) * 0.8;
        *(float *)(puVar9 + 0x5c) = *(float *)(puVar9 + 0x5c) * 0.6;
        *(float *)(puVar9 + 0x58) = *(float *)(puVar9 + 0x58) * 0.5;
        fVar2 = *(float *)(puVar9 + 0x24) * 0.5;
      }
      *(float *)(puVar9 + 0x24) = fVar2;
      if ((puVar9[0x8c] & 4) != 0) {
        fVar2 = (float)DAT_00487194 * 0.35;
        if (3.0 < fVar2) {
          fVar2 = 3.0;
        }
        (&creature_spawn_slot_interval)[*(int *)(puVar9 + 0x78) * 6] =
             fVar2 + (float)(&creature_spawn_slot_interval)[*(int *)(puVar9 + 0x78) * 6];
      }
    }
  }
  else {
    DAT_00487194 = 0;
    *(float *)(puVar9 + 0x5c) = *(float *)(puVar9 + 0x5c) * 1.05;
    *(float *)(puVar9 + 0x58) = *(float *)(puVar9 + 0x58) * 1.4;
    *(float *)(puVar9 + 0x24) = *(float *)(puVar9 + 0x24) * 1.2;
    if ((puVar9[0x8c] & 4) != 0) {
      iVar4 = *(int *)(puVar9 + 0x78);
      fVar2 = (float)(&creature_spawn_slot_interval)[iVar4 * 6];
      (&creature_spawn_slot_interval)[iVar4 * 6] = fVar2 - 0.2;
      if (fVar2 - 0.2 < 0.1) {
        (&creature_spawn_slot_interval)[iVar4 * 6] = 0x3dcccccd;
        return puVar9;
      }
    }
  }
  return puVar9;
}



/* quest_spawn_table_empty @ 00434220 */

/* returns 1 when the quest spawn table has no pending entries */

int quest_spawn_table_empty(void)

{
  uint uVar1;
  int *piVar2;
  
  uVar1 = quest_spawn_count - 1;
  if (-1 < (int)uVar1) {
    piVar2 = &DAT_004857bc + uVar1 * 6;
    do {
      if (0 < *piVar2) {
        return uVar1 & 0xffffff00;
      }
      uVar1 = uVar1 - 1;
      piVar2 = piVar2 + -6;
    } while (-1 < (int)uVar1);
  }
  return CONCAT31((int3)(uVar1 >> 8),1);
}



/* quest_spawn_timeline_update @ 00434250 */

/* updates quest spawn entries based on the quest timer */

void quest_spawn_timeline_update(void)

{
  int *piVar1;
  uint uVar2;
  int iVar3;
  float *pfVar4;
  int iVar5;
  int local_1c;
  float local_18;
  float local_14;
  float local_8;
  float local_4;
  
  if (creatures_any_active_flag == '\0') {
    DAT_004c3654 = 0;
  }
  else {
    DAT_004c3654 = DAT_004c3654 + frame_dt_ms;
  }
  iVar3 = 0;
  if (0 < quest_spawn_count) {
    piVar1 = &DAT_004857b8;
    do {
      if ((0 < piVar1[1]) &&
         ((*piVar1 < quest_spawn_timeline ||
          (((creatures_any_active_flag != '\0' && (3000 < DAT_004c3654)) &&
           (0x6a4 < quest_spawn_timeline)))))) {
        pfVar4 = (float *)(&quest_spawn_table + iVar3 * 0x18);
        iVar5 = quest_spawn_count;
        while( true ) {
          uVar2 = 0;
          local_18 = 0.0;
          local_14 = 0.0;
          if (0 < (int)pfVar4[5]) {
            local_1c = 0;
            do {
              if ((*pfVar4 < 0.0) || ((float)terrain_texture_width < *pfVar4)) {
                local_14 = (float)local_1c;
                if ((uVar2 & 1) != 0) {
                  local_14 = -local_14;
                }
              }
              else {
                local_18 = (float)local_1c;
                if ((uVar2 & 1) != 0) {
                  local_18 = -local_18;
                }
              }
              local_8 = local_18 + *pfVar4;
              local_4 = local_14 + pfVar4[1];
              creature_spawn_template((int)pfVar4[3],&local_8,pfVar4[2]);
              uVar2 = uVar2 + 1;
              local_1c = local_1c + 0x28;
              iVar5 = quest_spawn_count;
            } while ((int)uVar2 < (int)pfVar4[5]);
          }
          pfVar4[5] = 0.0;
          creatures_any_active_flag = '\0';
          if (iVar5 + -1 <= iVar3) break;
          if (pfVar4[4] != pfVar4[10]) {
            creatures_any_active_flag = 0;
            return;
          }
          iVar3 = iVar3 + 1;
          pfVar4 = pfVar4 + 6;
        }
        creatures_any_active_flag = 0;
        return;
      }
      iVar3 = iVar3 + 1;
      piVar1 = piVar1 + 6;
    } while (iVar3 < quest_spawn_count);
  }
  return;
}



/* quest_database_advance_slot @ 004343c0 */

/* advances quest database tier/index (wraps every 10) */

void __cdecl quest_database_advance_slot(int *tier,int *index)

{
  int iVar1;
  
  iVar1 = *index;
  *index = iVar1 + 1;
  if (9 < iVar1 + 1) {
    *tier = *tier + 1;
    *index = 0;
  }
  return;
}



/* quest_build_fallback @ 004343e0 */

/* fills a default quest spawn table when no quest builder is present */

void __cdecl quest_build_fallback(float *entries,int *count)

{
  float fVar1;
  
  console_printf(&console_log_queue,(byte *)(s___Generating_a_fallback_quest__00477782 + 2));
  fVar1 = (float)terrain_texture_height;
  *entries = -50.0;
  entries[1] = fVar1 * 0.5;
  entries[3] = 8.96831e-44;
  entries[4] = 7.00649e-43;
  entries[5] = 1.4013e-44;
  fVar1 = (float)terrain_texture_height;
  entries[6] = -50.0;
  entries[7] = fVar1 * 0.5;
  entries[9] = 8.96831e-44;
  entries[10] = 7.00649e-42;
  entries[0xb] = 2.8026e-44;
  *count = 2;
  return;
}



/* FUN_00436350 @ 00436350 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

float __cdecl FUN_00436350(int param_1,int *param_2)

{
  float *pfVar1;
  undefined4 *puVar2;
  int iVar3;
  float fVar4;
  int iVar5;
  int iVar6;
  float fVar7;
  
  fVar7 = 2.10195e-42;
  iVar5 = 0;
  do {
    pfVar1 = (float *)(param_1 + iVar5 * 0x18);
    *pfVar1 = (float)(terrain_texture_width + 0x40);
    pfVar1[1] = (float)(terrain_texture_width / 2);
    pfVar1[3] = 4.06377e-44;
    pfVar1[4] = fVar7;
    pfVar1[5] = (float)((int)_config_player_count * 2 + 4);
    puVar2 = (undefined4 *)(param_1 + (iVar5 + 1) * 0x18);
    *puVar2 = 0xc2800000;
    iVar6 = iVar5 + 2;
    puVar2[1] = (float)(terrain_texture_width / 2);
    puVar2[3] = 0x1d;
    puVar2[4] = (int)fVar7 + 200;
    puVar2[5] = 6;
    iVar3 = _rand();
    fVar4 = (float)(iVar3 / 5);
    if (iVar3 % 5 == 3) {
      pfVar1 = (float *)(param_1 + iVar6 * 0x18);
      iVar6 = iVar5 + 3;
      *pfVar1 = (float)(terrain_texture_width / 2);
      pfVar1[1] = 1088.0;
      pfVar1[3] = 5.74532e-44;
      pfVar1[4] = fVar7;
      fVar4 = _config_player_count;
      pfVar1[5] = _config_player_count;
    }
    fVar7 = (float)((int)fVar7 + 10000);
    iVar5 = iVar6;
  } while ((int)fVar7 < 0x18c7c);
  *param_2 = iVar6;
  return fVar4;
}



/* FUN_00436440 @ 00436440 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __cdecl FUN_00436440(int param_1,int *param_2)

{
  undefined4 *puVar1;
  int iVar2;
  int iVar3;
  
  iVar2 = 0;
  iVar3 = 0x5dc;
  do {
    puVar1 = (undefined4 *)(param_1 + iVar2 * 0x18);
    *puVar1 = 0xc2800000;
    iVar2 = iVar2 + 1;
    puVar1[1] = (float)(terrain_texture_width / 2);
    puVar1[3] = 0x40;
    puVar1[4] = iVar3;
    iVar3 = iVar3 + 0x157c;
    puVar1[5] = _config_player_count * 2 + 6;
  } while (iVar3 < 0x18894);
  *param_2 = iVar2;
  return;
}



/* FUN_00437d70 @ 00437d70 */

void __cdecl FUN_00437d70(int param_1,int *param_2)

{
  float *pfVar1;
  undefined4 *puVar2;
  int iVar3;
  float fVar4;
  
  iVar3 = 0;
  fVar4 = 2.10195e-42;
  do {
    pfVar1 = (float *)(param_1 + iVar3 * 0x18);
    *pfVar1 = (float)(terrain_texture_width + 0x40);
    pfVar1[1] = (float)(terrain_texture_width / 2);
    pfVar1[3] = 9.10844e-44;
    pfVar1[4] = fVar4;
    pfVar1[5] = 1.12104e-44;
    puVar2 = (undefined4 *)(param_1 + (iVar3 + 1) * 0x18);
    *puVar2 = 0xc2800000;
    iVar3 = iVar3 + 2;
    puVar2[1] = (float)(terrain_texture_width / 2);
    puVar2[3] = 0x41;
    puVar2[4] = fVar4;
    fVar4 = (float)((int)fVar4 + 8000);
    puVar2[5] = 8;
  } while ((int)fVar4 < 0x17cdc);
  *param_2 = iVar3;
  return;
}



/* FUN_00438840 @ 00438840 */

void __cdecl FUN_00438840(int param_1,int *param_2)

{
  float *pfVar1;
  undefined4 *puVar2;
  int iVar3;
  int iVar4;
  float fVar5;
  
  fVar5 = 2.10195e-42;
  iVar3 = 0;
  do {
    iVar4 = iVar3;
    pfVar1 = (float *)(param_1 + iVar4 * 0x18);
    *pfVar1 = (float)(terrain_texture_width + 0x40);
    pfVar1[1] = (float)(terrain_texture_width / 2);
    pfVar1[3] = 6.44597e-44;
    pfVar1[4] = fVar5;
    pfVar1[5] = 8.40779e-45;
    puVar2 = (undefined4 *)(param_1 + (iVar4 + 1) * 0x18);
    *puVar2 = 0xc2800000;
    puVar2[1] = (float)(terrain_texture_width / 2);
    puVar2[3] = 0x2e;
    puVar2[4] = fVar5;
    fVar5 = (float)((int)fVar5 + 6000);
    puVar2[5] = 6;
    iVar3 = iVar4 + 2;
  } while ((int)fVar5 < 0x1656c);
  puVar2 = (undefined4 *)(param_1 + (iVar4 + 2) * 0x18);
  *puVar2 = 0x43000000;
  puVar2[1] = 0x43800000;
  puVar2[3] = 0xc;
  puVar2[4] = 10000;
  puVar2[5] = 1;
  puVar2 = (undefined4 *)(param_1 + (iVar4 + 3) * 0x18);
  *puVar2 = 0x43000000;
  puVar2[1] = 0x43c00000;
  puVar2[3] = 0xc;
  puVar2[4] = 10000;
  puVar2[5] = 1;
  puVar2 = (undefined4 *)(param_1 + (iVar4 + 4) * 0x18);
  *puVar2 = 0x43000000;
  puVar2[1] = 0x44000000;
  puVar2[3] = 0xc;
  puVar2[4] = 10000;
  puVar2[5] = 1;
  *param_2 = iVar4 + 5;
  return;
}



/* FUN_00438940 @ 00438940 */

void __cdecl FUN_00438940(undefined4 *param_1,int *param_2)

{
  float fVar1;
  undefined4 *puVar2;
  float *pfVar3;
  int iVar4;
  int iVar5;
  float fVar6;
  int local_4;
  
  iVar4 = 0;
  local_4 = 0;
  iVar5 = 1000;
  puVar2 = param_1;
  do {
    fVar6 = (float)local_4;
    *puVar2 = 0x43800000;
    iVar4 = iVar4 + 2;
    local_4 = local_4 + 0x200;
    fVar6 = fVar6 * 0.2 + 256.0;
    puVar2[1] = fVar6;
    puVar2[3] = 0xd;
    puVar2[4] = iVar5;
    puVar2[5] = 1;
    puVar2[6] = 0x44400000;
    puVar2[7] = fVar6;
    puVar2[9] = 0xd;
    puVar2[10] = iVar5;
    puVar2[0xb] = 1;
    iVar5 = iVar5 + 800;
    puVar2 = puVar2 + 0xc;
  } while (iVar5 < 5000);
  local_4 = 0;
  fVar6 = 1.12104e-41;
  pfVar3 = (float *)(param_1 + iVar4 * 6);
  do {
    fVar1 = (float)local_4;
    pfVar3[1] = 256.0;
    iVar4 = iVar4 + 2;
    local_4 = local_4 + 0x200;
    fVar1 = fVar1 * 0.2 + 256.0;
    *pfVar3 = fVar1;
    pfVar3[3] = 1.82169e-44;
    pfVar3[4] = fVar6;
    pfVar3[5] = 1.4013e-45;
    pfVar3[7] = 768.0;
    pfVar3[6] = fVar1;
    pfVar3[9] = 1.82169e-44;
    pfVar3[10] = fVar6;
    pfVar3[0xb] = 1.4013e-45;
    fVar6 = (float)((int)fVar6 + 800);
    pfVar3 = pfVar3 + 0xc;
  } while ((int)fVar6 < 12000);
  *param_2 = iVar4;
  return;
}



/* quest_database_init @ 00439230 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* builds the quest metadata table and registers quest builders */

void quest_database_init(void)

{
  int local_8;
  int local_4;
  
  local_8 = 0;
  local_4 = 0;
  FUN_00430a20((int *)&quest_selected_meta,1,1,(uint *)s_Land_Hostile_00477adc);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 120000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00435bd0;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Minor_Alien_Breach_00477ac8);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 120000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00435cc0;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Target_Practice_00477ab8);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 65000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00437a00;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Frontline_Assault_00477aa4);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 300000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00437e10;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Alien_Dens_00477a98);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 180000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00436720;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_The_Random_Factor_00477a84);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 300000;
  *(code **)(quest_meta_cursor + 0x1c) = FUN_00436350;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Spider_Wave_Syndrome_00477a6c);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 240000;
  *(code **)(quest_meta_cursor + 0x1c) = FUN_00436440;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Alien_Squads_00477a5c);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 180000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00435ea0;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Nesting_Grounds_00477a4c);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 240000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_004364a0;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_8_legged_Terror_00477a3c);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 240000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00436120;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Everred_Pastures_00477a28);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 300000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_004375a0;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Spider_Spawns_00477a18);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 300000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00436d70;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Arachnoid_Farm_00477a08);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 240000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00436820;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Two_Fronts_004779fc);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 240000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00436ee0;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Sweep_Stakes_004779ec);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 6;
  *(undefined4 *)(quest_meta_cursor + 8) = 35000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00437810;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Evil_Zombies_At_Large_004779d4);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 180000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_004374a0;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Survival_Of_The_Fastest_004779bc);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 5;
  *(undefined4 *)(quest_meta_cursor + 8) = 120000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00437060;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Land_Of_Lizards_004779ac);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 180000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00437ba0;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Ghost_Patrols_0047799c);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 180000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00436200;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Spideroids_00477990);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 360000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_004373c0;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_The_Blighting_00477980);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 300000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00438050;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Lizard_Kings_00477970);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 180000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00437710;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_The_Killing_00477964);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 300000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_004384a0;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Hidden_Evil_00477958);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 300000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00435a30;
  quest_monster_vision_meta = quest_meta_cursor;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Surrounded_By_Reptiles_00477940);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 300000;
  *(code **)(quest_meta_cursor + 0x1c) = FUN_00438940;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_The_Lizquidation_0047792c);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 300000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00437c70;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Spiders_Inc__0047791c);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 0xb;
  *(undefined4 *)(quest_meta_cursor + 8) = 300000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_004390d0;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Lizard_Raze_00477910);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 300000;
  *(code **)(quest_meta_cursor + 0x1c) = FUN_00438840;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Deja_vu_00477908);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 6;
  *(undefined4 *)(quest_meta_cursor + 8) = 120000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00437920;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Zombie_Masters_004778f8);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 300000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_004360a0;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Major_Alien_Breach_004778e4);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 0x12;
  *(undefined4 *)(quest_meta_cursor + 8) = 300000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00437af0;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Zombie_Time_004778d8);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 300000;
  *(code **)(quest_meta_cursor + 0x1c) = FUN_00437d70;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Lizard_Zombie_Pact_004778c4);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 300000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00438700;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_The_Collaboration_004778b0);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 360000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00437f30;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_The_Massacre_004778a0);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 300000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_004383e0;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_The_Unblitzkrieg_0047788c);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 600000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00438a40;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Gauntlet_00477880);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 300000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_004369a0;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Syntax_Terror_00477870);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 300000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00436c10;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_The_Annihilation_0047785c);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 300000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_004382c0;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_The_End_of_All_0047784c);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 480000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00438e10;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_The_Beating_00477840);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 480000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00435610;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_The_Spanking_Of_The_Dead_00477824);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 480000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_004358a0;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_The_Fortress_00477814);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 480000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_004352d0;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_The_Gang_Wars_00477804);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 480000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00435120;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Knee_deep_in_the_Dead_004777ec);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 480000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00434f00;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Cross_Fire_004777e0);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 480000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00435480;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Army_of_Three_004777d0);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 480000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00434ca0;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Monster_Blues_004777c0);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 480000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00434860;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_Nagolipoli_004777b4);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 480000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_00434480;
  quest_database_advance_slot(&local_4,&local_8);
  FUN_00430a20((int *)(&quest_selected_meta + (local_8 + local_4 * 10) * 0x2c),local_4 + 1,
               local_8 + 1,(uint *)s_The_Gathering_004777a4);
  *(undefined4 *)(quest_meta_cursor + 0x28) = 1;
  *(undefined4 *)(quest_meta_cursor + 8) = 480000;
  *(undefined1 **)(quest_meta_cursor + 0x1c) = &LAB_004349c0;
  quest_database_advance_slot(&local_4,&local_8);
  quest_unlock_weapon_id = 2;
  DAT_00484780 = 3;
  _DAT_004847ac = 0;
  _DAT_004847d8 = 8;
  _DAT_00484804 = 0;
  _DAT_00484830 = 5;
  _DAT_0048485c = 0;
  _DAT_00484888 = 6;
  _DAT_004848b4 = 0;
  _DAT_004848e0 = 0xc;
  _DAT_0048490c = 0;
  _DAT_00484938 = 9;
  _DAT_00484964 = 0;
  _DAT_00484990 = 0x15;
  _DAT_004849bc = 0;
  _DAT_004849e8 = 7;
  _DAT_00484a14 = 0;
  _DAT_00484a40 = 4;
  _DAT_00484a6c = 0;
  _DAT_00484a98 = 0xb;
  _DAT_00484ac4 = 0;
  _DAT_00484af0 = 10;
  _DAT_00484b1c = 0;
  _DAT_00484b48 = 0xd;
  _DAT_00484b74 = 0;
  _DAT_00484ba0 = 0xf;
  _DAT_00484bcc = 0;
  _DAT_00484bf8 = 0x12;
  _DAT_00484c24 = 0;
  _DAT_00484c50 = 0x14;
  _DAT_00484c7c = 0;
  _DAT_00484ca8 = 0x13;
  _DAT_00484cd4 = 0;
  _DAT_00484d00 = 0xe;
  _DAT_00484d2c = 0;
  _DAT_00484d58 = 0x11;
  _DAT_00484d84 = 0;
  _DAT_00484db0 = 0x16;
  _DAT_00484ddc = 0;
  _DAT_00484e08 = 0x17;
  quest_unlock_perk_id = perk_id_antiperk;
  DAT_0048477c = perk_id_antiperk;
  _DAT_004847a8 = 0x1c;
  _DAT_004847d4 = perk_id_antiperk;
  _DAT_00484800 = 0x1d;
  _DAT_0048482c = perk_id_antiperk;
  _DAT_00484858 = 0x1e;
  _DAT_00484884 = perk_id_antiperk;
  _DAT_004848b0 = 0x1f;
  _DAT_004848dc = perk_id_antiperk;
  _DAT_00484908 = 0x20;
  _DAT_00484934 = perk_id_antiperk;
  _DAT_00484960 = 0x21;
  _DAT_0048498c = perk_id_antiperk;
  _DAT_004849b8 = 0x22;
  _DAT_004849e4 = perk_id_antiperk;
  _DAT_00484a10 = 0x23;
  _DAT_00484a3c = perk_id_antiperk;
  _DAT_00484a68 = 0x24;
  _DAT_00484a94 = perk_id_antiperk;
  _DAT_00484ac0 = 0x25;
  _DAT_00484aec = perk_id_antiperk;
  _DAT_00484b18 = 0x26;
  _DAT_00484b44 = perk_id_antiperk;
  _DAT_00484b70 = 0x27;
  _DAT_00484b9c = perk_id_antiperk;
  _DAT_00484bc8 = 0x28;
  _DAT_00484bf4 = perk_id_antiperk;
  _DAT_00484c20 = 0x29;
  _DAT_00484c4c = perk_id_antiperk;
  _DAT_00484c78 = 0x2a;
  _DAT_00484ca4 = perk_id_antiperk;
  _DAT_00484cd0 = 0x2b;
  _DAT_00484cfc = perk_id_antiperk;
  _DAT_00484d28 = 0x2c;
  _DAT_00484d54 = perk_id_antiperk;
  _DAT_00484d80 = 0x2d;
  _DAT_00484dac = perk_id_antiperk;
  _DAT_00484dd8 = 0x2e;
  _DAT_00484e04 = perk_id_antiperk;
  _DAT_00484e34 = 0x1f;
  _DAT_00484e30 = perk_id_antiperk;
  _DAT_00484e60 = 0;
  _DAT_00484e5c = 0x2f;
  _DAT_00484e8c = 0;
  _DAT_00484e88 = 0x30;
  _DAT_00484eb8 = 0x1e;
  _DAT_00484eb4 = perk_id_antiperk;
  _DAT_00484ee4 = 0;
  _DAT_00484ee0 = 0x31;
  _DAT_00484f10 = 0;
  _DAT_00484f0c = 0x32;
  _DAT_00484f3c = 0;
  _DAT_00484f38 = perk_id_antiperk;
  _DAT_00484f68 = 0;
  _DAT_00484f64 = 0x33;
  _DAT_00484f94 = 0;
  _DAT_00484f90 = 0x34;
  _DAT_00484fc0 = 0x1c;
  _DAT_00484fbc = perk_id_antiperk;
  return;
}



/* quest_start_selected @ 0043a790 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* resets quest state, selects quest metadata, and runs its builder */

void __cdecl quest_start_selected(int tier,int index)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  
  FUN_004281e0();
  quest_spawn_count = 0;
  quest_spawn_timeline = 0;
  DAT_00487244 = 0;
  fx_queue_rotated = 0;
  fx_queue_count = 0;
  highscore_full_version_marker = 0;
  survival_elapsed_ms = 0;
  highscore_score_xp = 0;
  highscore_record_quest_minor = 0;
  highscore_record_quest_major = 0;
  highscore_record_game_mode = 0;
  highscore_record_weapon_id = 0;
  creature_kill_count = 0;
  highscore_record_shots_hit = 0;
  highscore_record_shots_fired = 0;
  highscore_date_checksum = 0;
  highscore_year_offset = 0;
  highscore_month = 0;
  highscore_day = 0;
  highscore_flags = 0;
  _DAT_00487078 = _rand();
  _DAT_00487078 = _DAT_00487078 & 0xfee050f;
  projectile_reset_pools();
  player_pos_x = (float)terrain_texture_width * 0.5;
  player_pos_y = (float)terrain_texture_height * 0.5;
  iVar3 = (index + -0xb + tier * 10) * 0x2c;
  terrain_generate(&quest_selected_meta + iVar3);
  weapon_assign_player(0,*(int *)(&quest_start_weapon_id + iVar3));
  weapon_assign_player(1,*(int *)(&quest_start_weapon_id + iVar3));
  console_printf(&console_log_queue,(byte *)s_Setup_tier__d_quest__d__00477aec);
  if (*(code **)(&quest_selected_builder + iVar3) == (code *)0x0) {
    quest_build_fallback((float *)&quest_spawn_table,&quest_spawn_count);
  }
  else {
    (**(code **)(&quest_selected_builder + iVar3))();
  }
  iVar5 = 0;
  iVar3 = 0;
  _DAT_00486fd4 = 0;
  _DAT_00487030 = 0;
  if (0 < quest_spawn_count) {
    piVar1 = &DAT_004857bc;
    iVar2 = quest_spawn_count;
    do {
      if (((config_full_version != '\0') && (iVar4 = *piVar1, 1 < iVar4)) && (piVar1[-2] != 0x3c)) {
        if (piVar1[-2] == 0x2b) {
          iVar4 = iVar4 + 2;
        }
        else {
          iVar4 = iVar4 + 8;
        }
        *piVar1 = iVar4;
      }
      iVar5 = iVar5 + *piVar1;
      if (iVar3 < piVar1[-1]) {
        iVar3 = piVar1[-1];
      }
      piVar1 = piVar1 + 6;
      iVar2 = iVar2 + -1;
      _DAT_00486fd4 = iVar5;
      _DAT_00487030 = iVar3;
    } while (iVar2 != 0);
  }
  return;
}



/* FUN_0043a950 @ 0043a950 */

int __cdecl FUN_0043a950(int param_1,int param_2,int param_3)

{
  int iVar1;
  int iVar2;
  
  iVar1 = (0xe - param_2) / 0xc;
  iVar2 = (param_1 - iVar1) + 0x12c0;
  iVar1 = ((int)(iVar2 + (iVar2 >> 0x1f & 3U)) >> 2) + -0x7d2d +
          param_3 + ((iVar2 / 400 + ((param_2 + iVar1 * 0xc) * 0x99 + -0x1c9) / 5 + iVar2 * 0x16d) -
                    iVar2 / 100);
  iVar2 = ((((iVar1 - iVar1 % 7) + 0x7bfd) % 0x23ab1) % 0x8eac) % 0x5b5;
  iVar1 = iVar2 / 0x5b4;
  return ((iVar2 - iVar1) % 0x16d + iVar1) / 7 + 1;
}



/* FUN_0043aa60 @ 0043aa60 */

undefined4 FUN_0043aa60(void)

{
  int iVar1;
  
  iVar1 = game_is_full_version();
  if ((char)iVar1 == '\0') {
    iVar1 = console_printf(&console_log_queue,
                           (byte *)(s___Potentially_illegal_score_dete_00477b16 + 2));
  }
  return CONCAT31((int3)((uint)iVar1 >> 8),1);
}



/* FUN_0043aa90 @ 0043aa90 */

void __cdecl FUN_0043aa90(char *param_1,char *param_2)

{
  char cVar1;
  uint uVar2;
  uint uVar3;
  char *pcVar4;
  char *pcVar5;
  
  uVar2 = 0xffffffff;
  pcVar4 = param_1;
  do {
    pcVar5 = pcVar4;
    if (uVar2 == 0) break;
    uVar2 = uVar2 - 1;
    pcVar5 = pcVar4 + 1;
    cVar1 = *pcVar4;
    pcVar4 = pcVar5;
  } while (cVar1 != '\0');
  uVar2 = ~uVar2;
  pcVar4 = pcVar5 + -uVar2;
  pcVar5 = param_2;
  for (uVar3 = uVar2 >> 2; uVar3 != 0; uVar3 = uVar3 - 1) {
    *(undefined4 *)pcVar5 = *(undefined4 *)pcVar4;
    pcVar4 = pcVar4 + 4;
    pcVar5 = pcVar5 + 4;
  }
  for (uVar2 = uVar2 & 3; uVar2 != 0; uVar2 = uVar2 - 1) {
    *pcVar5 = *pcVar4;
    pcVar4 = pcVar4 + 1;
    pcVar5 = pcVar5 + 1;
  }
  *(undefined4 *)(param_2 + 0x20) = *(undefined4 *)(param_1 + 0x20);
  *(undefined4 *)(param_2 + 0x24) = *(undefined4 *)(param_1 + 0x24);
  param_2[0x28] = param_1[0x28];
  param_2[0x29] = param_1[0x29];
  param_2[0x2a] = param_1[0x2a];
  param_2[0x2b] = param_1[0x2b];
  *(undefined4 *)(param_2 + 0x2c) = *(undefined4 *)(param_1 + 0x2c);
  *(undefined4 *)(param_2 + 0x34) = *(undefined4 *)(param_1 + 0x34);
  *(undefined4 *)(param_2 + 0x30) = *(undefined4 *)(param_1 + 0x30);
  *(undefined4 *)(param_2 + 0x38) = *(undefined4 *)(param_1 + 0x38);
  param_2[0x3c] = '\0';
  param_2[0x3d] = '\0';
  param_2[0x3e] = '\0';
  param_2[0x3f] = '\0';
  return;
}



/* FUN_0043ab10 @ 0043ab10 */

char * __cdecl FUN_0043ab10(char *param_1,int *param_2)

{
  uint uVar1;
  char *pcVar2;
  int iVar3;
  int iVar4;
  int local_4;
  
  iVar3 = 0;
  local_4 = 0;
  crt_fread(param_1,0x48,1,(FILE *)param_2);
  if ((*(byte *)(param_2 + 3) & 0x10) != 0) {
    return (char *)0x0;
  }
  crt_fread(&local_4,4,1,(FILE *)param_2);
  uVar1 = 0;
  do {
    param_1[uVar1] = param_1[uVar1] + (-6 - ((char)uVar1 * '\x05' + '\x01') * (char)uVar1);
    uVar1 = uVar1 + 1;
  } while (uVar1 < 0x48);
  iVar4 = 0x48;
  pcVar2 = param_1;
  do {
    iVar3 = iVar3 + (int)(pcVar2 + (3 - (int)param_1)) * (int)*pcVar2 * 7;
    pcVar2 = pcVar2 + 1;
    iVar4 = iVar4 + -1;
  } while (iVar4 != 0);
  if (local_4 != iVar3) {
    param_1[0x1f] = '\0';
    console_printf(&console_log_queue,(byte *)s_WARN__checksum_failure_on_score_b_00477b40);
    return (char *)0x0;
  }
  return param_1;
}



/* FUN_0043abd0 @ 0043abd0 */

int __cdecl FUN_0043abd0(byte *param_1,byte *param_2)

{
  byte bVar1;
  uint3 uVar3;
  int iVar2;
  bool bVar4;
  
  uVar3 = (uint3)((uint)param_1 >> 8);
  if (*(int *)(param_1 + 0x24) != *(int *)(param_2 + 0x24)) {
    return (uint)uVar3 << 8;
  }
  if (*(int *)(param_1 + 0x20) != *(int *)(param_2 + 0x20)) {
    return (uint)uVar3 << 8;
  }
  if (param_1[0x28] != param_2[0x28]) {
    return (uint)uVar3 << 8;
  }
  if (*(int *)(param_1 + 0x34) != *(int *)(param_2 + 0x34)) {
    return (uint)uVar3 << 8;
  }
  if (*(int *)(param_1 + 0x30) != *(int *)(param_2 + 0x30)) {
    return (uint)uVar3 << 8;
  }
  if (*(int *)(param_1 + 0x2c) != *(int *)(param_2 + 0x2c)) {
    return (uint)uVar3 << 8;
  }
  while( true ) {
    bVar1 = *param_1;
    bVar4 = bVar1 < *param_2;
    if (bVar1 != *param_2) break;
    if (bVar1 == 0) {
      return 1;
    }
    bVar1 = param_1[1];
    bVar4 = bVar1 < param_2[1];
    if (bVar1 != param_2[1]) break;
    param_1 = param_1 + 2;
    param_2 = param_2 + 2;
    if (bVar1 == 0) {
      return 1;
    }
  }
  iVar2 = (1 - (uint)bVar4) - (uint)(bVar4 != 0);
  return CONCAT31((int3)((uint)iVar2 >> 8),iVar2 == 0);
}



/* FUN_0043ac70 @ 0043ac70 */

uint __cdecl FUN_0043ac70(LPCSTR param_1,byte *param_2)

{
  char cVar1;
  byte bVar2;
  FILE *fp;
  char *pcVar3;
  int iVar4;
  uint uVar5;
  uint uVar6;
  byte *pbVar7;
  char *pcVar8;
  byte *pbVar9;
  byte local_48 [56];
  uint local_10;
  byte local_4;
  undefined1 local_2;
  undefined1 local_1;
  
  pbVar7 = local_48;
  for (iVar4 = 0x12; iVar4 != 0; iVar4 = iVar4 + -1) {
    pbVar7[0] = 0;
    pbVar7[1] = 0;
    pbVar7[2] = 0;
    pbVar7[3] = 0;
    pbVar7 = pbVar7 + 4;
  }
  uVar5 = 0xffffffff;
  pcVar3 = &default_player_name;
  do {
    pcVar8 = pcVar3;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar3 + 1;
    cVar1 = *pcVar3;
    pcVar3 = pcVar8;
  } while (cVar1 != '\0');
  uVar5 = ~uVar5;
  pbVar7 = (byte *)(pcVar8 + -uVar5);
  pbVar9 = local_48;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pbVar9 = *(undefined4 *)pbVar7;
    pbVar7 = pbVar7 + 4;
    pbVar9 = pbVar9 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pbVar9 = *pbVar7;
    pbVar7 = pbVar7 + 1;
    pbVar9 = pbVar9 + 1;
  }
  local_4 = 0;
  local_2 = 0x7c;
  local_1 = 0xff;
  local_10 = _rand();
  local_10 = local_10 & 0xfee050f;
  fp = crt_fopen(param_1,&DAT_00477b68);
  uVar5 = 0;
  if (fp != (FILE *)0x0) {
    bVar2 = (byte)fp->_flag;
    while ((bVar2 & 0x10) == 0) {
      pcVar3 = FUN_0043ab10((char *)local_48,(int *)fp);
      if ((pcVar3 != (char *)0x0) && (iVar4 = FUN_0043abd0(param_2,local_48), (char)iVar4 != '\0'))
      {
        if ((local_4 & 2) != 0) {
          iVar4 = crt_fclose(fp);
          return CONCAT31((int3)((uint)iVar4 >> 8),1);
        }
        if (local_4 == 0) {
          param_2[0x44] = 2;
        }
        crt_fseek(fp,-0x4c,1);
        FUN_0043ad70((undefined4 *)param_2,(int *)fp);
        crt_fflush(fp);
        iVar4 = crt_fclose(fp);
        return CONCAT31((int3)((uint)iVar4 >> 8),1);
      }
      bVar2 = (byte)fp->_flag;
    }
    crt_fflush(fp);
    uVar5 = crt_fclose(fp);
  }
  return uVar5 & 0xffffff00;
}



/* FUN_0043ad70 @ 0043ad70 */

void __cdecl FUN_0043ad70(undefined4 *param_1,int *param_2)

{
  char cVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  char *pcVar5;
  char *pcVar6;
  int local_4c;
  char local_48 [56];
  uint local_10;
  undefined1 local_4;
  undefined1 local_2;
  undefined1 local_1;
  
  local_4c = 0;
  GetLocalTime((LPSYSTEMTIME)&local_system_time);
  pcVar5 = local_48;
  for (iVar2 = 0x12; iVar2 != 0; iVar2 = iVar2 + -1) {
    pcVar5[0] = '\0';
    pcVar5[1] = '\0';
    pcVar5[2] = '\0';
    pcVar5[3] = '\0';
    pcVar5 = pcVar5 + 4;
  }
  uVar3 = 0xffffffff;
  pcVar5 = &default_player_name;
  do {
    pcVar6 = pcVar5;
    if (uVar3 == 0) break;
    uVar3 = uVar3 - 1;
    pcVar6 = pcVar5 + 1;
    cVar1 = *pcVar5;
    pcVar5 = pcVar6;
  } while (cVar1 != '\0');
  uVar3 = ~uVar3;
  pcVar5 = pcVar6 + -uVar3;
  pcVar6 = local_48;
  for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1) {
    *(undefined4 *)pcVar6 = *(undefined4 *)pcVar5;
    pcVar5 = pcVar5 + 4;
    pcVar6 = pcVar6 + 4;
  }
  for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
    *pcVar6 = *pcVar5;
    pcVar5 = pcVar5 + 1;
    pcVar6 = pcVar6 + 1;
  }
  local_4 = 0;
  local_2 = 0x7c;
  local_1 = 0xff;
  uVar3 = _rand();
  local_10 = uVar3 & 0xfee050f;
  if (*(char *)(param_1 + 0x10) == '\0') {
    *(undefined1 *)(param_1 + 0x10) = (undefined1)local_system_day;
    *(undefined1 *)((int)param_1 + 0x42) = local_system_time._2_1_;
    *(char *)((int)param_1 + 0x43) = (char)local_system_time + '0';
    iVar2 = FUN_0043a950(local_system_time & 0xffff,local_system_time >> 0x10,(uint)local_system_day
                        );
    *(char *)((int)param_1 + 0x41) = (char)iVar2;
  }
  pcVar5 = local_48;
  for (iVar2 = 0x12; iVar2 != 0; iVar2 = iVar2 + -1) {
    *(undefined4 *)pcVar5 = *param_1;
    param_1 = param_1 + 1;
    pcVar5 = pcVar5 + 4;
  }
  uVar3 = 0;
  do {
    local_4c = local_4c + (int)(local_48 + uVar3 + (3 - (int)local_48)) * (int)local_48[uVar3] * 7;
    uVar3 = uVar3 + 1;
  } while (uVar3 < 0x48);
  uVar3 = 0;
  do {
    local_48[uVar3] = local_48[uVar3] + ((char)uVar3 * '\x05' + '\x01') * (char)uVar3 + '\x06';
    uVar3 = uVar3 + 1;
  } while (uVar3 < 0x48);
  crt_fwrite(local_48,0x48,1,(FILE *)param_2);
  crt_fwrite(&local_4c,4,1,(FILE *)param_2);
  return;
}



/* FUN_0043af30 @ 0043af30 */

undefined1 * __cdecl FUN_0043af30(byte *param_1,int param_2)

{
  byte bVar1;
  byte *pbVar2;
  int iVar3;
  int iVar4;
  byte *pbVar5;
  byte *pbVar6;
  bool bVar7;
  
  iVar4 = 0;
  if (0 < param_2) {
    pbVar5 = &highscore_table;
    pbVar2 = param_1;
    pbVar6 = pbVar5;
LAB_0043af49:
    do {
      bVar1 = *pbVar2;
      bVar7 = bVar1 < *pbVar5;
      if (bVar1 == *pbVar5) {
        if (bVar1 != 0) {
          bVar1 = pbVar2[1];
          bVar7 = bVar1 < pbVar5[1];
          if (bVar1 != pbVar5[1]) goto LAB_0043af6d;
          pbVar5 = pbVar5 + 2;
          pbVar2 = pbVar2 + 2;
          if (bVar1 != 0) goto LAB_0043af49;
        }
        iVar3 = 0;
      }
      else {
LAB_0043af6d:
        iVar3 = (1 - (uint)bVar7) - (uint)(bVar7 != 0);
      }
      if (iVar3 == 0) {
        return &highscore_table + iVar4 * 0x48;
      }
      iVar4 = iVar4 + 1;
      pbVar5 = pbVar6 + 0x48;
      pbVar2 = param_1;
      pbVar6 = pbVar5;
    } while (iVar4 < param_2);
  }
  return (undefined1 *)0x0;
}



/* FUN_0043afa0 @ 0043afa0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_0043afa0(void)

{
  char cVar1;
  byte bVar2;
  char *pcVar3;
  FILE *fp;
  undefined4 *puVar4;
  undefined4 *puVar5;
  byte *pbVar6;
  int iVar7;
  int iVar8;
  uint uVar9;
  uint uVar10;
  int iVar11;
  undefined1 *puVar12;
  int iVar13;
  char *pcVar14;
  byte *pbVar15;
  char *pcVar16;
  bool bVar17;
  int local_58;
  int local_54;
  int local_50;
  int local_4c;
  byte local_48 [40];
  uint local_20;
  uint local_10;
  byte local_8;
  undefined1 local_7;
  byte bStack_6;
  undefined1 uStack_5;
  byte bStack_4;
  char cStack_3;
  undefined1 uStack_2;
  undefined1 local_1;
  
  pbVar15 = local_48;
  for (iVar8 = 0x12; iVar8 != 0; iVar8 = iVar8 + -1) {
    pbVar15[0] = 0;
    pbVar15[1] = 0;
    pbVar15[2] = 0;
    pbVar15[3] = 0;
    pbVar15 = pbVar15 + 4;
  }
  uVar9 = 0xffffffff;
  pcVar3 = &default_player_name;
  do {
    pcVar14 = pcVar3;
    if (uVar9 == 0) break;
    uVar9 = uVar9 - 1;
    pcVar14 = pcVar3 + 1;
    cVar1 = *pcVar3;
    pcVar3 = pcVar14;
  } while (cVar1 != '\0');
  uVar9 = ~uVar9;
  pbVar15 = (byte *)(pcVar14 + -uVar9);
  pbVar6 = local_48;
  for (uVar10 = uVar9 >> 2; uVar10 != 0; uVar10 = uVar10 - 1) {
    *(undefined4 *)pbVar6 = *(undefined4 *)pbVar15;
    pbVar15 = pbVar15 + 4;
    pbVar6 = pbVar6 + 4;
  }
  for (uVar9 = uVar9 & 3; uVar9 != 0; uVar9 = uVar9 - 1) {
    *pbVar6 = *pbVar15;
    pbVar15 = pbVar15 + 1;
    pbVar6 = pbVar6 + 1;
  }
  bStack_4 = 0;
  uStack_2 = 0x7c;
  local_1 = 0xff;
  local_10 = _rand();
  local_10 = local_10 & 0xfee050f;
  pcVar3 = FUN_0043b5b0();
  DAT_004c395c = 0;
  puVar12 = &DAT_00482b56;
  do {
    pcVar14 = puVar12 + -0x46;
    for (iVar8 = 0x12; iVar8 != 0; iVar8 = iVar8 + -1) {
      pcVar14[0] = '\0';
      pcVar14[1] = '\0';
      pcVar14[2] = '\0';
      pcVar14[3] = '\0';
      pcVar14 = pcVar14 + 4;
    }
    uVar9 = 0xffffffff;
    pcVar14 = &default_player_name;
    do {
      pcVar16 = pcVar14;
      if (uVar9 == 0) break;
      uVar9 = uVar9 - 1;
      pcVar16 = pcVar14 + 1;
      cVar1 = *pcVar14;
      pcVar14 = pcVar16;
    } while (cVar1 != '\0');
    uVar9 = ~uVar9;
    pcVar14 = pcVar16 + -uVar9;
    pcVar16 = puVar12 + -0x46;
    for (uVar10 = uVar9 >> 2; uVar10 != 0; uVar10 = uVar10 - 1) {
      *(undefined4 *)pcVar16 = *(undefined4 *)pcVar14;
      pcVar14 = pcVar14 + 4;
      pcVar16 = pcVar16 + 4;
    }
    for (uVar9 = uVar9 & 3; uVar9 != 0; uVar9 = uVar9 - 1) {
      *pcVar16 = *pcVar14;
      pcVar14 = pcVar14 + 1;
      pcVar16 = pcVar16 + 1;
    }
    puVar12[-2] = 0;
    *puVar12 = 0x7c;
    puVar12[1] = 0xff;
    uVar9 = _rand();
    *(uint *)(puVar12 + -0xe) = uVar9 & 0xfee050f;
    puVar12 = puVar12 + 0x48;
  } while ((int)puVar12 < 0x484776);
  iVar8 = 0;
  fp = crt_fopen(pcVar3,&file_mode_read_binary);
  if (fp != (FILE *)0x0) {
    uVar9 = FUN_0043a950(local_system_time & 0xffff,local_system_time >> 0x10,(uint)local_system_day
                        );
    bVar2 = (byte)fp->_flag;
    while ((bVar2 & 0x10) == 0) {
      pcVar3 = FUN_0043ab10((char *)local_48,(int *)fp);
      if ((pcVar3 == (char *)0x0) || ((local_20 & 0xff) != _config_game_mode)) goto LAB_0043b2ba;
      if (_config_game_mode == 3) {
        if (config_full_version == '\0') {
          if (cStack_3 == '\0') goto LAB_0043b0ff;
        }
        else if (cStack_3 == 'u') goto LAB_0043b0ff;
      }
      else {
LAB_0043b0ff:
        if (((config_score_load_gate != '\0') || ((bStack_4 & 1) == 0)) || ((bStack_4 & 2) != 0)) {
          if (config_highscore_date_mode == '\x03') {
            if (((local_system_day == local_8) &&
                ((local_system_time & 0xffff) - 2000 ==
                 (CONCAT12(cStack_3,CONCAT11(bStack_4,uStack_5)) & 0xff))) &&
               (local_system_time._2_2_ == bStack_6)) goto LAB_0043b1df;
          }
          else if (config_highscore_date_mode == '\x02') {
            if ((uVar9 == (CONCAT12(uStack_5,CONCAT11(bStack_6,local_7)) & 0xff)) &&
               ((local_system_time & 0xffff) ==
                (CONCAT12(cStack_3,CONCAT11(bStack_4,uStack_5)) & 0xff) + 2000)) {
LAB_0043b1df:
              if ((config_highscore_duplicate_mode == '\x01') &&
                 (puVar4 = (undefined4 *)FUN_0043af30(local_48,iVar8), puVar4 != (undefined4 *)0x0))
              {
                pbVar15 = local_48;
                for (iVar11 = 0x12; iVar11 != 0; iVar11 = iVar11 + -1) {
                  *puVar4 = *(undefined4 *)pbVar15;
                  pbVar15 = pbVar15 + 4;
                  puVar4 = puVar4 + 1;
                }
              }
              else if (iVar8 == 99) {
                puVar4 = (undefined4 *)&highscore_table;
                if (_config_game_mode == 2) {
                  puVar5 = (undefined4 *)&DAT_00482b58;
                  do {
                    if ((int)puVar5[8] < (int)puVar4[8]) {
                      puVar4 = puVar5;
                    }
                    puVar5 = puVar5 + 0x12;
                  } while ((int)puVar5 < 0x484730);
                  pbVar15 = local_48;
                  for (iVar11 = 0x12; iVar11 != 0; iVar11 = iVar11 + -1) {
                    *puVar4 = *(undefined4 *)pbVar15;
                    pbVar15 = pbVar15 + 4;
                    puVar4 = puVar4 + 1;
                  }
                }
                else {
                  puVar5 = (undefined4 *)&DAT_00482b58;
                  if (_config_game_mode == 3) {
                    do {
                      if ((int)puVar4[8] < (int)puVar5[8]) {
                        puVar4 = puVar5;
                      }
                      puVar5 = puVar5 + 0x12;
                    } while ((int)puVar5 < 0x484730);
                    pbVar15 = local_48;
                    for (iVar11 = 0x12; iVar11 != 0; iVar11 = iVar11 + -1) {
                      *puVar4 = *(undefined4 *)pbVar15;
                      pbVar15 = pbVar15 + 4;
                      puVar4 = puVar4 + 1;
                    }
                  }
                  else {
                    do {
                      if ((int)puVar5[9] < (int)puVar4[9]) {
                        puVar4 = puVar5;
                      }
                      puVar5 = puVar5 + 0x12;
                    } while ((int)puVar5 < 0x484730);
                    pbVar15 = local_48;
                    for (iVar11 = 0x12; iVar11 != 0; iVar11 = iVar11 + -1) {
                      *puVar4 = *(undefined4 *)pbVar15;
                      pbVar15 = pbVar15 + 4;
                      puVar4 = puVar4 + 1;
                    }
                  }
                }
              }
              else {
                iVar13 = iVar8 + 1;
                pbVar15 = local_48;
                puVar4 = (undefined4 *)(&highscore_table + iVar8 * 0x48);
                DAT_004c395c = iVar13;
                for (iVar11 = 0x12; iVar8 = iVar13, iVar11 != 0; iVar11 = iVar11 + -1) {
                  *puVar4 = *(undefined4 *)pbVar15;
                  pbVar15 = pbVar15 + 4;
                  puVar4 = puVar4 + 1;
                }
              }
            }
          }
          else if ((config_highscore_date_mode != '\x01') ||
                  ((local_system_time._2_2_ == bStack_6 &&
                   ((local_system_time & 0xffff) - 2000 ==
                    (CONCAT12(cStack_3,CONCAT11(bStack_4,uStack_5)) & 0xff))))) goto LAB_0043b1df;
        }
      }
LAB_0043b2ba:
      bVar2 = (byte)fp->_flag;
    }
    crt_fclose(fp);
    if (100 < DAT_004c395c) {
      DAT_004c395c = 100;
    }
    if (_config_game_mode == 2) {
      puVar12 = &LAB_0043aed0;
    }
    else if (_config_game_mode == 3) {
      puVar12 = &LAB_0043aef0;
    }
    else {
      puVar12 = &LAB_0043aeb0;
    }
    crt_qsort(&highscore_table,100,0x48,puVar12);
    if (config_name_slot_selected == 0) {
      local_4c = 0;
      if (0 < DAT_004c395c) {
        local_50 = 0;
        iVar8 = DAT_004c395c;
        do {
          iVar11 = DAT_004c395c;
          if ((((&DAT_00482b54)[local_50] & 4) == 0) && (((&DAT_00482b54)[local_50] & 1) != 0)) {
            iVar8 = 0;
            iVar13 = 0;
            local_58 = local_50;
            local_54 = local_4c;
            do {
              pbVar15 = &highscore_table + iVar13;
              if (((&DAT_00482b54)[iVar13] & 1) != 0) {
                pbVar6 = &highscore_table + local_50;
                do {
                  bVar2 = *pbVar6;
                  bVar17 = bVar2 < *pbVar15;
                  if (bVar2 != *pbVar15) {
LAB_0043b39e:
                    iVar7 = (1 - (uint)bVar17) - (uint)(bVar17 != 0);
                    goto LAB_0043b3a3;
                  }
                  if (bVar2 == 0) break;
                  bVar2 = pbVar6[1];
                  bVar17 = bVar2 < pbVar15[1];
                  if (bVar2 != pbVar15[1]) goto LAB_0043b39e;
                  pbVar6 = pbVar6 + 2;
                  pbVar15 = pbVar15 + 2;
                } while (bVar2 != 0);
                iVar7 = 0;
LAB_0043b3a3:
                if (iVar7 == 0) {
                  if (*(char *)(local_58 + 0x482b38) == '\x02') {
                    if (*(int *)((int)&DAT_00482b30 + local_58) <
                        *(int *)((int)&DAT_00482b30 + iVar13)) {
LAB_0043b3d0:
                      local_58 = iVar13;
                      local_54 = iVar8;
                    }
                  }
                  else if (*(int *)((int)&DAT_00482b34 + local_58) <
                           *(int *)((int)&DAT_00482b34 + iVar13)) goto LAB_0043b3d0;
                }
              }
              iVar8 = iVar8 + 1;
              iVar13 = iVar13 + 0x48;
            } while (iVar8 < DAT_004c395c);
            (&DAT_00482b54)[local_54 * 0x48] = (&DAT_00482b54)[local_54 * 0x48] | 4;
            iVar8 = iVar11;
          }
          local_4c = local_4c + 1;
          local_50 = local_50 + 0x48;
          if (iVar8 <= local_4c) {
            return;
          }
        } while( true );
      }
    }
    else if (0 < DAT_004c395c) {
      pbVar15 = &DAT_00482b54;
      iVar8 = DAT_004c395c;
      do {
        if ((*pbVar15 & 1) != 0) {
          *pbVar15 = *pbVar15 | 4;
        }
        pbVar15 = pbVar15 + 0x48;
        iVar8 = iVar8 + -1;
      } while (iVar8 != 0);
    }
  }
  return;
}



/* FUN_0043b450 @ 0043b450 */

void __cdecl FUN_0043b450(byte *param_1)

{
  byte bVar1;
  LPCSTR path;
  undefined4 uVar2;
  FILE *fp;
  uint uVar3;
  int iVar4;
  byte *pbVar5;
  
  path = FUN_0043b5b0();
  if (param_1 == (byte *)0x0) {
    console_printf(&console_log_queue,(byte *)s_UNEXPECTED__sc_is_null__00477bac);
    return;
  }
  uVar3 = 0xffffffff;
  pbVar5 = param_1;
  do {
    if (uVar3 == 0) break;
    uVar3 = uVar3 - 1;
    bVar1 = *pbVar5;
    pbVar5 = pbVar5 + 1;
  } while (bVar1 != 0);
  for (iVar4 = ~uVar3 - 2; (0 < iVar4 && (param_1[iVar4] == 0x20)); iVar4 = iVar4 + -1) {
    param_1[iVar4] = 0;
  }
  CreateDirectoryA(s_scores5_00477ba4,(LPSECURITY_ATTRIBUTES)0x0);
  if (DAT_004871c9 == '\0') {
    FUN_0043b750();
  }
  if (((param_1[0x44] & 1) == 0) || (uVar2 = FUN_0043ac70(path,param_1), (char)uVar2 == '\0')) {
    fp = crt_fopen(path,&DAT_00477ba0);
    if (fp == (FILE *)0x0) {
      console_printf(&console_log_queue,(byte *)s_Unable_to_save_score__disk_full_o_00477b6c);
      return;
    }
    FUN_0043ad70((undefined4 *)param_1,(int *)fp);
    crt_fclose(fp);
  }
  return;
}



/* FUN_0043b510 @ 0043b510 */

void FUN_0043b510(void)

{
  FUN_0043b450((byte *)&highscore_active_record);
  return;
}



/* FUN_0043b520 @ 0043b520 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

int FUN_0043b520(void)

{
  int iVar1;
  int iVar2;
  int *piVar3;
  
  iVar2 = DAT_004c395c;
  if (_config_game_mode == 2) {
    iVar1 = 0;
    if (0 < DAT_004c395c) {
      piVar3 = &DAT_00482b30;
      while (iVar2 = iVar1, survival_elapsed_ms <= *piVar3) {
        iVar1 = iVar1 + 1;
        piVar3 = piVar3 + 0x12;
        if (DAT_004c395c <= iVar1) {
          return DAT_004c395c;
        }
      }
    }
  }
  else if (_config_game_mode == 3) {
    iVar1 = 0;
    if (0 < DAT_004c395c) {
      piVar3 = &DAT_00482b30;
      while (iVar2 = iVar1, *piVar3 <= survival_elapsed_ms) {
        iVar1 = iVar1 + 1;
        piVar3 = piVar3 + 0x12;
        if (DAT_004c395c <= iVar1) {
          return DAT_004c395c;
        }
      }
    }
  }
  else {
    iVar1 = 0;
    if (0 < DAT_004c395c) {
      piVar3 = &DAT_00482b34;
      do {
        if (*piVar3 < highscore_score_xp) {
          return iVar1;
        }
        iVar1 = iVar1 + 1;
        piVar3 = piVar3 + 0x12;
      } while (iVar1 < DAT_004c395c);
    }
  }
  return iVar2;
}



/* FUN_0043b5b0 @ 0043b5b0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

undefined * FUN_0043b5b0(void)

{
  char cVar1;
  uint uVar2;
  char *pcVar3;
  undefined *puVar4;
  
  if (DAT_004c3960 == '\0') {
    crt_getcwd(&DAT_004c375c,0x1ff);
    DAT_004c395b = 0;
    DAT_004c3960 = '\x01';
  }
  if (_config_game_mode == 2) {
    puVar4 = &DAT_004c375c;
    pcVar3 = s__s_scores5_rush_hi_00477c60;
  }
  else if (_config_game_mode == 1) {
    puVar4 = &DAT_004c375c;
    pcVar3 = s__s_scores5_survival_hi_00477c48;
  }
  else {
    if (_config_game_mode == 3) {
      if (config_full_version == '\0') {
        crt_sprintf(&DAT_004c36dc,s__s_scores5_questhc_d__d_hi_00477c10,&DAT_004c375c,
                    _quest_stage_major,_quest_stage_minor);
      }
      else {
        crt_sprintf(&DAT_004c36dc,s__s_scores5_quest_d__d_hi_00477c2c,&DAT_004c375c,
                    _quest_stage_major,_quest_stage_minor);
      }
      goto LAB_0043b67f;
    }
    puVar4 = (undefined *)((int)&config_saved_names + config_name_slot_selected * 0x1b);
    pcVar3 = s_scores5_unknown_hi_00477bfc;
  }
  crt_sprintf(&DAT_004c36dc,pcVar3,puVar4);
LAB_0043b67f:
  if (_config_player_count == 2) {
    uVar2 = 0xffffffff;
    pcVar3 = &DAT_004c36dc;
    do {
      if (uVar2 == 0) break;
      uVar2 = uVar2 - 1;
      cVar1 = *pcVar3;
      pcVar3 = pcVar3 + 1;
    } while (cVar1 != '\0');
    uVar2 = ~uVar2;
    (&DAT_004c36d8)[uVar2] = 0x5f;
    (&DAT_004c36d9)[uVar2] = 0x32;
    (&DAT_004c36da)[uVar2] = 0x2e;
    (&DAT_004c36db)[uVar2] = 0x68;
    (&DAT_004c36dc)[uVar2] = 0x69;
    (&DAT_004c36dd)[uVar2] = 0;
  }
  if (config_name_slot_selected != 0) {
    crt_sprintf(&DAT_004c365c,&DAT_00477bf4,&DAT_004c36dc,
                (int)&config_saved_names + config_name_slot_selected * 0x1b);
    console_printf(&console_log_queue,(byte *)s_Opening_named_cache___s__00477bd8);
    return &DAT_004c365c;
  }
  if (*(float *)(DAT_00480864 + 0xc) != 0.0) {
    console_printf(&console_log_queue,(byte *)s_Opening___s__00477bc8);
  }
  return &DAT_004c36dc;
}



/* FUN_0043b750 @ 0043b750 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_0043b750(void)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  
  iVar4 = 1;
  iVar1 = 1;
  iVar3 = 4;
  do {
    if (*(int *)((int)&DAT_0048708c + iVar3) < (int)(&DAT_0048708c)[iVar1]) {
      iVar3 = iVar1 * 4;
      iVar4 = iVar1;
    }
    iVar1 = iVar1 + 1;
  } while (iVar1 < 0x40);
  highscore_record_weapon_id = (undefined1)iVar4;
  if (highscore_record_shots_fired < highscore_record_shots_hit) {
    highscore_record_shots_hit = highscore_record_shots_fired;
  }
  highscore_record_game_mode = config_game_mode;
  highscore_record_quest_major = quest_stage_major;
  highscore_record_quest_minor = quest_stage_minor;
  highscore_flags = 0;
  uVar2 = _rand();
  uVar2 = uVar2 & 0x8fffffff;
  if ((int)uVar2 < 0) {
    uVar2 = (uVar2 - 1 | 0xf0000000) + 1;
  }
  _DAT_00487078 = uVar2 + 0x310;
  highscore_full_version_marker = -(config_full_version != '\0') & 0x75;
  return;
}



/* FUN_0043b810 @ 0043b810 */

void __fastcall FUN_0043b810(int param_1)

{
  undefined4 *puVar1;
  int iVar2;
  
  iVar2 = 0x10;
  *(undefined4 *)(param_1 + 0x80) = 0;
  *(undefined4 *)(param_1 + 0x7c) = 0;
  *(undefined4 *)(param_1 + 0x78) = 0;
  *(undefined4 *)(param_1 + 0x74) = 0;
  *(undefined4 *)(param_1 + 0x14) = 0;
  *(undefined4 *)(param_1 + 0x18) = 0;
  *(undefined4 *)(param_1 + 0x1c) = 0;
  *(undefined4 *)(param_1 + 0x20) = 0xbf800000;
  puVar1 = (undefined4 *)(param_1 + 0x60);
  do {
    *puVar1 = 0;
    puVar1 = puVar1 + -1;
    iVar2 = iVar2 + -1;
  } while (iVar2 != 0);
  return;
}



/* buffer_reader_init @ 0043b850 */

/* initializes the buffer reader cursor and length */

void __cdecl buffer_reader_init(void *data,int size)

{
  DAT_004c3c70 = data;
  DAT_004c3c74 = size;
  DAT_004c3c78 = 0;
  return;
}



/* buffer_reader_seek @ 0043b870 */

/* sets the buffer reader cursor */

void __cdecl buffer_reader_seek(int offset)

{
  DAT_004c3c78 = offset;
  return;
}



/* buffer_reader_read_u16 @ 0043b880 */

/* reads a little-endian u16 from the buffer */

int buffer_reader_read_u16(void)

{
  undefined2 *puVar1;
  
  puVar1 = (undefined2 *)(DAT_004c3c78 + DAT_004c3c70);
  DAT_004c3c78 = DAT_004c3c78 + 2;
  return CONCAT22((short)((uint)DAT_004c3c70 >> 0x10),*puVar1);
}



/* buffer_reader_read_u32 @ 0043b8a0 */

/* reads a little-endian u32 from the buffer */

uint buffer_reader_read_u32(void)

{
  uint *puVar1;
  
  puVar1 = (uint *)(DAT_004c3c78 + DAT_004c3c70);
  DAT_004c3c78 = DAT_004c3c78 + 4;
  return *puVar1;
}



/* buffer_reader_skip @ 0043b8c0 */

/* advances the buffer reader cursor */

void __cdecl buffer_reader_skip(int count)

{
  DAT_004c3c78 = DAT_004c3c78 + count;
  return;
}



/* buffer_reader_find_tag @ 0043b8e0 */

/* searches the buffer for a tag and updates the cursor */

int __cdecl buffer_reader_find_tag(char *tag,int tag_len)

{
  int iVar1;
  int iVar2;
  
  iVar2 = 0;
  if (0 < (int)DAT_004c3c74) {
    do {
      iVar1 = 0;
      if (0 < tag_len) {
        do {
          if (*(char *)(DAT_004c3c70 + iVar2 + iVar1) != tag[iVar1]) break;
          iVar1 = iVar1 + 1;
        } while (iVar1 < tag_len);
      }
      if (iVar1 == tag_len) {
        DAT_004c3c78 = iVar2 + tag_len;
        return CONCAT31((int3)((uint)iVar1 >> 8),1);
      }
      iVar2 = iVar2 + 1;
    } while (iVar2 < (int)DAT_004c3c74);
  }
  return DAT_004c3c74 & 0xffffff00;
}



/* resource_pack_read_cstring @ 0043b940 */

/* reads a NUL-terminated pack entry name into DAT_004c3a68 */

int __cdecl resource_pack_read_cstring(FILE *fp)

{
  byte bVar1;
  int iVar2;
  int iVar3;
  
  iVar3 = 0;
  bVar1 = (byte)fp->_flag;
  while (((bVar1 & 0x10) == 0 && (iVar2 = crt_getc(fp), iVar2 != 0))) {
    (&DAT_004c3a68)[iVar3] = (char)iVar2;
    bVar1 = (byte)fp->_flag;
    iVar3 = iVar3 + 1;
  }
  (&DAT_004c3a68)[iVar3] = 0;
  return (uint)~fp->_flag >> 4 & 1;
}



/* resource_pack_set @ 0043b980 */

/* validates and sets the active resource pack path */

int __cdecl resource_pack_set(char *path)

{
  char cVar1;
  FILE *fp;
  int iVar2;
  uint uVar3;
  uint uVar4;
  char *pcVar5;
  char *pcVar6;
  
  fp = crt_fopen(path,&file_mode_read_binary);
  if (fp == (FILE *)0x0) {
    DAT_004c3968._0_1_ = 0;
    DAT_004c3c6c = 0;
    return 0;
  }
  uVar3 = 0xffffffff;
  do {
    pcVar5 = path;
    if (uVar3 == 0) break;
    uVar3 = uVar3 - 1;
    pcVar5 = path + 1;
    cVar1 = *path;
    path = pcVar5;
  } while (cVar1 != '\0');
  uVar3 = ~uVar3;
  pcVar5 = pcVar5 + -uVar3;
  pcVar6 = (char *)&DAT_004c3968;
  for (uVar4 = uVar3 >> 2; uVar4 != 0; uVar4 = uVar4 - 1) {
    *(undefined4 *)pcVar6 = *(undefined4 *)pcVar5;
    pcVar5 = pcVar5 + 4;
    pcVar6 = pcVar6 + 4;
  }
  for (uVar3 = uVar3 & 3; uVar3 != 0; uVar3 = uVar3 - 1) {
    *pcVar6 = *pcVar5;
    pcVar5 = pcVar5 + 1;
    pcVar6 = pcVar6 + 1;
  }
  DAT_004c3c6c = 1;
  iVar2 = crt_fclose(fp);
  return CONCAT31((int3)((uint)iVar2 >> 8),1);
}



/* resource_open_read @ 0043b9e0 */

/* opens a resource from the active pack or filesystem and returns its size */

int __cdecl resource_open_read(byte *path,int *size_out)

{
  int *piVar1;
  char cVar2;
  FILE *fp;
  int iVar3;
  uint uVar4;
  long lVar5;
  
  piVar1 = size_out;
  if (DAT_004c3c6c != '\0') {
    fp = crt_fopen((char *)&DAT_004c3968,&file_mode_read_binary);
    DAT_004c3c68 = fp;
    if (fp == (FILE *)0x0) {
      return 0;
    }
    crt_fseek(fp,4,0);
    iVar3 = resource_pack_read_cstring(fp);
    cVar2 = (char)iVar3;
    while (cVar2 != '\0') {
      crt_fread(&size_out,4,1,fp);
      *piVar1 = (int)size_out;
      uVar4 = FUN_00462de0(size_out,&DAT_004c3a68,path);
      iVar3 = 0;
      if (uVar4 == 0) goto LAB_0043bac3;
      crt_fseek(fp,(long)size_out,1);
      iVar3 = resource_pack_read_cstring(fp);
      cVar2 = (char)iVar3;
    }
    crt_fclose(fp);
  }
  DAT_004c3c68 = crt_fopen((char *)path,&file_mode_read_binary);
  if (DAT_004c3c68 == (FILE *)0x0) {
    return 0;
  }
  crt_fseek(DAT_004c3c68,0,2);
  lVar5 = crt_ftell(DAT_004c3c68);
  *piVar1 = lVar5;
  iVar3 = crt_fseek(DAT_004c3c68,0,0);
LAB_0043bac3:
  return CONCAT31((int3)((uint)iVar3 >> 8),1);
}



/* resource_close @ 0043bad0 */

/* closes the current resource file handle */

void resource_close(void)

{
  if (DAT_004c3c68 != (FILE *)0x0) {
    crt_fclose(DAT_004c3c68);
  }
  return;
}



/* dsound_init @ 0043baf0 */

/* WARNING: Restarted to delay deadcode elimination for space: stack */
/* initializes DirectSound and the primary buffer */

int __cdecl dsound_init(void *hwnd,uint coop_level)

{
  uint uVar1;
  undefined4 uVar2;
  int iVar3;
  undefined4 *puVar4;
  int *piVar5;
  undefined4 uStack_54;
  undefined4 auStack_30 [4];
  undefined4 uStack_20;
  short sStack_10;
  ushort uStack_8;
  
  if (DAT_004c3964 != (int *)0x0) {
    (**(code **)(*DAT_004c3964 + 8))();
  }
  DAT_004c3964 = (int *)0x0;
  uVar1 = DirectSoundCreate8((LPCGUID)0x0,(LPDIRECTSOUND8 *)&DAT_004c3964,(LPUNKNOWN)0x0);
  if ((int)uVar1 < 0) {
    return uVar1 & 0xffffff00;
  }
  uVar1 = (**(code **)(*DAT_004c3964 + 0x18))();
  if ((int)uVar1 < 0) {
    return uVar1 & 0xffffff00;
  }
  puVar4 = auStack_30;
  for (iVar3 = 9; iVar3 != 0; iVar3 = iVar3 + -1) {
    *puVar4 = 0;
    puVar4 = puVar4 + 1;
  }
  uStack_54 = 0;
  auStack_30[0] = 0x24;
  auStack_30[1] = 1;
  auStack_30[2] = 0;
  uStack_20 = 0;
  uVar1 = (**(code **)(*DAT_004c3964 + 0xc))(DAT_004c3964,auStack_30);
  if ((int)uVar1 < 0) {
    return uVar1 & 0xffffff00;
  }
  uStack_54 = CONCAT22(sStack_10,1);
  piVar5 = &uStack_54;
  uVar1 = (**(code **)(CONCAT22(uStack_8,(uStack_8 >> 3) * sStack_10) + 0x38))(&stack0xffffffb8);
  if ((int)uVar1 < 0) {
    return uVar1 & 0xffffff00;
  }
  uVar2 = 0;
  if (piVar5 != (int *)0x0) {
    uVar2 = (**(code **)(*piVar5 + 8))(piVar5);
  }
  return CONCAT31((int3)((uint)uVar2 >> 8),1);
}



/* dsound_shutdown @ 0043bc20 */

/* releases the DirectSound interface */

void dsound_shutdown(void)

{
  if (DAT_004c3964 != (int *)0x0) {
    (**(code **)(*DAT_004c3964 + 8))(DAT_004c3964);
  }
  DAT_004c3964 = (int *)0x0;
  return;
}



/* dsound_restore_buffer @ 0043bc40 */

/* restores a lost DirectSound buffer */

int __cdecl dsound_restore_buffer(void *buffer)

{
  void *pvVar1;
  uint in_EAX;
  int iVar2;
  undefined4 extraout_EAX;
  uint unaff_ESI;
  
  pvVar1 = buffer;
  if (((buffer != (void *)0x0) &&
      (in_EAX = (**(code **)(*(int *)buffer + 0x24))(buffer,&buffer), -1 < (int)in_EAX)) &&
     ((unaff_ESI & 2) != 0)) {
    do {
      while (iVar2 = (**(code **)(*(int *)pvVar1 + 0x50))(pvVar1), iVar2 == -0x7787ff6a) {
        Sleep(10);
      }
    } while (iVar2 != 0);
    OutputDebugStringA(s_____SND__Buffer_restored__00477c74);
    return CONCAT31((int3)((uint)extraout_EAX >> 8),1);
  }
  return in_EAX & 0xffffff00;
}



/* resource_read_alloc @ 0043bca0 */

/* reads a resource into a newly allocated buffer */

int __cdecl resource_read_alloc(byte *path,void **out_data,uint *out_size)

{
  FILE *fp;
  int iVar1;
  void *ptr;
  
  iVar1 = resource_open_read(path,(int *)out_size);
  fp = DAT_004c3c68;
  if ((char)iVar1 == '\0') {
    return iVar1;
  }
  ptr = operator_new(*out_size);
  crt_fread(ptr,*out_size,1,fp);
  resource_close();
  *out_data = ptr;
  return CONCAT31((int3)((uint)out_data >> 8),1);
}



/* sfx_entry_load_ogg @ 0043bcf0 */

/* loads an OGG sample into an sfx entry */

int __cdecl sfx_entry_load_ogg(void *entry,byte *path)

{
  FILE *fp;
  int iVar1;
  undefined4 *puVar2;
  uint uVar3;
  void *pvVar4;
  uint local_314;
  undefined1 local_310 [740];
  uint local_2c;
  uint local_1c;
  int local_18;
  
  iVar1 = resource_open_read(path,(int *)&local_314);
  fp = DAT_004c3c68;
  if ((char)iVar1 == '\0') {
    return iVar1;
  }
  puVar2 = operator_new(local_314 + 8);
  crt_fread(puVar2 + 2,local_314,1,fp);
  resource_close();
  iVar1 = FUN_0041ddd0(local_310,puVar2,local_314);
  if ((char)iVar1 != '\0') {
    *(undefined4 *)entry = 0;
    *(undefined4 *)((int)entry + 4) = 0;
    *(undefined4 *)((int)entry + 8) = 0;
    *(undefined4 *)((int)entry + 0xc) = 0;
    *(undefined2 *)((int)entry + 0x10) = 0;
    *(short *)((int)entry + 2) = (short)local_1c;
    *(undefined2 *)entry = 1;
    uVar3 = (int)((local_1c & 0xffff) * 0x10) >> 3;
    *(short *)((int)entry + 0xc) = (short)uVar3;
    *(uint *)((int)entry + 8) = (uVar3 & 0xffff) * local_18;
    *(int *)((int)entry + 4) = local_18;
    *(undefined2 *)((int)entry + 0xe) = 0x10;
    *(undefined2 *)((int)entry + 0x10) = 0;
    *(uint *)((int)entry + 0x18) = local_2c;
    pvVar4 = operator_new(local_2c);
    iVar1 = *(int *)((int)entry + 0x18);
    *(void **)((int)entry + 0x14) = pvVar4;
    uVar3 = 1;
    while ((iVar1 != 0 && (uVar3 != 0))) {
      uVar3 = FUN_0041df00(local_310,
                           (*(int *)((int)entry + 0x18) - iVar1) + *(int *)((int)entry + 0x14),iVar1
                          );
      iVar1 = iVar1 - uVar3;
    }
    FUN_0041dee0((int)local_310);
    iVar1 = sfx_entry_create_buffers((int)entry);
    return CONCAT31((int3)((uint)iVar1 >> 8),(char)iVar1 != '\0');
  }
  return iVar1;
}



/* sfx_entry_seek @ 0043be20 */

/* seeks streaming sfx data and resets playback cursors */

void __cdecl sfx_entry_seek(int entry,int sample_offset)

{
  if (*(int *)(entry + 0x74) != 0) {
    (**(code **)(**(int **)(entry + 0x24) + 0x34))(*(int **)(entry + 0x24),sample_offset);
    FUN_0041ddb0(*(void **)(entry + 0x74),sample_offset);
    *(undefined4 *)(entry + 0x1c) = 0;
    *(undefined4 *)(entry + 0x78) = 0;
    *(undefined4 *)(entry + 0x7c) = 0;
    *(undefined4 *)(entry + 0x80) = 0;
  }
  return;
}



/* sfx_entry_start_playback @ 0043be60 */

/* selects a voice/buffer and starts playback */

int __cdecl sfx_entry_start_playback(int entry)

{
  int *piVar1;
  int entry_00;
  int iVar2;
  int *piVar3;
  uint uVar4;
  
  entry_00 = entry;
  if (entry == 0) {
    return -1;
  }
  piVar3 = (int *)(entry + 0x24);
  iVar2 = dsound_restore_buffer(*(void **)(entry + 0x24));
  if ((char)iVar2 != '\0') {
    if (*(int *)(entry_00 + 0x74) != 0) goto LAB_0043be9c;
    sfx_entry_upload_buffer(entry_00);
  }
  if (*(int *)(entry_00 + 0x74) == 0) {
    uVar4 = 0;
    do {
      piVar1 = (int *)*piVar3;
      if (piVar1 != (int *)0x0) {
        (**(code **)(*piVar1 + 0x24))(piVar1,&entry);
        if ((entry & 1U) == 0) goto LAB_0043bf10;
      }
      uVar4 = uVar4 + 1;
      piVar3 = piVar3 + 1;
    } while ((int)uVar4 < 0x10);
    uVar4 = _rand();
    uVar4 = uVar4 & 0x8000000f;
    if ((int)uVar4 < 0) {
      uVar4 = (uVar4 - 1 | 0xfffffff0) + 1;
    }
    piVar3 = *(int **)(entry_00 + 0x24 + uVar4 * 4);
    (**(code **)(*piVar3 + 0x48))(piVar3);
LAB_0043bf10:
    piVar3 = *(int **)(entry_00 + 0x24 + uVar4 * 4);
    (**(code **)(*piVar3 + 0x44))(piVar3,sfx_rate_scale);
    piVar3 = *(int **)(entry_00 + 0x24 + uVar4 * 4);
    (**(code **)(*piVar3 + 0x30))(piVar3,0,0,0);
    return uVar4;
  }
LAB_0043be9c:
  sfx_entry_seek(entry_00,0);
  music_stream_fill(entry_00);
  music_stream_fill(entry_00);
  music_stream_fill(entry_00);
  (**(code **)(*(int *)*piVar3 + 0x30))((int *)*piVar3,0,0,1);
  return 0;
}



/* sfx_entry_resume @ 0043bf40 */

/* restarts playback for a streaming entry */

void __cdecl sfx_entry_resume(int entry)

{
  if (*(int *)(entry + 0x74) != 0) {
    (**(code **)(**(int **)(entry + 0x24) + 0x30))(*(int **)(entry + 0x24),0,0,1);
  }
  return;
}



/* sfx_entry_stop @ 0043bf60 */

/* stops playback for all voices */

void __cdecl sfx_entry_stop(int entry)

{
  int *piVar1;
  int *piVar2;
  int iVar3;
  
  if (entry != 0) {
    if (*(int *)(entry + 0x74) == 0) {
      piVar2 = (int *)(entry + 0x24);
      iVar3 = 0x10;
      do {
        piVar1 = (int *)*piVar2;
        if (piVar1 != (int *)0x0) {
          (**(code **)(*piVar1 + 0x48))(piVar1);
        }
        piVar2 = piVar2 + 1;
        iVar3 = iVar3 + -1;
      } while (iVar3 != 0);
    }
    else {
      piVar2 = *(int **)(entry + 0x24);
      if (piVar2 != (int *)0x0) {
        (**(code **)(*piVar2 + 0x48))(piVar2);
        return;
      }
    }
  }
  return;
}



/* sfx_entry_set_volume @ 0043bfa0 */

/* sets the volume for active voices */

void __cdecl sfx_entry_set_volume(int entry,float volume)

{
  int *piVar1;
  int iVar2;
  float fVar3;
  int iVar4;
  int *piVar5;
  longlong lVar6;
  
  fVar3 = (volume + 2.0) * 0.33333334;
  if ((*(int *)(entry + 0x74) == 0) || (*(float *)(entry + 0x20) != fVar3)) {
    iVar4 = 0;
    *(float *)(entry + 0x20) = fVar3;
    piVar5 = (int *)(entry + 0x24);
    do {
      piVar1 = (int *)*piVar5;
      if (piVar1 != (int *)0x0) {
        iVar2 = *piVar1;
        lVar6 = __ftol();
        (**(code **)(iVar2 + 0x3c))(piVar1,(int)lVar6);
        if (*(int *)(entry + 0x74) != 0) {
          return;
        }
      }
      iVar4 = iVar4 + 1;
      piVar5 = piVar5 + 1;
    } while (iVar4 < 0x10);
  }
  return;
}



/* sfx_entry_load_wav @ 0043c020 */

/* loads a WAV sample into an sfx entry */

int __cdecl sfx_entry_load_wav(void *entry,byte *path)

{
  int iVar1;
  uint extraout_EAX;
  uint local_4;
  
  iVar1 = resource_read_alloc(path,&path,&local_4);
  if ((char)iVar1 == '\0') {
    return iVar1;
  }
  iVar1 = wav_parse_into_entry(entry,path,local_4);
  if ((char)iVar1 == '\0') {
    crt_free(path);
    return extraout_EAX & 0xffffff00;
  }
  crt_free(path);
  iVar1 = sfx_entry_create_buffers((int)entry);
  return CONCAT31((int3)((uint)iVar1 >> 8),(char)iVar1 != '\0');
}



/* sfx_release_entry @ 0043c090 */

/* frees a sound entry (sample/voices) */

void __cdecl sfx_release_entry(int entry)

{
  int *piVar1;
  int iVar2;
  int *piVar3;
  
  if (*(int *)(entry + 0x74) != 0) {
    FUN_0041dee0(*(int *)(entry + 0x74));
    crt_free(*(void **)(entry + 0x74));
    piVar3 = *(int **)(entry + 0x24);
    *(undefined4 *)(entry + 0x74) = 0;
    if (piVar3 != (int *)0x0) {
      (**(code **)(*piVar3 + 8))(piVar3);
    }
    *(undefined4 *)(entry + 0x24) = 0;
    crt_free(*(void **)(entry + 0x14));
    *(undefined4 *)(entry + 0x14) = 0;
    return;
  }
  piVar3 = (int *)(entry + 0x60);
  iVar2 = 0x10;
  do {
    piVar1 = (int *)*piVar3;
    if (piVar1 != (int *)0x0) {
      (**(code **)(*piVar1 + 8))(piVar1);
    }
    *piVar3 = 0;
    piVar3 = piVar3 + -1;
    iVar2 = iVar2 + -1;
  } while (iVar2 != 0);
  crt_free(*(void **)(entry + 0x14));
  *(undefined4 *)(entry + 0x14) = 0;
  return;
}



/* wav_parse_into_entry @ 0043c110 */

/* parses WAV data into an entry and copies PCM */

int __cdecl wav_parse_into_entry(void *entry,void *data,int size)

{
  int iVar1;
  uint uVar2;
  undefined4 *puVar3;
  uint uVar4;
  undefined4 *puVar5;
  
  *(undefined4 *)entry = 0;
  *(undefined4 *)((int)entry + 4) = 0;
  *(undefined4 *)((int)entry + 8) = 0;
  *(undefined4 *)((int)entry + 0xc) = 0;
  *(undefined2 *)((int)entry + 0x10) = 0;
  *(undefined2 *)entry = 1;
  *(undefined2 *)((int)entry + 2) = 1;
  *(undefined2 *)((int)entry + 0xe) = 0x10;
  *(undefined4 *)((int)entry + 4) = 0x5622;
  *(undefined2 *)((int)entry + 0xc) = 2;
  *(undefined2 *)((int)entry + 0x10) = 0;
  *(undefined4 *)((int)entry + 8) = 0xac44;
  buffer_reader_init(data,size);
  buffer_reader_seek(0);
  iVar1 = buffer_reader_find_tag(&DAT_00477c98,4);
  if ((char)iVar1 == '\0') {
    return iVar1;
  }
  buffer_reader_skip(4);
  buffer_reader_skip(2);
  iVar1 = buffer_reader_read_u16();
  *(short *)((int)entry + 2) = (short)iVar1;
  uVar2 = buffer_reader_read_u32();
  *(uint *)((int)entry + 4) = uVar2;
  buffer_reader_skip(6);
  uVar2 = buffer_reader_read_u16();
  *(short *)((int)entry + 0xe) = (short)uVar2;
  iVar1 = (uint)*(ushort *)((int)entry + 2) * (uVar2 & 0xffff);
  *(undefined2 *)((int)entry + 0x10) = 0;
  uVar2 = (int)(iVar1 + (iVar1 >> 0x1f & 7U)) >> 3;
  *(short *)((int)entry + 0xc) = (short)uVar2;
  *(uint *)((int)entry + 8) = (uVar2 & 0xffff) * *(int *)((int)entry + 4);
  buffer_reader_find_tag(&DAT_00477c90,4);
  uVar2 = buffer_reader_read_u32();
  *(uint *)((int)entry + 0x18) = uVar2;
  puVar3 = operator_new(uVar2);
  *(undefined4 **)((int)entry + 0x14) = puVar3;
  puVar5 = (undefined4 *)(DAT_004c3c78 + (int)data);
  for (uVar4 = uVar2 >> 2; uVar4 != 0; uVar4 = uVar4 - 1) {
    *puVar3 = *puVar5;
    puVar5 = puVar5 + 1;
    puVar3 = puVar3 + 1;
  }
  for (uVar4 = uVar2 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
    *(undefined1 *)puVar3 = *(undefined1 *)puVar5;
    puVar5 = (undefined4 *)((int)puVar5 + 1);
    puVar3 = (undefined4 *)((int)puVar3 + 1);
  }
  return CONCAT31((int3)(uVar2 >> 8),1);
}



/* sfx_entry_upload_buffer @ 0043c230 */

/* uploads PCM data into a DirectSound buffer */

int __cdecl sfx_entry_upload_buffer(int entry)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  int *piVar5;
  int *piVar6;
  undefined4 uVar7;
  int *piVar8;
  undefined1 local_4 [4];
  
  iVar1 = entry;
  piVar8 = &entry;
  uVar7 = 0;
  iVar2 = (**(code **)(**(int **)(entry + 0x24) + 0x2c))
                    (*(int **)(entry + 0x24),0,*(undefined4 *)(entry + 0x18),piVar8,local_4,0,0,0);
  if ((iVar2 < 0) && (iVar2 == -0x7787ff6a)) {
    iVar2 = dsound_restore_buffer(*(void **)(iVar1 + 0x24));
    if ((char)iVar2 == '\0') {
      return iVar2;
    }
  }
  uVar4 = *(uint *)(iVar1 + 0x18);
  piVar5 = *(int **)(iVar1 + 0x14);
  piVar6 = piVar8;
  for (uVar3 = uVar4 >> 2; uVar3 != 0; uVar3 = uVar3 - 1) {
    *piVar6 = *piVar5;
    piVar5 = piVar5 + 1;
    piVar6 = piVar6 + 1;
  }
  for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
    *(char *)piVar6 = (char)*piVar5;
    piVar5 = (int *)((int)piVar5 + 1);
    piVar6 = (int *)((int)piVar6 + 1);
  }
  uVar7 = (**(code **)(**(int **)(iVar1 + 0x24) + 0x4c))(*(int **)(iVar1 + 0x24),piVar8,uVar7,0,0);
  return CONCAT31((int3)((uint)uVar7 >> 8),1);
}



/* sfx_entry_create_buffers @ 0043c2b0 */

/* creates DirectSound buffers for an sfx entry */

int __cdecl sfx_entry_create_buffers(int entry)

{
  uint uVar1;
  int iVar2;
  undefined4 uVar3;
  uint extraout_EAX;
  int iVar4;
  undefined4 *puVar5;
  int iVar6;
  undefined4 *puVar7;
  undefined4 local_24 [4];
  int local_14;
  undefined4 local_10;
  undefined4 local_c;
  undefined4 local_8;
  undefined4 local_4;
  
  puVar7 = (undefined4 *)(entry + 0x24);
  puVar5 = local_24;
  for (iVar4 = 9; iVar4 != 0; iVar4 = iVar4 + -1) {
    *puVar5 = 0;
    puVar5 = puVar5 + 1;
  }
  local_24[2] = *(undefined4 *)(entry + 0x18);
  local_10 = 0;
  local_8 = 0;
  local_4 = 0;
  local_24[0] = 0x24;
  local_24[1] = 0x80e0;
  local_c = 0;
  local_14 = entry;
  uVar1 = (**(code **)(*DAT_004c3964 + 0xc))(DAT_004c3964,local_24,puVar7,0);
  if ((int)uVar1 < 0) {
    return uVar1 & 0xffffff00;
  }
  iVar6 = 1;
  iVar4 = entry + 0x28;
  do {
    iVar2 = (**(code **)(*DAT_004c3964 + 0x14))(DAT_004c3964,*puVar7,iVar4);
    if (iVar2 < 0) {
      OutputDebugStringA(s_____SND__Failed_to_duplicate_the_00477ca0);
      return extraout_EAX & 0xffffff00;
    }
    iVar6 = iVar6 + 1;
    iVar4 = iVar4 + 4;
  } while (iVar6 < 0x10);
  sfx_entry_upload_buffer(entry);
  iVar4 = 0;
  do {
    *(undefined1 *)(iVar4 + 100 + entry) = 0;
    (**(code **)(*(int *)*puVar7 + 0x48))((int *)*puVar7);
    uVar3 = (**(code **)(*(int *)*puVar7 + 0x34))((int *)*puVar7,0);
    iVar4 = iVar4 + 1;
    puVar7 = puVar7 + 1;
  } while (iVar4 < 0x10);
  return CONCAT31((int3)((uint)uVar3 >> 8),1);
}



/* music_entry_load_ogg @ 0043c3a0 */

/* loads an OGG stream into a music entry */

int __cdecl music_entry_load_ogg(void *entry,byte *path)

{
  ushort uVar1;
  FILE *fp;
  int iVar2;
  undefined4 *puVar3;
  void *this;
  uint uVar4;
  uint3 uVar5;
  uint uVar6;
  undefined4 local_24 [4];
  void *local_14;
  undefined4 local_10;
  undefined4 local_c;
  undefined4 local_8;
  undefined4 local_4;
  
  iVar2 = resource_open_read(path,(int *)&path);
  fp = DAT_004c3c68;
  if ((char)iVar2 == '\0') {
    return iVar2;
  }
  puVar3 = operator_new((uint)(path + 8));
  crt_fread(puVar3 + 2,(uint)path,1,fp);
  resource_close();
  this = operator_new(0x310);
  *(void **)((int)entry + 0x74) = this;
  iVar2 = FUN_0041ddd0(this,puVar3,path);
  if ((char)iVar2 == '\0') {
    return iVar2;
  }
  *(undefined4 *)entry = 0;
  *(undefined4 *)((int)entry + 4) = 0;
  *(undefined4 *)((int)entry + 8) = 0;
  *(undefined4 *)((int)entry + 0xc) = 0;
  *(undefined2 *)((int)entry + 0x10) = 0;
  *(undefined2 *)entry = 1;
  uVar1 = *(ushort *)(*(int *)((int)entry + 0x74) + 0x2f4);
  *(ushort *)((int)entry + 2) = uVar1;
  *(undefined4 *)((int)entry + 4) = *(undefined4 *)(*(int *)((int)entry + 0x74) + 0x2f8);
  *(undefined2 *)((int)entry + 0xe) = 0x10;
  *(undefined2 *)((int)entry + 0x10) = 0;
  uVar4 = (int)((uint)uVar1 * 0x10) >> 3;
  *(short *)((int)entry + 0xc) = (short)uVar4;
  iVar2 = (uVar4 & 0xffff) * *(int *)((int)entry + 4);
  *(int *)((int)entry + 8) = iVar2;
  uVar4 = iVar2 * 2;
  *(uint *)((int)entry + 0x18) = uVar4;
  puVar3 = operator_new(uVar4);
  uVar4 = *(uint *)((int)entry + 0x18);
  *(undefined4 **)((int)entry + 0x14) = puVar3;
  for (uVar6 = uVar4 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *puVar3 = 0;
    puVar3 = puVar3 + 1;
  }
  for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
    *(undefined1 *)puVar3 = 0;
    puVar3 = (undefined4 *)((int)puVar3 + 1);
  }
  puVar3 = local_24;
  for (iVar2 = 9; iVar2 != 0; iVar2 = iVar2 + -1) {
    *puVar3 = 0;
    puVar3 = puVar3 + 1;
  }
  local_24[2] = *(undefined4 *)((int)entry + 0x18);
  local_10 = 0;
  local_4 = 0;
  local_8 = 0;
  local_24[0] = 0x24;
  local_24[1] = 0x180c0;
  local_c = 0;
  local_14 = entry;
  iVar2 = (**(code **)(*DAT_004c3964 + 0xc))(DAT_004c3964,local_24,(int)entry + 0x24,0);
  uVar5 = (uint3)((uint)iVar2 >> 8);
  if (iVar2 < 0) {
    return (uint)uVar5 << 8;
  }
  *(undefined4 *)((int)entry + 0x80) = 0;
  return CONCAT31(uVar5,1);
}



/* music_stream_update @ 0043c520 */

/* updates streaming cursor and refills if needed */

void __cdecl music_stream_update(int entry)

{
  int entry_00;
  int iVar1;
  uint uVar2;
  uint uVar3;
  
  entry_00 = entry;
  iVar1 = (**(code **)(**(int **)(entry + 0x24) + 0x10))(*(int **)(entry + 0x24),&entry);
  if (-1 < iVar1) {
    if (*(int *)(entry_00 + 0x78) == 0) {
      iVar1 = 0;
    }
    else {
      iVar1 = *(int *)(entry_00 + 0x18) - *(int *)(entry_00 + 0x78);
    }
    *(undefined4 *)(entry_00 + 0x78) = 0;
    uVar3 = *(int *)(entry_00 + 0x80) + iVar1;
    *(int *)(entry_00 + 0x7c) = *(int *)(entry_00 + 0x7c) + iVar1;
    *(uint *)(entry_00 + 0x80) = uVar3;
    uVar2 = (int)(*(int *)(entry_00 + 0x18) + (*(int *)(entry_00 + 0x18) >> 0x1f & 3U)) >> 2;
    if (uVar2 < uVar3) {
      *(uint *)(entry_00 + 0x80) = uVar3 - uVar2;
      music_stream_fill(entry_00);
    }
  }
  return;
}



/* music_stream_fill @ 0043c590 */

/* decodes and writes the next music stream chunk */

int __cdecl music_stream_fill(int entry)

{
  int iVar1;
  uint uVar2;
  uint extraout_EAX;
  int iVar3;
  int iVar4;
  
  iVar1 = (int)(*(int *)(entry + 0x18) + (*(int *)(entry + 0x18) >> 0x1f & 3U)) >> 2;
  iVar3 = *(int *)(entry + 0x1c);
  uVar2 = (**(code **)(**(int **)(entry + 0x24) + 0x2c))(*(int **)(entry + 0x24));
  if (-1 < (int)uVar2) {
    if (&stack0x00000000 != (undefined1 *)0xc) {
      OutputDebugStringA(s_____SND__Somehow_data_on_the_sec_00477ccc);
      return extraout_EAX & 0xffffff00;
    }
    iVar4 = 8;
    do {
      uVar2 = FUN_0041df00(*(void **)(entry + 0x74),(8 - iVar4) + iVar1,iVar4);
      if ((int)uVar2 < 1) {
        uVar2 = FUN_0041df00(*(void **)(entry + 0x74),(8 - iVar4) + iVar1,iVar4);
      }
      iVar4 = iVar4 - uVar2;
    } while ((0 < iVar4) && (uVar2 != 0));
    (**(code **)(**(int **)(entry + 0x24) + 0x4c))(*(int **)(entry + 0x24),iVar1,8,0,0);
    iVar3 = iVar3 + *(int *)(entry + 0x1c);
    uVar2 = iVar3 / *(int *)(entry + 0x18);
    *(int *)(entry + 0x1c) = iVar3 % *(int *)(entry + 0x18);
  }
  return uVar2 & 0xffffff00;
}



/* sfx_release_sample @ 0043c700 */

/* releases an sfx sample by id */

int __cdecl sfx_release_sample(int sfx_id)

{
  uint in_EAX;
  undefined4 extraout_EAX;
  
  if (((-1 < sfx_id) && (sfx_id < 0x80)) &&
     (in_EAX = sfx_id * 0x84, (&sfx_entry_table_state)[sfx_id * 0x21] != 0)) {
    sfx_release_entry((int)(&sfx_entry_table + in_EAX));
    return CONCAT31((int3)((uint)extraout_EAX >> 8),1);
  }
  return in_EAX & 0xffffff00;
}



/* sfx_load_sample @ 0043c740 */

/* loads an sfx sample and returns its id */

int __cdecl sfx_load_sample(char *path)

{
  byte bVar1;
  int *piVar2;
  byte *pbVar3;
  int iVar4;
  char *pcVar5;
  int iVar6;
  byte *pbVar7;
  bool bVar8;
  byte local_80 [128];
  
  if (config_blob != '\0') {
    return 1;
  }
  iVar6 = 0;
  piVar2 = &sfx_entry_table_state;
  while (*piVar2 != 0) {
    piVar2 = piVar2 + 0x21;
    iVar6 = iVar6 + 1;
    if (0x4cc6e3 < (int)piVar2) {
      return -1;
    }
  }
  if (iVar6 != -1) {
    pbVar7 = &DAT_00477dd4;
    pbVar3 = (byte *)path;
    do {
      bVar1 = *pbVar3;
      bVar8 = bVar1 < *pbVar7;
      if (bVar1 != *pbVar7) {
LAB_0043c7c5:
        iVar4 = (1 - (uint)bVar8) - (uint)(bVar8 != 0);
        goto LAB_0043c7ca;
      }
      if (bVar1 == 0) break;
      bVar1 = pbVar3[1];
      bVar8 = bVar1 < pbVar7[1];
      if (bVar1 != pbVar7[1]) goto LAB_0043c7c5;
      pbVar3 = pbVar3 + 2;
      pbVar7 = pbVar7 + 2;
    } while (bVar1 != 0);
    iVar4 = 0;
LAB_0043c7ca:
    if (iVar4 == 0) {
      console_printf(&console_log_queue,(byte *)s_Warning__sample___s__not_accepte_00477db0);
      path = s_trooper_inPain_01_ogg_00477d98;
    }
    pcVar5 = _strstr(path,&DAT_00477dd4);
    if (pcVar5 == (char *)0x0) {
      iVar4 = sfx_entry_load_wav(&sfx_entry_table + iVar6 * 0x84,(byte *)path);
      if ((char)iVar4 != '\0') goto LAB_0043c885;
      pcVar5 = s____loading_wav_sample___s__faile_00477d48;
    }
    else {
      if (DAT_004cc8d5 == '\0') {
        pcVar5 = s_sfx__s_00477d90;
      }
      else {
        pcVar5 = &DAT_00471fc4;
      }
      crt_sprintf((char *)local_80,pcVar5,path);
      iVar4 = sfx_entry_load_ogg(&sfx_entry_table + iVar6 * 0x84,local_80);
      if ((char)iVar4 != '\0') {
LAB_0043c885:
        if (*(float *)(DAT_00480854 + 0xc) == 0.0) {
          console_printf(&console_log_queue,(byte *)s_SFX_Sample__d_<____s__ok_00477d2c);
        }
        DAT_004cc8d8 = DAT_004cc8d8 + 1;
        return iVar6;
      }
      pcVar5 = s____loading_ogg_sample___s__faile_00477d6c;
    }
    console_printf(&console_log_queue,(byte *)pcVar5);
  }
  return -1;
}



/* music_load_track @ 0043c8d0 */

/* loads a music track and returns its id */

int __cdecl music_load_track(char *path)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  
  DAT_004cc8d8 = DAT_004cc8d8 + 1;
  iVar3 = 0;
  piVar1 = &DAT_004c42c4;
  while ((piVar1[-0x18] != 0 || (*piVar1 != 0))) {
    piVar1 = piVar1 + 0x21;
    iVar3 = iVar3 + 1;
    if (0x4c84c3 < (int)piVar1) {
      return -1;
    }
  }
  if (iVar3 == -1) {
    return -1;
  }
  iVar2 = music_entry_load_ogg(&music_entry_table + iVar3 * 0x84,(byte *)path);
  if ((char)iVar2 == '\0') {
    console_printf(&console_log_queue,(byte *)s_SFX_Tune__d_<____s__FAILED_00477df4);
    return iVar3;
  }
  console_printf(&console_log_queue,(byte *)s_SFX_Tune__d_<____s__ok_00477ddc);
  return iVar3;
}



/* music_queue_track @ 0043c960 */

/* queues a music track id */

void __cdecl music_queue_track(int track_id)

{
  if (-1 < track_id) {
    *(int *)(&music_playlist + DAT_004cc8d0 * 4) = track_id;
    DAT_004cc8d0 = DAT_004cc8d0 + 1;
  }
  return;
}



/* music_release_track @ 0043c980 */

/* releases a music track by id */

int __cdecl music_release_track(int track_id)

{
  uint in_EAX;
  undefined4 extraout_EAX;
  
  if (((-1 < track_id) && (track_id < 0x80)) &&
     (in_EAX = track_id * 0x84, (&DAT_004c4264)[track_id * 0x21] != 0)) {
    sfx_release_entry((int)(&music_entry_table + in_EAX));
    return CONCAT31((int3)((uint)extraout_EAX >> 8),1);
  }
  return in_EAX & 0xffffff00;
}



/* audio_init_music @ 0043c9c0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* loads music pack and registers music track ids */

void audio_init_music(void)

{
  int iVar1;
  undefined4 *puVar2;
  char *unaff_retaddr;
  char *pcVar3;
  
  if ((config_blob == '\0') && (config_music_disabled == '\0')) {
    puVar2 = &sfx_mute_flags;
    for (iVar1 = 0x20; iVar1 != 0; iVar1 = iVar1 + -1) {
      *puVar2 = 0x1010101;
      puVar2 = puVar2 + 1;
    }
    puVar2 = &sfx_volume_table;
    for (iVar1 = 0x80; iVar1 != 0; iVar1 = iVar1 + -1) {
      *puVar2 = 0;
      puVar2 = puVar2 + 1;
    }
    iVar1 = resource_pack_set(s_music_paq_00477eec);
    DAT_004cc8d5 = (char)iVar1;
    if (DAT_004cc8d5 == '\0') {
      pcVar3 = s____resource_paq__music_paq__not_f_00477e84;
    }
    else {
      pcVar3 = s____set_sound_resource_paq__music_00477ec4;
    }
    console_printf(&console_log_queue,(byte *)pcVar3);
    music_track_intro_id = music_load_track(s_music_intro_ogg_00477e74);
    music_track_shortie_monk_id = music_load_track(s_music_shortie_monk_ogg_00477e5c);
    console_exec_line(&console_log_queue,s_exec_music_game_tunes_txt_00477e40,unaff_retaddr);
    music_track_crimson_theme_id = music_load_track(s_music_crimson_theme_ogg_00477e28);
    music_track_crimsonquest_id = music_load_track(s_music_crimsonquest_ogg_00477e10);
    music_track_extra_0 = music_track_crimsonquest_id + 1;
    _music_track_extra_1 = music_track_crimsonquest_id + 2;
    sfx_unmuted_flag = 1;
  }
  return;
}



/* audio_init_sfx @ 0043caa0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* loads sfx pack and registers sound effect ids */

void audio_init_sfx(void)

{
  int iVar1;
  int *piVar2;
  char *pcVar3;
  
  if (config_blob == '\0') {
    iVar1 = resource_pack_set(s_sfx_paq_004784f4);
    DAT_004cc8d5 = (char)iVar1;
    if (DAT_004cc8d5 == '\0') {
      pcVar3 = s____failed_to_set_sound_resource_p_0047849c;
    }
    else {
      pcVar3 = s____set_sound_resource_paq__sfx_p_004784cc;
    }
    console_printf(&console_log_queue,(byte *)pcVar3);
    timeGetTime();
    sfx_trooper_inpain_01 = sfx_load_sample(s_trooper_inPain_01_ogg_00477d98);
    sfx_trooper_inpain_02 = sfx_load_sample(s_trooper_inPain_02_ogg_00478484);
    _sfx_trooper_inpain_03 = sfx_load_sample(s_trooper_inPain_03_ogg_0047846c);
    sfx_trooper_die_01 = sfx_load_sample(s_trooper_die_01_ogg_00478458);
    sfx_trooper_die_02 = sfx_load_sample(s_trooper_die_02_ogg_00478444);
    sfx_trooper_die_03 = sfx_load_sample(s_trooper_die_03_ogg_00478430);
    sfx_zombie_die_01 = sfx_load_sample(s_zombie_die_01_ogg_0047841c);
    sfx_zombie_die_02 = sfx_load_sample(s_zombie_die_02_ogg_00478408);
    sfx_zombie_die_03 = sfx_load_sample(s_zombie_die_03_ogg_004783f4);
    sfx_zombie_die_04 = sfx_load_sample(s_zombie_die_04_ogg_004783e0);
    sfx_zombie_attack_01 = sfx_load_sample(s_zombie_attack_01_ogg_004783c8);
    sfx_zombie_attack_02 = sfx_load_sample(s_zombie_attack_02_ogg_004783b0);
    sfx_alien_die_01 = sfx_load_sample(s_alien_die_01_ogg_0047839c);
    sfx_alien_die_02 = sfx_load_sample(s_alien_die_02_ogg_00478388);
    sfx_alien_die_03 = sfx_load_sample(s_alien_die_03_ogg_00478374);
    sfx_alien_die_04 = sfx_load_sample(s_alien_die_04_ogg_00478360);
    sfx_alien_attack_01 = sfx_load_sample(s_alien_attack_01_ogg_0047834c);
    sfx_alien_attack_02 = sfx_load_sample(s_alien_attack_02_ogg_00478338);
    sfx_lizard_die_01 = sfx_load_sample(s_lizard_die_01_ogg_00478324);
    sfx_lizard_die_02 = sfx_load_sample(s_lizard_die_02_ogg_00478310);
    sfx_lizard_die_03 = sfx_load_sample(s_lizard_die_03_ogg_004782fc);
    sfx_lizard_die_04 = sfx_load_sample(s_lizard_die_04_ogg_004782e8);
    sfx_lizard_attack_01 = sfx_load_sample(s_lizard_attack_01_ogg_004782d0);
    sfx_lizard_attack_02 = sfx_load_sample(s_lizard_attack_02_ogg_004782b8);
    sfx_spider_die_01 = sfx_load_sample(s_spider_die_01_ogg_004782a4);
    sfx_spider_die_02 = sfx_load_sample(s_spider_die_02_ogg_00478290);
    sfx_spider_die_03 = sfx_load_sample(s_spider_die_03_ogg_0047827c);
    sfx_spider_die_04 = sfx_load_sample(s_spider_die_04_ogg_00478268);
    sfx_spider_attack_01 = sfx_load_sample(s_spider_attack_01_ogg_00478250);
    sfx_spider_attack_02 = sfx_load_sample(s_spider_attack_02_ogg_00478238);
    sfx_pistol_fire = sfx_load_sample(s_pistol_fire_ogg_00478228);
    sfx_pistol_reload = sfx_load_sample(s_pistol_reload_ogg_00478214);
    sfx_shotgun_fire = sfx_load_sample(s_shotgun_fire_ogg_00478200);
    sfx_shotgun_reload = sfx_load_sample(s_shotgun_reload_ogg_004781ec);
    sfx_autorifle_fire = sfx_load_sample(s_autorifle_fire_ogg_004781d8);
    sfx_autorifle_reload = sfx_load_sample(s_autorifle_reload_ogg_004781c0);
    sfx_gauss_fire = sfx_load_sample(s_gauss_fire_ogg_004781b0);
    sfx_hrpm_fire = sfx_load_sample(s_hrpm_fire_ogg_004781a0);
    sfx_shock_fire = sfx_load_sample(s_shock_fire_ogg_00478190);
    sfx_plasmaminigun_fire = sfx_load_sample(s_plasmaMinigun_fire_ogg_00478178);
    sfx_plasmashotgun_fire = sfx_load_sample(s_plasmaShotgun_fire_ogg_00478160);
    sfx_pulse_fire = sfx_load_sample(s_pulse_fire_ogg_00478150);
    sfx_flamer_fire_01 = sfx_load_sample(s_flamer_fire_01_ogg_0047813c);
    sfx_flamer_fire_02 = sfx_load_sample(s_flamer_fire_02_ogg_00478128);
    sfx_shock_reload = sfx_load_sample(s_shock_reload_ogg_00478114);
    sfx_shock_fire_alt = sfx_load_sample(s_shock_fire_ogg_00478190);
    sfx_shockminigun_fire = sfx_load_sample(s_shockMinigun_fire_ogg_004780fc);
    sfx_rocket_fire = sfx_load_sample(s_rocket_fire_ogg_004780ec);
    sfx_rocketmini_fire = sfx_load_sample(s_rocketmini_fire_ogg_004780d8);
    sfx_autorifle_reload_alt = sfx_load_sample(s_autorifle_reload_ogg_004781c0);
    sfx_bullet_hit_01 = sfx_load_sample(s_bullet_hit_01_ogg_004780c4);
    _sfx_bullet_hit_02 = sfx_load_sample(s_bullet_hit_02_ogg_004780b0);
    _sfx_bullet_hit_03 = sfx_load_sample(s_bullet_hit_03_ogg_0047809c);
    _sfx_bullet_hit_04 = sfx_load_sample(s_bullet_hit_04_ogg_00478088);
    _sfx_bullet_hit_05 = sfx_load_sample(s_bullet_hit_05_ogg_00478074);
    _sfx_bullet_hit_06 = sfx_load_sample(s_bullet_hit_06_ogg_00478060);
    sfx_shock_hit_01 = sfx_load_sample(s_shock_hit_01_ogg_0047804c);
    sfx_explosion_small = sfx_load_sample(s_explosion_small_ogg_00478038);
    sfx_explosion_medium = sfx_load_sample(s_explosion_medium_ogg_00478020);
    sfx_explosion_large = sfx_load_sample(s_explosion_large_ogg_0047800c);
    sfx_shockwave = sfx_load_sample(s_shockwave_ogg_00477ffc);
    sfx_questhit = sfx_load_sample(s_questHit_ogg_00477fec);
    sfx_ui_bonus = sfx_load_sample(s_ui_bonus_ogg_00477fdc);
    _sfx_trooper_inpain_01_alias_0 = sfx_trooper_inpain_01;
    sfx_trooper_inpain_01_alias_1 = sfx_trooper_inpain_01;
    _sfx_trooper_inpain_01_alias_2 = sfx_trooper_inpain_01;
    sfx_ui_buttonclick = sfx_load_sample(s_ui_buttonClick_ogg_00477fc8);
    sfx_ui_panelclick = sfx_load_sample(s_ui_panelClick_ogg_00477fb4);
    sfx_ui_levelup = sfx_load_sample(s_ui_levelUp_ogg_00477fa4);
    _sfx_ui_typeclick_01 = sfx_load_sample(s_ui_typeClick_01_ogg_00477f90);
    _sfx_ui_typeclick_02 = sfx_load_sample(s_ui_typeClick_02_ogg_00477f7c);
    sfx_ui_typeenter = sfx_load_sample(s_ui_typeEnter_ogg_00477f68);
    sfx_ui_clink_01 = sfx_load_sample(s_ui_clink_01_ogg_00477f58);
    sfx_bloodspill_01 = sfx_load_sample(s_bloodSpill_01_ogg_00477f44);
    _sfx_bloodspill_02 = sfx_load_sample(s_bloodSpill_02_ogg_00477f30);
    timeGetTime();
    piVar2 = &sfx_entry_table_state;
    do {
      if (*piVar2 == 0) break;
      piVar2 = piVar2 + 0x21;
    } while ((int)piVar2 < 0x4cc6e4);
    console_printf(&console_log_queue,(byte *)s__d_samples_loaded_to_sound_libra_00477ef8);
  }
  return;
}



/* sfx_system_init @ 0043cf90 */

/* initializes the Grim SFX system and clears per-sfx state */

int sfx_system_init(void)

{
  undefined4 in_EAX;
  HWND hwnd;
  int iVar1;
  undefined4 uVar2;
  undefined4 *puVar3;
  uint uVar4;
  
  if (config_blob != '\0') {
    return CONCAT31((int3)((uint)in_EAX >> 8),1);
  }
  console_printf(&console_log_queue,(byte *)s_Initializing_Grim_SFX_sound_syst_004785c8);
  uVar4 = 2;
  hwnd = GetForegroundWindow();
  iVar1 = dsound_init(hwnd,uVar4);
  if ((char)iVar1 == '\0') {
    uVar4 = console_printf(&console_log_queue,(byte *)s____FAILED__unable_to_init_Grim_S_00478590);
    config_blob = 1;
    config_music_disabled = 1;
    return uVar4 & 0xffffff00;
  }
  console_printf(&console_log_queue,(byte *)s____init_44100_Hz_16_bit_ok_00478574);
  console_printf(&console_log_queue,(byte *)s____using_DirectSound_output_00478554);
  console_printf(&console_log_queue,(byte *)s____using_default_speaker_config_00478530);
  console_printf(&console_log_queue,(byte *)s____saying_hello_to_the_Ogg__00478510);
  puVar3 = &sfx_cooldown_table;
  for (iVar1 = 0x80; iVar1 != 0; iVar1 = iVar1 + -1) {
    *puVar3 = 0;
    puVar3 = puVar3 + 1;
  }
  puVar3 = &sfx_voice_table;
  for (iVar1 = 0x20; iVar1 != 0; iVar1 = iVar1 + -1) {
    *puVar3 = 0;
    puVar3 = puVar3 + 1;
  }
  uVar2 = console_printf(&console_log_queue,(byte *)s_Init_Grim_SFX_done_004784fc);
  return CONCAT31((int3)((uint)uVar2 >> 8),1);
}



/* sfx_release_all @ 0043d070 */

/* releases all loaded sfx samples */

void sfx_release_all(void)

{
  char *filename;
  undefined *entry;
  
  if (config_blob == '\0') {
    entry = &sfx_entry_table;
    do {
      sfx_release_entry((int)entry);
      entry = entry + 0x84;
    } while ((int)entry < 0x4cc6d0);
    console_printf(&console_log_queue,(byte *)s_SFX_Shutdown____004785fc);
    console_printf(&console_log_queue,(byte *)s_SFX_Released__004785ec);
    console_flush_log(&console_log_queue,filename);
  }
  return;
}



/* music_release_all @ 0043d0d0 */

/* releases all loaded music tracks */

void music_release_all(void)

{
  char *filename;
  undefined *entry;
  
  if (sfx_unmuted_flag != '\0') {
    entry = &music_entry_table;
    do {
      sfx_release_entry((int)entry);
      entry = entry + 0x84;
    } while ((int)entry < 0x4c8450);
    console_flush_log(&console_log_queue,filename);
  }
  return;
}



/* audio_shutdown_all @ 0043d110 */

/* shuts down sfx + music systems */

void audio_shutdown_all(void)

{
  sfx_release_all();
  music_release_all();
  dsound_shutdown();
  return;
}



/* sfx_play @ 0043d120 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* plays a sound effect with centered pan */

int __cdecl sfx_play(int sfx_id)

{
  int iVar1;
  longlong lVar2;
  float unaff_retaddr;
  
  if ((&sfx_entry_table_state)[sfx_id * 0x21] == 0) {
    return -1;
  }
  if (config_blob != '\0') {
    return -1;
  }
  if (0.0 < (float)(&sfx_cooldown_table)[sfx_id]) {
    return -1;
  }
  if (_bonus_reflex_boost_timer <= 0.0) {
    sfx_rate_scale = 0xac44;
  }
  else if (_bonus_reflex_boost_timer <= 1.0) {
    if (_bonus_reflex_boost_timer < 1.0) {
      lVar2 = __ftol();
      sfx_rate_scale = (undefined4)lVar2;
    }
  }
  else {
    sfx_rate_scale = 0x5622;
  }
  if ((sfx_id == sfx_flamer_fire_01) || (sfx_id == sfx_flamer_fire_02)) {
    (&sfx_cooldown_table)[sfx_id] = 0x3ee147ae;
  }
  else {
    (&sfx_cooldown_table)[sfx_id] = 0x3d4ccccd;
  }
  iVar1 = sfx_entry_start_playback((int)(&sfx_entry_table + sfx_id * 0x84));
  (**(code **)(**(int **)(&DAT_004c84f4 + (iVar1 + sfx_id * 0x21) * 4) + 0x40))
            (*(int **)(&DAT_004c84f4 + (iVar1 + sfx_id * 0x21) * 4),0);
  sfx_entry_set_volume((int)(&sfx_entry_table + sfx_id * 0x84),_config_sfx_volume * unaff_retaddr);
  return sfx_id;
}



/* sfx_play_panned @ 0043d260 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* plays a sound effect with computed pan */

float __cdecl sfx_play_panned(float sfx_id)

{
  int iVar1;
  int iVar2;
  float10 in_ST0;
  float10 extraout_ST0;
  longlong lVar3;
  
  if ((&sfx_entry_table_state)[(int)sfx_id * 0x21] == 0) {
    return (float)in_ST0;
  }
  if (config_blob != '\0') {
    return (float)in_ST0;
  }
  if (0.0 < (float)(&sfx_cooldown_table)[(int)sfx_id]) {
    return (float)in_ST0;
  }
  if (_bonus_reflex_boost_timer <= 0.0) {
    sfx_rate_scale = 0xac44;
  }
  else if (_bonus_reflex_boost_timer <= 1.0) {
    if (_bonus_reflex_boost_timer < 1.0) {
      lVar3 = __ftol();
      sfx_rate_scale = (undefined4)lVar3;
    }
  }
  else {
    sfx_rate_scale = 0x5622;
  }
  if ((sfx_id == sfx_flamer_fire_01) || (sfx_id == sfx_flamer_fire_02)) {
    (&sfx_cooldown_table)[(int)sfx_id] = 0x3ee147ae;
  }
  else {
    (&sfx_cooldown_table)[(int)sfx_id] = 0x3d4ccccd;
  }
  lVar3 = __ftol();
  iVar2 = (int)lVar3;
  if (iVar2 < -10000) {
    iVar2 = -10000;
  }
  else if (10000 < iVar2) {
    iVar2 = 10000;
  }
  iVar1 = sfx_entry_start_playback((int)(&sfx_entry_table + (int)sfx_id * 0x84));
  (**(code **)(**(int **)(&DAT_004c84f4 + (iVar1 + (int)sfx_id * 0x21) * 4) + 0x40))
            (*(int **)(&DAT_004c84f4 + (iVar1 + (int)sfx_id * 0x21) * 4),iVar2);
  sfx_entry_set_volume((int)(&sfx_entry_table + (int)sfx_id * 0x84),_config_sfx_volume * sfx_id);
  return (float)extraout_ST0;
}



/* audio_update @ 0043d3f0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* updates sfx cooldowns, music streams, and mute fades */

void audio_update(void)

{
  float *pfVar1;
  undefined *entry;
  
  if (config_blob == '\0') {
    pfVar1 = (float *)&sfx_cooldown_table;
    do {
      if (0.0 < *pfVar1) {
        *pfVar1 = *pfVar1 - _DAT_0047ea48;
      }
      pfVar1 = pfVar1 + 1;
    } while ((int)pfVar1 < 0x4c3e80);
    if (sfx_unmuted_flag != '\0') {
      entry = &music_entry_table;
      do {
        if (*(int *)(entry + 0x74) != 0) {
          music_stream_update((int)entry);
        }
        entry = entry + 0x84;
      } while ((int)entry < 0x4c8450);
      sfx_update_mute_fades();
    }
  }
  return;
}



/* sfx_play_exclusive @ 0043d460 */

/* mutes other sfx ids and ensures the chosen id is audible */

void __cdecl sfx_play_exclusive(int sfx_id)

{
  float fVar1;
  int iVar2;
  int iVar3;
  
  if (((sfx_unmuted_flag != '\0') && (config_music_disabled == '\0')) && (config_blob == '\0')) {
    if (DAT_004824d1 == '\0') {
      if (sfx_id == music_track_extra_0) {
        if (DAT_004cc8d4 != '\0') {
          return;
        }
        if (DAT_004cc8d0 == 0) {
          return;
        }
        iVar2 = _rand();
        DAT_004cc8d4 = '\x01';
        sfx_id = *(int *)(&music_playlist + (iVar2 % DAT_004cc8d0) * 4);
      }
      else {
        DAT_004cc8d4 = '\0';
      }
    }
    iVar2 = 0;
    do {
      if ((iVar2 != sfx_id) && (iVar3 = sfx_is_unmuted(iVar2), (char)iVar3 != '\0')) {
        sfx_mute_all(iVar2);
      }
      iVar2 = iVar2 + 1;
    } while (iVar2 < 0x80);
    if ((float)(&sfx_volume_table)[sfx_id] <= 0.0) {
      sfx_entry_start_playback((int)(&music_entry_table + sfx_id * 0x84));
      sfx_entry_set_volume((int)(&music_entry_table + sfx_id * 0x84),config_music_volume);
      fVar1 = config_music_volume;
      *(undefined1 *)((int)&sfx_mute_flags + sfx_id) = 0;
      (&sfx_volume_table)[sfx_id] = fVar1;
    }
  }
  return;
}



/* sfx_mute_all @ 0043d550 */

/* mutes all unmuted sfx ids (recursive) */

void __cdecl sfx_mute_all(int sfx_id)

{
  int iVar1;
  int sfx_id_00;
  
  if (((sfx_unmuted_flag != '\0') && (config_music_disabled == '\0')) && (config_blob == '\0')) {
    DAT_004cc8d4 = 0;
    sfx_id_00 = 0;
    do {
      if (sfx_id_00 != sfx_id) {
        iVar1 = sfx_is_unmuted(sfx_id_00);
        if ((char)iVar1 != '\0') {
          sfx_mute_all(sfx_id_00);
        }
      }
      sfx_id_00 = sfx_id_00 + 1;
    } while (sfx_id_00 < 0x80);
    *(undefined1 *)((int)&sfx_mute_flags + sfx_id) = 1;
  }
  return;
}



/* sfx_update_mute_fades @ 0043d5b0 */

/* ramps volume up/down based on mute flags */

void sfx_update_mute_fades(void)

{
  float fVar1;
  int iVar2;
  undefined *entry;
  float *pfVar3;
  float volume;
  byte abStack_4 [4];
  
  if ((DAT_004aaf84 == '\0') && (sfx_unmuted_flag != '\0')) {
    iVar2 = 0;
    pfVar3 = (float *)&sfx_volume_table;
    entry = &music_entry_table;
    do {
      if (*(int *)(entry + 0x74) != 0) {
        if (0.0 < config_music_volume) {
          if (*(char *)((int)&sfx_mute_flags + iVar2) == '\0') {
            (**(code **)(**(int **)(entry + 0x24) + 0x24))(*(int **)(entry + 0x24),abStack_4);
            if ((abStack_4[0] & 1) == 0) {
              console_printf(&console_log_queue,(byte *)s_SND__detected_unsilenced_hearabl_00478610)
              ;
              sfx_entry_resume((int)entry);
            }
            goto LAB_0043d63c;
          }
        }
        else {
          (**(code **)(**(int **)(entry + 0x24) + 0x48))(*(int **)(entry + 0x24));
LAB_0043d63c:
          fVar1 = config_music_volume;
          if (*(char *)((int)&sfx_mute_flags + iVar2) == '\0') {
            if (config_music_volume <= *pfVar3) {
              if (*pfVar3 <= config_music_volume) goto LAB_0043d709;
              *pfVar3 = config_music_volume;
LAB_0043d6ff:
              volume = fVar1;
            }
            else {
              volume = frame_dt + *pfVar3;
              *pfVar3 = volume;
              fVar1 = config_music_volume;
              if (config_music_volume <= volume) goto LAB_0043d6ff;
            }
            sfx_entry_set_volume((int)entry,volume);
            goto LAB_0043d709;
          }
        }
        if (0.0 < *pfVar3) {
          fVar1 = *pfVar3 - frame_dt * 0.5;
          *pfVar3 = fVar1;
          if (0.0 < fVar1) {
            sfx_entry_set_volume((int)entry,fVar1);
          }
          else {
            sfx_entry_stop((int)entry);
          }
        }
        if (*pfVar3 < 0.0) {
          *pfVar3 = 0.0;
        }
      }
LAB_0043d709:
      entry = entry + 0x84;
      iVar2 = iVar2 + 1;
      pfVar3 = pfVar3 + 1;
    } while ((int)entry < 0x4c8450);
  }
  return;
}



/* audio_suspend_channels @ 0043d730 */

/* iterates channels and suspends playback */

void audio_suspend_channels(void)

{
  undefined *entry;
  
  if (((sfx_unmuted_flag != '\0') && (config_music_disabled == '\0')) && (config_blob == '\0')) {
    entry = &music_entry_table;
    do {
      sfx_entry_stop((int)entry);
      entry = entry + 0x84;
    } while ((int)entry < 0x4c8450);
  }
  return;
}



/* audio_resume_channels @ 0043d770 */

/* iterates channels and resumes playback */

void audio_resume_channels(void)

{
  undefined *entry;
  int iVar1;
  
  if (((sfx_unmuted_flag != '\0') && (config_music_disabled == '\0')) && (config_blob == '\0')) {
    iVar1 = 0;
    entry = &music_entry_table;
    do {
      if (*(char *)((int)&sfx_mute_flags + iVar1) == '\0') {
        sfx_entry_resume((int)entry);
      }
      entry = entry + 0x84;
      iVar1 = iVar1 + 1;
    } while ((int)entry < 0x4c8450);
  }
  return;
}



/* sfx_is_unmuted @ 0043d7c0 */

/* returns nonzero when sfx id is not muted */

int __cdecl sfx_is_unmuted(int sfx_id)

{
  uint in_EAX;
  
  if (sfx_unmuted_flag == '\0') {
    return in_EAX & 0xffffff00;
  }
  return (uint)(*(char *)((int)&sfx_mute_flags + sfx_id) == '\0');
}



/* ui_focus_set @ 0043d7e0 */

/* sets the active focus candidate; optionally resets the focus timer */

void __cdecl ui_focus_set(int id,char reset_timer)

{
  int iVar1;
  int iVar2;
  int *piVar3;
  
  iVar1 = DAT_004d11e4;
  if ((&ui_focus_candidates)[DAT_004d11e4] != id) {
    if (reset_timer != '\0') {
      DAT_004d11ec = 1000;
    }
    iVar2 = 0;
    if (0 < DAT_004d11e0) {
      piVar3 = &ui_focus_candidates;
      while (iVar1 = iVar2, *piVar3 != id) {
        iVar2 = iVar2 + 1;
        piVar3 = piVar3 + 1;
        if (DAT_004d11e0 <= iVar2) {
          return;
        }
      }
    }
  }
  DAT_004d11e4 = iVar1;
  return;
}



/* ui_focus_update @ 0043d830 */

/* handles menu focus navigation and returns 1 when the given id is focused */

int __cdecl ui_focus_update(int id)

{
  int iVar1;
  char cVar2;
  
  iVar1 = (&ui_focus_candidates)[DAT_004d11e4];
  if (DAT_004d11e8 == DAT_00480848) {
    if (0x1f < DAT_004d11e0) {
      DAT_004d11e0 = 0x1f;
    }
    (&ui_focus_candidates)[DAT_004d11e0] = id;
    DAT_004d11e0 = DAT_004d11e0 + 1;
    return CONCAT31((int3)((uint)DAT_004d11e0 >> 8),id == iVar1);
  }
  DAT_004d11ec = DAT_004d11ec - frame_dt_ms;
  if (DAT_004d11ec < 0) {
    DAT_004d11ec = 0;
  }
  if ((DAT_004871ca == '\0') &&
     (cVar2 = (**(code **)(*grim_interface_ptr + 0x48))(0xf), cVar2 != '\0')) {
    cVar2 = (**(code **)(*grim_interface_ptr + 0x44))(0x2a);
    if ((cVar2 == '\0') && (cVar2 = (**(code **)(*grim_interface_ptr + 0x44))(0x36), cVar2 == '\0'))
    {
      DAT_004d11e4 = DAT_004d11e4 + 1;
    }
    else {
      DAT_004d11e4 = DAT_004d11e4 + -1;
    }
    DAT_004d11ec = 1000;
  }
  if (DAT_004d11e4 < 0) {
    DAT_004d11e4 = DAT_004d11e0 + -1;
  }
  if (DAT_004d11e0 + -1 < DAT_004d11e4) {
    DAT_004d11e4 = 0;
  }
  DAT_004d11e8 = DAT_00480848;
  ui_focus_candidates = id;
  DAT_004d11e0 = 1;
  return (uint)(id == iVar1);
}



/* ui_focus_draw @ 0043d940 */

/* draws the focus highlight for the active menu item */

void __cdecl ui_focus_draw(float *xy)

{
  float local_18;
  float local_14;
  undefined4 local_10;
  undefined4 local_c;
  undefined4 local_8;
  float local_4;
  
  local_10 = 0x3f4ccccd;
  local_4 = (float)DAT_004d11ec * 0.00080000004;
  local_c = 0x3f4ccccd;
  local_8 = 0x3f19999a;
  local_18 = *xy;
  local_14 = xy[1] + 4.0;
  (**(code **)(*grim_interface_ptr + 0xd0))(&local_18,0x40c00000,0x40c00000,&local_10);
  return;
}



/* FUN_0043d9b0 @ 0043d9b0 */

void __cdecl FUN_0043d9b0(float *param_1,int *param_2)

{
  float fVar1;
  char cVar2;
  int iVar3;
  int iVar4;
  bool bVar5;
  longlong lVar6;
  float fVar7;
  float fVar8;
  float local_10;
  float local_c;
  float local_8;
  
  iVar3 = ui_focus_update((int)param_2);
  local_8 = *param_1;
  local_10 = *param_1 - 3.0;
  fVar1 = param_1[1];
  local_c = param_1[1] - 1.0;
  lVar6 = __ftol();
  iVar4 = ui_mouse_inside_rect(&local_10,0x12,(int)lVar6);
  bVar5 = (char)iVar4 != '\0';
  if (bVar5) {
    ui_focus_set((int)param_2,'\0');
  }
  if ((char)iVar3 != '\0') {
    local_10 = *param_1 - 16.0;
    local_c = param_1[1];
    ui_focus_draw(&local_10);
    if ((char)param_2[3] != '\0') {
      cVar2 = (**(code **)(*grim_interface_ptr + 0x48))(0xcd);
      if (cVar2 != '\0') {
        iVar3 = *param_2;
        *param_2 = iVar3 + 1;
        if (param_2[1] < iVar3 + 1) {
          *param_2 = param_2[1];
        }
      }
      cVar2 = (**(code **)(*grim_interface_ptr + 0x48))(0xcb);
      if ((cVar2 != '\0') && (iVar3 = *param_2, *param_2 = iVar3 + -1, iVar3 + -1 < 0)) {
        *param_2 = 0;
      }
    }
  }
  if (bVar5) {
    iVar3 = input_primary_is_down();
    if (((char)iVar3 != '\0') && ((char)param_2[3] != '\0')) {
      lVar6 = __ftol();
      *param_2 = (int)lVar6;
      if ((int)lVar6 < param_2[2]) {
        *param_2 = param_2[2];
      }
      if (param_2[1] < *param_2) {
        *param_2 = param_2[1];
      }
    }
  }
  if (DAT_00478668 == -1) {
    DAT_00478668 = (**(code **)(*grim_interface_ptr + 0xc0))(s_ui_rectOn_004743f4);
  }
  if (DAT_0047866c == -1) {
    DAT_0047866c = (**(code **)(*grim_interface_ptr + 0xc0))(s_ui_rectOff_00474414);
  }
  (**(code **)(*grim_interface_ptr + 0xc4))(DAT_0047866c,0);
  (**(code **)(*grim_interface_ptr + 0xe8))();
  fVar8 = 1.0;
  (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,0x3f000000);
  fVar7 = 0.0;
  (**(code **)(*grim_interface_ptr + 0x100))(0,0,0x3f800000,0x3f800000);
  iVar3 = 0;
  if (0 < param_2[1]) {
    iVar4 = 0;
    do {
      (**(code **)(*grim_interface_ptr + 0x11c))((float)iVar4 + fVar8,fVar1,0x41000000,0x41800000);
      iVar3 = iVar3 + 1;
      iVar4 = iVar4 + 8;
    } while (iVar3 < param_2[1]);
  }
  (**(code **)(*grim_interface_ptr + 0xf0))();
  if (0 < *param_2) {
    (**(code **)(*grim_interface_ptr + 0xc4))(DAT_00478668,0);
    (**(code **)(*grim_interface_ptr + 0xe8))();
    (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,0x3f800000);
    iVar3 = 0;
    if (0 < *param_2) {
      iVar4 = 0;
      do {
        (**(code **)(*grim_interface_ptr + 0x11c))((float)iVar4 + fVar7,fVar1,0x41000000,0x41800000)
        ;
        iVar3 = iVar3 + 1;
        iVar4 = iVar4 + 8;
      } while (iVar3 < *param_2);
    }
    (**(code **)(*grim_interface_ptr + 0xf0))();
  }
  return;
}



/* FUN_0043dc80 @ 0043dc80 */

undefined4 __cdecl FUN_0043dc80(float *param_1,char *param_2)

{
  char cVar1;
  int iVar2;
  int iVar3;
  undefined4 uVar4;
  char unaff_SI;
  char *pcVar5;
  float fStack_8;
  float fStack_4;
  
  iVar2 = ui_focus_update((int)param_2);
  param_2[2] = '\0';
  if (*(int *)(param_2 + 4) == 0) {
    iVar3 = ui_mouse_inside_rect(param_1,0x10,0x10);
    cVar1 = (char)iVar3;
  }
  else {
    iVar3 = (**(code **)(*grim_interface_ptr + 0x14c))(*(int *)(param_2 + 4));
    iVar3 = ui_mouse_inside_rect(param_1,0x10,iVar3 + 0x16);
    cVar1 = (char)iVar3;
  }
  if (cVar1 != '\0') {
    param_2[2] = '\x01';
  }
  if (param_2[1] != '\0') {
    param_2[2] = '\0';
  }
  if (param_2[2] != '\0') {
    ui_focus_set((int)param_2,'\0');
  }
  if ((char)iVar2 != '\0') {
    fStack_8 = *param_1 - 16.0;
    fStack_4 = param_1[1];
    ui_focus_draw(&fStack_8);
  }
  (**(code **)(*grim_interface_ptr + 0x100))(0,0,0x3f800000,0x3f800000);
  iVar2 = *grim_interface_ptr;
  if (*param_2 == '\0') {
    pcVar5 = s_ui_checkOff_00474434;
  }
  else {
    pcVar5 = s_ui_checkOn_00474454;
  }
  uVar4 = (**(code **)(iVar2 + 0xc0))(pcVar5,0);
  (**(code **)(iVar2 + 0xc4))(uVar4);
  if ((DAT_004871ca == '\0') &&
     (((unaff_SI != '\0' && (cVar1 = (**(code **)(*grim_interface_ptr + 0x48))(0x1c), cVar1 != '\0')
       ) || ((param_2[2] != '\0' && (iVar2 = input_primary_just_pressed(), (char)iVar2 != '\0'))))))
  {
    *param_2 = *param_2 == '\0';
  }
  (**(code **)(*grim_interface_ptr + 0x20))(0x15,1);
  (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,0x3f800000);
  (**(code **)(*grim_interface_ptr + 0xe8))();
  (**(code **)(*grim_interface_ptr + 0xfc))(0);
  (**(code **)(*grim_interface_ptr + 0x11c))(*param_1,param_1[1],0x41800000,0x41800000);
  (**(code **)(*grim_interface_ptr + 0xf0))();
  (**(code **)(*grim_interface_ptr + 0x20))(0x15,2);
  (**(code **)(*grim_interface_ptr + 0x20))(0x18,0x3f000000);
  if (param_2[2] == '\0') {
    uVar4 = (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000);
  }
  else {
    uVar4 = (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000);
  }
  if (*(int *)(param_2 + 4) != 0) {
    uVar4 = (**(code **)(*grim_interface_ptr + 0x144))
                      (*param_1 + 22.0,param_1[1] + 1.0,*(int *)(param_2 + 4));
  }
  return CONCAT31((int3)((uint)uVar4 >> 8),0x3f);
}



/* FUN_0043def0 @ 0043def0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __cdecl FUN_0043def0(float *param_1,float *param_2)

{
  float fVar1;
  float fVar2;
  char cVar3;
  int iVar4;
  uint uVar5;
  char *pcVar6;
  float unaff_ESI;
  char *pcVar7;
  float10 fVar8;
  float10 extraout_ST0;
  longlong lVar9;
  float *pfStack_68;
  float *pfStack_64;
  float *pfStack_60;
  float fStack_5c;
  float fStack_58;
  float *pfVar10;
  float fVar11;
  float fStack_40;
  float fStack_3c;
  undefined4 uStack_38;
  float fStack_34;
  float local_30;
  float local_2c;
  undefined4 local_28;
  float local_24;
  float fStack_20;
  undefined4 uStack_1c;
  undefined4 uStack_18;
  undefined4 uStack_14;
  float fStack_8;
  
  lVar9 = __ftol();
  *param_1 = (float)(int)lVar9;
  lVar9 = __ftol();
  param_1[1] = (float)(int)lVar9;
  param_2[1] = -NAN;
  fStack_58 = 6.233043e-39;
  iVar4 = ui_focus_update((int)param_2);
  if ((char)iVar4 != '\0') {
    local_30 = *param_1 - 16.0;
    local_2c = param_1[1];
    fStack_58 = 6.233099e-39;
    ui_focus_draw(&local_30);
  }
  fVar1 = (float)((int)param_2[3] * 0x10 + 4);
  local_30 = 1.0;
  local_2c = 1.0;
  local_28 = 0x3f800000;
  local_24 = 1.0;
  fStack_5c = 250.0;
  pfStack_60 = param_1;
  pfStack_64 = (float *)0x43dfae;
  fStack_58 = fVar1;
  (**(code **)(*grim_interface_ptr + 0xd0))();
  fStack_40 = *param_1 + 1.0;
  pfStack_64 = &fStack_20;
  fStack_20 = 0.0;
  fStack_3c = param_1[1] + 1.0;
  uStack_1c = 0;
  uStack_18 = 0;
  uStack_14 = 0x3f800000;
  pfVar10 = (float *)(fStack_8 - 2.0);
  pfStack_68 = pfVar10;
  (**(code **)(*grim_interface_ptr + 0xd0))(&fStack_40,0x43780000);
  if ((int)param_2[3] < (int)param_2[0xd]) {
    pfVar10 = (float *)(*param_1 + 240.0);
    local_30 = 1.0;
    unaff_ESI = param_1[1];
    local_2c = 1.0;
    local_28 = 0x3f800000;
    local_24 = 0.8;
    (**(code **)(*grim_interface_ptr + 0xd0))(&stack0xffffffb0,0x3f800000,fVar1,&local_30);
  }
  fVar8 = (float10)(**(code **)(*grim_interface_ptr + 0x60))();
  if ((float10)0.0 < fVar8) {
    *param_2 = *param_2 - 1.0;
  }
  fVar8 = (float10)(**(code **)(*grim_interface_ptr + 0x60))();
  if (fVar8 < (float10)0.0) {
    *param_2 = *param_2 + 1.0;
  }
  if ((char)uStack_1c != '\0') {
    cVar3 = (**(code **)(*grim_interface_ptr + 0x48))(200);
    if (cVar3 != '\0') {
      *param_2 = *param_2 - 1.0;
    }
    cVar3 = (**(code **)(*grim_interface_ptr + 0x48))(0xd0);
    if (cVar3 != '\0') {
      *param_2 = *param_2 + 1.0;
    }
  }
  cVar3 = (**(code **)(*grim_interface_ptr + 0x48))(0xc9);
  if (cVar3 != '\0') {
    fStack_20 = (float)((int)param_2[3] + -1);
    *param_2 = *param_2 - (float)(int)fStack_20;
  }
  cVar3 = (**(code **)(*grim_interface_ptr + 0x48))(0xd1);
  if (cVar3 != '\0') {
    *param_2 = (float)((int)param_2[3] + -1) + *param_2;
  }
  fVar1 = param_2[0xd];
  fVar11 = param_2[3];
  fStack_5c = (float)((int)fVar1 - (int)fVar11);
  if ((float)(int)fStack_5c < *param_2) {
    *param_2 = (float)(int)fStack_5c;
  }
  if (*param_2 < 0.0) {
    *param_2 = 0.0;
  }
  pfStack_60 = (float *)fVar11;
  local_24 = fVar1;
  lVar9 = __ftol();
  fStack_5c = (float)lVar9;
  local_24 = ((float)(int)pfStack_60 / (float)(int)local_24) * (float)pfStack_68;
  if ((float)pfStack_68 < local_24) {
    local_24 = fStack_20 - 3.0;
  }
  fStack_40 = *param_1 + 241.0;
  fStack_3c = (float)(((((float10)fStack_20 - (float10)3.0) - (float10)local_24) / extraout_ST0) *
                      (float10)(int)fStack_5c + (float10)1.0 + (float10)param_1[1]);
  if ((int)fVar11 < (int)fVar1) {
    uStack_38 = 0x3f800000;
    fStack_34 = 1.0;
    local_30 = 1.0;
    local_2c = 0.8;
    (**(code **)(*grim_interface_ptr + 0xd0))(&fStack_40,0x41000000,local_24 + 1.0,&uStack_38);
    pfStack_68 = (float *)(*param_1 + 240.0);
    iVar4 = 10;
    pfStack_64 = (float *)param_1[1];
    lVar9 = __ftol();
    iVar4 = ui_mouse_inside_rect((float *)&pfStack_68,(int)lVar9,iVar4);
    if ((char)iVar4 == '\0') {
      pfStack_68 = (float *)((float)pfVar10 + 1.0);
      pfStack_64 = (float *)(unaff_ESI + 1.0);
      fStack_40 = 0.4;
      fStack_3c = 1.0;
      (**(code **)(*grim_interface_ptr + 0xd0))
                (&pfStack_68,0x40c00000,fStack_34 - 1.0,&stack0xffffffb8);
      iVar4 = input_primary_is_down();
      if ((char)iVar4 == '\0') {
        DAT_004d11fa = '\0';
        goto LAB_0043e37f;
      }
    }
    else {
      pfStack_68 = (float *)((float)pfVar10 + 1.0);
      pfStack_64 = (float *)(unaff_ESI + 1.0);
      fStack_40 = 0.8;
      fStack_3c = 1.0;
      (**(code **)(*grim_interface_ptr + 0xd0))
                (&pfStack_68,0x40c00000,fStack_34 - 1.0,&stack0xffffffb8);
      DAT_004d11fa = '\x01';
      iVar4 = input_primary_just_pressed();
      if ((char)iVar4 != '\0') {
        iVar4 = 8;
        lVar9 = __ftol();
        iVar4 = ui_mouse_inside_rect(&fStack_40,(int)lVar9,iVar4);
        if ((char)iVar4 == '\0') {
          _DAT_004d11fc = 0.0;
        }
        else {
          _DAT_004d11fc =
               (ui_mouse_y - param_1[1]) - (*param_2 / (float)(int)param_2[0xd]) * fStack_20;
        }
      }
    }
    if ((DAT_004d11fa != '\0') && (iVar4 = input_primary_is_down(), (char)iVar4 != '\0')) {
      fVar1 = (((ui_mouse_y - param_1[1]) - _DAT_004d11fc) / fStack_20) * (float)(int)param_2[0xd];
      *param_2 = fVar1;
      local_24 = (float)((int)param_2[0xd] - (int)param_2[3]);
      if (local_24 < fVar1) {
        *param_2 = local_24;
      }
      if (*param_2 < 0.0) {
        *param_2 = 0.0;
      }
    }
  }
LAB_0043e37f:
  fVar1 = *param_1;
  fVar11 = param_1[1];
  pfStack_64 = (float *)0x0;
  if (0 < (int)param_2[3]) {
    pfStack_60 = (float *)((int)fStack_5c * 4);
    do {
      fVar2 = fStack_5c;
      if ((int)param_2[0xd] <= (int)pfStack_64) {
        return;
      }
      iVar4 = ui_mouse_inside_rect((float *)&stack0xffffffb8,0x11,0xf0);
      if ((char)iVar4 == '\0') {
        local_24 = 0.9;
        if (param_2[2] != fVar2) {
          local_24 = 0.7;
        }
      }
      else {
        local_24 = 1.0;
        param_2[1] = fVar2;
        iVar4 = input_primary_just_pressed();
        if ((char)iVar4 != '\0') {
          param_2[2] = fVar2;
        }
      }
      pcVar6 = *(char **)((int)param_2[0xc] + (int)pfStack_60);
      if (*pcVar6 == '\\') {
        if (pcVar6[1] == 'g') {
          (**(code **)(*grim_interface_ptr + 0x114))(0x3f333333,0x3f800000,0x3f333333,local_24);
          pcVar6 = pcVar6 + 2;
        }
      }
      else {
        (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,local_24);
      }
      uVar5 = 0xffffffff;
      iVar4 = 0;
      pcVar7 = pcVar6;
      do {
        if (uVar5 == 0) break;
        uVar5 = uVar5 - 1;
        cVar3 = *pcVar7;
        pcVar7 = pcVar7 + 1;
      } while (cVar3 != '\0');
      uVar5 = ~uVar5;
      fStack_20 = 0.0;
      if (0 < (int)uVar5) {
        pfStack_68 = param_2 + 4;
        do {
          if ((pcVar6[iVar4] == '\t') || (pcVar6[iVar4] == '\0')) {
            pcVar6[iVar4] = '\0';
            fStack_58 = (float)((int)*pfStack_68 * (int)fStack_20);
            (**(code **)(*grim_interface_ptr + 0x144))
                      ((float)(int)fStack_58 + (fVar1 - 2.0) + 8.0,fVar11 + 2.0,pcVar6);
            fStack_20 = (float)((int)fStack_20 + 1);
            pfStack_68 = pfStack_68 + 1;
            pcVar6 = pcVar6 + iVar4 + 1;
            uVar5 = uVar5 - (iVar4 + 1);
            iVar4 = 0;
          }
          iVar4 = iVar4 + 1;
        } while (iVar4 < (int)uVar5);
      }
      fVar11 = fVar11 + 16.0;
      pfStack_64 = (float *)((int)pfStack_64 + 1);
      pfStack_60 = (float *)((int)pfStack_60 + 4);
      fStack_5c = (float)((int)fStack_5c + 1);
    } while ((int)pfStack_64 < (int)param_2[3]);
  }
  return;
}



/* FUN_0043e5e0 @ 0043e5e0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

undefined1 __cdecl FUN_0043e5e0(float *param_1,undefined4 *param_2)

{
  char cVar1;
  int iVar2;
  int iVar3;
  longlong lVar4;
  undefined4 unaff_retaddr;
  float local_8;
  float local_4;
  
  iVar2 = ui_focus_update((int)param_2);
  if ((DAT_004cc910 & 1) == 0) {
    DAT_004cc910 = DAT_004cc910 | 1;
    _DAT_004ccd40 = 0x3e8c8c8d;
    _DAT_004ccd44 = 0x3f34b4b5;
    _DAT_004ccd48 = 0x3f70f0f1;
    _DAT_004ccd4c = 0x3f19999a;
    crt_atexit(&DAT_0043e820);
  }
  if ((DAT_004cc910 & 2) == 0) {
    DAT_004cc910 = DAT_004cc910 | 2;
    _DAT_004d0e28 = 0x3e8c8c8d;
    _DAT_004d0e2c = 0x3f34b4b5;
    _DAT_004d0e30 = 0x3f70f0f1;
    _DAT_004d0e34 = 0x3f800000;
    crt_atexit(&DAT_0043e810);
  }
  if ((char)iVar2 != '\0') {
    local_8 = *param_1 - 16.0;
    local_4 = param_1[1];
    ui_focus_draw(&local_8);
  }
  (**(code **)(*grim_interface_ptr + 0x14c))(*param_2);
  lVar4 = __ftol();
  iVar3 = ui_mouse_inside_rect(param_1,0x10,(int)lVar4);
  *(char *)(param_2 + 1) = (char)iVar3;
  if ((char)iVar3 == '\0') {
    (**(code **)(*grim_interface_ptr + 0x110))(&DAT_004ccd40);
  }
  else {
    ui_focus_set((int)param_2,'\0');
    (**(code **)(*grim_interface_ptr + 0x110))(&DAT_004d0e28);
  }
  (**(code **)(*grim_interface_ptr + 0x148))
            (grim_interface_ptr,*param_1,param_1[1],&DAT_00471fc4,*param_2);
  (**(code **)(*grim_interface_ptr + 0xe8))();
  (**(code **)(*grim_interface_ptr + 0xd4))(&stack0xfffffff0,unaff_retaddr,0x3f800000);
  (**(code **)(*grim_interface_ptr + 0xf0))();
  if (*(char *)((int)param_2 + 6) == '\0') {
    *(undefined1 *)((int)param_2 + 5) = 0;
  }
  else if (((char)iVar2 == '\0') ||
          ((cVar1 = (**(code **)(*grim_interface_ptr + 0x48))(0x1c), cVar1 == '\0' &&
           ((*(char *)(param_2 + 1) == '\0' ||
            (iVar2 = input_primary_just_pressed(), (char)iVar2 == '\0')))))) {
    *(undefined1 *)((int)param_2 + 5) = 0;
  }
  else {
    *(undefined1 *)((int)param_2 + 5) = 1;
  }
  if (*(char *)((int)param_2 + 5) != '\0') {
    sfx_play(sfx_ui_buttonclick);
  }
  return *(undefined1 *)((int)param_2 + 5);
}



/* ui_button_update @ 0043e830 */

/* draws a UI button, updates hover/press state, and returns 1 when activated */

int __cdecl ui_button_update(float *xy,int *button)

{
  float fVar1;
  char cVar2;
  int iVar3;
  int iVar4;
  undefined3 uVar5;
  longlong lVar6;
  float fVar7;
  char cStack_84;
  undefined4 uVar8;
  float fStack_1c;
  float local_18;
  float local_14;
  float fStack_10;
  float fStack_c;
  float fStack_8;
  
  iVar3 = ui_focus_update((int)button);
  if ((char)iVar3 != '\0') {
    local_18 = *xy - 16.0;
    local_14 = xy[1];
    ui_focus_draw(&local_18);
  }
  iVar3 = (**(code **)(*grim_interface_ptr + 0x14c))(*button);
  if (DAT_00478670 == -1) {
    DAT_00478670 = (**(code **)(*grim_interface_ptr + 0xc0))(s_ui_buttonSm_00474498);
  }
  if (DAT_00478674 == -1) {
    DAT_00478674 = (**(code **)(*grim_interface_ptr + 0xc0))(s_ui_buttonMd_00474474);
  }
  if (((float)iVar3 < 40.0) || (fVar7 = 145.0, (char)button[5] != '\0')) {
    fVar7 = 82.0;
  }
  if (*(char *)((int)button + 0x15) != '\0') {
    fVar7 = 145.0;
  }
  xy[1] = xy[1] + 2.0;
  lVar6 = __ftol();
  iVar4 = ui_mouse_inside_rect(xy,0x1c,(int)lVar6);
  *(char *)(button + 1) = (char)iVar4;
  xy[1] = xy[1] - 2.0;
  if ((char)button[1] != '\0') {
    ui_focus_set((int)button,'\0');
  }
  if ((*(char *)((int)button + 6) == '\0') ||
     (((char)button[1] == '\0' && (((char)xy == '\0' || (DAT_004d11ec < 0x321)))))) {
    iVar4 = button[2] + frame_dt_ms * -4;
  }
  else {
    iVar4 = button[2] + frame_dt_ms * 6;
  }
  button[2] = iVar4;
  if (0 < button[3]) {
    button[3] = button[3] + frame_dt_ms * -6;
  }
  if (button[3] < 0) {
    button[3] = 0;
  }
  if (button[2] < 0) {
    button[2] = 0;
  }
  else if (1000 < button[2]) {
    button[2] = 1000;
  }
  fStack_10 = 0.5;
  fStack_c = 0.7;
  fStack_8 = 0.0;
  if (0 < button[3]) {
    fVar1 = (float)button[3];
    fStack_10 = fVar1 * 0.0005 + 0.5;
    fStack_c = fVar1 * 0.00070000003 + 0.7;
    if (1.0 < fStack_10) {
      fStack_10 = 1.0;
    }
    if (1.0 < fStack_c) {
      fStack_c = 1.0;
    }
  }
  fStack_1c = (float)button[2];
  local_14 = fStack_10;
  if (0 < (int)fStack_1c) {
    fStack_8 = (float)(int)fStack_1c * 0.001 * (float)button[4];
    fStack_1c = *xy + 12.0;
    local_18 = xy[1] + 5.0;
    (**(code **)(*grim_interface_ptr + 0xd0))(&fStack_1c,fVar7 - 24.0,0x41b00000,&local_14);
  }
  if (((float)iVar3 < 40.0) || ((char)button[5] != '\0')) {
    iVar3 = *grim_interface_ptr;
    iVar4 = DAT_00478670;
  }
  else {
    iVar3 = *grim_interface_ptr;
    iVar4 = DAT_00478674;
  }
  (**(code **)(iVar3 + 0xc4))(iVar4,0);
  if (*(char *)((int)button + 0x15) != '\0') {
    (**(code **)(*grim_interface_ptr + 0xc4))(DAT_00478674,0);
  }
  uVar8 = 0x3f800000;
  (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,button[4]);
  (**(code **)(*grim_interface_ptr + 0x20))(0x15,1);
  (**(code **)(*grim_interface_ptr + 0x100))(0,0,0x3f800000,0x3f800000);
  (**(code **)(*grim_interface_ptr + 0xe8))();
  (**(code **)(*grim_interface_ptr + 0x11c))(*xy,xy[1],uVar8,0x42000000);
  (**(code **)(*grim_interface_ptr + 0xf0))();
  (**(code **)(*grim_interface_ptr + 0x20))(0x15,2);
  (**(code **)(*grim_interface_ptr + 0x20))(0x18,0x3f000000);
  if ((char)button[1] == '\0') {
    fVar7 = (float)button[4] * 0.7;
  }
  else {
    fVar7 = (float)button[4];
  }
  (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,fVar7);
  iVar3 = *grim_interface_ptr;
  iVar4 = (**(code **)(iVar3 + 0x14c))(*button,xy[1] + 10.0,&DAT_00471fc4,*button);
  uVar8 = (**(code **)(iVar3 + 0x148))(grim_interface_ptr,(fVar7 - (float)(iVar4 / 2)) + 1.0);
  uVar5 = (undefined3)((uint)uVar8 >> 8);
  if (*(char *)((int)button + 6) == '\0') {
    *(undefined1 *)((int)button + 5) = 0;
  }
  else if ((cStack_84 == '\0') ||
          ((cVar2 = (**(code **)(*grim_interface_ptr + 0x48))(0x1c), cVar2 == '\0' &&
           (((char)button[1] == '\0' || (iVar3 = input_primary_just_pressed(), (char)iVar3 == '\0'))
           )))) {
    uVar5 = 0;
    *(undefined1 *)((int)button + 5) = 0;
  }
  else {
    uVar5 = 0;
    *(undefined1 *)((int)button + 5) = 1;
  }
  iVar3 = CONCAT31(uVar5,*(char *)((int)button + 5));
  if (*(char *)((int)button + 5) != '\0') {
    button[3] = 1000;
    iVar3 = sfx_play(sfx_ui_buttonclick);
  }
  return CONCAT31((int3)((uint)iVar3 >> 8),*(undefined1 *)((int)button + 5));
}



/* ui_text_input_update @ 0043ecf0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* updates a text input field: focus, input polling, sfx, and rendering */

int __cdecl ui_text_input_update(float *xy,int *input_state)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  undefined4 uVar4;
  float10 fVar5;
  longlong lVar6;
  undefined1 uVar7;
  float fStack_80;
  float fStack_7c;
  int iStack_78;
  undefined4 uStack_74;
  undefined4 uStack_70;
  int iStack_64;
  undefined1 *puStack_60;
  float fStack_5c;
  undefined4 uStack_58;
  undefined1 *puStack_54;
  float *pfStack_50;
  undefined4 uStack_4c;
  undefined4 uStack_48;
  int iStack_44;
  float fStack_40;
  float fStack_1c;
  float local_18;
  float local_14;
  undefined4 uStack_10;
  
  fStack_1c = (float)(uint)fStack_1c._0_3_;
  iVar1 = ui_focus_update((int)input_state);
  lVar6 = __ftol();
  fStack_40 = 6.238044e-39;
  iVar2 = ui_mouse_inside_rect(xy,0x12,(int)lVar6);
  if ((char)iVar2 != '\0') {
    ui_focus_set((int)input_state,'\0');
  }
  if ((char)iVar1 != '\0') {
    local_18 = *xy - 16.0;
    local_14 = xy[1];
    ui_focus_draw(&local_18);
  }
  *(undefined1 *)(*input_state + 1 + input_state[1]) = 0;
  iVar1 = console_input_poll();
  if (iVar1 == 0xd) {
    (**(code **)(*grim_interface_ptr + 0x48))();
    (**(code **)(*grim_interface_ptr + 0x48))();
    fStack_40 = 6.238218e-39;
    sfx_play(sfx_ui_typeenter);
  }
  else {
    (**(code **)(*grim_interface_ptr + 0x54))();
    if (iVar1 != 0) {
      uVar3 = _rand();
      uVar3 = uVar3 & 0x80000001;
      if ((int)uVar3 < 0) {
        uVar3 = (uVar3 - 1 | 0xfffffffe) + 1;
      }
      fStack_40 = 6.238303e-39;
      sfx_play(uVar3 + _sfx_ui_typeclick_01);
    }
  }
  fStack_40 = 1.0;
  iStack_44 = 0x3f800000;
  uStack_48 = 0x43edff;
  (**(code **)(*grim_interface_ptr + 0x114))();
  uStack_48 = 0x41900000;
  uStack_4c = uStack_10;
  pfStack_50 = xy;
  puStack_54 = (undefined1 *)0x43ee18;
  (**(code **)(*grim_interface_ptr + 0xd4))();
  puStack_54 = &stack0xffffffcc;
  uStack_58 = 0x41800000;
  fStack_5c = fStack_1c - 2.0;
  puStack_60 = &stack0xffffffc4;
  iStack_64 = 0x43ee7c;
  (**(code **)(*grim_interface_ptr + 0xd0))();
  uStack_74 = 0x18;
  uStack_70 = 0x3f000000;
  iStack_78 = 0x43ee94;
  (**(code **)(*grim_interface_ptr + 0x20))();
  iVar1 = 0;
  fStack_40 = (fStack_40 - 8.0) - 2.0;
  while( true ) {
    iStack_78 = *input_state + iVar1;
    fStack_7c = 6.238621e-39;
    iStack_44 = (**(code **)(*grim_interface_ptr + 0x14c))();
    if ((float)iStack_44 <= fStack_40) break;
    iVar1 = iVar1 + 1;
  }
  iStack_78 = 0x3f4ccccd;
  fStack_7c = 1.0;
  fStack_80 = 1.0;
  (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000);
  (**(code **)(*grim_interface_ptr + 0x148))
            (grim_interface_ptr,*xy + 4.0,xy[1] + 2.0,&DAT_00471fc4,*input_state + iVar1);
  pfStack_50 = (float *)0x3f800000;
  fVar5 = (float10)fsin((float10)_DAT_0047ea4c * (float10)4.0);
  if ((float10)0.0 < fVar5) {
    pfStack_50 = (float *)0x3ecccccd;
  }
  uVar7 = 0x3f;
  (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,pfStack_50);
  fStack_80 = (float)iStack_64 + *xy + 4.0;
  fStack_7c = xy[1] + 2.0;
  uVar4 = (**(code **)(*grim_interface_ptr + 0xd4))(&fStack_80,0x3f800000,0x41600000);
  return CONCAT31((int3)((uint)uVar4 >> 8),uVar7);
}



/* FUN_0043efc0 @ 0043efc0 */

undefined4 __cdecl FUN_0043efc0(float *param_1,char *param_2)

{
  float fVar1;
  float fVar2;
  char cVar3;
  int iVar4;
  int iVar5;
  undefined4 uVar6;
  int iVar7;
  undefined4 uVar8;
  int iVar9;
  longlong lVar10;
  char cStack_9c;
  float fStack_18;
  float fStack_14;
  undefined4 uStack_10;
  undefined4 uStack_c;
  undefined4 uStack_8;
  undefined4 uStack_4;
  
  iVar7 = 0;
  iVar4 = ui_focus_update((int)param_2);
  iVar9 = 0;
  if (0 < *(int *)(param_2 + 0x10)) {
    do {
      iVar5 = (**(code **)(*grim_interface_ptr + 0x14c))();
      if (iVar7 < iVar5) {
        iVar7 = iVar5;
      }
      iVar9 = iVar9 + 1;
    } while (iVar9 < *(int *)(param_2 + 0x10));
  }
  if (*param_2 == '\0') {
    param_2[0x14] = '\0';
    param_2[4] = '\0';
    param_2[5] = '\0';
    param_2[6] = '\0';
    param_2[7] = '\0';
  }
  else if (*(int *)(param_2 + 4) < 1) {
    param_2[0x14] = '\0';
  }
  else {
    lVar10 = __ftol();
    iVar7 = (int)lVar10;
    lVar10 = __ftol();
    iVar7 = ui_mouse_inside_rect(param_1,(int)lVar10,iVar7);
    param_2[0x14] = (char)iVar7;
  }
  if (param_2[0x14] != '\0') {
    ui_focus_set((int)param_2,'\0');
  }
  if ((char)iVar4 != '\0') {
    fStack_18 = *param_1 - 16.0;
    fStack_14 = param_1[1];
    ui_focus_draw(&fStack_18);
    cVar3 = (**(code **)(*grim_interface_ptr + 0x48))();
    if (cVar3 != '\0') {
      if (*(int *)(param_2 + 4) == 0) {
        param_2[4] = '\x01';
        param_2[5] = '\0';
        param_2[6] = '\0';
        param_2[7] = '\0';
      }
      else {
        iVar7 = *(int *)(param_2 + 0x18);
        *(int *)(param_2 + 0x18) = iVar7 + -1;
        if (iVar7 + -1 < 0) {
          param_2[0x18] = '\0';
          param_2[0x19] = '\0';
          param_2[0x1a] = '\0';
          param_2[0x1b] = '\0';
        }
      }
    }
    cVar3 = (**(code **)(*grim_interface_ptr + 0x48))();
    if (cVar3 != '\0') {
      if (*(int *)(param_2 + 4) == 0) {
        param_2[4] = '\x01';
        param_2[5] = '\0';
        param_2[6] = '\0';
        param_2[7] = '\0';
      }
      else {
        iVar7 = *(int *)(param_2 + 0x18);
        *(int *)(param_2 + 0x18) = iVar7 + 1;
        if (*(int *)(param_2 + 0x10) + -1 < iVar7 + 1) {
          *(int *)(param_2 + 0x18) = *(int *)(param_2 + 0x10) + -1;
        }
      }
    }
  }
  uStack_10 = 0x3f800000;
  uStack_c = 0x3f800000;
  uStack_8 = 0x3f800000;
  uStack_4 = 0x3f800000;
  (**(code **)(*grim_interface_ptr + 0xd0))();
  fStack_18 = 0.0;
  fStack_14 = 1.0;
  (**(code **)(*grim_interface_ptr + 0xd0))();
  if ((*(int *)(param_2 + 4) < 1) && (param_2[0x14] == '\0')) {
    iVar7 = *grim_interface_ptr;
  }
  else {
    (**(code **)(*grim_interface_ptr + 0xd0))();
    iVar7 = *grim_interface_ptr;
  }
  (**(code **)(iVar7 + 0xc0))();
  (**(code **)(iVar7 + 0xc4))();
  (**(code **)(*grim_interface_ptr + 0x20))();
  (**(code **)(*grim_interface_ptr + 0x114))();
  (**(code **)(*grim_interface_ptr + 0x100))();
  (**(code **)(*grim_interface_ptr + 0xe8))();
  fVar1 = *param_1;
  (**(code **)(*grim_interface_ptr + 0x11c))();
  (**(code **)(*grim_interface_ptr + 0xf0))();
  (**(code **)(*grim_interface_ptr + 0x20))();
  uVar8 = 0xfffffffe;
  if (*param_2 != '\0') {
    lVar10 = __ftol();
    uVar6 = FUN_00403430(param_1,0xe,(int)lVar10);
    if ((char)uVar6 != '\0') {
      uVar8 = 0xffffffff;
      (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000);
      goto LAB_0043f3aa;
    }
  }
  (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000);
LAB_0043f3aa:
  (**(code **)(*grim_interface_ptr + 0x148))
            (grim_interface_ptr,*param_1 + 4.0,param_1[1] + 1.0,&DAT_00471fc4,
             *(undefined4 *)(*(int *)(param_2 + 0xc) + *(int *)(param_2 + 8) * 4));
  if (0 < *(int *)(param_2 + 4)) {
    (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,0x3f333333);
    iVar7 = 0;
    if (0 < *(int *)(param_2 + 0x10)) {
      lVar10 = __ftol();
      iVar4 = (int)lVar10;
      iVar9 = 0;
      do {
        fVar2 = param_1[1];
        uVar8 = FUN_00403430((float *)&stack0xffffff4c,0xe,iVar4);
        if ((char)uVar8 == '\0') {
          (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,0x3f19999a);
        }
        else {
          *(int *)(param_2 + 0x18) = iVar7;
          (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,0x3f733333);
        }
        if (*(int *)(param_2 + 0x18) == iVar7) {
          (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,0x3f75c28f);
        }
        (**(code **)(*grim_interface_ptr + 0x148))
                  (grim_interface_ptr,*param_1 + 4.0,
                   (float)(int)((float)(iVar9 + 0x10) + fVar2) + param_1[1] + 17.0,&DAT_00471fc4,
                   *(undefined4 *)(*(int *)(param_2 + 0xc) + iVar7 * 4));
        iVar7 = iVar7 + 1;
        iVar9 = iVar9 + 0x10;
      } while (iVar7 < *(int *)(param_2 + 0x10));
    }
    if ((param_2[0x14] == '\0') &&
       (cStack_9c = SUB41(((fVar1 + 6.239972e-39) - 16.0) - 1.0,0), cStack_9c == '\0')) {
      param_2[4] = '\0';
      param_2[5] = '\0';
      param_2[6] = '\0';
      param_2[7] = '\0';
    }
    return *(undefined4 *)(param_2 + 0x18);
  }
  return uVar8;
}



/* FUN_004411c0 @ 004411c0 */

void FUN_004411c0(void)

{
  float *unaff_retaddr;
  
  (**(code **)(*grim_interface_ptr + 0x110))(&DAT_004ccca8);
  *unaff_retaddr = *unaff_retaddr - 16.0;
  (**(code **)(*grim_interface_ptr + 0xd4))(unaff_retaddr,0x43400000,0x3f800000);
  *unaff_retaddr = *unaff_retaddr + 16.0;
  unaff_retaddr[1] = unaff_retaddr[1] + 4.0;
  return;
}



/* FUN_00441220 @ 00441220 */

void FUN_00441220(void)

{
  float *unaff_retaddr;
  
  (**(code **)(*grim_interface_ptr + 0x110))(&DAT_004ccca8);
  *unaff_retaddr = *unaff_retaddr - 16.0;
  (**(code **)(*grim_interface_ptr + 0xd4))(unaff_retaddr,0x3f800000,0x42400000);
  *unaff_retaddr = *unaff_retaddr + 16.0;
  return;
}



/* FUN_00441270 @ 00441270 */

undefined * __cdecl FUN_00441270(undefined4 param_1,undefined4 param_2)

{
  undefined *puVar1;
  
  switch(param_2) {
  case 1:
    puVar1 = &DAT_004788b4;
    break;
  case 2:
    puVar1 = &DAT_004788b0;
    break;
  case 3:
    puVar1 = &DAT_004788ac;
    break;
  case 4:
    puVar1 = &DAT_004788a8;
    break;
  case 5:
    puVar1 = &DAT_004788a4;
    break;
  case 6:
    puVar1 = &DAT_004788a0;
    break;
  case 7:
    puVar1 = &DAT_0047889c;
    break;
  case 8:
    puVar1 = &DAT_00478898;
    break;
  case 9:
    puVar1 = &DAT_00478894;
    break;
  case 10:
    puVar1 = &DAT_00478890;
    break;
  case 0xb:
    puVar1 = &DAT_0047888c;
    break;
  case 0xc:
    puVar1 = &DAT_00478888;
    break;
  default:
    puVar1 = &DAT_00478884;
  }
  crt_sprintf(&DAT_004d0e38,s__d___s__d_00478878,param_1,puVar1);
  return &DAT_004d0e38;
}



/* ui_text_input_render @ 004413a0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* renders a text input field (focus, text, and caret) */

void __cdecl ui_text_input_render(void *input_state,float y,float alpha)

{
  float *pfVar1;
  undefined *puVar2;
  undefined *puVar3;
  int iVar4;
  int iVar5;
  float fVar6;
  int unaff_EBP;
  float unaff_EDI;
  longlong lVar7;
  float *unaff_retaddr;
  float fVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  float fVar12;
  undefined4 uVar13;
  undefined4 uVar14;
  float fVar15;
  float fStack_7c;
  float fVar16;
  float local_14;
  
  _DAT_004cccb4 = alpha * 0.7;
  DAT_00496604 = 0x3f333333;
  _DAT_004ccca8 = DAT_004965f8;
  _DAT_004cccac = DAT_004965fc;
  _DAT_004cccb0 = DAT_00496600;
  (**(code **)((int)*grim_interface_ptr + 0x14c))();
  local_14 = *unaff_retaddr + 4.0;
  if (((game_state_id != 7) && (game_state_id != 8)) && (game_state_id != 0xc)) {
    (**(code **)((int)*grim_interface_ptr + 0x114))();
    (**(code **)((int)*grim_interface_ptr + 0x144))();
    (**(code **)((int)*grim_interface_ptr + 0x110))();
    fVar16 = (float)unaff_EBP;
    (**(code **)((int)*grim_interface_ptr + 0xd4))();
    if ((*(byte *)((int)y + 0x44) & 2) == 0) {
      if ((*(byte *)((int)y + 0x44) & 1) == 0) {
        (**(code **)((int)*grim_interface_ptr + 0x114))();
        fVar15 = *grim_interface_ptr;
      }
      else {
        (**(code **)((int)*grim_interface_ptr + 0x114))();
        fVar15 = *grim_interface_ptr;
      }
      (**(code **)((int)fVar15 + 0x148))();
    }
    else {
      (**(code **)((int)*grim_interface_ptr + 0x114))();
      (**(code **)((int)*grim_interface_ptr + 0x148))();
      fVar16 = 0.5;
      (**(code **)((int)*grim_interface_ptr + 0x114))();
      (**(code **)((int)*grim_interface_ptr + 0x148))(grim_interface_ptr);
      fStack_7c = 0.8;
      (**(code **)((int)*grim_interface_ptr + 0x114))();
    }
    (**(code **)((int)*grim_interface_ptr + 0x114))
              (0x3f666666,0x3f666666,0x3f666666,unaff_EDI * 0.8);
    fVar15 = *grim_interface_ptr;
    puVar2 = FUN_00441270((uint)*(byte *)((int)y + 0x40),(uint)*(byte *)((int)y + 0x42));
    fVar6 = fStack_7c + 13.0;
    fVar10 = *grim_interface_ptr;
    puVar3 = FUN_00441270((uint)*(byte *)((int)y + 0x40),(uint)*(byte *)((int)y + 0x42));
    iVar4 = (**(code **)((int)fVar10 + 0x14c))(puVar3,fVar6,puVar2);
    (**(code **)((int)fVar15 + 0x144))(fVar16 - (float)(iVar4 / 2));
    local_14 = *unaff_retaddr + 16.0;
    FUN_004411c0();
  }
  fVar15 = y * 0.8;
  (**(code **)((int)*grim_interface_ptr + 0x114))();
  fVar16 = *grim_interface_ptr;
  iVar4 = (**(code **)((int)fVar16 + 0x14c))();
  (**(code **)((int)fVar16 + 0x144))();
  if (*(char *)((int)y + 0x28) == '\x02') {
    crt_sprintf(&DAT_004d0da0,s___2f_secs_00478960);
  }
  else if (*(char *)((int)y + 0x28) == '\x03') {
    crt_sprintf(&DAT_004d0da0,s___2f_secs_00478960);
  }
  else {
    crt_sprintf(&DAT_004d0da0,&DAT_00471f40);
  }
  fVar6 = 1.0;
  fVar16 = 0.9;
  (**(code **)((int)*grim_interface_ptr + 0x114))();
  iVar5 = (**(code **)((int)*grim_interface_ptr + 0x14c))();
  fVar10 = ((local_14 - (float)(iVar4 / 2)) + 32.0) - (float)(iVar5 / 2);
  (**(code **)((int)*grim_interface_ptr + 0x144))();
  if (game_state_id != 0xc) {
    FUN_00406180();
    crt_sprintf(&DAT_004d0da0,s_Rank___s_00478954);
    iVar4 = (**(code **)((int)*grim_interface_ptr + 0x14c))();
    (**(code **)((int)*grim_interface_ptr + 0x114))();
    fVar16 = *grim_interface_ptr;
    fVar6 = (float)(iVar4 / 2);
    (**(code **)((int)fVar16 + 0x144))((fVar10 + 32.0) - (float)(int)fVar6);
  }
  fVar16 = fVar16 + 96.0;
  FUN_00441220();
  if (*(char *)((int)y + 0x28) == '\x03') {
    (**(code **)((int)*grim_interface_ptr + 0x148))();
    crt_sprintf(&DAT_004d0da0,&DAT_00471f40);
    iVar4 = (**(code **)((int)*grim_interface_ptr + 0x14c))();
    fVar6 = 0.9;
    (**(code **)((int)*grim_interface_ptr + 0x114))();
    fVar16 = (fVar10 + 32.0) - (float)(iVar4 / 2);
    (**(code **)((int)*grim_interface_ptr + 0x144))(fVar16);
    _DAT_004d120c = _DAT_004d120c - (frame_dt + frame_dt);
  }
  else {
    (**(code **)((int)*grim_interface_ptr + 0x148))();
    __ftol();
    __ftol();
    ui_draw_clock_gauge();
    if (((ui_mouse_x <= fVar16 + 8.0) || (fVar16 + 72.0 <= ui_mouse_x)) ||
       ((ui_mouse_y <= fVar6 + 16.0 || (fVar6 + 45.0 <= ui_mouse_y)))) {
      _DAT_004d120c = _DAT_004d120c - (frame_dt + frame_dt);
    }
    else {
      _DAT_004d120c = frame_dt + frame_dt + _DAT_004d120c;
    }
    fVar15 = 0.9;
    fVar6 = 0.9;
    (**(code **)((int)*grim_interface_ptr + 0x114))();
    fVar16 = 19.0;
    (**(code **)((int)*grim_interface_ptr + 0x148))(grim_interface_ptr,0x425c0000,0x41980000);
  }
  fVar15 = fVar15 + 52.0;
  fVar6 = fVar6 - 96.0;
  if (((DAT_00487234 == 2) && (game_state_id == 8)) ||
     (((game_state_id == 7 || ((game_state_id == 8 || (game_state_id == 0xc)))) &&
      (DAT_00487234 == 0)))) {
    _DAT_004d1210 = 0.0;
  }
  else {
    FUN_004411c0();
    (**(code **)((int)*grim_interface_ptr + 0xc4))(ui_weapon_icons_texture,0);
    (**(code **)((int)*grim_interface_ptr + 0x20))(0x15,1);
    (**(code **)((int)*grim_interface_ptr + 0x108))
              (8,2,1,(&effect_subrect_frame_table)[(uint)*(byte *)((int)y + 0x2b) * 0x1f] << 1);
    (**(code **)((int)*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,y);
    uVar14 = 0x42000000;
    fVar10 = *grim_interface_ptr;
    uVar13 = 0x42800000;
    lVar7 = __ftol();
    fVar12 = (float)(int)lVar7;
    lVar7 = __ftol();
    fVar8 = (float)(int)lVar7;
    (**(code **)((int)fVar10 + 0x11c))(fVar8,fVar12,uVar13,uVar14);
    (**(code **)((int)*grim_interface_ptr + 0xf0))();
    fVar10 = 2.94273e-44;
    fVar11 = 2.8026e-45;
    (**(code **)((int)*grim_interface_ptr + 0x20))(0x15,2);
    if ((((ui_mouse_x <= fVar8) || (fVar8 + 64.0 <= ui_mouse_x)) || (ui_mouse_y <= fVar12)) ||
       (fVar12 + 32.0 <= ui_mouse_y)) {
      _DAT_004d1208 = _DAT_004d1208 - (frame_dt + frame_dt);
    }
    else {
      _DAT_004d1208 = frame_dt + frame_dt + _DAT_004d1208;
    }
    fVar9 = 0.9;
    fVar8 = 0.9;
    (**(code **)((int)*grim_interface_ptr + 0x114))(0x3f666666,0x3f666666,0x3f666666,0x441c99);
    iVar4 = (**(code **)((int)*grim_interface_ptr + 0x14c))
                      (&weapon_table + (uint)*(byte *)((int)y + 0x2b) * 0x1f);
    fVar12 = (float)(0x20 - iVar4 / 2);
    if (fVar12 < 0.0) {
      fVar12 = 0.0;
    }
    (**(code **)((int)*grim_interface_ptr + 0x144))
              (fVar12 + fVar10,fVar11 + 32.0,&weapon_table + (uint)*(byte *)((int)y + 0x2b) * 0x1f);
    (**(code **)((int)*grim_interface_ptr + 0x148))
              (grim_interface_ptr,fVar8 + 110.0,fVar9 + 1.0,s_Frags___d_00478930,
               *(undefined4 *)((int)y + 0x34));
    pfVar1 = grim_interface_ptr;
    fVar10 = *grim_interface_ptr;
    lVar7 = __ftol();
    (**(code **)((int)fVar10 + 0x148))
              (pfVar1,fVar8 + 110.0,(fVar9 + 16.0) - 1.0,s_Hit______d___00478920,(int)lVar7);
    if (((ui_mouse_x <= fVar6 + 110.0) || (fVar6 + 174.0 <= ui_mouse_x)) ||
       ((ui_mouse_y <= (fVar15 + 16.0) - 1.0 || (fVar15 + 32.0 <= ui_mouse_y)))) {
      _DAT_004d1210 = _DAT_004d1210 - (frame_dt + frame_dt);
    }
    else {
      _DAT_004d1210 = frame_dt + frame_dt + _DAT_004d1210;
    }
  }
  (**(code **)((int)*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,y);
  FUN_004411c0();
  if (_DAT_004d1208 <= 1.0) {
    if (_DAT_004d1208 < 0.0) {
      _DAT_004d1208 = 0.0;
    }
  }
  else {
    _DAT_004d1208 = 1.0;
  }
  if (_DAT_004d120c <= 1.0) {
    if (_DAT_004d120c < 0.0) {
      _DAT_004d120c = 0.0;
    }
  }
  else {
    _DAT_004d120c = 1.0;
  }
  if (_DAT_004d1210 <= 1.0) {
    if (_DAT_004d1210 < 0.0) {
      _DAT_004d1210 = 0.0;
    }
  }
  else {
    _DAT_004d1210 = 1.0;
  }
  if (((game_state_id == 7) || (game_state_id == 8)) || (game_state_id == 0xc)) {
    uVar13 = 0x3f666666;
    fVar15 = 0.9;
    (**(code **)((int)*grim_interface_ptr + 0x114))(0x3f666666,0x3f666666,0x3f666666,fVar16);
    if (0.5 < _DAT_004d1208) {
      fVar16 = (_DAT_004d1208 - 0.5) * 0.9;
      (**(code **)((int)*grim_interface_ptr + 0x114))
                (0x3f666666,0x3f666666,0x3f666666,fVar16 + fVar16);
      (**(code **)((int)*grim_interface_ptr + 0x144))
                (fVar15 - 20.0,uVar13,s_Most_used_weapon_during_the_game_004788fc);
    }
    if (0.5 < _DAT_004d120c) {
      fVar16 = (_DAT_004d120c - 0.5) * 0.9;
      (**(code **)((int)*grim_interface_ptr + 0x114))
                (0x3f666666,0x3f666666,0x3f666666,fVar16 + fVar16);
      (**(code **)((int)*grim_interface_ptr + 0x144))
                (fVar15 + 12.0,uVar13,s_The_time_the_game_lasted_004788e0);
    }
    if (0.5 < _DAT_004d1210) {
      fVar16 = (_DAT_004d1210 - 0.5) * 0.9;
      (**(code **)((int)*grim_interface_ptr + 0x114))
                (0x3f666666,0x3f666666,0x3f666666,fVar16 + fVar16);
      (**(code **)((int)*grim_interface_ptr + 0x144))
                (fVar15 - 22.0,uVar13,s_The___of_shot_bullets_hit_the_ta_004788b8);
    }
  }
  return;
}



/* FUN_00442150 @ 00442150 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __cdecl FUN_00442150(float *param_1,float param_2)

{
  float fStack_64;
  char *pcStack_60;
  undefined4 uStack_5c;
  undefined4 uStack_58;
  undefined4 uStack_54;
  undefined4 uStack_50;
  float *pfStack_4c;
  undefined4 uStack_48;
  undefined4 uStack_44;
  undefined4 uStack_40;
  undefined4 uStack_3c;
  undefined4 uStack_38;
  undefined4 uStack_34;
  float *pfStack_30;
  undefined4 uStack_2c;
  undefined4 uStack_28;
  undefined4 *puStack_24;
  undefined4 local_10;
  undefined4 local_c;
  undefined4 local_8;
  float local_4;
  
  local_4 = param_2 * 0.8;
  puStack_24 = &local_10;
  local_10 = 0;
  local_c = 0;
  local_8 = 0;
  uStack_28 = 0x42980000;
  uStack_2c = 0x43850000;
  pfStack_30 = param_1;
  uStack_34 = 0x44219d;
  (**(code **)(*grim_interface_ptr + 0xd0))();
  uStack_34 = local_8;
  uStack_38 = 0x3f800000;
  uStack_3c = 0x3f800000;
  uStack_40 = 0x3f800000;
  uStack_44 = 0x4421bf;
  (**(code **)(*grim_interface_ptr + 0x114))();
  uStack_44 = 0x42980000;
  uStack_48 = 0x43850000;
  pfStack_4c = param_1;
  uStack_50 = 0x4421d8;
  (**(code **)(*grim_interface_ptr + 0xd4))();
  uStack_50 = 0x3f800000;
  uStack_54 = 0x3e4ccccd;
  uStack_58 = 0x3e4ccccd;
  uStack_5c = 0x3f800000;
  pcStack_60 = (char *)0x4421fa;
  (**(code **)(*grim_interface_ptr + 0x114))();
  pcStack_60 = s_NOTE__004789c0;
  fStack_64 = param_1[1] + 14.0;
  (**(code **)(*grim_interface_ptr + 0x148))(grim_interface_ptr,*param_1 + 12.0);
  pcStack_60 = (char *)0x3f4ccccd;
  fStack_64 = 1.0;
  (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000);
  (**(code **)(*grim_interface_ptr + 0x148))
            (grim_interface_ptr,*param_1 + 60.0,param_1[1] + 4.0,
             s_There_is_a_newer_version_of_the_004789f8);
  (**(code **)(*grim_interface_ptr + 0x148))
            (grim_interface_ptr,*param_1 + 60.0,param_1[1] + 18.0,
             s_game_available_for_download__004789d8);
  (**(code **)(*grim_interface_ptr + 0x148))
            (grim_interface_ptr,*param_1 + 60.0,param_1[1] + 32.0,&DAT_0047f4d8);
  (**(code **)(*grim_interface_ptr + 0x148))
            (grim_interface_ptr,*param_1 + 60.0,param_1[1] + 46.0,&DAT_0047f4d8);
  if ((DAT_004cc930 & 1) == 0) {
    DAT_004cc930 = DAT_004cc930 | 1;
    DAT_004d0ed6 = 1;
    DAT_004d0ee5 = 0;
    DAT_004d0ee4 = 0;
    _DAT_004d0ee0 = 0x3f800000;
    _DAT_004d0edc = 0;
    _DAT_004d0ed0 = (char *)0x0;
    DAT_004d0ed4 = 0;
    DAT_004d0ed5 = '\0';
    _DAT_004d0ed8 = 0;
    crt_atexit(&DAT_004423c0);
  }
  _DAT_004d0ed0 = s_Get_the_update_004789c8;
  fStack_64 = *param_1 + 65.0;
  pcStack_60 = (char *)((param_1[1] + 42.0) - 2.0);
  ui_button_update(&fStack_64,(int *)&DAT_004d0ed0);
  if (DAT_004d0ed5 != '\0') {
    DAT_00480838 = 1;
  }
  return;
}



/* FUN_004443c0 @ 004443c0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

uint __cdecl FUN_004443c0(float *param_1,undefined1 param_2)

{
  char cVar1;
  undefined4 *puVar2;
  char *pcVar3;
  int iVar4;
  uint extraout_EAX;
  undefined4 *puVar5;
  uint uVar6;
  uint uVar7;
  int iVar8;
  char *pcVar9;
  int local_c;
  float local_8;
  float local_4;
  
  if ((DAT_004cccd8 & 1) == 0) {
    DAT_004cccd8 = DAT_004cccd8 | 1;
    _DAT_004d0f38 = 0x3f800000;
    _DAT_004d0f28 = &DAT_004ccb18;
    _DAT_004d0f2c = 0;
    _DAT_004d0f30 = 0x1b;
    _DAT_004d0f34 = 0x60;
    crt_atexit(&DAT_00444800);
  }
  local_c = 0;
  if (0 < config_name_slot_count) {
    puVar5 = &DAT_004ccb5c;
    puVar2 = &config_saved_names;
    local_c = config_name_slot_count;
    iVar8 = config_name_slot_count;
    do {
      *puVar5 = puVar2;
      puVar2 = (undefined4 *)((int)puVar2 + 0x1b);
      puVar5 = puVar5 + 1;
      iVar8 = iVar8 + -1;
    } while (iVar8 != 0);
  }
  pcVar3 = strdup_malloc(s_<add_new_named_list>_00478c6c);
  (&DAT_004ccb5c)[local_c] = pcVar3;
  if ((DAT_004cccd8 & 2) == 0) {
    DAT_004cccd8 = DAT_004cccd8 | 2;
    DAT_004ccc96 = 1;
    DAT_004ccca5 = 0;
    DAT_004ccca4 = 0;
    _DAT_004ccca0 = 0x3f800000;
    _DAT_004ccc9c = 0;
    _DAT_004ccc90 = (undefined *)0x0;
    DAT_004ccc94 = 0;
    DAT_004ccc95 = 0;
    _DAT_004ccc98 = 0;
    crt_atexit(&DAT_004447f0);
  }
  _DAT_004ccc90 = &DAT_00478c68;
  if ((DAT_004cccd8 & 4) == 0) {
    DAT_004cccd8 = DAT_004cccd8 | 4;
    DAT_004ccb06 = 1;
    DAT_004ccb15 = 0;
    DAT_004ccb14 = 0;
    _DAT_004ccb10 = 0x3f800000;
    _DAT_004ccb0c = 0;
    _DAT_004ccb00 = (char *)0x0;
    DAT_004ccb04 = 0;
    DAT_004ccb05 = 0;
    _DAT_004ccb08 = 0;
    crt_atexit(&DAT_004447e0);
  }
  _DAT_004ccb00 = s_Delete_00478c60;
  _DAT_004d0f34 = 0xae;
  if (DAT_004d1220 == '\0') {
    if ((DAT_004d121c != 0) || (config_name_slot_selected == 0)) goto LAB_004446ac;
    local_8 = *param_1;
    local_4 = param_1[1] + 22.0;
    iVar8 = ui_button_update(&local_8,(int *)&DAT_004ccb00);
    if ((char)iVar8 == '\0') goto LAB_004446ac;
    uVar6 = 0xffffffff;
    config_name_slot_count = config_name_slot_count + -1;
    pcVar3 = (char *)((int)&config_saved_names + config_name_slot_count * 0x1b);
    do {
      pcVar9 = pcVar3;
      if (uVar6 == 0) break;
      uVar6 = uVar6 - 1;
      pcVar9 = pcVar3 + 1;
      cVar1 = *pcVar3;
      pcVar3 = pcVar9;
    } while (cVar1 != '\0');
    uVar6 = ~uVar6;
    pcVar3 = pcVar9 + -uVar6;
    pcVar9 = (char *)((int)&config_saved_names + config_name_slot_selected * 0x1b);
    for (uVar7 = uVar6 >> 2; uVar7 != 0; uVar7 = uVar7 - 1) {
      *(undefined4 *)pcVar9 = *(undefined4 *)pcVar3;
      pcVar3 = pcVar3 + 4;
      pcVar9 = pcVar9 + 4;
    }
    for (uVar6 = uVar6 & 3; uVar6 != 0; uVar6 = uVar6 - 1) {
      *pcVar9 = *pcVar3;
      pcVar3 = pcVar3 + 1;
      pcVar9 = pcVar9 + 1;
    }
    config_name_slot_selected = 0;
  }
  else {
    local_8 = *param_1;
    local_4 = param_1[1] + 29.0;
    iVar8 = ui_text_input_update(&local_8,(int *)&DAT_004d0f28);
    if ((char)iVar8 == '\0') {
      local_8 = *param_1 + 180.0;
      local_4 = param_1[1] + 22.0;
      iVar8 = ui_button_update(&local_8,(int *)&DAT_004ccc90);
      if ((char)iVar8 == '\0') goto LAB_004446ac;
    }
    uVar6 = 0xffffffff;
    pcVar3 = &DAT_004ccb18;
    do {
      pcVar9 = pcVar3;
      if (uVar6 == 0) break;
      uVar6 = uVar6 - 1;
      pcVar9 = pcVar3 + 1;
      cVar1 = *pcVar3;
      pcVar3 = pcVar9;
    } while (cVar1 != '\0');
    uVar6 = ~uVar6;
    pcVar3 = pcVar9 + -uVar6;
    pcVar9 = (char *)((int)&config_saved_names + config_name_slot_count * 0x1b);
    for (uVar7 = uVar6 >> 2; uVar7 != 0; uVar7 = uVar7 - 1) {
      *(undefined4 *)pcVar9 = *(undefined4 *)pcVar3;
      pcVar3 = pcVar3 + 4;
      pcVar9 = pcVar9 + 4;
    }
    for (uVar6 = uVar6 & 3; uVar6 != 0; uVar6 = uVar6 - 1) {
      *pcVar9 = *pcVar3;
      pcVar3 = pcVar3 + 1;
      pcVar9 = pcVar9 + 1;
    }
    config_name_slot_selected = config_name_slot_count;
    config_name_slot_count = config_name_slot_count + 1;
    if (7 < config_name_slot_count) {
      uVar6 = 0xffffffff;
      pcVar3 = &DAT_004ccb18;
      do {
        pcVar9 = pcVar3;
        if (uVar6 == 0) break;
        uVar6 = uVar6 - 1;
        pcVar9 = pcVar3 + 1;
        cVar1 = *pcVar3;
        pcVar3 = pcVar9;
      } while (cVar1 != '\0');
      uVar6 = ~uVar6;
      pcVar3 = pcVar9 + -uVar6;
      pcVar9 = (char *)&config_saved_name_2;
      for (uVar7 = uVar6 >> 2; uVar7 != 0; uVar7 = uVar7 - 1) {
        *(undefined4 *)pcVar9 = *(undefined4 *)pcVar3;
        pcVar3 = pcVar3 + 4;
        pcVar9 = pcVar9 + 4;
      }
      for (uVar6 = uVar6 & 3; uVar6 != 0; uVar6 = uVar6 - 1) {
        *pcVar9 = *pcVar3;
        pcVar3 = pcVar3 + 1;
        pcVar9 = pcVar9 + 1;
      }
      config_name_slot_count = config_name_slot_count + -1;
    }
    DAT_004ccb18 = 0;
    _DAT_004d0f2c = 0;
    DAT_004d1220 = '\0';
  }
  thunk_FUN_0043afa0();
LAB_004446ac:
  if ((DAT_004cccd8 & 8) == 0) {
    DAT_004cccd8 = DAT_004cccd8 | 8;
    DAT_004d0ee8 = 1;
    _DAT_004d0f00 = 0;
    DAT_004d0efc = 0;
    _DAT_004d0ef0 = 0;
    _DAT_004d0eec = 0;
    _DAT_004d0ef8 = 0;
    _DAT_004d0ef4 = (undefined4 *)0x0;
    crt_atexit(&DAT_004447d0);
  }
  _DAT_004d0ef8 = local_c + 1;
  _DAT_004d0ef4 = &DAT_004ccb5c;
  DAT_004d0ee8 = param_2;
  _DAT_004d0ef0 = config_name_slot_selected;
  iVar8 = FUN_0043efc0(param_1,&DAT_004d0ee8);
  if ((-2 < iVar8) &&
     ((iVar4 = input_primary_just_pressed(), (char)iVar4 != '\0' ||
      (cVar1 = (**(code **)(*grim_interface_ptr + 0x48))(0x1c), cVar1 != '\0')))) {
    DAT_004d121c = 1 - DAT_004d121c;
    if (-1 < iVar8) {
      config_name_slot_selected = iVar8;
      _DAT_004d0ef0 = iVar8;
      if (iVar8 != local_c) {
        thunk_FUN_0043afa0();
      }
      DAT_004d1221 = 1;
      DAT_004d1222 = 1;
    }
    DAT_004d1220 = iVar8 == local_c;
  }
  _DAT_004d0eec = DAT_004d121c;
  crt_free((void *)(&DAT_004ccb5c)[local_c]);
  return extraout_EAX & 0xffffff00;
}



/* creature_spawn_tinted @ 00444810 */

/* spawns a creature with tint and default stats */

int __cdecl creature_spawn_tinted(float *pos,float *rgba,int type_id)

{
  float fVar1;
  float fVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  
  iVar3 = creature_alloc_slot();
  iVar5 = iVar3 * 0x98;
  (&creature_pos_x)[iVar3 * 0x26] = *pos;
  (&creature_pos_y)[iVar3 * 0x26] = pos[1];
  (&creature_pool)[iVar5] = 1;
  (&creature_state_flag)[iVar5] = 1;
  (&creature_vel_x)[iVar3 * 0x26] = 0;
  (&creature_ai_mode)[iVar3 * 0x26] = 2;
  (&creature_collision_flag)[iVar5] = 0;
  (&creature_collision_timer)[iVar3 * 0x26] = 0;
  (&creature_type_id)[iVar3 * 0x26] = type_id;
  (&creature_force_target)[iVar5] = 0;
  (&creature_hitbox_size)[iVar3 * 0x26] = 0x41800000;
  (&creature_health)[iVar3 * 0x26] = 0x3f800000;
  (&creature_vel_y)[iVar3 * 0x26] = 0;
  iVar4 = _rand();
  (&creature_move_speed)[iVar3 * 0x26] = 0x3fd9999a;
  (&creature_reward_value)[iVar3 * 0x26] = 0x3f800000;
  (&creature_attack_cooldown)[iVar3 * 0x26] = 0;
  (&creature_heading)[iVar3 * 0x26] = (float)(iVar4 % 0x13a) * 0.01;
  (&creature_tint_r)[iVar3 * 0x26] = *rgba;
  (&creature_tint_g)[iVar3 * 0x26] = rgba[1];
  (&creature_tint_b)[iVar3 * 0x26] = rgba[2];
  (&creature_tint_a)[iVar3 * 0x26] = rgba[3];
  iVar4 = _rand();
  (&creature_contact_damage)[iVar3 * 0x26] = 0x42c80000;
  (&creature_max_health)[iVar3 * 0x26] = (&creature_health)[iVar3 * 0x26];
  fVar2 = (float)(iVar4 % 0x14) + 47.0;
  (&creature_size)[iVar3 * 0x26] = fVar2;
  if ((type_id != 3) && (type_id != 4)) {
    return iVar3;
  }
  fVar1 = (float)(&creature_move_speed)[iVar3 * 0x26];
  *(uint *)(&creature_flags + iVar5) = *(uint *)(&creature_flags + iVar5) | 0x80;
  (&creature_move_speed)[iVar3 * 0x26] = fVar1 * 1.2;
  (&creature_size)[iVar3 * 0x26] = fVar2 * 0.8;
  return iVar3;
}



/* player_fire_weapon @ 00444980 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* handles player firing: cooldowns, ammo, projectiles, and muzzle effects */

void __cdecl player_fire_weapon(char param_1,char param_2)

{
  float fVar1;
  float fVar2;
  bool bVar3;
  bool bVar4;
  int iVar5;
  int iVar6;
  float10 fVar7;
  float10 fVar8;
  undefined4 *unaff_retaddr;
  int iVar9;
  int owner_id;
  float fVar10;
  float local_14;
  float local_10;
  float local_c;
  float local_8;
  
  iVar5 = game_is_full_version();
  if ((char)iVar5 == '\0') {
    crt_exit(0);
  }
  iVar5 = render_overlay_player_index;
  if (DAT_0047eec8 == '\0') {
    iVar6 = render_overlay_player_index * 0x360;
    if ((float)(&player_health)[render_overlay_player_index * 0xd8] <= 0.0) {
      (&player_death_timer)[render_overlay_player_index * 0xd8] =
           (float)(&player_death_timer)[render_overlay_player_index * 0xd8] - frame_dt * 20.0;
      return;
    }
    fVar2 = (float)(&player_muzzle_flash_alpha)[render_overlay_player_index * 0xd8] -
            (frame_dt + frame_dt);
    (&player_muzzle_flash_alpha)[render_overlay_player_index * 0xd8] = fVar2;
    if (fVar2 < 0.0) {
      (&player_muzzle_flash_alpha)[iVar5 * 0xd8] = 0;
    }
    (&player_shot_cooldown)[iVar5 * 0xd8] = 0;
    *(undefined4 *)(&player_move_dx + iVar6) = 0;
    *(undefined4 *)(&player_move_dy + iVar6) = 0;
    (&player_spread_heat)[iVar5 * 0xd8] = 0;
    (&player_ammo)[iVar5 * 0xd8] = (&player_clip_size)[iVar5 * 0xd8];
    (&player_reload_timer)[iVar5 * 0xd8] = 0;
    if (param_2 != '\0') {
      player_start_reload();
      iVar5 = render_overlay_player_index;
    }
    bVar3 = false;
    (&player_aim_x)[iVar5 * 0xd8] = *unaff_retaddr;
    (&player_aim_y)[iVar5 * 0xd8] = unaff_retaddr[1];
    fVar8 = (float10)fpatan((float10)(float)(&player_pos_y)[iVar5 * 0xd8] -
                            (float10)(float)(&player_aim_y)[iVar5 * 0xd8],
                            (float10)(float)(&player_pos_x)[iVar5 * 0xd8] -
                            (float10)(float)(&player_aim_x)[iVar5 * 0xd8]);
    (&player_aim_heading)[iVar5 * 0xd8] = (float)(fVar8 - (float10)1.5707964);
    if (((float)(&player_shot_cooldown)[iVar5 * 0xd8] <= 0.0) &&
       ((float)(&player_reload_timer)[iVar5 * 0xd8] == 0.0)) {
      bVar3 = true;
      (&player_reload_active)[iVar5 * 0x360] = 0;
    }
    bVar4 = false;
    if ((((float)(&player_shot_cooldown)[iVar5 * 0xd8] <= 0.0) &&
        (0 < (int)(&player_experience)[iVar5 * 0xd8])) &&
       ((iVar5 = perk_count_get(perk_id_regression_bullets), iVar5 != 0 ||
        (iVar6 = perk_count_get(perk_id_ammunition_within), iVar5 = render_overlay_player_index,
        bVar4 = false, iVar6 != 0)))) {
      bVar4 = true;
      iVar5 = render_overlay_player_index;
    }
    if ((bVar3) || (bVar4)) {
      fVar2 = (float)(&player_aim_heading)[iVar5 * 0xd8];
      if (param_1 != '\0') {
        fVar8 = ((float10)fVar2 - (float10)1.5707964) - (float10)0.150915;
        fVar7 = (float10)fcos(fVar8);
        fVar10 = (float)(fVar7 * (float10)16.0);
        fVar8 = (float10)fsin(fVar8);
        fVar1 = (float)(fVar8 * (float10)16.0);
        if ((*(byte *)(&DAT_004d7a94 + (&player_weapon_id)[iVar5 * 0xd8] * 0x1f) & 1) != 0) {
          _rand();
          _rand();
          iVar5 = render_overlay_player_index;
        }
        if (1.0 < (float)(&player_muzzle_flash_alpha)[iVar5 * 0xd8]) {
          (&player_muzzle_flash_alpha)[iVar5 * 0xd8] = 0x3f800000;
        }
        (&player_muzzle_flash_alpha)[iVar5 * 0xd8] =
             (float)(&DAT_004d7a7c)[(&player_weapon_id)[iVar5 * 0xd8] * 0x1f] +
             (float)(&player_muzzle_flash_alpha)[iVar5 * 0xd8];
        sfx_play_panned(*(float *)(&DAT_004d7a84 + (&player_weapon_id)[iVar5 * 0xd8] * 0x7c));
        if ((&player_weapon_id)[render_overlay_player_index * 0xd8] == 3) {
          fVar8 = (float10)fcos((float10)fVar2);
          local_14 = (float)(fVar8 * (float10)25.0);
          fVar7 = (float10)fsin((float10)fVar2);
          local_10 = (float)(fVar7 * (float10)25.0);
          local_8 = fVar1 + (float)(&player_pos_y)[render_overlay_player_index * 0xd8];
          local_c = fVar10 + (float)(&player_pos_x)[render_overlay_player_index * 0xd8];
          iVar5 = fx_spawn_sprite(&local_c,&local_14,1.0);
          local_c = (float)fVar8 * 15.0;
          (&sprite_effect_color_r)[iVar5 * 0xb] = 0x3f000000;
          (&sprite_effect_color_g)[iVar5 * 0xb] = 0x3f000000;
          local_8 = (float)fVar7 * 15.0;
          (&sprite_effect_color_b)[iVar5 * 0xb] = 0x3f000000;
          (&sprite_effect_color_a)[iVar5 * 0xb] = 0x3e800000;
          local_10 = fVar1 + (float)(&player_pos_y)[render_overlay_player_index * 0xd8];
          local_14 = fVar10 + (float)(&player_pos_x)[render_overlay_player_index * 0xd8];
          iVar5 = fx_spawn_sprite(&local_14,&local_c,2.0);
          iVar6 = 0xc;
          (&sprite_effect_color_r)[iVar5 * 0xb] = 0x3f000000;
          (&sprite_effect_color_g)[iVar5 * 0xb] = 0x3f000000;
          (&sprite_effect_color_b)[iVar5 * 0xb] = 0x3f000000;
          (&sprite_effect_color_a)[iVar5 * 0xb] = 0x3e645a1d;
          do {
            owner_id = -100;
            iVar9 = 3;
            local_8 = fVar1 + (float)(&player_pos_y)[render_overlay_player_index * 0xd8];
            local_c = fVar10 + (float)(&player_pos_x)[render_overlay_player_index * 0xd8];
            iVar5 = _rand();
            iVar5 = projectile_spawn(&local_c,(float)(iVar5 % 200 + -100) * 0.0013 + fVar2,iVar9,
                                     owner_id);
            iVar9 = _rand();
            iVar6 = iVar6 + -1;
            (&projectile_speed_scale)[iVar5 * 0x10] = (float)(iVar9 % 100) * 0.01 + 1.0;
          } while (iVar6 != 0);
        }
        iVar6 = perk_id_sharpshooter;
        iVar5 = render_overlay_player_index;
        if ((int)(&player_perk_counts)[perk_id_sharpshooter] < 1) {
          (&player_spread_heat)[render_overlay_player_index * 0xd8] =
               _DAT_00473a40 * frame_dt * 150.0 +
               (float)(&player_spread_heat)[render_overlay_player_index * 0xd8];
        }
        if (_DAT_00473a40 + _DAT_00473a40 < (float)(&player_spread_heat)[iVar5 * 0xd8]) {
          (&player_spread_heat)[iVar5 * 0xd8] = _DAT_00473a40 + _DAT_00473a40;
        }
        iVar9 = perk_id_fastshot;
        (&player_spread_heat)[iVar5 * 0xd8] =
             _DAT_00473a40 * (float)(&player_spread_heat)[iVar5 * 0xd8];
        if (0 < (int)(&player_perk_counts)[iVar9]) {
          (&player_shot_cooldown)[iVar5 * 0xd8] =
               (float)(&player_shot_cooldown)[iVar5 * 0xd8] * 0.88;
        }
        if (0 < (int)(&player_perk_counts)[iVar6]) {
          (&player_shot_cooldown)[iVar5 * 0xd8] =
               (float)(&player_shot_cooldown)[iVar5 * 0xd8] * 1.05;
        }
        if ((float)(&player_ammo)[iVar5 * 0xd8] <= 0.0) {
          player_start_reload();
          iVar5 = render_overlay_player_index;
        }
      }
    }
    fVar2 = (float)(&player_move_phase)[iVar5 * 0xd8];
    while (14.0 < fVar2) {
      fVar2 = (float)(&player_move_phase)[iVar5 * 0xd8] - 14.0;
      (&player_move_phase)[iVar5 * 0xd8] = fVar2;
    }
    fVar2 = (float)(&player_size)[iVar5 * 0xd8] * 0.5;
    if ((float)(&player_pos_x)[iVar5 * 0xd8] < fVar2) {
      (&player_pos_x)[iVar5 * 0xd8] = fVar2;
    }
    if ((float)terrain_texture_width - fVar2 < (float)(&player_pos_x)[iVar5 * 0xd8]) {
      (&player_pos_x)[iVar5 * 0xd8] = (float)terrain_texture_width - fVar2;
    }
    if ((float)(&player_pos_y)[iVar5 * 0xd8] < fVar2) {
      (&player_pos_y)[iVar5 * 0xd8] = fVar2;
    }
    if ((float)terrain_texture_height - fVar2 < (float)(&player_pos_y)[iVar5 * 0xd8]) {
      (&player_pos_y)[iVar5 * 0xd8] = (float)terrain_texture_height - fVar2;
    }
    if (0.8 < (float)(&player_muzzle_flash_alpha)[iVar5 * 0xd8]) {
      (&player_muzzle_flash_alpha)[iVar5 * 0xd8] = 0x3f4ccccd;
    }
  }
  return;
}



/* FUN_00444f70 @ 00444f70 */

char * __cdecl FUN_00444f70(char param_1)

{
  int iVar1;
  int iVar2;
  
  iVar2 = 0x34;
  if (param_1 == '\0') {
    iVar2 = 0x33;
  }
  iVar1 = _rand();
  switch(iVar1 % iVar2) {
  case 0:
    return &DAT_00478dfc;
  case 1:
    return &DAT_00478df8;
  case 2:
    return &DAT_00478df0;
  case 3:
    return &DAT_00478de8;
  case 4:
    return &DAT_00478de4;
  case 5:
    return &DAT_00478ddc;
  case 6:
    return &DAT_00478dd4;
  case 7:
    return &DAT_00478dcc;
  case 8:
    return &DAT_00478dc4;
  case 9:
    return &DAT_00478dc0;
  case 10:
    return &DAT_00478dbc;
  case 0xb:
    return &DAT_00478db8;
  case 0xc:
    return &DAT_00478db0;
  case 0xd:
    return &DAT_00478da8;
  case 0xe:
    return &DAT_00478da0;
  case 0xf:
    return &DAT_00478d9c;
  case 0x10:
    return &DAT_00478d98;
  case 0x11:
    return &DAT_00478d90;
  case 0x12:
    return &DAT_00478d88;
  case 0x13:
    return &DAT_00478d80;
  case 0x14:
    return &DAT_00478d78;
  case 0x15:
    return &DAT_00478d70;
  case 0x16:
    return &DAT_00478d68;
  case 0x17:
    return &DAT_00478d64;
  case 0x18:
    return s_harry_00478d5c;
  case 0x19:
    return &DAT_00478d58;
  case 0x1a:
    return &DAT_00478d54;
  case 0x1b:
    return &DAT_00478d4c;
  case 0x1c:
    return &DAT_00478d44;
  case 0x1d:
    return &DAT_00478d3c;
  case 0x1e:
    return s_quick_00478d34;
  case 0x1f:
    return s_brown_00478d2c;
  case 0x20:
    return &DAT_00478d28;
  case 0x21:
    return s_jumper_00478d20;
  case 0x22:
    return &DAT_00478d18;
  case 0x23:
    return &DAT_00478d10;
  case 0x24:
    return &DAT_00478d0c;
  case 0x25:
    return &DAT_00478d04;
  case 0x26:
    return s_unique_00478cfc;
  default:
    return &DAT_00478c98;
  case 0x28:
    return &DAT_00478cf4;
  case 0x29:
    return s_sleep_00478cec;
  case 0x2a:
    return &DAT_00478ce4;
  case 0x2b:
    return &DAT_00478cdc;
  case 0x2c:
    return &DAT_00478cd4;
  case 0x2d:
    return s_below_00478ccc;
  case 0x2e:
    return s_scape_00478cc4;
  case 0x2f:
    return &DAT_00478cbc;
  case 0x30:
    return &DAT_00478cb4;
  case 0x31:
    return s_break_00478cac;
  case 0x32:
    return &DAT_00478ca4;
  case 0x33:
    return &DAT_00478ca0;
  }
}



/* FUN_004451b0 @ 004451b0 */

undefined1 * FUN_004451b0(void)

{
  byte bVar1;
  byte *pbVar2;
  int iVar3;
  uint uVar4;
  void *pvVar5;
  void *this;
  void *extraout_ECX;
  uint uVar6;
  int iVar7;
  int iVar8;
  byte *pbVar9;
  byte *pbVar10;
  byte *pbVar11;
  bool bVar12;
  byte *local_8;
  int local_4;
  
  if (DAT_004d7580 == '\0') {
    thunk_FUN_0043afa0();
    iVar8 = 0;
    pbVar9 = &highscore_table;
    local_4 = 0;
    local_8 = &DAT_004d1228;
    do {
      pbVar10 = &DAT_004d1228;
      iVar7 = 0;
      pbVar2 = pbVar9;
      pbVar11 = pbVar10;
      if (0x4d1228 < (int)local_8) {
LAB_004451ef:
        do {
          bVar1 = *pbVar2;
          bVar12 = bVar1 < *pbVar10;
          if (bVar1 == *pbVar10) {
            if (bVar1 != 0) {
              bVar1 = pbVar2[1];
              bVar12 = bVar1 < pbVar10[1];
              if (bVar1 != pbVar10[1]) goto LAB_00445213;
              pbVar10 = pbVar10 + 2;
              pbVar2 = pbVar2 + 2;
              if (bVar1 != 0) goto LAB_004451ef;
            }
            iVar3 = 0;
          }
          else {
LAB_00445213:
            iVar3 = (1 - (uint)bVar12) - (uint)(bVar12 != 0);
          }
          iVar8 = local_4;
          if (iVar3 == 0) goto LAB_004452a7;
          iVar7 = iVar7 + 1;
          pbVar10 = pbVar11 + 0x20;
          pbVar2 = pbVar9;
          pbVar11 = pbVar10;
        } while (iVar7 < local_4);
      }
      uVar4 = 0xffffffff;
      iVar7 = 0;
      pbVar2 = pbVar9;
      do {
        if (uVar4 == 0) break;
        uVar4 = uVar4 - 1;
        bVar1 = *pbVar2;
        pbVar2 = pbVar2 + 1;
      } while (bVar1 != 0);
      pvVar5 = (void *)(~uVar4 - 1);
      this = pvVar5;
      if (0 < (int)pvVar5) {
        do {
          uVar4 = crt_isalpha(this,(int)(char)pbVar9[iVar7]);
          if ((uVar4 == 0) && (pbVar9[iVar7] != 0x2e)) goto LAB_004452a7;
          iVar7 = iVar7 + 1;
          this = extraout_ECX;
        } while (iVar7 < (int)pvVar5);
      }
      uVar4 = 0xffffffff;
      local_4 = iVar8 + 1;
      pbVar2 = pbVar9;
      do {
        pbVar11 = pbVar2;
        if (uVar4 == 0) break;
        uVar4 = uVar4 - 1;
        pbVar11 = pbVar2 + 1;
        bVar1 = *pbVar2;
        pbVar2 = pbVar11;
      } while (bVar1 != 0);
      uVar4 = ~uVar4;
      pbVar2 = pbVar11 + -uVar4;
      pbVar11 = local_8;
      for (uVar6 = uVar4 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
        *(undefined4 *)pbVar11 = *(undefined4 *)pbVar2;
        pbVar2 = pbVar2 + 4;
        pbVar11 = pbVar11 + 4;
      }
      for (uVar4 = uVar4 & 3; uVar4 != 0; uVar4 = uVar4 - 1) {
        *pbVar11 = *pbVar2;
        pbVar2 = pbVar2 + 1;
        pbVar11 = pbVar11 + 1;
      }
      console_printf(&console_log_queue,(byte *)s__d__unique___s_00478e14);
      iVar8 = local_4;
      local_8 = local_8 + 0x20;
LAB_004452a7:
      pbVar9 = pbVar9 + 0x48;
    } while ((int)pbVar9 < 0x484730);
    DAT_004d7580 = '\x01';
    DAT_004d7584 = iVar8;
    if (iVar8 == 0) {
      crt_sprintf(&DAT_004d1228,s_quickbrownfox_00478e04);
    }
  }
  if (DAT_004d7584 < 1) {
    return &DAT_004d1228;
  }
  iVar8 = _rand();
  return &DAT_004d1228 + (iVar8 % DAT_004d7584) * 0x20;
}



/* FUN_00445310 @ 00445310 */

undefined4 __cdecl FUN_00445310(byte *param_1,int param_2)

{
  byte bVar1;
  int in_EAX;
  byte *pbVar2;
  int iVar3;
  byte *pbVar4;
  byte *pbVar5;
  char *pcVar6;
  bool bVar7;
  
  iVar3 = 0;
  pbVar4 = &DAT_004d152c;
  pcVar6 = &creature_pool;
  do {
    if ((*pcVar6 != '\0') && (pbVar2 = pbVar4, pbVar5 = param_1, iVar3 != param_2)) {
      do {
        bVar1 = *pbVar2;
        bVar7 = bVar1 < *pbVar5;
        if (bVar1 != *pbVar5) {
LAB_00445355:
          in_EAX = (1 - (uint)bVar7) - (uint)(bVar7 != 0);
          goto LAB_0044535a;
        }
        if (bVar1 == 0) break;
        bVar1 = pbVar2[1];
        bVar7 = bVar1 < pbVar5[1];
        if (bVar1 != pbVar5[1]) goto LAB_00445355;
        pbVar2 = pbVar2 + 2;
        pbVar5 = pbVar5 + 2;
      } while (bVar1 != 0);
      in_EAX = 0;
LAB_0044535a:
      if (in_EAX == 0) {
        return 0;
      }
    }
    pcVar6 = pcVar6 + 0x98;
    iVar3 = iVar3 + 1;
    pbVar4 = pbVar4 + 0x40;
    if (0x4aa337 < (int)pcVar6) {
      return CONCAT31((int3)((uint)in_EAX >> 8),1);
    }
  } while( true );
}



/* FUN_00445380 @ 00445380 */

void __cdecl FUN_00445380(int param_1)

{
  char cVar1;
  byte bVar2;
  bool bVar3;
  int iVar4;
  char *pcVar5;
  char *pcVar6;
  char *pcVar7;
  char *pcVar8;
  undefined4 uVar9;
  uint uVar10;
  uint uVar11;
  byte *dst;
  byte *pbVar12;
  byte *pbVar13;
  int local_4;
  
  local_4 = 0;
  do {
    if (highscore_score_xp < 0x79) {
LAB_0044544d:
      if (((highscore_score_xp < 0x51) || (iVar4 = _rand(), 0x4f < iVar4 % 100)) &&
         ((highscore_score_xp < 0x3d || (iVar4 = _rand(), 0x27 < iVar4 % 100)))) {
        if (((highscore_score_xp < 0x29) || (iVar4 = _rand(), 0x4f < iVar4 % 100)) &&
           ((highscore_score_xp < 0x15 || (iVar4 = _rand(), 0x27 < iVar4 % 100)))) {
          dst = &DAT_004d152c + param_1 * 0x40;
          pcVar5 = FUN_00444f70('\0');
          crt_sprintf((char *)dst,&DAT_00471fc4,pcVar5);
        }
        else {
          dst = &DAT_004d152c + param_1 * 0x40;
          pcVar5 = FUN_00444f70('\0');
          pcVar6 = FUN_00444f70('\x01');
          crt_sprintf((char *)dst,&DAT_00477bf4,pcVar6,pcVar5);
        }
      }
      else {
        dst = &DAT_004d152c + param_1 * 0x40;
        pcVar5 = FUN_00444f70('\0');
        pcVar6 = FUN_00444f70('\0');
        pcVar7 = FUN_00444f70('\x01');
        crt_sprintf((char *)dst,s__s_s_s_00478e24,pcVar7,pcVar6,pcVar5);
      }
    }
    else {
      iVar4 = _rand();
      if (iVar4 % 100 < 10) {
        dst = &DAT_004d152c + param_1 * 0x40;
        pcVar5 = FUN_004451b0();
        uVar10 = 0xffffffff;
        do {
          pcVar6 = pcVar5;
          if (uVar10 == 0) break;
          uVar10 = uVar10 - 1;
          pcVar6 = pcVar5 + 1;
          cVar1 = *pcVar5;
          pcVar5 = pcVar6;
        } while (cVar1 != '\0');
        uVar10 = ~uVar10;
        pbVar12 = (byte *)(pcVar6 + -uVar10);
        pbVar13 = dst;
        for (uVar11 = uVar10 >> 2; uVar11 != 0; uVar11 = uVar11 - 1) {
          *(undefined4 *)pbVar13 = *(undefined4 *)pbVar12;
          pbVar12 = pbVar12 + 4;
          pbVar13 = pbVar13 + 4;
        }
        for (uVar10 = uVar10 & 3; uVar10 != 0; uVar10 = uVar10 - 1) {
          *pbVar13 = *pbVar12;
          pbVar12 = pbVar12 + 1;
          pbVar13 = pbVar13 + 1;
        }
      }
      else {
        if ((highscore_score_xp < 0x79) || (iVar4 = _rand(), 0x4f < iVar4 % 100)) goto LAB_0044544d;
        dst = &DAT_004d152c + param_1 * 0x40;
        pcVar5 = FUN_00444f70('\0');
        pcVar6 = FUN_00444f70('\0');
        pcVar7 = FUN_00444f70('\0');
        pcVar8 = FUN_00444f70('\x01');
        crt_sprintf((char *)dst,s__s_s_s_s_00478e2c,pcVar8,pcVar7,pcVar6,pcVar5);
      }
    }
    uVar9 = FUN_00445310(dst,param_1);
    if ((char)uVar9 != '\0') {
      uVar10 = 0xffffffff;
      do {
        if (uVar10 == 0) break;
        uVar10 = uVar10 - 1;
        bVar2 = *dst;
        dst = dst + 1;
      } while (bVar2 != 0);
      if ((~uVar10 - 1 < 0x10) || (bVar3 = 99 < local_4, local_4 = local_4 + 1, bVar3)) {
        return;
      }
    }
  } while( true );
}



/* FUN_00445590 @ 00445590 */

int __cdecl FUN_00445590(byte *param_1)

{
  byte bVar1;
  int iVar2;
  byte *pbVar3;
  int iVar4;
  byte *pbVar5;
  byte *pbVar6;
  char *pcVar7;
  bool bVar8;
  
  iVar2 = 0;
  pbVar5 = &DAT_004d152c;
  pcVar7 = &creature_pool;
  do {
    pbVar3 = pbVar5;
    pbVar6 = param_1;
    if (*pcVar7 != '\0') {
      do {
        bVar1 = *pbVar3;
        bVar8 = bVar1 < *pbVar6;
        if (bVar1 != *pbVar6) {
LAB_004455cf:
          iVar4 = (1 - (uint)bVar8) - (uint)(bVar8 != 0);
          goto LAB_004455d4;
        }
        if (bVar1 == 0) break;
        bVar1 = pbVar3[1];
        bVar8 = bVar1 < pbVar6[1];
        if (bVar1 != pbVar6[1]) goto LAB_004455cf;
        pbVar3 = pbVar3 + 2;
        pbVar6 = pbVar6 + 2;
      } while (bVar1 != 0);
      iVar4 = 0;
LAB_004455d4:
      if (iVar4 == 0) {
        return iVar2;
      }
    }
    pcVar7 = pcVar7 + 0x98;
    iVar2 = iVar2 + 1;
    pbVar5 = pbVar5 + 0x40;
    if (0x4aa337 < (int)pcVar7) {
      return -1;
    }
  } while( true );
}



/* FUN_00445600 @ 00445600 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_00445600(void)

{
  int iVar1;
  undefined4 *puVar2;
  undefined1 *puVar3;
  float fVar4;
  undefined4 uVar5;
  undefined4 *puVar6;
  float fStack_40;
  float fStack_3c;
  undefined4 uStack_38;
  
  uStack_38 = 0x3f800000;
  fStack_3c = 1.0;
  fStack_40 = 1.0;
  (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000);
  (**(code **)(*grim_interface_ptr + 0x20))(0x18,0x3f000000);
  puVar3 = &DAT_004d152c;
  puVar2 = &creature_hitbox_size;
  do {
    if (*(char *)(puVar2 + -4) != '\0') {
      iVar1 = (**(code **)(*grim_interface_ptr + 0x14c))(puVar3);
      puVar6 = &uStack_38;
      uVar5 = 0x41700000;
      fStack_3c = (_camera_offset_y + (float)puVar2[2]) - 50.0;
      fStack_40 = ((_camera_offset_x + (float)puVar2[1]) - (float)iVar1 * 0.5) - 4.0;
      fVar4 = (float)(iVar1 + 8);
      (**(code **)(*grim_interface_ptr + 0xd0))(&fStack_40,fVar4,0x41700000,puVar6);
      (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,puVar6);
      (**(code **)(*grim_interface_ptr + 0x144))(fVar4,uVar5,puVar3);
    }
    puVar2 = puVar2 + 0x26;
    puVar3 = puVar3 + 0x40;
  } while ((int)puVar2 < 0x4aa348);
  return;
}



/* FUN_004457c0 @ 004457c0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_004457c0(void)

{
  char *pcVar1;
  undefined1 *puVar2;
  int *piVar3;
  char cVar4;
  int iVar5;
  char *pcVar6;
  uint uVar7;
  undefined4 *puVar8;
  int iVar9;
  char unaff_BL;
  undefined4 unaff_ESI;
  char *pcVar10;
  float10 fVar11;
  longlong lVar12;
  undefined4 uVar13;
  float fVar14;
  float fVar15;
  float fStack_24;
  float fStack_20;
  float local_14;
  float fStack_10;
  float fStack_c;
  undefined4 uStack_8;
  
  if ((DAT_004d1528 & 1) == 0) {
    _DAT_004d7570 = player_pos_x + 128.0;
    DAT_004d1528 = DAT_004d1528 | 1;
    _DAT_004d7574 = player_pos_y;
    crt_atexit(&DAT_00445ff0);
  }
  piVar3 = grim_interface_ptr;
  if (DAT_00478c94 != '\0') {
    DAT_004d7588 = 0;
    DAT_004d14a8 = 0;
    DAT_00478c94 = '\0';
  }
  local_14 = (float)config_screen_height - 128.0;
  (&DAT_004d14a9)[DAT_004d7588] = 0;
  cVar4 = (**(code **)(*piVar3 + 0x44))(0x1c);
  if ((cVar4 != '\0') && (0 < DAT_004d7588)) {
    sfx_play(sfx_ui_typeenter);
    DAT_004d7578 = DAT_004d7578 + 1;
    (&DAT_004d14a8)[DAT_004d7588] = 0;
    iVar5 = FUN_00445590(&DAT_004d14a8);
    if (iVar5 == -1) {
      pcVar10 = &DAT_004d14a8;
      pcVar6 = s_reload_00478e38;
      do {
        if (((*pcVar6 != *pcVar10) || (*pcVar6 == '\0')) ||
           (pcVar1 = pcVar6 + 1, *pcVar1 != pcVar10[1])) break;
        pcVar6 = pcVar6 + 2;
        pcVar10 = pcVar10 + 2;
      } while (*pcVar1 != '\0');
    }
    else {
      unaff_BL = '\x01';
      _DAT_004d7570 = (float)(&creature_pos_x)[iVar5 * 0x26];
      _DAT_004d7574 = (&creature_pos_y)[iVar5 * 0x26];
      DAT_004d757c = DAT_004d757c + 1;
    }
    DAT_004d7588 = 0;
    DAT_004d14a8 = 0;
  }
  iVar5 = console_input_poll();
  if ((iVar5 != 0) && (iVar5 != 0xd)) {
    if (iVar5 == 8) {
      uVar7 = _rand();
      uVar7 = uVar7 & 0x80000001;
      if ((int)uVar7 < 0) {
        uVar7 = (uVar7 - 1 | 0xfffffffe) + 1;
      }
      sfx_play(uVar7 + _sfx_ui_typeclick_01);
      if (DAT_004d7588 < 1) {
        DAT_004d14a8 = 0;
      }
      else {
        puVar2 = &DAT_004d14a7 + DAT_004d7588;
        DAT_004d7588 = DAT_004d7588 + -1;
        *puVar2 = 0;
      }
    }
    else {
      if (DAT_004d7588 < 0x11) {
        (&DAT_004d14a8)[DAT_004d7588] = (char)iVar5;
        DAT_004d7588 = DAT_004d7588 + 1;
      }
      (&DAT_004d14a8)[DAT_004d7588] = 0;
      uVar7 = _rand();
      uVar7 = uVar7 & 0x80000001;
      if ((int)uVar7 < 0) {
        uVar7 = (uVar7 - 1 | 0xfffffffe) + 1;
      }
      sfx_play(uVar7 + _sfx_ui_typeclick_01);
    }
  }
  perks_update_effects();
  if (time_scale_active != '\0') {
    frame_dt = frame_dt * 0.3;
    _time_scale_factor = 0x3e99999a;
    lVar12 = __ftol();
    frame_dt_ms = (int)lVar12;
  }
  effects_update();
  if (game_state_id == 0x12) {
    creature_update_all();
    projectile_update();
    if ((game_state_id == 0x12) && (render_overlay_player_index = 0, 0 < _config_player_count)) {
      do {
        player_fire_weapon('p',unaff_BL);
        render_overlay_player_index = render_overlay_player_index + 1;
      } while (render_overlay_player_index < _config_player_count);
    }
  }
  render_overlay_player_index = 0;
  player_weapon_id = 3;
  player_ammo = 0x41f00000;
  if (DAT_0047eec8 == '\0') {
    survival_spawn_cooldown = survival_spawn_cooldown - _config_player_count * frame_dt_ms;
  }
  while (survival_spawn_cooldown < 0) {
    survival_spawn_cooldown = survival_spawn_cooldown + (0xdac - survival_elapsed_ms / 800);
    if (survival_spawn_cooldown < 100) {
      survival_spawn_cooldown = 100;
    }
    uStack_8 = 0x3f800000;
    fVar11 = (float10)(survival_elapsed_ms + 1);
    local_14 = (float)(fVar11 * (float10)8.333333e-06 + (float10)0.3);
    fStack_10 = (float)(fVar11 * (float10)10000.0 + (float10)0.3);
    fVar11 = (float10)fsin(fVar11 * (float10)0.000100000005);
    fStack_c = (float)(fVar11 + (float10)0.3);
    if (0.0 <= local_14) {
      if (1.0 < local_14) {
        local_14 = 1.0;
      }
    }
    else {
      local_14 = 0.0;
    }
    if (0.0 <= fStack_10) {
      if (1.0 < fStack_10) {
        fStack_10 = 1.0;
      }
    }
    else {
      fStack_10 = 0.0;
    }
    if (0.0 <= fStack_c) {
      if (1.0 < fStack_c) {
        fStack_c = 1.0;
      }
    }
    else {
      fStack_c = 0.0;
    }
    DAT_004d758c = DAT_004d758c + 1;
    fcos((float10)survival_elapsed_ms * (float10)0.001);
    iVar5 = creature_spawn_tinted((float *)&stack0xffffffcc,&local_14,4);
    FUN_00445380(iVar5);
    fStack_24 = -64.0;
    fVar11 = (float10)fcos((float10)survival_elapsed_ms * (float10)0.001);
    fStack_20 = (float)((float10)terrain_texture_height * (float10)0.5 + fVar11 * (float10)256.0);
    iVar5 = creature_spawn_tinted(&fStack_24,&local_14,2);
    FUN_00445380(iVar5);
  }
  highscore_score_xp = player_experience;
  if (DAT_0047eec8 == '\0') {
    _bonus_weapon_power_up_timer = 0;
    survival_elapsed_ms = survival_elapsed_ms + frame_dt_ms;
    _bonus_reflex_boost_timer = 0;
    time_scale_active = '\0';
    (&DAT_0048708c)[player_weapon_id] = (&DAT_0048708c)[player_weapon_id] + frame_dt_ms;
  }
  camera_update();
  gameplay_render_world();
  FUN_00445600();
  puVar8 = &bonus_pool;
  do {
    *puVar8 = 0;
    puVar8 = puVar8 + 7;
  } while ((int)puVar8 < 0x482b08);
  (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,0x3f800000);
  if ((((demo_mode_active == '\0') && (player_health <= 0.0)) && (player_death_timer < 0.0)) &&
     ((_config_player_count == 1 || ((player2_health <= 0.0 && (_player2_death_timer < 0.0)))))) {
    render_pass_mode = 0;
    game_state_pending = 7;
    ui_transition_direction = 0;
    (**(code **)(*grim_interface_ptr + 0x4c))();
    console_input_poll();
    sfx_mute_all(music_track_extra_0);
    sfx_mute_all(music_track_crimson_theme_id);
    sfx_mute_all(music_track_shortie_monk_id);
    sfx_play_exclusive(music_track_shortie_monk_id);
  }
  frame_dt = (float)unaff_ESI;
  lVar12 = __ftol();
  frame_dt_ms = (int)lVar12;
  perk_prompt_update_and_render();
  hud_update_and_render();
  (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,0x3f800000);
  (**(code **)(*grim_interface_ptr + 0x20))(0x15,1);
  fVar15 = 0.0;
  (**(code **)(*grim_interface_ptr + 0xc4))(DAT_0048f7c4,0);
  (**(code **)(*grim_interface_ptr + 0xfc))(0);
  (**(code **)(*grim_interface_ptr + 0x100))(0,0,0x3f800000,0x3f800000);
  (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,0x3f333333);
  (**(code **)(*grim_interface_ptr + 0xe8))();
  fVar14 = -1.0;
  (**(code **)(*grim_interface_ptr + 0x11c))(0xbf800000,fVar15 - 16.0,0x43360000,0x42540000);
  (**(code **)(*grim_interface_ptr + 0xf0))();
  (**(code **)(*grim_interface_ptr + 0x20))(0x15,2);
  (**(code **)(*grim_interface_ptr + 0x20))(0x18,0x3f000000);
  (**(code **)(*grim_interface_ptr + 0x148))
            (grim_interface_ptr,0x40c00000,fVar14 + 1.0,&DAT_004712bc,&DAT_004d14a8);
  uVar13 = 0x3f800000;
  fVar11 = (float10)fsin((float10)_DAT_0047ea4c * (float10)4.0);
  if ((float10)0.0 < fVar11) {
    uVar13 = 0x3ecccccd;
  }
  (**(code **)(*grim_interface_ptr + 0x114))(0x3f800000,0x3f800000,0x3f800000,uVar13);
  iVar5 = *grim_interface_ptr;
  iVar9 = (**(code **)(iVar5 + 0x14c))(&DAT_004d14a8,fVar14 + 1.0,&DAT_004712b8);
  (**(code **)(iVar5 + 0x148))(grim_interface_ptr,(float)iVar9 + 14.0);
  highscore_record_shots_hit = DAT_004d757c;
  highscore_record_shots_fired = DAT_004d7578;
  ui_elements_update_and_render();
  return;
}



/* input_any_key_pressed @ 00446000 */

/* returns true if any key is down (scans keycodes 2..0x17e) */

int input_any_key_pressed(void)

{
  int iVar1;
  int iVar2;
  
  iVar2 = 2;
  do {
    iVar1 = (**(code **)(*grim_interface_ptr + 0x80))(iVar2);
    if ((char)iVar1 != '\0') {
      return CONCAT31((int3)((uint)iVar1 >> 8),1);
    }
    iVar2 = iVar2 + 1;
  } while (iVar2 < 0x17f);
  return iVar1;
}



/* input_primary_just_pressed @ 00446030 */

/* edge-detect primary action (mouse button 0 or per-player fire key DAT_00490bec) */

int input_primary_just_pressed(void)

{
  char cVar1;
  char extraout_AL;
  undefined4 in_EAX;
  uint3 uVar3;
  undefined4 uVar2;
  uint3 extraout_var;
  undefined4 *puVar4;
  bool bVar5;
  
  uVar3 = (uint3)((uint)in_EAX >> 8);
  if (DAT_0047eec8 == '\0') {
    if (input_primary_latch == '\0') {
      cVar1 = (**(code **)(*grim_interface_ptr + 0x58))(0);
      if (cVar1 != '\0') {
        input_primary_latch = '\x01';
      }
      puVar4 = &player_fire_key;
      do {
        uVar2 = (**(code **)(*grim_interface_ptr + 0x80))(*puVar4);
        if ((char)uVar2 != '\0') {
          input_primary_latch = '\x01';
        }
        puVar4 = puVar4 + 0xd8;
      } while ((int)puVar4 < 0x4912ac);
      uVar3 = (uint3)((uint)uVar2 >> 8);
      if (input_primary_latch != '\0') {
        return CONCAT31(uVar3,1);
      }
    }
    else {
      cVar1 = (**(code **)(*grim_interface_ptr + 0x58))(0);
      bVar5 = cVar1 == '\0';
      puVar4 = &player_fire_key;
      do {
        (**(code **)(*grim_interface_ptr + 0x80))(*puVar4);
        if (extraout_AL != '\0') {
          bVar5 = false;
        }
        puVar4 = puVar4 + 0xd8;
      } while ((int)puVar4 < 0x4912ac);
      uVar3 = extraout_var;
      if (bVar5) {
        input_primary_latch = '\0';
      }
    }
  }
  return (uint)uVar3 << 8;
}



/* input_primary_is_down @ 004460f0 */

/* returns true while primary action is held (mouse button 0 or primary fire keys) */

int input_primary_is_down(void)

{
  char cVar1;
  
  cVar1 = (**(code **)(*grim_interface_ptr + 0x58))(0);
  if (cVar1 == '\0') {
    cVar1 = (**(code **)(*grim_interface_ptr + 0x80))(player_fire_key);
    if (cVar1 == '\0') {
      cVar1 = (**(code **)(*grim_interface_ptr + 0x80))(player_alt_fire_key);
      if (cVar1 == '\0') {
        return 0;
      }
    }
  }
  return 1;
}



/* FUN_00446140 @ 00446140 */

void FUN_00446140(void)

{
  return;
}



/* FUN_00446150 @ 00446150 */

int __cdecl FUN_00446150(int param_1)

{
  int iVar1;
  int *piVar2;
  
  iVar1 = 0;
  piVar2 = &ui_element_table_end;
  do {
    if (param_1 == *piVar2) {
      return iVar1;
    }
    piVar2 = piVar2 + 1;
    iVar1 = iVar1 + 1;
  } while ((int)piVar2 < 0x48f20c);
  return -1;
}



/* ui_elements_reset_state @ 00446170 */

/* clears active flags and hover timers on all UI elements */

void ui_elements_reset_state(void)

{
  int *piVar1;
  int *piVar2;
  
  piVar1 = &ui_element_table_end;
  do {
    piVar2 = piVar1 + 1;
    *(undefined1 *)*piVar1 = 0;
    *(undefined4 *)(*piVar1 + 0x2f8) = 0;
    piVar1 = piVar2;
  } while ((int)piVar2 < 0x48f20c);
  return;
}



/* ui_elements_max_timeline @ 00446190 */

/* returns max timeline value (element +0x10) among active UI elements */

int ui_elements_max_timeline(void)

{
  int iVar1;
  int iVar2;
  undefined4 *puVar3;
  
  iVar2 = 0;
  puVar3 = &ui_element_table_end;
  do {
    if ((*(char *)*puVar3 != '\0') && (iVar1 = *(int *)((char *)*puVar3 + 0x10), iVar2 < iVar1)) {
      iVar2 = iVar1;
    }
    puVar3 = puVar3 + 1;
  } while ((int)puVar3 < 0x48f20c);
  return iVar2;
}



/* game_state_set @ 004461c0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* resets UI state, updates game_state_prev/id, and seeds UI elements for the new state */

void __cdecl game_state_set(int state_id)

{
  int iVar1;
  bool bVar2;
  int iVar3;
  int iVar4;
  char *pcVar5;
  float fVar6;
  undefined1 auStack_10 [16];
  
  iVar1 = state_id;
  ui_elements_reset_state();
  game_paused_flag = 0;
  game_state_prev = game_state_id;
  game_state_id = state_id;
  _DAT_00487238 = 0;
  DAT_00487241 = 0;
  (**(code **)(*grim_interface_ptr + 0x4c))();
  console_input_poll();
  if (state_id == 0) {
    DAT_0048724d = '\0';
    render_pass_mode = '\0';
    DAT_00487290 = 1;
    iVar3 = game_is_full_version();
    if ((char)iVar3 != '\0') {
      bVar2 = FUN_0040e940();
      if (bVar2) {
        DAT_00488208 = 1;
      }
    }
    iVar3 = game_is_full_version();
    if ((char)iVar3 == '\0') {
      DAT_00488208 = 1;
    }
    else {
      _DAT_0048823c = &LAB_00447350;
    }
    state_id = 0;
    iVar3 = 2;
    do {
      if (iVar3 == 2) {
        iVar4 = game_is_full_version();
        if ((char)iVar4 != '\0') {
          state_id = 4;
        }
      }
      pcVar5 = (char *)(**(code **)(*grim_interface_ptr + 0x24))(auStack_10,100);
      if (*pcVar5 == '\0') {
        if (iVar3 == 6) {
          state_id = 6;
        }
        *(undefined4 *)((&ui_element_table_end)[iVar3] + 0x204) = DAT_0048f7f4;
        iVar4 = (&ui_element_table_end)[iVar3];
        *(undefined4 *)(iVar4 + 0x138) = 0;
        *(float *)(iVar4 + 0x13c) = (float)state_id * 0.125;
        iVar4 = (&ui_element_table_end)[iVar3];
        *(undefined4 *)(iVar4 + 0x154) = 0x3f800000;
        *(float *)(iVar4 + 0x158) = (float)state_id * 0.125;
        iVar4 = (&ui_element_table_end)[iVar3];
        *(undefined4 *)(iVar4 + 0x170) = 0x3f800000;
        fVar6 = (float)(state_id + 1) * 0.125;
        *(float *)(iVar4 + 0x174) = fVar6;
        iVar4 = (&ui_element_table_end)[iVar3];
        *(undefined4 *)(iVar4 + 0x18c) = 0;
      }
      else {
        *(undefined4 *)((&ui_element_table_end)[iVar3] + 0x204) = DAT_0048f7f4;
        iVar4 = (&ui_element_table_end)[iVar3];
        *(undefined4 *)(iVar4 + 0x138) = 0;
        *(float *)(iVar4 + 0x13c) = (float)state_id * 0.125;
        iVar4 = (&ui_element_table_end)[iVar3];
        *(undefined4 *)(iVar4 + 0x154) = 0x3f800000;
        *(float *)(iVar4 + 0x158) = (float)state_id * 0.125;
        iVar4 = (&ui_element_table_end)[iVar3];
        *(undefined4 *)(iVar4 + 0x170) = 0x3f800000;
        fVar6 = (float)(state_id + 1) * 0.125;
        *(float *)(iVar4 + 0x174) = fVar6;
        iVar4 = (&ui_element_table_end)[iVar3];
        *(undefined4 *)(iVar4 + 0x18c) = 0;
      }
      *(float *)(iVar4 + 400) = fVar6;
      if (iVar3 == 2) {
        iVar4 = game_is_full_version();
        if ((char)iVar4 != '\0') {
          state_id = 0;
        }
      }
      iVar4 = state_id + 1;
      if (iVar4 == 4) {
        iVar4 = state_id + 2;
      }
      iVar3 = iVar3 + 1;
      state_id = iVar4;
    } while (iVar3 < 8);
    iVar3 = game_is_full_version();
    if ((char)iVar3 == '\0') {
      DAT_00488208 = 1;
    }
    DAT_004878c0 = 1;
    DAT_00487bd8 = 1;
    DAT_00487ef0 = 1;
    DAT_00488520 = 1;
    pcVar5 = (char *)(**(code **)(*grim_interface_ptr + 0x24))(auStack_10,100);
    if (*pcVar5 == '\0') {
      DAT_00488520 = 0;
    }
    DAT_00488838 = 1;
  }
  else if (state_id == 0x16) {
    render_pass_mode = '\0';
    DAT_00487292 = 0;
  }
  else if (state_id == 9) {
    DAT_0048eb38 = 1;
    DAT_0048702c = 0;
    if (render_pass_mode == '\0') {
      DAT_0048724d = '\0';
      gameplay_reset_state();
      iVar4 = _quest_stage_minor;
      iVar3 = _quest_stage_major;
      if (_config_game_mode == 3) {
        *(int *)(&quest_play_counts + (_quest_stage_minor + _quest_stage_major * 10) * 4) =
             *(int *)(&quest_play_counts + (_quest_stage_minor + _quest_stage_major * 10) * 4) + 1;
        quest_start_selected(iVar3,iVar4);
        render_pass_mode = '\x01';
        DAT_00487241 = 1;
      }
      else if (_config_game_mode == 2) {
        render_pass_mode = '\x01';
        DAT_00485788 = DAT_00485788 + 1;
        DAT_00487241 = 1;
      }
      else if (_config_game_mode == 1) {
        render_pass_mode = '\x01';
        DAT_00485784 = DAT_00485784 + 1;
        DAT_00487241 = 1;
      }
      else if (_config_game_mode == 4) {
        render_pass_mode = '\x01';
        DAT_0048578c = DAT_0048578c + 1;
        DAT_00487241 = 1;
      }
      else {
        render_pass_mode = '\x01';
        DAT_00485790 = DAT_00485790 + 1;
        DAT_00487241 = 1;
      }
    }
  }
  else if (state_id == 0x12) {
    _config_player_count = 1;
    DAT_00478c94 = 1;
    DAT_0048eb38 = 1;
    DAT_0048702c = 0;
    if (render_pass_mode == '\0') {
      DAT_0048724d = '\0';
      gameplay_reset_state();
      render_pass_mode = '\x01';
      DAT_00487241 = 1;
    }
  }
  else if (state_id == 1) {
    DAT_00487290 = 1;
    DAT_00489498 = 1;
    DAT_004897b0 = 1;
  }
  else if (state_id == 2) {
    if (DAT_004824d1 == '\0') {
      DAT_00487290 = 1;
    }
    DAT_00488b50 = 1;
    _DAT_0048cf78 = 0xc2680000;
    DAT_00488e68 = 1;
    DAT_00487234 = 0;
    _DAT_0048cf7c = (((float)config_screen_width * 0.0015625 * 150.0 + 10.0) - 150.0) + 135.0;
  }
  else if (state_id == 4) {
    DAT_0048724d = '\0';
    DAT_00487290 = 1;
    DAT_0048e820 = 1;
    _DAT_0048e858 = &LAB_0043f550;
  }
  else if (state_id == 0xd) {
    _DAT_00489e18 = FUN_00446140;
LAB_00446764:
    DAT_00489de0._0_1_ = 1;
    DAT_00487290 = 1;
    thunk_FUN_0043afa0();
  }
  else if (state_id == 3) {
    DAT_00487290 = 1;
    _DAT_0048cf78 = 0xc3340000;
    DAT_0048d278 = 1;
    DAT_0048d590 = 1;
    DAT_0048ee50._0_1_ = 1;
    _DAT_0048cf7c = ((float)config_screen_width * 0.0015625 * 150.0 - 150.0) + 139.0;
  }
  else if (state_id == 0xe) {
    DAT_0048a0f8 = 1;
    _DAT_00489e18 = (code *)&LAB_004423d0;
    goto LAB_00446764;
  }
  _DAT_0048a130 = 0;
  if (iVar1 == 0x13) {
    DAT_00487290 = 1;
    DAT_00489de0._0_1_ = 1;
  }
  else if (iVar1 == 0x1a) {
    DAT_00487290 = 1;
    DAT_00489de0._0_1_ = 1;
    _DAT_00489e18 = (code *)&LAB_0040f4f0;
  }
  else if (iVar1 == 0x14) {
    DAT_00487290 = 1;
    DAT_00489de0._0_1_ = 1;
    _DAT_00489e18 = (code *)&LAB_0040e9a0;
  }
  else if (iVar1 == 0xf) {
    DAT_00487290 = 1;
    DAT_00489de0._0_1_ = 1;
    DAT_0048a0f8 = 1;
    _DAT_00489e18 = (code *)&LAB_00440110;
  }
  else if (iVar1 == 0x10) {
    DAT_00487290 = 1;
    DAT_00489de0._0_1_ = 1;
    DAT_0048a0f8 = 1;
    _DAT_00489e18 = (code *)&LAB_00440960;
  }
  else if (iVar1 == 0x11) {
    DAT_00487234 = 0;
    DAT_00487290 = 1;
    DAT_00489de0._0_1_ = 1;
    _DAT_00489e18 = (code *)&LAB_0040d800;
  }
  else if (iVar1 == 0xb) {
    DAT_00487290 = 1;
    DAT_0048e1f0 = 1;
  }
  else if (iVar1 == 5) {
    if (DAT_004824d1 == '\0') {
      DAT_00487290 = 1;
    }
    DAT_00487292 = 0;
    DAT_0048b9b8 = 1;
    DAT_0048bcd0 = 1;
    DAT_0048bfe8 = 1;
  }
  else if (iVar1 == 6) {
    DAT_0048c618 = 1;
  }
  else if (iVar1 == 8) {
    DAT_0048dbc0 = 1;
    game_save_status();
    DAT_00487234 = 0xfffffffe;
  }
  else {
    if (iVar1 == 0x15) {
      DAT_0048dbc0 = 1;
    }
    else if (iVar1 == 0xc) {
      DAT_0048dbc0 = 1;
    }
    else {
      if (iVar1 != 7) goto LAB_004468da;
      DAT_0048cc48 = 1;
      _DAT_00487260 = 0;
    }
    DAT_00487234 = 0xffffffff;
  }
LAB_004468da:
  if (DAT_0048724d != '\0') {
    DAT_00487290 = 0;
  }
  ui_elements_timeline = 0;
  ui_transition_direction = 1;
  return;
}



/* FUN_00446900 @ 00446900 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __cdecl FUN_00446900(char *param_1)

{
  char cVar1;
  char *pcVar2;
  int iVar3;
  float fVar4;
  char *pcVar5;
  int iVar6;
  int iVar7;
  int *piVar8;
  float10 fVar9;
  float10 fVar10;
  
  pcVar5 = param_1;
  if ((param_1[2] == '\0') && (*param_1 != '\0')) {
    if (((ui_mouse_x <= *(float *)(param_1 + 0x20)) ||
        (((ui_mouse_y <= *(float *)(param_1 + 0x24) || (*(float *)(param_1 + 0x28) <= ui_mouse_x))
         || (*(float *)(param_1 + 0x2c) <= ui_mouse_y)))) ||
       ((ui_mouse_blocked != '\0' || (DAT_004871ca != '\0')))) {
      param_1[0x2f4] = '\0';
    }
    else {
      param_1[0x2f4] = '\x01';
      if ((param_1[1] != '\0') && (*(int *)(param_1 + 0x34) != 0)) {
        _DAT_0048723c = param_1;
        _DAT_00487238 = 0;
        piVar8 = &ui_element_table_end;
        do {
          pcVar2 = (char *)*piVar8;
          if ((pcVar2[1] != '\0') && ((game_state_id != 0 || (*(int *)(pcVar2 + 0x34) != 0)))) {
            if (param_1 == pcVar2) break;
            _DAT_00487238 = _DAT_00487238 + 1;
          }
          piVar8 = piVar8 + 1;
        } while ((int)piVar8 < 0x48f20c);
      }
    }
    *(int *)(param_1 + 0x2fc) = *(int *)(param_1 + 0x2fc) + frame_dt_ms;
    cVar1 = param_1[0x2f4];
    if (cVar1 == '\0') {
      *(int *)(param_1 + 0x2f8) = *(int *)(param_1 + 0x2f8) + frame_dt_ms * -2;
    }
    else {
      *(int *)(param_1 + 0x2f8) = *(int *)(param_1 + 0x2f8) + frame_dt_ms * 6;
    }
    if (*(int *)(param_1 + 0x2f8) < 0) {
      pcVar5[0x2f8] = '\0';
      pcVar5[0x2f9] = '\0';
      pcVar5[0x2fa] = '\0';
      pcVar5[0x2fb] = '\0';
    }
    if (1000 < *(int *)(param_1 + 0x2f8)) {
      pcVar5[0x2f8] = -0x18;
      pcVar5[0x2f9] = '\x03';
      pcVar5[0x2fa] = '\0';
      pcVar5[0x2fb] = '\0';
    }
    if ((((*(int *)(param_1 + 0x34) != 0) && (0xfe < *(int *)(param_1 + 0x2fc))) && (cVar1 != '\0'))
       && (iVar6 = input_primary_just_pressed(), (char)iVar6 != '\0')) {
      sfx_play(sfx_ui_buttonclick);
      (**(code **)(param_1 + 0x34))();
    }
    iVar6 = *(int *)(param_1 + 0x10);
    if (ui_elements_timeline < iVar6) {
      iVar3 = *(int *)(param_1 + 0x14);
      if (ui_elements_timeline < iVar3) {
        cVar1 = param_1[0x314];
        param_1 = (char *)0x3fc90fdb;
        pcVar5[0xc] = '\0';
        pcVar5[0xd] = '\0';
        pcVar5[0xe] = '\0';
        pcVar5[0xf] = '\0';
        if (cVar1 == '\0') {
          *(float *)(pcVar5 + 8) = -ABS(*(float *)(pcVar5 + 0x3c) - *(float *)(pcVar5 + 0x58));
        }
        else {
          *(float *)(pcVar5 + 8) = ABS(*(float *)(pcVar5 + 0x3c) - *(float *)(pcVar5 + 0x58));
        }
      }
      else {
        iVar7 = ui_elements_timeline - iVar3;
        pcVar5[0xc] = '\0';
        pcVar5[0xd] = '\0';
        pcVar5[0xe] = '\0';
        pcVar5[0xf] = '\0';
        fVar4 = (float)(iVar6 - iVar3);
        pcVar2 = (char *)(1.5707964 - ((float)iVar7 * 1.5707964) / fVar4);
        if (param_1[0x314] == '\0') {
          *(float *)(param_1 + 8) =
               -((1.0 - ((float)ui_elements_timeline - (float)iVar3) / fVar4) *
                ABS(*(float *)(param_1 + 0x3c) - *(float *)(param_1 + 0x58)));
          param_1 = pcVar2;
        }
        else {
          *(float *)(param_1 + 8) =
               (1.0 - ((float)ui_elements_timeline - (float)iVar3) / fVar4) *
               ABS(*(float *)(param_1 + 0x3c) - *(float *)(param_1 + 0x58));
          param_1 = pcVar2;
        }
      }
    }
    else {
      if (param_1[1] == '\0') {
        sfx_play(sfx_ui_panelclick);
        param_1[1] = '\x01';
      }
      if (*(int *)(param_1 + 0x2fc) < 0x100) {
        *(int *)(param_1 + 0x2fc) = *(int *)(param_1 + 0x2fc) + frame_dt_ms;
      }
      pcVar5[8] = '\0';
      pcVar5[9] = '\0';
      pcVar5[10] = '\0';
      pcVar5[0xb] = '\0';
      param_1 = (char *)0x0;
      pcVar5[0xc] = '\0';
      pcVar5[0xd] = '\0';
      pcVar5[0xe] = '\0';
      pcVar5[0xf] = '\0';
    }
    iVar6 = FUN_00446150((int)pcVar5);
    if (iVar6 == 0) {
      param_1 = (char *)-ABS((float)param_1);
    }
    if ((ui_elements_timeline < *(int *)(pcVar5 + 0x10)) && (pcVar5[1] != '\0')) {
      pcVar5[1] = '\0';
    }
    fVar9 = (float10)fcos((float10)(float)param_1);
    *(float *)(pcVar5 + 0x304) = (float)fVar9;
    fVar10 = (float10)fsin((float10)(float)param_1);
    *(float *)(pcVar5 + 0x308) = (float)-fVar10;
    *(float *)(pcVar5 + 0x30c) = (float)fVar10;
    *(float *)(pcVar5 + 0x310) = (float)fVar9;
  }
  return;
}



/* ui_element_render @ 00446c40 */

/* updates focus/click handling and renders a UI element */

void __cdecl ui_element_render(void *element)

{
  float ***pppfVar1;
  undefined4 ***pppuVar2;
  int iVar3;
  char cVar4;
  int iVar5;
  undefined1 *puVar6;
  char *pcVar7;
  char cVar8;
  undefined4 ***pppuStack_98;
  undefined4 ***pppuStack_94;
  undefined4 ***pppuStack_90;
  float fStack_8c;
  float **ppfStack_88;
  undefined4 ***pppuStack_84;
  float **ppfStack_80;
  float fStack_7c;
  int iStack_78;
  float *pfStack_74;
  undefined4 **ppuStack_70;
  float fStack_6c;
  undefined4 uStack_68;
  float fStack_64;
  float fStack_60;
  float *pfStack_5c;
  undefined4 uStack_58;
  undefined4 uStack_54;
  undefined4 uStack_50;
  undefined4 *apuStack_4c [2];
  undefined4 uStack_44;
  undefined4 uStack_40;
  undefined4 local_3c;
  undefined4 uStack_38;
  undefined4 uStack_34;
  
  cVar8 = '\0';
  if (*(char *)element == '\0') {
    return;
  }
  if ((*(float *)((int)element + 0x300) == 0.0) && (*(float *)(DAT_0048088c + 0xc) != 0.0)) {
    uStack_40 = 0x15;
    local_3c = 1;
    uStack_44 = 0x446c95;
    (**(code **)(*grim_interface_ptr + 0x20))();
  }
  if ((*(int *)((int)element + 0x34) != 0) && (element != &DAT_0048f20c)) {
    uStack_34 = 0x446caa;
    iVar5 = ui_focus_update((int)element);
    cVar8 = (char)iVar5;
    if (cVar8 != '\0') {
      uStack_34 = 0x446cc0;
      cVar4 = (**(code **)(*grim_interface_ptr + 0x48))();
      if ((((cVar4 != '\0') && (DAT_0047eec8 == '\0')) && (*(char *)((int)element + 1) != '\0')) &&
         (*(code **)((int)element + 0x34) != (code *)0x0)) {
        (**(code **)((int)element + 0x34))();
      }
    }
  }
  uStack_34 = 0x3f800000;
  uStack_38 = 0;
  local_3c = 0;
  uStack_40 = 0x446cf9;
  (**(code **)(*grim_interface_ptr + 0x100))();
  uStack_40 = 0;
  uStack_44 = 0x446d09;
  (**(code **)(*grim_interface_ptr + 0xfc))();
  if (*(int *)((int)element + 0x204) != -1) {
    if ((cVar8 != '\0') && (0 < DAT_004d11ec)) {
      *(int *)((int)element + 0x2f8) = DAT_004d11ec;
    }
    if (*(int *)((int)element + 0x34) == 0) {
      puVar6 = (undefined1 *)((int)element + 0x137);
      iVar5 = 4;
      do {
        *puVar6 = 200;
        puVar6 = puVar6 + 0x1c;
        iVar5 = iVar5 + -1;
      } while (iVar5 != 0);
    }
    else {
      iVar5 = 4;
      pcVar7 = (char *)((int)element + 0x137);
      do {
        iVar3 = *(int *)((int)element + 0x2f8) * 0x9b;
        iVar5 = iVar5 + -1;
        *pcVar7 = (((char)(iVar3 / 1000) + (char)(iVar3 >> 0x1f)) -
                  (char)((longlong)iVar3 * 0x10624dd3 >> 0x3f)) + 'd';
        pcVar7 = pcVar7 + 0x1c;
      } while (iVar5 != 0);
    }
  }
  uStack_54 = 0x13;
  uStack_50 = 5;
  uStack_58 = 0x446d92;
  (**(code **)(*grim_interface_ptr + 0x20))();
  uStack_68 = 0x14;
  fStack_64 = 8.40779e-45;
  fStack_6c = 6.284154e-39;
  (**(code **)(*grim_interface_ptr + 0x20))();
  if (*(float ***)((int)element + 0x11c) != (float **)0xffffffff) {
    fStack_6c = 0.0;
    pfStack_74 = (float *)0x446dca;
    ppuStack_70 = *(float ***)((int)element + 0x11c);
    (**(code **)(*grim_interface_ptr + 0xc4))();
    uStack_38 = 0x44444444;
    if (*(int *)((int)element + 4) == 0) {
      if (config_fx_detail_flag0 != '\0') {
        fStack_7c = 2.66247e-44;
        iStack_78 = 1;
        ppfStack_80 = (float **)0x446e02;
        (**(code **)(*grim_interface_ptr + 0x20))();
        ppfStack_80 = (float **)0x446e10;
        (**(code **)(*grim_interface_ptr + 0xe8))();
        ppuStack_70 = (undefined4 **)(*(float *)((int)element + 0x18) + 7.0);
        ppfStack_80 = (float **)apuStack_4c;
        pppfVar1 = (float ***)((int)element + 0x304);
        fStack_6c = *(float *)((int)element + 0x1c) + 7.0;
        ppfStack_88 = (float **)&ppuStack_70;
        pppuStack_90 = (undefined4 ***)((int)element + 0x3c);
        fStack_8c = 5.60519e-45;
        pppuStack_94 = (undefined4 ***)0x446e4f;
        pppuStack_84 = pppfVar1;
        (**(code **)(*grim_interface_ptr + 0x134))();
        if (*(int *)((int)element + 0x120) == 8) {
          pppuStack_84 = (undefined4 ***)(*(float *)((int)element + 0x18) + 7.0);
          pppuStack_94 = (undefined4 ***)&fStack_60;
          ppfStack_80 = (float **)(*(float *)((int)element + 0x1c) + 7.0);
          pppuStack_98 = pppfVar1;
          (**(code **)(*grim_interface_ptr + 0x134))((int)element + 0x74,4,&pppuStack_84);
          pppuStack_98 = (undefined4 ***)(*(float *)((int)element + 0x18) + 7.0);
          pppuStack_94 = (undefined4 ***)(*(float *)((int)element + 0x1c) + 7.0);
          (**(code **)(*grim_interface_ptr + 0x134))
                    ((int)element + 0xac,4,&pppuStack_98,pppfVar1,&pfStack_74);
        }
        pppuStack_94 = (float ***)0x446edb;
        (**(code **)(*grim_interface_ptr + 0xf0))();
      }
      fStack_7c = 2.66247e-44;
      iStack_78 = 5;
      ppfStack_80 = (float **)0x446ef3;
      (**(code **)(*grim_interface_ptr + 0x20))();
      ppfStack_80 = (float **)0x446f01;
      (**(code **)(*grim_interface_ptr + 0xe8))();
      pppuVar2 = (undefined4 ***)((int)element + 0x304);
      pppfVar1 = (float ***)((int)element + 0x18);
      fStack_8c = (float)((int)element + 0x3c);
      ppfStack_88 = (float **)0x4;
      pppuStack_90 = (undefined4 ***)0x446f20;
      pppuStack_84 = pppfVar1;
      ppfStack_80 = (float **)pppuVar2;
      (**(code **)(*grim_interface_ptr + 0x128))();
      if (*(int *)((int)element + 0x120) == 8) {
        pppuStack_98 = (undefined4 ***)0x4;
        pppuStack_94 = pppfVar1;
        pppuStack_90 = pppuVar2;
        (**(code **)(*grim_interface_ptr + 0x128))((int)element + 0x74);
        (**(code **)(*grim_interface_ptr + 0x128))((int)element + 0xac,4,pppfVar1,pppuVar2);
      }
    }
    else {
      if (*(int *)((int)element + 4) != 1) goto LAB_00447154;
      if (config_fx_detail_flag0 != '\0') {
        fStack_7c = 2.66247e-44;
        iStack_78 = 1;
        ppfStack_80 = (float **)0x446f8f;
        (**(code **)(*grim_interface_ptr + 0x20))();
        ppfStack_80 = (float **)0x446f9d;
        (**(code **)(*grim_interface_ptr + 0xe8))();
        fStack_64 = *(float *)((int)element + 0x1c) + 7.0;
        ppfStack_80 = (float **)apuStack_4c;
        pppuStack_84 = &ppuStack_70;
        fStack_8c = (float)((int)element + 0x3c);
        ppuStack_70 = (undefined4 **)
                      (*(float *)((int)element + 0x18) + 7.0 + *(float *)((int)element + 8));
        ppfStack_88 = (float **)0x4;
        fStack_6c = fStack_64 + *(float *)((int)element + 0xc);
        pppuStack_90 = (undefined4 ***)0x446fe3;
        (**(code **)(*grim_interface_ptr + 0x130))();
        if (*(int *)((int)element + 0x120) == 8) {
          pfStack_74 = (float *)(*(float *)((int)element + 0x1c) + 7.0);
          pppuStack_90 = (undefined4 ***)&pfStack_5c;
          pppuStack_94 = &ppfStack_80;
          ppfStack_80 = (float **)
                        (*(float *)((int)element + 0x18) + 7.0 + *(float *)((int)element + 8));
          pppuStack_98 = (undefined4 ***)0x4;
          fStack_7c = (float)pfStack_74 + *(float *)((int)element + 0xc);
          (**(code **)(*grim_interface_ptr + 0x130))((int)element + 0x74);
          pppuStack_84 = (undefined4 ***)(*(float *)((int)element + 0x1c) + 7.0);
          pppuStack_90 = (undefined4 ***)
                         (*(float *)((int)element + 0x18) + 7.0 + *(float *)((int)element + 8));
          fStack_8c = (float)pppuStack_84 + *(float *)((int)element + 0xc);
          (**(code **)(*grim_interface_ptr + 0x130))((int)element + 0xac,4,&pppuStack_90,&fStack_6c)
          ;
        }
        pppuStack_90 = (undefined4 ***)0x44708d;
        (**(code **)(*grim_interface_ptr + 0xf0))();
      }
      fStack_7c = 2.66247e-44;
      iStack_78 = 5;
      ppfStack_80 = (float **)0x4470a5;
      (**(code **)(*grim_interface_ptr + 0x20))();
      ppfStack_80 = (float **)0x4470b3;
      (**(code **)(*grim_interface_ptr + 0xe8))();
      ppuStack_70 = (undefined4 **)(*(float *)((int)element + 8) + *(float *)((int)element + 0x18));
      ppfStack_80 = (float **)&ppuStack_70;
      ppfStack_88 = (float **)((int)element + 0x3c);
      fStack_6c = *(float *)((int)element + 0xc) + *(float *)((int)element + 0x1c);
      pppuStack_84 = (float ***)0x4;
      fStack_8c = 6.285306e-39;
      (**(code **)(*grim_interface_ptr + 300))();
      if (*(int *)((int)element + 0x120) == 8) {
        ppfStack_80 = (float **)(*(float *)((int)element + 8) + *(float *)((int)element + 0x18));
        pppuStack_90 = &ppfStack_80;
        pppuStack_98 = (undefined4 ***)((int)element + 0x74);
        fStack_7c = *(float *)((int)element + 0xc) + *(float *)((int)element + 0x1c);
        pppuStack_94 = (float ***)0x4;
        (**(code **)(*grim_interface_ptr + 300))();
        fStack_8c = *(float *)((int)element + 8) + *(float *)((int)element + 0x18);
        ppfStack_88 = (float **)(*(float *)((int)element + 0xc) + *(float *)((int)element + 0x1c));
        (**(code **)(*grim_interface_ptr + 300))((int)element + 0xac,4,&fStack_8c);
      }
    }
    pppuStack_90 = (undefined4 ***)0x447154;
    (**(code **)(*grim_interface_ptr + 0xf0))();
  }
LAB_00447154:
  if (*(float ***)((int)element + 0x204) != (float **)0xffffffff) {
    fStack_6c = 0.0;
    pfStack_74 = (float *)0x447174;
    ppuStack_70 = *(float ***)((int)element + 0x204);
    (**(code **)(*grim_interface_ptr + 0xc4))();
    pfStack_74 = (float *)0x447182;
    (**(code **)(*grim_interface_ptr + 0xe8))();
    if (*(int *)((int)element + 4) == 0) {
      pfStack_74 = (float *)((int)element + 0x304);
      iStack_78 = (int)element + 0x18;
      ppfStack_80 = (float **)((int)element + 0x124);
      fStack_7c = 5.60519e-45;
      pppuStack_84 = (undefined4 ***)0x4471ab;
      (**(code **)(*grim_interface_ptr + 0x128))();
    }
    else {
      fStack_64 = *(float *)((int)element + 8) + *(float *)((int)element + 0x18);
      pfStack_74 = &fStack_64;
      fStack_7c = (float)((int)element + 0x124);
      fStack_60 = *(float *)((int)element + 0xc) + *(float *)((int)element + 0x1c);
      iStack_78 = 4;
      ppfStack_80 = (float **)0x4471dd;
      (**(code **)(*grim_interface_ptr + 300))();
    }
    pppuStack_84 = (float ***)0x4471eb;
    (**(code **)(*grim_interface_ptr + 0xf0))();
  }
  fStack_7c = 2.66247e-44;
  iStack_78 = 5;
  ppfStack_80 = (float **)0x447203;
  (**(code **)(*grim_interface_ptr + 0x20))();
  pppuStack_90 = (undefined4 ***)0x14;
  fStack_8c = 2.8026e-45;
  pppuStack_94 = (undefined4 ***)0x44721b;
  (**(code **)(*grim_interface_ptr + 0x20))();
  if ((-1 < *(int *)((int)element + 0x2fc)) && (*(int *)((int)element + 0x2fc) < 0x100)) {
    iVar5 = 4;
    pcVar7 = (char *)((int)element + 0x21f);
    do {
      pcVar7[-0xe8] = -1 - (char)(*(int *)((int)element + 0x2fc) / 2);
      iVar5 = iVar5 + -1;
      *pcVar7 = -1 - (char)(*(int *)((int)element + 0x2fc) / 2);
      pcVar7 = pcVar7 + 0x1c;
    } while (iVar5 != 0);
  }
  pfStack_74 = *(float **)((int)element + 0x304);
  ppuStack_70 = *(undefined4 ***)((int)element + 0x308);
  fStack_6c = *(float *)((int)element + 0x30c);
  uStack_68 = *(undefined4 *)((int)element + 0x310);
  if (((*(char *)((int)element + 1) != '\0') &&
      (*(undefined4 ****)((int)element + 0x204) != (undefined4 ***)0xffffffff)) &&
     (*(int *)((int)element + 0x34) != 0)) {
    pppuStack_94 = (undefined4 ***)0x0;
    pppuStack_98 = *(undefined4 ****)((int)element + 0x204);
    (**(code **)(*grim_interface_ptr + 0xc4))();
    (**(code **)(*grim_interface_ptr + 0xe8))();
    (**(code **)(*grim_interface_ptr + 0x128))
              ((int)element + 0x124,4,(int)element + 0x18,&fStack_7c);
    (**(code **)(*grim_interface_ptr + 0xf0))();
  }
  (**(code **)(*grim_interface_ptr + 0x20))(0x13,5);
  (**(code **)(*grim_interface_ptr + 0x20))(0x14,6);
  if (*(code **)((int)element + 0x38) != (code *)0x0) {
    (**(code **)((int)element + 0x38))();
  }
  (**(code **)(*grim_interface_ptr + 0x20))(0x15,2);
  return;
}



/* FUN_004473e0 @ 004473e0 */

void FUN_004473e0(void)

{
  ui_transition_direction = 0;
  game_state_pending = 3;
  return;
}



/* FUN_00447420 @ 00447420 */

void FUN_00447420(void)

{
  ui_transition_direction = 0;
  if (DAT_004824d1 != '\0') {
    game_state_pending = 5;
    return;
  }
  game_state_pending = -(uint)(render_pass_mode != '\0') & 5;
  return;
}



/* FUN_00447580 @ 00447580 */

void FUN_00447580(void)

{
  switch(config_detail_preset) {
  case 1:
    config_fx_detail_flag2 = 0;
  case 2:
    config_fx_detail_flag0 = 0;
    config_fx_detail_flag1 = 0;
    return;
  case 3:
  case 4:
  case 5:
    config_fx_detail_flag1 = 1;
    config_fx_detail_flag2 = 1;
    config_fx_detail_flag0 = 1;
  default:
    return;
  }
}



/* FUN_00447c90 @ 00447c90 */

char * __cdecl FUN_00447c90(undefined4 param_1)

{
  switch(param_1) {
  case 0:
    return s_Mouse_00478f10;
  case 1:
    return s_Keyboard_00478ef4;
  case 2:
    return s_Joystick_00478ee8;
  case 3:
    return s_Mouse_relative_00478f00;
  case 4:
    return s_Dual_Action_Pad_00478ed8;
  case 5:
    return s_Computer_00478ecc;
  default:
    return s_Unknown_004714a0;
  }
}



/* FUN_00447cf0 @ 00447cf0 */

char * __cdecl FUN_00447cf0(undefined4 param_1)

{
  switch(param_1) {
  case 1:
    return s_Relative_00478f34;
  case 2:
    return s_Static_00478f2c;
  case 3:
    return s_Dual_Action_Pad_00478ed8;
  case 4:
    return s_Mouse_point_click_00478f18;
  case 5:
    return s_Computer_00478ecc;
  default:
    return s_Unknown_004714a0;
  }
}



/* FUN_00448b50 @ 00448b50 */

undefined4 __fastcall FUN_00448b50(undefined4 param_1)

{
  float10 fVar1;
  
  fVar1 = (float10)(**(code **)(*grim_interface_ptr + 0x84))(0x13f,param_1);
  if (0.5 < ABS((float)fVar1)) {
    return 0x13f;
  }
  fVar1 = (float10)(**(code **)(*grim_interface_ptr + 0x84))(0x140);
  if (0.5 < ABS((float)fVar1)) {
    return 0x140;
  }
  fVar1 = (float10)(**(code **)(*grim_interface_ptr + 0x84))(0x141);
  if (0.5 < ABS((float)fVar1)) {
    return 0x141;
  }
  fVar1 = (float10)(**(code **)(*grim_interface_ptr + 0x84))(0x153);
  if (0.5 < ABS((float)fVar1)) {
    return 0x153;
  }
  fVar1 = (float10)(**(code **)(*grim_interface_ptr + 0x84))(0x154);
  if (0.5 < ABS((float)fVar1)) {
    return 0x154;
  }
  fVar1 = (float10)(**(code **)(*grim_interface_ptr + 0x84))(0x155);
  if (0.5 < ABS((float)fVar1)) {
    return 0x155;
  }
  (**(code **)(*grim_interface_ptr + 0x4c))();
  return 0;
}



/* FUN_0044ecf0 @ 0044ecf0 */

void __thiscall FUN_0044ecf0(void *this,float *param_1,float *param_2)

{
  float fVar1;
  float fVar2;
  
  fVar1 = param_2[1];
  fVar2 = *(float *)((int)this + 4);
  *param_1 = *param_2 + *(float *)this;
  param_1[1] = fVar1 + fVar2;
  return;
}



/* FUN_0044faa0 @ 0044faa0 */

void __cdecl FUN_0044faa0(undefined1 *param_1)

{
  if (param_1 == (undefined1 *)0x0) {
    console_printf(&console_log_queue,(byte *)s_____Elem____NULL__0047928c);
    return;
  }
  *(undefined4 *)(param_1 + 0x11c) = 0xffffffff;
  *(undefined4 *)(param_1 + 0x204) = 0xffffffff;
  *(undefined4 *)(param_1 + 0x2ec) = 0xffffffff;
  *(undefined4 *)(param_1 + 0x20) = 0x43690000;
  *(undefined4 *)(param_1 + 0x24) = 0x41e00000;
  *(undefined4 *)(param_1 + 0x28) = 0x43d78000;
  *(undefined4 *)(param_1 + 0x2fc) = 0x100;
  *(undefined4 *)(param_1 + 0x34) = 0;
  *(undefined4 *)(param_1 + 0x38) = 0;
  *(undefined4 *)(param_1 + 0x2c) = 0x42880000;
  *(undefined4 *)(param_1 + 0x300) = 0;
  *param_1 = 0;
  *(undefined4 *)(param_1 + 0x30) = 0x39;
  param_1[0x2f4] = 0;
  *(undefined4 *)(param_1 + 0x10) = 300;
  *(undefined4 *)(param_1 + 0x14) = 0;
  param_1[2] = 0;
  *(undefined4 *)(param_1 + 4) = 0;
  return;
}



/* FUN_0044fb50 @ 0044fb50 */

void __cdecl FUN_0044fb50(undefined *param_1)

{
  undefined4 uVar1;
  undefined4 *puVar2;
  int iVar3;
  
  if ((param_1 != &DAT_0048c300) && (param_1 != &DAT_0048c618)) {
    *(float *)(param_1 + 0x20) =
         *(float *)(param_1 + 0x3c) + *(float *)(param_1 + 0x18) + *(float *)(param_1 + 0x20);
    *(float *)(param_1 + 0x24) =
         *(float *)(param_1 + 0x40) + *(float *)(param_1 + 0x1c) + *(float *)(param_1 + 0x24);
    *(float *)(param_1 + 0x28) =
         *(float *)(param_1 + 0x3c) + *(float *)(param_1 + 0x18) + *(float *)(param_1 + 0x28);
    *(float *)(param_1 + 0x2c) =
         *(float *)(param_1 + 0x40) + *(float *)(param_1 + 0x1c) + *(float *)(param_1 + 0x2c);
    *(float *)(param_1 + 0x20) = *(float *)(param_1 + 0x3c) + *(float *)(param_1 + 0x18);
    *(float *)(param_1 + 0x24) = *(float *)(param_1 + 0x40) + *(float *)(param_1 + 0x1c);
    *(float *)(param_1 + 0x20) =
         (*(float *)(param_1 + 0x74) - *(float *)(param_1 + 0x3c)) * 0.54 +
         *(float *)(param_1 + 0x20);
    *(float *)(param_1 + 0x24) =
         (*(float *)(param_1 + 0x78) - *(float *)(param_1 + 0x40)) * 0.28 +
         *(float *)(param_1 + 0x24);
    *(float *)(param_1 + 0x28) = *(float *)(param_1 + 0x74) + *(float *)(param_1 + 0x18);
    *(float *)(param_1 + 0x2c) = *(float *)(param_1 + 0x78) + *(float *)(param_1 + 0x1c);
    *(float *)(param_1 + 0x28) =
         *(float *)(param_1 + 0x28) -
         (*(float *)(param_1 + 0x74) - *(float *)(param_1 + 0x3c)) * 0.05;
    *(float *)(param_1 + 0x2c) =
         *(float *)(param_1 + 0x2c) -
         (*(float *)(param_1 + 0x78) - *(float *)(param_1 + 0x40)) * 0.1;
    if ((param_1[0x314] != '\0') && (iVar3 = 0, 0 < *(int *)(param_1 + 0x120))) {
      puVar2 = (undefined4 *)(param_1 + 0x6c);
      do {
        uVar1 = puVar2[-7];
        iVar3 = iVar3 + 2;
        puVar2[-7] = *puVar2;
        *puVar2 = uVar1;
        puVar2 = puVar2 + 0xe;
      } while (iVar3 < *(int *)(param_1 + 0x120));
    }
  }
  return;
}



/* FUN_0044fcb0 @ 0044fcb0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_0044fcb0(void)

{
  char *pcVar1;
  int iVar2;
  int *piVar3;
  float *pfVar4;
  float *pfVar5;
  int iVar6;
  int iVar7;
  float fVar8;
  undefined4 *puVar9;
  undefined4 *puVar10;
  int iVar11;
  float fStack_30;
  float fStack_2c;
  float afStack_28 [2];
  undefined1 local_20 [32];
  
  screen_fade_alpha = 0;
  _DAT_00487288 = (float)config_screen_width * 0.0015625;
  _DAT_0048723c = 0;
  DAT_0048702c = 0;
  _DAT_0048728c = (float)config_screen_height * 0.0020833334;
  puVar9 = &ui_element_table_end;
  for (iVar6 = 0x29; iVar6 != 0; iVar6 = iVar6 + -1) {
    *puVar9 = 0;
    puVar9 = puVar9 + 1;
  }
  ui_element_table_end = &DAT_00487290;
  DAT_0048f16c = &DAT_004875a8;
  DAT_0048f170 = &DAT_00488208;
  _DAT_0048f174 = &DAT_004878c0;
  _DAT_0048f178 = &DAT_00487bd8;
  _DAT_0048f17c = &DAT_00487ef0;
  pcVar1 = (char *)(**(code **)(*grim_interface_ptr + 0x24))(local_20,100);
  if (*pcVar1 == '\0') {
    _DAT_0048f184 = &DAT_00488520;
    _DAT_0048f180 = &DAT_00488838;
  }
  else {
    _DAT_0048f180 = &DAT_00488520;
    _DAT_0048f184 = &DAT_00488838;
  }
  _DAT_0048f1e4 = &DAT_00488b50;
  DAT_0048f1e8 = &DAT_00488e68;
  _DAT_0048f190 = &DAT_00489180;
  _DAT_0048f194 = &DAT_00489498;
  DAT_0048f198 = &DAT_004897b0;
  _DAT_0048f1a4 = &DAT_0048a410;
  _DAT_0048f1a8 = &DAT_0048a728;
  _DAT_0048f1ac = &DAT_0048aa40;
  _DAT_0048f1b4 = &DAT_0048ad58;
  _DAT_0048f1b8 = &DAT_0048b070;
  _DAT_0048f1bc = &DAT_0048b388;
  DAT_0048f1c0 = &DAT_0048b6a0;
  DAT_0048f1c4 = &DAT_0048b9b8;
  _DAT_0048f1c8 = &DAT_0048bcd0;
  _DAT_0048f1cc = &DAT_0048bfe8;
  _DAT_0048f1d0 = &DAT_0048c300;
  _DAT_0048f1d4 = &DAT_0048c618;
  _DAT_0048f1d8 = &DAT_0048eb38;
  _DAT_0048f1dc = &DAT_0048c930;
  _DAT_0048f1e0 = &DAT_0048cc48;
  _DAT_0048f19c = &DAT_0048cf60;
  _DAT_0048f1a0 = &DAT_0048d278;
  DAT_0048f1b0 = &DAT_0048d590;
  _DAT_0048f188 = &DAT_00489ac8;
  _DAT_0048f18c = &DAT_00489de0;
  _DAT_0048f1ec = &DAT_0048a0f8;
  _DAT_0048f1f0 = &DAT_0048d8a8;
  _DAT_0048f1f4 = &DAT_0048dbc0;
  _DAT_0048f1f8 = &DAT_0048ded8;
  _DAT_0048f1fc = &DAT_0048e1f0;
  _DAT_0048f200 = &DAT_0048e508;
  DAT_0048f204 = &DAT_0048e820;
  ui_element_table_start = &DAT_0048ee50;
  puVar9 = &ui_element_table_end;
  do {
    FUN_0044faa0((undefined1 *)*puVar9);
    iVar6 = config_screen_width;
    puVar9 = puVar9 + 1;
  } while ((int)puVar9 < 0x48f20c);
  puVar9 = &DAT_0048fac0;
  puVar10 = &DAT_004872cc;
  for (iVar7 = 0x3a; iVar7 != 0; iVar7 = iVar7 + -1) {
    *puVar10 = *puVar9;
    puVar9 = puVar9 + 1;
    puVar10 = puVar10 + 1;
  }
  _DAT_004872a8 = (float)(iVar6 + 4);
  _DAT_004872ac = 0x428c0000;
  if (iVar6 < 0x281) {
    _DAT_004872ac = 0x42700000;
  }
  DAT_0048f7f4 = texture_get_or_load_alt(s_ui_ui_itemTexts_jaz_00479318);
  DAT_0048f7f8 = texture_get_or_load_alt(s_ui_ui_textReaper_jaz_00479300);
  DAT_0048f7fc = texture_get_or_load_alt(s_ui_ui_textControls_jaz_004792e8);
  DAT_0048f800 = texture_get_or_load_alt(s_ui_ui_textPickAPerk_jaz_004792d0);
  DAT_0048f804 = texture_get_or_load_alt(s_ui_ui_textWellDone_jaz_004792b8);
  puVar9 = &DAT_0048fba8;
  puVar10 = &DAT_00488244;
  for (iVar6 = 0x3a; iVar6 != 0; iVar6 = iVar6 + -1) {
    *puVar10 = *puVar9;
    puVar9 = puVar9 + 1;
    puVar10 = puVar10 + 1;
  }
  DAT_00488220 = 0xc2700000;
  DAT_00488224 = 0x43520000;
  afStack_28[0] = 270.0;
  afStack_28[1] = -38.0;
  ui_element_set_rect(&DAT_0048832c,124.0,30.0,afStack_28);
  _DAT_00488238 = 0x30;
  _DAT_0048823c = &LAB_0044fc70;
  iVar6 = game_is_full_version();
  if ((char)iVar6 != '\0') {
    _DAT_0048823c = &LAB_00447350;
  }
  puVar9 = &DAT_0048fba8;
  puVar10 = &DAT_004878fc;
  for (iVar6 = 0x3a; iVar6 != 0; iVar6 = iVar6 + -1) {
    *puVar10 = *puVar9;
    puVar9 = puVar9 + 1;
    puVar10 = puVar10 + 1;
  }
  _DAT_004878d8 = 0xc2700000;
  _DAT_004878dc = 0x43870000;
  afStack_28[0] = 270.0;
  afStack_28[1] = -38.0;
  ui_element_set_rect(&DAT_004879e4,124.0,30.0,afStack_28);
  _DAT_004878f4 = &LAB_00447400;
  _DAT_004878f0 = 0x19;
  afStack_28[0] = 270.0;
  puVar9 = &DAT_0048fba8;
  puVar10 = &DAT_00487c14;
  for (iVar6 = 0x3a; iVar6 != 0; iVar6 = iVar6 + -1) {
    *puVar10 = *puVar9;
    puVar9 = puVar9 + 1;
    puVar10 = puVar10 + 1;
  }
  _DAT_00487bf0 = 0xc2700000;
  _DAT_00487bf4 = 0x43a50000;
  afStack_28[1] = -38.0;
  ui_element_set_rect(&DAT_00487cfc,124.0,30.0,afStack_28);
  _DAT_00487c0c = &LAB_00447370;
  _DAT_00487c08 = 0x18;
  afStack_28[0] = 270.0;
  puVar9 = &DAT_0048fba8;
  puVar10 = &DAT_00487f2c;
  for (iVar6 = 0x3a; iVar6 != 0; iVar6 = iVar6 + -1) {
    *puVar10 = *puVar9;
    puVar9 = puVar9 + 1;
    puVar10 = puVar10 + 1;
  }
  _DAT_00487f08 = 0xc2700000;
  _DAT_00487f0c = 0x43c30000;
  afStack_28[1] = -38.0;
  ui_element_set_rect(&DAT_00488014,124.0,30.0,afStack_28);
  _DAT_00487f24 = &LAB_00447390;
  _DAT_00487f20 = 0x1f;
  iVar6 = 5;
  pcVar1 = (char *)(**(code **)(*grim_interface_ptr + 0x24))(afStack_28,100);
  if (*pcVar1 != '\0') {
    puVar9 = &DAT_0048fba8;
    puVar10 = &DAT_0048855c;
    for (iVar6 = 0x3a; iVar6 != 0; iVar6 = iVar6 + -1) {
      *puVar10 = *puVar9;
      puVar9 = puVar9 + 1;
      puVar10 = puVar10 + 1;
    }
    _DAT_00488538 = 0xc2700000;
    _DAT_0048853c = 0x43e10000;
    fStack_30 = 270.0;
    fStack_2c = -38.0;
    ui_element_set_rect(&DAT_00488644,124.0,30.0,&fStack_30);
    _DAT_00488550 = 0x30;
    _DAT_00488554 = &LAB_0044fca0;
    iVar6 = 6;
  }
  puVar9 = &DAT_0048fba8;
  puVar10 = &DAT_00488874;
  for (iVar7 = 0x3a; iVar7 != 0; iVar7 = iVar7 + -1) {
    *puVar10 = *puVar9;
    puVar9 = puVar9 + 1;
    puVar10 = puVar10 + 1;
  }
  fStack_30 = 270.0;
  _DAT_00488850 = 0xc2700000;
  _DAT_00488854 = (float)(iVar6 * 0x3c + 0x96);
  fStack_2c = -38.0;
  ui_element_set_rect(&DAT_0048895c,124.0,30.0,&fStack_30);
  _DAT_0048886c = &LAB_00447450;
  _DAT_00488868 = 0x10;
  iVar7 = 2;
  iVar6 = 0;
  do {
    iVar11 = iVar6;
    if ((iVar7 == 2) && (iVar2 = game_is_full_version(), (char)iVar2 != '\0')) {
      iVar6 = 4;
      iVar11 = 4;
    }
    pcVar1 = (char *)(**(code **)(*grim_interface_ptr + 0x24))(local_20,100);
    if (*pcVar1 == '\0') {
      if (iVar7 == 6) {
        iVar6 = 6;
        iVar11 = 6;
      }
      *(int *)((int)(&ui_element_table_end)[iVar7] + 0x204) = DAT_0048f7f4;
      iVar2 = (int)(&ui_element_table_end)[iVar7];
      *(undefined4 *)(iVar2 + 0x138) = 0;
      *(float *)(iVar2 + 0x13c) = (float)iVar11 * 0.125;
      iVar2 = (int)(&ui_element_table_end)[iVar7];
      *(undefined4 *)(iVar2 + 0x154) = 0x3f800000;
      *(float *)(iVar2 + 0x158) = (float)iVar11 * 0.125;
      iVar11 = (int)(&ui_element_table_end)[iVar7];
      *(undefined4 *)(iVar11 + 0x170) = 0x3f800000;
      fVar8 = (float)(iVar6 + 1) * 0.125;
      *(float *)(iVar11 + 0x174) = fVar8;
      iVar11 = (int)(&ui_element_table_end)[iVar7];
      *(undefined4 *)(iVar11 + 0x18c) = 0;
    }
    else {
      *(int *)((int)(&ui_element_table_end)[iVar7] + 0x204) = DAT_0048f7f4;
      iVar2 = (int)(&ui_element_table_end)[iVar7];
      *(undefined4 *)(iVar2 + 0x138) = 0;
      fStack_30 = 0.0;
      *(float *)(iVar2 + 0x13c) = (float)iVar11 * 0.125;
      iVar2 = (int)(&ui_element_table_end)[iVar7];
      *(undefined4 *)(iVar2 + 0x154) = 0x3f800000;
      *(float *)(iVar2 + 0x158) = (float)iVar11 * 0.125;
      iVar11 = (int)(&ui_element_table_end)[iVar7];
      *(undefined4 *)(iVar11 + 0x170) = 0x3f800000;
      fVar8 = (float)(iVar6 + 1) * 0.125;
      *(float *)(iVar11 + 0x174) = fVar8;
      iVar11 = (int)(&ui_element_table_end)[iVar7];
      *(undefined4 *)(iVar11 + 0x18c) = 0;
      fStack_2c = fVar8;
    }
    *(float *)(iVar11 + 400) = fVar8;
    if ((iVar7 == 2) && (iVar11 = game_is_full_version(), (char)iVar11 != '\0')) {
      iVar6 = 0;
    }
    iVar11 = iVar6 + 1;
    if (iVar11 == 4) {
      iVar11 = iVar6 + 2;
    }
    iVar7 = iVar7 + 1;
    iVar6 = iVar11;
  } while (iVar7 < 8);
  if (config_screen_width < 0x281) {
    iVar6 = 0;
    do {
      pfVar5 = (float *)(ui_element_table_end + iVar6 + 0x3c);
      *pfVar5 = *(float *)(ui_element_table_end + iVar6 + 0x3c) * 0.8;
      pfVar5[1] = pfVar5[1] * 0.8;
      pfVar5 = (float *)(ui_element_table_end + iVar6 + 0x20c);
      *pfVar5 = *(float *)(ui_element_table_end + iVar6 + 0x20c) * 0.8;
      pfVar5[1] = pfVar5[1] * 0.8;
      pfVar5 = (float *)(ui_element_table_end + iVar6 + 0x124);
      iVar7 = iVar6 + 0x1c;
      *pfVar5 = *(float *)(ui_element_table_end + iVar6 + 0x124) * 0.8;
      pfVar5[1] = pfVar5[1] * 0.8;
      *(float *)(ui_element_table_end + iVar6 + 0x3c) =
           *(float *)(ui_element_table_end + iVar6 + 0x3c) + 10.0;
      *(float *)(ui_element_table_end + iVar6 + 0x20c) =
           *(float *)(ui_element_table_end + iVar6 + 0x20c) + 10.0;
      *(float *)(ui_element_table_end + iVar6 + 0x124) =
           *(float *)(ui_element_table_end + iVar6 + 0x124) + 10.0;
      *(float *)(DAT_0048f16c + iVar6 + 0x40) = *(float *)(DAT_0048f16c + iVar6 + 0x40) - 14.0;
      *(float *)(DAT_0048f16c + iVar6 + 0x210) = *(float *)(DAT_0048f16c + iVar6 + 0x210) - 14.0;
      *(float *)(DAT_0048f16c + iVar6 + 0x128) = *(float *)(DAT_0048f16c + iVar6 + 0x128) - 14.0;
      iVar6 = iVar7;
    } while (iVar7 < 0x70);
  }
  else if ((800 < config_screen_width) && (config_screen_width < 0x401)) {
    iVar6 = 0;
    do {
      pfVar5 = (float *)(ui_element_table_end + iVar6 + 0x3c);
      *pfVar5 = *(float *)(ui_element_table_end + iVar6 + 0x3c) * 1.2;
      pfVar5[1] = pfVar5[1] * 1.2;
      pfVar5 = (float *)(ui_element_table_end + iVar6 + 0x20c);
      *pfVar5 = *(float *)(ui_element_table_end + iVar6 + 0x20c) * 1.2;
      pfVar5[1] = pfVar5[1] * 1.2;
      pfVar5 = (float *)(ui_element_table_end + iVar6 + 0x124);
      iVar7 = iVar6 + 0x1c;
      *pfVar5 = *(float *)(ui_element_table_end + iVar6 + 0x124) * 1.2;
      pfVar5[1] = pfVar5[1] * 1.2;
      *(float *)(ui_element_table_end + iVar6 + 0x3c) =
           *(float *)(ui_element_table_end + iVar6 + 0x3c) + 10.0;
      *(float *)(ui_element_table_end + iVar6 + 0x20c) =
           *(float *)(ui_element_table_end + iVar6 + 0x20c) + 10.0;
      *(float *)(ui_element_table_end + iVar6 + 0x124) =
           *(float *)(ui_element_table_end + iVar6 + 0x124) + 10.0;
      iVar6 = iVar7;
    } while (iVar7 < 0x70);
  }
  iVar7 = 100;
  piVar3 = (int *)&DAT_0048f16c;
  iVar6 = -0x14;
  do {
    *(int *)(*piVar3 + 0x14) = *(int *)(*piVar3 + 0x14) + iVar7;
    *(int *)(*piVar3 + 0x10) = *(int *)(*piVar3 + 0x10) + iVar7;
    if (0 < iVar6) {
      *(float *)(*piVar3 + 0x18) = *(float *)(*piVar3 + 0x18) - (float)iVar6;
    }
    iVar6 = iVar6 + 0x14;
    iVar7 = iVar7 + 100;
    piVar3 = piVar3 + 1;
  } while (iVar6 < 0x65);
  iVar6 = game_is_full_version();
  if ((char)iVar6 != '\0') {
    DAT_00486faa = 1;
  }
  puVar9 = &DAT_0048fc90;
  puVar10 = &DAT_00488b8c;
  for (iVar6 = 0x3a; iVar6 != 0; iVar6 = iVar6 + -1) {
    *puVar10 = *puVar9;
    puVar9 = puVar9 + 1;
    puVar10 = puVar10 + 1;
  }
  _DAT_00488b78 = _DAT_00488b70 + 280.0;
  _DAT_00488b7c = _DAT_00488b74 + 180.0;
  _DAT_00488b68 = 0xc2340000;
  _DAT_00488b6c = 0x43520000;
  _DAT_00488b84 = 0;
  _DAT_00488b88 = &LAB_004475d0;
  _DAT_00488b54 = 1;
  puVar9 = &DAT_0048fba8;
  puVar10 = &DAT_00488ea4;
  for (iVar6 = 0x3a; iVar6 != 0; iVar6 = iVar6 + -1) {
    *puVar10 = *puVar9;
    puVar9 = puVar9 + 1;
    puVar10 = puVar10 + 1;
  }
  _DAT_00488e80 = 0xc25c0000;
  _DAT_00488e84 = 0x43d70000;
  fStack_30 = 270.0;
  fStack_2c = -38.0;
  ui_element_set_rect(&DAT_00488f8c,124.0,30.0,&fStack_30);
  _DAT_0048906c = DAT_0048f7f4;
  _DAT_00488fa0 = 0;
  _DAT_00488fa4 = 0x3f600000;
  _DAT_00488fc0 = 0x3f600000;
  _DAT_00488fbc = 0x3f800000;
  _DAT_00488fd8 = 0x3f800000;
  _DAT_00488ff4 = 0;
  _DAT_00488fdc = 0x3f800000;
  _DAT_00488ff8 = 0x3f800000;
  _DAT_00488e9c = FUN_00447420;
  _DAT_00488e6c = 1;
  _DAT_00488e98 = 0x30;
  puVar9 = &DAT_0048fba8;
  puVar10 = &DAT_0048b9f4;
  for (iVar6 = 0x3a; iVar6 != 0; iVar6 = iVar6 + -1) {
    *puVar10 = *puVar9;
    puVar9 = puVar9 + 1;
    puVar10 = puVar10 + 1;
  }
  _DAT_0048b9d0 = 0xc2700000;
  _DAT_0048b9d4 = 0x43520000;
  puVar9 = &DAT_00487cfc;
  puVar10 = &DAT_0048badc;
  for (iVar6 = 0x3a; iVar6 != 0; iVar6 = iVar6 + -1) {
    *puVar10 = *puVar9;
    puVar9 = puVar9 + 1;
    puVar10 = puVar10 + 1;
  }
  DAT_0048b9c8 = DAT_0048b9c8 + 100;
  DAT_0048b9cc = DAT_0048b9cc + 100;
  _DAT_0048b9ec = &LAB_00447370;
  puVar9 = &DAT_0048fba8;
  puVar10 = &DAT_0048bd0c;
  for (iVar6 = 0x3a; iVar6 != 0; iVar6 = iVar6 + -1) {
    *puVar10 = *puVar9;
    puVar9 = puVar9 + 1;
    puVar10 = puVar10 + 1;
  }
  _DAT_0048bce8 = 0xc2a00000;
  _DAT_0048bcec = 0x43870000;
  puVar9 = &DAT_0048895c;
  puVar10 = &DAT_0048bdf4;
  for (iVar6 = 0x3a; iVar6 != 0; iVar6 = iVar6 + -1) {
    *puVar10 = *puVar9;
    puVar9 = puVar9 + 1;
    puVar10 = puVar10 + 1;
  }
  _DAT_0048bd04 = &LAB_004474e0;
  DAT_0048bce0 = DAT_0048bce0 + 200;
  DAT_0048bce4 = DAT_0048bce4 + 200;
  puVar9 = &DAT_0048fba8;
  puVar10 = &DAT_0048c024;
  for (iVar6 = 0x3a; iVar6 != 0; iVar6 = iVar6 + -1) {
    *puVar10 = *puVar9;
    puVar9 = puVar9 + 1;
    puVar10 = puVar10 + 1;
  }
  _DAT_0048c000 = 0xc2c80000;
  _DAT_0048c004 = 0x43a50000;
  puVar9 = &DAT_00488f8c;
  puVar10 = &DAT_0048c10c;
  for (iVar6 = 0x3a; iVar6 != 0; iVar6 = iVar6 + -1) {
    *puVar10 = *puVar9;
    puVar9 = puVar9 + 1;
    puVar10 = puVar10 + 1;
  }
  DAT_0048bff8 = DAT_0048bff8 + 300;
  DAT_0048bffc = DAT_0048bffc + 300;
  _DAT_0048c318 = 0xc32f0000;
  _DAT_0048c31c = 0x42340000;
  _DAT_0048c01c = &LAB_00447490;
  _DAT_0048c018 = 0x30;
  _DAT_0048c304 = 1;
  puVar9 = &DAT_0048fd78;
  puVar10 = &DAT_0048c654;
  for (iVar6 = 0x3a; iVar6 != 0; iVar6 = iVar6 + -1) {
    *puVar10 = *puVar9;
    puVar9 = puVar9 + 1;
    puVar10 = puVar10 + 1;
  }
  _DAT_0048c630 = 0xc2340000;
  DAT_0048c628 = DAT_0048c628 + 100;
  _DAT_0048c634 = 0x42dc0000;
  DAT_0048c62c = DAT_0048c62c + 100;
  _DAT_0048919c = 0x43110000;
  _DAT_0048c61c = 1;
  _DAT_00489198 = 0xc2700000;
  _DAT_00489184 = 1;
  puVar9 = &DAT_0048fe60;
  puVar10 = &DAT_004894d4;
  for (iVar6 = 0x3a; iVar6 != 0; iVar6 = iVar6 + -1) {
    *puVar10 = *puVar9;
    puVar9 = puVar9 + 1;
    puVar10 = puVar10 + 1;
  }
  _DAT_004894b0 = 0xc2340000;
  _DAT_004894b4 = 0x43520000;
  pfVar5 = (float *)&DAT_004895bc;
  do {
    pfVar4 = pfVar5 + 7;
    *pfVar5 = *pfVar5 + 10.0;
    pfVar5[1] = pfVar5[1] + 10.0;
    pfVar5 = pfVar4;
  } while ((int)pfVar4 < 0x48962c);
  _DAT_004894d0 = &LAB_0044ed80;
  _DAT_0048949c = 1;
  puVar9 = &DAT_0048fba8;
  puVar10 = &DAT_004897ec;
  for (iVar6 = 0x3a; iVar6 != 0; iVar6 = iVar6 + -1) {
    *puVar10 = *puVar9;
    puVar9 = puVar9 + 1;
    puVar10 = puVar10 + 1;
  }
  _DAT_004897cc = 0x43e70000;
  _DAT_004897c8 = 0xc25c0000;
  puVar9 = &DAT_00488f8c;
  puVar10 = &DAT_004898d4;
  for (iVar6 = 0x3a; iVar6 != 0; iVar6 = iVar6 + -1) {
    *puVar10 = *puVar9;
    puVar9 = puVar9 + 1;
    puVar10 = puVar10 + 1;
  }
  _DAT_004897e4 = FUN_00447420;
  _DAT_0048c948 = 0xc32f0000;
  _DAT_004897b4 = 1;
  _DAT_004897e0 = 0x30;
  _DAT_0048c94c = 0x42340000;
  _DAT_0048c934 = 1;
  puVar9 = &DAT_0048fd78;
  puVar10 = &DAT_0048cc84;
  for (iVar6 = 0x3a; iVar6 != 0; iVar6 = iVar6 + -1) {
    *puVar10 = *puVar9;
    puVar9 = puVar9 + 1;
    puVar10 = puVar10 + 1;
  }
  _DAT_0048cc64 = 0x42dc0000;
  _DAT_0048cc60 = 0xc2340000;
  DAT_0048cc5c = DAT_0048cc5c + 100;
  DAT_0048cc58 = DAT_0048cc58 + 100;
  _DAT_0048cf78 = 0xc3340000;
  _DAT_0048cf7c = 0x43070000;
  _DAT_0048cc4c = 1;
  _DAT_0048cf64 = 1;
  puVar9 = &DAT_0048fc90;
  puVar10 = &DAT_0048d2b4;
  for (iVar6 = 0x3a; iVar7 = config_screen_width, iVar6 != 0; iVar6 = iVar6 + -1) {
    *puVar10 = *puVar9;
    puVar9 = puVar9 + 1;
    puVar10 = puVar10 + 1;
  }
  _DAT_0048d290 = 0xc3250000;
  if (config_screen_width < 0x281) {
    _DAT_0048d290 = 0xc3370000;
  }
  DAT_0048d294 = 0x43480000;
  _DAT_0048d2b0 = &LAB_00448cd0;
  _DAT_0048d27c = 1;
  puVar9 = &DAT_0048fba8;
  puVar10 = &DAT_0048d5cc;
  for (iVar6 = 0x3a; iVar6 != 0; iVar6 = iVar6 + -1) {
    *puVar10 = *puVar9;
    puVar9 = puVar9 + 1;
    puVar10 = puVar10 + 1;
  }
  _DAT_0048d5a8 = 0xc31b0000;
  _DAT_0048d5ac = 0x43d20000;
  puVar9 = &DAT_00488f8c;
  puVar10 = &DAT_0048d6b4;
  for (iVar6 = 0x3a; iVar6 != 0; iVar6 = iVar6 + -1) {
    *puVar10 = *puVar9;
    puVar9 = puVar9 + 1;
    puVar10 = puVar10 + 1;
  }
  _DAT_0048d8c0 = 0xc32f0000;
  _DAT_0048d8c4 = 0x42340000;
  _DAT_0048d5c4 = &LAB_00447370;
  _DAT_0048d594 = 0;
  _DAT_0048d5c0 = 0x30;
  _DAT_0048d8ac = 1;
  puVar9 = &DAT_0048fd78;
  puVar10 = &DAT_0048dbfc;
  for (iVar6 = 0x3a; iVar6 != 0; iVar6 = iVar6 + -1) {
    *puVar10 = *puVar9;
    puVar9 = puVar9 + 1;
    puVar10 = puVar10 + 1;
  }
  _DAT_0048dbd8 = 0xc2340000;
  DAT_0048dbd0 = DAT_0048dbd0 + 100;
  _DAT_0048dbdc = 0x42dc0000;
  DAT_0048dbd4 = DAT_0048dbd4 + 100;
  _DAT_0048def4 = 0x42f40000;
  _DAT_0048dbc4 = 1;
  _DAT_0048def0 = 0xc3070000;
  _DAT_0048dedc = 1;
  puVar9 = &DAT_0048fd78;
  puVar10 = &DAT_0048e22c;
  for (iVar6 = 0x3a; iVar6 != 0; iVar6 = iVar6 + -1) {
    *puVar10 = *puVar9;
    puVar9 = puVar9 + 1;
    puVar10 = puVar10 + 1;
  }
  _DAT_0048e20c = 0x43390000;
  _DAT_0048e208 = 0xc0a00000;
  _DAT_0048e524 = 0x42f40000;
  _DAT_0048e228 = &LAB_00447d40;
  _DAT_0048e1f4 = 1;
  _DAT_0048e520 = 0xc3070000;
  _DAT_0048e50c = 1;
  puVar9 = &DAT_0048fd78;
  puVar10 = &DAT_0048e85c;
  for (iVar6 = 0x3a; iVar6 != 0; iVar6 = iVar6 + -1) {
    *puVar10 = *puVar9;
    puVar9 = puVar9 + 1;
    puVar10 = puVar10 + 1;
  }
  _DAT_0048e83c = 0x43390000;
  _DAT_0048e838 = 0xc0a00000;
  _DAT_0048e824 = 1;
  _DAT_0048a110 = (float)(iVar7 + -0x15e);
  puVar9 = &DAT_0048fc90;
  puVar10 = &DAT_0048a134;
  for (iVar6 = 0x3a; iVar6 != 0; iVar6 = iVar6 + -1) {
    *puVar10 = *puVar9;
    puVar9 = puVar9 + 1;
    puVar10 = puVar10 + 1;
  }
  _DAT_0048a114 = 0x43480000;
  if (iVar7 < 0x321) {
    if (iVar7 < 0x281) {
      _DAT_0048a110 = _DAT_0048a110 + 10.0;
    }
    else {
      _DAT_0048a110 = _DAT_0048a110 - 30.0;
    }
  }
  else {
    _DAT_0048a110 = _DAT_0048a110 - 65.0;
  }
  _DAT_0048a0fc = 1;
  DAT_0048a40c = 1;
  _DAT_00489ae4 = 0x42f40000;
  _DAT_00489ae0 = 0xc3250000;
  if (iVar7 < 0x281) {
    _DAT_00489ae0 = 0xc3570000;
  }
  _DAT_00489acc = 1;
  puVar9 = &DAT_0048fd78;
  puVar10 = &DAT_00489e1c;
  for (iVar6 = 0x3a; iVar6 != 0; iVar6 = iVar6 + -1) {
    *puVar10 = *puVar9;
    puVar9 = puVar9 + 1;
    puVar10 = puVar10 + 1;
  }
  fStack_30 = -60.0;
  fStack_2c = 185.0;
  _DAT_00489dfc = 0x43390000;
  _DAT_00489df8 = 0xc20c0000;
  if (iVar7 < 0x281) {
    _DAT_00489df8 = 0xc2aa0000;
  }
  DAT_00489de4 = 1;
  DAT_0048eb48 = 500;
  piVar3 = (int *)&DAT_0048f16c;
  iVar6 = -0xb;
  do {
    if (iVar7 < 0x281) {
      fVar8 = (float)iVar6;
      iVar11 = 0;
      do {
        pfVar5 = (float *)(*piVar3 + 0x3c + iVar11);
        *pfVar5 = *(float *)(*piVar3 + 0x3c + iVar11) * 0.9;
        pfVar5[1] = pfVar5[1] * 0.9;
        pfVar5 = (float *)(*piVar3 + 0x20c + iVar11);
        *pfVar5 = *(float *)(*piVar3 + 0x20c + iVar11) * 0.9;
        pfVar5[1] = pfVar5[1] * 0.9;
        pfVar5 = (float *)(*piVar3 + 0x124 + iVar11);
        *pfVar5 = *(float *)(*piVar3 + 0x124 + iVar11) * 0.9;
        pfVar5[1] = pfVar5[1] * 0.9;
        *(float *)(*piVar3 + 0x40 + iVar11) = *(float *)(*piVar3 + 0x40 + iVar11) - fVar8;
        *(float *)(*piVar3 + 0x210 + iVar11) = *(float *)(*piVar3 + 0x210 + iVar11) - fVar8;
        pfVar5 = (float *)(*piVar3 + 0x128 + iVar11);
        pfVar4 = (float *)(*piVar3 + 0x128 + iVar11);
        iVar11 = iVar11 + 0x1c;
        *pfVar4 = *pfVar5 - fVar8;
        iVar7 = config_screen_width;
      } while (iVar11 < 0x70);
    }
    iVar6 = iVar6 + 0xb;
    piVar3 = piVar3 + 1;
  } while (iVar6 < 0x38);
  piVar3 = (int *)&DAT_0048f1c0;
  iVar6 = -5;
  iVar11 = -0xb;
  do {
    if (iVar7 < 0x281) {
      fVar8 = (float)iVar11;
      iVar2 = 0;
      do {
        pfVar5 = (float *)(*piVar3 + 0x3c + iVar2);
        *pfVar5 = *(float *)(*piVar3 + 0x3c + iVar2) * 0.8;
        pfVar5[1] = pfVar5[1] * 0.8;
        pfVar5 = (float *)(*piVar3 + 0x20c + iVar2);
        *pfVar5 = *(float *)(*piVar3 + 0x20c + iVar2) * 0.8;
        pfVar5[1] = pfVar5[1] * 0.8;
        pfVar5 = (float *)(*piVar3 + 0x124 + iVar2);
        *pfVar5 = *(float *)(*piVar3 + 0x124 + iVar2) * 0.8;
        pfVar5[1] = pfVar5[1] * 0.8;
        *(float *)(*piVar3 + 0x40 + iVar2) = *(float *)(*piVar3 + 0x40 + iVar2) - fVar8;
        *(float *)(*piVar3 + 0x210 + iVar2) = *(float *)(*piVar3 + 0x210 + iVar2) - fVar8;
        pfVar5 = (float *)(*piVar3 + 0x128 + iVar2);
        pfVar4 = (float *)(*piVar3 + 0x128 + iVar2);
        iVar2 = iVar2 + 0x1c;
        *pfVar4 = *pfVar5 - fVar8;
        iVar7 = config_screen_width;
      } while (iVar2 < 0x70);
    }
    else if (iVar7 < 0x321) {
      fVar8 = (float)iVar6;
      iVar2 = 0;
      do {
        pfVar5 = (float *)(*piVar3 + 0x3c + iVar2);
        *pfVar5 = *(float *)(*piVar3 + 0x3c + iVar2) * 0.9;
        pfVar5[1] = pfVar5[1] * 0.9;
        pfVar5 = (float *)(*piVar3 + 0x20c + iVar2);
        *pfVar5 = *(float *)(*piVar3 + 0x20c + iVar2) * 0.9;
        pfVar5[1] = pfVar5[1] * 0.9;
        pfVar5 = (float *)(*piVar3 + 0x124 + iVar2);
        *pfVar5 = *(float *)(*piVar3 + 0x124 + iVar2) * 0.9;
        pfVar5[1] = pfVar5[1] * 0.9;
        *(float *)(*piVar3 + 0x40 + iVar2) = *(float *)(*piVar3 + 0x40 + iVar2) - fVar8;
        *(float *)(*piVar3 + 0x210 + iVar2) = *(float *)(*piVar3 + 0x210 + iVar2) - fVar8;
        pfVar5 = (float *)(*piVar3 + 0x128 + iVar2);
        pfVar4 = (float *)(*piVar3 + 0x128 + iVar2);
        iVar2 = iVar2 + 0x1c;
        *pfVar4 = *pfVar5 - fVar8;
        iVar7 = config_screen_width;
      } while (iVar2 < 0x70);
    }
    iVar11 = iVar11 + 0xb;
    iVar6 = iVar6 + 5;
    piVar3 = piVar3 + 1;
  } while (iVar11 < 0x17);
  if (iVar7 < 0x281) {
    iVar6 = 0;
    do {
      pfVar5 = (float *)(DAT_0048f1e8 + iVar6 + 0x3c);
      *pfVar5 = *(float *)(DAT_0048f1e8 + iVar6 + 0x3c) * 0.8;
      pfVar5[1] = pfVar5[1] * 0.8;
      pfVar5 = (float *)(DAT_0048f1e8 + iVar6 + 0x20c);
      *pfVar5 = *(float *)(DAT_0048f1e8 + iVar6 + 0x20c) * 0.8;
      pfVar5[1] = pfVar5[1] * 0.8;
      pfVar5 = (float *)(DAT_0048f1e8 + iVar6 + 0x124);
      iVar11 = iVar6 + 0x1c;
      *pfVar5 = *(float *)(DAT_0048f1e8 + iVar6 + 0x124) * 0.8;
      pfVar5[1] = pfVar5[1] * 0.8;
      *(float *)(DAT_0048f1e8 + iVar6 + 0x40) = *(float *)(DAT_0048f1e8 + iVar6 + 0x40) - 11.0;
      *(float *)(DAT_0048f1e8 + iVar6 + 0x210) = *(float *)(DAT_0048f1e8 + iVar6 + 0x210) - 11.0;
      *(float *)(DAT_0048f1e8 + iVar6 + 0x128) = *(float *)(DAT_0048f1e8 + iVar6 + 0x128) - 11.0;
      iVar6 = iVar11;
      iVar7 = config_screen_width;
    } while (iVar11 < 0x70);
  }
  else if (iVar7 < 0x321) {
    iVar6 = 0;
    do {
      pfVar5 = (float *)(DAT_0048f1e8 + iVar6 + 0x3c);
      *pfVar5 = *(float *)(DAT_0048f1e8 + iVar6 + 0x3c) * 0.9;
      pfVar5[1] = pfVar5[1] * 0.9;
      pfVar5 = (float *)(DAT_0048f1e8 + iVar6 + 0x20c);
      *pfVar5 = *(float *)(DAT_0048f1e8 + iVar6 + 0x20c) * 0.9;
      pfVar5[1] = pfVar5[1] * 0.9;
      pfVar5 = (float *)(DAT_0048f1e8 + iVar6 + 0x124);
      iVar11 = iVar6 + 0x1c;
      *pfVar5 = *(float *)(DAT_0048f1e8 + iVar6 + 0x124) * 0.9;
      pfVar5[1] = pfVar5[1] * 0.9;
      *(float *)(DAT_0048f1e8 + iVar6 + 0x40) = *(float *)(DAT_0048f1e8 + iVar6 + 0x40) - 3.0;
      *(float *)(DAT_0048f1e8 + iVar6 + 0x210) = *(float *)(DAT_0048f1e8 + iVar6 + 0x210) - 3.0;
      *(float *)(DAT_0048f1e8 + iVar6 + 0x128) = *(float *)(DAT_0048f1e8 + iVar6 + 0x128) - 3.0;
      iVar6 = iVar11;
      iVar7 = config_screen_width;
    } while (iVar11 < 0x70);
  }
  if (iVar7 < 0x281) {
    iVar6 = 0;
    do {
      pfVar5 = (float *)(DAT_0048f198 + iVar6 + 0x3c);
      *pfVar5 = *(float *)(DAT_0048f198 + iVar6 + 0x3c) * 0.8;
      pfVar5[1] = pfVar5[1] * 0.8;
      pfVar5 = (float *)(DAT_0048f198 + iVar6 + 0x20c);
      *pfVar5 = *(float *)(DAT_0048f198 + iVar6 + 0x20c) * 0.8;
      pfVar5[1] = pfVar5[1] * 0.8;
      pfVar5 = (float *)(DAT_0048f198 + iVar6 + 0x124);
      iVar11 = iVar6 + 0x1c;
      *pfVar5 = *(float *)(DAT_0048f198 + iVar6 + 0x124) * 0.8;
      pfVar5[1] = pfVar5[1] * 0.8;
      *(float *)(DAT_0048f198 + iVar6 + 0x40) = *(float *)(DAT_0048f198 + iVar6 + 0x40) - 11.0;
      *(float *)(DAT_0048f198 + iVar6 + 0x210) = *(float *)(DAT_0048f198 + iVar6 + 0x210) - 11.0;
      *(float *)(DAT_0048f198 + iVar6 + 0x128) = *(float *)(DAT_0048f198 + iVar6 + 0x128) - 11.0;
      iVar6 = iVar11;
      iVar7 = config_screen_width;
    } while (iVar11 < 0x70);
  }
  else if (iVar7 < 0x321) {
    iVar6 = 0;
    do {
      pfVar5 = (float *)(DAT_0048f198 + iVar6 + 0x3c);
      *pfVar5 = *(float *)(DAT_0048f198 + iVar6 + 0x3c) * 0.9;
      pfVar5[1] = pfVar5[1] * 0.9;
      pfVar5 = (float *)(DAT_0048f198 + iVar6 + 0x20c);
      *pfVar5 = *(float *)(DAT_0048f198 + iVar6 + 0x20c) * 0.9;
      pfVar5[1] = pfVar5[1] * 0.9;
      pfVar5 = (float *)(DAT_0048f198 + iVar6 + 0x124);
      iVar11 = iVar6 + 0x1c;
      *pfVar5 = *(float *)(DAT_0048f198 + iVar6 + 0x124) * 0.9;
      pfVar5[1] = pfVar5[1] * 0.9;
      *(float *)(DAT_0048f198 + iVar6 + 0x40) = *(float *)(DAT_0048f198 + iVar6 + 0x40) - 3.0;
      *(float *)(DAT_0048f198 + iVar6 + 0x210) = *(float *)(DAT_0048f198 + iVar6 + 0x210) - 3.0;
      *(float *)(DAT_0048f198 + iVar6 + 0x128) = *(float *)(DAT_0048f198 + iVar6 + 0x128) - 3.0;
      iVar6 = iVar11;
      iVar7 = config_screen_width;
    } while (iVar11 < 0x70);
  }
  if (iVar7 < 0x281) {
    iVar6 = 0;
    do {
      pfVar5 = (float *)(DAT_0048f1b0 + iVar6 + 0x3c);
      *pfVar5 = *(float *)(DAT_0048f1b0 + iVar6 + 0x3c) * 0.8;
      pfVar5[1] = pfVar5[1] * 0.8;
      pfVar5 = (float *)(DAT_0048f1b0 + iVar6 + 0x20c);
      *pfVar5 = *(float *)(DAT_0048f1b0 + iVar6 + 0x20c) * 0.8;
      pfVar5[1] = pfVar5[1] * 0.8;
      pfVar5 = (float *)(DAT_0048f1b0 + iVar6 + 0x124);
      iVar7 = iVar6 + 0x1c;
      *pfVar5 = *(float *)(DAT_0048f1b0 + iVar6 + 0x124) * 0.8;
      pfVar5[1] = pfVar5[1] * 0.8;
      *(float *)(DAT_0048f1b0 + iVar6 + 0x40) = *(float *)(DAT_0048f1b0 + iVar6 + 0x40) - 11.0;
      *(float *)(DAT_0048f1b0 + iVar6 + 0x210) = *(float *)(DAT_0048f1b0 + iVar6 + 0x210) - 11.0;
      *(float *)(DAT_0048f1b0 + iVar6 + 0x128) = *(float *)(DAT_0048f1b0 + iVar6 + 0x128) - 11.0;
      iVar6 = iVar7;
    } while (iVar7 < 0x70);
  }
  else if (iVar7 < 0x321) {
    iVar6 = 0;
    do {
      pfVar5 = (float *)(DAT_0048f1b0 + iVar6 + 0x3c);
      *pfVar5 = *(float *)(DAT_0048f1b0 + iVar6 + 0x3c) * 0.9;
      pfVar5[1] = pfVar5[1] * 0.9;
      pfVar5 = (float *)(DAT_0048f1b0 + iVar6 + 0x20c);
      *pfVar5 = *(float *)(DAT_0048f1b0 + iVar6 + 0x20c) * 0.9;
      pfVar5[1] = pfVar5[1] * 0.9;
      pfVar5 = (float *)(DAT_0048f1b0 + iVar6 + 0x124);
      iVar7 = iVar6 + 0x1c;
      *pfVar5 = *(float *)(DAT_0048f1b0 + iVar6 + 0x124) * 0.9;
      pfVar5[1] = pfVar5[1] * 0.9;
      *(float *)(DAT_0048f1b0 + iVar6 + 0x40) = *(float *)(DAT_0048f1b0 + iVar6 + 0x40) - 3.0;
      *(float *)(DAT_0048f1b0 + iVar6 + 0x210) = *(float *)(DAT_0048f1b0 + iVar6 + 0x210) - 3.0;
      *(float *)(DAT_0048f1b0 + iVar6 + 0x128) = *(float *)(DAT_0048f1b0 + iVar6 + 0x128) - 3.0;
      iVar6 = iVar7;
    } while (iVar7 < 0x70);
  }
  FUN_0044faa0(&DAT_0048f20c);
  _DAT_0048f240 = FUN_00446140;
  puVar9 = &DAT_0048fba8;
  puVar10 = &perk_prompt_bounds_min_x;
  for (iVar6 = 0x3a; iVar6 != 0; iVar6 = iVar6 + -1) {
    *puVar10 = *puVar9;
    puVar9 = puVar9 + 1;
    puVar10 = puVar10 + 1;
  }
  _DAT_0048f25c = 0x3f800000;
  _DAT_0048f278 = 0;
  _DAT_0048f2b0 = 0x3f800000;
  _DAT_0048f294 = 0;
  ui_element_load(&DAT_0048f330,s_ui_ui_textLevelUp_jaz_004792a0);
  fStack_30 = -230.0;
  fStack_2c = -27.0;
  ui_element_set_rect(&DAT_0048f330,75.0,25.0,&fStack_30);
  pfVar5 = (float *)&DAT_0048f334;
  do {
    pfVar4 = pfVar5 + 7;
    pfVar5[-0x3b] = pfVar5[-0x3b] - 300.0;
    pfVar5[-0x3b] = pfVar5[-0x3b] * 0.75;
    pfVar5[-0x3a] = pfVar5[-0x3a] * 0.75;
    pfVar5[-1] = pfVar5[-1] * 0.85;
    *pfVar5 = *pfVar5 * 0.85;
    pfVar5[-1] = pfVar5[-1] - 46.0;
    *pfVar5 = *pfVar5 - 4.0;
    pfVar5 = pfVar4;
  } while ((int)pfVar4 < 0x48f3a4);
  if (config_screen_width == 0x280) {
    fStack_30 = 690.0;
    fStack_2c = 80.0;
    _perk_prompt_origin_y = 0x42a00000;
  }
  else {
    fStack_2c = 40.0;
    fStack_30 = (float)(config_screen_width + 0x32);
    _perk_prompt_origin_y = 0x42200000;
  }
  piVar3 = (int *)&DAT_0048f16c;
  _perk_prompt_origin_x = fStack_30;
  do {
    iVar6 = *piVar3;
    piVar3 = piVar3 + 1;
    *(float *)(iVar6 + 0x1c) =
         ((float)config_screen_width * 0.0015625 * 150.0 - 150.0) + *(float *)(iVar6 + 0x1c);
    iVar6 = config_screen_width;
  } while ((int)piVar3 < 0x48f20c);
  _DAT_0048ee68 = (float)(config_screen_width + -0x15e);
  puVar9 = &DAT_00489de0;
  puVar10 = &DAT_0048ee50;
  for (iVar7 = 0xc6; iVar7 != 0; iVar7 = iVar7 + -1) {
    *puVar10 = *puVar9;
    puVar9 = puVar9 + 1;
    puVar10 = puVar10 + 1;
  }
  _DAT_0048ee6c = 0x43480000;
  if (iVar6 < 0x281) {
    _DAT_0048ee68 = _DAT_0048ee68 + 80.0;
    _DAT_0048ee6c = 0x433a0000;
  }
  DAT_0048ee54 = 1;
  DAT_0048f164 = 1;
  puVar9 = &ui_element_table_end;
  do {
    FUN_0044fb50((undefined *)*puVar9);
    puVar9 = puVar9 + 1;
  } while ((int)puVar9 < 0x48f20c);
  return;
}



/* weapon_table_init @ 004519b0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* initializes the weapon stats table at DAT_004d7a28 */

void weapon_table_init(void)

{
  int iVar1;
  char cVar2;
  undefined4 *puVar3;
  int iVar4;
  uint uVar5;
  uint uVar6;
  char *pcVar7;
  char *pcVar8;
  
  iVar4 = 0;
  puVar3 = &weapon_projectile_pellet_count;
  do {
    iVar1 = iVar4 + -1;
    iVar4 = iVar4 + 1;
    puVar3[-4] = iVar1;
    *puVar3 = 1;
    puVar3 = puVar3 + 0x1f;
  } while ((int)puVar3 < 0x4d99a0);
  uVar5 = 0xffffffff;
  effect_subrect_frame_table = 0;
  pcVar7 = s_Fire_bullets_0047958c;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d7ef4 = 0x41f00000;
  _DAT_004d7fec = 0x420c0000;
  _DAT_004d84c4 = 0x41700000;
  _DAT_004d8540 = 0x41a00000;
  _DAT_004d85bc = 0x41200000;
  _DAT_004d8828 = 0x41200000;
  _DAT_004d83cc = 0x41a00000;
  _DAT_004d7d80 = 0x43570000;
  _DAT_004d8e74 = 0x41700000;
  _DAT_004d8f6c = 0x41200000;
  _DAT_004d7c0c = 0x42700000;
  DAT_004d7b14 = 0x425c0000;
  _DAT_004d7b90 = 0x42480000;
  _DAT_004d86b4 = 0x41a00000;
  _DAT_004d86b8 = 0x41300000;
  DAT_004d9064 = 0x42700000;
  _DAT_004d9068 = 0x3e800000;
  _DAT_004d8730 = 0x41200000;
  _DAT_004d8734 = 0x3f000000;
  _DAT_004d7ef8 = 0x40a00000;
  _DAT_004d7ff0 = 0x40066666;
  _DAT_004d84c8 = 0x40400000;
  _DAT_004d8544 = 0x3fb33333;
  _DAT_004d85c0 = 0x4185999a;
  _DAT_004d882c = 0x41e00000;
  _DAT_004d83d0 = 0x3f800000;
  _DAT_004d8e78 = 0;
  _DAT_004d7c10 = 0x3f99999a;
  DAT_004d7b18 = 0x40833333;
  _DAT_004d863c = 0;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d8ff8;
  for (uVar6 = uVar5 >> 2; _DAT_004d7b7c = sfx_autorifle_fire, uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; _DAT_004d7b08 = sfx_pistol_reload, uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  uVar5 = 0xffffffff;
  pcVar7 = s_Pistol_00479584;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d9060 = 1;
  _DAT_004d903c = 0x70;
  DAT_004d9040 = 0x3e0f5c29;
  _DAT_004d9044 = 0x3f99999a;
  _DAT_004d9048 = 0x3e6147ae;
  DAT_004d9050 = _DAT_004d7b7c;
  _DAT_004d9058 = sfx_pistol_reload;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d7aa8;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  DAT_004d7b10 = 5;
  _DAT_004d7aec = 0xc;
  _DAT_004d7af0 = 0x3f3631f9;
  DAT_004d7af4 = 0x3f99999a;
  _DAT_004d7af8 = 0x3e6147ae;
  _DAT_004d7b00 = sfx_pistol_fire;
  uVar5 = 0xffffffff;
  pcVar7 = s_Assault_Rifle_00479574;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d7b24;
  for (uVar6 = uVar5 >> 2; _DAT_004d93bc = sfx_shotgun_reload, uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; _DAT_004d83c0 = sfx_autorifle_reload, uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  uVar5 = 0xffffffff;
  pcVar7 = &DAT_0047956c;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d7b8c = 1;
  _DAT_004d7b68 = 0x19;
  _DAT_004d7b6c = 0x3def9db2;
  _DAT_004d7b70 = 0x3f99999a;
  _DAT_004d7b74 = 0x3db851ec;
  _DAT_004d7b84 = sfx_autorifle_reload;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d7ba0;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; _DAT_004d8434 = sfx_shotgun_fire, uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d7be4 = 0xc;
  _DAT_004d7c14 = 0xc;
  uVar5 = 0xffffffff;
  _DAT_004d7c08 = 1;
  pcVar7 = s_Sawed_off_Shotgun_00479558;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  _DAT_004d7be8 = 0x3f59999a;
  uVar5 = ~uVar5;
  _DAT_004d7bec = 0x3ff33333;
  _DAT_004d7bf0 = 0x3e8a3d71;
  _DAT_004d7bf8 = sfx_shotgun_fire;
  _DAT_004d7c00 = _DAT_004d93bc;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d7c1c;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d7c60 = 0xc;
  _DAT_004d7c90 = 0xc;
  uVar5 = 0xffffffff;
  _DAT_004d7c84 = 1;
  pcVar7 = s_Jackhammer_0047954c;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d7c64 = 0x3f5eb852;
  _DAT_004d7c68 = 0x3ff33333;
  _DAT_004d7c6c = 0x3e051eb8;
  _DAT_004d7c74 = _DAT_004d8434;
  _DAT_004d7c7c = _DAT_004d93bc;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d83dc;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  uVar5 = 0xffffffff;
  pcVar7 = s_Submachine_Gun_0047953c;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d8444 = 1;
  _DAT_004d8420 = 0x10;
  _DAT_004d8424 = 0x3e0f5c29;
  _DAT_004d8428 = 0x40400000;
  _DAT_004d842c = 0x3e23d70a;
  _DAT_004d8450 = 4;
  _DAT_004d843c = _DAT_004d93bc;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d7c98;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d7cf0 = sfx_hrpm_fire;
  uVar5 = 0xffffffff;
  pcVar7 = s_Flamethrower_0047952c;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d7d00 = 5;
  _DAT_004d7cdc = 0x1e;
  _DAT_004d7ce0 = 0x3db476b0;
  _DAT_004d7ce4 = 0x3f99999a;
  _DAT_004d7ce8 = 0x3da7ef9e;
  _DAT_004d7cf8 = _DAT_004d83c0;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d7e0c;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d7e64 = sfx_flamer_fire_01;
  uVar5 = 0xffffffff;
  pcVar7 = s_Plasma_Rifle_0047951c;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d7e74 = 8;
  _DAT_004d7e68 = 2;
  _DAT_004d7e50 = 0x1e;
  _DAT_004d7e54 = 0x3c04ec63;
  _DAT_004d7e58 = 0x40000000;
  _DAT_004d7e5c = 0x3c75c28f;
  _DAT_004d7e08 = 1;
  _DAT_004d7e6c = _DAT_004d83c0;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d7e88;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d7ecc = 0x14;
  _DAT_004d7ee0 = sfx_shock_fire;
  uVar5 = 0xffffffff;
  _DAT_004d7ed0 = 0x3e94e545;
  _DAT_004d7ed4 = 0x3f99999a;
  _DAT_004d7ed8 = 0x3e3a5e35;
  _DAT_004d7ee8 = _DAT_004d83c0;
  pcVar7 = s_Multi_Plasma_0047950c;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d7f04;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d7f5c = sfx_shock_fire;
  uVar5 = 0xffffffff;
  pcVar7 = s_Plasma_Minigun_004794fc;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d7f48 = 8;
  _DAT_004d7f4c = 0x3f1eed84;
  _DAT_004d7f50 = 0x3fb33333;
  _DAT_004d7f54 = 0x3ea3d70a;
  _DAT_004d7f78 = 3;
  _DAT_004d7f64 = _DAT_004d83c0;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d7f80;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  DAT_004d7fd8 = sfx_plasmaminigun_fire;
  uVar5 = 0xffffffff;
  pcVar7 = s_Gauss_Gun_004794f0;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d7fc4 = 0x1e;
  _DAT_004d7fc8 = 0x3de147ae;
  _DAT_004d7fcc = 0x3fa66666;
  _DAT_004d7fd0 = 0x3dc6a7f0;
  _DAT_004d7fe0 = _DAT_004d83c0;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d7d14;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d7d6c = sfx_gauss_fire;
  uVar5 = 0xffffffff;
  pcVar7 = s_Rocket_Launcher_004794e0;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d7d7c = 1;
  _DAT_004d7d58 = 6;
  _DAT_004d7d5c = 0x3f19999a;
  _DAT_004d7d60 = 0x3fcccccd;
  _DAT_004d7d64 = 0x3ed70a3d;
  _DAT_004d7d74 = _DAT_004d93bc;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d7ffc;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d8064 = 8;
  _DAT_004d8040 = 5;
  _DAT_004d8044 = 0x3f3da5d6;
  _DAT_004d8048 = 0x3f99999a;
  _DAT_004d804c = 0x3ed70a3d;
  _DAT_004d8054 = sfx_rocket_fire;
  _DAT_004d805c = sfx_autorifle_reload_alt;
  uVar5 = 0xffffffff;
  _DAT_004d7ff8 = 2;
  pcVar7 = s_Seeker_Rockets_004794d0;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d8078;
  for (uVar6 = uVar5 >> 2; _DAT_004d80d8 = sfx_autorifle_reload_alt, uVar6 != 0; uVar6 = uVar6 - 1)
  {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d80d0 = sfx_rocket_fire;
  uVar5 = 0xffffffff;
  pcVar7 = s_Mean_Minigun_004794c0;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d80e0 = 8;
  _DAT_004d80bc = 8;
  _DAT_004d80c0 = 0x3e9f22b6;
  _DAT_004d80c4 = 0x3f99999a;
  _DAT_004d80c8 = 0x3ea3d70a;
  _DAT_004d8074 = 2;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d7d90;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d7de8 = sfx_autorifle_fire;
  uVar5 = 0xffffffff;
  pcVar7 = s_Plasma_Shotgun_004794b0;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d7df8 = 3;
  _DAT_004d7dd4 = 0x78;
  _DAT_004d7dd8 = 0x3db851ec;
  _DAT_004d7ddc = 0x40800000;
  _DAT_004d7de0 = 0x3d7df3b6;
  _DAT_004d7df0 = _DAT_004d83c0;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d80f4;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d814c = sfx_plasmashotgun_fire;
  uVar5 = 0xffffffff;
  pcVar7 = s_Blow_Torch_004794a4;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d8138 = 8;
  _DAT_004d813c = 0x3ef5c28f;
  _DAT_004d8140 = 0x40466666;
  _DAT_004d8144 = 0x3de147ae;
  _DAT_004d8168 = 0xe;
  _DAT_004d8154 = _DAT_004d93bc;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d8170;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d81c8 = sfx_flamer_fire_01;
  uVar5 = 0xffffffff;
  pcVar7 = s_HR_Flamer_00479498;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d81d8 = 8;
  _DAT_004d81cc = 2;
  _DAT_004d81b4 = 0x1e;
  _DAT_004d81b8 = 0x3bc84f90;
  _DAT_004d81bc = 0x3fc00000;
  _DAT_004d81c0 = 0x3c23d70a;
  _DAT_004d816c = 1;
  _DAT_004d81d0 = _DAT_004d83c0;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d81ec;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d8244 = sfx_flamer_fire_01;
  uVar5 = 0xffffffff;
  pcVar7 = s_Mini_Rocket_Swarmers_00479480;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d8254 = 8;
  _DAT_004d8248 = 2;
  _DAT_004d8230 = 0x1e;
  _DAT_004d8234 = 0x3c0b4396;
  _DAT_004d8238 = 0x3fe66666;
  _DAT_004d823c = 0x3c23d70a;
  _DAT_004d81e8 = 1;
  _DAT_004d824c = _DAT_004d83c0;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d8268;
  for (uVar6 = uVar5 >> 2; _DAT_004d82c8 = sfx_autorifle_reload_alt, uVar6 != 0; uVar6 = uVar6 - 1)
  {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d82c0 = sfx_rocket_fire;
  uVar5 = 0xffffffff;
  pcVar7 = s_Rocket_Minigun_00479470;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d82d0 = 8;
  _DAT_004d82ac = 5;
  _DAT_004d82b0 = 0x3fe66666;
  _DAT_004d82b4 = 0x3fe66666;
  _DAT_004d82b8 = 0x3df5c28f;
  _DAT_004d8264 = 2;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d82e4;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d834c = 8;
  _DAT_004d8328 = 0x10;
  _DAT_004d832c = 0x3df5c28f;
  _DAT_004d833c = sfx_rocketmini_fire;
  _DAT_004d8344 = sfx_autorifle_reload_alt;
  uVar5 = 0xffffffff;
  _DAT_004d8330 = 0x3fe66666;
  pcVar7 = s_Pulse_Gun_00479464;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d8334 = 0x3df5c28f;
  _DAT_004d82e0 = 2;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d8360;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; _DAT_004d86a8 = sfx_shock_reload, uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d83b8 = sfx_pulse_fire;
  uVar5 = 0xffffffff;
  pcVar7 = s_Ion_Rifle_00479458;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d83c8 = 8;
  _DAT_004d83a4 = 0x10;
  _DAT_004d83a8 = 0x3dcccccd;
  _DAT_004d83ac = 0x3dcccccd;
  _DAT_004d83b0 = 0;
  _DAT_004d835c = 3;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d8458;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d84b0 = sfx_shock_fire_alt;
  uVar5 = 0xffffffff;
  pcVar7 = s_Ion_Minigun_0047944c;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d84c0 = 8;
  _DAT_004d849c = 8;
  _DAT_004d84a0 = 0x3ecccccd;
  _DAT_004d84a4 = 0x3faccccd;
  _DAT_004d84a8 = 0x3de56042;
  _DAT_004d8454 = 4;
  _DAT_004d84b8 = _DAT_004d86a8;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d84d4;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d852c = sfx_shockminigun_fire;
  uVar5 = 0xffffffff;
  _DAT_004d853c = 8;
  _DAT_004d8518 = 0x14;
  _DAT_004d851c = 0x3dcccccd;
  _DAT_004d8520 = 0x3fe66666;
  _DAT_004d8524 = 0x3db851ec;
  _DAT_004d84d0 = 4;
  _DAT_004d8534 = _DAT_004d86a8;
  pcVar7 = s_Ion_Cannon_00479440;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d8550;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d85a8 = sfx_shock_fire_alt;
  uVar5 = 0xffffffff;
  pcVar7 = s_Ion_Shotgun_00479434;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d8594 = 3;
  _DAT_004d8598 = 0x3f800000;
  _DAT_004d859c = 0x40400000;
  _DAT_004d85a0 = 0x3f2e147b;
  _DAT_004d854c = 4;
  _DAT_004d85b0 = _DAT_004d86a8;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d8930;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d8988 = sfx_shock_fire_alt;
  uVar5 = 0xffffffff;
  pcVar7 = s_Gauss_Shotgun_00479424;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d8998 = 1;
  _DAT_004d8974 = 10;
  _DAT_004d8978 = 0x3f59999a;
  _DAT_004d897c = 0x3ff33333;
  _DAT_004d8980 = 0x3e8a3d71;
  _DAT_004d89a4 = 8;
  _DAT_004d892c = 4;
  _DAT_004d8990 = _DAT_004d86a8;
  _DAT_004d8994 = 0x1f;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d88b4;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d890c = sfx_gauss_fire;
  uVar5 = 0xffffffff;
  pcVar7 = s_Plasma_Cannon_00479414;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d891c = 1;
  _DAT_004d88f8 = 4;
  _DAT_004d88fc = 0x3f866666;
  _DAT_004d8900 = 0x40066666;
  _DAT_004d8904 = 0x3e8a3d71;
  _DAT_004d88b0 = 0;
  _DAT_004d8914 = _DAT_004d93bc;
  _DAT_004d8918 = 0x1e;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d87bc;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d8814 = sfx_shock_fire;
  uVar5 = 0xffffffff;
  _DAT_004d8800 = 3;
  pcVar7 = s_Evil_Scythe_00479408;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d8804 = 0x3f666666;
  _DAT_004d8808 = 0x402ccccd;
  _DAT_004d880c = 0x3f19999a;
  _DAT_004d881c = _DAT_004d86a8;
  _DAT_004d8820 = 0x19;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d8740;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d8798 = sfx_shock_fire_alt;
  uVar5 = 0xffffffff;
  pcVar7 = s_Flameburst_004793fc;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d8784 = 3;
  _DAT_004d8788 = 0x3f800000;
  _DAT_004d878c = 0x40400000;
  _DAT_004d8790 = 0x3f2e147b;
  _DAT_004d873c = 4;
  _DAT_004d87a0 = _DAT_004d86a8;
  _DAT_004d87a4 = 0x19;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d89ac;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d8a04 = sfx_flamer_fire_01;
  uVar5 = 0xffffffff;
  pcVar7 = &DAT_004793f4;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d89f0 = 0x3c;
  _DAT_004d89f4 = 0x3ca3d70a;
  _DAT_004d89f8 = 0x40400000;
  _DAT_004d89fc = 0x3e3851ec;
  _DAT_004d89a8 = 4;
  _DAT_004d8a0c = _DAT_004d86a8;
  _DAT_004d8a10 = 0x1d;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d8a28;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d8a80 = sfx_shock_fire_alt;
  uVar5 = 0xffffffff;
  _DAT_004d8a6c = 0xc;
  _DAT_004d8a70 = 0x3f333333;
  _DAT_004d8a74 = 0x40000000;
  _DAT_004d8a78 = 0x3ec28f5c;
  _DAT_004d8a24 = 4;
  _DAT_004d8a88 = _DAT_004d86a8;
  _DAT_004d8a8c = 0x1e;
  pcVar7 = s_Splitter_Gun_004793e4;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d8838;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d8890 = sfx_shock_fire_alt;
  uVar5 = 0xffffffff;
  pcVar7 = s_Shrinkifier_5k_004793d4;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d887c = 6;
  _DAT_004d8880 = 0x3f333333;
  _DAT_004d8884 = 0x400ccccd;
  _DAT_004d8888 = 0x3e8f5c29;
  _DAT_004d8834 = 0;
  _DAT_004d8898 = _DAT_004d86a8;
  _DAT_004d88a8 = 0x40c00000;
  _DAT_004d88a4 = 0x41f00000;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d85cc;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d8624 = sfx_shock_fire_alt;
  uVar5 = 0xffffffff;
  pcVar7 = s_Blade_Gun_004793c8;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d8634 = 8;
  _DAT_004d8610 = 8;
  _DAT_004d8614 = 0x3e570a3d;
  _DAT_004d8618 = 0x3f9c28f6;
  _DAT_004d861c = 0x3d23d70a;
  _DAT_004d862c = _DAT_004d86a8;
  _DAT_004d8630 = 0x17;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d8648;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d86a0 = sfx_shock_fire_alt;
  uVar5 = 0xffffffff;
  pcVar7 = s_Plague_Sphreader_Gun_004793b0;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d86b0 = 8;
  _DAT_004d868c = 6;
  _DAT_004d8690 = 0x3eb33333;
  _DAT_004d8694 = 0x40600000;
  _DAT_004d8698 = 0x3d23d70a;
  _DAT_004d86ac = 0x18;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d8e08;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; _DAT_004d92bc = sfx_bloodspill_01, uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d8e70 = 8;
  uVar5 = 0xffffffff;
  pcVar7 = s_Rainbow_Gun_004793a4;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d8e4c = 5;
  _DAT_004d8e50 = 0x3e4ccccd;
  _DAT_004d8e54 = 0x3f99999a;
  _DAT_004d8e58 = 0x3d23d70a;
  _DAT_004d8e60 = sfx_bloodspill_01;
  _DAT_004d8e68 = _DAT_004d93bc;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d8f00;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  uVar5 = 0xffffffff;
  pcVar7 = s_Grim_Weapon_00479398;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d8f68 = 8;
  _DAT_004d8f44 = 10;
  _DAT_004d8f48 = 0x3e4ccccd;
  _DAT_004d8f4c = 0x3f99999a;
  _DAT_004d8f50 = 0x3db851ec;
  _DAT_004d8f58 = _DAT_004d92bc;
  _DAT_004d8f60 = _DAT_004d93bc;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d8f7c;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  uVar5 = 0xffffffff;
  pcVar7 = s_Bubblegun_0047938c;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d8fc0 = 3;
  _DAT_004d8fc4 = 0x3f000000;
  _DAT_004d8fc8 = 0x3f99999a;
  _DAT_004d8fcc = 0x3ecccccd;
  _DAT_004d8fd4 = _DAT_004d92bc;
  _DAT_004d8fdc = _DAT_004d93bc;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d8e84;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  uVar5 = 0xffffffff;
  pcVar7 = s_Spider_Plasma_0047937c;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d8eec = 8;
  _DAT_004d8ec8 = 0xf;
  _DAT_004d8ecc = 0x3e252bd4;
  _DAT_004d8ed0 = 0x3f99999a;
  _DAT_004d8ed4 = 0x3d4ccccd;
  _DAT_004d8edc = _DAT_004d92bc;
  _DAT_004d8ee4 = _DAT_004d93bc;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d86c4;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  uVar5 = 0xffffffff;
  pcVar7 = s_Transmutator_0047936c;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d872c = 8;
  _DAT_004d8708 = 5;
  _DAT_004d870c = 0x3e4ccccd;
  _DAT_004d8710 = 0x3f99999a;
  _DAT_004d8714 = 0x3d23d70a;
  _DAT_004d871c = _DAT_004d92bc;
  _DAT_004d8724 = _DAT_004d93bc;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d9264;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; _DAT_004d93b4 = sfx_explosion_large, uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  uVar5 = 0xffffffff;
  pcVar7 = s_Blaster_R_300_0047935c;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d92cc = 9;
  _DAT_004d92a8 = 0x32;
  _DAT_004d92ac = 0x3d23d70a;
  _DAT_004d92b0 = 0x40a00000;
  _DAT_004d92b4 = 0x3d23d70a;
  _DAT_004d92c4 = _DAT_004d93bc;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d92e0;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d9338 = sfx_shock_fire;
  uVar5 = 0xffffffff;
  pcVar7 = s_Nuke_Launcher_0047934c;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d9348 = 9;
  _DAT_004d9324 = 0x14;
  _DAT_004d9328 = 0x3da3d70a;
  _DAT_004d932c = 0x40000000;
  _DAT_004d9330 = 0x3d4ccccd;
  _DAT_004d9340 = _DAT_004d93bc;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d93d8;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  uVar5 = 0xffffffff;
  pcVar7 = s___Lighting_Rifle_0047933a + 2;
  do {
    pcVar8 = pcVar7;
    if (uVar5 == 0) break;
    uVar5 = uVar5 - 1;
    pcVar8 = pcVar7 + 1;
    cVar2 = *pcVar7;
    pcVar7 = pcVar8;
  } while (cVar2 != '\0');
  uVar5 = ~uVar5;
  _DAT_004d9440 = 8;
  _DAT_004d941c = 1;
  _DAT_004d9420 = 0x40800000;
  _DAT_004d9424 = 0x41000000;
  _DAT_004d9428 = 0x3f800000;
  _DAT_004d9430 = _DAT_004d93b4;
  _DAT_004d9438 = _DAT_004d93bc;
  pcVar7 = pcVar8 + -uVar5;
  pcVar8 = (char *)&DAT_004d935c;
  for (uVar6 = uVar5 >> 2; uVar6 != 0; uVar6 = uVar6 - 1) {
    *(undefined4 *)pcVar8 = *(undefined4 *)pcVar7;
    pcVar7 = pcVar7 + 4;
    pcVar8 = pcVar8 + 4;
  }
  for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
    *pcVar8 = *pcVar7;
    pcVar7 = pcVar7 + 1;
    pcVar8 = pcVar8 + 1;
  }
  _DAT_004d93c4 = 8;
  _DAT_004d93a0 = 500;
  _DAT_004d93a4 = 0x40800000;
  _DAT_004d93a8 = 0x41000000;
  _DAT_004d93ac = 0x3f800000;
  return;
}



/* weapon_pick_random_available @ 00452cd0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* selects a random weapon id that is marked available */

int weapon_pick_random_available(void)

{
  int iVar1;
  uint uVar2;
  
  do {
    iVar1 = _rand();
    iVar1 = iVar1 % 0x21 + 1;
    if ((&DAT_00485544)[iVar1] != 0) {
      uVar2 = _rand();
      if ((uVar2 & 1) == 0) {
        iVar1 = _rand();
        iVar1 = iVar1 % 0x21 + 1;
      }
    }
  } while (((&DAT_004d7a6c)[iVar1 * 0x7c] == '\0') ||
          ((((_config_game_mode == 3 && (_quest_stage_major == 5)) && (_quest_stage_minor == 10)) &&
           (iVar1 == 0x17))));
  return iVar1;
}



/* weapon_assign_player @ 00452d40 */

/* assigns a weapon to a player and resets ammo timers */

void __cdecl weapon_assign_player(int player_index,int weapon_id)

{
  float sfx_id;
  int iVar1;
  int iVar2;
  longlong lVar3;
  
  if (demo_mode_active == '\0') {
    (&DAT_00485544)[weapon_id] = (&DAT_00485544)[weapon_id] + 1;
  }
  iVar2 = weapon_id * 0x7c;
  (&player_weapon_id)[player_index * 0xd8] = weapon_id;
  iVar1 = perk_id_ammo_maniac;
  (&player_clip_size)[player_index * 0xd8] = (float)(int)(&DAT_004d7a70)[weapon_id * 0x1f];
  iVar1 = perk_count_get(iVar1);
  if (iVar1 != 0) {
    lVar3 = __ftol();
    weapon_id = (int)lVar3;
    if (weapon_id < 2) {
      weapon_id = 1;
    }
    (&player_clip_size)[player_index * 0xd8] =
         (float)weapon_id + (float)(&player_clip_size)[player_index * 0xd8];
  }
  iVar1 = perk_count_get(perk_id_my_favourite_weapon);
  if (iVar1 != 0) {
    (&player_clip_size)[player_index * 0xd8] = (float)(&player_clip_size)[player_index * 0xd8] + 2.0
    ;
  }
  sfx_id = *(float *)(&DAT_004d7a8c + iVar2);
  (&player_ammo)[player_index * 0xd8] = (&player_clip_size)[player_index * 0xd8];
  *(undefined4 *)(&player_weapon_reset_latch + player_index * 0x360) = 0;
  (&player_shot_cooldown)[player_index * 0xd8] = 0;
  (&player_reload_timer)[player_index * 0xd8] = 0;
  (&DAT_004871d0)[player_index] = 0x40000000;
  sfx_play_panned(sfx_id);
  return;
}



/* weapon_refresh_available @ 00452e40 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* rebuilds availability flags from the unlock list */

void weapon_refresh_available(void)

{
  int iVar1;
  undefined1 *puVar2;
  int iVar3;
  int *piVar4;
  int iVar5;
  
  puVar2 = &DAT_004d7a6c;
  do {
    *puVar2 = 0;
    iVar3 = quest_unlock_index;
    puVar2 = puVar2 + 0x7c;
  } while ((int)puVar2 < 0x4d996c);
  iVar5 = 0;
  DAT_004d7ae8 = 1;
  if (0 < quest_unlock_index) {
    piVar4 = &quest_unlock_weapon_id;
    do {
      if (0x484feb < (int)piVar4) break;
      iVar1 = *piVar4;
      piVar4 = piVar4 + 0xb;
      iVar5 = iVar5 + 1;
      (&DAT_004d7a6c)[iVar1 * 0x7c] = 1;
    } while (iVar5 < iVar3);
  }
  if (_config_game_mode == 1) {
    DAT_004d7b64 = 1;
    DAT_004d7be0 = 1;
    DAT_004d7cd8 = 1;
  }
  iVar3 = game_is_full_version();
  if ((char)iVar3 == '\0') {
    quest_unlock_index_full = 0;
    DAT_004d7a6c = (char)iVar3;
    return;
  }
  if (0x27 < quest_unlock_index_full) {
    DAT_004d8878 = 1;
  }
  DAT_004d7a6c = 0;
  return;
}



/* float_near_equal @ 00452ef0 */

/* returns 1 when |a-b| < 1.1920929e-07 (FLT_EPSILON) */

int __cdecl float_near_equal(float a,float b)

{
  float fVar1;
  
  fVar1 = a - b;
  if ((!NAN(fVar1) && -1.1920929e-07 < fVar1 != (fVar1 == -1.1920929e-07)) &&
     (fVar1 < 1.1920929e-07 != (fVar1 == 1.1920929e-07))) {
    return 1;
  }
  return 0;
}



/* FUN_00452f1d @ 00452f1d */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_00452f1d(void)

{
  renderer_select_backend(1);
                    /* WARNING: Could not recover jumptable at 0x00452f24. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  (*_DAT_00479658)();
  return;
}



/* FUN_00452f30 @ 00452f30 */

void FUN_00452f30(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6)

{
  renderer_select_backend(1);
  (*(code *)PTR_FUN_004795e4)(param_1,param_2,param_3,param_4,param_5,param_6);
  return;
}



/* FUN_00452f5a @ 00452f5a */

void FUN_00452f5a(float *param_1,float *param_2,float *param_3,float *param_4,float *param_5,
                 float param_6)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  
  fVar1 = param_6 * param_6;
  fVar2 = param_6 * fVar1;
  fVar5 = ((fVar2 + fVar2) - fVar1 * 3.0) + 1.0;
  fVar3 = (fVar2 - (fVar1 + fVar1)) + param_6;
  fVar4 = fVar1 * 3.0 - (fVar2 + fVar2);
  *param_1 = (fVar2 - fVar1) * *param_5 + fVar4 * *param_4 + fVar3 * *param_3 + fVar5 * *param_2;
  param_1[1] = fVar5 * param_2[1] +
               fVar3 * param_3[1] + fVar4 * param_4[1] + (fVar2 - fVar1) * param_5[1];
  return;
}



/* FUN_00452fe8 @ 00452fe8 */

void FUN_00452fe8(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6)

{
  renderer_select_backend(1);
  (*(code *)PTR_FUN_0047965c)(param_1,param_2,param_3,param_4,param_5,param_6);
  return;
}



/* FUN_00453012 @ 00453012 */

void FUN_00453012(float *param_1,float *param_2,float *param_3,float *param_4,float *param_5,
                 float param_6)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  
  fVar1 = param_6 * param_6;
  fVar2 = param_6 * fVar1;
  fVar5 = (fVar1 * 2.0 - fVar2) - param_6;
  fVar4 = (fVar2 * 3.0 - fVar1 * 5.0) + 2.0;
  fVar3 = (fVar1 * 4.0 - fVar2 * 3.0) + param_6;
  *param_1 = ((fVar2 - fVar1) * *param_5 + fVar3 * *param_4 + fVar4 * *param_3 + fVar5 * *param_2) *
             0.5;
  param_1[1] = (fVar5 * param_2[1] +
               fVar4 * param_3[1] + fVar3 * param_4[1] + (fVar2 - fVar1) * param_5[1]) * 0.5;
  return;
}



/* FUN_004530c1 @ 004530c1 */

void FUN_004530c1(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6)

{
  renderer_select_backend(1);
  (*(code *)PTR_FUN_00479660)(param_1,param_2,param_3,param_4,param_5,param_6);
  return;
}



/* FUN_004530f0 @ 004530f0 */

void FUN_004530f0(float *param_1,float *param_2,float *param_3,float *param_4,float param_5,
                 float param_6)

{
  *param_1 = (*param_4 - *param_2) * param_6 + (*param_3 - *param_2) * param_5 + *param_2;
  param_1[1] = (param_4[1] - param_2[1]) * param_6 + (param_3[1] - param_2[1]) * param_5 +
               param_2[1];
  return;
}



/* FUN_0045315a @ 0045315a */

void FUN_0045315a(void)

{
  renderer_select_backend(1);
                    /* WARNING: Could not recover jumptable at 0x00453161. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  (*(code *)PTR_FUN_004795bc)();
  return;
}



/* FUN_00453197 @ 00453197 */

void FUN_00453197(float *param_1,float *param_2,float *param_3,float *param_4,float *param_5,
                 float param_6)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  
  fVar1 = param_6 * param_6;
  fVar2 = param_6 * fVar1;
  fVar5 = ((fVar2 + fVar2) - fVar1 * 3.0) + 1.0;
  fVar3 = (fVar2 - (fVar1 + fVar1)) + param_6;
  fVar4 = fVar1 * 3.0 - (fVar2 + fVar2);
  fVar2 = fVar2 - fVar1;
  *param_1 = fVar2 * *param_5 + fVar4 * *param_4 + fVar3 * *param_3 + fVar5 * *param_2;
  param_1[1] = fVar5 * param_2[1] + fVar3 * param_3[1] + fVar4 * param_4[1] + fVar2 * param_5[1];
  param_1[2] = fVar5 * param_2[2] + fVar3 * param_3[2] + fVar4 * param_4[2] + fVar2 * param_5[2];
  return;
}



/* FUN_00453245 @ 00453245 */

void FUN_00453245(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6)

{
  renderer_select_backend(1);
  (*(code *)PTR_FUN_00479668)(param_1,param_2,param_3,param_4,param_5,param_6);
  return;
}



/* FUN_0045326f @ 0045326f */

void FUN_0045326f(float *param_1,float *param_2,float *param_3,float *param_4,float *param_5,
                 float param_6)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  
  fVar1 = param_6 * param_6;
  fVar2 = param_6 * fVar1;
  fVar5 = (fVar1 * 2.0 - fVar2) - param_6;
  fVar4 = (fVar2 * 3.0 - fVar1 * 5.0) + 2.0;
  fVar3 = (fVar1 * 4.0 - fVar2 * 3.0) + param_6;
  fVar2 = fVar2 - fVar1;
  *param_1 = (fVar2 * *param_5 + fVar3 * *param_4 + fVar4 * *param_3 + fVar5 * *param_2) * 0.5;
  param_1[1] = (fVar5 * param_2[1] + fVar4 * param_3[1] + fVar3 * param_4[1] + fVar2 * param_5[1]) *
               0.5;
  param_1[2] = (fVar5 * param_2[2] + fVar4 * param_3[2] + fVar3 * param_4[2] + fVar2 * param_5[2]) *
               0.5;
  return;
}



/* FUN_00453340 @ 00453340 */

void FUN_00453340(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6)

{
  renderer_select_backend(1);
  (*(code *)PTR_FUN_0047966c)(param_1,param_2,param_3,param_4,param_5,param_6);
  return;
}



/* FUN_0045336f @ 0045336f */

void FUN_0045336f(float *param_1,float *param_2,float *param_3,float *param_4,float param_5,
                 float param_6)

{
  *param_1 = (*param_4 - *param_2) * param_6 + (*param_3 - *param_2) * param_5 + *param_2;
  param_1[1] = (param_4[1] - param_2[1]) * param_6 + (param_3[1] - param_2[1]) * param_5 +
               param_2[1];
  param_1[2] = (param_4[2] - param_2[2]) * param_6 + (param_3[2] - param_2[2]) * param_5 +
               param_2[2];
  return;
}



/* FUN_00453464 @ 00453464 */

void FUN_00453464(void)

{
  renderer_select_backend(1);
                    /* WARNING: Could not recover jumptable at 0x0045346b. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  (*(code *)PTR_FUN_004795c8)();
  return;
}



/* FUN_004534ea @ 004534ea */

void FUN_004534ea(void)

{
  renderer_select_backend(1);
                    /* WARNING: Could not recover jumptable at 0x004534f5. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  (*(code *)PTR_FUN_004795d8)();
  return;
}



/* FUN_00453640 @ 00453640 */

void FUN_00453640(float *param_1,float *param_2,float *param_3,float *param_4,float *param_5,
                 float param_6)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  
  fVar1 = param_6 * param_6;
  fVar2 = param_6 * fVar1;
  fVar5 = ((fVar2 + fVar2) - fVar1 * 3.0) + 1.0;
  fVar4 = (fVar2 - (fVar1 + fVar1)) + param_6;
  fVar3 = fVar1 * 3.0 - (fVar2 + fVar2);
  fVar2 = fVar2 - fVar1;
  *param_1 = fVar2 * *param_5 + fVar3 * *param_4 + fVar4 * *param_3 + fVar5 * *param_2;
  param_1[1] = fVar5 * param_2[1] + fVar4 * param_3[1] + fVar3 * param_4[1] + fVar2 * param_5[1];
  param_1[2] = fVar5 * param_2[2] + fVar4 * param_3[2] + fVar3 * param_4[2] + fVar2 * param_5[2];
  param_1[3] = fVar5 * param_2[3] + fVar4 * param_3[3] + fVar3 * param_4[3] + fVar2 * param_5[3];
  return;
}



/* FUN_00453711 @ 00453711 */

void FUN_00453711(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6)

{
  renderer_select_backend(1);
  (*(code *)PTR_FUN_00479674)(param_1,param_2,param_3,param_4,param_5,param_6);
  return;
}



/* FUN_0045373b @ 0045373b */

void FUN_0045373b(float *param_1,float *param_2,float *param_3,float *param_4,float *param_5,
                 float param_6)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  
  fVar1 = param_6 * param_6;
  fVar2 = param_6 * fVar1;
  fVar5 = (fVar1 * 2.0 - fVar2) - param_6;
  fVar4 = (fVar2 * 3.0 - fVar1 * 5.0) + 2.0;
  fVar3 = (fVar1 * 4.0 - fVar2 * 3.0) + param_6;
  fVar2 = fVar2 - fVar1;
  *param_1 = (fVar2 * *param_5 + fVar3 * *param_4 + fVar4 * *param_3 + fVar5 * *param_2) * 0.5;
  param_1[1] = (fVar5 * param_2[1] + fVar4 * param_3[1] + fVar3 * param_4[1] + fVar2 * param_5[1]) *
               0.5;
  param_1[2] = (fVar5 * param_2[2] + fVar4 * param_3[2] + fVar3 * param_4[2] + fVar2 * param_5[2]) *
               0.5;
  param_1[3] = (fVar5 * param_2[3] + fVar4 * param_3[3] + fVar3 * param_4[3] + fVar2 * param_5[3]) *
               0.5;
  return;
}



/* FUN_0045382e @ 0045382e */

void FUN_0045382e(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6)

{
  renderer_select_backend(1);
  (*(code *)PTR_FUN_00479678)(param_1,param_2,param_3,param_4,param_5,param_6);
  return;
}



/* FUN_0045385d @ 0045385d */

void FUN_0045385d(float *param_1,float *param_2,float *param_3,float *param_4,float param_5,
                 float param_6)

{
  *param_1 = (*param_4 - *param_2) * param_6 + (*param_3 - *param_2) * param_5 + *param_2;
  param_1[1] = (param_4[1] - param_2[1]) * param_6 + (param_3[1] - param_2[1]) * param_5 +
               param_2[1];
  param_1[2] = (param_4[2] - param_2[2]) * param_6 + (param_3[2] - param_2[2]) * param_5 +
               param_2[2];
  param_1[3] = (param_4[3] - param_2[3]) * param_6 + (param_3[3] - param_2[3]) * param_5 +
               param_2[3];
  return;
}



/* FUN_00453a57 @ 00453a57 */

void FUN_00453a57(void)

{
  renderer_select_backend(1);
                    /* WARNING: Could not recover jumptable at 0x00453a5e. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  (*(code *)PTR_FUN_004795ac)();
  return;
}



/* FUN_00453ca0 @ 00453ca0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_00453ca0(void)

{
  renderer_select_backend(1);
                    /* WARNING: Could not recover jumptable at 0x00453ca7. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  (*_DAT_00479634)();
  return;
}



/* FUN_00453f63 @ 00453f63 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_00453f63(void)

{
  renderer_select_backend(1);
                    /* WARNING: Could not recover jumptable at 0x00453f6a. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  (*_DAT_004795e8)();
  return;
}



/* FUN_00454303 @ 00454303 */

void FUN_00454303(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  renderer_select_backend(1);
  (*(code *)PTR_FUN_00479624)(param_1,param_2,param_3,param_4);
  return;
}



/* FUN_0045438d @ 0045438d */

void FUN_0045438d(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  renderer_select_backend(1);
  (*(code *)PTR_FUN_00479608)(param_1,param_2,param_3,param_4);
  return;
}



/* FUN_00454417 @ 00454417 */

void FUN_00454417(undefined4 param_1,undefined4 param_2)

{
  renderer_select_backend(1);
  (*(code *)PTR_FUN_00479618)(param_1,param_2);
  return;
}



/* FUN_00454433 @ 00454433 */

void FUN_00454433(undefined4 *param_1,float param_2)

{
  float10 fVar1;
  float10 fVar2;
  
  fVar1 = (float10)fcos((float10)param_2);
  fVar2 = (float10)fsin((float10)param_2);
  *param_1 = 0x3f800000;
  param_1[1] = 0;
  param_1[6] = (float)fVar2;
  param_1[2] = 0;
  param_1[3] = 0;
  param_1[4] = 0;
  param_1[5] = (float)fVar1;
  param_1[7] = 0;
  param_1[8] = 0;
  param_1[9] = -(float)fVar2;
  param_1[10] = (float)fVar1;
  param_1[0xb] = 0;
  param_1[0xc] = 0;
  param_1[0xd] = 0;
  param_1[0xe] = 0;
  param_1[0xf] = 0x3f800000;
  return;
}



/* FUN_004544ad @ 004544ad */

void FUN_004544ad(undefined4 param_1,undefined4 param_2)

{
  renderer_select_backend(1);
  (*(code *)PTR_FUN_0047961c)(param_1,param_2);
  return;
}



/* FUN_004544c9 @ 004544c9 */

void FUN_004544c9(float *param_1,float param_2)

{
  float10 fVar1;
  float10 fVar2;
  
  fVar1 = (float10)fcos((float10)param_2);
  fVar2 = (float10)fsin((float10)param_2);
  *param_1 = (float)fVar1;
  param_1[1] = 0.0;
  param_1[2] = -(float)fVar2;
  param_1[3] = 0.0;
  param_1[4] = 0.0;
  param_1[5] = 1.0;
  param_1[6] = 0.0;
  param_1[7] = 0.0;
  param_1[8] = (float)fVar2;
  param_1[9] = 0.0;
  param_1[10] = (float)fVar1;
  param_1[0xb] = 0.0;
  param_1[0xc] = 0.0;
  param_1[0xd] = 0.0;
  param_1[0xe] = 0.0;
  param_1[0xf] = 1.0;
  return;
}



/* FUN_00454544 @ 00454544 */

void FUN_00454544(undefined4 param_1,undefined4 param_2)

{
  renderer_select_backend(1);
  (*(code *)PTR_FUN_00479620)(param_1,param_2);
  return;
}



/* FUN_00454560 @ 00454560 */

void FUN_00454560(float *param_1,float param_2)

{
  float10 fVar1;
  float10 fVar2;
  
  fVar1 = (float10)fcos((float10)param_2);
  fVar2 = (float10)fsin((float10)param_2);
  *param_1 = (float)fVar1;
  param_1[1] = (float)fVar2;
  param_1[2] = 0.0;
  param_1[3] = 0.0;
  param_1[4] = -(float)fVar2;
  param_1[5] = (float)fVar1;
  param_1[6] = 0.0;
  param_1[7] = 0.0;
  param_1[8] = 0.0;
  param_1[9] = 0.0;
  param_1[10] = 1.0;
  param_1[0xb] = 0.0;
  param_1[0xc] = 0.0;
  param_1[0xd] = 0.0;
  param_1[0xe] = 0.0;
  param_1[0xf] = 1.0;
  return;
}



/* FUN_004545dc @ 004545dc */

void FUN_004545dc(undefined4 param_1,undefined4 param_2,undefined4 param_3)

{
  renderer_select_backend(1);
  (*(code *)PTR_FUN_00479648)(param_1,param_2,param_3);
  return;
}



/* FUN_004545fc @ 004545fc */

void FUN_004545fc(float *param_1,float *param_2,float param_3)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float10 fVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  float10 fVar11;
  
  fVar6 = (float10)fcos((float10)param_3);
  fVar11 = (float10)fsin((float10)param_3);
  fVar1 = (float)fVar6;
  fVar2 = (float)fVar11;
  fVar7 = 1.0 - fVar1;
  fVar3 = *param_2;
  fVar4 = param_2[1];
  fVar5 = param_2[2];
  thunk_FUN_0045315a();
  fVar8 = fVar4 * fVar3 * fVar7;
  fVar9 = fVar4 * fVar5 * fVar7;
  fVar10 = fVar5 * fVar3 * fVar7;
  *param_1 = fVar3 * fVar3 * fVar7 + fVar1;
  param_1[1] = fVar8 + fVar5 * fVar2;
  param_1[2] = fVar10 - fVar4 * fVar2;
  param_1[3] = 0.0;
  param_1[4] = fVar8 - fVar5 * fVar2;
  param_1[5] = fVar4 * fVar4 * fVar7 + fVar1;
  param_1[6] = fVar3 * fVar2 + fVar9;
  param_1[7] = 0.0;
  param_1[8] = fVar4 * fVar2 + fVar10;
  param_1[9] = fVar9 - fVar3 * fVar2;
  param_1[10] = fVar5 * fVar5 * fVar7 + fVar1;
  param_1[0xb] = 0.0;
  param_1[0xc] = 0.0;
  param_1[0xd] = 0.0;
  param_1[0xe] = 0.0;
  param_1[0xf] = 1.0;
  return;
}



/* FUN_004546fe @ 004546fe */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_004546fe(void)

{
  renderer_select_backend(1);
                    /* WARNING: Could not recover jumptable at 0x00454705. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  (*_DAT_00479638)();
  return;
}



/* FUN_004547f3 @ 004547f3 */

void FUN_004547f3(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  renderer_select_backend(1);
  (*(code *)PTR_FUN_00479640)(param_1,param_2,param_3,param_4);
  return;
}



/* FUN_00454821 @ 00454821 */

void FUN_00454821(void)

{
  renderer_select_backend(1);
                    /* WARNING: Could not recover jumptable at 0x0045482c. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  (*(code *)PTR_FUN_0047963c)();
  return;
}



/* FUN_00454832 @ 00454832 */

void FUN_00454832(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5)

{
  renderer_select_backend(1);
  (*(code *)PTR_FUN_00479644)(param_1,param_2,param_3,param_4,param_5);
  return;
}



/* FUN_00454859 @ 00454859 */

undefined4 *
FUN_00454859(undefined4 *param_1,undefined4 param_2,float *param_3,int param_4,float *param_5)

{
  param_1[0xe] = 0;
  param_1[0xd] = 0;
  param_1[0xc] = 0;
  param_1[0xb] = 0;
  param_1[9] = 0;
  param_1[8] = 0;
  param_1[7] = 0;
  param_1[6] = 0;
  param_1[4] = 0;
  param_1[3] = 0;
  param_1[2] = 0;
  param_1[1] = 0;
  *param_1 = param_2;
  param_1[5] = param_2;
  param_1[10] = param_2;
  param_1[0xf] = 0x3f800000;
  if (param_4 != 0) {
    thunk_FUN_004546fe();
    if (param_3 == (float *)0x0) {
      thunk_FUN_00453a57();
    }
    else {
      param_1[0xc] = (float)param_1[0xc] - *param_3;
      param_1[0xd] = (float)param_1[0xd] - param_3[1];
      param_1[0xe] = (float)param_1[0xe] - param_3[2];
      thunk_FUN_00453a57();
      param_1[0xc] = *param_3 + (float)param_1[0xc];
      param_1[0xd] = (float)param_1[0xd] + param_3[1];
      param_1[0xe] = param_3[2] + (float)param_1[0xe];
    }
  }
  if (param_5 != (float *)0x0) {
    param_1[0xc] = *param_5 + (float)param_1[0xc];
    param_1[0xd] = param_5[1] + (float)param_1[0xd];
    param_1[0xe] = param_5[2] + (float)param_1[0xe];
  }
  return param_1;
}



/* FUN_00454b44 @ 00454b44 */

void FUN_00454b44(undefined4 param_1,undefined4 param_2,undefined4 param_3)

{
  renderer_select_backend(1);
  (*(code *)PTR_FUN_00479614)(param_1,param_2,param_3);
  return;
}



/* FUN_00454b64 @ 00454b64 */

float * FUN_00454b64(float *param_1,undefined4 param_2,float param_3)

{
  float fVar1;
  float10 fVar2;
  float10 fVar3;
  float local_18;
  float local_14;
  float local_10;
  
  thunk_FUN_0045315a();
  fVar2 = (float10)fcos((float10)(param_3 * 0.5));
  fVar3 = (float10)fsin((float10)(param_3 * 0.5));
  param_1[3] = (float)fVar2;
  fVar1 = (float)fVar3;
  *param_1 = local_18 * fVar1;
  param_1[1] = local_14 * fVar1;
  param_1[2] = local_10 * fVar1;
  return param_1;
}



/* FUN_00454bc0 @ 00454bc0 */

void FUN_00454bc0(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  renderer_select_backend(1);
  (*(code *)PTR_FUN_00479604)(param_1,param_2,param_3,param_4);
  return;
}



/* FUN_00454ccd @ 00454ccd */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_00454ccd(void)

{
  renderer_select_backend(1);
                    /* WARNING: Could not recover jumptable at 0x00454cd4. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  (*_DAT_004795ec)();
  return;
}



/* FUN_00454e3c @ 00454e3c */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_00454e3c(void)

{
  renderer_select_backend(1);
                    /* WARNING: Could not recover jumptable at 0x00454e43. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  (*_DAT_00479650)();
  return;
}



/* FUN_00454f03 @ 00454f03 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_00454f03(void)

{
                    /* WARNING: Could not recover jumptable at 0x00454f03. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  (*_DAT_0047967c)();
  return;
}



/* FUN_00454f87 @ 00454f87 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_00454f87(void)

{
                    /* WARNING: Could not recover jumptable at 0x00454f87. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  (*_DAT_00479680)();
  return;
}



/* FUN_00455028 @ 00455028 */

void FUN_00455028(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  renderer_select_backend(1);
  (*(code *)PTR_FUN_0047962c)(param_1,param_2,param_3,param_4);
  return;
}



/* FUN_00455135 @ 00455135 */

void FUN_00455135(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6)

{
  renderer_select_backend(1);
  (*(code *)PTR_FUN_0047964c)(param_1,param_2,param_3,param_4,param_5,param_6);
  return;
}



/* FUN_0045515f @ 0045515f */

undefined4
FUN_0045515f(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
            undefined4 param_5,float param_6)

{
  float fVar1;
  undefined1 local_24 [16];
  undefined1 local_14 [16];
  
  thunk_FUN_00455028(local_24,param_2,param_5,param_6);
  thunk_FUN_00455028(local_14,param_3,param_4,param_6);
  fVar1 = (1.0 - param_6) * param_6;
  thunk_FUN_00455028(param_1,local_24,local_14,fVar1 + fVar1);
  return param_1;
}



/* FUN_004551b6 @ 004551b6 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_004551b6(void)

{
  renderer_select_backend(1);
                    /* WARNING: Could not recover jumptable at 0x004551c1. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  (*_DAT_00479654)();
  return;
}



/* FUN_004551f6 @ 004551f6 */

undefined4 *
FUN_004551f6(undefined4 *param_1,undefined4 *param_2,undefined4 param_3,undefined4 param_4,
            float param_5,float param_6)

{
  float a;
  int iVar1;
  undefined1 local_24 [16];
  undefined1 local_14 [16];
  
  a = param_5 + param_6;
  iVar1 = float_near_equal(a,0.0);
  if (iVar1 == 0) {
    thunk_FUN_00455028(local_24,param_2,param_3,a);
    thunk_FUN_00455028(local_14,param_2,param_4,a);
    thunk_FUN_00455028(param_1,local_24,local_14,param_6 / a);
  }
  else if (param_1 != param_2) {
    *param_1 = *param_2;
    param_1[1] = param_2[1];
    param_1[2] = param_2[2];
    param_1[3] = param_2[3];
  }
  return param_1;
}



/* FUN_00455281 @ 00455281 */

void FUN_00455281(void)

{
  renderer_select_backend(1);
                    /* WARNING: Could not recover jumptable at 0x00455288. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  (*(code *)PTR_FUN_004795f4)();
  return;
}



/* FUN_00455587 @ 00455587 */

void FUN_00455587(float *param_1,float *param_2)

{
  float a;
  int iVar1;
  float *extraout_ECX;
  float fVar2;
  
  a = param_2[1] * param_2[1] + *param_2 * *param_2;
  iVar1 = float_near_equal(a,1.0);
  if (iVar1 == 0) {
    if (a <= 1.1754944e-38) {
      *param_1 = 0.0;
      param_1[1] = 0.0;
      return;
    }
    fVar2 = (1.0 / SQRT(a)) * extraout_ECX[1];
    *param_1 = (1.0 / SQRT(a)) * *extraout_ECX;
  }
  else {
    if (param_1 == extraout_ECX) {
      return;
    }
    *param_1 = *extraout_ECX;
    fVar2 = extraout_ECX[1];
  }
  param_1[1] = fVar2;
  return;
}



/* FUN_00455614 @ 00455614 */

void FUN_00455614(float *param_1,float *param_2,float *param_3)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  float fVar12;
  float fVar13;
  float fVar14;
  float fVar15;
  
  fVar1 = param_3[1];
  fVar2 = *param_2;
  fVar3 = param_3[5];
  fVar4 = param_2[1];
  fVar5 = param_3[0xd];
  fVar6 = param_3[2];
  fVar7 = *param_2;
  fVar8 = param_3[6];
  fVar9 = param_2[1];
  fVar10 = param_3[0xe];
  fVar11 = param_3[3];
  fVar12 = *param_2;
  fVar13 = param_3[7];
  fVar14 = param_2[1];
  fVar15 = param_3[0xf];
  *param_1 = *param_2 * *param_3 + param_3[4] * param_2[1] + param_3[0xc];
  param_1[1] = fVar3 * fVar4 + fVar1 * fVar2 + fVar5;
  param_1[2] = fVar8 * fVar9 + fVar6 * fVar7 + fVar10;
  param_1[3] = fVar13 * fVar14 + fVar11 * fVar12 + fVar15;
  return;
}



/* FUN_0045567f @ 0045567f */

void FUN_0045567f(float *param_1,float *param_2,float *param_3)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  int iVar7;
  
  fVar1 = *param_2;
  fVar2 = param_3[1];
  fVar3 = param_2[1];
  fVar4 = param_3[5];
  fVar5 = param_3[0xd];
  fVar6 = param_3[0xf] + param_2[1] * param_3[7] + *param_2 * param_3[3];
  *param_1 = param_3[0xc] + param_2[1] * param_3[4] + *param_2 * *param_3;
  param_1[1] = fVar5 + fVar3 * fVar4 + fVar1 * fVar2;
  iVar7 = float_near_equal(fVar6,1.0);
  if (iVar7 == 0) {
    fVar6 = 1.0 / fVar6;
    *param_1 = fVar6 * *param_1;
    param_1[1] = fVar6 * param_1[1];
  }
  return;
}



/* FUN_004556ff @ 004556ff */

void FUN_004556ff(float *param_1,float *param_2,float *param_3)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  
  fVar1 = param_3[1];
  fVar2 = *param_2;
  fVar3 = param_3[5];
  fVar4 = param_2[1];
  *param_1 = *param_2 * *param_3 + param_3[4] * param_2[1];
  param_1[1] = fVar3 * fVar4 + fVar1 * fVar2;
  return;
}



/* FUN_0045573b @ 0045573b */

void FUN_0045573b(float *param_1,float *param_2)

{
  float *pfVar1;
  float fVar2;
  int iVar3;
  float local_10;
  float local_c;
  float local_8;
  
  fVar2 = param_2[2] * param_2[2] + param_2[1] * param_2[1] + *param_2 * *param_2;
  iVar3 = float_near_equal(fVar2,1.0);
  if (iVar3 == 0) {
    if (fVar2 <= 1.1754944e-38) {
      *param_1 = 0.0;
      param_1[1] = 0.0;
      param_1[2] = 0.0;
      return;
    }
    fVar2 = 1.0 / SQRT(fVar2);
    local_10 = fVar2 * *param_2;
    local_c = fVar2 * param_2[1];
    pfVar1 = param_2 + 2;
    param_2 = &local_10;
    local_8 = fVar2 * *pfVar1;
  }
  else if (param_1 == param_2) {
    return;
  }
  *param_1 = *param_2;
  param_1[1] = param_2[1];
  param_1[2] = param_2[2];
  return;
}



/* FUN_004557db @ 004557db */

void FUN_004557db(float *param_1,float *param_2,float *param_3)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  float fVar12;
  float fVar13;
  float fVar14;
  float fVar15;
  int iVar16;
  
  fVar1 = *param_2;
  fVar2 = param_3[2];
  fVar3 = *param_2;
  fVar4 = param_3[1];
  fVar5 = param_2[1];
  fVar6 = param_3[6];
  fVar7 = param_2[1];
  fVar8 = param_3[5];
  fVar9 = param_2[2];
  fVar10 = param_3[10];
  fVar11 = param_2[2];
  fVar12 = param_3[9];
  fVar13 = param_3[0xd];
  fVar14 = param_3[0xe];
  fVar15 = param_3[0xf] +
           param_2[2] * param_3[0xb] + param_2[1] * param_3[7] + *param_2 * param_3[3];
  *param_1 = param_3[0xc] + param_2[2] * param_3[8] + param_2[1] * param_3[4] + *param_2 * *param_3;
  param_1[1] = fVar13 + fVar11 * fVar12 + fVar7 * fVar8 + fVar3 * fVar4;
  param_1[2] = fVar14 + fVar9 * fVar10 + fVar5 * fVar6 + fVar1 * fVar2;
  iVar16 = float_near_equal(fVar15,1.0);
  if (iVar16 == 0) {
    fVar15 = 1.0 / fVar15;
    *param_1 = fVar15 * *param_1;
    param_1[1] = fVar15 * param_1[1];
    param_1[2] = fVar15 * param_1[2];
  }
  return;
}



/* FUN_0045589a @ 0045589a */

float * FUN_0045589a(float *param_1,undefined4 param_2,int *param_3,int param_4,int param_5,
                    int param_6)

{
  float fVar1;
  float fVar2;
  
  switch(((param_6 != 0) << 1 | param_5 != 0) << 1 | param_4 != 0) {
  case '\0':
    break;
  case '\x01':
    break;
  case '\x02':
    break;
  case '\x03':
    goto LAB_0045596b;
  case '\x04':
    break;
  case '\x05':
    goto LAB_0045596b;
  case '\x06':
    goto LAB_0045596b;
  case '\a':
    thunk_FUN_00453a57();
LAB_0045596b:
    thunk_FUN_00453a57();
  }
  thunk_FUN_00453464();
  if (param_3 != (int *)0x0) {
    fVar2 = (float)param_3[2];
    if (param_3[2] < 0) {
      fVar2 = fVar2 + 4.2949673e+09;
    }
    fVar1 = (float)*param_3;
    if (*param_3 < 0) {
      fVar1 = fVar1 + 4.2949673e+09;
    }
    *param_1 = fVar1 + fVar2 * (*param_1 + 1.0) * 0.5;
    fVar2 = (float)param_3[3];
    if (param_3[3] < 0) {
      fVar2 = fVar2 + 4.2949673e+09;
    }
    fVar1 = (float)param_3[1];
    if (param_3[1] < 0) {
      fVar1 = fVar1 + 4.2949673e+09;
    }
    param_1[1] = fVar1 + fVar2 * (1.0 - param_1[1]) * 0.5;
    param_1[2] = ((float)param_3[5] - (float)param_3[4]) * param_1[2] + (float)param_3[4];
  }
  return param_1;
}



/* FUN_00455a27 @ 00455a27 */

float * FUN_00455a27(float *param_1,float *param_2,int *param_3,int param_4,int param_5,int param_6)

{
  float fVar1;
  float fVar2;
  
  switch(((param_6 != 0) << 1 | param_5 != 0) << 1 | param_4 != 0) {
  case '\0':
    goto switchD_00455a64_default;
  case '\x01':
    goto LAB_00455b02;
  case '\x02':
    goto LAB_00455b02;
  case '\x03':
    break;
  case '\x04':
    goto LAB_00455b02;
  case '\x05':
    break;
  case '\x06':
    break;
  case '\a':
    thunk_FUN_00453a57();
    break;
  default:
    goto switchD_00455a64_default;
  }
  thunk_FUN_00453a57();
LAB_00455b02:
  thunk_FUN_00453f63();
switchD_00455a64_default:
  if (param_3 != (int *)0x0) {
    fVar1 = (float)*param_3;
    if (*param_3 < 0) {
      fVar1 = fVar1 + 4.2949673e+09;
    }
    fVar2 = (float)param_3[2];
    if (param_3[2] < 0) {
      fVar2 = fVar2 + 4.2949673e+09;
    }
    fVar2 = (*param_2 - fVar1) / fVar2;
    *param_1 = (fVar2 + fVar2) - 1.0;
    fVar1 = (float)param_3[1];
    if (param_3[1] < 0) {
      fVar1 = fVar1 + 4.2949673e+09;
    }
    fVar2 = (float)param_3[3];
    if (param_3[3] < 0) {
      fVar2 = fVar2 + 4.2949673e+09;
    }
    fVar2 = (param_2[1] - fVar1) / fVar2;
    param_1[1] = -((fVar2 + fVar2) - 1.0);
    param_1[2] = (param_2[2] - (float)param_3[4]) / ((float)param_3[5] - (float)param_3[4]);
  }
  thunk_FUN_00453464();
  return param_1;
}



/* FUN_00455bcd @ 00455bcd */

void FUN_00455bcd(float *param_1,float *param_2)

{
  float *pfVar1;
  float fVar2;
  int iVar3;
  float local_14;
  float local_10;
  float local_c;
  float local_8;
  
  fVar2 = param_2[3] * param_2[3] +
          param_2[2] * param_2[2] + param_2[1] * param_2[1] + *param_2 * *param_2;
  iVar3 = float_near_equal(fVar2,1.0);
  if (iVar3 == 0) {
    if (fVar2 <= 1.1754944e-38) {
      *param_1 = 0.0;
      param_1[1] = 0.0;
      param_1[2] = 0.0;
      param_1[3] = 0.0;
      return;
    }
    fVar2 = 1.0 / SQRT(fVar2);
    local_14 = fVar2 * *param_2;
    local_10 = fVar2 * param_2[1];
    local_c = fVar2 * param_2[2];
    pfVar1 = param_2 + 3;
    param_2 = &local_14;
    local_8 = fVar2 * *pfVar1;
  }
  else if (param_1 == param_2) {
    return;
  }
  *param_1 = *param_2;
  param_1[1] = param_2[1];
  param_1[2] = param_2[2];
  param_1[3] = param_2[3];
  return;
}



/* FUN_00455c86 @ 00455c86 */

undefined4 FUN_00455c86(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  undefined1 local_14 [16];
  
  thunk_FUN_00454bc0(local_14,param_2,param_3,param_4);
  thunk_FUN_004546fe();
  return param_1;
}



/* FUN_00455cbf @ 00455cbf */

undefined4 *
FUN_00455cbf(undefined4 *param_1,float *param_2,int param_3,undefined4 *param_4,float *param_5,
            int param_6,float *param_7)

{
  undefined4 uVar1;
  
  if (param_4 == (undefined4 *)0x0) {
    param_1[0xe] = 0;
    param_1[0xd] = 0;
    param_1[0xc] = 0;
    param_1[0xb] = 0;
    param_1[9] = 0;
    param_1[8] = 0;
    param_1[7] = 0;
    param_1[6] = 0;
    param_1[4] = 0;
    param_1[3] = 0;
    param_1[2] = 0;
    param_1[1] = 0;
    param_1[0xf] = 0x3f800000;
    param_1[10] = 0x3f800000;
    param_1[5] = 0x3f800000;
    *param_1 = 0x3f800000;
  }
  else if (param_3 == 0) {
    param_1[0xe] = 0;
    param_1[0xd] = 0;
    param_1[0xc] = 0;
    param_1[0xb] = 0;
    param_1[9] = 0;
    param_1[8] = 0;
    param_1[7] = 0;
    param_1[6] = 0;
    param_1[4] = 0;
    param_1[3] = 0;
    param_1[2] = 0;
    param_1[1] = 0;
    *param_1 = *param_4;
    param_1[5] = param_4[1];
    uVar1 = param_4[2];
    param_1[0xf] = 0x3f800000;
    param_1[10] = uVar1;
  }
  else {
    thunk_FUN_004546fe();
    if (param_2 == (float *)0x0) {
      thunk_FUN_00453ca0();
      thunk_FUN_00453a57();
      thunk_FUN_00453a57();
    }
    else {
      thunk_FUN_00453ca0();
      param_1[0xe] = 0;
      param_1[0xd] = 0;
      param_1[0xc] = 0;
      param_1[0xb] = 0;
      param_1[9] = 0;
      param_1[8] = 0;
      param_1[7] = 0;
      param_1[6] = 0;
      param_1[4] = 0;
      param_1[3] = 0;
      param_1[2] = 0;
      param_1[1] = 0;
      param_1[0xf] = 0x3f800000;
      param_1[10] = 0x3f800000;
      param_1[5] = 0x3f800000;
      *param_1 = 0x3f800000;
      param_1[0xc] = -*param_2;
      param_1[0xd] = -param_2[1];
      param_1[0xe] = -param_2[2];
      thunk_FUN_00453a57();
      thunk_FUN_00453a57();
      thunk_FUN_00453a57();
      param_1[0xc] = (float)param_1[0xc] + *param_2;
      param_1[0xd] = param_2[1] + (float)param_1[0xd];
      param_1[0xe] = (float)param_1[0xe] + param_2[2];
    }
  }
  if (param_6 != 0) {
    thunk_FUN_004546fe();
    if (param_5 == (float *)0x0) {
      thunk_FUN_00453a57();
    }
    else {
      param_1[0xc] = (float)param_1[0xc] - *param_5;
      param_1[0xd] = (float)param_1[0xd] - param_5[1];
      param_1[0xe] = (float)param_1[0xe] - param_5[2];
      thunk_FUN_00453a57();
      param_1[0xc] = (float)param_1[0xc] + *param_5;
      param_1[0xd] = (float)param_1[0xd] + param_5[1];
      param_1[0xe] = (float)param_1[0xe] + param_5[2];
    }
  }
  if (param_7 != (float *)0x0) {
    param_1[0xc] = (float)param_1[0xc] + *param_7;
    param_1[0xd] = param_7[1] + (float)param_1[0xd];
    param_1[0xe] = param_7[2] + (float)param_1[0xe];
  }
  return param_1;
}



/* FUN_00455f73 @ 00455f73 */

void FUN_00455f73(float *param_1,float *param_2)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float local_14;
  float local_10;
  float local_c;
  float local_8;
  
  thunk_FUN_00455281();
  fVar1 = local_c * param_2[2] + local_8 * param_2[3] + local_14 * *param_2 + local_10 * param_2[1];
  fVar4 = -local_14;
  fVar3 = -local_10;
  fVar2 = -local_c;
  fVar5 = -local_8;
  *param_1 = fVar4 * *param_2 + fVar1;
  param_1[4] = fVar3 * *param_2;
  param_1[8] = fVar2 * *param_2;
  param_1[0xc] = fVar5 * *param_2;
  param_1[1] = fVar4 * param_2[1];
  param_1[5] = fVar3 * param_2[1] + fVar1;
  param_1[9] = fVar2 * param_2[1];
  param_1[0xd] = fVar5 * param_2[1];
  param_1[2] = fVar4 * param_2[2];
  param_1[6] = fVar3 * param_2[2];
  param_1[10] = fVar2 * param_2[2] + fVar1;
  param_1[0xe] = fVar5 * param_2[2];
  param_1[3] = fVar4 * param_2[3];
  param_1[7] = fVar3 * param_2[3];
  param_1[0xb] = fVar2 * param_2[3];
  param_1[0xf] = fVar5 * param_2[3] + fVar1;
  return;
}



/* FUN_0045604d @ 0045604d */

void FUN_0045604d(float *param_1)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float local_14;
  float local_10;
  float local_c;
  float local_8;
  
  thunk_FUN_00455281();
  fVar1 = local_14 * -2.0;
  fVar3 = local_10 * -2.0;
  fVar2 = local_c * -2.0;
  *param_1 = local_14 * fVar1 + 1.0;
  param_1[1] = fVar3 * local_14;
  param_1[2] = fVar2 * local_14;
  param_1[3] = 0.0;
  param_1[4] = local_10 * fVar1;
  param_1[5] = local_10 * fVar3 + 1.0;
  param_1[6] = fVar2 * local_10;
  param_1[7] = 0.0;
  param_1[8] = local_c * fVar1;
  param_1[9] = local_c * fVar3;
  param_1[10] = local_c * fVar2 + 1.0;
  param_1[0xb] = 0.0;
  param_1[0xc] = local_8 * fVar1;
  param_1[0xd] = local_8 * fVar3;
  param_1[0xe] = local_8 * fVar2;
  param_1[0xf] = 1.0;
  return;
}



/* FUN_004564e6 @ 004564e6 */

undefined4 __cdecl FUN_004564e6(DWORD param_1,LPCSTR param_2,LPBYTE param_3)

{
  LONG LVar1;
  DWORD local_c;
  HKEY local_8;
  
  local_8 = (HKEY)0x0;
  LVar1 = RegOpenKeyA((HKEY)0x80000002,"Software\\Microsoft\\Direct3D",&local_8);
  if (LVar1 == 0) {
    LVar1 = RegQueryValueExA(local_8,param_2,(LPDWORD)0x0,&local_c,param_3,(LPDWORD)&stack0x00000010
                            );
    RegCloseKey(local_8);
    if ((LVar1 == 0) && (local_c == param_1)) {
      return 1;
    }
  }
  return 0;
}



/* FUN_00456542 @ 00456542 */

/* WARNING: Removing unreachable block (ram,0x00456561) */
/* WARNING: Removing unreachable block (ram,0x00456553) */
/* WARNING: Restarted to delay deadcode elimination for space: stack */

undefined8 __fastcall FUN_00456542(undefined4 param_1,undefined4 param_2)

{
  uint *puVar1;
  int iVar2;
  undefined4 local_8;
  
  local_8 = 0;
  puVar1 = (uint *)cpuid(0x80000000);
  if (0x80000000 < *puVar1) {
    iVar2 = cpuid(0x80000001);
    local_8 = (uint)((*(uint *)(iVar2 + 8) & 0x80000000) != 0);
  }
  return CONCAT44(param_2,local_8);
}



/* FUN_0045657a @ 0045657a */

/* WARNING: Removing unreachable block (ram,0x004565a4) */

void FUN_0045657a(void)

{
  undefined4 *puVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  int unaff_EBP;
  
  FUN_004636c8();
  *(undefined1 **)(unaff_EBP + -0x10) = &stack0xffffffc4;
  *(undefined4 *)(unaff_EBP + -0x14) = 0;
  builtin_strncpy((char *)(unaff_EBP + -0x24),"Genu",4);
  builtin_strncpy((char *)(unaff_EBP + -0x20),"ineI",4);
  builtin_strncpy((char *)(unaff_EBP + -0x1c),"ntel",4);
  *(char *)(unaff_EBP + -0x18) = '\0';
  *(undefined4 *)(unaff_EBP + -4) = 0;
  puVar1 = (undefined4 *)cpuid_basic_info(0);
  uVar4 = puVar1[1];
  uVar3 = puVar1[2];
  uVar2 = puVar1[3];
  *(undefined4 *)(unaff_EBP + -0x2c) = *puVar1;
  *(undefined4 *)(unaff_EBP + -0x38) = uVar4;
  *(undefined4 *)(unaff_EBP + -0x34) = uVar3;
  *(undefined4 *)(unaff_EBP + -0x30) = uVar2;
  FUN_004565c0();
  return;
}



/* Catch@004565b4 @ 004565b4 */

undefined * Catch_004565b4(void)

{
  int unaff_EBP;
  
  *(undefined4 *)(unaff_EBP + -0x3c) = *(undefined4 *)(unaff_EBP + -0x14);
  return &DAT_004565c6;
}



/* FUN_004565c0 @ 004565c0 */

/* WARNING: Removing unreachable block (ram,0x004565db) */

undefined4 FUN_004565c0(void)

{
  undefined4 *puVar1;
  undefined4 uVar2;
  int unaff_EBP;
  
  *(undefined4 *)(unaff_EBP + -4) = 0xffffffff;
  if (*(int *)(unaff_EBP + -0x2c) == 0) {
    uVar2 = *(undefined4 *)(unaff_EBP + -0x14);
  }
  else {
    puVar1 = (undefined4 *)cpuid_Version_info(1);
    uVar2 = puVar1[2];
    *(undefined4 *)(unaff_EBP + -0x2c) = *puVar1;
    *(undefined4 *)(unaff_EBP + -0x28) = uVar2;
    if ((*(uint *)(unaff_EBP + -0x28) & 0x2000000) != 0) {
      *(uint *)(unaff_EBP + -0x14) = *(uint *)(unaff_EBP + -0x14) | 4;
    }
    if ((*(uint *)(unaff_EBP + -0x28) & 0x4000000) != 0) {
      *(uint *)(unaff_EBP + -0x14) = *(uint *)(unaff_EBP + -0x14) | 8;
    }
    uVar2 = *(undefined4 *)(unaff_EBP + -0x14);
  }
  ExceptionList = *(void **)(unaff_EBP + -0xc);
  return uVar2;
}



/* FUN_0045661f @ 0045661f */

uint __cdecl FUN_0045661f(DWORD param_1)

{
  WINBOOL WVar1;
  uint uVar2;
  int iVar3;
  undefined4 extraout_ECX;
  undefined4 extraout_EDX;
  _OSVERSIONINFOA *p_Var4;
  undefined8 uVar5;
  _OSVERSIONINFOA local_9c;
  char local_5;
  
  p_Var4 = &local_9c;
  for (iVar3 = 0x25; iVar3 != 0; iVar3 = iVar3 + -1) {
    p_Var4->dwOSVersionInfoSize = 0;
    p_Var4 = (_OSVERSIONINFOA *)&p_Var4->dwMajorVersion;
  }
  local_5 = '\0';
  local_9c.dwOSVersionInfoSize = 0x94;
  WVar1 = GetVersionExA(&local_9c);
  if (WVar1 == 0) {
    local_5 = '\x01';
  }
  if (local_9c.dwPlatformId == 1) {
    if ((local_9c.dwMajorVersion < 5) &&
       (((local_9c.dwMajorVersion != 4 || (local_9c.dwMinorVersion < 10)) ||
        ((ushort)local_9c.dwBuildNumber < 0x55d)))) {
      local_5 = '\x01';
    }
  }
  else {
    if (local_9c.dwPlatformId != 2) {
      return 0;
    }
    if (WVar1 != 0) {
      if (param_1 != 10) {
        uVar2 = IsProcessorFeaturePresent(param_1);
        return uVar2;
      }
      goto LAB_004566c4;
    }
  }
  if (param_1 == 6) {
    if (local_5 == '\0') {
      uVar2 = FUN_0045657a();
      return uVar2 & 4;
    }
  }
  else {
    if (param_1 == 7) {
      uVar5 = FUN_00456542(extraout_ECX,extraout_EDX);
      return (uint)uVar5;
    }
    if ((param_1 == 10) && (local_5 == '\0')) {
LAB_004566c4:
      uVar2 = FUN_0045657a();
      return uVar2 & 8;
    }
  }
  return 0;
}



/* renderer_select_backend @ 004566d3 */

/* selects renderer table based on config */

int renderer_select_backend(int reset)

{
  uint uVar1;
  int iVar2;
  undefined **ppuVar3;
  undefined **ppuVar4;
  
  if (reset == 0) {
    DAT_00479770 = 0xffff;
    ppuVar3 = &PTR_FUN_00479688;
    ppuVar4 = &PTR_LAB_004795a0;
    for (iVar2 = 0x39; iVar2 != 0; iVar2 = iVar2 + -1) {
      *ppuVar4 = *ppuVar3;
      ppuVar3 = ppuVar3 + 1;
      ppuVar4 = ppuVar4 + 1;
    }
  }
  else if (DAT_00479770 == 0xffff) {
    DAT_00479770 = 0;
    ppuVar3 = &PTR_FUN_00479688;
    ppuVar4 = &PTR_LAB_004795a0;
    for (iVar2 = 0x39; iVar2 != 0; iVar2 = iVar2 + -1) {
      *ppuVar4 = *ppuVar3;
      ppuVar3 = ppuVar3 + 1;
      ppuVar4 = ppuVar4 + 1;
    }
    FUN_00457127(&PTR_LAB_004795a0);
    iVar2 = FUN_004564e6(4,"DisableD3DXPSGP",(LPBYTE)&reset);
    if (iVar2 == 0) {
      reset = 0;
    }
    if (reset != 1) {
      uVar1 = FUN_0045661f(7);
      if (uVar1 == 0) {
        uVar1 = FUN_0045661f(10);
        if (uVar1 == 0) {
          uVar1 = FUN_0045661f(6);
          if (uVar1 != 0) {
            FUN_004567b0(&PTR_LAB_004795a0);
            DAT_00479770 = 3;
          }
        }
        else {
          FUN_004568c0(&PTR_LAB_004795a0);
          DAT_00479770 = 2;
        }
      }
      else {
        FUN_00456aa5(&PTR_LAB_004795a0);
        DAT_00479770 = 1;
      }
    }
  }
  return DAT_00479770;
}



/* FUN_004567b0 @ 004567b0 */

void __cdecl FUN_004567b0(undefined4 *param_1)

{
  param_1[0x1c] = &LAB_00457e90;
  *param_1 = FUN_00457170;
  param_1[0xd] = &LAB_00457c10;
  param_1[0x1b] = &LAB_00457d00;
  param_1[0xb] = &LAB_00458e20;
  param_1[0x30] = &LAB_00457af0;
  param_1[0x2f] = &LAB_00457710;
  param_1[0x11] = &LAB_004579b0;
  param_1[0x36] = &LAB_00457aa0;
  param_1[0x35] = &LAB_004577a0;
  param_1[0x34] = &LAB_00457910;
  param_1[0x33] = &LAB_00457a40;
  param_1[0x32] = &LAB_00457650;
  param_1[0x31] = &LAB_00457850;
  param_1[0x12] = &LAB_00458840;
  param_1[0x16] = &LAB_00457b50;
  param_1[0x19] = &LAB_00458230;
  param_1[0x18] = &LAB_00458110;
  param_1[0x13] = &LAB_00457f70;
  param_1[0x2c] = &LAB_004580a0;
  param_1[0x14] = &LAB_00458000;
  param_1[0x10] = &LAB_00457500;
  param_1[0x15] = &LAB_00457420;
  param_1[8] = &LAB_004575b0;
  param_1[7] = &LAB_00457350;
  param_1[10] = &LAB_00457250;
  param_1[9] = FUN_004571b0;
  param_1[6] = &LAB_00458300;
  param_1[5] = &LAB_00457210;
  param_1[4] = &LAB_00458b00;
  param_1[3] = &LAB_00458540;
  param_1[2] = &LAB_00458480;
  param_1[1] = &LAB_004583c0;
  return;
}



/* FUN_004568c0 @ 004568c0 */

void __cdecl FUN_004568c0(undefined4 *param_1)

{
  param_1[0x1c] = &LAB_00459170;
  *param_1 = FUN_00457170;
  param_1[0xd] = &LAB_00458ef0;
  param_1[0x1b] = &LAB_00458fe0;
  param_1[0xb] = &LAB_00458e20;
  param_1[0x30] = &LAB_00457af0;
  param_1[0x2f] = &LAB_00457710;
  param_1[0x11] = &LAB_004579b0;
  param_1[0x36] = &LAB_00457aa0;
  param_1[0x35] = &LAB_004577a0;
  param_1[0x34] = &LAB_00457910;
  param_1[0x33] = &LAB_00457a40;
  param_1[0x32] = &LAB_00457650;
  param_1[0x31] = &LAB_00457850;
  param_1[0x12] = &LAB_00458840;
  param_1[0x16] = &LAB_00457b50;
  param_1[0x19] = &LAB_00459370;
  param_1[0x18] = &LAB_00459250;
  param_1[0x1f] = &LAB_00458d90;
  param_1[0x1e] = &LAB_00458d10;
  param_1[0x13] = &LAB_00457f70;
  param_1[0x14] = &LAB_00458000;
  param_1[0x10] = &LAB_00458c60;
  param_1[0x15] = &LAB_00458760;
  param_1[8] = &LAB_004575b0;
  param_1[7] = &LAB_00458690;
  param_1[10] = &LAB_00457250;
  param_1[9] = FUN_004571b0;
  param_1[6] = &LAB_00458300;
  param_1[5] = &LAB_00457210;
  param_1[4] = &LAB_00458b00;
  param_1[3] = &LAB_00458540;
  param_1[2] = &LAB_00458480;
  param_1[1] = &LAB_004583c0;
  return;
}



/* FUN_004569d0 @ 004569d0 */

/* WARNING: Removing unreachable block (ram,0x00456a4d) */
/* WARNING: Removing unreachable block (ram,0x00456a3b) */
/* WARNING: Removing unreachable block (ram,0x00456a20) */
/* WARNING: Removing unreachable block (ram,0x00456a04) */
/* WARNING: Removing unreachable block (ram,0x004569f9) */

undefined8 FUN_004569d0(void)

{
  undefined4 *puVar1;
  uint *puVar2;
  uint uVar3;
  int iVar4;
  char *pcVar5;
  int *piVar6;
  bool bVar7;
  char local_2c [16];
  int local_1c;
  uint local_18;
  int local_14;
  char cStack_10;
  undefined4 local_c;
  uint local_8;
  
  cStack_10 = '\0';
  builtin_strncpy(local_2c,"AuthenticAMD",0xd);
  cpuid_basic_info(0);
  local_8 = 1;
  piVar6 = (int *)cpuid_basic_info(0);
  local_18 = piVar6[2];
  local_1c = piVar6[1];
  local_14 = piVar6[3];
  if (*piVar6 != 0) {
    puVar1 = (undefined4 *)cpuid_Version_info(1);
    local_c = *puVar1;
    uVar3 = -(uint)((puVar1[2] & 0x800000) != 0) & 0x20;
    local_8 = uVar3 | 3;
    puVar2 = (uint *)cpuid(0x80000000);
    local_18 = puVar2[2];
    if (0x80000000 < *puVar2) {
      iVar4 = cpuid(0x80000001);
      local_18 = *(uint *)(iVar4 + 8);
      local_8 = uVar3 | 7 | -(uint)((local_18 & 0x80000000) != 0) & 0x80;
      bVar7 = local_8 == 0;
      iVar4 = 0xc;
      pcVar5 = local_2c;
      piVar6 = &local_1c;
      do {
        if (iVar4 == 0) break;
        iVar4 = iVar4 + -1;
        bVar7 = *pcVar5 == (char)*piVar6;
        pcVar5 = pcVar5 + 1;
        piVar6 = (int *)((int)piVar6 + 1);
      } while (bVar7);
      if (bVar7) {
        local_8 = local_8 | -(uint)((local_18 & 0x40000000) != 0) & 0x100 |
                  -(uint)((local_18 & 0x400000) != 0) & 0x200;
      }
    }
  }
  return CONCAT44(local_18,local_8);
}



/* FUN_00456aa5 @ 00456aa5 */

void __cdecl FUN_00456aa5(undefined4 *param_1)

{
  ulonglong uVar1;
  
  uVar1 = FUN_004569d0();
  if (((uVar1 & 0x20) != 0) && ((char)uVar1 < '\0')) {
    *param_1 = &LAB_0045f218;
    param_1[1] = &LAB_0045e75a;
    param_1[2] = &LAB_0045f4d9;
    param_1[3] = &LAB_0045a9aa;
    param_1[5] = &LAB_0045f26d;
    param_1[6] = &LAB_0045e7cb;
    param_1[7] = FUN_0045e832;
    param_1[8] = &LAB_0045f55b;
    param_1[9] = &LAB_0045f2a6;
    param_1[10] = &LAB_0045ed12;
    param_1[0xb] = &LAB_0045abdc;
    param_1[0xc] = &LAB_0045f903;
    param_1[0xd] = &LAB_0045f946;
    param_1[0xe] = FUN_0045ed17;
    param_1[0xf] = FUN_0045ee9f;
    param_1[0x10] = &LAB_0045f5ba;
    param_1[0x11] = &LAB_0045f30a;
    param_1[0x12] = &LAB_0045e73e;
    param_1[0x13] = &LAB_00459440;
    param_1[0x14] = &LAB_004594d9;
    param_1[0x15] = FUN_0045fae8;
    param_1[0x16] = &LAB_0045fa2a;
    param_1[0x17] = FUN_00459536;
    param_1[0x18] = &LAB_004595e9;
    param_1[0x19] = &LAB_00459a1a;
    param_1[0x1a] = &LAB_0045acab;
    param_1[0x1b] = &LAB_0045acfb;
    param_1[0x1c] = &LAB_0045ade6;
    param_1[0x1d] = FUN_00459adf;
    param_1[0x1e] = &LAB_0045aec2;
    param_1[0x1f] = &LAB_0045af25;
    param_1[0x20] = &LAB_0045af83;
    param_1[0x21] = &LAB_0045afdc;
    param_1[0x22] = &LAB_0045fb4c;
    param_1[0x23] = FUN_00459b4b;
    param_1[0x24] = FUN_00459c82;
    param_1[0x25] = &LAB_0045b023;
    param_1[0x26] = &LAB_0045b0cb;
    param_1[0x27] = FUN_0045b252;
    param_1[0x28] = FUN_0045c3ea;
    param_1[0x29] = &LAB_0045c58f;
    param_1[0x2a] = FUN_0045cac3;
    param_1[0x2b] = FUN_00459d0f;
    param_1[0x2c] = &LAB_00459da1;
    param_1[0x36] = &LAB_0045f6ec;
    param_1[0x33] = &LAB_0045e891;
    param_1[0x30] = &LAB_0045f3a2;
    param_1[0x2e] = &LAB_0045f3eb;
    param_1[0x34] = &LAB_0045f75d;
    param_1[0x31] = &LAB_0045e902;
    param_1[0x37] = FUN_00459e05;
    param_1[0x38] = &LAB_00459eac;
    param_1[0x35] = &LAB_0045f825;
    param_1[0x2f] = &LAB_0045f42e;
    param_1[0x32] = &LAB_0045e9d6;
    param_1[4] = &LAB_0045e012;
    param_1[0x2d] = FUN_00459f51;
    if (((uVar1 & 0x100) != 0) && ((uVar1 & 0x200) != 0)) {
      param_1[0xf] = FUN_0045f0c5;
      param_1[0x12] = FUN_0045dd30;
      param_1[0x26] = &LAB_0045b19d;
      param_1[0x27] = FUN_0045cbdc;
      param_1[0x18] = &LAB_00459805;
    }
  }
  return;
}



/* FUN_00456eec @ 00456eec */

float * FUN_00456eec(float *param_1,float *param_2)

{
  float fVar1;
  float fVar2;
  float fVar3;
  uint uVar4;
  float10 fVar5;
  
  fVar5 = (float10)*param_2 * (float10)*param_2 + (float10)param_2[1] * (float10)param_2[1] +
          (float10)param_2[2] * (float10)param_2[2];
  fVar1 = (float)fVar5;
  if (fVar1 == 0.0) {
    ffree(fVar5);
    *param_1 = 0.0;
    param_1[1] = 0.0;
    param_1[2] = 0.0;
  }
  else if ((uint)ABS((float)(fVar5 - (float10)1)) < 0x3727c5ad) {
    if (param_1 != param_2) {
      *param_1 = *param_2;
      param_1[1] = param_2[1];
      param_1[2] = param_2[2];
    }
  }
  else {
    uVar4 = (uint)fVar1 >> 0xc & 0xff8;
    fVar3 = ((float)((uint)fVar1 & 0xffffff | 0x3f000000) * *(float *)(&DAT_00479780 + uVar4) +
            *(float *)(&DAT_00479784 + uVar4)) * (float)(0xbeffffffU - (int)fVar1 >> 1 & 0xff800000)
    ;
    fVar1 = param_2[1];
    fVar2 = param_2[2];
    *param_1 = *param_2 * fVar3;
    param_1[1] = fVar1 * fVar3;
    param_1[2] = fVar2 * fVar3;
  }
  return param_1;
}



/* FUN_00456fb6 @ 00456fb6 */

void FUN_00456fb6(float *param_1,float *param_2,float *param_3)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  int iVar5;
  int iVar6;
  float *pfVar7;
  float local_44 [16];
  
  if (param_3 == param_1) {
    if (param_2 != param_1) {
      iVar6 = -4;
      do {
        iVar5 = -0x10;
        fVar1 = param_3[iVar6 + 4];
        fVar2 = param_3[iVar6 + 8];
        fVar3 = param_3[iVar6 + 0xc];
        fVar4 = param_3[iVar6 + 0x10];
        do {
          param_1[iVar5 + 0x10] =
               (float)((float10)fVar4 * (float10)param_2[iVar5 + 0x13] +
                       (float10)fVar2 * (float10)param_2[iVar5 + 0x11] +
                      (float10)fVar1 * (float10)param_2[iVar5 + 0x10] +
                      (float10)fVar3 * (float10)param_2[iVar5 + 0x12]);
          iVar5 = iVar5 + 4;
        } while (iVar5 != 0);
        ffree((float10)fVar1);
        ffree((float10)fVar2);
        ffree((float10)fVar3);
        ffree((float10)fVar4);
        param_1 = param_1 + 1;
        iVar6 = iVar6 + 1;
      } while (iVar6 != 0);
      return;
    }
    pfVar7 = local_44;
    for (iVar6 = 0x10; iVar6 != 0; iVar6 = iVar6 + -1) {
      *pfVar7 = *param_3;
      param_3 = param_3 + 1;
      pfVar7 = pfVar7 + 1;
    }
    param_3 = local_44;
  }
  iVar6 = -4;
  do {
    iVar5 = -4;
    fVar1 = *param_2;
    fVar2 = param_2[1];
    fVar3 = param_2[2];
    fVar4 = param_2[3];
    do {
      param_1[iVar5 + 4] =
           (float)((float10)fVar4 * (float10)param_3[iVar5 + 0x10] +
                   (float10)fVar2 * (float10)param_3[iVar5 + 8] +
                  (float10)fVar1 * (float10)param_3[iVar5 + 4] +
                  (float10)fVar3 * (float10)param_3[iVar5 + 0xc]);
      iVar5 = iVar5 + 1;
    } while (iVar5 != 0);
    ffree((float10)fVar1);
    ffree((float10)fVar2);
    ffree((float10)fVar3);
    ffree((float10)fVar4);
    param_2 = param_2 + 4;
    param_1 = param_1 + 4;
    iVar6 = iVar6 + 1;
  } while (iVar6 != 0);
  return;
}



/* FUN_00457099 @ 00457099 */

void FUN_00457099(float *param_1,float *param_2,float *param_3)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float *pfVar5;
  float *pfVar6;
  int iVar7;
  int iVar8;
  float local_48 [17];
  
  if ((param_1 == param_2) || (pfVar5 = param_1, param_1 == param_3)) {
    pfVar5 = local_48;
  }
  iVar8 = -4;
  do {
    iVar7 = -4;
    pfVar6 = pfVar5 + iVar8 + 4;
    fVar1 = *param_2;
    fVar2 = param_2[1];
    fVar3 = param_2[2];
    fVar4 = param_2[3];
    do {
      *pfVar6 = (float)((float10)fVar4 * (float10)param_3[iVar7 + 0x10] +
                        (float10)fVar2 * (float10)param_3[iVar7 + 8] +
                       (float10)fVar1 * (float10)param_3[iVar7 + 4] +
                       (float10)fVar3 * (float10)param_3[iVar7 + 0xc]);
      pfVar6 = pfVar6 + 4;
      iVar7 = iVar7 + 1;
    } while (iVar7 != 0);
    ffree((float10)fVar1);
    ffree((float10)fVar2);
    ffree((float10)fVar3);
    ffree((float10)fVar4);
    param_2 = param_2 + 4;
    iVar8 = iVar8 + 1;
  } while (iVar8 != 0);
  if (pfVar5 != param_1) {
    for (iVar8 = 0x10; iVar8 != 0; iVar8 = iVar8 + -1) {
      *param_1 = *pfVar5;
      pfVar5 = pfVar5 + 1;
      param_1 = param_1 + 1;
    }
  }
  return;
}



/* FUN_00457127 @ 00457127 */

void __cdecl FUN_00457127(undefined4 *param_1)

{
  *param_1 = &LAB_00456ccb;
  param_1[1] = &LAB_00456d69;
  param_1[2] = &LAB_00456e53;
  param_1[3] = FUN_00456fb6;
  param_1[4] = FUN_00457099;
  param_1[5] = &LAB_00456d34;
  param_1[6] = &LAB_00456df4;
  param_1[7] = FUN_00456eec;
  return;
}



/* FUN_00457170 @ 00457170 */

float * FUN_00457170(float *param_1,float *param_2,float *param_3)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  
  fVar3 = param_3[1];
  fVar4 = param_3[2];
  fVar5 = param_3[3];
  fVar1 = *param_2;
  fVar6 = param_3[5];
  fVar7 = param_3[6];
  fVar8 = param_3[7];
  fVar2 = param_2[1];
  fVar9 = param_3[0xd];
  fVar10 = param_3[0xe];
  fVar11 = param_3[0xf];
  *param_1 = fVar1 * *param_3 + param_3[0xc] + fVar2 * param_3[4];
  param_1[1] = fVar1 * fVar3 + fVar9 + fVar2 * fVar6;
  param_1[2] = fVar1 * fVar4 + fVar10 + fVar2 * fVar7;
  param_1[3] = fVar1 * fVar5 + fVar11 + fVar2 * fVar8;
  return param_1;
}



/* FUN_004571b0 @ 004571b0 */

undefined8 * FUN_004571b0(undefined8 *param_1,float *param_2,float *param_3)

{
  float fVar1;
  float fVar2;
  undefined1 in_XMM0 [16];
  undefined1 auVar3 [16];
  float fVar4;
  float fVar5;
  float fVar6;
  
  fVar1 = *param_2;
  fVar2 = param_2[1];
  fVar4 = fVar1 * *param_3 + param_3[0xc] + fVar2 * param_3[4];
  fVar5 = fVar1 * param_3[1] + param_3[0xd] + fVar2 * param_3[5];
  fVar6 = fVar1 * param_3[3] + param_3[0xf] + fVar2 * param_3[7];
  auVar3._4_4_ = fVar5;
  auVar3._0_4_ = fVar4;
  auVar3._8_4_ = fVar1 * param_3[2] + param_3[0xe] + fVar2 * param_3[6];
  auVar3._12_4_ = fVar6;
  auVar3 = rcpps(in_XMM0,auVar3);
  fVar6 = auVar3._12_4_ * auVar3._12_4_ * fVar6;
  *param_1 = CONCAT44(fVar5 * fVar6,fVar4 * fVar6);
  return param_1;
}



/* FUN_00459536 @ 00459536 */

void FUN_00459536(undefined8 *param_1,undefined8 *param_2,undefined4 *param_3)

{
  undefined8 uVar1;
  ulonglong uVar2;
  undefined8 uVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  
  uVar4 = *param_1;
  uVar1 = param_1[1];
  uVar5 = PackedFloatingMUL(uVar4,uVar4);
  uVar3 = PackedFloatingMUL(uVar1,uVar1);
  uVar5 = PackedFloatingADD(uVar5,uVar3);
  uVar5 = PackedFloatingAccumulate(uVar5,uVar5);
  uVar6 = PackedFloatingCompareGE(0x80000000800000,uVar5);
  uVar3 = PackedFloatingReciprocalSQRAprox(uVar3,uVar5);
  if ((int)uVar6 == 0) {
    uVar6 = PackedFloatingMUL(uVar3,uVar3);
    if (param_2 != (undefined8 *)0x0) {
      uVar5 = PackedFloatingReciprocalSQRIter1(uVar6,uVar5);
      uVar3 = PackedFloatingReciprocalIter2(uVar5,uVar3);
      uVar5 = PackedFloatingMUL(uVar4,uVar3);
      uVar4 = PackedFloatingMUL(uVar3,uVar1);
      *param_2 = uVar5;
      *(int *)(param_2 + 1) = (int)uVar4;
    }
    if (param_3 != (undefined4 *)0x0) {
      uVar2 = FUN_004601c0();
      uVar4 = PackedFloatingMUL(uVar2,0x4000000040000000);
      *param_3 = (int)uVar4;
    }
  }
  else {
    if (param_2 != (undefined8 *)0x0) {
      *(undefined8 *)((int)param_2 + 4) = 0;
      *(undefined4 *)param_2 = 0x3f800000;
    }
    if (param_3 != (undefined4 *)0x0) {
      *param_3 = 0;
    }
  }
  FastExitMediaState();
  return;
}



/* FUN_00459adf @ 00459adf */

void FUN_00459adf(undefined8 *param_1,ulonglong *param_2,uint param_3)

{
  ulonglong uVar1;
  undefined8 uVar2;
  undefined8 uVar3;
  undefined4 uVar4;
  undefined8 local_18;
  uint local_10;
  
  FastExitMediaState();
  FUN_0045e832(&local_18,param_2);
  PackedFloatingMUL((ulonglong)param_3,0x3f0000003f000000);
  uVar1 = FUN_004607a0();
  uVar4 = (undefined4)(uVar1 >> 0x20);
  uVar3 = CONCAT44(uVar4,uVar4);
  uVar2 = PackedFloatingMUL(local_18,uVar3);
  uVar3 = PackedFloatingMUL((ulonglong)local_10,uVar3);
  *param_1 = uVar2;
  param_1[1] = CONCAT44((int)uVar1,(int)uVar3);
  FastExitMediaState();
  return;
}



/* FUN_00459b4b @ 00459b4b */

void FUN_00459b4b(undefined8 *param_1,undefined8 *param_2,undefined8 *param_3,uint param_4)

{
  undefined4 uVar1;
  uint uVar2;
  undefined8 uVar4;
  ulonglong uVar5;
  undefined8 uVar6;
  ulonglong uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  ulonglong uVar10;
  ulonglong uVar11;
  ulonglong uVar3;
  
  FastExitMediaState();
  uVar4 = PackedFloatingMUL(*param_2,*param_3);
  uVar6 = PackedFloatingMUL(param_2[1],param_3[1]);
  uVar4 = PackedFloatingADD(uVar4,uVar6);
  uVar3 = PackedFloatingSUB(0x3f800000,(ulonglong)param_4);
  uVar1 = (undefined4)uVar3;
  uVar5 = PackedFloatingAccumulate(uVar4,uVar4);
  uVar10 = PackedFloatingCompareGE(0,uVar5);
  uVar11 = uVar10 & 0x8000000080000000;
  uVar5 = uVar5 ^ uVar11;
  uVar6 = PackedFloatingCompareGE(0x3f7fff583f7fff58,uVar5);
  uVar4 = PackedFloatingMUL(uVar5,uVar5);
  uVar4 = PackedFloatingSUBR(uVar4,0x3f8000003f800000);
  if ((int)uVar6 != 0) {
    uVar8 = PackedFloatingReciprocalSQRAprox((ulonglong)param_4,uVar4);
    uVar6 = PackedFloatingMUL(uVar8,uVar8);
    uVar4 = PackedFloatingReciprocalSQRIter1(uVar4,uVar6);
    uVar7 = PackedFloatingReciprocalIter2(uVar4,uVar8);
    uVar4 = FloatingReciprocalAprox(uVar6,uVar7);
    uVar6 = PackedFloatingReciprocalIter1(uVar7,uVar4);
    PackedFloatingReciprocalIter2(uVar6,uVar4);
    uVar5 = FUN_004600c0();
    PackedFloatingMUL(uVar5,(ulonglong)param_4);
    uVar2 = FUN_004608c0();
    PackedFloatingMUL(uVar5 & 0xffffffff,uVar3 & 0xffffffff);
    uVar4 = FUN_004608c0();
    uVar11 = uVar10 & 0x80000000;
    uVar4 = PackedFloatingMUL(uVar4,uVar7 & 0xffffffff);
    uVar1 = (undefined4)uVar4;
    uVar4 = PackedFloatingMUL((ulonglong)uVar2,uVar7 & 0xffffffff);
    param_4 = (uint)uVar4;
  }
  uVar2 = param_4 ^ (uint)uVar11;
  uVar6 = CONCAT44(uVar2,uVar2);
  uVar4 = PackedFloatingMUL(CONCAT44(uVar1,uVar1),*param_2);
  uVar8 = PackedFloatingMUL(uVar6,*param_3);
  uVar9 = PackedFloatingMUL(CONCAT44(uVar1,uVar1),param_2[1]);
  uVar6 = PackedFloatingMUL(uVar6,param_3[1]);
  uVar4 = PackedFloatingADD(uVar4,uVar8);
  uVar6 = PackedFloatingADD(uVar9,uVar6);
  *param_1 = uVar4;
  param_1[1] = uVar6;
  FastExitMediaState();
  return;
}



/* FUN_00459c82 @ 00459c82 */

undefined8 *
FUN_00459c82(undefined8 *param_1,undefined8 *param_2,undefined8 *param_3,undefined8 *param_4,
            uint param_5,uint param_6)

{
  ulonglong uVar1;
  undefined8 uVar2;
  undefined8 in_MM2;
  undefined8 uVar3;
  undefined8 local_28 [2];
  undefined8 local_18 [2];
  
  FastExitMediaState();
  uVar1 = PackedFloatingADD((ulonglong)param_5,(ulonglong)param_6);
  FUN_00459b4b(local_28,param_2,param_3,(uint)uVar1);
  FUN_00459b4b(local_18,param_2,param_4,(uint)uVar1);
  uVar3 = FloatingReciprocalAprox(in_MM2,uVar1 & 0xffffffff);
  uVar2 = PackedFloatingReciprocalIter1(uVar1 & 0xffffffff,uVar3);
  uVar2 = PackedFloatingReciprocalIter2(uVar2,uVar3);
  uVar2 = PackedFloatingMUL(uVar2,(ulonglong)param_6);
  FUN_00459b4b(param_1,local_28,local_18,(uint)uVar2);
  FastExitMediaState();
  return param_1;
}



/* FUN_00459d0f @ 00459d0f */

void FUN_00459d0f(undefined8 *param_1,undefined8 *param_2,undefined8 *param_3,undefined8 *param_4,
                 undefined8 *param_5,uint param_6)

{
  ulonglong uVar1;
  undefined8 uVar2;
  undefined8 local_20 [2];
  undefined8 local_10 [2];
  
  FUN_00459b4b(local_20,param_2,param_5,param_6);
  FUN_00459b4b(local_10,param_3,param_4,param_6);
  uVar1 = (ulonglong)param_6;
  uVar2 = PackedFloatingMUL(uVar1,uVar1);
  uVar2 = PackedFloatingSUB(uVar1,uVar2);
  uVar2 = PackedFloatingMUL(uVar2,0x4000000040000000);
  FUN_00459b4b(param_1,local_20,local_10,(uint)uVar2);
  FastExitMediaState();
  return;
}



/* FUN_00459e05 @ 00459e05 */

void FUN_00459e05(undefined8 *param_1,undefined8 *param_2)

{
  ulonglong uVar1;
  ulonglong uVar2;
  undefined8 uVar3;
  ulonglong uVar4;
  undefined4 uVar6;
  undefined8 uVar5;
  undefined8 in_MM4;
  undefined8 uVar7;
  
  FastExitMediaState();
  uVar3 = *param_2;
  uVar4 = param_2[1];
  uVar6 = (undefined4)(uVar4 >> 0x20);
  uVar5 = PackedFloatingCompareGE(CONCAT44(uVar6,uVar6),0x3f8000003f800000);
  if ((int)uVar5 == 0) {
    uVar1 = FUN_004601c0();
    uVar2 = FUN_004608c0();
    uVar5 = PackedFloatingCompareGE(uVar2 & 0x7fffffff7fffffff,0x3400000034000000);
    uVar3 = *param_2;
    uVar4 = param_2[1];
    if ((int)uVar5 != 0) {
      uVar7 = FloatingReciprocalAprox(in_MM4,uVar2);
      uVar5 = PackedFloatingReciprocalIter1(uVar2,uVar7);
      uVar5 = PackedFloatingReciprocalIter2(uVar5,uVar7);
      uVar5 = PackedFloatingMUL(CONCAT44((int)uVar1,(int)uVar1),uVar5);
      uVar3 = PackedFloatingMUL(uVar3,uVar5);
      uVar4 = PackedFloatingMUL(uVar4,uVar5);
    }
  }
  *param_1 = uVar3;
  param_1[1] = uVar4 & 0xffffffff;
  FastExitMediaState();
  return;
}



/* FUN_00459f51 @ 00459f51 */

void FUN_00459f51(undefined8 *param_1,undefined8 *param_2,ulonglong *param_3,ulonglong *param_4,
                 ulonglong *param_5,ulonglong *param_6,ulonglong *param_7)

{
  undefined4 unaff_ESI;
  undefined8 uVar1;
  ulonglong uVar2;
  ulonglong uVar3;
  undefined8 uVar4;
  undefined4 uVar5;
  undefined8 uVar6;
  ulonglong uVar7;
  ulonglong uVar8;
  undefined8 uVar9;
  ulonglong uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  ulonglong uVar13;
  undefined8 uVar14;
  ulonglong local_a8;
  ulonglong local_a0;
  ulonglong local_88;
  ulonglong local_80;
  ulonglong local_78;
  ulonglong local_70;
  undefined4 local_20;
  
  local_a8 = *param_4;
  local_a0 = param_4[1];
  uVar8 = *param_5;
  uVar13 = param_5[1];
  uVar1 = PackedFloatingADD(local_a8,uVar8);
  uVar4 = PackedFloatingADD(local_a0,uVar13);
  uVar6 = PackedFloatingSUB(local_a8,uVar8);
  uVar1 = PackedFloatingMUL(uVar1,uVar1);
  uVar9 = PackedFloatingSUB(local_a0,uVar13);
  uVar4 = PackedFloatingMUL(uVar4,uVar4);
  uVar6 = PackedFloatingMUL(uVar6,uVar6);
  uVar9 = PackedFloatingMUL(uVar9,uVar9);
  uVar1 = PackedFloatingADD(uVar1,uVar4);
  uVar6 = PackedFloatingADD(uVar6,uVar9);
  local_88 = *param_6;
  local_80 = param_6[1];
  uVar11 = PackedFloatingADD(uVar8,local_88);
  uVar12 = PackedFloatingADD(uVar13,local_80);
  uVar4 = PackedFloatingSUB(uVar8,local_88);
  uVar9 = PackedFloatingSUB(uVar13,local_80);
  uVar11 = PackedFloatingMUL(uVar11,uVar11);
  uVar12 = PackedFloatingMUL(uVar12,uVar12);
  uVar4 = PackedFloatingMUL(uVar4,uVar4);
  uVar9 = PackedFloatingMUL(uVar9,uVar9);
  uVar11 = PackedFloatingADD(uVar11,uVar12);
  uVar4 = PackedFloatingADD(uVar4,uVar9);
  uVar1 = PackedFloatingAccumulate(uVar1,uVar11);
  uVar4 = PackedFloatingAccumulate(uVar6,uVar4);
  uVar1 = PackedFloatingCompareGT(uVar4,uVar1);
  uVar7 = packsswb(uVar1,uVar1);
  if ((uVar7 & 1) != 0) {
    local_a8 = *param_4 ^ 0x8000000080000000;
    local_a0 = param_4[1] ^ 0x8000000080000000;
  }
  if ((uVar7 & 0x10000) != 0) {
    local_88 = *param_6 ^ 0x8000000080000000;
    local_80 = param_6[1] ^ 0x8000000080000000;
  }
  local_78 = *param_7;
  uVar7 = param_7[1];
  uVar6 = PackedFloatingADD(local_88,local_78);
  uVar9 = PackedFloatingADD(local_80,uVar7);
  uVar1 = PackedFloatingSUB(local_88,local_78);
  uVar4 = PackedFloatingSUB(local_80,uVar7);
  uVar6 = PackedFloatingMUL(uVar6,uVar6);
  uVar9 = PackedFloatingMUL(uVar9,uVar9);
  uVar1 = PackedFloatingMUL(uVar1,uVar1);
  uVar4 = PackedFloatingMUL(uVar4,uVar4);
  uVar6 = PackedFloatingADD(uVar6,uVar9);
  uVar1 = PackedFloatingADD(uVar1,uVar4);
  uVar4 = PackedFloatingAccumulate(uVar6,uVar6);
  uVar1 = PackedFloatingAccumulate(uVar1,uVar1);
  uVar10 = PackedFloatingCompareGT(uVar1,uVar4);
  local_70 = uVar7;
  if ((uVar10 & 1) != 0) {
    local_78 = *param_7 ^ 0x8000000080000000;
    local_70 = param_7[1] ^ 0x8000000080000000;
  }
  uVar1 = PackedFloatingMUL(uVar8,uVar8);
  uVar4 = PackedFloatingMUL(uVar13,uVar13);
  uVar1 = PackedFloatingADD(uVar1,uVar4);
  uVar1 = PackedFloatingAccumulate(uVar1,uVar1);
  uVar4 = FloatingReciprocalAprox(uVar7,uVar1);
  uVar7 = PackedFloatingCompareGT(uVar1,0x80000000800000);
  uVar1 = PackedFloatingReciprocalIter1(uVar1,uVar4);
  uVar1 = PackedFloatingReciprocalIter2(uVar1,uVar4);
  uVar4 = PackedFloatingMUL((uVar8 ^ 0x8000000080000000) & uVar7,uVar1);
  uVar11 = PackedFloatingMUL((uVar13 ^ 0x80000000) & uVar7,uVar1);
  uVar10 = CONCAT44((int)local_a8,(int)(local_a8 >> 0x20));
  uVar2 = CONCAT44((int)local_a0,(int)(local_a0 >> 0x20));
  uVar7 = PackedFloatingMUL(local_a8,uVar11);
  uVar1 = PackedFloatingMUL(local_a0,uVar4);
  uVar9 = PackedFloatingMUL(uVar2 ^ 0x80000000,uVar4);
  uVar6 = PackedFloatingMUL(uVar10,uVar11);
  uVar1 = PackedFloatingADD(uVar7 ^ 0x80000000,uVar1);
  uVar6 = PackedFloatingSUB(uVar6,uVar9);
  uVar14 = PackedFloatingMUL(uVar2,uVar11);
  uVar6 = PackedFloatingAccumulate(uVar6,uVar1);
  uVar12 = PackedFloatingMUL(uVar10 ^ 0x80000000,uVar4);
  uVar1 = PackedFloatingMUL(local_a8,uVar4);
  uVar9 = PackedFloatingMUL(local_a0 ^ 0x80000000,uVar11);
  uVar12 = PackedFloatingADD(uVar12,uVar14);
  uVar1 = PackedFloatingSUB(uVar9,uVar1);
  uVar10 = PackedFloatingAccumulate(uVar12,uVar1);
  uVar2 = CONCAT44((int)local_88,(int)(local_88 >> 0x20));
  uVar3 = CONCAT44((int)local_80,(int)(local_80 >> 0x20));
  uVar7 = PackedFloatingMUL(local_88,uVar11);
  uVar1 = PackedFloatingMUL(local_80,uVar4);
  uVar12 = PackedFloatingMUL(uVar3 ^ 0x80000000,uVar4);
  uVar9 = PackedFloatingMUL(uVar2,uVar11);
  uVar1 = PackedFloatingADD(uVar7 ^ 0x80000000,uVar1);
  uVar9 = PackedFloatingSUB(uVar9,uVar12);
  uVar14 = PackedFloatingMUL(uVar3,uVar11);
  uVar9 = PackedFloatingAccumulate(uVar9,uVar1);
  uVar12 = PackedFloatingMUL(uVar2 ^ 0x80000000,uVar4);
  uVar1 = PackedFloatingMUL(local_88,uVar4);
  uVar4 = PackedFloatingMUL(local_80 ^ 0x80000000,uVar11);
  uVar11 = PackedFloatingADD(uVar12,uVar14);
  uVar1 = PackedFloatingSUB(uVar4,uVar1);
  uVar7 = PackedFloatingAccumulate(uVar11,uVar1);
  uVar5 = (undefined4)(uVar10 >> 0x20);
  uVar4 = PackedFloatingCompareGE(CONCAT44(uVar5,uVar5),0x3f8000003f800000);
  uVar1 = uVar9;
  if ((int)uVar4 == 0) {
    uVar2 = FUN_004601c0();
    uVar3 = FUN_004608c0();
    uVar4 = PackedFloatingCompareGE(uVar3 & 0x7fffffff7fffffff,0x3400000034000000);
    if ((int)uVar4 != 0) {
      uVar1 = FloatingReciprocalAprox(uVar1,uVar3);
      uVar4 = PackedFloatingReciprocalIter1(uVar3,uVar1);
      uVar4 = PackedFloatingReciprocalIter2(uVar4,uVar1);
      uVar4 = PackedFloatingMUL(CONCAT44((int)uVar2,(int)uVar2),uVar4);
      uVar6 = PackedFloatingMUL(uVar6,uVar4);
      uVar10 = PackedFloatingMUL(uVar10,uVar4);
    }
  }
  uVar5 = (undefined4)(uVar7 >> 0x20);
  uVar4 = PackedFloatingCompareGE(CONCAT44(uVar5,uVar5),0x3f8000003f800000);
  if ((int)uVar4 == 0) {
    uVar2 = FUN_004601c0();
    uVar3 = FUN_004608c0();
    uVar4 = PackedFloatingCompareGE(uVar3 & 0x7fffffff7fffffff,0x3400000034000000);
    if ((int)uVar4 != 0) {
      uVar4 = FloatingReciprocalAprox(uVar1,uVar3);
      uVar1 = PackedFloatingReciprocalIter1(uVar3,uVar4);
      uVar1 = PackedFloatingReciprocalIter2(uVar1,uVar4);
      uVar1 = PackedFloatingMUL(CONCAT44((int)uVar2,(int)uVar2),uVar1);
      uVar9 = PackedFloatingMUL(uVar9,uVar1);
      uVar7 = PackedFloatingMUL(uVar7,uVar1);
    }
  }
  uVar1 = PackedFloatingADD(uVar6,uVar9);
  uVar4 = PackedFloatingADD(uVar10 & 0xffffffff,uVar7 & 0xffffffff);
  uVar1 = PackedFloatingMUL(uVar1,0xbe800000be800000);
  uVar2 = PackedFloatingMUL(uVar4,0xbe800000be800000);
  uVar4 = PackedFloatingMUL(uVar1,uVar1);
  uVar6 = PackedFloatingMUL(uVar2 & 0xffffffff,uVar2 & 0xffffffff);
  uVar4 = PackedFloatingADD(uVar4,uVar6);
  uVar4 = PackedFloatingAccumulate(uVar4,uVar4);
  uVar6 = PackedFloatingReciprocalSQRAprox(uVar6,uVar4);
  uVar9 = PackedFloatingMUL(uVar6,uVar6);
  uVar9 = PackedFloatingReciprocalSQRIter1(uVar9,uVar4);
  uVar6 = PackedFloatingReciprocalIter2(uVar9,uVar6);
  PackedFloatingMUL(uVar4,uVar6);
  uVar7 = FUN_004607a0();
  uVar10 = PackedFloatingCompareGE(uVar7 & 0x7fffffffffffffff,0x3400000034000000);
  uVar5 = (undefined4)(uVar7 >> 0x20);
  uVar4 = PackedFloatingMUL(CONCAT44(uVar5,uVar5),CONCAT44(unaff_ESI,(int)uVar6));
  local_20 = (undefined4)uVar2;
  if ((uVar10 & 0x100000000) != 0) {
    uVar4 = CONCAT44((int)uVar4,(int)uVar4);
    uVar6 = PackedFloatingMUL(uVar2 & 0xffffffff,uVar4);
    local_20 = (undefined4)uVar6;
    uVar1 = PackedFloatingMUL(uVar1,uVar4);
  }
  uVar10 = CONCAT44((int)uVar7,local_20);
  uVar2 = CONCAT44((int)uVar1,(int)((ulonglong)uVar1 >> 0x20));
  uVar3 = CONCAT44(local_20,(int)uVar7);
  uVar7 = PackedFloatingMUL(uVar1,uVar13);
  uVar4 = PackedFloatingMUL(uVar10,uVar8);
  uVar9 = PackedFloatingMUL(uVar3 ^ 0x80000000,uVar8);
  uVar6 = PackedFloatingMUL(uVar2,uVar13);
  uVar4 = PackedFloatingADD(uVar7 ^ 0x80000000,uVar4);
  uVar6 = PackedFloatingSUB(uVar6,uVar9);
  uVar11 = PackedFloatingMUL(uVar3,uVar13);
  uVar6 = PackedFloatingAccumulate(uVar6,uVar4);
  uVar9 = PackedFloatingMUL(uVar2 ^ 0x80000000,uVar8);
  uVar1 = PackedFloatingMUL(uVar1,uVar8);
  *param_1 = uVar6;
  uVar4 = PackedFloatingMUL(uVar10 ^ 0x80000000,uVar13);
  uVar9 = PackedFloatingADD(uVar9,uVar11);
  uVar1 = PackedFloatingSUB(uVar4,uVar1);
  uVar1 = PackedFloatingAccumulate(uVar9,uVar1);
  param_1[1] = uVar1;
  uVar1 = PackedFloatingMUL(local_88,local_88);
  uVar4 = PackedFloatingMUL(local_80,local_80);
  uVar1 = PackedFloatingADD(uVar1,uVar4);
  uVar1 = PackedFloatingAccumulate(uVar1,uVar1);
  uVar4 = FloatingReciprocalAprox(uVar6,uVar1);
  uVar7 = PackedFloatingCompareGT(uVar1,0x80000000800000);
  uVar1 = PackedFloatingReciprocalIter1(uVar1,uVar4);
  uVar1 = PackedFloatingReciprocalIter2(uVar1,uVar4);
  uVar4 = PackedFloatingMUL((local_88 ^ 0x8000000080000000) & uVar7,uVar1);
  uVar11 = PackedFloatingMUL((local_80 ^ 0x80000000) & uVar7,uVar1);
  uVar10 = CONCAT44((int)uVar8,(int)(uVar8 >> 0x20));
  uVar2 = CONCAT44((int)uVar13,(int)(uVar13 >> 0x20));
  uVar7 = PackedFloatingMUL(uVar8,uVar11);
  uVar1 = PackedFloatingMUL(uVar13,uVar4);
  uVar9 = PackedFloatingMUL(uVar2 ^ 0x80000000,uVar4);
  uVar6 = PackedFloatingMUL(uVar10,uVar11);
  uVar1 = PackedFloatingADD(uVar7 ^ 0x80000000,uVar1);
  uVar6 = PackedFloatingSUB(uVar6,uVar9);
  uVar14 = PackedFloatingMUL(uVar2,uVar11);
  uVar6 = PackedFloatingAccumulate(uVar6,uVar1);
  uVar12 = PackedFloatingMUL(uVar10 ^ 0x80000000,uVar4);
  uVar1 = PackedFloatingMUL(uVar8,uVar4);
  uVar9 = PackedFloatingMUL(uVar13 ^ 0x80000000,uVar11);
  uVar12 = PackedFloatingADD(uVar12,uVar14);
  uVar1 = PackedFloatingSUB(uVar9,uVar1);
  uVar13 = PackedFloatingAccumulate(uVar12,uVar1);
  uVar7 = CONCAT44((int)local_78,(int)(local_78 >> 0x20));
  uVar10 = CONCAT44((int)local_70,(int)(local_70 >> 0x20));
  uVar8 = PackedFloatingMUL(local_78,uVar11);
  uVar1 = PackedFloatingMUL(local_70,uVar4);
  uVar12 = PackedFloatingMUL(uVar10 ^ 0x80000000,uVar4);
  uVar9 = PackedFloatingMUL(uVar7,uVar11);
  uVar1 = PackedFloatingADD(uVar8 ^ 0x80000000,uVar1);
  uVar9 = PackedFloatingSUB(uVar9,uVar12);
  uVar14 = PackedFloatingMUL(uVar10,uVar11);
  uVar9 = PackedFloatingAccumulate(uVar9,uVar1);
  uVar12 = PackedFloatingMUL(uVar7 ^ 0x80000000,uVar4);
  uVar1 = PackedFloatingMUL(local_78,uVar4);
  uVar4 = PackedFloatingMUL(local_70 ^ 0x80000000,uVar11);
  uVar11 = PackedFloatingADD(uVar12,uVar14);
  uVar1 = PackedFloatingSUB(uVar4,uVar1);
  uVar8 = PackedFloatingAccumulate(uVar11,uVar1);
  uVar5 = (undefined4)(uVar13 >> 0x20);
  uVar4 = PackedFloatingCompareGE(CONCAT44(uVar5,uVar5),0x3f8000003f800000);
  uVar1 = uVar9;
  if ((int)uVar4 == 0) {
    uVar7 = FUN_004601c0();
    uVar10 = FUN_004608c0();
    uVar4 = PackedFloatingCompareGE(uVar10 & 0x7fffffff7fffffff,0x3400000034000000);
    if ((int)uVar4 != 0) {
      uVar1 = FloatingReciprocalAprox(uVar1,uVar10);
      uVar4 = PackedFloatingReciprocalIter1(uVar10,uVar1);
      uVar4 = PackedFloatingReciprocalIter2(uVar4,uVar1);
      uVar4 = PackedFloatingMUL(CONCAT44((int)uVar7,(int)uVar7),uVar4);
      uVar6 = PackedFloatingMUL(uVar6,uVar4);
      uVar13 = PackedFloatingMUL(uVar13,uVar4);
    }
  }
  uVar5 = (undefined4)(uVar8 >> 0x20);
  uVar4 = PackedFloatingCompareGE(CONCAT44(uVar5,uVar5),0x3f8000003f800000);
  if ((int)uVar4 == 0) {
    uVar7 = FUN_004601c0();
    uVar10 = FUN_004608c0();
    uVar4 = PackedFloatingCompareGE(uVar10 & 0x7fffffff7fffffff,0x3400000034000000);
    if ((int)uVar4 != 0) {
      uVar4 = FloatingReciprocalAprox(uVar1,uVar10);
      uVar1 = PackedFloatingReciprocalIter1(uVar10,uVar4);
      uVar1 = PackedFloatingReciprocalIter2(uVar1,uVar4);
      uVar1 = PackedFloatingMUL(CONCAT44((int)uVar7,(int)uVar7),uVar1);
      uVar9 = PackedFloatingMUL(uVar9,uVar1);
      uVar8 = PackedFloatingMUL(uVar8,uVar1);
    }
  }
  uVar1 = PackedFloatingADD(uVar6,uVar9);
  uVar4 = PackedFloatingADD(uVar13 & 0xffffffff,uVar8 & 0xffffffff);
  uVar1 = PackedFloatingMUL(uVar1,0xbe800000be800000);
  uVar7 = PackedFloatingMUL(uVar4,0xbe800000be800000);
  uVar4 = PackedFloatingMUL(uVar1,uVar1);
  uVar6 = PackedFloatingMUL(uVar7 & 0xffffffff,uVar7 & 0xffffffff);
  uVar4 = PackedFloatingADD(uVar4,uVar6);
  uVar4 = PackedFloatingAccumulate(uVar4,uVar4);
  uVar6 = PackedFloatingReciprocalSQRAprox(uVar6,uVar4);
  uVar9 = PackedFloatingMUL(uVar6,uVar6);
  uVar9 = PackedFloatingReciprocalSQRIter1(uVar9,uVar4);
  uVar6 = PackedFloatingReciprocalIter2(uVar9,uVar6);
  PackedFloatingMUL(uVar4,uVar6);
  uVar8 = FUN_004607a0();
  uVar13 = PackedFloatingCompareGE(uVar8 & 0x7fffffffffffffff,0x3400000034000000);
  uVar5 = (undefined4)(uVar8 >> 0x20);
  uVar4 = PackedFloatingMUL(CONCAT44(uVar5,uVar5),CONCAT44(unaff_ESI,(int)uVar6));
  local_20 = (undefined4)uVar7;
  if ((uVar13 & 0x100000000) != 0) {
    uVar4 = CONCAT44((int)uVar4,(int)uVar4);
    uVar6 = PackedFloatingMUL(uVar7 & 0xffffffff,uVar4);
    local_20 = (undefined4)uVar6;
    uVar1 = PackedFloatingMUL(uVar1,uVar4);
  }
  uVar13 = CONCAT44((int)uVar8,local_20);
  uVar7 = CONCAT44((int)uVar1,(int)((ulonglong)uVar1 >> 0x20));
  uVar10 = CONCAT44(local_20,(int)uVar8);
  uVar8 = PackedFloatingMUL(uVar1,local_80);
  uVar4 = PackedFloatingMUL(uVar13,local_88);
  uVar9 = PackedFloatingMUL(uVar10 ^ 0x80000000,local_88);
  uVar6 = PackedFloatingMUL(uVar7,local_80);
  uVar4 = PackedFloatingADD(uVar8 ^ 0x80000000,uVar4);
  uVar6 = PackedFloatingSUB(uVar6,uVar9);
  uVar9 = PackedFloatingMUL(uVar10,local_80);
  uVar4 = PackedFloatingAccumulate(uVar6,uVar4);
  uVar6 = PackedFloatingMUL(uVar7 ^ 0x80000000,local_88);
  uVar1 = PackedFloatingMUL(uVar1,local_88);
  *param_2 = uVar4;
  uVar4 = PackedFloatingMUL(uVar13 ^ 0x80000000,local_80);
  uVar6 = PackedFloatingADD(uVar6,uVar9);
  uVar1 = PackedFloatingSUB(uVar4,uVar1);
  uVar1 = PackedFloatingAccumulate(uVar6,uVar1);
  param_2[1] = uVar1;
  *param_3 = local_88;
  param_3[1] = local_80;
  FastExitMediaState();
  return;
}



/* FUN_0045b092 @ 0045b092 */

void __cdecl FUN_0045b092(undefined8 *param_1)

{
  *param_1 = 0x3f800000;
  param_1[1] = 0;
  param_1[3] = 0;
  param_1[4] = 0;
  param_1[5] = 0x3f800000;
  param_1[6] = 0;
  param_1[2] = 0x3f80000000000000;
  param_1[7] = 0x3f80000000000000;
  FastExitMediaState();
  return;
}



/* FUN_0045b252 @ 0045b252 */

void FUN_0045b252(ulonglong *param_1,undefined8 *param_2,undefined8 *param_3,ulonglong *param_4,
                 undefined8 *param_5,undefined8 *param_6,undefined8 *param_7)

{
  undefined4 uVar1;
  undefined8 uVar2;
  undefined8 uVar3;
  undefined8 uVar4;
  undefined4 uVar7;
  ulonglong uVar5;
  ulonglong uVar6;
  undefined8 uVar8;
  ulonglong uVar9;
  ulonglong uVar10;
  ulonglong uVar11;
  ulonglong uVar12;
  ulonglong uVar13;
  undefined4 uVar16;
  ulonglong uVar14;
  undefined8 uVar15;
  ulonglong uVar17;
  undefined8 uVar18;
  undefined8 uVar19;
  undefined8 uVar20;
  undefined8 uVar21;
  uint uVar24;
  undefined8 uVar22;
  undefined8 uVar23;
  undefined4 uVar25;
  undefined8 uVar26;
  undefined4 uVar29;
  ulonglong uVar27;
  ulonglong uVar28;
  
  if (param_4 == (ulonglong *)0x0) {
    *param_1 = 0x3f800000;
    param_1[1] = 0;
    param_1[2] = 0x3f80000000000000;
    param_1[3] = 0;
    param_1[4] = 0;
    param_1[5] = 0x3f800000;
    param_1[6] = 0;
    param_1[7] = 0x3f80000000000000;
  }
  else if (param_3 == (undefined8 *)0x0) {
    uVar12 = *param_4;
    uVar11 = param_4[1];
    *param_1 = uVar12 & 0xffffffff;
    param_1[1] = 0;
    param_1[2] = uVar12 & 0xffffffff00000000;
    param_1[3] = 0;
    param_1[4] = 0;
    param_1[5] = (ulonglong)(uint)uVar11;
    param_1[6] = 0;
    param_1[7] = 0x3f80000000000000;
  }
  else {
    uVar13 = (ulonglong)(uint)param_4[1];
    uVar27 = *param_4 & 0xffffffff;
    uVar17 = *param_4 & 0xffffffff00000000;
    uVar21 = *param_3;
    uVar4 = param_3[1];
    uVar2 = PackedFloatingADD(uVar21,uVar21);
    uVar3 = PackedFloatingADD(uVar4,uVar4);
    uVar7 = (undefined4)((ulonglong)uVar21 >> 0x20);
    uVar16 = (undefined4)((ulonglong)uVar4 >> 0x20);
    uVar26 = CONCAT44(uVar16,uVar16);
    uVar8 = PackedFloatingMUL(uVar21,uVar2);
    uVar21 = CONCAT44((int)uVar2,(int)uVar3);
    uVar18 = PackedFloatingMUL(uVar2,uVar26);
    uVar3 = PackedFloatingMUL(CONCAT44((int)uVar4,(int)uVar4),uVar21);
    uVar4 = PackedFloatingMUL(uVar21,CONCAT44(uVar7,uVar7));
    uVar21 = PackedFloatingMUL(uVar21,uVar26);
    uVar2 = CONCAT44((int)((ulonglong)uVar3 >> 0x20),(int)((ulonglong)uVar4 >> 0x20));
    uVar26 = PackedFloatingADD(CONCAT44((int)uVar3,(int)uVar3),uVar8);
    uVar3 = PackedFloatingAccumulate(uVar8,uVar8);
    uVar21 = CONCAT44((int)((ulonglong)uVar18 >> 0x20),(int)uVar21);
    uVar9 = PackedFloatingSUBR(uVar3,0x3f8000003f800000);
    uVar8 = PackedFloatingSUBR(uVar26,0x3f8000003f800000);
    uVar10 = uVar9 & 0xffffffff;
    uVar3 = PackedFloatingADD(uVar2,uVar21);
    uVar14 = PackedFloatingSUB(uVar2,uVar21);
    uVar5 = PackedFloatingADD(uVar4,uVar18);
    uVar11 = PackedFloatingSUB(uVar4,uVar18);
    uVar28 = uVar5 & 0xffffffff;
    uVar16 = (undefined4)uVar14;
    uVar25 = (undefined4)uVar8;
    uVar4 = CONCAT44(uVar25,uVar16);
    uVar7 = (undefined4)uVar3;
    uVar12 = uVar14 >> 0x20;
    uVar24 = (uint)((ulonglong)uVar3 >> 0x20);
    uVar29 = (undefined4)((ulonglong)uVar8 >> 0x20);
    uVar21 = CONCAT44(uVar7,uVar29);
    uVar2 = CONCAT44((int)uVar11,uVar24);
    uVar1 = (undefined4)(uVar14 >> 0x20);
    if (param_2 == (undefined8 *)0x0) {
      *param_1 = CONCAT44(uVar16,uVar29);
      param_1[2] = CONCAT44(uVar25,uVar7);
      param_1[5] = uVar9 & 0xffffffff;
      param_1[7] = 0x3f80000000000000;
      param_1[4] = CONCAT44((int)uVar5,uVar1);
      param_1[6] = 0;
      param_1[3] = uVar11 & 0xffffffff;
      param_1[1] = (ulonglong)uVar24;
      uVar7 = (undefined4)(*param_1 >> 0x20);
      uVar16 = (undefined4)(param_1[1] >> 0x20);
      uVar1 = (undefined4)*param_1;
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[1];
      uVar18 = CONCAT44(uVar1,uVar1);
      uVar23 = PackedFloatingMUL(uVar27,uVar8);
      uVar3 = CONCAT44(uVar7,uVar7);
      uVar26 = PackedFloatingMUL(uVar8,0);
      uVar20 = PackedFloatingMUL(uVar17,uVar3);
      uVar8 = CONCAT44(uVar16,uVar16);
      uVar3 = PackedFloatingMUL(uVar3,0);
      uVar23 = PackedFloatingADD(uVar20,uVar23);
      uVar20 = PackedFloatingMUL(0,uVar18);
      uVar26 = PackedFloatingADD(uVar3,uVar26);
      uVar3 = PackedFloatingMUL(uVar18,uVar13);
      uVar18 = PackedFloatingADD(uVar20,uVar23);
      uVar23 = PackedFloatingMUL(0,uVar8);
      uVar3 = PackedFloatingADD(uVar26,uVar3);
      uVar8 = PackedFloatingMUL(uVar8,0x3f80000000000000);
      uVar5 = PackedFloatingADD(uVar23,uVar18);
      uVar11 = PackedFloatingADD(uVar8,uVar3);
      *param_1 = uVar5;
      param_1[1] = uVar11;
      uVar7 = (undefined4)(param_1[2] >> 0x20);
      uVar16 = (undefined4)(param_1[3] >> 0x20);
      uVar1 = (undefined4)param_1[2];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[3];
      uVar18 = CONCAT44(uVar1,uVar1);
      uVar23 = PackedFloatingMUL(uVar27,uVar8);
      uVar3 = CONCAT44(uVar7,uVar7);
      uVar26 = PackedFloatingMUL(uVar8,0);
      uVar20 = PackedFloatingMUL(uVar17,uVar3);
      uVar8 = CONCAT44(uVar16,uVar16);
      uVar3 = PackedFloatingMUL(uVar3,0);
      uVar23 = PackedFloatingADD(uVar20,uVar23);
      uVar20 = PackedFloatingMUL(0,uVar18);
      uVar26 = PackedFloatingADD(uVar3,uVar26);
      uVar3 = PackedFloatingMUL(uVar18,uVar13);
      uVar18 = PackedFloatingADD(uVar20,uVar23);
      uVar23 = PackedFloatingMUL(0,uVar8);
      uVar3 = PackedFloatingADD(uVar26,uVar3);
      uVar8 = PackedFloatingMUL(uVar8,0x3f80000000000000);
      uVar5 = PackedFloatingADD(uVar23,uVar18);
      uVar11 = PackedFloatingADD(uVar8,uVar3);
      param_1[2] = uVar5;
      param_1[3] = uVar11;
      uVar7 = (undefined4)(param_1[4] >> 0x20);
      uVar16 = (undefined4)(param_1[5] >> 0x20);
      uVar1 = (undefined4)param_1[4];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[5];
      uVar18 = CONCAT44(uVar1,uVar1);
      uVar23 = PackedFloatingMUL(uVar27,uVar8);
      uVar3 = CONCAT44(uVar7,uVar7);
      uVar26 = PackedFloatingMUL(uVar8,0);
      uVar20 = PackedFloatingMUL(uVar17,uVar3);
      uVar8 = CONCAT44(uVar16,uVar16);
      uVar3 = PackedFloatingMUL(uVar3,0);
      uVar23 = PackedFloatingADD(uVar20,uVar23);
      uVar20 = PackedFloatingMUL(0,uVar18);
      uVar26 = PackedFloatingADD(uVar3,uVar26);
      uVar3 = PackedFloatingMUL(uVar18,uVar13);
      uVar18 = PackedFloatingADD(uVar20,uVar23);
      uVar23 = PackedFloatingMUL(0,uVar8);
      uVar3 = PackedFloatingADD(uVar26,uVar3);
      uVar8 = PackedFloatingMUL(uVar8,0x3f80000000000000);
      uVar5 = PackedFloatingADD(uVar23,uVar18);
      uVar11 = PackedFloatingADD(uVar8,uVar3);
      param_1[4] = uVar5;
      param_1[5] = uVar11;
      uVar7 = (undefined4)(param_1[6] >> 0x20);
      uVar16 = (undefined4)(param_1[7] >> 0x20);
      uVar1 = (undefined4)param_1[6];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[7];
      uVar18 = CONCAT44(uVar1,uVar1);
      uVar23 = PackedFloatingMUL(uVar27,uVar8);
      uVar3 = CONCAT44(uVar7,uVar7);
      uVar26 = PackedFloatingMUL(uVar8,0);
      uVar20 = PackedFloatingMUL(uVar17,uVar3);
      uVar8 = CONCAT44(uVar16,uVar16);
      uVar3 = PackedFloatingMUL(uVar3,0);
      uVar23 = PackedFloatingADD(uVar20,uVar23);
      uVar20 = PackedFloatingMUL(0,uVar18);
      uVar26 = PackedFloatingADD(uVar3,uVar26);
      uVar3 = PackedFloatingMUL(uVar18,uVar13);
      uVar18 = PackedFloatingADD(uVar20,uVar23);
      uVar23 = PackedFloatingMUL(0,uVar8);
      uVar3 = PackedFloatingADD(uVar26,uVar3);
      uVar8 = PackedFloatingMUL(uVar8,0x3f80000000000000);
      uVar27 = PackedFloatingADD(uVar23,uVar18);
      uVar11 = PackedFloatingADD(uVar8,uVar3);
      param_1[6] = uVar27;
      param_1[7] = uVar11;
      uVar7 = (undefined4)(*param_1 >> 0x20);
      uVar16 = (undefined4)(param_1[1] >> 0x20);
      uVar1 = (undefined4)*param_1;
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[1];
      uVar18 = CONCAT44(uVar1,uVar1);
      uVar23 = PackedFloatingMUL(uVar21,uVar8);
      uVar3 = CONCAT44(uVar7,uVar7);
      uVar26 = PackedFloatingMUL(uVar8,uVar12);
      uVar20 = PackedFloatingMUL(uVar4,uVar3);
      uVar8 = CONCAT44(uVar16,uVar16);
      uVar3 = PackedFloatingMUL(uVar3,uVar28);
      uVar23 = PackedFloatingADD(uVar20,uVar23);
      uVar20 = PackedFloatingMUL(uVar2,uVar18);
      uVar26 = PackedFloatingADD(uVar3,uVar26);
      uVar3 = PackedFloatingMUL(uVar18,uVar10);
      uVar18 = PackedFloatingADD(uVar20,uVar23);
      uVar23 = PackedFloatingMUL(0,uVar8);
      uVar3 = PackedFloatingADD(uVar26,uVar3);
      uVar8 = PackedFloatingMUL(uVar8,0x3f80000000000000);
      uVar27 = PackedFloatingADD(uVar23,uVar18);
      uVar11 = PackedFloatingADD(uVar8,uVar3);
      *param_1 = uVar27;
      param_1[1] = uVar11;
      uVar7 = (undefined4)(param_1[2] >> 0x20);
      uVar16 = (undefined4)(param_1[3] >> 0x20);
      uVar1 = (undefined4)param_1[2];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[3];
      uVar18 = CONCAT44(uVar1,uVar1);
      uVar23 = PackedFloatingMUL(uVar21,uVar8);
      uVar3 = CONCAT44(uVar7,uVar7);
      uVar26 = PackedFloatingMUL(uVar8,uVar12);
      uVar20 = PackedFloatingMUL(uVar4,uVar3);
      uVar8 = CONCAT44(uVar16,uVar16);
      uVar3 = PackedFloatingMUL(uVar3,uVar28);
      uVar23 = PackedFloatingADD(uVar20,uVar23);
      uVar20 = PackedFloatingMUL(uVar2,uVar18);
      uVar26 = PackedFloatingADD(uVar3,uVar26);
      uVar3 = PackedFloatingMUL(uVar18,uVar10);
      uVar18 = PackedFloatingADD(uVar20,uVar23);
      uVar23 = PackedFloatingMUL(0,uVar8);
      uVar3 = PackedFloatingADD(uVar26,uVar3);
      uVar8 = PackedFloatingMUL(uVar8,0x3f80000000000000);
      uVar27 = PackedFloatingADD(uVar23,uVar18);
      uVar11 = PackedFloatingADD(uVar8,uVar3);
      param_1[2] = uVar27;
      param_1[3] = uVar11;
      uVar7 = (undefined4)(param_1[4] >> 0x20);
      uVar16 = (undefined4)(param_1[5] >> 0x20);
      uVar1 = (undefined4)param_1[4];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[5];
      uVar18 = CONCAT44(uVar1,uVar1);
      uVar23 = PackedFloatingMUL(uVar21,uVar8);
      uVar3 = CONCAT44(uVar7,uVar7);
      uVar26 = PackedFloatingMUL(uVar8,uVar12);
      uVar20 = PackedFloatingMUL(uVar4,uVar3);
      uVar8 = CONCAT44(uVar16,uVar16);
      uVar3 = PackedFloatingMUL(uVar3,uVar28);
      uVar23 = PackedFloatingADD(uVar20,uVar23);
      uVar20 = PackedFloatingMUL(uVar2,uVar18);
      uVar26 = PackedFloatingADD(uVar3,uVar26);
      uVar3 = PackedFloatingMUL(uVar18,uVar10);
      uVar18 = PackedFloatingADD(uVar20,uVar23);
      uVar23 = PackedFloatingMUL(0,uVar8);
      uVar3 = PackedFloatingADD(uVar26,uVar3);
      uVar8 = PackedFloatingMUL(uVar8,0x3f80000000000000);
      uVar27 = PackedFloatingADD(uVar23,uVar18);
      uVar11 = PackedFloatingADD(uVar8,uVar3);
      param_1[4] = uVar27;
      param_1[5] = uVar11;
      uVar7 = (undefined4)(param_1[6] >> 0x20);
      uVar16 = (undefined4)(param_1[7] >> 0x20);
      uVar1 = (undefined4)param_1[6];
      uVar3 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[7];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar26 = PackedFloatingMUL(uVar21,uVar3);
      uVar21 = CONCAT44(uVar7,uVar7);
      uVar3 = PackedFloatingMUL(uVar3,uVar12);
      uVar18 = PackedFloatingMUL(uVar4,uVar21);
      uVar4 = CONCAT44(uVar16,uVar16);
      uVar21 = PackedFloatingMUL(uVar21,uVar28);
      uVar26 = PackedFloatingADD(uVar18,uVar26);
      uVar18 = PackedFloatingMUL(uVar2,uVar8);
      uVar2 = PackedFloatingADD(uVar21,uVar3);
      uVar21 = PackedFloatingMUL(uVar8,uVar10);
      uVar3 = PackedFloatingADD(uVar18,uVar26);
      uVar8 = PackedFloatingMUL(0,uVar4);
      uVar21 = PackedFloatingADD(uVar2,uVar21);
      uVar4 = PackedFloatingMUL(uVar4,0x3f80000000000000);
      uVar11 = PackedFloatingADD(uVar8,uVar3);
      uVar12 = PackedFloatingADD(uVar4,uVar21);
      param_1[6] = uVar11;
      param_1[7] = uVar12;
    }
    else {
      uVar26 = CONCAT44(uVar16,uVar29);
      uVar20 = CONCAT44(uVar25,uVar7);
      uVar9 = uVar9 & 0xffffffff;
      uVar22 = CONCAT44((int)uVar5,uVar1);
      uVar11 = uVar11 & 0xffffffff;
      uVar14 = (ulonglong)uVar24;
      uVar3 = *param_2;
      uVar24 = *(uint *)(param_2 + 1);
      *param_1 = 0x3f800000;
      param_1[1] = 0;
      param_1[2] = 0x3f80000000000000;
      param_1[3] = 0;
      param_1[4] = 0;
      param_1[5] = 0x3f800000;
      uVar6 = PackedFloatingSUB(0x3f80000000000000,(ulonglong)uVar24);
      uVar5 = PackedFloatingSUB(0,uVar3);
      param_1[7] = uVar6;
      param_1[6] = uVar5;
      uVar7 = (undefined4)(*param_1 >> 0x20);
      uVar16 = (undefined4)(param_1[1] >> 0x20);
      uVar1 = (undefined4)*param_1;
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[1];
      uVar23 = CONCAT44(uVar1,uVar1);
      uVar15 = PackedFloatingMUL(uVar26,uVar8);
      uVar3 = CONCAT44(uVar7,uVar7);
      uVar18 = PackedFloatingMUL(uVar8,uVar14);
      uVar19 = PackedFloatingMUL(uVar20,uVar3);
      uVar8 = CONCAT44(uVar16,uVar16);
      uVar3 = PackedFloatingMUL(uVar3,uVar11);
      uVar15 = PackedFloatingADD(uVar19,uVar15);
      uVar19 = PackedFloatingMUL(uVar22,uVar23);
      uVar18 = PackedFloatingADD(uVar3,uVar18);
      uVar3 = PackedFloatingMUL(uVar23,uVar9);
      uVar23 = PackedFloatingADD(uVar19,uVar15);
      uVar15 = PackedFloatingMUL(0,uVar8);
      uVar3 = PackedFloatingADD(uVar18,uVar3);
      uVar8 = PackedFloatingMUL(uVar8,0x3f80000000000000);
      uVar6 = PackedFloatingADD(uVar15,uVar23);
      uVar5 = PackedFloatingADD(uVar8,uVar3);
      *param_1 = uVar6;
      param_1[1] = uVar5;
      uVar7 = (undefined4)(param_1[2] >> 0x20);
      uVar16 = (undefined4)(param_1[3] >> 0x20);
      uVar1 = (undefined4)param_1[2];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[3];
      uVar23 = CONCAT44(uVar1,uVar1);
      uVar15 = PackedFloatingMUL(uVar26,uVar8);
      uVar3 = CONCAT44(uVar7,uVar7);
      uVar18 = PackedFloatingMUL(uVar8,uVar14);
      uVar19 = PackedFloatingMUL(uVar20,uVar3);
      uVar8 = CONCAT44(uVar16,uVar16);
      uVar3 = PackedFloatingMUL(uVar3,uVar11);
      uVar15 = PackedFloatingADD(uVar19,uVar15);
      uVar19 = PackedFloatingMUL(uVar22,uVar23);
      uVar18 = PackedFloatingADD(uVar3,uVar18);
      uVar3 = PackedFloatingMUL(uVar23,uVar9);
      uVar23 = PackedFloatingADD(uVar19,uVar15);
      uVar15 = PackedFloatingMUL(0,uVar8);
      uVar3 = PackedFloatingADD(uVar18,uVar3);
      uVar8 = PackedFloatingMUL(uVar8,0x3f80000000000000);
      uVar6 = PackedFloatingADD(uVar15,uVar23);
      uVar5 = PackedFloatingADD(uVar8,uVar3);
      param_1[2] = uVar6;
      param_1[3] = uVar5;
      uVar7 = (undefined4)(param_1[4] >> 0x20);
      uVar16 = (undefined4)(param_1[5] >> 0x20);
      uVar1 = (undefined4)param_1[4];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[5];
      uVar23 = CONCAT44(uVar1,uVar1);
      uVar15 = PackedFloatingMUL(uVar26,uVar8);
      uVar3 = CONCAT44(uVar7,uVar7);
      uVar18 = PackedFloatingMUL(uVar8,uVar14);
      uVar19 = PackedFloatingMUL(uVar20,uVar3);
      uVar8 = CONCAT44(uVar16,uVar16);
      uVar3 = PackedFloatingMUL(uVar3,uVar11);
      uVar15 = PackedFloatingADD(uVar19,uVar15);
      uVar19 = PackedFloatingMUL(uVar22,uVar23);
      uVar18 = PackedFloatingADD(uVar3,uVar18);
      uVar3 = PackedFloatingMUL(uVar23,uVar9);
      uVar23 = PackedFloatingADD(uVar19,uVar15);
      uVar15 = PackedFloatingMUL(0,uVar8);
      uVar3 = PackedFloatingADD(uVar18,uVar3);
      uVar8 = PackedFloatingMUL(uVar8,0x3f80000000000000);
      uVar6 = PackedFloatingADD(uVar15,uVar23);
      uVar5 = PackedFloatingADD(uVar8,uVar3);
      param_1[4] = uVar6;
      param_1[5] = uVar5;
      uVar7 = (undefined4)(param_1[6] >> 0x20);
      uVar16 = (undefined4)(param_1[7] >> 0x20);
      uVar1 = (undefined4)param_1[6];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[7];
      uVar18 = CONCAT44(uVar1,uVar1);
      uVar23 = PackedFloatingMUL(uVar26,uVar8);
      uVar3 = CONCAT44(uVar7,uVar7);
      uVar26 = PackedFloatingMUL(uVar8,uVar14);
      uVar20 = PackedFloatingMUL(uVar20,uVar3);
      uVar8 = CONCAT44(uVar16,uVar16);
      uVar3 = PackedFloatingMUL(uVar3,uVar11);
      uVar23 = PackedFloatingADD(uVar20,uVar23);
      uVar20 = PackedFloatingMUL(uVar22,uVar18);
      uVar26 = PackedFloatingADD(uVar3,uVar26);
      uVar3 = PackedFloatingMUL(uVar18,uVar9);
      uVar18 = PackedFloatingADD(uVar20,uVar23);
      uVar23 = PackedFloatingMUL(0,uVar8);
      uVar3 = PackedFloatingADD(uVar26,uVar3);
      uVar8 = PackedFloatingMUL(uVar8,0x3f80000000000000);
      uVar5 = PackedFloatingADD(uVar23,uVar18);
      uVar11 = PackedFloatingADD(uVar8,uVar3);
      param_1[6] = uVar5;
      param_1[7] = uVar11;
      uVar7 = (undefined4)(*param_1 >> 0x20);
      uVar16 = (undefined4)(param_1[1] >> 0x20);
      uVar1 = (undefined4)*param_1;
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[1];
      uVar18 = CONCAT44(uVar1,uVar1);
      uVar23 = PackedFloatingMUL(uVar27,uVar8);
      uVar3 = CONCAT44(uVar7,uVar7);
      uVar26 = PackedFloatingMUL(uVar8,0);
      uVar20 = PackedFloatingMUL(uVar17,uVar3);
      uVar8 = CONCAT44(uVar16,uVar16);
      uVar3 = PackedFloatingMUL(uVar3,0);
      uVar23 = PackedFloatingADD(uVar20,uVar23);
      uVar20 = PackedFloatingMUL(0,uVar18);
      uVar26 = PackedFloatingADD(uVar3,uVar26);
      uVar3 = PackedFloatingMUL(uVar18,uVar13);
      uVar18 = PackedFloatingADD(uVar20,uVar23);
      uVar23 = PackedFloatingMUL(0,uVar8);
      uVar3 = PackedFloatingADD(uVar26,uVar3);
      uVar8 = PackedFloatingMUL(uVar8,0x3f80000000000000);
      uVar5 = PackedFloatingADD(uVar23,uVar18);
      uVar11 = PackedFloatingADD(uVar8,uVar3);
      *param_1 = uVar5;
      param_1[1] = uVar11;
      uVar7 = (undefined4)(param_1[2] >> 0x20);
      uVar16 = (undefined4)(param_1[3] >> 0x20);
      uVar1 = (undefined4)param_1[2];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[3];
      uVar18 = CONCAT44(uVar1,uVar1);
      uVar23 = PackedFloatingMUL(uVar27,uVar8);
      uVar3 = CONCAT44(uVar7,uVar7);
      uVar26 = PackedFloatingMUL(uVar8,0);
      uVar20 = PackedFloatingMUL(uVar17,uVar3);
      uVar8 = CONCAT44(uVar16,uVar16);
      uVar3 = PackedFloatingMUL(uVar3,0);
      uVar23 = PackedFloatingADD(uVar20,uVar23);
      uVar20 = PackedFloatingMUL(0,uVar18);
      uVar26 = PackedFloatingADD(uVar3,uVar26);
      uVar3 = PackedFloatingMUL(uVar18,uVar13);
      uVar18 = PackedFloatingADD(uVar20,uVar23);
      uVar23 = PackedFloatingMUL(0,uVar8);
      uVar3 = PackedFloatingADD(uVar26,uVar3);
      uVar8 = PackedFloatingMUL(uVar8,0x3f80000000000000);
      uVar5 = PackedFloatingADD(uVar23,uVar18);
      uVar11 = PackedFloatingADD(uVar8,uVar3);
      param_1[2] = uVar5;
      param_1[3] = uVar11;
      uVar7 = (undefined4)(param_1[4] >> 0x20);
      uVar16 = (undefined4)(param_1[5] >> 0x20);
      uVar1 = (undefined4)param_1[4];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[5];
      uVar18 = CONCAT44(uVar1,uVar1);
      uVar23 = PackedFloatingMUL(uVar27,uVar8);
      uVar3 = CONCAT44(uVar7,uVar7);
      uVar26 = PackedFloatingMUL(uVar8,0);
      uVar20 = PackedFloatingMUL(uVar17,uVar3);
      uVar8 = CONCAT44(uVar16,uVar16);
      uVar3 = PackedFloatingMUL(uVar3,0);
      uVar23 = PackedFloatingADD(uVar20,uVar23);
      uVar20 = PackedFloatingMUL(0,uVar18);
      uVar26 = PackedFloatingADD(uVar3,uVar26);
      uVar3 = PackedFloatingMUL(uVar18,uVar13);
      uVar18 = PackedFloatingADD(uVar20,uVar23);
      uVar23 = PackedFloatingMUL(0,uVar8);
      uVar3 = PackedFloatingADD(uVar26,uVar3);
      uVar8 = PackedFloatingMUL(uVar8,0x3f80000000000000);
      uVar5 = PackedFloatingADD(uVar23,uVar18);
      uVar11 = PackedFloatingADD(uVar8,uVar3);
      param_1[4] = uVar5;
      param_1[5] = uVar11;
      uVar7 = (undefined4)(param_1[6] >> 0x20);
      uVar16 = (undefined4)(param_1[7] >> 0x20);
      uVar1 = (undefined4)param_1[6];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[7];
      uVar18 = CONCAT44(uVar1,uVar1);
      uVar23 = PackedFloatingMUL(uVar27,uVar8);
      uVar3 = CONCAT44(uVar7,uVar7);
      uVar26 = PackedFloatingMUL(uVar8,0);
      uVar20 = PackedFloatingMUL(uVar17,uVar3);
      uVar8 = CONCAT44(uVar16,uVar16);
      uVar3 = PackedFloatingMUL(uVar3,0);
      uVar23 = PackedFloatingADD(uVar20,uVar23);
      uVar20 = PackedFloatingMUL(0,uVar18);
      uVar26 = PackedFloatingADD(uVar3,uVar26);
      uVar3 = PackedFloatingMUL(uVar18,uVar13);
      uVar18 = PackedFloatingADD(uVar20,uVar23);
      uVar23 = PackedFloatingMUL(0,uVar8);
      uVar3 = PackedFloatingADD(uVar26,uVar3);
      uVar8 = PackedFloatingMUL(uVar8,0x3f80000000000000);
      uVar27 = PackedFloatingADD(uVar23,uVar18);
      uVar11 = PackedFloatingADD(uVar8,uVar3);
      param_1[6] = uVar27;
      param_1[7] = uVar11;
      uVar7 = (undefined4)(*param_1 >> 0x20);
      uVar16 = (undefined4)(param_1[1] >> 0x20);
      uVar1 = (undefined4)*param_1;
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[1];
      uVar18 = CONCAT44(uVar1,uVar1);
      uVar23 = PackedFloatingMUL(uVar21,uVar8);
      uVar3 = CONCAT44(uVar7,uVar7);
      uVar26 = PackedFloatingMUL(uVar8,uVar12);
      uVar20 = PackedFloatingMUL(uVar4,uVar3);
      uVar8 = CONCAT44(uVar16,uVar16);
      uVar3 = PackedFloatingMUL(uVar3,uVar28);
      uVar23 = PackedFloatingADD(uVar20,uVar23);
      uVar20 = PackedFloatingMUL(uVar2,uVar18);
      uVar26 = PackedFloatingADD(uVar3,uVar26);
      uVar3 = PackedFloatingMUL(uVar18,uVar10);
      uVar18 = PackedFloatingADD(uVar20,uVar23);
      uVar23 = PackedFloatingMUL(0,uVar8);
      uVar3 = PackedFloatingADD(uVar26,uVar3);
      uVar8 = PackedFloatingMUL(uVar8,0x3f80000000000000);
      uVar27 = PackedFloatingADD(uVar23,uVar18);
      uVar11 = PackedFloatingADD(uVar8,uVar3);
      *param_1 = uVar27;
      param_1[1] = uVar11;
      uVar7 = (undefined4)(param_1[2] >> 0x20);
      uVar16 = (undefined4)(param_1[3] >> 0x20);
      uVar1 = (undefined4)param_1[2];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[3];
      uVar18 = CONCAT44(uVar1,uVar1);
      uVar23 = PackedFloatingMUL(uVar21,uVar8);
      uVar3 = CONCAT44(uVar7,uVar7);
      uVar26 = PackedFloatingMUL(uVar8,uVar12);
      uVar20 = PackedFloatingMUL(uVar4,uVar3);
      uVar8 = CONCAT44(uVar16,uVar16);
      uVar3 = PackedFloatingMUL(uVar3,uVar28);
      uVar23 = PackedFloatingADD(uVar20,uVar23);
      uVar20 = PackedFloatingMUL(uVar2,uVar18);
      uVar26 = PackedFloatingADD(uVar3,uVar26);
      uVar3 = PackedFloatingMUL(uVar18,uVar10);
      uVar18 = PackedFloatingADD(uVar20,uVar23);
      uVar23 = PackedFloatingMUL(0,uVar8);
      uVar3 = PackedFloatingADD(uVar26,uVar3);
      uVar8 = PackedFloatingMUL(uVar8,0x3f80000000000000);
      uVar27 = PackedFloatingADD(uVar23,uVar18);
      uVar11 = PackedFloatingADD(uVar8,uVar3);
      param_1[2] = uVar27;
      param_1[3] = uVar11;
      uVar7 = (undefined4)(param_1[4] >> 0x20);
      uVar16 = (undefined4)(param_1[5] >> 0x20);
      uVar1 = (undefined4)param_1[4];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[5];
      uVar18 = CONCAT44(uVar1,uVar1);
      uVar23 = PackedFloatingMUL(uVar21,uVar8);
      uVar3 = CONCAT44(uVar7,uVar7);
      uVar26 = PackedFloatingMUL(uVar8,uVar12);
      uVar20 = PackedFloatingMUL(uVar4,uVar3);
      uVar8 = CONCAT44(uVar16,uVar16);
      uVar3 = PackedFloatingMUL(uVar3,uVar28);
      uVar23 = PackedFloatingADD(uVar20,uVar23);
      uVar20 = PackedFloatingMUL(uVar2,uVar18);
      uVar26 = PackedFloatingADD(uVar3,uVar26);
      uVar3 = PackedFloatingMUL(uVar18,uVar10);
      uVar18 = PackedFloatingADD(uVar20,uVar23);
      uVar23 = PackedFloatingMUL(0,uVar8);
      uVar3 = PackedFloatingADD(uVar26,uVar3);
      uVar8 = PackedFloatingMUL(uVar8,0x3f80000000000000);
      uVar27 = PackedFloatingADD(uVar23,uVar18);
      uVar11 = PackedFloatingADD(uVar8,uVar3);
      param_1[4] = uVar27;
      param_1[5] = uVar11;
      uVar7 = (undefined4)(param_1[6] >> 0x20);
      uVar16 = (undefined4)(param_1[7] >> 0x20);
      uVar1 = (undefined4)param_1[6];
      uVar3 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[7];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar26 = PackedFloatingMUL(uVar21,uVar3);
      uVar21 = CONCAT44(uVar7,uVar7);
      uVar3 = PackedFloatingMUL(uVar3,uVar12);
      uVar18 = PackedFloatingMUL(uVar4,uVar21);
      uVar4 = CONCAT44(uVar16,uVar16);
      uVar21 = PackedFloatingMUL(uVar21,uVar28);
      uVar26 = PackedFloatingADD(uVar18,uVar26);
      uVar18 = PackedFloatingMUL(uVar2,uVar8);
      uVar2 = PackedFloatingADD(uVar21,uVar3);
      uVar21 = PackedFloatingMUL(uVar8,uVar10);
      uVar3 = PackedFloatingADD(uVar18,uVar26);
      uVar8 = PackedFloatingMUL(0,uVar4);
      uVar21 = PackedFloatingADD(uVar2,uVar21);
      uVar4 = PackedFloatingMUL(uVar4,0x3f80000000000000);
      uVar11 = PackedFloatingADD(uVar8,uVar3);
      uVar12 = PackedFloatingADD(uVar4,uVar21);
      param_1[6] = uVar11;
      param_1[7] = uVar12;
      uVar12 = PackedFloatingADD(*param_2,param_1[6]);
      uVar21 = PackedFloatingADD((ulonglong)*(uint *)(param_2 + 1),(ulonglong)(uint)param_1[7]);
      param_1[6] = uVar12;
      *(int *)(param_1 + 7) = (int)uVar21;
    }
  }
  if (param_6 != (undefined8 *)0x0) {
    uVar21 = *param_6;
    uVar4 = param_6[1];
    uVar2 = PackedFloatingADD(uVar21,uVar21);
    uVar3 = PackedFloatingADD(uVar4,uVar4);
    uVar7 = (undefined4)((ulonglong)uVar21 >> 0x20);
    uVar16 = (undefined4)((ulonglong)uVar4 >> 0x20);
    uVar26 = CONCAT44(uVar16,uVar16);
    uVar8 = PackedFloatingMUL(uVar21,uVar2);
    uVar21 = CONCAT44((int)uVar2,(int)uVar3);
    uVar18 = PackedFloatingMUL(uVar2,uVar26);
    uVar3 = PackedFloatingMUL(CONCAT44((int)uVar4,(int)uVar4),uVar21);
    uVar4 = PackedFloatingMUL(uVar21,CONCAT44(uVar7,uVar7));
    uVar21 = PackedFloatingMUL(uVar21,uVar26);
    uVar2 = CONCAT44((int)((ulonglong)uVar3 >> 0x20),(int)((ulonglong)uVar4 >> 0x20));
    uVar26 = PackedFloatingADD(CONCAT44((int)uVar3,(int)uVar3),uVar8);
    uVar3 = PackedFloatingAccumulate(uVar8,uVar8);
    uVar21 = CONCAT44((int)((ulonglong)uVar18 >> 0x20),(int)uVar21);
    uVar27 = PackedFloatingSUBR(uVar3,0x3f8000003f800000);
    uVar8 = PackedFloatingSUBR(uVar26,0x3f8000003f800000);
    uVar27 = uVar27 & 0xffffffff;
    uVar3 = PackedFloatingADD(uVar2,uVar21);
    uVar12 = PackedFloatingSUB(uVar2,uVar21);
    uVar11 = PackedFloatingADD(uVar4,uVar18);
    uVar4 = PackedFloatingSUB(uVar4,uVar18);
    uVar11 = uVar11 & 0xffffffff;
    uVar2 = CONCAT44((int)uVar8,(int)uVar12);
    uVar12 = uVar12 >> 0x20;
    uVar21 = CONCAT44((int)uVar3,(int)((ulonglong)uVar8 >> 0x20));
    uVar4 = CONCAT44((int)uVar4,(int)((ulonglong)uVar3 >> 0x20));
    if (param_5 == (undefined8 *)0x0) {
      uVar7 = (undefined4)(*param_1 >> 0x20);
      uVar16 = (undefined4)(param_1[1] >> 0x20);
      uVar1 = (undefined4)*param_1;
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[1];
      uVar18 = CONCAT44(uVar1,uVar1);
      uVar23 = PackedFloatingMUL(uVar21,uVar8);
      uVar3 = CONCAT44(uVar7,uVar7);
      uVar26 = PackedFloatingMUL(uVar8,uVar12);
      uVar20 = PackedFloatingMUL(uVar2,uVar3);
      uVar8 = CONCAT44(uVar16,uVar16);
      uVar3 = PackedFloatingMUL(uVar3,uVar11);
      uVar23 = PackedFloatingADD(uVar20,uVar23);
      uVar20 = PackedFloatingMUL(uVar4,uVar18);
      uVar26 = PackedFloatingADD(uVar3,uVar26);
      uVar3 = PackedFloatingMUL(uVar18,uVar27);
      uVar18 = PackedFloatingADD(uVar20,uVar23);
      uVar23 = PackedFloatingMUL(0,uVar8);
      uVar3 = PackedFloatingADD(uVar26,uVar3);
      uVar8 = PackedFloatingMUL(uVar8,0x3f80000000000000);
      uVar28 = PackedFloatingADD(uVar23,uVar18);
      uVar5 = PackedFloatingADD(uVar8,uVar3);
      *param_1 = uVar28;
      param_1[1] = uVar5;
      uVar7 = (undefined4)(param_1[2] >> 0x20);
      uVar16 = (undefined4)(param_1[3] >> 0x20);
      uVar1 = (undefined4)param_1[2];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[3];
      uVar18 = CONCAT44(uVar1,uVar1);
      uVar23 = PackedFloatingMUL(uVar21,uVar8);
      uVar3 = CONCAT44(uVar7,uVar7);
      uVar26 = PackedFloatingMUL(uVar8,uVar12);
      uVar20 = PackedFloatingMUL(uVar2,uVar3);
      uVar8 = CONCAT44(uVar16,uVar16);
      uVar3 = PackedFloatingMUL(uVar3,uVar11);
      uVar23 = PackedFloatingADD(uVar20,uVar23);
      uVar20 = PackedFloatingMUL(uVar4,uVar18);
      uVar26 = PackedFloatingADD(uVar3,uVar26);
      uVar3 = PackedFloatingMUL(uVar18,uVar27);
      uVar18 = PackedFloatingADD(uVar20,uVar23);
      uVar23 = PackedFloatingMUL(0,uVar8);
      uVar3 = PackedFloatingADD(uVar26,uVar3);
      uVar8 = PackedFloatingMUL(uVar8,0x3f80000000000000);
      uVar28 = PackedFloatingADD(uVar23,uVar18);
      uVar5 = PackedFloatingADD(uVar8,uVar3);
      param_1[2] = uVar28;
      param_1[3] = uVar5;
      uVar7 = (undefined4)(param_1[4] >> 0x20);
      uVar16 = (undefined4)(param_1[5] >> 0x20);
      uVar1 = (undefined4)param_1[4];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[5];
      uVar18 = CONCAT44(uVar1,uVar1);
      uVar23 = PackedFloatingMUL(uVar21,uVar8);
      uVar3 = CONCAT44(uVar7,uVar7);
      uVar26 = PackedFloatingMUL(uVar8,uVar12);
      uVar20 = PackedFloatingMUL(uVar2,uVar3);
      uVar8 = CONCAT44(uVar16,uVar16);
      uVar3 = PackedFloatingMUL(uVar3,uVar11);
      uVar23 = PackedFloatingADD(uVar20,uVar23);
      uVar20 = PackedFloatingMUL(uVar4,uVar18);
      uVar26 = PackedFloatingADD(uVar3,uVar26);
      uVar3 = PackedFloatingMUL(uVar18,uVar27);
      uVar18 = PackedFloatingADD(uVar20,uVar23);
      uVar23 = PackedFloatingMUL(0,uVar8);
      uVar3 = PackedFloatingADD(uVar26,uVar3);
      uVar8 = PackedFloatingMUL(uVar8,0x3f80000000000000);
      uVar28 = PackedFloatingADD(uVar23,uVar18);
      uVar5 = PackedFloatingADD(uVar8,uVar3);
      param_1[4] = uVar28;
      param_1[5] = uVar5;
      uVar7 = (undefined4)(param_1[6] >> 0x20);
      uVar16 = (undefined4)(param_1[7] >> 0x20);
      uVar1 = (undefined4)param_1[6];
      uVar3 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[7];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar26 = PackedFloatingMUL(uVar21,uVar3);
      uVar21 = CONCAT44(uVar7,uVar7);
      uVar3 = PackedFloatingMUL(uVar3,uVar12);
      uVar18 = PackedFloatingMUL(uVar2,uVar21);
      uVar2 = CONCAT44(uVar16,uVar16);
      uVar21 = PackedFloatingMUL(uVar21,uVar11);
      uVar26 = PackedFloatingADD(uVar18,uVar26);
      uVar18 = PackedFloatingMUL(uVar4,uVar8);
      uVar4 = PackedFloatingADD(uVar21,uVar3);
      uVar21 = PackedFloatingMUL(uVar8,uVar27);
      uVar3 = PackedFloatingADD(uVar18,uVar26);
      uVar8 = PackedFloatingMUL(0,uVar2);
      uVar21 = PackedFloatingADD(uVar4,uVar21);
      uVar4 = PackedFloatingMUL(uVar2,0x3f80000000000000);
      uVar11 = PackedFloatingADD(uVar8,uVar3);
      uVar12 = PackedFloatingADD(uVar4,uVar21);
      param_1[6] = uVar11;
      param_1[7] = uVar12;
    }
    else {
      uVar5 = PackedFloatingSUB(param_1[6],*param_5);
      uVar3 = PackedFloatingSUB((ulonglong)(uint)param_1[7],(ulonglong)*(uint *)(param_5 + 1));
      param_1[6] = uVar5;
      *(int *)(param_1 + 7) = (int)uVar3;
      uVar7 = (undefined4)(*param_1 >> 0x20);
      uVar16 = (undefined4)(param_1[1] >> 0x20);
      uVar1 = (undefined4)*param_1;
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[1];
      uVar18 = CONCAT44(uVar1,uVar1);
      uVar23 = PackedFloatingMUL(uVar21,uVar8);
      uVar3 = CONCAT44(uVar7,uVar7);
      uVar26 = PackedFloatingMUL(uVar8,uVar12);
      uVar20 = PackedFloatingMUL(uVar2,uVar3);
      uVar8 = CONCAT44(uVar16,uVar16);
      uVar3 = PackedFloatingMUL(uVar3,uVar11);
      uVar23 = PackedFloatingADD(uVar20,uVar23);
      uVar20 = PackedFloatingMUL(uVar4,uVar18);
      uVar26 = PackedFloatingADD(uVar3,uVar26);
      uVar3 = PackedFloatingMUL(uVar18,uVar27);
      uVar18 = PackedFloatingADD(uVar20,uVar23);
      uVar23 = PackedFloatingMUL(0,uVar8);
      uVar3 = PackedFloatingADD(uVar26,uVar3);
      uVar8 = PackedFloatingMUL(uVar8,0x3f80000000000000);
      uVar28 = PackedFloatingADD(uVar23,uVar18);
      uVar5 = PackedFloatingADD(uVar8,uVar3);
      *param_1 = uVar28;
      param_1[1] = uVar5;
      uVar7 = (undefined4)(param_1[2] >> 0x20);
      uVar16 = (undefined4)(param_1[3] >> 0x20);
      uVar1 = (undefined4)param_1[2];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[3];
      uVar18 = CONCAT44(uVar1,uVar1);
      uVar23 = PackedFloatingMUL(uVar21,uVar8);
      uVar3 = CONCAT44(uVar7,uVar7);
      uVar26 = PackedFloatingMUL(uVar8,uVar12);
      uVar20 = PackedFloatingMUL(uVar2,uVar3);
      uVar8 = CONCAT44(uVar16,uVar16);
      uVar3 = PackedFloatingMUL(uVar3,uVar11);
      uVar23 = PackedFloatingADD(uVar20,uVar23);
      uVar20 = PackedFloatingMUL(uVar4,uVar18);
      uVar26 = PackedFloatingADD(uVar3,uVar26);
      uVar3 = PackedFloatingMUL(uVar18,uVar27);
      uVar18 = PackedFloatingADD(uVar20,uVar23);
      uVar23 = PackedFloatingMUL(0,uVar8);
      uVar3 = PackedFloatingADD(uVar26,uVar3);
      uVar8 = PackedFloatingMUL(uVar8,0x3f80000000000000);
      uVar28 = PackedFloatingADD(uVar23,uVar18);
      uVar5 = PackedFloatingADD(uVar8,uVar3);
      param_1[2] = uVar28;
      param_1[3] = uVar5;
      uVar7 = (undefined4)(param_1[4] >> 0x20);
      uVar16 = (undefined4)(param_1[5] >> 0x20);
      uVar1 = (undefined4)param_1[4];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[5];
      uVar18 = CONCAT44(uVar1,uVar1);
      uVar23 = PackedFloatingMUL(uVar21,uVar8);
      uVar3 = CONCAT44(uVar7,uVar7);
      uVar26 = PackedFloatingMUL(uVar8,uVar12);
      uVar20 = PackedFloatingMUL(uVar2,uVar3);
      uVar8 = CONCAT44(uVar16,uVar16);
      uVar3 = PackedFloatingMUL(uVar3,uVar11);
      uVar23 = PackedFloatingADD(uVar20,uVar23);
      uVar20 = PackedFloatingMUL(uVar4,uVar18);
      uVar26 = PackedFloatingADD(uVar3,uVar26);
      uVar3 = PackedFloatingMUL(uVar18,uVar27);
      uVar18 = PackedFloatingADD(uVar20,uVar23);
      uVar23 = PackedFloatingMUL(0,uVar8);
      uVar3 = PackedFloatingADD(uVar26,uVar3);
      uVar8 = PackedFloatingMUL(uVar8,0x3f80000000000000);
      uVar28 = PackedFloatingADD(uVar23,uVar18);
      uVar5 = PackedFloatingADD(uVar8,uVar3);
      param_1[4] = uVar28;
      param_1[5] = uVar5;
      uVar7 = (undefined4)(param_1[6] >> 0x20);
      uVar16 = (undefined4)(param_1[7] >> 0x20);
      uVar1 = (undefined4)param_1[6];
      uVar3 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[7];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar26 = PackedFloatingMUL(uVar21,uVar3);
      uVar21 = CONCAT44(uVar7,uVar7);
      uVar3 = PackedFloatingMUL(uVar3,uVar12);
      uVar18 = PackedFloatingMUL(uVar2,uVar21);
      uVar2 = CONCAT44(uVar16,uVar16);
      uVar21 = PackedFloatingMUL(uVar21,uVar11);
      uVar26 = PackedFloatingADD(uVar18,uVar26);
      uVar18 = PackedFloatingMUL(uVar4,uVar8);
      uVar4 = PackedFloatingADD(uVar21,uVar3);
      uVar21 = PackedFloatingMUL(uVar8,uVar27);
      uVar3 = PackedFloatingADD(uVar18,uVar26);
      uVar8 = PackedFloatingMUL(0,uVar2);
      uVar21 = PackedFloatingADD(uVar4,uVar21);
      uVar4 = PackedFloatingMUL(uVar2,0x3f80000000000000);
      uVar11 = PackedFloatingADD(uVar8,uVar3);
      uVar12 = PackedFloatingADD(uVar4,uVar21);
      param_1[6] = uVar11;
      param_1[7] = uVar12;
      uVar12 = PackedFloatingADD(param_1[6],*param_5);
      uVar21 = PackedFloatingADD((ulonglong)(uint)param_1[7],(ulonglong)*(uint *)(param_5 + 1));
      param_1[6] = uVar12;
      *(int *)(param_1 + 7) = (int)uVar21;
    }
  }
  if (param_7 != (undefined8 *)0x0) {
    uVar12 = PackedFloatingADD(param_1[6],*param_7);
    uVar21 = PackedFloatingADD((ulonglong)(uint)param_1[7],(ulonglong)*(uint *)(param_7 + 1));
    param_1[6] = uVar12;
    *(int *)(param_1 + 7) = (int)uVar21;
  }
  FastExitMediaState();
  return;
}



/* FUN_0045c3ea @ 0045c3ea */

void FUN_0045c3ea(undefined8 *param_1,undefined8 param_2,undefined8 param_3)

{
  undefined4 uVar1;
  ulonglong uVar2;
  ulonglong uVar3;
  ulonglong uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined4 uVar9;
  undefined8 uVar8;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined4 uVar12;
  undefined8 uVar13;
  
  PackedFloatingMUL(0x3f0000003f000000,param_3);
  PackedFloatingMUL(0x3f0000003f000000,param_2);
  uVar2 = FUN_004607a0();
  uVar3 = FUN_004607a0();
  uVar4 = FUN_004607a0();
  uVar1 = (undefined4)uVar4;
  uVar9 = (undefined4)(uVar4 >> 0x20);
  uVar7 = CONCAT44((int)uVar3,(int)uVar3);
  uVar12 = (undefined4)(uVar3 >> 0x20);
  uVar10 = CONCAT44(uVar12,uVar12);
  uVar5 = PackedFloatingMUL(CONCAT44(uVar1,uVar1) ^ 0x8000000000000000,uVar10);
  uVar6 = PackedFloatingMUL(CONCAT44(uVar1,uVar1),uVar7);
  uVar8 = PackedFloatingMUL(CONCAT44(uVar9,uVar9),uVar7);
  uVar10 = PackedFloatingMUL(CONCAT44(uVar9,uVar9) ^ 0x80000000,uVar10);
  uVar13 = CONCAT44((int)uVar2,(int)(uVar2 >> 0x20));
  uVar5 = PackedFloatingMUL(uVar5,uVar2);
  uVar7 = PackedFloatingMUL(uVar6,uVar13);
  uVar6 = PackedFloatingMUL(uVar8,uVar13);
  uVar8 = PackedFloatingMUL(uVar10,uVar2);
  uVar5 = PackedFloatingADD(uVar5,uVar6);
  uVar8 = PackedFloatingADD(uVar7,uVar8);
  uVar7 = PackedFloatingADD(uVar5,uVar5);
  uVar6 = PackedFloatingADD(uVar8,uVar8);
  uVar1 = (undefined4)((ulonglong)uVar5 >> 0x20);
  uVar9 = (undefined4)((ulonglong)uVar8 >> 0x20);
  uVar13 = CONCAT44(uVar9,uVar9);
  uVar10 = PackedFloatingMUL(uVar5,uVar7);
  uVar5 = CONCAT44((int)uVar7,(int)uVar6);
  uVar11 = PackedFloatingMUL(uVar7,uVar13);
  uVar8 = PackedFloatingMUL(CONCAT44((int)uVar8,(int)uVar8),uVar5);
  uVar7 = PackedFloatingMUL(uVar5,CONCAT44(uVar1,uVar1));
  uVar5 = PackedFloatingMUL(uVar5,uVar13);
  uVar6 = CONCAT44((int)((ulonglong)uVar8 >> 0x20),(int)((ulonglong)uVar7 >> 0x20));
  param_1[6] = 0;
  uVar13 = PackedFloatingADD(CONCAT44((int)uVar8,(int)uVar8),uVar10);
  uVar8 = PackedFloatingAccumulate(uVar10,uVar10);
  uVar5 = CONCAT44((int)((ulonglong)uVar11 >> 0x20),(int)uVar5);
  uVar2 = PackedFloatingSUBR(uVar8,0x3f8000003f800000);
  uVar10 = PackedFloatingSUBR(uVar13,0x3f8000003f800000);
  uVar8 = PackedFloatingADD(uVar6,uVar5);
  param_1[5] = uVar2 & 0xffffffff;
  uVar3 = PackedFloatingSUB(uVar6,uVar5);
  uVar2 = PackedFloatingADD(uVar7,uVar11);
  uVar5 = PackedFloatingSUB(uVar7,uVar11);
  param_1[3] = uVar2 & 0xffffffff;
  param_1[1] = uVar3 >> 0x20;
  param_1[2] = CONCAT44((int)uVar10,(int)uVar3);
  *param_1 = CONCAT44((int)uVar8,(int)((ulonglong)uVar10 >> 0x20));
  param_1[4] = CONCAT44((int)uVar5,(int)((ulonglong)uVar8 >> 0x20));
  param_1[7] = 0x3f80000000000000;
  FastExitMediaState();
  return;
}



/* FUN_0045cac3 @ 0045cac3 */

void FUN_0045cac3(undefined8 *param_1,ulonglong *param_2)

{
  ulonglong uVar1;
  undefined8 uVar2;
  undefined8 uVar3;
  ulonglong uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined4 uVar9;
  ulonglong local_20;
  uint local_18;
  
  local_20 = *param_2;
  local_18 = (uint)param_2[1];
  FUN_0045e832(&local_20,&local_20);
  uVar1 = FUN_004607a0();
  uVar2 = PackedFloatingSUBR(uVar1,0x3f8000003f800000);
  uVar9 = (undefined4)(uVar1 >> 0x20);
  uVar4 = (ulonglong)local_18;
  uVar5 = PackedFloatingMUL(CONCAT44(local_18,local_18),local_20);
  uVar2 = CONCAT44((int)uVar2,(int)uVar2);
  uVar3 = PackedFloatingMUL(CONCAT44(local_18,(int)(local_20 >> 0x20)),local_20);
  uVar8 = CONCAT44((int)uVar1,(int)uVar1);
  uVar3 = PackedFloatingMUL(uVar3,uVar2);
  uVar5 = PackedFloatingMUL(uVar5,uVar2);
  uVar6 = PackedFloatingMUL(local_20,local_20);
  uVar7 = PackedFloatingMUL(uVar4,uVar4);
  uVar6 = PackedFloatingMUL(uVar6,uVar2);
  uVar2 = PackedFloatingMUL(uVar7,uVar2);
  uVar6 = PackedFloatingADD(uVar6,uVar8);
  uVar1 = PackedFloatingADD(uVar2,uVar8);
  uVar2 = CONCAT44(uVar9,uVar9);
  uVar8 = PackedFloatingMUL(local_20,uVar2);
  uVar2 = PackedFloatingMUL(uVar4,uVar2);
  param_1[6] = 0;
  uVar7 = CONCAT44((int)uVar8,(int)uVar2);
  uVar9 = (undefined4)((ulonglong)uVar8 >> 0x20);
  uVar8 = CONCAT44(uVar9,uVar9);
  param_1[5] = uVar1 & 0xffffffff;
  uVar2 = PackedFloatingSUB(uVar3,uVar7);
  uVar1 = PackedFloatingADD(uVar3,uVar7);
  uVar4 = PackedFloatingSUB(uVar5,uVar8);
  *param_1 = CONCAT44((int)uVar1,(int)uVar6);
  param_1[1] = uVar4 & 0xffffffff;
  uVar8 = PackedFloatingADD(CONCAT44((int)uVar5,(int)uVar5),uVar8);
  param_1[3] = uVar1 >> 0x20;
  param_1[7] = 0x3f80000000000000;
  param_1[4] = CONCAT44((int)((ulonglong)uVar2 >> 0x20),(int)((ulonglong)uVar8 >> 0x20));
  param_1[2] = CONCAT44((int)((ulonglong)uVar6 >> 0x20),(int)uVar2);
  FastExitMediaState();
  return;
}



/* FUN_0045cbdc @ 0045cbdc */

void FUN_0045cbdc(ulonglong *param_1,undefined8 *param_2,undefined8 *param_3,ulonglong *param_4,
                 undefined8 *param_5,undefined8 *param_6,undefined8 *param_7)

{
  undefined4 uVar1;
  undefined8 uVar2;
  undefined8 uVar3;
  undefined8 uVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  undefined8 uVar7;
  undefined8 in_MM2;
  undefined8 uVar8;
  ulonglong uVar9;
  ulonglong uVar10;
  uint uVar11;
  ulonglong in_MM3;
  undefined8 uVar12;
  undefined8 uVar13;
  ulonglong uVar14;
  ulonglong uVar15;
  ulonglong uVar16;
  ulonglong uVar17;
  undefined8 uVar18;
  ulonglong uVar19;
  undefined8 uVar20;
  ulonglong uVar21;
  ulonglong uVar22;
  undefined8 uVar23;
  undefined8 uVar24;
  undefined4 uVar26;
  undefined8 uVar25;
  undefined4 uVar27;
  ulonglong uVar28;
  ulonglong uVar29;
  
  if (param_4 == (ulonglong *)0x0) {
    uVar16 = PackedSwapDWords(in_MM2,0x3f800000);
    *param_1 = 0x3f800000;
    param_1[1] = 0;
    param_1[2] = uVar16;
    param_1[3] = 0;
    param_1[4] = 0;
    param_1[5] = 0x3f800000;
    param_1[6] = 0;
    param_1[7] = uVar16;
  }
  else if (param_3 == (undefined8 *)0x0) {
    in_MM3 = *param_4;
    uVar16 = param_4[1];
    *param_1 = in_MM3 & 0xffffffff;
    param_1[1] = 0;
    param_1[2] = in_MM3 & 0xffffffff00000000;
    param_1[3] = 0;
    param_1[4] = 0;
    param_1[5] = (ulonglong)(uint)uVar16;
    param_1[6] = 0;
    param_1[7] = 0x3f80000000000000;
  }
  else {
    uVar16 = *param_4;
    uVar17 = (ulonglong)(uint)param_4[1];
    uVar28 = uVar16 & 0xffffffff;
    uVar21 = uVar16 & 0xffffffff00000000;
    uVar4 = *param_3;
    uVar18 = param_3[1];
    uVar12 = PackedSwapDWords(uVar16,uVar4);
    uVar2 = PackedFloatingADD(uVar4,uVar4);
    uVar7 = PackedFloatingADD(uVar18,uVar18);
    uVar3 = PackedFloatingMUL(uVar2,uVar4);
    uVar8 = PackedFloatingMUL(uVar4,uVar7);
    uVar13 = PackedFloatingMUL(uVar12,uVar7);
    uVar12 = PackedFloatingMUL(uVar7,uVar18);
    uVar2 = PackedFloatingMUL(CONCAT44((int)((ulonglong)uVar18 >> 0x20),
                                       (int)((ulonglong)uVar4 >> 0x20)),
                              CONCAT44((int)uVar7,(int)uVar2));
    uVar4 = PackedFloatingSUBR(uVar3,0x3f8000003f800000);
    uVar14 = PackedFloatingPosNegAccumulate(uVar13,uVar13);
    uVar18 = PackedFloatingAccumulate(uVar3,uVar3);
    uVar3 = PackedFloatingPosNegAccumulate(uVar2,uVar2);
    uVar9 = PackedFloatingPosNegAccumulate(uVar8,uVar8);
    uVar4 = PackedFloatingSUB(uVar4,CONCAT44((int)uVar12,(int)uVar12));
    uVar22 = PackedSwapDWords(uVar12,uVar9);
    uVar19 = PackedFloatingSUBR(uVar18,0x3f8000003f800000);
    uVar2 = CONCAT44((int)uVar14,(int)uVar22);
    uVar10 = uVar9 & 0xffffffff;
    uVar16 = uVar19 >> 0x20;
    uVar5 = (undefined4)((ulonglong)uVar4 >> 0x20);
    uVar26 = (undefined4)((ulonglong)uVar3 >> 0x20);
    uVar18 = CONCAT44(uVar26,uVar5);
    uVar29 = uVar14 >> 0x20;
    uVar6 = (undefined4)uVar4;
    uVar1 = (undefined4)uVar3;
    uVar4 = CONCAT44(uVar6,uVar1);
    uVar27 = (undefined4)(uVar14 >> 0x20);
    uVar11 = (uint)(uVar19 >> 0x20);
    if (param_2 == (undefined8 *)0x0) {
      *param_1 = CONCAT44(uVar1,uVar5);
      param_1[2] = CONCAT44(uVar6,uVar26);
      param_1[5] = (ulonglong)uVar11;
      param_1[7] = 0x3f80000000000000;
      param_1[4] = CONCAT44(uVar27,(int)uVar9);
      param_1[6] = 0;
      param_1[3] = uVar14 & 0xffffffff;
      param_1[1] = uVar22 & 0xffffffff;
      uVar5 = (undefined4)(*param_1 >> 0x20);
      uVar6 = (undefined4)(param_1[1] >> 0x20);
      uVar1 = (undefined4)*param_1;
      uVar7 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[1];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar13 = PackedFloatingMUL(uVar28,uVar7);
      uVar3 = CONCAT44(uVar5,uVar5);
      uVar12 = PackedFloatingMUL(uVar7,0);
      uVar24 = PackedFloatingMUL(uVar21,uVar3);
      uVar7 = CONCAT44(uVar6,uVar6);
      uVar3 = PackedFloatingMUL(uVar3,0);
      uVar13 = PackedFloatingADD(uVar24,uVar13);
      uVar24 = PackedFloatingMUL(0,uVar8);
      uVar12 = PackedFloatingADD(uVar3,uVar12);
      uVar3 = PackedFloatingMUL(uVar8,uVar17);
      uVar8 = PackedFloatingADD(uVar24,uVar13);
      uVar13 = PackedFloatingMUL(0,uVar7);
      uVar3 = PackedFloatingADD(uVar12,uVar3);
      uVar7 = PackedFloatingMUL(uVar7,0x3f80000000000000);
      uVar9 = PackedFloatingADD(uVar13,uVar8);
      uVar14 = PackedFloatingADD(uVar7,uVar3);
      *param_1 = uVar9;
      param_1[1] = uVar14;
      uVar5 = (undefined4)(param_1[2] >> 0x20);
      uVar6 = (undefined4)(param_1[3] >> 0x20);
      uVar1 = (undefined4)param_1[2];
      uVar7 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[3];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar13 = PackedFloatingMUL(uVar28,uVar7);
      uVar3 = CONCAT44(uVar5,uVar5);
      uVar12 = PackedFloatingMUL(uVar7,0);
      uVar24 = PackedFloatingMUL(uVar21,uVar3);
      uVar7 = CONCAT44(uVar6,uVar6);
      uVar3 = PackedFloatingMUL(uVar3,0);
      uVar13 = PackedFloatingADD(uVar24,uVar13);
      uVar24 = PackedFloatingMUL(0,uVar8);
      uVar12 = PackedFloatingADD(uVar3,uVar12);
      uVar3 = PackedFloatingMUL(uVar8,uVar17);
      uVar8 = PackedFloatingADD(uVar24,uVar13);
      uVar13 = PackedFloatingMUL(0,uVar7);
      uVar3 = PackedFloatingADD(uVar12,uVar3);
      uVar7 = PackedFloatingMUL(uVar7,0x3f80000000000000);
      uVar9 = PackedFloatingADD(uVar13,uVar8);
      uVar14 = PackedFloatingADD(uVar7,uVar3);
      param_1[2] = uVar9;
      param_1[3] = uVar14;
      uVar5 = (undefined4)(param_1[4] >> 0x20);
      uVar6 = (undefined4)(param_1[5] >> 0x20);
      uVar1 = (undefined4)param_1[4];
      uVar7 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[5];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar13 = PackedFloatingMUL(uVar28,uVar7);
      uVar3 = CONCAT44(uVar5,uVar5);
      uVar12 = PackedFloatingMUL(uVar7,0);
      uVar24 = PackedFloatingMUL(uVar21,uVar3);
      uVar7 = CONCAT44(uVar6,uVar6);
      uVar3 = PackedFloatingMUL(uVar3,0);
      uVar13 = PackedFloatingADD(uVar24,uVar13);
      uVar24 = PackedFloatingMUL(0,uVar8);
      uVar12 = PackedFloatingADD(uVar3,uVar12);
      uVar3 = PackedFloatingMUL(uVar8,uVar17);
      uVar8 = PackedFloatingADD(uVar24,uVar13);
      uVar13 = PackedFloatingMUL(0,uVar7);
      uVar3 = PackedFloatingADD(uVar12,uVar3);
      uVar7 = PackedFloatingMUL(uVar7,0x3f80000000000000);
      uVar9 = PackedFloatingADD(uVar13,uVar8);
      uVar14 = PackedFloatingADD(uVar7,uVar3);
      param_1[4] = uVar9;
      param_1[5] = uVar14;
      uVar5 = (undefined4)(param_1[6] >> 0x20);
      uVar6 = (undefined4)(param_1[7] >> 0x20);
      uVar1 = (undefined4)param_1[6];
      uVar7 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[7];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar13 = PackedFloatingMUL(uVar28,uVar7);
      uVar3 = CONCAT44(uVar5,uVar5);
      uVar12 = PackedFloatingMUL(uVar7,0);
      uVar24 = PackedFloatingMUL(uVar21,uVar3);
      uVar7 = CONCAT44(uVar6,uVar6);
      uVar3 = PackedFloatingMUL(uVar3,0);
      uVar13 = PackedFloatingADD(uVar24,uVar13);
      uVar24 = PackedFloatingMUL(0,uVar8);
      uVar12 = PackedFloatingADD(uVar3,uVar12);
      uVar3 = PackedFloatingMUL(uVar8,uVar17);
      uVar8 = PackedFloatingADD(uVar24,uVar13);
      uVar13 = PackedFloatingMUL(0,uVar7);
      uVar3 = PackedFloatingADD(uVar12,uVar3);
      uVar7 = PackedFloatingMUL(uVar7,0x3f80000000000000);
      uVar28 = PackedFloatingADD(uVar13,uVar8);
      uVar14 = PackedFloatingADD(uVar7,uVar3);
      param_1[6] = uVar28;
      param_1[7] = uVar14;
      uVar5 = (undefined4)(*param_1 >> 0x20);
      uVar6 = (undefined4)(param_1[1] >> 0x20);
      uVar1 = (undefined4)*param_1;
      uVar7 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[1];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar13 = PackedFloatingMUL(uVar18,uVar7);
      uVar3 = CONCAT44(uVar5,uVar5);
      uVar12 = PackedFloatingMUL(uVar7,uVar10);
      uVar24 = PackedFloatingMUL(uVar4,uVar3);
      uVar7 = CONCAT44(uVar6,uVar6);
      uVar3 = PackedFloatingMUL(uVar3,uVar29);
      uVar13 = PackedFloatingADD(uVar24,uVar13);
      uVar24 = PackedFloatingMUL(uVar2,uVar8);
      uVar12 = PackedFloatingADD(uVar3,uVar12);
      uVar3 = PackedFloatingMUL(uVar8,uVar16);
      uVar8 = PackedFloatingADD(uVar24,uVar13);
      uVar13 = PackedFloatingMUL(0,uVar7);
      uVar3 = PackedFloatingADD(uVar12,uVar3);
      uVar7 = PackedFloatingMUL(uVar7,0x3f80000000000000);
      uVar28 = PackedFloatingADD(uVar13,uVar8);
      uVar14 = PackedFloatingADD(uVar7,uVar3);
      *param_1 = uVar28;
      param_1[1] = uVar14;
      uVar5 = (undefined4)(param_1[2] >> 0x20);
      uVar6 = (undefined4)(param_1[3] >> 0x20);
      uVar1 = (undefined4)param_1[2];
      uVar7 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[3];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar13 = PackedFloatingMUL(uVar18,uVar7);
      uVar3 = CONCAT44(uVar5,uVar5);
      uVar12 = PackedFloatingMUL(uVar7,uVar10);
      uVar24 = PackedFloatingMUL(uVar4,uVar3);
      uVar7 = CONCAT44(uVar6,uVar6);
      uVar3 = PackedFloatingMUL(uVar3,uVar29);
      uVar13 = PackedFloatingADD(uVar24,uVar13);
      uVar24 = PackedFloatingMUL(uVar2,uVar8);
      uVar12 = PackedFloatingADD(uVar3,uVar12);
      uVar3 = PackedFloatingMUL(uVar8,uVar16);
      uVar8 = PackedFloatingADD(uVar24,uVar13);
      uVar13 = PackedFloatingMUL(0,uVar7);
      uVar3 = PackedFloatingADD(uVar12,uVar3);
      uVar7 = PackedFloatingMUL(uVar7,0x3f80000000000000);
      uVar28 = PackedFloatingADD(uVar13,uVar8);
      uVar14 = PackedFloatingADD(uVar7,uVar3);
      param_1[2] = uVar28;
      param_1[3] = uVar14;
      uVar5 = (undefined4)(param_1[4] >> 0x20);
      uVar6 = (undefined4)(param_1[5] >> 0x20);
      uVar1 = (undefined4)param_1[4];
      uVar7 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[5];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar13 = PackedFloatingMUL(uVar18,uVar7);
      uVar3 = CONCAT44(uVar5,uVar5);
      uVar12 = PackedFloatingMUL(uVar7,uVar10);
      uVar24 = PackedFloatingMUL(uVar4,uVar3);
      uVar7 = CONCAT44(uVar6,uVar6);
      uVar3 = PackedFloatingMUL(uVar3,uVar29);
      uVar13 = PackedFloatingADD(uVar24,uVar13);
      uVar24 = PackedFloatingMUL(uVar2,uVar8);
      uVar12 = PackedFloatingADD(uVar3,uVar12);
      uVar3 = PackedFloatingMUL(uVar8,uVar16);
      uVar8 = PackedFloatingADD(uVar24,uVar13);
      uVar13 = PackedFloatingMUL(0,uVar7);
      uVar3 = PackedFloatingADD(uVar12,uVar3);
      uVar7 = PackedFloatingMUL(uVar7,0x3f80000000000000);
      uVar28 = PackedFloatingADD(uVar13,uVar8);
      uVar14 = PackedFloatingADD(uVar7,uVar3);
      param_1[4] = uVar28;
      param_1[5] = uVar14;
      uVar5 = (undefined4)(param_1[6] >> 0x20);
      uVar6 = (undefined4)(param_1[7] >> 0x20);
      uVar1 = (undefined4)param_1[6];
      uVar3 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[7];
      uVar7 = CONCAT44(uVar1,uVar1);
      uVar12 = PackedFloatingMUL(uVar18,uVar3);
      uVar18 = CONCAT44(uVar5,uVar5);
      uVar3 = PackedFloatingMUL(uVar3,uVar10);
      uVar8 = PackedFloatingMUL(uVar4,uVar18);
      uVar4 = CONCAT44(uVar6,uVar6);
      uVar18 = PackedFloatingMUL(uVar18,uVar29);
      uVar12 = PackedFloatingADD(uVar8,uVar12);
      uVar8 = PackedFloatingMUL(uVar2,uVar7);
      uVar2 = PackedFloatingADD(uVar18,uVar3);
      uVar18 = PackedFloatingMUL(uVar7,uVar16);
      uVar3 = PackedFloatingADD(uVar8,uVar12);
      uVar7 = PackedFloatingMUL(0,uVar4);
      uVar18 = PackedFloatingADD(uVar2,uVar18);
      uVar4 = PackedFloatingMUL(uVar4,0x3f80000000000000);
      uVar16 = PackedFloatingADD(uVar7,uVar3);
      in_MM3 = PackedFloatingADD(uVar4,uVar18);
      param_1[6] = uVar16;
      param_1[7] = in_MM3;
    }
    else {
      uVar12 = CONCAT44(uVar1,uVar5);
      uVar24 = CONCAT44(uVar6,uVar26);
      uVar15 = (ulonglong)uVar11;
      uVar25 = CONCAT44(uVar27,(int)uVar9);
      uVar14 = uVar14 & 0xffffffff;
      uVar22 = uVar22 & 0xffffffff;
      uVar3 = *param_2;
      uVar11 = *(uint *)(param_2 + 1);
      uVar9 = PackedSwapDWords(uVar22,0x3f800000);
      *param_1 = 0x3f800000;
      param_1[1] = 0;
      param_1[2] = uVar9;
      param_1[3] = 0;
      param_1[4] = 0;
      param_1[5] = 0x3f800000;
      uVar19 = PackedFloatingSUB(uVar9,(ulonglong)uVar11);
      uVar9 = PackedFloatingSUB(0,uVar3);
      param_1[7] = uVar19;
      param_1[6] = uVar9;
      uVar5 = (undefined4)(*param_1 >> 0x20);
      uVar6 = (undefined4)(param_1[1] >> 0x20);
      uVar1 = (undefined4)*param_1;
      uVar7 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[1];
      uVar13 = CONCAT44(uVar1,uVar1);
      uVar20 = PackedFloatingMUL(uVar12,uVar7);
      uVar3 = CONCAT44(uVar5,uVar5);
      uVar8 = PackedFloatingMUL(uVar7,uVar22);
      uVar23 = PackedFloatingMUL(uVar24,uVar3);
      uVar7 = CONCAT44(uVar6,uVar6);
      uVar3 = PackedFloatingMUL(uVar3,uVar14);
      uVar20 = PackedFloatingADD(uVar23,uVar20);
      uVar23 = PackedFloatingMUL(uVar25,uVar13);
      uVar8 = PackedFloatingADD(uVar3,uVar8);
      uVar3 = PackedFloatingMUL(uVar13,uVar15);
      uVar13 = PackedFloatingADD(uVar23,uVar20);
      uVar20 = PackedFloatingMUL(0,uVar7);
      uVar3 = PackedFloatingADD(uVar8,uVar3);
      uVar7 = PackedFloatingMUL(uVar7,0x3f80000000000000);
      uVar19 = PackedFloatingADD(uVar20,uVar13);
      uVar9 = PackedFloatingADD(uVar7,uVar3);
      *param_1 = uVar19;
      param_1[1] = uVar9;
      uVar5 = (undefined4)(param_1[2] >> 0x20);
      uVar6 = (undefined4)(param_1[3] >> 0x20);
      uVar1 = (undefined4)param_1[2];
      uVar7 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[3];
      uVar13 = CONCAT44(uVar1,uVar1);
      uVar20 = PackedFloatingMUL(uVar12,uVar7);
      uVar3 = CONCAT44(uVar5,uVar5);
      uVar8 = PackedFloatingMUL(uVar7,uVar22);
      uVar23 = PackedFloatingMUL(uVar24,uVar3);
      uVar7 = CONCAT44(uVar6,uVar6);
      uVar3 = PackedFloatingMUL(uVar3,uVar14);
      uVar20 = PackedFloatingADD(uVar23,uVar20);
      uVar23 = PackedFloatingMUL(uVar25,uVar13);
      uVar8 = PackedFloatingADD(uVar3,uVar8);
      uVar3 = PackedFloatingMUL(uVar13,uVar15);
      uVar13 = PackedFloatingADD(uVar23,uVar20);
      uVar20 = PackedFloatingMUL(0,uVar7);
      uVar3 = PackedFloatingADD(uVar8,uVar3);
      uVar7 = PackedFloatingMUL(uVar7,0x3f80000000000000);
      uVar19 = PackedFloatingADD(uVar20,uVar13);
      uVar9 = PackedFloatingADD(uVar7,uVar3);
      param_1[2] = uVar19;
      param_1[3] = uVar9;
      uVar5 = (undefined4)(param_1[4] >> 0x20);
      uVar6 = (undefined4)(param_1[5] >> 0x20);
      uVar1 = (undefined4)param_1[4];
      uVar7 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[5];
      uVar13 = CONCAT44(uVar1,uVar1);
      uVar20 = PackedFloatingMUL(uVar12,uVar7);
      uVar3 = CONCAT44(uVar5,uVar5);
      uVar8 = PackedFloatingMUL(uVar7,uVar22);
      uVar23 = PackedFloatingMUL(uVar24,uVar3);
      uVar7 = CONCAT44(uVar6,uVar6);
      uVar3 = PackedFloatingMUL(uVar3,uVar14);
      uVar20 = PackedFloatingADD(uVar23,uVar20);
      uVar23 = PackedFloatingMUL(uVar25,uVar13);
      uVar8 = PackedFloatingADD(uVar3,uVar8);
      uVar3 = PackedFloatingMUL(uVar13,uVar15);
      uVar13 = PackedFloatingADD(uVar23,uVar20);
      uVar20 = PackedFloatingMUL(0,uVar7);
      uVar3 = PackedFloatingADD(uVar8,uVar3);
      uVar7 = PackedFloatingMUL(uVar7,0x3f80000000000000);
      uVar19 = PackedFloatingADD(uVar20,uVar13);
      uVar9 = PackedFloatingADD(uVar7,uVar3);
      param_1[4] = uVar19;
      param_1[5] = uVar9;
      uVar5 = (undefined4)(param_1[6] >> 0x20);
      uVar6 = (undefined4)(param_1[7] >> 0x20);
      uVar1 = (undefined4)param_1[6];
      uVar7 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[7];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar13 = PackedFloatingMUL(uVar12,uVar7);
      uVar3 = CONCAT44(uVar5,uVar5);
      uVar12 = PackedFloatingMUL(uVar7,uVar22);
      uVar24 = PackedFloatingMUL(uVar24,uVar3);
      uVar7 = CONCAT44(uVar6,uVar6);
      uVar3 = PackedFloatingMUL(uVar3,uVar14);
      uVar13 = PackedFloatingADD(uVar24,uVar13);
      uVar24 = PackedFloatingMUL(uVar25,uVar8);
      uVar12 = PackedFloatingADD(uVar3,uVar12);
      uVar3 = PackedFloatingMUL(uVar8,uVar15);
      uVar8 = PackedFloatingADD(uVar24,uVar13);
      uVar13 = PackedFloatingMUL(0,uVar7);
      uVar3 = PackedFloatingADD(uVar12,uVar3);
      uVar7 = PackedFloatingMUL(uVar7,0x3f80000000000000);
      uVar9 = PackedFloatingADD(uVar13,uVar8);
      uVar14 = PackedFloatingADD(uVar7,uVar3);
      param_1[6] = uVar9;
      param_1[7] = uVar14;
      uVar5 = (undefined4)(*param_1 >> 0x20);
      uVar6 = (undefined4)(param_1[1] >> 0x20);
      uVar1 = (undefined4)*param_1;
      uVar7 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[1];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar13 = PackedFloatingMUL(uVar28,uVar7);
      uVar3 = CONCAT44(uVar5,uVar5);
      uVar12 = PackedFloatingMUL(uVar7,0);
      uVar24 = PackedFloatingMUL(uVar21,uVar3);
      uVar7 = CONCAT44(uVar6,uVar6);
      uVar3 = PackedFloatingMUL(uVar3,0);
      uVar13 = PackedFloatingADD(uVar24,uVar13);
      uVar24 = PackedFloatingMUL(0,uVar8);
      uVar12 = PackedFloatingADD(uVar3,uVar12);
      uVar3 = PackedFloatingMUL(uVar8,uVar17);
      uVar8 = PackedFloatingADD(uVar24,uVar13);
      uVar13 = PackedFloatingMUL(0,uVar7);
      uVar3 = PackedFloatingADD(uVar12,uVar3);
      uVar7 = PackedFloatingMUL(uVar7,0x3f80000000000000);
      uVar9 = PackedFloatingADD(uVar13,uVar8);
      uVar14 = PackedFloatingADD(uVar7,uVar3);
      *param_1 = uVar9;
      param_1[1] = uVar14;
      uVar5 = (undefined4)(param_1[2] >> 0x20);
      uVar6 = (undefined4)(param_1[3] >> 0x20);
      uVar1 = (undefined4)param_1[2];
      uVar7 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[3];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar13 = PackedFloatingMUL(uVar28,uVar7);
      uVar3 = CONCAT44(uVar5,uVar5);
      uVar12 = PackedFloatingMUL(uVar7,0);
      uVar24 = PackedFloatingMUL(uVar21,uVar3);
      uVar7 = CONCAT44(uVar6,uVar6);
      uVar3 = PackedFloatingMUL(uVar3,0);
      uVar13 = PackedFloatingADD(uVar24,uVar13);
      uVar24 = PackedFloatingMUL(0,uVar8);
      uVar12 = PackedFloatingADD(uVar3,uVar12);
      uVar3 = PackedFloatingMUL(uVar8,uVar17);
      uVar8 = PackedFloatingADD(uVar24,uVar13);
      uVar13 = PackedFloatingMUL(0,uVar7);
      uVar3 = PackedFloatingADD(uVar12,uVar3);
      uVar7 = PackedFloatingMUL(uVar7,0x3f80000000000000);
      uVar9 = PackedFloatingADD(uVar13,uVar8);
      uVar14 = PackedFloatingADD(uVar7,uVar3);
      param_1[2] = uVar9;
      param_1[3] = uVar14;
      uVar5 = (undefined4)(param_1[4] >> 0x20);
      uVar6 = (undefined4)(param_1[5] >> 0x20);
      uVar1 = (undefined4)param_1[4];
      uVar7 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[5];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar13 = PackedFloatingMUL(uVar28,uVar7);
      uVar3 = CONCAT44(uVar5,uVar5);
      uVar12 = PackedFloatingMUL(uVar7,0);
      uVar24 = PackedFloatingMUL(uVar21,uVar3);
      uVar7 = CONCAT44(uVar6,uVar6);
      uVar3 = PackedFloatingMUL(uVar3,0);
      uVar13 = PackedFloatingADD(uVar24,uVar13);
      uVar24 = PackedFloatingMUL(0,uVar8);
      uVar12 = PackedFloatingADD(uVar3,uVar12);
      uVar3 = PackedFloatingMUL(uVar8,uVar17);
      uVar8 = PackedFloatingADD(uVar24,uVar13);
      uVar13 = PackedFloatingMUL(0,uVar7);
      uVar3 = PackedFloatingADD(uVar12,uVar3);
      uVar7 = PackedFloatingMUL(uVar7,0x3f80000000000000);
      uVar9 = PackedFloatingADD(uVar13,uVar8);
      uVar14 = PackedFloatingADD(uVar7,uVar3);
      param_1[4] = uVar9;
      param_1[5] = uVar14;
      uVar5 = (undefined4)(param_1[6] >> 0x20);
      uVar6 = (undefined4)(param_1[7] >> 0x20);
      uVar1 = (undefined4)param_1[6];
      uVar7 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[7];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar13 = PackedFloatingMUL(uVar28,uVar7);
      uVar3 = CONCAT44(uVar5,uVar5);
      uVar12 = PackedFloatingMUL(uVar7,0);
      uVar24 = PackedFloatingMUL(uVar21,uVar3);
      uVar7 = CONCAT44(uVar6,uVar6);
      uVar3 = PackedFloatingMUL(uVar3,0);
      uVar13 = PackedFloatingADD(uVar24,uVar13);
      uVar24 = PackedFloatingMUL(0,uVar8);
      uVar12 = PackedFloatingADD(uVar3,uVar12);
      uVar3 = PackedFloatingMUL(uVar8,uVar17);
      uVar8 = PackedFloatingADD(uVar24,uVar13);
      uVar13 = PackedFloatingMUL(0,uVar7);
      uVar3 = PackedFloatingADD(uVar12,uVar3);
      uVar7 = PackedFloatingMUL(uVar7,0x3f80000000000000);
      uVar28 = PackedFloatingADD(uVar13,uVar8);
      uVar14 = PackedFloatingADD(uVar7,uVar3);
      param_1[6] = uVar28;
      param_1[7] = uVar14;
      uVar5 = (undefined4)(*param_1 >> 0x20);
      uVar6 = (undefined4)(param_1[1] >> 0x20);
      uVar1 = (undefined4)*param_1;
      uVar7 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[1];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar13 = PackedFloatingMUL(uVar18,uVar7);
      uVar3 = CONCAT44(uVar5,uVar5);
      uVar12 = PackedFloatingMUL(uVar7,uVar10);
      uVar24 = PackedFloatingMUL(uVar4,uVar3);
      uVar7 = CONCAT44(uVar6,uVar6);
      uVar3 = PackedFloatingMUL(uVar3,uVar29);
      uVar13 = PackedFloatingADD(uVar24,uVar13);
      uVar24 = PackedFloatingMUL(uVar2,uVar8);
      uVar12 = PackedFloatingADD(uVar3,uVar12);
      uVar3 = PackedFloatingMUL(uVar8,uVar16);
      uVar8 = PackedFloatingADD(uVar24,uVar13);
      uVar13 = PackedFloatingMUL(0,uVar7);
      uVar3 = PackedFloatingADD(uVar12,uVar3);
      uVar7 = PackedFloatingMUL(uVar7,0x3f80000000000000);
      uVar28 = PackedFloatingADD(uVar13,uVar8);
      uVar14 = PackedFloatingADD(uVar7,uVar3);
      *param_1 = uVar28;
      param_1[1] = uVar14;
      uVar5 = (undefined4)(param_1[2] >> 0x20);
      uVar6 = (undefined4)(param_1[3] >> 0x20);
      uVar1 = (undefined4)param_1[2];
      uVar7 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[3];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar13 = PackedFloatingMUL(uVar18,uVar7);
      uVar3 = CONCAT44(uVar5,uVar5);
      uVar12 = PackedFloatingMUL(uVar7,uVar10);
      uVar24 = PackedFloatingMUL(uVar4,uVar3);
      uVar7 = CONCAT44(uVar6,uVar6);
      uVar3 = PackedFloatingMUL(uVar3,uVar29);
      uVar13 = PackedFloatingADD(uVar24,uVar13);
      uVar24 = PackedFloatingMUL(uVar2,uVar8);
      uVar12 = PackedFloatingADD(uVar3,uVar12);
      uVar3 = PackedFloatingMUL(uVar8,uVar16);
      uVar8 = PackedFloatingADD(uVar24,uVar13);
      uVar13 = PackedFloatingMUL(0,uVar7);
      uVar3 = PackedFloatingADD(uVar12,uVar3);
      uVar7 = PackedFloatingMUL(uVar7,0x3f80000000000000);
      uVar28 = PackedFloatingADD(uVar13,uVar8);
      uVar14 = PackedFloatingADD(uVar7,uVar3);
      param_1[2] = uVar28;
      param_1[3] = uVar14;
      uVar5 = (undefined4)(param_1[4] >> 0x20);
      uVar6 = (undefined4)(param_1[5] >> 0x20);
      uVar1 = (undefined4)param_1[4];
      uVar7 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[5];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar13 = PackedFloatingMUL(uVar18,uVar7);
      uVar3 = CONCAT44(uVar5,uVar5);
      uVar12 = PackedFloatingMUL(uVar7,uVar10);
      uVar24 = PackedFloatingMUL(uVar4,uVar3);
      uVar7 = CONCAT44(uVar6,uVar6);
      uVar3 = PackedFloatingMUL(uVar3,uVar29);
      uVar13 = PackedFloatingADD(uVar24,uVar13);
      uVar24 = PackedFloatingMUL(uVar2,uVar8);
      uVar12 = PackedFloatingADD(uVar3,uVar12);
      uVar3 = PackedFloatingMUL(uVar8,uVar16);
      uVar8 = PackedFloatingADD(uVar24,uVar13);
      uVar13 = PackedFloatingMUL(0,uVar7);
      uVar3 = PackedFloatingADD(uVar12,uVar3);
      uVar7 = PackedFloatingMUL(uVar7,0x3f80000000000000);
      uVar28 = PackedFloatingADD(uVar13,uVar8);
      uVar14 = PackedFloatingADD(uVar7,uVar3);
      param_1[4] = uVar28;
      param_1[5] = uVar14;
      uVar5 = (undefined4)(param_1[6] >> 0x20);
      uVar6 = (undefined4)(param_1[7] >> 0x20);
      uVar1 = (undefined4)param_1[6];
      uVar3 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[7];
      uVar7 = CONCAT44(uVar1,uVar1);
      uVar12 = PackedFloatingMUL(uVar18,uVar3);
      uVar18 = CONCAT44(uVar5,uVar5);
      uVar3 = PackedFloatingMUL(uVar3,uVar10);
      uVar8 = PackedFloatingMUL(uVar4,uVar18);
      uVar4 = CONCAT44(uVar6,uVar6);
      uVar18 = PackedFloatingMUL(uVar18,uVar29);
      uVar12 = PackedFloatingADD(uVar8,uVar12);
      uVar8 = PackedFloatingMUL(uVar2,uVar7);
      uVar2 = PackedFloatingADD(uVar18,uVar3);
      uVar18 = PackedFloatingMUL(uVar7,uVar16);
      uVar3 = PackedFloatingADD(uVar8,uVar12);
      uVar7 = PackedFloatingMUL(0,uVar4);
      uVar18 = PackedFloatingADD(uVar2,uVar18);
      uVar4 = PackedFloatingMUL(uVar4,0x3f80000000000000);
      uVar29 = PackedFloatingADD(uVar7,uVar3);
      uVar16 = PackedFloatingADD(uVar4,uVar18);
      param_1[6] = uVar29;
      param_1[7] = uVar16;
      in_MM3 = (ulonglong)(uint)param_1[7];
      uVar16 = PackedFloatingADD(*param_2,param_1[6]);
      uVar4 = PackedFloatingADD((ulonglong)*(uint *)(param_2 + 1),in_MM3);
      param_1[6] = uVar16;
      *(int *)(param_1 + 7) = (int)uVar4;
    }
  }
  if (param_6 != (undefined8 *)0x0) {
    uVar4 = *param_6;
    uVar18 = param_6[1];
    uVar12 = PackedSwapDWords(in_MM3,uVar4);
    uVar2 = PackedFloatingADD(uVar4,uVar4);
    uVar7 = PackedFloatingADD(uVar18,uVar18);
    uVar3 = PackedFloatingMUL(uVar2,uVar4);
    uVar8 = PackedFloatingMUL(uVar4,uVar7);
    uVar13 = PackedFloatingMUL(uVar12,uVar7);
    uVar12 = PackedFloatingMUL(uVar7,uVar18);
    uVar2 = PackedFloatingMUL(CONCAT44((int)((ulonglong)uVar18 >> 0x20),
                                       (int)((ulonglong)uVar4 >> 0x20)),
                              CONCAT44((int)uVar7,(int)uVar2));
    uVar4 = PackedFloatingSUBR(uVar3,0x3f8000003f800000);
    uVar29 = PackedFloatingPosNegAccumulate(uVar13,uVar13);
    uVar18 = PackedFloatingAccumulate(uVar3,uVar3);
    uVar3 = PackedFloatingPosNegAccumulate(uVar2,uVar2);
    uVar14 = PackedFloatingPosNegAccumulate(uVar8,uVar8);
    uVar4 = PackedFloatingSUB(uVar4,CONCAT44((int)uVar12,(int)uVar12));
    uVar2 = PackedSwapDWords(uVar12,uVar14);
    uVar16 = PackedFloatingSUBR(uVar18,0x3f8000003f800000);
    uVar2 = CONCAT44((int)uVar29,(int)uVar2);
    uVar14 = uVar14 & 0xffffffff;
    uVar16 = uVar16 >> 0x20;
    uVar18 = CONCAT44((int)((ulonglong)uVar3 >> 0x20),(int)((ulonglong)uVar4 >> 0x20));
    uVar29 = uVar29 >> 0x20;
    uVar4 = CONCAT44((int)uVar4,(int)uVar3);
    if (param_5 == (undefined8 *)0x0) {
      uVar5 = (undefined4)(*param_1 >> 0x20);
      uVar6 = (undefined4)(param_1[1] >> 0x20);
      uVar1 = (undefined4)*param_1;
      uVar7 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[1];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar13 = PackedFloatingMUL(uVar18,uVar7);
      uVar3 = CONCAT44(uVar5,uVar5);
      uVar12 = PackedFloatingMUL(uVar7,uVar14);
      uVar24 = PackedFloatingMUL(uVar4,uVar3);
      uVar7 = CONCAT44(uVar6,uVar6);
      uVar3 = PackedFloatingMUL(uVar3,uVar29);
      uVar13 = PackedFloatingADD(uVar24,uVar13);
      uVar24 = PackedFloatingMUL(uVar2,uVar8);
      uVar12 = PackedFloatingADD(uVar3,uVar12);
      uVar3 = PackedFloatingMUL(uVar8,uVar16);
      uVar8 = PackedFloatingADD(uVar24,uVar13);
      uVar13 = PackedFloatingMUL(0,uVar7);
      uVar3 = PackedFloatingADD(uVar12,uVar3);
      uVar7 = PackedFloatingMUL(uVar7,0x3f80000000000000);
      uVar9 = PackedFloatingADD(uVar13,uVar8);
      uVar28 = PackedFloatingADD(uVar7,uVar3);
      *param_1 = uVar9;
      param_1[1] = uVar28;
      uVar5 = (undefined4)(param_1[2] >> 0x20);
      uVar6 = (undefined4)(param_1[3] >> 0x20);
      uVar1 = (undefined4)param_1[2];
      uVar7 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[3];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar13 = PackedFloatingMUL(uVar18,uVar7);
      uVar3 = CONCAT44(uVar5,uVar5);
      uVar12 = PackedFloatingMUL(uVar7,uVar14);
      uVar24 = PackedFloatingMUL(uVar4,uVar3);
      uVar7 = CONCAT44(uVar6,uVar6);
      uVar3 = PackedFloatingMUL(uVar3,uVar29);
      uVar13 = PackedFloatingADD(uVar24,uVar13);
      uVar24 = PackedFloatingMUL(uVar2,uVar8);
      uVar12 = PackedFloatingADD(uVar3,uVar12);
      uVar3 = PackedFloatingMUL(uVar8,uVar16);
      uVar8 = PackedFloatingADD(uVar24,uVar13);
      uVar13 = PackedFloatingMUL(0,uVar7);
      uVar3 = PackedFloatingADD(uVar12,uVar3);
      uVar7 = PackedFloatingMUL(uVar7,0x3f80000000000000);
      uVar9 = PackedFloatingADD(uVar13,uVar8);
      uVar28 = PackedFloatingADD(uVar7,uVar3);
      param_1[2] = uVar9;
      param_1[3] = uVar28;
      uVar5 = (undefined4)(param_1[4] >> 0x20);
      uVar6 = (undefined4)(param_1[5] >> 0x20);
      uVar1 = (undefined4)param_1[4];
      uVar7 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[5];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar13 = PackedFloatingMUL(uVar18,uVar7);
      uVar3 = CONCAT44(uVar5,uVar5);
      uVar12 = PackedFloatingMUL(uVar7,uVar14);
      uVar24 = PackedFloatingMUL(uVar4,uVar3);
      uVar7 = CONCAT44(uVar6,uVar6);
      uVar3 = PackedFloatingMUL(uVar3,uVar29);
      uVar13 = PackedFloatingADD(uVar24,uVar13);
      uVar24 = PackedFloatingMUL(uVar2,uVar8);
      uVar12 = PackedFloatingADD(uVar3,uVar12);
      uVar3 = PackedFloatingMUL(uVar8,uVar16);
      uVar8 = PackedFloatingADD(uVar24,uVar13);
      uVar13 = PackedFloatingMUL(0,uVar7);
      uVar3 = PackedFloatingADD(uVar12,uVar3);
      uVar7 = PackedFloatingMUL(uVar7,0x3f80000000000000);
      uVar9 = PackedFloatingADD(uVar13,uVar8);
      uVar28 = PackedFloatingADD(uVar7,uVar3);
      param_1[4] = uVar9;
      param_1[5] = uVar28;
      uVar5 = (undefined4)(param_1[6] >> 0x20);
      uVar6 = (undefined4)(param_1[7] >> 0x20);
      uVar1 = (undefined4)param_1[6];
      uVar3 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[7];
      uVar7 = CONCAT44(uVar1,uVar1);
      uVar12 = PackedFloatingMUL(uVar18,uVar3);
      uVar18 = CONCAT44(uVar5,uVar5);
      uVar3 = PackedFloatingMUL(uVar3,uVar14);
      uVar8 = PackedFloatingMUL(uVar4,uVar18);
      uVar4 = CONCAT44(uVar6,uVar6);
      uVar18 = PackedFloatingMUL(uVar18,uVar29);
      uVar12 = PackedFloatingADD(uVar8,uVar12);
      uVar8 = PackedFloatingMUL(uVar2,uVar7);
      uVar2 = PackedFloatingADD(uVar18,uVar3);
      uVar18 = PackedFloatingMUL(uVar7,uVar16);
      uVar3 = PackedFloatingADD(uVar8,uVar12);
      uVar7 = PackedFloatingMUL(0,uVar4);
      uVar18 = PackedFloatingADD(uVar2,uVar18);
      uVar4 = PackedFloatingMUL(uVar4,0x3f80000000000000);
      uVar29 = PackedFloatingADD(uVar7,uVar3);
      uVar16 = PackedFloatingADD(uVar4,uVar18);
      param_1[6] = uVar29;
      param_1[7] = uVar16;
    }
    else {
      uVar28 = PackedFloatingSUB(param_1[6],*param_5);
      uVar3 = PackedFloatingSUB((ulonglong)(uint)param_1[7],(ulonglong)*(uint *)(param_5 + 1));
      param_1[6] = uVar28;
      *(int *)(param_1 + 7) = (int)uVar3;
      uVar5 = (undefined4)(*param_1 >> 0x20);
      uVar6 = (undefined4)(param_1[1] >> 0x20);
      uVar1 = (undefined4)*param_1;
      uVar7 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[1];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar13 = PackedFloatingMUL(uVar18,uVar7);
      uVar3 = CONCAT44(uVar5,uVar5);
      uVar12 = PackedFloatingMUL(uVar7,uVar14);
      uVar24 = PackedFloatingMUL(uVar4,uVar3);
      uVar7 = CONCAT44(uVar6,uVar6);
      uVar3 = PackedFloatingMUL(uVar3,uVar29);
      uVar13 = PackedFloatingADD(uVar24,uVar13);
      uVar24 = PackedFloatingMUL(uVar2,uVar8);
      uVar12 = PackedFloatingADD(uVar3,uVar12);
      uVar3 = PackedFloatingMUL(uVar8,uVar16);
      uVar8 = PackedFloatingADD(uVar24,uVar13);
      uVar13 = PackedFloatingMUL(0,uVar7);
      uVar3 = PackedFloatingADD(uVar12,uVar3);
      uVar7 = PackedFloatingMUL(uVar7,0x3f80000000000000);
      uVar9 = PackedFloatingADD(uVar13,uVar8);
      uVar28 = PackedFloatingADD(uVar7,uVar3);
      *param_1 = uVar9;
      param_1[1] = uVar28;
      uVar5 = (undefined4)(param_1[2] >> 0x20);
      uVar6 = (undefined4)(param_1[3] >> 0x20);
      uVar1 = (undefined4)param_1[2];
      uVar7 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[3];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar13 = PackedFloatingMUL(uVar18,uVar7);
      uVar3 = CONCAT44(uVar5,uVar5);
      uVar12 = PackedFloatingMUL(uVar7,uVar14);
      uVar24 = PackedFloatingMUL(uVar4,uVar3);
      uVar7 = CONCAT44(uVar6,uVar6);
      uVar3 = PackedFloatingMUL(uVar3,uVar29);
      uVar13 = PackedFloatingADD(uVar24,uVar13);
      uVar24 = PackedFloatingMUL(uVar2,uVar8);
      uVar12 = PackedFloatingADD(uVar3,uVar12);
      uVar3 = PackedFloatingMUL(uVar8,uVar16);
      uVar8 = PackedFloatingADD(uVar24,uVar13);
      uVar13 = PackedFloatingMUL(0,uVar7);
      uVar3 = PackedFloatingADD(uVar12,uVar3);
      uVar7 = PackedFloatingMUL(uVar7,0x3f80000000000000);
      uVar9 = PackedFloatingADD(uVar13,uVar8);
      uVar28 = PackedFloatingADD(uVar7,uVar3);
      param_1[2] = uVar9;
      param_1[3] = uVar28;
      uVar5 = (undefined4)(param_1[4] >> 0x20);
      uVar6 = (undefined4)(param_1[5] >> 0x20);
      uVar1 = (undefined4)param_1[4];
      uVar7 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[5];
      uVar8 = CONCAT44(uVar1,uVar1);
      uVar13 = PackedFloatingMUL(uVar18,uVar7);
      uVar3 = CONCAT44(uVar5,uVar5);
      uVar12 = PackedFloatingMUL(uVar7,uVar14);
      uVar24 = PackedFloatingMUL(uVar4,uVar3);
      uVar7 = CONCAT44(uVar6,uVar6);
      uVar3 = PackedFloatingMUL(uVar3,uVar29);
      uVar13 = PackedFloatingADD(uVar24,uVar13);
      uVar24 = PackedFloatingMUL(uVar2,uVar8);
      uVar12 = PackedFloatingADD(uVar3,uVar12);
      uVar3 = PackedFloatingMUL(uVar8,uVar16);
      uVar8 = PackedFloatingADD(uVar24,uVar13);
      uVar13 = PackedFloatingMUL(0,uVar7);
      uVar3 = PackedFloatingADD(uVar12,uVar3);
      uVar7 = PackedFloatingMUL(uVar7,0x3f80000000000000);
      uVar9 = PackedFloatingADD(uVar13,uVar8);
      uVar28 = PackedFloatingADD(uVar7,uVar3);
      param_1[4] = uVar9;
      param_1[5] = uVar28;
      uVar5 = (undefined4)(param_1[6] >> 0x20);
      uVar6 = (undefined4)(param_1[7] >> 0x20);
      uVar1 = (undefined4)param_1[6];
      uVar3 = CONCAT44(uVar1,uVar1);
      uVar1 = (undefined4)param_1[7];
      uVar7 = CONCAT44(uVar1,uVar1);
      uVar12 = PackedFloatingMUL(uVar18,uVar3);
      uVar18 = CONCAT44(uVar5,uVar5);
      uVar3 = PackedFloatingMUL(uVar3,uVar14);
      uVar8 = PackedFloatingMUL(uVar4,uVar18);
      uVar4 = CONCAT44(uVar6,uVar6);
      uVar18 = PackedFloatingMUL(uVar18,uVar29);
      uVar12 = PackedFloatingADD(uVar8,uVar12);
      uVar8 = PackedFloatingMUL(uVar2,uVar7);
      uVar2 = PackedFloatingADD(uVar18,uVar3);
      uVar18 = PackedFloatingMUL(uVar7,uVar16);
      uVar3 = PackedFloatingADD(uVar8,uVar12);
      uVar7 = PackedFloatingMUL(0,uVar4);
      uVar18 = PackedFloatingADD(uVar2,uVar18);
      uVar4 = PackedFloatingMUL(uVar4,0x3f80000000000000);
      uVar29 = PackedFloatingADD(uVar7,uVar3);
      uVar16 = PackedFloatingADD(uVar4,uVar18);
      param_1[6] = uVar29;
      param_1[7] = uVar16;
      uVar16 = PackedFloatingADD(param_1[6],*param_5);
      uVar4 = PackedFloatingADD((ulonglong)(uint)param_1[7],(ulonglong)*(uint *)(param_5 + 1));
      param_1[6] = uVar16;
      *(int *)(param_1 + 7) = (int)uVar4;
    }
  }
  if (param_7 != (undefined8 *)0x0) {
    uVar16 = PackedFloatingADD(param_1[6],*param_7);
    uVar4 = PackedFloatingADD((ulonglong)(uint)param_1[7],(ulonglong)*(uint *)(param_7 + 1));
    param_1[6] = uVar16;
    *(int *)(param_1 + 7) = (int)uVar4;
  }
  FastExitMediaState();
  return;
}



/* FUN_0045dd30 @ 0045dd30 */

void FUN_0045dd30(undefined8 *param_1,undefined4 *param_2,undefined8 *param_3)

{
  undefined8 uVar1;
  undefined8 uVar2;
  undefined8 uVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  undefined8 in_MM4;
  undefined8 uVar8;
  undefined4 uVar10;
  undefined8 uVar9;
  undefined8 in_MM5;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 in_MM6;
  undefined8 uVar14;
  undefined8 uVar15;
  undefined8 uVar16;
  undefined8 in_MM7;
  undefined8 uVar17;
  undefined4 uStack_2c;
  
  uVar2 = param_3[2];
  uVar3 = param_3[4];
  uVar11 = PackedSwapDWords(in_MM5,uVar2);
  uVar8 = PackedSwapDWords(in_MM4,uVar3);
  uVar1 = *param_3;
  uVar14 = PackedSwapDWords(in_MM6,param_3[6]);
  uVar17 = PackedSwapDWords(in_MM7,uVar3);
  uVar11 = PackedFloatingMUL(uVar11,uVar1);
  uVar8 = PackedFloatingMUL(uVar8,uVar1);
  uVar14 = PackedFloatingMUL(uVar14,uVar1);
  uVar1 = PackedSwapDWords(uVar1,param_3[6]);
  uVar17 = PackedFloatingMUL(uVar17,uVar2);
  uVar12 = PackedFloatingNegAccumulate(uVar11,uVar8);
  uVar2 = PackedFloatingMUL(uVar2,uVar1);
  uVar3 = PackedFloatingMUL(uVar3,uVar1);
  uVar17 = PackedFloatingNegAccumulate(uVar14,uVar17);
  uVar1 = PackedFloatingNegAccumulate(uVar2,uVar3);
  uVar2 = param_3[7];
  uVar3 = param_3[5];
  uVar4 = (undefined4)((ulonglong)uVar17 >> 0x20);
  uVar10 = (undefined4)((ulonglong)uVar1 >> 0x20);
  uVar8 = PackedFloatingMUL(CONCAT44(uVar4,uVar4),uVar2);
  uVar6 = (undefined4)uVar1;
  uVar1 = PackedFloatingMUL(CONCAT44(uVar10,uVar10),param_3[3]);
  uVar11 = PackedFloatingMUL(CONCAT44(uVar6,uVar6),uVar3);
  uVar1 = PackedFloatingADD(uVar8,uVar1);
  uVar14 = PackedFloatingSUB(uVar1,uVar11);
  uVar7 = (undefined4)uVar17;
  uVar5 = (undefined4)((ulonglong)uVar12 >> 0x20);
  uVar8 = PackedFloatingMUL(CONCAT44(uVar10,uVar10),param_3[1]);
  uVar1 = PackedFloatingMUL(CONCAT44(uVar5,uVar5),uVar2);
  uVar9 = PackedFloatingMUL(CONCAT44(uVar7,uVar7),uVar3);
  uVar1 = PackedFloatingSUB(uVar1,uVar9);
  uVar17 = PackedFloatingADD(uVar1,uVar8);
  uVar8 = CONCAT44((int)uVar12,(int)uVar12);
  uVar1 = PackedFloatingMUL(CONCAT44(uVar6,uVar6),param_3[1]);
  uVar2 = PackedFloatingMUL(uVar2,uVar8);
  uVar11 = PackedFloatingMUL(CONCAT44(uVar7,uVar7),param_3[3]);
  uVar2 = PackedFloatingADD(uVar2,uVar1);
  uVar11 = PackedFloatingSUB(uVar2,uVar11);
  uVar1 = PackedFloatingMUL(uVar8,uVar3);
  uVar13 = PackedFloatingMUL(CONCAT44(uVar5,uVar5),param_3[3]);
  uVar2 = param_3[1];
  uVar15 = PackedFloatingMUL(CONCAT44(uVar4,uVar4),param_3[1]);
  uVar1 = PackedFloatingSUB(uVar1,uVar13);
  uVar12 = PackedFloatingADD(uVar1,uVar15);
  uVar1 = param_3[3];
  uVar8 = param_3[5];
  uVar13 = PackedSwapDWords(uVar13,uVar1);
  uVar9 = PackedSwapDWords(uVar9,uVar8);
  uVar13 = PackedFloatingMUL(uVar13,uVar2);
  uVar15 = PackedSwapDWords(uVar15,param_3[7]);
  uVar9 = PackedFloatingMUL(uVar9,uVar2);
  uVar3 = PackedSwapDWords(uVar3,uVar8);
  uVar16 = PackedFloatingMUL(uVar15,uVar2);
  uVar2 = PackedSwapDWords(uVar2,param_3[7]);
  uVar15 = PackedFloatingNegAccumulate(uVar13,uVar9);
  uVar9 = PackedFloatingMUL(uVar3,uVar1);
  uVar3 = PackedFloatingMUL(uVar1,uVar2);
  uVar2 = PackedFloatingMUL(uVar8,uVar2);
  uVar13 = PackedFloatingNegAccumulate(uVar16,uVar9);
  uVar1 = PackedFloatingNegAccumulate(uVar3,uVar2);
  uVar2 = param_3[6];
  uVar3 = param_3[4];
  uVar10 = (undefined4)((ulonglong)uVar1 >> 0x20);
  uVar6 = (undefined4)uVar1;
  uVar4 = (undefined4)((ulonglong)uVar13 >> 0x20);
  uVar9 = PackedFloatingMUL(CONCAT44(uVar10,uVar10),param_3[2]);
  uVar1 = PackedFloatingMUL(CONCAT44(uVar4,uVar4),uVar2);
  uVar8 = PackedFloatingMUL(CONCAT44(uVar6,uVar6),uVar3);
  uVar1 = PackedFloatingADD(uVar1,uVar9);
  uVar9 = PackedFloatingSUB(uVar1,uVar8);
  uVar7 = (undefined4)uVar13;
  uVar5 = (undefined4)((ulonglong)uVar15 >> 0x20);
  uVar8 = PackedFloatingMUL(CONCAT44(uVar10,uVar10),*param_3);
  uVar1 = PackedFloatingMUL(CONCAT44(uVar5,uVar5),uVar2);
  uVar13 = PackedFloatingMUL(CONCAT44(uVar7,uVar7),uVar3);
  uVar1 = PackedFloatingSUB(uVar1,uVar13);
  uVar13 = PackedFloatingADD(uVar1,uVar8);
  uVar15 = CONCAT44((int)uVar15,(int)uVar15);
  uVar8 = PackedFloatingMUL(CONCAT44(uVar6,uVar6),*param_3);
  uVar1 = PackedFloatingMUL(uVar2,uVar15);
  uVar16 = PackedFloatingMUL(CONCAT44(uVar7,uVar7),param_3[2]);
  uVar1 = PackedFloatingADD(uVar1,uVar8);
  uVar1 = PackedFloatingSUB(uVar1,uVar16);
  uVar8 = PackedFloatingMUL(uVar15,uVar3);
  uVar15 = PackedFloatingMUL(CONCAT44(uVar5,uVar5),param_3[2]);
  uVar16 = PackedFloatingMUL(CONCAT44(uVar4,uVar4),*param_3);
  uVar8 = PackedFloatingSUB(uVar8,uVar15);
  uVar15 = PackedFloatingADD(uVar8,uVar16);
  uStack_2c = (undefined4)((ulonglong)uVar13 >> 0x20);
  uVar8 = CONCAT44(uStack_2c,(int)((ulonglong)uVar9 >> 0x20));
  uVar2 = PackedFloatingMUL(CONCAT44((int)((ulonglong)uVar15 >> 0x20),
                                     (int)((ulonglong)uVar1 >> 0x20)),
                            CONCAT44((int)uVar2,(int)uVar3));
  uVar3 = PackedFloatingMUL(CONCAT44(*(undefined4 *)(param_3 + 2),(int)*param_3),uVar8);
  uVar2 = PackedFloatingNegAccumulate(uVar2,uVar3);
  uVar2 = PackedFloatingAccumulate(uVar2,uVar2);
  uVar4 = (undefined4)uVar2;
  if (param_2 != (undefined4 *)0x0) {
    *param_2 = uVar4;
  }
  uVar3 = FloatingReciprocalAprox(uVar8,uVar2);
  uVar8 = PackedFloatingCompareEQ(0,uVar2);
  uVar2 = PackedFloatingReciprocalIter1(CONCAT44(uVar4,uVar4),uVar3);
  uVar2 = PackedFloatingReciprocalIter2(uVar2,uVar3);
  uVar2 = PackedFloatingMUL(uVar2,0xbf8000003f800000);
  uVar3 = PackedSwapDWords(uVar3,uVar2);
  if ((int)uVar8 == 0) {
    uVar8 = PackedFloatingMUL(uVar9,uVar3);
    uVar9 = PackedFloatingMUL(uVar13,uVar2);
    uVar14 = PackedFloatingMUL(uVar14,uVar3);
    uVar17 = PackedFloatingMUL(uVar17,uVar2);
    *param_1 = CONCAT44((int)((ulonglong)uVar9 >> 0x20),(int)((ulonglong)uVar8 >> 0x20));
    param_1[2] = CONCAT44((int)uVar9,(int)uVar8);
    param_1[4] = CONCAT44((int)((ulonglong)uVar17 >> 0x20),(int)((ulonglong)uVar14 >> 0x20));
    param_1[6] = CONCAT44((int)uVar17,(int)uVar14);
    uVar1 = PackedFloatingMUL(uVar1,uVar3);
    uVar8 = PackedFloatingMUL(uVar15,uVar2);
    uVar3 = PackedFloatingMUL(uVar11,uVar3);
    uVar2 = PackedFloatingMUL(uVar12,uVar2);
    param_1[1] = CONCAT44((int)((ulonglong)uVar8 >> 0x20),(int)((ulonglong)uVar1 >> 0x20));
    param_1[3] = CONCAT44((int)uVar8,(int)uVar1);
    param_1[5] = CONCAT44((int)((ulonglong)uVar2 >> 0x20),(int)((ulonglong)uVar3 >> 0x20));
    param_1[7] = CONCAT44((int)uVar2,(int)uVar3);
  }
  FastExitMediaState();
  return;
}



/* FUN_0045e40a @ 0045e40a */

undefined8 * FUN_0045e40a(undefined8 *param_1,undefined4 *param_2,undefined8 *param_3)

{
  undefined8 *puVar1;
  undefined4 uVar2;
  undefined4 uVar4;
  undefined8 uVar3;
  undefined4 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined4 uVar8;
  undefined4 uVar11;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined4 uVar12;
  undefined8 uVar13;
  undefined8 uVar14;
  undefined8 uVar15;
  undefined4 uVar16;
  undefined8 uVar17;
  undefined8 uVar18;
  undefined8 uVar19;
  undefined4 uVar21;
  undefined8 uVar20;
  undefined4 uStack_34;
  
  uVar11 = (undefined4)((ulonglong)*param_3 >> 0x20);
  uVar2 = (undefined4)param_3[4];
  uVar16 = (undefined4)param_3[2];
  uVar12 = (undefined4)*param_3;
  uVar21 = (undefined4)((ulonglong)param_3[2] >> 0x20);
  uVar4 = (undefined4)((ulonglong)param_3[4] >> 0x20);
  uVar9 = PackedFloatingMUL(CONCAT44(uVar11,uVar11),CONCAT44(uVar2,uVar16));
  uVar13 = PackedFloatingMUL(CONCAT44(uVar12,uVar12),CONCAT44(uVar4,uVar21));
  uVar14 = PackedFloatingSUB(uVar13,uVar9);
  uVar5 = (undefined4)((ulonglong)param_3[6] >> 0x20);
  uVar8 = (undefined4)param_3[6];
  uVar17 = PackedFloatingMUL(CONCAT44(uVar4,uVar5),CONCAT44(uVar16,uVar12));
  uVar20 = PackedFloatingMUL(CONCAT44(uVar21,uVar11),CONCAT44(uVar2,uVar8));
  uVar9 = PackedFloatingMUL(CONCAT44(uVar2,uVar16),CONCAT44(uVar5,uVar5));
  uVar13 = PackedFloatingMUL(CONCAT44(uVar4,uVar21),CONCAT44(uVar8,uVar8));
  uVar18 = PackedFloatingSUB(uVar17,uVar20);
  uVar17 = PackedFloatingSUBR(uVar13,uVar9);
  uVar9 = param_3[7];
  uVar13 = param_3[5];
  uVar2 = (undefined4)((ulonglong)uVar18 >> 0x20);
  uVar11 = (undefined4)((ulonglong)uVar17 >> 0x20);
  uVar20 = PackedFloatingMUL(CONCAT44(uVar2,uVar2),uVar9);
  uVar5 = (undefined4)uVar17;
  uVar17 = PackedFloatingMUL(CONCAT44(uVar11,uVar11),param_3[3]);
  uVar6 = PackedFloatingMUL(CONCAT44(uVar5,uVar5),uVar13);
  uVar17 = PackedFloatingADD(uVar20,uVar17);
  uVar3 = PackedFloatingSUB(uVar17,uVar6);
  uVar8 = (undefined4)uVar18;
  uVar4 = (undefined4)((ulonglong)uVar14 >> 0x20);
  uVar20 = PackedFloatingMUL(CONCAT44(uVar11,uVar11),param_3[1]);
  uVar17 = PackedFloatingMUL(CONCAT44(uVar4,uVar4),uVar9);
  uVar6 = PackedFloatingMUL(CONCAT44(uVar8,uVar8),uVar13);
  uVar17 = PackedFloatingSUB(uVar17,uVar6);
  uVar18 = PackedFloatingADD(uVar17,uVar20);
  uVar20 = CONCAT44((int)uVar14,(int)uVar14);
  uVar17 = PackedFloatingMUL(CONCAT44(uVar5,uVar5),param_3[1]);
  uVar9 = PackedFloatingMUL(uVar9,uVar20);
  uVar6 = PackedFloatingMUL(CONCAT44(uVar8,uVar8),param_3[3]);
  uVar9 = PackedFloatingADD(uVar9,uVar17);
  uVar17 = PackedFloatingSUB(uVar9,uVar6);
  uVar9 = PackedFloatingMUL(uVar20,uVar13);
  uVar13 = PackedFloatingMUL(CONCAT44(uVar4,uVar4),param_3[3]);
  uVar20 = PackedFloatingMUL(CONCAT44(uVar2,uVar2),param_3[1]);
  uVar9 = PackedFloatingSUB(uVar9,uVar13);
  uVar14 = PackedFloatingADD(uVar9,uVar20);
  uVar11 = (undefined4)((ulonglong)param_3[1] >> 0x20);
  uVar2 = (undefined4)param_3[5];
  uVar16 = (undefined4)param_3[3];
  uVar12 = (undefined4)param_3[1];
  uVar21 = (undefined4)((ulonglong)param_3[3] >> 0x20);
  uVar4 = (undefined4)((ulonglong)param_3[5] >> 0x20);
  uVar9 = PackedFloatingMUL(CONCAT44(uVar11,uVar11),CONCAT44(uVar2,uVar16));
  uVar13 = PackedFloatingMUL(CONCAT44(uVar12,uVar12),CONCAT44(uVar4,uVar21));
  uVar15 = PackedFloatingSUB(uVar13,uVar9);
  uVar5 = (undefined4)((ulonglong)param_3[7] >> 0x20);
  uVar8 = (undefined4)param_3[7];
  uVar20 = PackedFloatingMUL(CONCAT44(uVar4,uVar5),CONCAT44(uVar16,uVar12));
  uVar6 = PackedFloatingMUL(CONCAT44(uVar21,uVar11),CONCAT44(uVar2,uVar8));
  uVar9 = PackedFloatingMUL(CONCAT44(uVar2,uVar16),CONCAT44(uVar5,uVar5));
  uVar13 = PackedFloatingMUL(CONCAT44(uVar4,uVar21),CONCAT44(uVar8,uVar8));
  uVar19 = PackedFloatingSUB(uVar20,uVar6);
  uVar20 = PackedFloatingSUBR(uVar13,uVar9);
  uVar9 = param_3[6];
  uVar13 = param_3[4];
  uVar11 = (undefined4)((ulonglong)uVar20 >> 0x20);
  uVar5 = (undefined4)uVar20;
  uVar2 = (undefined4)((ulonglong)uVar19 >> 0x20);
  uVar10 = PackedFloatingMUL(CONCAT44(uVar11,uVar11),param_3[2]);
  uVar20 = PackedFloatingMUL(CONCAT44(uVar2,uVar2),uVar9);
  uVar6 = PackedFloatingMUL(CONCAT44(uVar5,uVar5),uVar13);
  uVar20 = PackedFloatingADD(uVar20,uVar10);
  uVar10 = PackedFloatingSUB(uVar20,uVar6);
  uVar8 = (undefined4)uVar19;
  uVar4 = (undefined4)((ulonglong)uVar15 >> 0x20);
  uVar6 = PackedFloatingMUL(CONCAT44(uVar11,uVar11),*param_3);
  uVar20 = PackedFloatingMUL(CONCAT44(uVar4,uVar4),uVar9);
  uVar19 = PackedFloatingMUL(CONCAT44(uVar8,uVar8),uVar13);
  uVar20 = PackedFloatingSUB(uVar20,uVar19);
  uVar19 = PackedFloatingADD(uVar20,uVar6);
  uVar15 = CONCAT44((int)uVar15,(int)uVar15);
  uVar6 = PackedFloatingMUL(CONCAT44(uVar5,uVar5),*param_3);
  uVar20 = PackedFloatingMUL(uVar9,uVar15);
  uVar7 = PackedFloatingMUL(CONCAT44(uVar8,uVar8),param_3[2]);
  uVar20 = PackedFloatingADD(uVar20,uVar6);
  uVar20 = PackedFloatingSUB(uVar20,uVar7);
  uVar6 = PackedFloatingMUL(uVar15,uVar13);
  uVar15 = PackedFloatingMUL(CONCAT44(uVar4,uVar4),param_3[2]);
  uVar7 = PackedFloatingMUL(CONCAT44(uVar2,uVar2),*param_3);
  uVar6 = PackedFloatingSUB(uVar6,uVar15);
  uVar6 = PackedFloatingADD(uVar6,uVar7);
  uVar9 = PackedFloatingMUL(CONCAT44((int)uVar9,(int)uVar13),0xbf8000003f800000);
  uStack_34 = (undefined4)((ulonglong)uVar19 >> 0x20);
  uVar13 = CONCAT44(uStack_34,(int)((ulonglong)uVar10 >> 0x20));
  uVar15 = PackedFloatingMUL(CONCAT44(*(undefined4 *)(param_3 + 2),(int)*param_3),0xbf8000003f800000
                            );
  uVar9 = PackedFloatingMUL(CONCAT44((int)((ulonglong)uVar6 >> 0x20),
                                     (int)((ulonglong)uVar20 >> 0x20)),uVar9);
  uVar15 = PackedFloatingMUL(uVar15,uVar13);
  uVar9 = PackedFloatingADD(uVar9,uVar15);
  uVar9 = PackedFloatingAccumulate(uVar9,uVar9);
  uVar2 = (undefined4)uVar9;
  if (param_2 != (undefined4 *)0x0) {
    *param_2 = uVar2;
  }
  uVar13 = FloatingReciprocalAprox(uVar13,uVar9);
  uVar15 = PackedFloatingCompareEQ(0,uVar9);
  uVar9 = PackedFloatingReciprocalIter1(CONCAT44(uVar2,uVar2),uVar13);
  uVar9 = PackedFloatingReciprocalIter2(uVar9,uVar13);
  uVar13 = PackedFloatingMUL(uVar9,0xbf8000003f800000);
  uVar9 = CONCAT44((int)uVar13,(int)((ulonglong)uVar13 >> 0x20));
  puVar1 = (undefined8 *)uVar15;
  if ((undefined8 *)uVar15 == (undefined8 *)0x0) {
    uVar10 = PackedFloatingMUL(uVar10,uVar9);
    uVar19 = PackedFloatingMUL(uVar19,uVar13);
    uVar3 = PackedFloatingMUL(uVar3,uVar9);
    uVar18 = PackedFloatingMUL(uVar18,uVar13);
    *param_1 = CONCAT44((int)((ulonglong)uVar19 >> 0x20),(int)((ulonglong)uVar10 >> 0x20));
    param_1[2] = CONCAT44((int)uVar19,(int)uVar10);
    param_1[4] = CONCAT44((int)((ulonglong)uVar18 >> 0x20),(int)((ulonglong)uVar3 >> 0x20));
    param_1[6] = CONCAT44((int)uVar18,(int)uVar3);
    uVar20 = PackedFloatingMUL(uVar20,uVar9);
    uVar6 = PackedFloatingMUL(uVar6,uVar13);
    uVar9 = PackedFloatingMUL(uVar17,uVar9);
    uVar13 = PackedFloatingMUL(uVar14,uVar13);
    param_1[1] = CONCAT44((int)((ulonglong)uVar6 >> 0x20),(int)((ulonglong)uVar20 >> 0x20));
    param_1[3] = CONCAT44((int)uVar6,(int)uVar20);
    param_1[5] = CONCAT44((int)((ulonglong)uVar13 >> 0x20),(int)((ulonglong)uVar9 >> 0x20));
    param_1[7] = CONCAT44((int)uVar13,(int)uVar9);
    puVar1 = param_1;
  }
  return puVar1;
}



/* FUN_0045e832 @ 0045e832 */

void FUN_0045e832(undefined8 *param_1,ulonglong *param_2)

{
  ulonglong uVar1;
  undefined8 uVar2;
  ulonglong uVar3;
  undefined8 uVar4;
  undefined8 in_MM4;
  undefined8 uVar5;
  ulonglong uVar6;
  
  FastExitMediaState();
  uVar1 = *param_2;
  uVar3 = (ulonglong)(uint)param_2[1];
  uVar2 = PackedFloatingMUL(uVar1,uVar1);
  uVar4 = PackedFloatingMUL(uVar3,uVar3);
  uVar2 = PackedFloatingADD(uVar2,uVar4);
  uVar2 = PackedFloatingAccumulate(uVar2,uVar2);
  uVar5 = PackedFloatingReciprocalSQRAprox(in_MM4,uVar2);
  uVar6 = PackedFloatingCompareGT(uVar2,0x80000000800000);
  uVar4 = PackedFloatingMUL(uVar5,uVar5);
  uVar2 = PackedFloatingReciprocalSQRIter1(uVar2,uVar4);
  uVar2 = PackedFloatingReciprocalIter2(uVar2,uVar5);
  uVar4 = PackedFloatingMUL(uVar1 & uVar6,uVar2);
  uVar2 = PackedFloatingMUL(uVar3 & uVar6,uVar2);
  *param_1 = uVar4;
  *(int *)(param_1 + 1) = (int)uVar2;
  FastExitMediaState();
  return;
}



/* FUN_0045eac0 @ 0045eac0 */

undefined8 * FUN_0045eac0(undefined8 *param_1,undefined8 *param_2,undefined8 *param_3)

{
  undefined4 uVar1;
  undefined8 uVar2;
  undefined8 uVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  
  FastExitMediaState();
  uVar1 = (undefined4)*param_2;
  uVar4 = CONCAT44(uVar1,uVar1);
  uVar1 = (undefined4)((ulonglong)*param_2 >> 0x20);
  uVar7 = CONCAT44(uVar1,uVar1);
  uVar8 = CONCAT44(*(undefined4 *)(param_2 + 1),*(undefined4 *)(param_2 + 1));
  uVar2 = PackedFloatingMUL(uVar4,*param_3);
  uVar3 = PackedFloatingMUL(uVar7,param_3[2]);
  uVar5 = PackedFloatingMUL(uVar8,param_3[4]);
  uVar2 = PackedFloatingADD(uVar2,param_3[6]);
  uVar6 = PackedFloatingMUL(uVar4,param_3[1]);
  uVar4 = PackedFloatingADD(uVar3,uVar5);
  uVar3 = PackedFloatingMUL(uVar7,param_3[3]);
  uVar8 = PackedFloatingMUL(uVar8,param_3[5]);
  uVar7 = PackedFloatingADD(uVar6,param_3[7]);
  uVar4 = PackedFloatingADD(uVar2,uVar4);
  uVar3 = PackedFloatingADD(uVar3,uVar8);
  uVar2 = PackedFloatingADD(uVar7,uVar3);
  uVar1 = (undefined4)((ulonglong)uVar2 >> 0x20);
  uVar8 = CONCAT44(uVar1,uVar1);
  uVar7 = FloatingReciprocalAprox(uVar3,uVar8);
  uVar3 = PackedFloatingReciprocalIter1(uVar8,uVar7);
  uVar7 = PackedFloatingReciprocalIter2(uVar3,uVar7);
  uVar4 = PackedFloatingMUL(uVar4,uVar7);
  uVar2 = PackedFloatingMUL(uVar2,uVar7);
  *param_1 = uVar4;
  *(int *)(param_1 + 1) = (int)uVar2;
  FastExitMediaState();
  return param_1;
}



/* FUN_0045eb4b @ 0045eb4b */

undefined8 * FUN_0045eb4b(undefined8 *param_1,undefined8 *param_2,undefined8 *param_3)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  
  uVar1 = (undefined4)((ulonglong)*param_2 >> 0x20);
  uVar2 = (undefined4)((ulonglong)param_2[1] >> 0x20);
  uVar3 = (undefined4)*param_2;
  uVar6 = CONCAT44(uVar3,uVar3);
  uVar3 = (undefined4)param_2[1];
  uVar9 = CONCAT44(uVar3,uVar3);
  uVar7 = PackedFloatingMUL(*param_3,uVar6);
  uVar5 = CONCAT44(uVar1,uVar1);
  uVar4 = PackedFloatingMUL(uVar6,param_3[1]);
  uVar8 = PackedFloatingMUL(param_3[2],uVar5);
  uVar6 = CONCAT44(uVar2,uVar2);
  uVar5 = PackedFloatingMUL(uVar5,param_3[3]);
  uVar7 = PackedFloatingADD(uVar8,uVar7);
  uVar8 = PackedFloatingMUL(param_3[4],uVar9);
  uVar4 = PackedFloatingADD(uVar5,uVar4);
  uVar5 = PackedFloatingMUL(uVar9,param_3[5]);
  uVar9 = PackedFloatingADD(uVar8,uVar7);
  uVar7 = PackedFloatingMUL(param_3[6],uVar6);
  uVar4 = PackedFloatingADD(uVar4,uVar5);
  uVar6 = PackedFloatingMUL(uVar6,param_3[7]);
  uVar7 = PackedFloatingADD(uVar7,uVar9);
  uVar5 = param_2[2];
  uVar9 = PackedFloatingADD(uVar6,uVar4);
  uVar6 = param_2[3];
  *param_1 = uVar7;
  uVar4 = *param_3;
  param_1[1] = uVar9;
  uVar1 = (undefined4)((ulonglong)uVar5 >> 0x20);
  uVar2 = (undefined4)((ulonglong)uVar6 >> 0x20);
  uVar3 = (undefined4)uVar5;
  uVar9 = CONCAT44(uVar3,uVar3);
  uVar3 = (undefined4)uVar6;
  uVar7 = CONCAT44(uVar3,uVar3);
  uVar8 = PackedFloatingMUL(uVar4,uVar9);
  uVar5 = CONCAT44(uVar1,uVar1);
  uVar4 = PackedFloatingMUL(uVar9,param_3[1]);
  uVar9 = PackedFloatingMUL(param_3[2],uVar5);
  uVar6 = CONCAT44(uVar2,uVar2);
  uVar5 = PackedFloatingMUL(uVar5,param_3[3]);
  uVar9 = PackedFloatingADD(uVar9,uVar8);
  uVar8 = PackedFloatingMUL(param_3[4],uVar7);
  uVar4 = PackedFloatingADD(uVar5,uVar4);
  uVar5 = PackedFloatingMUL(uVar7,param_3[5]);
  uVar9 = PackedFloatingADD(uVar8,uVar9);
  uVar7 = PackedFloatingMUL(param_3[6],uVar6);
  uVar4 = PackedFloatingADD(uVar4,uVar5);
  uVar6 = PackedFloatingMUL(uVar6,param_3[7]);
  uVar7 = PackedFloatingADD(uVar7,uVar9);
  uVar5 = param_2[4];
  uVar9 = PackedFloatingADD(uVar6,uVar4);
  uVar6 = param_2[5];
  param_1[2] = uVar7;
  uVar4 = *param_3;
  param_1[3] = uVar9;
  uVar1 = (undefined4)((ulonglong)uVar5 >> 0x20);
  uVar2 = (undefined4)((ulonglong)uVar6 >> 0x20);
  uVar3 = (undefined4)uVar5;
  uVar9 = CONCAT44(uVar3,uVar3);
  uVar3 = (undefined4)uVar6;
  uVar7 = CONCAT44(uVar3,uVar3);
  uVar8 = PackedFloatingMUL(uVar4,uVar9);
  uVar5 = CONCAT44(uVar1,uVar1);
  uVar4 = PackedFloatingMUL(uVar9,param_3[1]);
  uVar9 = PackedFloatingMUL(param_3[2],uVar5);
  uVar6 = CONCAT44(uVar2,uVar2);
  uVar5 = PackedFloatingMUL(uVar5,param_3[3]);
  uVar9 = PackedFloatingADD(uVar9,uVar8);
  uVar8 = PackedFloatingMUL(param_3[4],uVar7);
  uVar4 = PackedFloatingADD(uVar5,uVar4);
  uVar5 = PackedFloatingMUL(uVar7,param_3[5]);
  uVar9 = PackedFloatingADD(uVar8,uVar9);
  uVar7 = PackedFloatingMUL(param_3[6],uVar6);
  uVar4 = PackedFloatingADD(uVar4,uVar5);
  uVar6 = PackedFloatingMUL(uVar6,param_3[7]);
  uVar7 = PackedFloatingADD(uVar7,uVar9);
  uVar5 = param_2[6];
  uVar9 = PackedFloatingADD(uVar6,uVar4);
  uVar6 = param_2[7];
  param_1[4] = uVar7;
  uVar4 = *param_3;
  param_1[5] = uVar9;
  uVar1 = (undefined4)((ulonglong)uVar5 >> 0x20);
  uVar2 = (undefined4)((ulonglong)uVar6 >> 0x20);
  uVar3 = (undefined4)uVar5;
  uVar9 = CONCAT44(uVar3,uVar3);
  uVar3 = (undefined4)uVar6;
  uVar7 = CONCAT44(uVar3,uVar3);
  uVar8 = PackedFloatingMUL(uVar4,uVar9);
  uVar5 = CONCAT44(uVar1,uVar1);
  uVar4 = PackedFloatingMUL(uVar9,param_3[1]);
  uVar9 = PackedFloatingMUL(param_3[2],uVar5);
  uVar6 = CONCAT44(uVar2,uVar2);
  uVar5 = PackedFloatingMUL(uVar5,param_3[3]);
  uVar9 = PackedFloatingADD(uVar9,uVar8);
  uVar8 = PackedFloatingMUL(param_3[4],uVar7);
  uVar4 = PackedFloatingADD(uVar5,uVar4);
  uVar5 = PackedFloatingMUL(uVar7,param_3[5]);
  uVar9 = PackedFloatingADD(uVar8,uVar9);
  uVar7 = PackedFloatingMUL(param_3[6],uVar6);
  uVar5 = PackedFloatingADD(uVar4,uVar5);
  uVar6 = PackedFloatingMUL(uVar6,param_3[7]);
  uVar4 = PackedFloatingADD(uVar7,uVar9);
  uVar5 = PackedFloatingADD(uVar6,uVar5);
  param_1[6] = uVar4;
  param_1[7] = uVar5;
  FastExitMediaState();
  return param_1;
}



/* FUN_0045ed17 @ 0045ed17 */

ulonglong *
FUN_0045ed17(ulonglong *param_1,undefined8 *param_2,undefined8 *param_3,undefined8 *param_4,
            undefined8 *param_5,undefined8 *param_6)

{
  undefined8 *puVar1;
  undefined8 uVar2;
  ulonglong uVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined4 uVar8;
  undefined8 uVar7;
  undefined4 local_44;
  undefined4 local_40;
  undefined4 local_3c;
  undefined4 local_38;
  undefined4 local_34;
  undefined4 local_30;
  undefined4 local_2c;
  undefined4 local_28;
  undefined4 local_24;
  undefined4 local_20;
  undefined4 local_1c;
  undefined4 local_18;
  undefined4 local_14;
  undefined4 local_10;
  undefined4 local_c;
  undefined4 local_8;
  
  puVar1 = (undefined8 *)&local_44;
  switch(((param_6 != (undefined8 *)0x0) << 1 | param_5 != (undefined8 *)0x0) << 1 |
         param_4 != (undefined8 *)0x0) {
  case '\0':
    local_c = 0;
    local_10 = 0;
    local_14 = 0;
    local_18 = 0;
    local_20 = 0;
    local_24 = 0;
    local_28 = 0;
    local_2c = 0;
    local_34 = 0;
    local_38 = 0;
    local_3c = 0;
    local_40 = 0;
    local_8 = 0x3f800000;
    local_1c = 0x3f800000;
    local_30 = 0x3f800000;
    local_44 = 0x3f800000;
    break;
  case '\x01':
    puVar1 = param_4;
    break;
  case '\x02':
    puVar1 = param_5;
    break;
  case '\x03':
    FastExitMediaState();
    FUN_0045eb4b((undefined8 *)&local_44,param_5,param_4);
    FastExitMediaState();
    break;
  case '\x04':
    puVar1 = param_6;
    break;
  case '\x05':
    FastExitMediaState();
    FUN_0045eb4b((undefined8 *)&local_44,param_6,param_4);
    FastExitMediaState();
    break;
  case '\x06':
    FastExitMediaState();
    FUN_0045eb4b((undefined8 *)&local_44,param_6,param_5);
    FastExitMediaState();
    break;
  case '\a':
    FastExitMediaState();
    FUN_0045eb4b((undefined8 *)&local_44,param_6,param_5);
    FUN_0045eb4b((undefined8 *)&local_44,(undefined8 *)&local_44,param_4);
    FastExitMediaState();
  }
  FUN_0045eac0(param_1,param_2,puVar1);
  if (param_3 != (undefined8 *)0x0) {
    FastExitMediaState();
    uVar4 = param_3[2];
    uVar5 = PackedIntToFloatingDwordConv(*param_3,*param_3);
    uVar6 = PackedIntToFloatingDwordConv(param_3[1],param_3[1]);
    uVar2 = PackedFloatingADD(*param_1 ^ 0x8000000000000000,0x3f8000003f800000);
    uVar6 = PackedFloatingMUL(uVar6,0x3f0000003f000000);
    uVar8 = (undefined4)((ulonglong)uVar4 >> 0x20);
    uVar7 = PackedFloatingSUB(CONCAT44(uVar8,uVar8),uVar4);
    uVar2 = PackedFloatingMUL(uVar2,uVar6);
    uVar6 = PackedFloatingMUL((ulonglong)(uint)param_1[1],uVar7);
    uVar4 = PackedFloatingADD(uVar6,uVar4);
    uVar3 = PackedFloatingADD(uVar2,uVar5);
    *param_1 = uVar3;
    *(int *)(param_1 + 1) = (int)uVar4;
    FastExitMediaState();
  }
  return param_1;
}



/* FUN_0045ee9f @ 0045ee9f */

ulonglong *
FUN_0045ee9f(ulonglong *param_1,ulonglong *param_2,undefined8 *param_3,undefined8 *param_4,
            undefined8 *param_5,undefined8 *param_6)

{
  undefined8 uVar1;
  undefined8 uVar2;
  ulonglong uVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined4 uVar7;
  undefined8 uVar6;
  undefined8 uVar8;
  unkbyte10 in_ST5;
  undefined8 uVar9;
  unkbyte10 in_ST6;
  undefined4 local_44;
  undefined4 local_40;
  undefined4 local_3c;
  undefined4 local_38;
  undefined4 local_34;
  undefined4 local_30;
  undefined4 local_2c;
  undefined4 local_28;
  undefined4 local_24;
  undefined4 local_20;
  undefined4 local_1c;
  undefined4 local_18;
  undefined4 local_14;
  undefined4 local_10;
  undefined4 local_c;
  undefined4 local_8;
  
  uVar2 = (undefined8)in_ST5;
  uVar9 = (undefined8)in_ST6;
  switch(((param_6 != (undefined8 *)0x0) << 1 | param_5 != (undefined8 *)0x0) << 1 |
         param_4 != (undefined8 *)0x0) {
  case '\0':
    local_c = 0;
    local_10 = 0;
    local_14 = 0;
    local_18 = 0;
    local_20 = 0;
    local_24 = 0;
    local_28 = 0;
    local_2c = 0;
    local_34 = 0;
    local_38 = 0;
    local_3c = 0;
    local_40 = 0;
    local_8 = 0x3f800000;
    local_1c = 0x3f800000;
    local_30 = 0x3f800000;
    local_44 = 0x3f800000;
    break;
  case '\x01':
    FastExitMediaState();
    FUN_0045e40a((undefined8 *)&local_44,(undefined4 *)0x0,param_4);
    uVar2 = (undefined8)in_ST5;
    uVar9 = (undefined8)in_ST6;
    FastExitMediaState();
    break;
  case '\x02':
    FastExitMediaState();
    FUN_0045e40a((undefined8 *)&local_44,(undefined4 *)0x0,param_5);
    uVar2 = (undefined8)in_ST5;
    uVar9 = (undefined8)in_ST6;
    FastExitMediaState();
    break;
  case '\x03':
    FastExitMediaState();
    FUN_0045eb4b((undefined8 *)&local_44,param_5,param_4);
    FUN_0045e40a((undefined8 *)&local_44,(undefined4 *)0x0,(undefined8 *)&local_44);
    uVar2 = (undefined8)in_ST5;
    uVar9 = (undefined8)in_ST6;
    FastExitMediaState();
    break;
  case '\x04':
    FastExitMediaState();
    FUN_0045e40a((undefined8 *)&local_44,(undefined4 *)0x0,param_6);
    uVar2 = (undefined8)in_ST5;
    uVar9 = (undefined8)in_ST6;
    FastExitMediaState();
    break;
  case '\x05':
    FastExitMediaState();
    FUN_0045eb4b((undefined8 *)&local_44,param_6,param_4);
    FUN_0045e40a((undefined8 *)&local_44,(undefined4 *)0x0,(undefined8 *)&local_44);
    uVar2 = (undefined8)in_ST5;
    uVar9 = (undefined8)in_ST6;
    FastExitMediaState();
    break;
  case '\x06':
    FastExitMediaState();
    FUN_0045eb4b((undefined8 *)&local_44,param_6,param_5);
    FUN_0045e40a((undefined8 *)&local_44,(undefined4 *)0x0,(undefined8 *)&local_44);
    uVar2 = (undefined8)in_ST5;
    uVar9 = (undefined8)in_ST6;
    FastExitMediaState();
    break;
  case '\a':
    FastExitMediaState();
    FUN_0045eb4b((undefined8 *)&local_44,param_6,param_5);
    FUN_0045eb4b((undefined8 *)&local_44,(undefined8 *)&local_44,param_4);
    FUN_0045e40a((undefined8 *)&local_44,(undefined4 *)0x0,(undefined8 *)&local_44);
    uVar2 = (undefined8)in_ST5;
    uVar9 = (undefined8)in_ST6;
    FastExitMediaState();
  }
  if (param_3 != (undefined8 *)0x0) {
    FastExitMediaState();
    uVar4 = PackedIntToFloatingDwordConv(*param_3,*param_3);
    uVar1 = param_3[2];
    uVar5 = PackedIntToFloatingDwordConv(param_3[1],param_3[1]);
    uVar7 = (undefined4)((ulonglong)uVar5 >> 0x20);
    uVar6 = CONCAT44(uVar7,uVar7);
    uVar8 = FloatingReciprocalAprox(uVar2,uVar5);
    uVar6 = FloatingReciprocalAprox(uVar6,uVar6);
    uVar2 = PackedFloatingSUB(*param_2,uVar4);
    uVar6 = CONCAT44((int)uVar6,(int)uVar8);
    uVar4 = PackedFloatingReciprocalIter1(uVar5,uVar6);
    uVar4 = PackedFloatingReciprocalIter2(uVar4,uVar6);
    uVar4 = PackedFloatingMUL(uVar4,0x4000000040000000);
    uVar2 = PackedFloatingMUL(uVar2,uVar4);
    uVar7 = (undefined4)((ulonglong)uVar1 >> 0x20);
    uVar3 = PackedFloatingSUB(uVar2,0x3f8000003f800000);
    uVar2 = PackedFloatingSUB(CONCAT44(uVar7,uVar7),uVar1);
    uVar9 = FloatingReciprocalAprox(uVar9,uVar2);
    uVar2 = PackedFloatingReciprocalIter1(uVar2,uVar9);
    uVar9 = PackedFloatingReciprocalIter2(uVar2,uVar9);
    uVar2 = PackedFloatingSUB((ulonglong)(uint)param_2[1],uVar1);
    uVar2 = PackedFloatingMUL(uVar2,uVar9);
    *param_1 = uVar3 ^ 0x8000000000000000;
    *(int *)(param_1 + 1) = (int)uVar2;
    FastExitMediaState();
    param_2 = param_1;
  }
  FUN_0045eac0(param_1,param_2,(undefined8 *)&local_44);
  return param_1;
}



/* FUN_0045f0c5 @ 0045f0c5 */

ulonglong *
FUN_0045f0c5(ulonglong *param_1,ulonglong *param_2,undefined8 *param_3,undefined8 *param_4,
            undefined8 *param_5,undefined8 *param_6)

{
  ulonglong uVar1;
  undefined8 uVar2;
  undefined8 uVar3;
  undefined4 uVar6;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 in_MM5;
  undefined8 uVar7;
  undefined8 in_MM6;
  undefined8 local_44 [8];
  
  switch(((param_6 != (undefined8 *)0x0) << 1 | param_5 != (undefined8 *)0x0) << 1 |
         param_4 != (undefined8 *)0x0) {
  case '\0':
    FUN_0045b092(local_44);
    goto switchD_0045f0fb_default;
  case '\x01':
    param_6 = param_4;
    goto LAB_0045f13f;
  case '\x02':
    param_6 = param_5;
    goto LAB_0045f13f;
  case '\x03':
    param_6 = param_5;
    break;
  case '\x04':
    goto LAB_0045f13f;
  case '\x05':
    break;
  case '\x06':
    param_4 = param_5;
    break;
  case '\a':
    FUN_0045eb4b(local_44,param_6,param_5);
    param_6 = local_44;
    break;
  default:
    goto switchD_0045f0fb_default;
  }
  FUN_0045eb4b(local_44,param_6,param_4);
  param_6 = local_44;
LAB_0045f13f:
  FUN_0045dd30(local_44,(undefined4 *)0x0,param_6);
switchD_0045f0fb_default:
  if (param_3 != (undefined8 *)0x0) {
    FastExitMediaState();
    uVar2 = PackedIntToFloatingDwordConv(*param_3,*param_3);
    uVar5 = param_3[2];
    uVar3 = PackedIntToFloatingDwordConv(param_3[1],param_3[1]);
    uVar6 = (undefined4)((ulonglong)uVar3 >> 0x20);
    uVar4 = CONCAT44(uVar6,uVar6);
    uVar7 = FloatingReciprocalAprox(in_MM5,uVar3);
    uVar4 = FloatingReciprocalAprox(uVar4,uVar4);
    uVar2 = PackedFloatingSUB(*param_2,uVar2);
    uVar4 = CONCAT44((int)uVar4,(int)uVar7);
    uVar3 = PackedFloatingReciprocalIter1(uVar3,uVar4);
    uVar3 = PackedFloatingReciprocalIter2(uVar3,uVar4);
    uVar3 = PackedFloatingMUL(uVar3,0x4000000040000000);
    uVar2 = PackedFloatingMUL(uVar2,uVar3);
    uVar6 = (undefined4)((ulonglong)uVar5 >> 0x20);
    uVar1 = PackedFloatingSUB(uVar2,0x3f8000003f800000);
    uVar2 = PackedFloatingSUB(CONCAT44(uVar6,uVar6),uVar5);
    uVar3 = FloatingReciprocalAprox(in_MM6,uVar2);
    uVar2 = PackedFloatingReciprocalIter1(uVar2,uVar3);
    uVar2 = PackedFloatingReciprocalIter2(uVar2,uVar3);
    uVar5 = PackedFloatingSUB((ulonglong)(uint)param_2[1],uVar5);
    uVar5 = PackedFloatingMUL(uVar5,uVar2);
    *param_1 = uVar1 ^ 0x8000000000000000;
    *(int *)(param_1 + 1) = (int)uVar5;
    FastExitMediaState();
    param_2 = param_1;
  }
  FUN_0045eac0(param_1,param_2,local_44);
  return param_1;
}



/* FUN_0045fae8 @ 0045fae8 */

void FUN_0045fae8(undefined8 *param_1,ulonglong *param_2)

{
  ulonglong uVar1;
  undefined8 uVar2;
  ulonglong uVar3;
  undefined8 uVar4;
  undefined8 in_MM4;
  undefined8 uVar5;
  
  uVar1 = *param_2;
  uVar3 = param_2[1] & 0xffffffff;
  uVar2 = PackedFloatingMUL(uVar1,uVar1);
  uVar4 = PackedFloatingMUL(uVar3,uVar3);
  uVar2 = PackedFloatingADD(uVar2,uVar4);
  uVar2 = PackedFloatingAccumulate(uVar2,uVar2);
  uVar5 = PackedFloatingReciprocalSQRAprox(in_MM4,uVar2);
  uVar3 = PackedFloatingCompareGT(uVar2,0x80000000800000);
  uVar4 = PackedFloatingMUL(uVar5,uVar5);
  uVar2 = PackedFloatingReciprocalSQRIter1(uVar2,uVar4);
  uVar2 = PackedFloatingReciprocalIter2(uVar2,uVar5);
  uVar4 = PackedFloatingMUL(uVar1 & uVar3,uVar2);
  uVar2 = PackedFloatingMUL(param_2[1] & uVar3,uVar2);
  *param_1 = uVar4;
  param_1[1] = uVar2;
  FastExitMediaState();
  return;
}



/* FUN_0045fbd0 @ 0045fbd0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __cdecl FUN_0045fbd0(uint *param_1,uint *param_2,uint *param_3)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  uint uVar9;
  float fVar10;
  float fVar11;
  float fVar12;
  uint uVar13;
  float fVar14;
  float fVar15;
  float fVar16;
  uint uVar17;
  float fVar18;
  float fVar19;
  float fVar20;
  uint uVar21;
  uint uVar22;
  uint uVar23;
  uint uVar24;
  uint uVar25;
  uint uVar26;
  uint uVar27;
  uint uVar28;
  
  fVar6 = (float)(*param_1 & _DAT_0047ada0);
  fVar10 = (float)(param_1[1] & uRam0047ada4);
  fVar14 = (float)(param_1[2] & uRam0047ada8);
  fVar18 = (float)(param_1[3] & uRam0047adac);
  uVar22 = param_1[1] & uRam0047ad94;
  uVar23 = param_1[2] & uRam0047ad98;
  uVar24 = param_1[3] & uRam0047ad9c;
  fVar7 = fVar6 * _DAT_0047ad80 + _DAT_0047ad30;
  fVar11 = fVar10 * fRam0047ad84 + fRam0047ad34;
  fVar15 = fVar14 * fRam0047ad88 + fRam0047ad38;
  fVar19 = fVar18 * fRam0047ad8c + fRam0047ad3c;
  fVar8 = fVar7 - _DAT_0047ad30;
  fVar12 = fVar11 - fRam0047ad34;
  fVar16 = fVar15 - fRam0047ad38;
  fVar20 = fVar19 - fRam0047ad3c;
  fVar6 = (((fVar6 - _DAT_0047ad70 * fVar8) - _DAT_0047ad60 * fVar8) - _DAT_0047ad50 * fVar8) -
          _DAT_0047ad40 * fVar8;
  fVar8 = (((fVar10 - fRam0047ad74 * fVar12) - fRam0047ad64 * fVar12) - fRam0047ad54 * fVar12) -
          fRam0047ad44 * fVar12;
  fVar10 = (((fVar14 - fRam0047ad78 * fVar16) - fRam0047ad68 * fVar16) - fRam0047ad58 * fVar16) -
           fRam0047ad48 * fVar16;
  fVar12 = (((fVar18 - fRam0047ad7c * fVar20) - fRam0047ad6c * fVar20) - fRam0047ad5c * fVar20) -
           fRam0047ad4c * fVar20;
  fVar14 = fVar6 * fVar6;
  fVar16 = fVar8 * fVar8;
  fVar18 = fVar10 * fVar10;
  fVar20 = fVar12 * fVar12;
  uVar25 = (uint)fVar7 & _DAT_0047ad00;
  uVar26 = (uint)fVar11 & uRam0047ad04;
  uVar27 = (uint)fVar15 & uRam0047ad08;
  uVar28 = (uint)fVar19 & uRam0047ad0c;
  uVar9 = uVar25 & _DAT_0047acf0;
  uVar13 = uVar26 & uRam0047acf4;
  uVar17 = uVar27 & uRam0047acf8;
  uVar21 = uVar28 & uRam0047acfc;
  uVar1 = uVar26 - uVar13 & _DAT_0047ace0;
  uVar2 = uVar27 - uVar17 & _DAT_0047ace0;
  uVar3 = uVar28 - uVar21 & _DAT_0047ace0;
  uVar4 = uVar25 + uVar9 & _DAT_0047ace0;
  uVar26 = uVar26 + uVar13 & _DAT_0047ace0;
  uVar27 = uVar27 + uVar17 & _DAT_0047ace0;
  uVar28 = uVar28 + uVar21 & _DAT_0047ace0;
  uVar5 = -(uint)((float)(uVar9 << 0x1e) != 0.0);
  uVar13 = -(uint)((float)(uVar13 << 0x1e) != 0.0);
  uVar17 = -(uint)((float)(uVar17 << 0x1e) != 0.0);
  uVar21 = -(uint)((float)(uVar21 << 0x1e) != 0.0);
  fVar6 = (((_DAT_0047ad20 * fVar14 + _DAT_0047acd0) * fVar14 + _DAT_0047acb0) * fVar14 +
          _DAT_0047ac90) * fVar6;
  fVar8 = (((fRam0047ad24 * fVar16 + fRam0047acd4) * fVar16 + fRam0047acb4) * fVar16 + fRam0047ac94)
          * fVar8;
  fVar10 = (((fRam0047ad28 * fVar18 + fRam0047acd8) * fVar18 + fRam0047acb8) * fVar18 + fRam0047ac98
           ) * fVar10;
  fVar12 = (((fRam0047ad2c * fVar20 + fRam0047acdc) * fVar20 + fRam0047acbc) * fVar20 + fRam0047ac9c
           ) * fVar12;
  fVar7 = (((_DAT_0047ad10 * fVar14 + _DAT_0047acc0) * fVar14 + _DAT_0047aca0) * fVar14 +
          _DAT_0047ac80) * fVar14 + _DAT_0047ac70;
  fVar11 = (((fRam0047ad14 * fVar16 + fRam0047acc4) * fVar16 + fRam0047aca4) * fVar16 + fRam0047ac84
           ) * fVar16 + fRam0047ac74;
  fVar14 = (((fRam0047ad18 * fVar18 + fRam0047acc8) * fVar18 + fRam0047aca8) * fVar18 + fRam0047ac88
           ) * fVar18 + fRam0047ac78;
  fVar15 = (((fRam0047ad1c * fVar20 + fRam0047accc) * fVar20 + fRam0047acac) * fVar20 + fRam0047ac8c
           ) * fVar20 + fRam0047ac7c;
  *param_2 = (~uVar5 & (uint)fVar6 | uVar5 & (uint)fVar7) ^
             (uVar25 - uVar9 & _DAT_0047ace0) << 0x1e ^ *param_1 & _DAT_0047ad90;
  param_2[1] = (~uVar13 & (uint)fVar8 | uVar13 & (uint)fVar11) ^ uVar1 << 0x1e ^ uVar22;
  param_2[2] = (~uVar17 & (uint)fVar10 | uVar17 & (uint)fVar14) ^ uVar2 << 0x1e ^ uVar23;
  param_2[3] = (~uVar21 & (uint)fVar12 | uVar21 & (uint)fVar15) ^ uVar3 << 0x1e ^ uVar24;
  *param_3 = (uVar5 & (uint)fVar6 | ~uVar5 & (uint)fVar7) ^ uVar4 << 0x1e;
  param_3[1] = (uVar13 & (uint)fVar8 | ~uVar13 & (uint)fVar11) ^ uVar26 << 0x1e;
  param_3[2] = (uVar17 & (uint)fVar10 | ~uVar17 & (uint)fVar14) ^ uVar27 << 0x1e;
  param_3[3] = (uVar21 & (uint)fVar12 | ~uVar21 & (uint)fVar15) ^ uVar28 << 0x1e;
  return;
}



/* FUN_0045fdc0 @ 0045fdc0 */

void FUN_0045fdc0(void)

{
  return;
}



/* FUN_0045feb0 @ 0045feb0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __cdecl FUN_0045feb0(uint *param_1,uint *param_2,uint *param_3)

{
  float fVar1;
  float fVar2;
  uint uVar3;
  float fVar4;
  float fVar5;
  uint uVar6;
  float fVar7;
  float fVar8;
  uint uVar9;
  float fVar10;
  float fVar11;
  uint uVar12;
  uint uVar13;
  uint uVar14;
  uint uVar15;
  float fVar16;
  float fVar17;
  uint uVar18;
  uint uVar19;
  uint uVar20;
  uint uVar21;
  uint uVar22;
  uint uVar23;
  uint uVar24;
  float fVar25;
  float fVar26;
  uint uVar27;
  uint uVar28;
  
  fVar16 = (float)(*param_1 & _DAT_0047afc0);
  fVar17 = (float)(param_1[1] & uRam0047afc4);
  fVar25 = (float)(param_1[2] & uRam0047afc8);
  fVar26 = (float)(param_1[3] & uRam0047afcc);
  uVar13 = param_1[1] & uRam0047afb4;
  uVar14 = param_1[2] & uRam0047afb8;
  uVar15 = param_1[3] & uRam0047afbc;
  fVar1 = fVar16 * _DAT_0047afa0 + _DAT_0047af50;
  fVar4 = fVar17 * fRam0047afa4 + fRam0047af54;
  fVar7 = fVar25 * fRam0047afa8 + fRam0047af58;
  fVar10 = fVar26 * fRam0047afac + fRam0047af5c;
  fVar2 = fVar1 - _DAT_0047af50;
  fVar5 = fVar4 - fRam0047af54;
  fVar8 = fVar7 - fRam0047af58;
  fVar11 = fVar10 - fRam0047af5c;
  fVar16 = (((fVar16 - _DAT_0047af90 * fVar2) - _DAT_0047af80 * fVar2) - _DAT_0047af70 * fVar2) -
           _DAT_0047af60 * fVar2;
  fVar2 = (((fVar17 - fRam0047af94 * fVar5) - fRam0047af84 * fVar5) - fRam0047af74 * fVar5) -
          fRam0047af64 * fVar5;
  fVar17 = (((fVar25 - fRam0047af98 * fVar8) - fRam0047af88 * fVar8) - fRam0047af78 * fVar8) -
           fRam0047af68 * fVar8;
  fVar5 = (((fVar26 - fRam0047af9c * fVar11) - fRam0047af8c * fVar11) - fRam0047af7c * fVar11) -
          fRam0047af6c * fVar11;
  fVar25 = fVar16 * fVar16;
  fVar8 = fVar2 * fVar2;
  fVar26 = fVar17 * fVar17;
  fVar11 = fVar5 * fVar5;
  uVar18 = (uint)fVar1 & _DAT_0047af20;
  uVar19 = (uint)fVar4 & uRam0047af24;
  uVar21 = (uint)fVar7 & uRam0047af28;
  uVar23 = (uint)fVar10 & uRam0047af2c;
  uVar3 = uVar18 & _DAT_0047af10;
  uVar6 = uVar19 & uRam0047af14;
  uVar9 = uVar21 & uRam0047af18;
  uVar12 = uVar23 & uRam0047af1c;
  uVar20 = uVar19 - uVar6 & uRam0047af04;
  uVar22 = uVar21 - uVar9 & uRam0047af08;
  uVar24 = uVar23 - uVar12 & uRam0047af0c;
  uVar27 = uVar18 + uVar3 & _DAT_0047af00;
  uVar28 = uVar19 + uVar6 & uRam0047af04;
  uVar21 = uVar21 + uVar9 & uRam0047af08;
  uVar23 = uVar23 + uVar12 & uRam0047af0c;
  uVar19 = -(uint)((float)(uVar3 << 0x1e) != 0.0);
  uVar6 = -(uint)((float)(uVar6 << 0x1e) != 0.0);
  uVar9 = -(uint)((float)(uVar9 << 0x1e) != 0.0);
  uVar12 = -(uint)((float)(uVar12 << 0x1e) != 0.0);
  fVar16 = (((_DAT_0047af40 * fVar25 + _DAT_0047aef0) * fVar25 + _DAT_0047aed0) * fVar25 +
           _DAT_0047aeb0) * fVar16;
  fVar2 = (((fRam0047af44 * fVar8 + fRam0047aef4) * fVar8 + fRam0047aed4) * fVar8 + fRam0047aeb4) *
          fVar2;
  fVar17 = (((fRam0047af48 * fVar26 + fRam0047aef8) * fVar26 + fRam0047aed8) * fVar26 + fRam0047aeb8
           ) * fVar17;
  fVar5 = (((fRam0047af4c * fVar11 + fRam0047aefc) * fVar11 + fRam0047aedc) * fVar11 + fRam0047aebc)
          * fVar5;
  fVar1 = (((_DAT_0047af30 * fVar25 + _DAT_0047aee0) * fVar25 + _DAT_0047aec0) * fVar25 +
          _DAT_0047aea0) * fVar25 + _DAT_0047ae90;
  fVar4 = (((fRam0047af34 * fVar8 + fRam0047aee4) * fVar8 + fRam0047aec4) * fVar8 + fRam0047aea4) *
          fVar8 + fRam0047ae94;
  fVar25 = (((fRam0047af38 * fVar26 + fRam0047aee8) * fVar26 + fRam0047aec8) * fVar26 + fRam0047aea8
           ) * fVar26 + fRam0047ae98;
  fVar7 = (((fRam0047af3c * fVar11 + fRam0047aeec) * fVar11 + fRam0047aecc) * fVar11 + fRam0047aeac)
          * fVar11 + fRam0047ae9c;
  *param_2 = (~uVar19 & (uint)fVar16 | uVar19 & (uint)fVar1) ^
             (uVar18 - uVar3 & _DAT_0047af00) << 0x1e ^ *param_1 & _DAT_0047afb0;
  param_2[1] = (~uVar6 & (uint)fVar2 | uVar6 & (uint)fVar4) ^ uVar20 << 0x1e ^ uVar13;
  param_2[2] = (~uVar9 & (uint)fVar17 | uVar9 & (uint)fVar25) ^ uVar22 << 0x1e ^ uVar14;
  param_2[3] = (~uVar12 & (uint)fVar5 | uVar12 & (uint)fVar7) ^ uVar24 << 0x1e ^ uVar15;
  *param_3 = (uVar19 & (uint)fVar16 | ~uVar19 & (uint)fVar1) ^ uVar27 << 0x1e;
  param_3[1] = (uVar6 & (uint)fVar2 | ~uVar6 & (uint)fVar4) ^ uVar28 << 0x1e;
  param_3[2] = (uVar9 & (uint)fVar17 | ~uVar9 & (uint)fVar25) ^ uVar21 << 0x1e;
  param_3[3] = (uVar12 & (uint)fVar5 | ~uVar12 & (uint)fVar7) ^ uVar23 << 0x1e;
  return;
}



/* FUN_004600c0 @ 004600c0 */

ulonglong FUN_004600c0(void)

{
  ulonglong in_MM0;
  ulonglong uVar1;
  undefined8 uVar2;
  ulonglong in_MM1;
  ulonglong uVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  uint uVar7;
  uint uVar8;
  ulonglong uVar9;
  
  uVar9 = (DAT_0047b098 & in_MM0) >> 1 | DAT_0047b098 & in_MM1;
  uVar3 = in_MM1 & DAT_0047b09c;
  uVar1 = in_MM0 & DAT_0047b09c;
  uVar2 = PackedFloatingMAX(uVar1,uVar3);
  uVar7 = (uint)((int)uVar1 < (int)uVar3) * -0x80000000;
  uVar4 = PackedFloatingMIN(uVar3,uVar1);
  uVar5 = FloatingReciprocalAprox(uVar1,uVar2);
  uVar2 = PackedFloatingReciprocalIter1(uVar2,uVar5);
  uVar2 = PackedFloatingReciprocalIter2(uVar2,uVar5);
  uVar2 = PackedFloatingMUL(uVar2,uVar4);
  uVar4 = PackedFloatingMUL(uVar2,uVar2);
  uVar5 = PackedFloatingADD((ulonglong)DAT_0047b0d0,uVar4);
  uVar6 = PackedFloatingMUL((ulonglong)DAT_0047b0dc,uVar4);
  uVar5 = PackedFloatingMUL(uVar5,uVar4);
  uVar6 = PackedFloatingADD(uVar6,(ulonglong)DAT_0047b0d8);
  uVar5 = PackedFloatingADD(uVar5,(ulonglong)DAT_0047b0cc);
  uVar6 = PackedFloatingMUL(uVar6,uVar4);
  uVar5 = PackedFloatingMUL(uVar5,uVar4);
  uVar6 = PackedFloatingADD(uVar6,(ulonglong)DAT_0047b0d4);
  uVar5 = PackedFloatingADD(uVar5,(ulonglong)DAT_0047b0c8);
  uVar4 = PackedFloatingMUL(uVar4,uVar6);
  uVar4 = PackedFloatingMUL(uVar4,uVar2);
  uVar6 = FloatingReciprocalAprox((ulonglong)DAT_0047b0d4,uVar5);
  uVar8 = (int)uVar9 << 1;
  uVar5 = PackedFloatingReciprocalIter1(uVar5,uVar6);
  uVar5 = PackedFloatingReciprocalIter2(uVar5,uVar6);
  uVar4 = PackedFloatingMUL(uVar4,uVar5);
  uVar1 = PackedFloatingADD(uVar4,uVar2);
  uVar2 = PackedFloatingSUB(~(ulonglong)(uint)((int)uVar7 >> 0x1f) &
                            (ulonglong)(uVar8 ^ DAT_0047b0f8),(ulonglong)DAT_0047b0f8);
  uVar1 = PackedFloatingADD(uVar1 | uVar8 ^ uVar7,uVar2);
  return uVar1 | DAT_0047b098 & uVar9;
}



/* FUN_004601c0 @ 004601c0 */

ulonglong FUN_004601c0(void)

{
  uint uVar1;
  ulonglong in_MM0;
  ulonglong uVar2;
  undefined8 uVar3;
  uint uVar4;
  uint uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  ulonglong uVar9;
  ulonglong uVar5;
  
  uVar2 = in_MM0 & DAT_0047b09c;
  uVar6 = -(uint)(DAT_0047b0a8 < (int)uVar2);
  uVar3 = PackedFloatingMUL(uVar2,(ulonglong)DAT_0047b0ac);
  uVar3 = PackedFloatingSUBR(uVar3,(ulonglong)DAT_0047b0ac);
  uVar7 = PackedFloatingReciprocalSQRAprox((ulonglong)DAT_0047b09c,uVar3);
  uVar8 = PackedFloatingMUL(uVar7,uVar7);
  uVar1 = (uint)((int)uVar2 < DAT_0047b0e0);
  uVar4 = -uVar1;
  uVar5 = (ulonglong)uVar4;
  uVar8 = PackedFloatingReciprocalSQRIter1(uVar8,uVar3);
  uVar7 = PackedFloatingReciprocalIter2(uVar8,uVar7);
  uVar9 = PackedFloatingMUL(uVar7,uVar3);
  uVar2 = ~uVar5 & uVar9 | uVar2 & uVar4;
  uVar3 = PackedFloatingMUL(uVar2,uVar2);
  uVar8 = PackedFloatingMUL((ulonglong)DAT_0047b0e8,uVar3);
  uVar7 = PackedFloatingADD((ulonglong)DAT_0047b0f0,uVar3);
  uVar8 = PackedFloatingADD(uVar8,(ulonglong)DAT_0047b0e4);
  uVar8 = PackedFloatingMUL(uVar8,uVar3);
  uVar3 = PackedFloatingMUL(uVar3,uVar7);
  uVar3 = PackedFloatingADD(uVar3,(ulonglong)DAT_0047b0ec);
  uVar8 = PackedFloatingMUL(uVar8,uVar2);
  uVar7 = FloatingReciprocalAprox(uVar7,uVar3);
  uVar3 = PackedFloatingReciprocalIter1(uVar3,uVar7);
  uVar3 = PackedFloatingReciprocalIter2(uVar3,uVar7);
  uVar3 = PackedFloatingMUL(uVar3,uVar8);
  uVar2 = PackedFloatingADD(uVar2,uVar3);
  uVar3 = PackedFloatingADD(~uVar5 & (ulonglong)DAT_0047b0f8 ^ DAT_0047b098 & in_MM0,
                            (ulonglong)DAT_0047b0f4);
  uVar2 = PackedFloatingADD(uVar2,~uVar5 & uVar2);
  uVar2 = PackedFloatingADD(uVar3,uVar2 | (ulonglong)(uVar1 * -0x80000000) ^ DAT_0047b098 & in_MM0);
  return (ulonglong)(DAT_0047b0b4 & uVar6) | ~(ulonglong)uVar6 & uVar2;
}



/* FUN_004607a0 @ 004607a0 */

ulonglong FUN_004607a0(void)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  ulonglong in_MM0;
  ulonglong uVar4;
  undefined8 uVar5;
  undefined4 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  
  uVar1 = (uint)in_MM0;
  if ((int)(uVar1 ^ uVar1 & 0x80000000) < DAT_0047b154) {
    uVar5 = PackedFloatingMUL(in_MM0 & DAT_0047b09c,(ulonglong)DAT_0047b150);
    uVar4 = PackedFloatingToIntDwordConv(uVar5,uVar5);
    uVar2 = (uint)uVar4;
    uVar5 = PackedIntToFloatingDwordConv(uVar4,uVar4);
    uVar5 = PackedFloatingMUL(CONCAT44((int)uVar5,(int)uVar5),DAT_0047b060);
    uVar7 = PackedFloatingADD(in_MM0 & DAT_0047b09c,uVar5);
    uVar6 = (undefined4)((ulonglong)uVar5 >> 0x20);
    uVar5 = PackedFloatingADD(uVar7,CONCAT44(uVar6,uVar6));
    uVar5 = CONCAT44((int)uVar5,(int)uVar5);
    if ((uVar4 & 1) != 0) {
      uVar5 = PackedFloatingSUBR(uVar5,DAT_0047b070);
    }
    iVar3 = (uVar1 >> 0x1f ^ uVar2 >> 2) << 0x1f;
    uVar7 = PackedFloatingMUL(uVar5,uVar5);
    uVar9 = PackedFloatingMUL(DAT_0047b068,uVar7);
    uVar8 = PackedFloatingMUL(DAT_0047b078,uVar7);
    uVar10 = PackedFloatingADD(uVar9,DAT_0047b018);
    uVar9 = PackedFloatingMUL(DAT_0047b080,uVar7);
    uVar8 = PackedFloatingMUL(uVar10,uVar8);
    uVar10 = PackedFloatingADD(uVar8,DAT_0047b018);
    uVar8 = PackedFloatingMUL(DAT_0047b088,uVar7);
    uVar7 = PackedFloatingMUL(uVar9,uVar10);
    uVar7 = PackedFloatingADD(uVar7,DAT_0047b018);
    uVar7 = PackedFloatingMUL(uVar7,CONCAT44((int)DAT_0047b018,(int)uVar8));
    uVar7 = PackedFloatingADD(uVar7,DAT_0047b018 >> 0x20);
    uVar4 = PackedFloatingMUL(uVar7,CONCAT44((int)uVar5,(int)DAT_0047b018));
    if (((uVar2 ^ uVar2 >> 1) & 1) != 0) {
      uVar4 = CONCAT44((int)uVar4,(int)(uVar4 >> 0x20));
    }
    uVar4 = CONCAT44(iVar3,iVar3) ^ uVar4 ^ (uVar1 & 0x80000000 ^ (uVar2 >> 1) << 0x1f);
  }
  else {
    uVar4 = (ulonglong)DAT_0047b0a8;
  }
  return uVar4;
}



/* FUN_004608c0 @ 004608c0 */

void FUN_004608c0(void)

{
  ulonglong in_MM0;
  undefined8 uVar1;
  ulonglong uVar2;
  undefined4 uVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  
  if ((int)((uint)in_MM0 ^ (uint)in_MM0 & 0x80000000) < DAT_0047b154) {
    uVar1 = PackedFloatingMUL(in_MM0 & DAT_0047b09c,(ulonglong)DAT_0047b150);
    uVar2 = PackedFloatingToIntDwordConv(uVar1,uVar1);
    uVar1 = PackedIntToFloatingDwordConv(uVar2,uVar2);
    uVar1 = PackedFloatingMUL(CONCAT44((int)uVar1,(int)uVar1),DAT_0047b060);
    uVar4 = PackedFloatingADD(in_MM0 & DAT_0047b09c,uVar1);
    uVar3 = (undefined4)((ulonglong)uVar1 >> 0x20);
    uVar1 = PackedFloatingADD(uVar4,CONCAT44(uVar3,uVar3));
    uVar1 = CONCAT44((int)uVar1,(int)uVar1);
    if ((uVar2 & 1) != 0) {
      uVar1 = PackedFloatingSUBR(uVar1,DAT_0047b070);
    }
    uVar4 = PackedFloatingMUL(uVar1,uVar1);
    uVar6 = PackedFloatingMUL(DAT_0047b068,uVar4);
    uVar5 = PackedFloatingMUL(DAT_0047b078,uVar4);
    uVar7 = PackedFloatingADD(uVar6,DAT_0047b018);
    uVar6 = PackedFloatingMUL(DAT_0047b080,uVar4);
    uVar5 = PackedFloatingMUL(uVar7,uVar5);
    uVar7 = PackedFloatingADD(uVar5,DAT_0047b018);
    uVar5 = PackedFloatingMUL(DAT_0047b088,uVar4);
    uVar4 = PackedFloatingMUL(uVar6,uVar7);
    uVar4 = PackedFloatingADD(uVar4,DAT_0047b018);
    uVar4 = PackedFloatingMUL(uVar4,CONCAT44((int)DAT_0047b018,(int)uVar5));
    uVar4 = PackedFloatingADD(uVar4,DAT_0047b018 >> 0x20);
    PackedFloatingMUL(uVar4,CONCAT44((int)uVar1,(int)DAT_0047b018));
  }
  return;
}



/* FUN_00460cb8 @ 00460cb8 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_00460cb8(void)

{
  void *extraout_ECX;
  
  FUN_00460cd0();
  _DAT_004d9964 = FUN_00463737();
  FUN_004636e7(extraout_ECX);
  return;
}



/* FUN_00460ccf @ 00460ccf */

void FUN_00460ccf(void)

{
  return;
}



/* FUN_00460cd0 @ 00460cd0 */

void FUN_00460cd0(void)

{
  PTR_FUN_0047b1ac = &LAB_004637ba;
  PTR_FUN_0047b1a8 = __cfltcvt;
  PTR_FUN_0047b1b0 = __fassign;
  PTR_FUN_0047b1b4 = FUN_00463760;
  PTR_FUN_0047b1b8 = &LAB_00463808;
  PTR_FUN_0047b1bc = __cfltcvt;
  return;
}



/* crt_onexit @ 00460d08 */

/* registers an onexit/atexit callback */

void * __cdecl crt_onexit(void *func)

{
  size_t sVar1;
  void *pvVar2;
  
  crt_exit_lock();
  sVar1 = crt_msize(crt_onexit_table_end);
  if (sVar1 < (uint)((int)crt_onexit_table_begin + (4 - (int)crt_onexit_table_end))) {
    sVar1 = crt_msize(crt_onexit_table_end);
    pvVar2 = crt_realloc(crt_onexit_table_end,sVar1 + 0x10);
    if (pvVar2 == (void *)0x0) {
      func = (void *)0x0;
      goto LAB_00460d7d;
    }
    crt_onexit_table_begin =
         (undefined4 *)
         ((int)pvVar2 + ((int)crt_onexit_table_begin - (int)crt_onexit_table_end >> 2) * 4);
    crt_onexit_table_end = pvVar2;
  }
  *crt_onexit_table_begin = func;
  crt_onexit_table_begin = crt_onexit_table_begin + 1;
LAB_00460d7d:
  crt_exit_unlock();
  return func;
}



/* crt_atexit @ 00460d86 */

/* atexit wrapper (returns 0/-1) */

int __cdecl crt_atexit(void *func)

{
  void *pvVar1;
  
  pvVar1 = crt_onexit(func);
  return (pvVar1 != (void *)0x0) - 1;
}



/* crt_free @ 00460dc7 */

/* CRT free wrapper */

void __cdecl crt_free(void *ptr)

{
  crt_free_base(ptr);
  return;
}



/* FUN_00460dd2 @ 00460dd2 */

int __thiscall FUN_00460dd2(void *this,byte *param_1)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  uint c;
  byte *pbVar4;
  undefined *puVar5;
  
  while( true ) {
    if (DAT_0047b3cc < 2) {
      uVar1 = (byte)crt_ctype_table[(uint)*param_1 * 2] & 8;
      this = crt_ctype_table;
    }
    else {
      puVar5 = (undefined *)0x8;
      uVar1 = crt_isctype(this,(uint)*param_1,8);
      this = puVar5;
    }
    if (uVar1 == 0) break;
    param_1 = param_1 + 1;
  }
  uVar1 = (uint)*param_1;
  pbVar4 = param_1 + 1;
  if ((uVar1 == 0x2d) || (c = uVar1, uVar1 == 0x2b)) {
    c = (uint)*pbVar4;
    pbVar4 = param_1 + 2;
  }
  iVar3 = 0;
  while( true ) {
    if (DAT_0047b3cc < 2) {
      uVar2 = (byte)crt_ctype_table[c * 2] & 4;
    }
    else {
      puVar5 = (undefined *)0x4;
      uVar2 = crt_isctype(this,c,4);
      this = puVar5;
    }
    if (uVar2 == 0) break;
    iVar3 = (c - 0x30) + iVar3 * 10;
    c = (uint)*pbVar4;
    pbVar4 = pbVar4 + 1;
  }
  if (uVar1 == 0x2d) {
    iVar3 = -iVar3;
  }
  return iVar3;
}



/* crt_fclose @ 00460e5d */

/* fclose wrapper with CRT lock/unlock */

int __cdecl crt_fclose(FILE *fp)

{
  int iVar1;
  
  iVar1 = -1;
  if ((fp->_flag & 0x40) == 0) {
    crt_lock_file(fp);
    iVar1 = __fclose_lk(fp);
    crt_unlock_file(fp);
  }
  else {
    fp->_flag = 0;
  }
  return iVar1;
}



/* __fclose_lk @ 00460e8e */

/* Library Function - Single Match
    __fclose_lk
   
   Library: Visual Studio 2003 Release */

int __cdecl __fclose_lk(FILE *param_1)

{
  int iVar1;
  int iVar2;
  
  iVar2 = -1;
  if ((param_1->_flag & 0x83) != 0) {
    iVar2 = crt_flushbuf(param_1);
    __freebuf(param_1);
    iVar1 = crt_close(param_1->_file);
    if (iVar1 < 0) {
      iVar2 = -1;
    }
    else if (param_1->_tmpfname != (char *)0x0) {
      crt_free_base(param_1->_tmpfname);
      param_1->_tmpfname = (char *)0x0;
    }
  }
  param_1->_flag = 0;
  return iVar2;
}



/* _strchr @ 00460ef0 */

/* Library Function - Single Match
    _strchr
   
   Libraries: Visual Studio 1998 Debug, Visual Studio 1998 Release */

char * __cdecl _strchr(char *_Str,int _Val)

{
  uint uVar1;
  char cVar2;
  uint uVar3;
  uint uVar4;
  uint *puVar5;
  
  while (((uint)_Str & 3) != 0) {
    uVar1 = *(uint *)_Str;
    if ((char)uVar1 == (char)_Val) {
      return (char *)(uint *)_Str;
    }
    _Str = (char *)((int)_Str + 1);
    if ((char)uVar1 == '\0') {
      return (char *)0x0;
    }
  }
  while( true ) {
    while( true ) {
      uVar1 = *(uint *)_Str;
      uVar4 = uVar1 ^ CONCAT22(CONCAT11((char)_Val,(char)_Val),CONCAT11((char)_Val,(char)_Val));
      uVar3 = uVar1 ^ 0xffffffff ^ uVar1 + 0x7efefeff;
      puVar5 = (uint *)((int)_Str + 4);
      if (((uVar4 ^ 0xffffffff ^ uVar4 + 0x7efefeff) & 0x81010100) != 0) break;
      _Str = (char *)puVar5;
      if ((uVar3 & 0x81010100) != 0) {
        if ((uVar3 & 0x1010100) != 0) {
          return (char *)0x0;
        }
        if ((uVar1 + 0x7efefeff & 0x80000000) == 0) {
          return (char *)0x0;
        }
      }
    }
    uVar1 = *(uint *)_Str;
    if ((char)uVar1 == (char)_Val) {
      return (char *)(uint *)_Str;
    }
    if ((char)uVar1 == '\0') {
      return (char *)0x0;
    }
    cVar2 = (char)(uVar1 >> 8);
    if (cVar2 == (char)_Val) {
      return (char *)((int)_Str + 1);
    }
    if (cVar2 == '\0') {
      return (char *)0x0;
    }
    cVar2 = (char)(uVar1 >> 0x10);
    if (cVar2 == (char)_Val) {
      return (char *)((int)_Str + 2);
    }
    if (cVar2 == '\0') break;
    cVar2 = (char)(uVar1 >> 0x18);
    if (cVar2 == (char)_Val) {
      return (char *)((int)_Str + 3);
    }
    _Str = (char *)puVar5;
    if (cVar2 == '\0') {
      return (char *)0x0;
    }
  }
  return (char *)0x0;
}



/* FUN_00460fac @ 00460fac */

char * __cdecl FUN_00460fac(char *param_1,int param_2,undefined4 *param_3)

{
  int *piVar1;
  uint uVar2;
  char *pcVar3;
  
  if (param_2 < 1) {
    param_1 = (char *)0x0;
  }
  else {
    crt_lock_file((FILE *)param_3);
    pcVar3 = param_1;
    do {
      param_2 = param_2 + -1;
      if (param_2 == 0) break;
      piVar1 = param_3 + 1;
      *piVar1 = *piVar1 + -1;
      if (*piVar1 < 0) {
        uVar2 = crt_filbuf((FILE *)param_3);
      }
      else {
        uVar2 = (uint)*(byte *)*param_3;
        *param_3 = (byte *)*param_3 + 1;
      }
      if (uVar2 == 0xffffffff) {
        if (pcVar3 == param_1) {
          param_1 = (char *)0x0;
          goto LAB_00461000;
        }
        break;
      }
      *pcVar3 = (char)uVar2;
      pcVar3 = pcVar3 + 1;
    } while ((char)uVar2 != '\n');
    *pcVar3 = '\0';
LAB_00461000:
    crt_unlock_file((FILE *)param_3);
  }
  return param_1;
}



/* crt_fsopen @ 0046100e */

/* opens file with explicit share mode (fopen uses share=0x40) */

FILE * __cdecl crt_fsopen(char *path,char *mode,uint share)

{
  FILE *stream;
  FILE *pFVar1;
  
  stream = crt_getstream();
  if (stream == (FILE *)0x0) {
    return (FILE *)0x0;
  }
  pFVar1 = crt_openfile(path,mode,share,stream);
  crt_unlock_file(stream);
  return pFVar1;
}



/* crt_fopen @ 0046103f */

/* fopen wrapper (calls crt_fsopen with share=0x40) */

FILE * __cdecl crt_fopen(char *path,char *mode)

{
  FILE *pFVar1;
  
  pFVar1 = crt_fsopen(path,mode,0x40);
  return pFVar1;
}



/* __ftol @ 00461054 */

/* Library Function - Single Match
    __ftol
   
   Library: Visual Studio */

longlong __ftol(void)

{
  float10 in_ST0;
  
  return (longlong)ROUND(in_ST0);
}



/* operator_new @ 0046107b */

/* Library Function - Single Match
    void * __cdecl operator new(unsigned int)
   
   Library: Visual Studio 2003 Release */

void * __cdecl operator_new(uint param_1)

{
  void *pvVar1;
  
  pvVar1 = __nh_malloc(param_1,1);
  return pvVar1;
}



/* crt_vsprintf @ 00461089 */

/* CRT: format string to buffer */

int __cdecl crt_vsprintf(char *dst,char *fmt,void *args)

{
  int iVar1;
  FILE local_24;
  
  local_24._base = dst;
  local_24._ptr = dst;
  local_24._flag = 0x42;
  local_24._cnt = 0x7fffffff;
  iVar1 = crt_output(&local_24,fmt,args);
  local_24._cnt = local_24._cnt + -1;
  if (local_24._cnt < 0) {
    crt_flsbuf(0,&local_24);
  }
  else {
    *local_24._ptr = '\0';
  }
  return iVar1;
}



/* crt_atof_l @ 004610da */

/* CRT: parse string to double (atof-style, locale) */

double __thiscall crt_atof_l(void *this,void *locale,char *str)

{
  uint uVar1;
  int iVar2;
  byte *this_00;
  undefined *puVar3;
  uint local_1c [6];
  
  while( true ) {
    if (DAT_0047b3cc < 2) {
      uVar1 = (byte)crt_ctype_table[(uint)*(byte *)locale * 2] & 8;
      this = crt_ctype_table;
    }
    else {
      puVar3 = (undefined *)0x8;
      uVar1 = crt_isctype(this,(uint)*(byte *)locale,8);
      this = puVar3;
    }
    if (uVar1 == 0) break;
    locale = (void *)((int)locale + 1);
  }
  this_00 = locale;
  _strlen(locale);
  iVar2 = FUN_00464be7(this_00,local_1c,locale);
  return *(double *)(iVar2 + 0x10);
}



/* FUN_00461140 @ 00461140 */

void FUN_00461140(void)

{
  float10 in_ST0;
  float10 in_ST1;
  
  FUN_00461162(SUB84((double)in_ST1,0),(uint)((ulonglong)(double)in_ST1 >> 0x20),
               SUB84((double)in_ST0,0),(uint)((ulonglong)(double)in_ST0 >> 0x20));
  return;
}



/* FUN_00461335 @ 00461335 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_00461335(void)

{
  float10 in_ST0;
  
  if (ROUND(in_ST0) == in_ST0) {
    return;
  }
  return;
}



/* crt_strtok @ 0046135d */

/* CRT: tokenize string, uses TLS for state */

char * __cdecl crt_strtok(char *str,char *delim)

{
  byte bVar1;
  DWORD *pDVar2;
  int iVar3;
  byte *pbVar4;
  byte local_24 [32];
  
  pDVar2 = crt_get_thread_data();
  pbVar4 = local_24;
  for (iVar3 = 8; iVar3 != 0; iVar3 = iVar3 + -1) {
    pbVar4[0] = 0;
    pbVar4[1] = 0;
    pbVar4[2] = 0;
    pbVar4[3] = 0;
    pbVar4 = pbVar4 + 4;
  }
  do {
    bVar1 = *delim;
    local_24[bVar1 >> 3] = local_24[bVar1 >> 3] | '\x01' << (bVar1 & 7);
    delim = (char *)((byte *)delim + 1);
  } while (bVar1 != 0);
  if (str == (char *)0x0) {
    str = (char *)pDVar2[6];
  }
  for (; (bVar1 = *str, pbVar4 = (byte *)str, (local_24[bVar1 >> 3] & (byte)(1 << (bVar1 & 7))) != 0
         && (bVar1 != 0)); str = (char *)((byte *)str + 1)) {
  }
  do {
    bVar1 = *pbVar4;
    if (bVar1 == 0) {
LAB_004613ec:
      pDVar2[6] = (DWORD)pbVar4;
      return (char *)(-(uint)((byte *)str != pbVar4) & (uint)str);
    }
    if ((local_24[bVar1 >> 3] & (byte)(1 << (bVar1 & 7))) != 0) {
      *pbVar4 = 0;
      pbVar4 = pbVar4 + 1;
      goto LAB_004613ec;
    }
    pbVar4 = pbVar4 + 1;
  } while( true );
}



/* _strncmp @ 00461410 */

/* Library Function - Single Match
    _strncmp
   
   Libraries: Visual Studio 1998 Debug, Visual Studio 1998 Release */

int __cdecl _strncmp(char *_Str1,char *_Str2,size_t _MaxCount)

{
  char cVar1;
  char cVar2;
  size_t sVar3;
  int iVar4;
  uint uVar5;
  char *pcVar6;
  char *pcVar7;
  
  uVar5 = 0;
  sVar3 = _MaxCount;
  pcVar6 = _Str1;
  if (_MaxCount != 0) {
    do {
      if (sVar3 == 0) break;
      sVar3 = sVar3 - 1;
      cVar1 = *pcVar6;
      pcVar6 = pcVar6 + 1;
    } while (cVar1 != '\0');
    iVar4 = _MaxCount - sVar3;
    do {
      pcVar6 = _Str2;
      pcVar7 = _Str1;
      if (iVar4 == 0) break;
      iVar4 = iVar4 + -1;
      pcVar7 = _Str1 + 1;
      pcVar6 = _Str2 + 1;
      cVar2 = *_Str1;
      cVar1 = *_Str2;
      _Str2 = pcVar6;
      _Str1 = pcVar7;
    } while (cVar1 == cVar2);
    uVar5 = 0;
    if ((byte)pcVar6[-1] <= (byte)pcVar7[-1]) {
      if (pcVar6[-1] == pcVar7[-1]) {
        return 0;
      }
      uVar5 = 0xfffffffe;
    }
    uVar5 = ~uVar5;
  }
  return uVar5;
}



/* crt_fflush @ 00461448 */

/* CRT: fflush wrapper (NULL flushes all) */

int __cdecl crt_fflush(FILE *fp)

{
  int iVar1;
  
  if (fp == (FILE *)0x0) {
    iVar1 = crt_flushall(0);
    return iVar1;
  }
  crt_lock_file(fp);
  iVar1 = crt_fflush_nolock(fp);
  crt_unlock_file(fp);
  return iVar1;
}



/* crt_fflush_nolock @ 00461477 */

/* CRT: fflush without lock */

int __cdecl crt_fflush_nolock(FILE *fp)

{
  int iVar1;
  
  iVar1 = crt_flushbuf(fp);
  if (iVar1 != 0) {
    return -1;
  }
  if ((fp->_flag & 0x4000) != 0) {
    iVar1 = crt_commit(fp->_file);
    return -(uint)(iVar1 != 0);
  }
  return 0;
}



/* crt_flushbuf @ 004614a5 */

/* CRT: flush write buffer */

int __cdecl crt_flushbuf(FILE *fp)

{
  uint uVar1;
  int iVar2;
  uint count;
  
  iVar2 = 0;
  if ((((byte)fp->_flag & 3) == 2) && ((fp->_flag & 0x108U) != 0)) {
    count = (int)fp->_ptr - (int)fp->_base;
    if (0 < (int)count) {
      uVar1 = crt_write(fp->_file,fp->_base,count);
      if (uVar1 == count) {
        if ((fp->_flag & 0x80U) != 0) {
          fp->_flag = fp->_flag & 0xfffffffd;
        }
      }
      else {
        fp->_flag = fp->_flag | 0x20;
        iVar2 = -1;
      }
    }
  }
  fp->_cnt = 0;
  fp->_ptr = fp->_base;
  return iVar2;
}



/* crt_flushall @ 0046150a */

/* CRT: flush all streams (mode 0/1) */

int __cdecl crt_flushall(int mode)

{
  FILE *pFVar1;
  int iVar2;
  int iVar3;
  int stream_index;
  int iVar4;
  
  iVar3 = 0;
  iVar4 = 0;
  crt_lock(2);
  stream_index = 0;
  if (0 < DAT_004db4e0) {
    do {
      pFVar1 = *(FILE **)(DAT_004da4c4 + stream_index * 4);
      if ((pFVar1 != (FILE *)0x0) && ((pFVar1->_flag & 0x83) != 0)) {
        crt_lock_file2(stream_index,pFVar1);
        pFVar1 = *(FILE **)(DAT_004da4c4 + stream_index * 4);
        if ((pFVar1->_flag & 0x83U) != 0) {
          if (mode == 1) {
            iVar2 = crt_fflush_nolock(pFVar1);
            if (iVar2 != -1) {
              iVar3 = iVar3 + 1;
            }
          }
          else if ((mode == 0) && ((pFVar1->_flag & 2U) != 0)) {
            iVar2 = crt_fflush_nolock(pFVar1);
            if (iVar2 == -1) {
              iVar4 = -1;
            }
          }
        }
        crt_unlock_file2(stream_index,*(FILE **)(DAT_004da4c4 + stream_index * 4));
      }
      stream_index = stream_index + 1;
    } while (stream_index < DAT_004db4e0);
  }
  crt_unlock(2);
  if (mode != 1) {
    iVar3 = iVar4;
  }
  return iVar3;
}



/* crt_fwrite @ 004615ae */

/* fwrite wrapper with CRT lock/unlock */

uint __cdecl crt_fwrite(void *ptr,uint size,uint count,FILE *fp)

{
  uint uVar1;
  
  crt_lock_file(fp);
  uVar1 = crt_fwrite_nolock(ptr,size,count,fp);
  crt_unlock_file(fp);
  return uVar1;
}



/* crt_fwrite_nolock @ 004615dd */

/* fwrite implementation (no locking) */

uint __cdecl crt_fwrite_nolock(void *ptr,uint size,uint count,FILE *fp)

{
  FILE *fp_00;
  int iVar1;
  FILE *size_00;
  uint uVar2;
  FILE *pFVar3;
  FILE *pFVar4;
  FILE *pFVar5;
  
  fp_00 = fp;
  pFVar4 = (FILE *)(size * count);
  if (pFVar4 == (FILE *)0x0) {
    count = 0;
  }
  else {
    pFVar3 = pFVar4;
    if ((fp->_flag & 0x10c) == 0) {
      fp = (FILE *)0x1000;
    }
    else {
      fp = (FILE *)fp->_bufsiz;
    }
    do {
      uVar2 = fp_00->_flag & 0x108;
      if ((uVar2 == 0) || (pFVar5 = (FILE *)fp_00->_cnt, pFVar5 == (FILE *)0x0)) {
        if (fp <= pFVar3) {
          if ((uVar2 != 0) && (iVar1 = crt_flushbuf(fp_00), iVar1 != 0)) {
LAB_004616de:
            return (uint)((int)pFVar4 - (int)pFVar3) / size;
          }
          pFVar5 = pFVar3;
          if (fp != (FILE *)0x0) {
            pFVar5 = (FILE *)((int)pFVar3 - (uint)pFVar3 % (uint)fp);
          }
          size_00 = (FILE *)crt_write(fp_00->_file,ptr,(uint)pFVar5);
          if ((size_00 == (FILE *)0xffffffff) ||
             (pFVar3 = (FILE *)((int)pFVar3 - (int)size_00), size_00 < pFVar5)) {
            fp_00->_flag = fp_00->_flag | 0x20;
            goto LAB_004616de;
          }
          goto LAB_00461695;
        }
        iVar1 = crt_flsbuf((int)*(char *)ptr,fp_00);
        if (iVar1 == -1) goto LAB_004616de;
        ptr = (void *)((int)ptr + 1);
        fp = (FILE *)fp_00->_bufsiz;
        pFVar3 = (FILE *)((int)&pFVar3[-1]._tmpfname + 3);
        if ((int)fp < 1) {
          fp = (FILE *)0x1;
        }
      }
      else {
        size_00 = pFVar3;
        if (pFVar5 <= pFVar3) {
          size_00 = pFVar5;
        }
        crt_bufcpy(fp_00->_ptr,ptr,(size_t)size_00);
        fp_00->_cnt = fp_00->_cnt - (int)size_00;
        fp_00->_ptr = (char *)((int)&size_00->_ptr + (int)fp_00->_ptr);
        pFVar3 = (FILE *)((int)pFVar3 - (int)size_00);
LAB_00461695:
        ptr = (void *)((int)ptr + (int)size_00);
      }
    } while (pFVar3 != (FILE *)0x0);
  }
  return count;
}



/* crt_sprintf @ 004616e7 */

/* sprintf-style formatter (uses CRT output core) */

int __cdecl crt_sprintf(char *dst,char *fmt,...)

{
  int iVar1;
  FILE local_24;
  
  local_24._base = dst;
  local_24._ptr = dst;
  local_24._flag = 0x42;
  local_24._cnt = 0x7fffffff;
  iVar1 = crt_output(&local_24,fmt,&stack0x0000000c);
  local_24._cnt = local_24._cnt + -1;
  if (local_24._cnt < 0) {
    crt_flsbuf(0,&local_24);
  }
  else {
    *local_24._ptr = '\0';
  }
  return iVar1;
}



/* FUN_00461739 @ 00461739 */

void __cdecl FUN_00461739(DWORD param_1)

{
  DWORD *pDVar1;
  
  pDVar1 = crt_get_thread_data();
  pDVar1[5] = param_1;
  return;
}



/* _rand @ 00461746 */

/* Library Function - Single Match
    _rand
   
   Libraries: Visual Studio 2003 Release, Visual Studio 2005 Release, Visual Studio 2008 Release */

int __cdecl _rand(void)

{
  DWORD *pDVar1;
  uint uVar2;
  
  pDVar1 = crt_get_thread_data();
  uVar2 = pDVar1[5] * 0x343fd + 0x269ec3;
  pDVar1[5] = uVar2;
  return uVar2 >> 0x10 & 0x7fff;
}



/* FUN_00461768 @ 00461768 */

HANDLE __cdecl FUN_00461768(LPCSTR param_1,uint *param_2)

{
  HANDLE pvVar1;
  DWORD DVar2;
  int *piVar3;
  uint uVar4;
  _WIN32_FIND_DATAA local_144;
  
  pvVar1 = FindFirstFileA(param_1,&local_144);
  if (pvVar1 != (HANDLE)0xffffffff) {
    *param_2 = -(uint)(local_144.dwFileAttributes != 0x80) & local_144.dwFileAttributes;
    uVar4 = ___timet_from_ft((FILETIME *)&local_144.ftCreationTime);
    param_2[1] = uVar4;
    uVar4 = ___timet_from_ft((FILETIME *)&local_144.ftLastAccessTime);
    param_2[2] = uVar4;
    uVar4 = ___timet_from_ft((FILETIME *)&local_144.ftLastWriteTime);
    param_2[3] = uVar4;
    param_2[4] = local_144.nFileSizeLow;
    crt_strcpy((char *)(param_2 + 5),local_144.cFileName);
    return pvVar1;
  }
  DVar2 = GetLastError();
  if (DVar2 < 2) {
LAB_004617a6:
    piVar3 = crt_errno_ptr();
    *piVar3 = 0x16;
  }
  else {
    if (3 < DVar2) {
      if (DVar2 == 8) {
        piVar3 = crt_errno_ptr();
        *piVar3 = 0xc;
        return (HANDLE)0xffffffff;
      }
      if (DVar2 != 0x12) goto LAB_004617a6;
    }
    piVar3 = crt_errno_ptr();
    *piVar3 = 2;
  }
  return (HANDLE)0xffffffff;
}



/* FUN_00461835 @ 00461835 */

undefined4 __cdecl FUN_00461835(HANDLE param_1,uint *param_2)

{
  WINBOOL WVar1;
  DWORD DVar2;
  int *piVar3;
  uint uVar4;
  _WIN32_FIND_DATAA local_144;
  
  WVar1 = FindNextFileA(param_1,&local_144);
  if (WVar1 != 0) {
    *param_2 = -(uint)(local_144.dwFileAttributes != 0x80) & local_144.dwFileAttributes;
    uVar4 = ___timet_from_ft((FILETIME *)&local_144.ftCreationTime);
    param_2[1] = uVar4;
    uVar4 = ___timet_from_ft((FILETIME *)&local_144.ftLastAccessTime);
    param_2[2] = uVar4;
    uVar4 = ___timet_from_ft((FILETIME *)&local_144.ftLastWriteTime);
    param_2[3] = uVar4;
    param_2[4] = local_144.nFileSizeLow;
    crt_strcpy((char *)(param_2 + 5),local_144.cFileName);
    return 0;
  }
  DVar2 = GetLastError();
  if (DVar2 < 2) {
LAB_0046186f:
    piVar3 = crt_errno_ptr();
    *piVar3 = 0x16;
  }
  else {
    if (3 < DVar2) {
      if (DVar2 == 8) {
        piVar3 = crt_errno_ptr();
        *piVar3 = 0xc;
        return 0xffffffff;
      }
      if (DVar2 != 0x12) goto LAB_0046186f;
    }
    piVar3 = crt_errno_ptr();
    *piVar3 = 2;
  }
  return 0xffffffff;
}



/* FUN_004618fd @ 004618fd */

undefined4 __cdecl FUN_004618fd(HANDLE param_1)

{
  WINBOOL WVar1;
  int *piVar2;
  
  WVar1 = FindClose(param_1);
  if (WVar1 == 0) {
    piVar2 = crt_errno_ptr();
    *piVar2 = 0x16;
    return 0xffffffff;
  }
  return 0;
}



/* ___timet_from_ft @ 0046191d */

/* Library Function - Single Match
    ___timet_from_ft
   
   Library: Visual Studio 2003 Release */

int __cdecl ___timet_from_ft(FILETIME *param_1)

{
  WINBOOL WVar1;
  long lVar2;
  _SYSTEMTIME local_1c;
  _FILETIME local_c;
  
  if ((param_1->dwLowDateTime != 0) || (param_1->dwHighDateTime != 0)) {
    WVar1 = FileTimeToLocalFileTime((FILETIME *)param_1,&local_c);
    if (WVar1 != 0) {
      WVar1 = FileTimeToSystemTime(&local_c,&local_1c);
      if (WVar1 != 0) {
        lVar2 = crt_mktime((uint)local_1c.wYear,(uint)local_1c.wMonth,(uint)local_1c.wDay,
                           (uint)local_1c.wHour,(uint)local_1c.wMinute,(uint)local_1c.wSecond,-1);
        return lVar2;
      }
    }
  }
  return -1;
}



/* FUN_00461981 @ 00461981 */

void FUN_00461981(undefined4 param_1,undefined4 param_2,int param_3,undefined *param_4)

{
  int local_20;
  void *local_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  puStack_c = &DAT_0046f9e0;
  puStack_10 = &LAB_00465e70;
  local_14 = ExceptionList;
  local_8 = 0;
  ExceptionList = &local_14;
  for (local_20 = 0; local_20 < param_3; local_20 = local_20 + 1) {
    (*(code *)param_4)();
  }
  local_8 = 0xffffffff;
  FUN_004619eb();
  ExceptionList = local_14;
  return;
}



/* FUN_004619eb @ 004619eb */

void FUN_004619eb(void)

{
  int unaff_EBP;
  
  if (*(int *)(unaff_EBP + -0x20) == 0) {
    FUN_00461a83(*(undefined4 *)(unaff_EBP + 8),*(undefined4 *)(unaff_EBP + 0xc),
                 *(int *)(unaff_EBP + -0x1c),*(undefined **)(unaff_EBP + 0x18));
  }
  return;
}



/* FUN_00461a03 @ 00461a03 */

void FUN_00461a03(undefined4 param_1,undefined4 param_2,int param_3,undefined *param_4)

{
  void *local_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  puStack_c = &DAT_0046f9f0;
  puStack_10 = &LAB_00465e70;
  local_14 = ExceptionList;
  local_8 = 0;
  ExceptionList = &local_14;
  while( true ) {
    param_3 = param_3 + -1;
    if (param_3 < 0) break;
    (*(code *)param_4)();
  }
  local_8 = 0xffffffff;
  FUN_00461a6b();
  ExceptionList = local_14;
  return;
}



/* FUN_00461a6b @ 00461a6b */

void FUN_00461a6b(void)

{
  int unaff_EBP;
  
  if (*(int *)(unaff_EBP + -0x1c) == 0) {
    FUN_00461a83(*(undefined4 *)(unaff_EBP + 8),*(undefined4 *)(unaff_EBP + 0xc),
                 *(int *)(unaff_EBP + 0x10),*(undefined **)(unaff_EBP + 0x14));
  }
  return;
}



/* FUN_00461a83 @ 00461a83 */

void FUN_00461a83(undefined4 param_1,undefined4 param_2,int param_3,undefined *param_4)

{
  void *local_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  puStack_c = &DAT_0046fa00;
  puStack_10 = &LAB_00465e70;
  local_14 = ExceptionList;
  local_8 = 0;
  ExceptionList = &local_14;
  while( true ) {
    param_3 = param_3 + -1;
    if (param_3 < 0) break;
    (*(code *)param_4)();
  }
  ExceptionList = local_14;
  return;
}



/* crt_fread @ 00461af7 */

/* fread wrapper with CRT lock/unlock */

uint __cdecl crt_fread(void *ptr,uint size,uint count,FILE *fp)

{
  uint uVar1;
  
  crt_lock_file(fp);
  uVar1 = crt_fread_nolock(ptr,size,count,fp);
  crt_unlock_file(fp);
  return uVar1;
}



/* crt_fread_nolock @ 00461b26 */

/* fread implementation (no locking) */

uint __cdecl crt_fread_nolock(void *ptr,uint size,uint count,FILE *fp)

{
  FILE *fp_00;
  void *pvVar1;
  int iVar2;
  char *pcVar3;
  void *pvVar4;
  void *size_00;
  
  fp_00 = fp;
  pvVar4 = (void *)(size * count);
  if (pvVar4 == (void *)0x0) {
    count = 0;
  }
  else {
    pcVar3 = ptr;
    ptr = pvVar4;
    if ((fp->_flag & 0x10c) == 0) {
      fp = (FILE *)0x1000;
    }
    else {
      fp = (FILE *)fp->_bufsiz;
    }
    do {
      if (((fp_00->_flag & 0x10c) == 0) || (pvVar1 = (void *)fp_00->_cnt, pvVar1 == (void *)0x0)) {
        if (ptr < fp) {
          iVar2 = crt_filbuf(fp_00);
          if (iVar2 == -1) goto LAB_00461c02;
          *pcVar3 = (char)iVar2;
          fp = (FILE *)fp_00->_bufsiz;
          pcVar3 = pcVar3 + 1;
          ptr = (void *)((int)ptr + -1);
        }
        else {
          pvVar1 = ptr;
          if (fp != (FILE *)0x0) {
            pvVar1 = (void *)((int)ptr - (uint)ptr % (uint)fp);
          }
          iVar2 = crt_read(fp_00->_file,pcVar3,(uint)pvVar1);
          if (iVar2 == 0) {
            fp_00->_flag = fp_00->_flag | 0x10;
LAB_00461c02:
            return (uint)((int)pvVar4 - (int)ptr) / size;
          }
          if (iVar2 == -1) {
            fp_00->_flag = fp_00->_flag | 0x20;
            goto LAB_00461c02;
          }
          ptr = (void *)((int)ptr - iVar2);
          pcVar3 = pcVar3 + iVar2;
        }
      }
      else {
        size_00 = ptr;
        if (pvVar1 <= ptr) {
          size_00 = pvVar1;
        }
        crt_bufcpy(pcVar3,fp_00->_ptr,(size_t)size_00);
        ptr = (void *)((int)ptr - (int)size_00);
        fp_00->_cnt = fp_00->_cnt - (int)size_00;
        fp_00->_ptr = fp_00->_ptr + (int)size_00;
        pcVar3 = pcVar3 + (int)size_00;
      }
    } while (ptr != (void *)0x0);
  }
  return count;
}



/* crt_ftell @ 00461c0e */

/* CRT: ftell with file lock */

long __cdecl crt_ftell(FILE *fp)

{
  long lVar1;
  
  crt_lock_file(fp);
  lVar1 = crt_ftell_nolock(fp);
  crt_unlock_file(fp);
  return lVar1;
}



/* crt_ftell_nolock @ 00461c30 */

/* CRT: ftell without lock */

long __cdecl crt_ftell_nolock(FILE *fp)

{
  uint fd;
  uint uVar1;
  byte bVar2;
  int *piVar3;
  FILE *pFVar4;
  long lVar5;
  char *pcVar6;
  FILE *pFVar7;
  char *pcVar8;
  char *pcVar9;
  int iVar10;
  int local_c;
  int local_8;
  
  pFVar7 = fp;
  fd = fp->_file;
  if (fp->_cnt < 0) {
    fp->_cnt = 0;
  }
  local_8 = crt_lseek(fd,0,1);
  if (local_8 < 0) {
LAB_00461cbe:
    local_c = -1;
  }
  else {
    uVar1 = fp->_flag;
    if ((uVar1 & 0x108) == 0) {
      return local_8 - fp->_cnt;
    }
    pcVar6 = fp->_ptr;
    pcVar9 = fp->_base;
    local_c = (int)pcVar6 - (int)pcVar9;
    if ((uVar1 & 3) == 0) {
      if ((uVar1 & 0x80) == 0) {
        piVar3 = crt_errno_ptr();
        *piVar3 = 0x16;
        goto LAB_00461cbe;
      }
    }
    else {
      pcVar8 = pcVar9;
      if ((*(byte *)((&DAT_004da3c0)[(int)fd >> 5] + 4 + (fd & 0x1f) * 0x24) & 0x80) != 0) {
        for (; pcVar8 < pcVar6; pcVar8 = pcVar8 + 1) {
          if (*pcVar8 == '\n') {
            local_c = local_c + 1;
          }
        }
      }
    }
    if (local_8 != 0) {
      if ((fp->_flag & 1) != 0) {
        if (fp->_cnt == 0) {
          local_c = 0;
        }
        else {
          pFVar4 = (FILE *)(pcVar6 + (fp->_cnt - (int)pcVar9));
          iVar10 = (fd & 0x1f) * 0x24;
          if ((*(byte *)(iVar10 + 4 + (&DAT_004da3c0)[(int)fd >> 5]) & 0x80) != 0) {
            lVar5 = crt_lseek(fd,0,2);
            if (lVar5 == local_8) {
              pcVar6 = fp->_base;
              pcVar9 = pcVar6 + (int)&pFVar4->_ptr;
              fp = pFVar4;
              for (; pcVar6 < pcVar9; pcVar6 = pcVar6 + 1) {
                if (*pcVar6 == '\n') {
                  fp = (FILE *)((int)&fp->_ptr + 1);
                }
              }
              bVar2 = *(byte *)((int)&pFVar7->_flag + 1) & 0x20;
            }
            else {
              crt_lseek(fd,local_8,0);
              pFVar7 = (FILE *)0x200;
              if ((((FILE *)0x200 < pFVar4) || ((fp->_flag & 8U) == 0)) ||
                 ((fp->_flag & 0x400U) != 0)) {
                pFVar7 = (FILE *)fp->_bufsiz;
              }
              bVar2 = *(byte *)(iVar10 + 4 + (&DAT_004da3c0)[(int)fd >> 5]) & 4;
              fp = pFVar7;
            }
            pFVar4 = fp;
            if (bVar2 != 0) {
              pFVar4 = (FILE *)((int)&fp->_ptr + 1);
            }
          }
          fp = pFVar4;
          local_8 = local_8 - (int)fp;
        }
      }
      local_c = local_c + local_8;
    }
  }
  return local_c;
}



/* crt_fseek @ 00461d91 */

/* fseek wrapper with CRT lock/unlock */

int __cdecl crt_fseek(FILE *fp,long offset,int origin)

{
  int iVar1;
  
  crt_lock_file(fp);
  iVar1 = crt_fseek_nolock(fp,offset,origin);
  crt_unlock_file(fp);
  return iVar1;
}



/* crt_fseek_nolock @ 00461dbd */

/* fseek implementation (uses crt_lseek) */

int __cdecl crt_fseek_nolock(FILE *fp,long offset,int origin)

{
  uint uVar1;
  long lVar2;
  int *piVar3;
  int iVar4;
  
  if (((fp->_flag & 0x83U) == 0) || (((origin != 0 && (origin != 1)) && (origin != 2)))) {
    piVar3 = crt_errno_ptr();
    *piVar3 = 0x16;
    iVar4 = -1;
  }
  else {
    fp->_flag = fp->_flag & 0xffffffef;
    if (origin == 1) {
      lVar2 = crt_ftell_nolock(fp);
      offset = offset + lVar2;
      origin = 0;
    }
    crt_flushbuf(fp);
    uVar1 = fp->_flag;
    if ((uVar1 & 0x80) == 0) {
      if ((((uVar1 & 1) != 0) && ((uVar1 & 8) != 0)) && ((uVar1 & 0x400) == 0)) {
        fp->_bufsiz = 0x200;
      }
    }
    else {
      fp->_flag = uVar1 & 0xfffffffc;
    }
    lVar2 = crt_lseek(fp->_file,offset,origin);
    iVar4 = (lVar2 != -1) - 1;
  }
  return iVar4;
}



/* crt_snprintf @ 00461e4a */

/* CRT: size-limited sprintf */

int __cdecl crt_snprintf(char *dst,int size,char *fmt,...)

{
  int iVar1;
  FILE local_24;
  
  local_24._base = dst;
  local_24._ptr = dst;
  local_24._flag = 0x42;
  local_24._cnt = size;
  iVar1 = crt_output(&local_24,fmt,&stack0x00000010);
  local_24._cnt = local_24._cnt + -1;
  if (local_24._cnt < 0) {
    crt_flsbuf(0,&local_24);
  }
  else {
    *local_24._ptr = '\0';
  }
  return iVar1;
}



/* crt_tolower @ 00461e9b */

/* CRT: tolower (current locale) */

int __cdecl crt_tolower(int c)

{
  void *extraout_ECX;
  int unaff_EDI;
  bool bVar1;
  void *this;
  
  if (DAT_004d9a4c == 0) {
    if ((0x40 < c) && (c < 0x5b)) {
      return c + 0x20;
    }
  }
  else {
    InterlockedIncrement((LONG *)&DAT_004da3b0);
    bVar1 = DAT_004da3ac != 0;
    this = extraout_ECX;
    if (bVar1) {
      InterlockedDecrement((LONG *)&DAT_004da3b0);
      this = (void *)0x13;
      crt_lock(0x13);
    }
    c = crt_tolower_l(this,(void *)c,unaff_EDI);
    if (bVar1) {
      crt_unlock(0x13);
    }
    else {
      InterlockedDecrement((LONG *)&DAT_004da3b0);
    }
  }
  return c;
}



/* crt_tolower_l @ 00461f0a */

/* CRT: tolower with locale */

int __thiscall crt_tolower_l(void *this,void *locale,int c)

{
  void *pvVar1;
  uint uVar2;
  int iVar3;
  void *local_8;
  
  pvVar1 = locale;
  if (DAT_004d9a4c == 0) {
    if ((0x40 < (int)locale) && ((int)locale < 0x5b)) {
      pvVar1 = (void *)((int)locale + 0x20);
    }
  }
  else {
    iVar3 = 1;
    local_8 = this;
    if ((int)locale < 0x100) {
      if (DAT_0047b3cc < 2) {
        uVar2 = (byte)crt_ctype_table[(int)locale * 2] & 1;
      }
      else {
        uVar2 = crt_isctype(this,(int)locale,1);
      }
      if (uVar2 == 0) {
        return (int)pvVar1;
      }
    }
    if ((crt_ctype_table[((int)pvVar1 >> 8 & 0xffU) * 2 + 1] & 0x80) == 0) {
      locale = (void *)(CONCAT31((int3)((uint)locale >> 8),(char)pvVar1) & 0xffff00ff);
    }
    else {
      uVar2 = (uint)locale >> 0x10;
      locale._0_2_ = CONCAT11((char)pvVar1,(char)((uint)pvVar1 >> 8));
      locale = (void *)(CONCAT22((short)uVar2,locale._0_2_) & 0xff00ffff);
      iVar3 = 2;
    }
    iVar3 = crt_lcmap_string(DAT_004d9a4c,0x100,(char *)&locale,iVar3,(ushort *)&local_8,3,0,1);
    if (iVar3 != 0) {
      if (iVar3 == 1) {
        pvVar1 = (void *)((uint)local_8 & 0xff);
      }
      else {
        pvVar1 = (void *)((uint)local_8 & 0xffff);
      }
    }
  }
  return (int)pvVar1;
}



/* FUN_00461fd5 @ 00461fd5 */

int __cdecl FUN_00461fd5(byte *param_1)

{
  int iVar1;
  int iVar2;
  
  crt_lock_file2(1,(FILE *)&DAT_0047b3f8);
  iVar1 = FUN_004666f5((undefined4 *)&DAT_0047b3f8);
  iVar2 = crt_output((FILE *)&DAT_0047b3f8,(char *)param_1,&stack0x00000008);
  FUN_00466782(iVar1,(int *)&DAT_0047b3f8);
  crt_unlock_file2(1,(FILE *)&DAT_0047b3f8);
  return iVar2;
}



/* __alldiv @ 00462020 */

/* Library Function - Single Match
    __alldiv
   
   Library: Visual Studio */

undefined8 __alldiv(uint param_1,uint param_2,uint param_3,uint param_4)

{
  ulonglong uVar1;
  longlong lVar2;
  uint uVar3;
  int iVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  bool bVar10;
  char cVar11;
  uint uVar9;
  
  cVar11 = (int)param_2 < 0;
  if ((bool)cVar11) {
    bVar10 = param_1 != 0;
    param_1 = -param_1;
    param_2 = -(uint)bVar10 - param_2;
  }
  if ((int)param_4 < 0) {
    cVar11 = cVar11 + '\x01';
    bVar10 = param_3 != 0;
    param_3 = -param_3;
    param_4 = -(uint)bVar10 - param_4;
  }
  uVar3 = param_1;
  uVar5 = param_3;
  uVar6 = param_2;
  uVar9 = param_4;
  if (param_4 == 0) {
    uVar3 = param_2 / param_3;
    iVar4 = (int)(((ulonglong)param_2 % (ulonglong)param_3 << 0x20 | (ulonglong)param_1) /
                 (ulonglong)param_3);
  }
  else {
    do {
      uVar8 = uVar9 >> 1;
      uVar5 = uVar5 >> 1 | (uint)((uVar9 & 1) != 0) << 0x1f;
      uVar7 = uVar6 >> 1;
      uVar3 = uVar3 >> 1 | (uint)((uVar6 & 1) != 0) << 0x1f;
      uVar6 = uVar7;
      uVar9 = uVar8;
    } while (uVar8 != 0);
    uVar1 = CONCAT44(uVar7,uVar3) / (ulonglong)uVar5;
    iVar4 = (int)uVar1;
    lVar2 = (ulonglong)param_3 * (uVar1 & 0xffffffff);
    uVar3 = (uint)((ulonglong)lVar2 >> 0x20);
    uVar5 = uVar3 + iVar4 * param_4;
    if (((CARRY4(uVar3,iVar4 * param_4)) || (param_2 < uVar5)) ||
       ((param_2 <= uVar5 && (param_1 < (uint)lVar2)))) {
      iVar4 = iVar4 + -1;
    }
    uVar3 = 0;
  }
  if (cVar11 == '\x01') {
    bVar10 = iVar4 != 0;
    iVar4 = -iVar4;
    uVar3 = -(uint)bVar10 - uVar3;
  }
  return CONCAT44(uVar3,iVar4);
}



/* __allmul @ 004620d0 */

/* Library Function - Single Match
    __allmul
   
   Library: Visual Studio */

longlong __allmul(uint param_1,int param_2,uint param_3,int param_4)

{
  if (param_4 == 0 && param_2 == 0) {
    return (ulonglong)param_1 * (ulonglong)param_3;
  }
  return CONCAT44((int)((ulonglong)param_1 * (ulonglong)param_3 >> 0x20) +
                  param_2 * param_3 + param_1 * param_4,
                  (int)((ulonglong)param_1 * (ulonglong)param_3));
}



/* crt_toupper @ 00462104 */

/* CRT: toupper (current locale) */

int __cdecl crt_toupper(int c)

{
  void *extraout_ECX;
  int unaff_EDI;
  bool bVar1;
  void *this;
  
  if (DAT_004d9a4c == 0) {
    if ((0x60 < c) && (c < 0x7b)) {
      return c + -0x20;
    }
  }
  else {
    InterlockedIncrement((LONG *)&DAT_004da3b0);
    bVar1 = DAT_004da3ac != 0;
    this = extraout_ECX;
    if (bVar1) {
      InterlockedDecrement((LONG *)&DAT_004da3b0);
      this = (void *)0x13;
      crt_lock(0x13);
    }
    c = crt_toupper_l(this,(void *)c,unaff_EDI);
    if (bVar1) {
      crt_unlock(0x13);
    }
    else {
      InterlockedDecrement((LONG *)&DAT_004da3b0);
    }
  }
  return c;
}



/* crt_toupper_l @ 00462173 */

/* CRT: toupper with locale */

int __thiscall crt_toupper_l(void *this,void *locale,int c)

{
  void *pvVar1;
  uint uVar2;
  int iVar3;
  void *local_8;
  
  pvVar1 = locale;
  if (DAT_004d9a4c == 0) {
    if ((0x60 < (int)locale) && ((int)locale < 0x7b)) {
      pvVar1 = (void *)((int)locale - 0x20);
    }
  }
  else {
    local_8 = this;
    if ((int)locale < 0x100) {
      if (DAT_0047b3cc < 2) {
        uVar2 = (byte)crt_ctype_table[(int)locale * 2] & 2;
      }
      else {
        uVar2 = crt_isctype(this,(int)locale,2);
      }
      if (uVar2 == 0) {
        return (int)pvVar1;
      }
    }
    if ((crt_ctype_table[((int)pvVar1 >> 8 & 0xffU) * 2 + 1] & 0x80) == 0) {
      locale = (void *)(CONCAT31((int3)((uint)locale >> 8),(char)pvVar1) & 0xffff00ff);
      iVar3 = 1;
    }
    else {
      uVar2 = (uint)locale >> 0x10;
      locale._0_2_ = CONCAT11((char)pvVar1,(char)((uint)pvVar1 >> 8));
      locale = (void *)(CONCAT22((short)uVar2,locale._0_2_) & 0xff00ffff);
      iVar3 = 2;
    }
    iVar3 = crt_lcmap_string(DAT_004d9a4c,0x200,(char *)&locale,iVar3,(ushort *)&local_8,3,0,1);
    if (iVar3 != 0) {
      if (iVar3 == 1) {
        pvVar1 = (void *)((uint)local_8 & 0xff);
      }
      else {
        pvVar1 = (void *)((uint)local_8 & 0xffff);
      }
    }
  }
  return (int)pvVar1;
}



/* crt_beginthread @ 0046223f */

/* CRT: beginthread (CreateThread wrapper) */

void * __cdecl crt_beginthread(void *start,uint stack_size,void *arg)

{
  void *lpThreadId;
  HANDLE hThread;
  DWORD DVar1;
  
  DVar1 = 0;
  lpThreadId = crt_calloc(1,0x74);
  if (lpThreadId != (void *)0x0) {
    FUN_004654a5((int)lpThreadId);
    *(void **)((int)lpThreadId + 0x48) = start;
    *(void **)((int)lpThreadId + 0x4c) = arg;
    hThread = CreateThread((LPSECURITY_ATTRIBUTES)0x0,stack_size,crt_thread_entry,lpThreadId,4,
                           lpThreadId);
    *(HANDLE *)((int)lpThreadId + 4) = hThread;
    if ((hThread != (HANDLE)0x0) && (DVar1 = ResumeThread(hThread), DVar1 != 0xffffffff)) {
      return hThread;
    }
    DVar1 = GetLastError();
  }
  crt_free_base(lpThreadId);
  if (DVar1 != 0) {
    crt_dosmaperr(DVar1);
  }
  return (void *)0xffffffff;
}



/* crt_thread_entry @ 004622b6 */

/* CRT: thread start trampoline */

uint crt_thread_entry(void *thread_data)

{
  LPVOID pvVar1;
  WINBOOL WVar2;
  void *local_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_0046fa10;
  puStack_10 = &LAB_00465e70;
  local_14 = ExceptionList;
  ExceptionList = &local_14;
  pvVar1 = TlsGetValue(DAT_0047b6f0);
  if (pvVar1 != (LPVOID)0x0) {
    *(undefined4 *)((int)pvVar1 + 0x48) = *(undefined4 *)((int)thread_data + 0x48);
    *(undefined4 *)((int)pvVar1 + 0x4c) = *(undefined4 *)((int)thread_data + 0x4c);
    crt_free_thread_data(thread_data);
    thread_data = pvVar1;
  }
  WVar2 = TlsSetValue(DAT_0047b6f0,thread_data);
  if (WVar2 == 0) {
    __amsg_exit(0x10);
  }
  if (PTR_FUN_0047b164 != (undefined *)0x0) {
    (*(code *)PTR_FUN_0047b164)();
  }
  local_8 = 0;
  (**(code **)((int)thread_data + 0x48))(*(undefined4 *)((int)thread_data + 0x4c));
  crt_endthread();
  ExceptionList = local_14;
  return 0;
}



/* crt_endthread @ 00462373 */

/* CRT: thread cleanup and exit */

void crt_endthread(void)

{
  DWORD *pDVar1;
  
  if (PTR_FUN_0047b168 != (undefined *)0x0) {
    (*(code *)PTR_FUN_0047b168)();
  }
  pDVar1 = crt_get_thread_data();
  if (pDVar1 == (DWORD *)0x0) {
    __amsg_exit(0x10);
  }
  if ((HANDLE)pDVar1[1] != (HANDLE)0xffffffff) {
    CloseHandle((HANDLE)pDVar1[1]);
  }
  crt_free_thread_data((undefined *)pDVar1);
                    /* WARNING: Subroutine does not return */
  ExitThread(0);
}



/* FUN_004623b2 @ 004623b2 */

void __cdecl FUN_004623b2(int *param_1)

{
  DWORD DVar1;
  long lVar2;
  _TIME_ZONE_INFORMATION local_d0;
  _SYSTEMTIME local_24;
  _SYSTEMTIME local_14;
  
  GetLocalTime(&local_14);
  GetSystemTime(&local_24);
  if (local_24.wMinute == DAT_004d9978._2_2_) {
    if (local_24.wHour == (WORD)DAT_004d9978) {
      if (local_24.wDay == DAT_004d9974._2_2_) {
        if (local_24.wMonth == DAT_004d9970._2_2_) {
          if (local_24.wYear == (WORD)DAT_004d9970) goto LAB_0046245c;
        }
      }
    }
  }
  DVar1 = GetTimeZoneInformation(&local_d0);
  if (DVar1 == 0xffffffff) {
    DAT_004d9968 = -1;
  }
  else if (((DVar1 == 2) && (local_d0.DaylightDate.wMonth != 0)) && (local_d0.DaylightBias != 0)) {
    DAT_004d9968 = 1;
  }
  else {
    DAT_004d9968 = 0;
  }
  DAT_004d9970._0_2_ = local_24.wYear;
  DAT_004d9970._2_2_ = local_24.wMonth;
  DAT_004d9974._0_2_ = local_24.wDayOfWeek;
  DAT_004d9974._2_2_ = local_24.wDay;
  DAT_004d9978._0_2_ = local_24.wHour;
  DAT_004d9978._2_2_ = local_24.wMinute;
  DAT_004d997c._0_2_ = local_24.wSecond;
  DAT_004d997c._2_2_ = local_24.wMilliseconds;
LAB_0046245c:
  lVar2 = crt_mktime((uint)local_14.wYear,(uint)local_14.wMonth,(uint)local_14.wDay,
                     (uint)local_14.wHour,(uint)local_14.wMinute,(uint)local_14.wSecond,DAT_004d9968
                    );
  if (param_1 != (int *)0x0) {
    *param_1 = lVar2;
  }
  return;
}



/* crt_getcwd @ 0046248e */

/* CRT: get current working directory */

char * __cdecl crt_getcwd(char *buf,uint size)

{
  char *pcVar1;
  
  crt_lock(0xc);
  pcVar1 = crt_getdcwd(0,buf,size);
  crt_unlock(0xc);
  return pcVar1;
}



/* crt_getdcwd @ 004624b5 */

/* CRT: get current working directory for drive */

char * __cdecl crt_getdcwd(int drive,char *buf,uint size)

{
  int iVar1;
  int iVar2;
  uint *puVar3;
  int *piVar4;
  DWORD DVar5;
  uint _Size;
  char *pcVar6;
  CHAR local_10c [260];
  LPSTR local_8;
  
  iVar1 = drive;
  if (drive == 0) {
    DVar5 = GetCurrentDirectoryA(0x104,local_10c);
  }
  else {
    iVar2 = FUN_0046258a(drive);
    if (iVar2 == 0) {
      puVar3 = crt_doserrno_ptr();
      *puVar3 = 0xf;
      piVar4 = crt_errno_ptr();
      *piVar4 = 0xd;
      return (char *)0x0;
    }
    drive = (int)CONCAT12(0x2e,CONCAT11(0x3a,(char)iVar1 + '@'));
    DVar5 = GetFullPathNameA((LPCSTR)&drive,0x104,local_10c,&local_8);
  }
  if ((DVar5 != 0) && (_Size = DVar5 + 1, _Size < 0x105)) {
    if (buf == (char *)0x0) {
      if ((int)_Size <= (int)size) {
        _Size = size;
      }
      pcVar6 = _malloc(_Size);
      if (pcVar6 != (char *)0x0) {
LAB_00462576:
        pcVar6 = crt_strcpy(pcVar6,local_10c);
        return pcVar6;
      }
      piVar4 = crt_errno_ptr();
      *piVar4 = 0xc;
    }
    else {
      pcVar6 = buf;
      if ((int)_Size <= (int)size) goto LAB_00462576;
      piVar4 = crt_errno_ptr();
      *piVar4 = 0x22;
    }
  }
  return (char *)0x0;
}



/* FUN_0046258a @ 0046258a */

undefined4 __cdecl FUN_0046258a(uint param_1)

{
  char cVar1;
  UINT UVar2;
  
  if (param_1 != 0) {
    cVar1 = (char)param_1;
    param_1 = (uint)CONCAT12(0x5c,CONCAT11(0x3a,cVar1 + '@'));
    UVar2 = GetDriveTypeA((LPCSTR)&param_1);
    if ((UVar2 == 0) || (UVar2 == 1)) {
      return 0;
    }
  }
  return 1;
}



/* crt_free_base @ 004625c1 */

/* CRT heap free implementation */

void __cdecl crt_free_base(void *ptr)

{
  uint *puVar1;
  int local_2c;
  uint *local_28;
  uint local_24;
  uint *local_20;
  void *local_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_0046fa20;
  puStack_10 = &LAB_00465e70;
  local_14 = ExceptionList;
  if (ptr == (void *)0x0) {
    return;
  }
  if (crt_heap_mode == 3) {
    ExceptionList = &local_14;
    crt_lock(9);
    local_8 = 0;
    local_20 = (uint *)FUN_00466c7b((int)ptr);
    if (local_20 != (uint *)0x0) {
      FUN_00466ca6(local_20,(int)ptr);
    }
    local_8 = 0xffffffff;
    FUN_0046262b();
    puVar1 = local_20;
  }
  else {
    ExceptionList = &local_14;
    if (crt_heap_mode != 2) goto LAB_0046268d;
    ExceptionList = &local_14;
    crt_lock(9);
    local_8 = 1;
    local_28 = (uint *)FUN_004679d6(ptr,&local_2c,&local_24);
    if (local_28 != (uint *)0x0) {
      FUN_00467a2d(local_2c,local_24,(byte *)local_28);
    }
    local_8 = 0xffffffff;
    FUN_00462683();
    puVar1 = local_28;
  }
  if (puVar1 != (uint *)0x0) {
    ExceptionList = local_14;
    return;
  }
LAB_0046268d:
  HeapFree(DAT_004da3a4,0,ptr);
  ExceptionList = local_14;
  return;
}



/* FUN_0046262b @ 0046262b */

void FUN_0046262b(void)

{
  crt_unlock(9);
  return;
}



/* FUN_00462683 @ 00462683 */

void FUN_00462683(void)

{
  crt_unlock(9);
  return;
}



/* crt_realloc @ 004626aa */

/* CRT: realloc with heap mode handling and new-handler retry */

void * __cdecl crt_realloc(void *ptr,size_t size)

{
  void *pvVar1;
  int iVar2;
  uint *puVar3;
  uint uVar4;
  LPVOID pvVar5;
  byte *pbVar6;
  int local_3c;
  uint local_38;
  byte *local_34;
  int *local_30;
  uint *local_2c;
  byte *local_28;
  uint *local_24;
  void *local_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_0046fa38;
  puStack_10 = &LAB_00465e70;
  local_14 = ExceptionList;
  pbVar6 = (byte *)0x0;
  if (ptr == (void *)0x0) {
    ExceptionList = &local_14;
    pvVar1 = _malloc(size);
  }
  else {
    if (size == 0) {
      ExceptionList = &local_14;
      crt_free_base(ptr);
    }
    else {
      ExceptionList = &local_14;
      if (crt_heap_mode == 3) {
        do {
          local_28 = (byte *)0x0;
          if (size < (uint *)0xffffffe1) {
            crt_lock(9);
            local_8 = 0;
            local_2c = (uint *)FUN_00466c7b((int)ptr);
            if (local_2c != (uint *)0x0) {
              if (size <= DAT_004da3a0) {
                iVar2 = FUN_00467484(local_2c,(int)ptr,size);
                if (iVar2 == 0) {
                  local_28 = (byte *)FUN_00466fcf((uint *)size);
                  if (local_28 != (byte *)0x0) {
                    local_24 = (uint *)(*(int *)((int)ptr + -4) - 1);
                    puVar3 = local_24;
                    if (size <= local_24) {
                      puVar3 = (uint *)size;
                    }
                    crt_bufcpy(local_28,ptr,(size_t)puVar3);
                    local_2c = (uint *)FUN_00466c7b((int)ptr);
                    FUN_00466ca6(local_2c,(int)ptr);
                  }
                }
                else {
                  local_28 = ptr;
                }
              }
              if (local_28 == (byte *)0x0) {
                if ((uint *)size == (uint *)0x0) {
                  size = 1;
                }
                size = size + 0xf & 0xfffffff0;
                local_28 = HeapAlloc(DAT_004da3a4,0,size);
                if (local_28 != (byte *)0x0) {
                  local_24 = (uint *)(*(int *)((int)ptr + -4) - 1);
                  puVar3 = local_24;
                  if (size <= local_24) {
                    puVar3 = (uint *)size;
                  }
                  crt_bufcpy(local_28,ptr,(size_t)puVar3);
                  FUN_00466ca6(local_2c,(int)ptr);
                }
              }
            }
            local_8 = 0xffffffff;
            FUN_00462835();
            if (local_2c == (uint *)0x0) {
              if ((uint *)size == (uint *)0x0) {
                size = 1;
              }
              size = size + 0xf & 0xfffffff0;
              local_28 = HeapReAlloc(DAT_004da3a4,0,ptr,size);
            }
          }
          if (local_28 != (byte *)0x0) {
            ExceptionList = local_14;
            return (int *)local_28;
          }
          if (DAT_004d9a78 == (byte *)0x0) {
            ExceptionList = local_14;
            return (void *)0x0;
          }
          iVar2 = crt_call_new_handler(size);
        } while (iVar2 != 0);
      }
      else {
        ExceptionList = &local_14;
        if (crt_heap_mode == 2) {
          ExceptionList = &local_14;
          if (size < 0xffffffe1) {
            if (size == 0) {
              size = 0x10;
              ExceptionList = &local_14;
            }
            else {
              size = size + 0xf & 0xfffffff0;
              ExceptionList = &local_14;
            }
          }
          do {
            local_28 = pbVar6;
            if (size < 0xffffffe1) {
              crt_lock(9);
              local_8 = 1;
              pbVar6 = (byte *)FUN_004679d6(ptr,&local_3c,(uint *)&local_30);
              local_34 = pbVar6;
              if (pbVar6 == (byte *)0x0) {
                local_28 = HeapReAlloc(DAT_004da3a4,0,ptr,size);
              }
              else {
                if (size < DAT_0047db14) {
                  iVar2 = FUN_00467d9e(local_3c,local_30,pbVar6,size >> 4);
                  if (iVar2 == 0) {
                    local_28 = (byte *)FUN_00467a72(size >> 4);
                    if (local_28 != (byte *)0x0) {
                      local_38 = (uint)*pbVar6 << 4;
                      uVar4 = local_38;
                      if (size <= local_38) {
                        uVar4 = size;
                      }
                      crt_bufcpy(local_28,ptr,uVar4);
                      FUN_00467a2d(local_3c,(int)local_30,pbVar6);
                    }
                  }
                  else {
                    local_28 = ptr;
                  }
                }
                if ((local_28 == (byte *)0x0) &&
                   (local_28 = HeapAlloc(DAT_004da3a4,0,size), local_28 != (byte *)0x0)) {
                  local_38 = (uint)*pbVar6 << 4;
                  uVar4 = local_38;
                  if (size <= local_38) {
                    uVar4 = size;
                  }
                  crt_bufcpy(local_28,ptr,uVar4);
                  FUN_00467a2d(local_3c,(int)local_30,pbVar6);
                }
              }
              local_8 = 0xffffffff;
              FUN_00462983();
            }
            if (local_28 != pbVar6) {
              ExceptionList = local_14;
              return local_28;
            }
            if (DAT_004d9a78 == pbVar6) {
              ExceptionList = local_14;
              return local_28;
            }
            iVar2 = crt_call_new_handler(size);
          } while (iVar2 != 0);
        }
        else {
          do {
            pvVar5 = (LPVOID)0x0;
            if (size < 0xffffffe1) {
              if (size == 0) {
                size = 1;
              }
              size = size + 0xf & 0xfffffff0;
              pvVar5 = HeapReAlloc(DAT_004da3a4,0,ptr,size);
            }
            if (pvVar5 != (LPVOID)0x0) {
              ExceptionList = local_14;
              return pvVar5;
            }
            if (DAT_004d9a78 == (byte *)0x0) {
              ExceptionList = local_14;
              return (void *)0x0;
            }
            iVar2 = crt_call_new_handler(size);
          } while (iVar2 != 0);
        }
      }
    }
    pvVar1 = (void *)0x0;
  }
  ExceptionList = local_14;
  return pvVar1;
}



/* FUN_00462835 @ 00462835 */

void FUN_00462835(void)

{
  crt_unlock(9);
  return;
}



/* FUN_00462983 @ 00462983 */

void FUN_00462983(void)

{
  crt_unlock(9);
  return;
}



/* _malloc @ 004629d9 */

/* Library Function - Single Match
    _malloc
   
   Library: Visual Studio 2003 Release */

void * __cdecl _malloc(size_t _Size)

{
  void *pvVar1;
  
  pvVar1 = __nh_malloc(_Size,DAT_004d9a78);
  return pvVar1;
}



/* __nh_malloc @ 004629eb */

/* Library Function - Single Match
    __nh_malloc
   
   Library: Visual Studio 2003 Release */

void * __cdecl __nh_malloc(size_t _Size,int _NhFlag)

{
  void *pvVar1;
  int iVar2;
  
  if (_Size < 0xffffffe1) {
    do {
      pvVar1 = (void *)FUN_00462a17((uint *)_Size);
      if (pvVar1 != (void *)0x0) {
        return pvVar1;
      }
      if (_NhFlag == 0) {
        return (void *)0x0;
      }
      iVar2 = crt_call_new_handler(_Size);
    } while (iVar2 != 0);
  }
  return (void *)0x0;
}



/* FUN_00462a17 @ 00462a17 */

void __cdecl FUN_00462a17(uint *param_1)

{
  int *piVar1;
  uint dwBytes;
  void *local_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_0046fa50;
  puStack_10 = &LAB_00465e70;
  local_14 = ExceptionList;
  if (crt_heap_mode == 3) {
    ExceptionList = &local_14;
    if (param_1 <= DAT_004da3a0) {
      ExceptionList = &local_14;
      crt_lock(9);
      local_8 = 0;
      piVar1 = FUN_00466fcf(param_1);
      local_8 = 0xffffffff;
      FUN_00462a7e();
      if (piVar1 != (int *)0x0) {
        ExceptionList = local_14;
        return;
      }
    }
  }
  else {
    ExceptionList = &local_14;
    if (crt_heap_mode == 2) {
      if (param_1 == (uint *)0x0) {
        dwBytes = 0x10;
      }
      else {
        dwBytes = (int)param_1 + 0xfU & 0xfffffff0;
      }
      ExceptionList = &local_14;
      if (dwBytes <= DAT_0047db14) {
        ExceptionList = &local_14;
        crt_lock(9);
        local_8 = 1;
        piVar1 = FUN_00467a72(dwBytes >> 4);
        local_8 = 0xffffffff;
        FUN_00462add();
        if (piVar1 != (int *)0x0) {
          ExceptionList = local_14;
          return;
        }
      }
      goto LAB_00462af6;
    }
  }
  if (param_1 == (uint *)0x0) {
    param_1 = (uint *)0x1;
  }
  dwBytes = (int)param_1 + 0xfU & 0xfffffff0;
LAB_00462af6:
  HeapAlloc(DAT_004da3a4,0,dwBytes);
  ExceptionList = local_14;
  return;
}



/* FUN_00462a7e @ 00462a7e */

void FUN_00462a7e(void)

{
  crt_unlock(9);
  return;
}



/* FUN_00462add @ 00462add */

void FUN_00462add(void)

{
  crt_unlock(9);
  return;
}



/* _strstr @ 00462b20 */

/* Library Function - Single Match
    _strstr
   
   Libraries: Visual Studio 1998 Debug, Visual Studio 1998 Release */

char * __cdecl _strstr(char *_Str,char *_SubStr)

{
  char *pcVar1;
  char *pcVar2;
  char cVar3;
  uint uVar4;
  char cVar5;
  uint uVar6;
  uint uVar7;
  char *pcVar8;
  uint *puVar9;
  char *pcVar10;
  
  cVar3 = *_SubStr;
  if (cVar3 == '\0') {
    return _Str;
  }
  if (_SubStr[1] == '\0') {
    while (((uint)_Str & 3) != 0) {
      uVar4 = *(uint *)_Str;
      if ((char)uVar4 == cVar3) {
        return (char *)(uint *)_Str;
      }
      _Str = (char *)((int)_Str + 1);
      if ((char)uVar4 == '\0') {
        return (char *)0x0;
      }
    }
    while( true ) {
      while( true ) {
        uVar4 = *(uint *)_Str;
        uVar7 = uVar4 ^ CONCAT22(CONCAT11(cVar3,cVar3),CONCAT11(cVar3,cVar3));
        uVar6 = uVar4 ^ 0xffffffff ^ uVar4 + 0x7efefeff;
        puVar9 = (uint *)((int)_Str + 4);
        if (((uVar7 ^ 0xffffffff ^ uVar7 + 0x7efefeff) & 0x81010100) != 0) break;
        _Str = (char *)puVar9;
        if ((uVar6 & 0x81010100) != 0) {
          if ((uVar6 & 0x1010100) != 0) {
            return (char *)0x0;
          }
          if ((uVar4 + 0x7efefeff & 0x80000000) == 0) {
            return (char *)0x0;
          }
        }
      }
      uVar4 = *(uint *)_Str;
      if ((char)uVar4 == cVar3) {
        return (char *)(uint *)_Str;
      }
      if ((char)uVar4 == '\0') {
        return (char *)0x0;
      }
      cVar5 = (char)(uVar4 >> 8);
      if (cVar5 == cVar3) {
        return (char *)((int)_Str + 1);
      }
      if (cVar5 == '\0') {
        return (char *)0x0;
      }
      cVar5 = (char)(uVar4 >> 0x10);
      if (cVar5 == cVar3) {
        return (char *)((int)_Str + 2);
      }
      if (cVar5 == '\0') break;
      cVar5 = (char)(uVar4 >> 0x18);
      if (cVar5 == cVar3) {
        return (char *)((int)_Str + 3);
      }
      _Str = (char *)puVar9;
      if (cVar5 == '\0') {
        return (char *)0x0;
      }
    }
    return (char *)0x0;
  }
  do {
    cVar5 = *_Str;
    do {
      while (_Str = _Str + 1, cVar5 != cVar3) {
        if (cVar5 == '\0') {
          return (char *)0x0;
        }
        cVar5 = *_Str;
      }
      cVar5 = *_Str;
      pcVar10 = _Str + 1;
      pcVar8 = _SubStr;
    } while (cVar5 != _SubStr[1]);
    do {
      if (pcVar8[2] == '\0') {
LAB_00462b93:
        return _Str + -1;
      }
      if (*pcVar10 != pcVar8[2]) break;
      pcVar1 = pcVar8 + 3;
      if (*pcVar1 == '\0') goto LAB_00462b93;
      pcVar2 = pcVar10 + 1;
      pcVar8 = pcVar8 + 2;
      pcVar10 = pcVar10 + 2;
    } while (*pcVar1 == *pcVar2);
  } while( true );
}



/* FUN_00462ba0 @ 00462ba0 */

void __cdecl FUN_00462ba0(char *param_1,byte *param_2)

{
  void *this;
  char *local_24;
  size_t local_20;
  char *local_1c;
  undefined4 local_18;
  
  local_18 = 0x49;
  local_1c = param_1;
  local_24 = param_1;
  local_20 = _strlen(param_1);
  FUN_00467e62(this,(int *)&local_24,param_2,(undefined4 *)&stack0x0000000c);
  return;
}



/* crt_qsort @ 00462bd4 */

/* CRT: quicksort with callback (cmp) */

void __cdecl crt_qsort(void *base,size_t num,size_t size,void *cmp)

{
  char *pcVar1;
  uint uVar2;
  char *b;
  int iVar3;
  char *hi;
  char *b_00;
  undefined1 local_fc [120];
  undefined1 local_84 [120];
  char *local_c;
  int local_8;
  
  if ((num < 2) || (size == 0)) {
    return;
  }
  local_8 = 0;
  iVar3 = num - 1;
  num = (size_t)local_fc;
  hi = (char *)(iVar3 * size + (int)base);
  b = base;
  base = local_84;
LAB_00462c13:
  uVar2 = (uint)((int)hi - (int)b) / size + 1;
  if (8 < uVar2) {
    crt_swap(b + (uVar2 >> 1) * size,b,size);
    b_00 = hi + size;
    local_c = b;
LAB_00462c6a:
    local_c = local_c + size;
    if (local_c <= hi) goto code_r0x00462c77;
    goto LAB_00462c82;
  }
  crt_shortsort(b,hi,size,cmp);
  goto LAB_00462c32;
code_r0x00462c77:
  iVar3 = (*cmp)(local_c,b);
  if (iVar3 < 1) goto LAB_00462c6a;
LAB_00462c82:
  do {
    b_00 = b_00 + -size;
    if (b_00 <= b) break;
    iVar3 = (*cmp)(b_00,b);
  } while (-1 < iVar3);
  if (local_c <= b_00) {
    crt_swap(local_c,b_00,size);
    goto LAB_00462c6a;
  }
  crt_swap(b,b_00,size);
  pcVar1 = local_c;
  if ((int)(b_00 + (-1 - (int)b)) < (int)hi - (int)local_c) {
    if (local_c < hi) {
      local_8 = local_8 + 1;
      *(char **)num = local_c;
      *(char **)base = hi;
      base = (void *)((int)base + 4);
      num = num + 4;
    }
    if (b + size < b_00) {
      hi = b_00 + -size;
      goto LAB_00462c13;
    }
  }
  else {
    if (b + size < b_00) {
      local_8 = local_8 + 1;
      *(char **)num = b;
      *(size_t *)base = (int)b_00 - size;
      base = (void *)((int)base + 4);
      num = num + 4;
    }
    b = pcVar1;
    if (pcVar1 < hi) goto LAB_00462c13;
  }
LAB_00462c32:
  local_8 = local_8 + -1;
  num = num - 4;
  base = (void *)((int)base + -4);
  if (local_8 < 0) {
    return;
  }
  hi = *(char **)base;
  b = *(char **)num;
  goto LAB_00462c13;
}



/* crt_shortsort @ 00462d28 */

/* CRT: insertion sort for small arrays (cmp) */

void __cdecl crt_shortsort(char *lo,char *hi,size_t width,void *cmp)

{
  int iVar1;
  char *a;
  char *pcVar2;
  
  for (; a = lo, pcVar2 = lo, lo < hi; hi = hi + -width) {
    while (pcVar2 = pcVar2 + width, pcVar2 <= hi) {
      iVar1 = (*cmp)(pcVar2,a);
      if (0 < iVar1) {
        a = pcVar2;
      }
    }
    crt_swap(a,hi,width);
  }
  return;
}



/* crt_swap @ 00462d76 */

/* CRT: swap elements for qsort */

void __cdecl crt_swap(char *a,char *b,size_t width)

{
  char cVar1;
  
  if (a != b) {
    for (; width != 0; width = width - 1) {
      cVar1 = *a;
      *a = *b;
      a = a + 1;
      *b = cVar1;
      b = b + 1;
    }
  }
  return;
}



/* crt_getc @ 00462da2 */

/* CRT: get character with stream lock */

int __cdecl crt_getc(FILE *fp)

{
  int *piVar1;
  uint uVar2;
  
  crt_lock_file(fp);
  piVar1 = &fp->_cnt;
  *piVar1 = *piVar1 + -1;
  if (*piVar1 < 0) {
    uVar2 = crt_filbuf(fp);
  }
  else {
    uVar2 = (uint)(byte)*fp->_ptr;
    fp->_ptr = fp->_ptr + 1;
  }
  crt_unlock_file(fp);
  return uVar2;
}



/* FUN_00462de0 @ 00462de0 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

uint __thiscall FUN_00462de0(void *this,byte *param_1,byte *param_2)

{
  bool bVar1;
  uint uVar2;
  int iVar3;
  byte bVar4;
  byte bVar5;
  byte bVar6;
  char cVar7;
  void *extraout_ECX;
  void *this_00;
  void *extraout_ECX_00;
  void *locale_00;
  uint c;
  void *locale;
  
  iVar3 = _DAT_004da3b0;
  if (DAT_004d9a4c == 0) {
    bVar6 = 0xff;
    do {
      do {
        cVar7 = '\0';
        if (bVar6 == 0) goto LAB_00462e2e;
        bVar6 = *param_2;
        param_2 = param_2 + 1;
        bVar5 = *param_1;
        param_1 = param_1 + 1;
      } while (bVar5 == bVar6);
      bVar4 = bVar6 + 0xbf + (-((byte)(bVar6 + 0xbf) < 0x1a) & 0x20U) + 0x41;
      bVar5 = bVar5 + 0xbf;
      bVar6 = bVar5 + (-(bVar5 < 0x1a) & 0x20U) + 0x41;
    } while (bVar6 == bVar4);
    cVar7 = (bVar6 < bVar4) * -2 + '\x01';
LAB_00462e2e:
    locale = (void *)(int)cVar7;
  }
  else {
    LOCK();
    _DAT_004da3b0 = _DAT_004da3b0 + 1;
    UNLOCK();
    bVar1 = 0 < DAT_004da3ac;
    if (bVar1) {
      LOCK();
      UNLOCK();
      _DAT_004da3b0 = iVar3;
      crt_lock(0x13);
      this = extraout_ECX;
    }
    c = (uint)bVar1;
    locale = (void *)0xff;
    locale_00 = (void *)0x0;
    do {
      do {
        if ((char)locale == '\0') goto LAB_00462e8f;
        bVar6 = *param_2;
        locale = (void *)CONCAT31((int3)((uint)locale >> 8),bVar6);
        param_2 = param_2 + 1;
        bVar5 = *param_1;
        locale_00 = (void *)CONCAT31((int3)((uint)locale_00 >> 8),bVar5);
        param_1 = param_1 + 1;
      } while (bVar6 == bVar5);
      locale_00 = (void *)crt_tolower_l(this,locale_00,(int)locale);
      locale = (void *)crt_tolower_l(this_00,locale,c);
      this = extraout_ECX_00;
    } while ((byte)locale_00 == (byte)locale);
    uVar2 = (uint)((byte)locale_00 < (byte)locale);
    locale = (void *)((1 - uVar2) - (uint)(uVar2 != 0));
LAB_00462e8f:
    if (c == 0) {
      LOCK();
      _DAT_004da3b0 = _DAT_004da3b0 + -1;
      UNLOCK();
    }
    else {
      crt_unlock(0x13);
    }
  }
  return (uint)locale;
}



/* crt_run_initializers @ 00462eb0 */

/* invokes CRT initializer function ranges */

void crt_run_initializers(void)

{
  if (PTR_FUN_0047b160 != (undefined *)0x0) {
    (*(code *)PTR_FUN_0047b160)();
  }
  crt_call_fn_range((undefined4 *)&DAT_004710e4,(undefined4 *)&DAT_004710f8);
  crt_call_fn_range((undefined4 *)&DAT_00471000,(undefined4 *)&DAT_004710e0);
  return;
}



/* crt_exit @ 00462edd */

/* CRT exit path (atexit/onexit + ExitProcess) */

void __cdecl crt_exit(uint code)

{
  crt_doexit(code,0,0);
  return;
}



/* __exit @ 00462eee */

/* Library Function - Single Match
    __exit
   
   Library: Visual Studio 2003 Release */

void __cdecl __exit(int _Code)

{
  crt_doexit(_Code,1,0);
  return;
}



/* crt_doexit @ 00462eff */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* CRT exit worker (atexit/onexit + ExitProcess) */

void __cdecl crt_doexit(uint code,int full,int quick)

{
  HANDLE hProcess;
  undefined4 *puVar1;
  uint uExitCode;
  
  crt_exit_lock();
  if (DAT_004d99c0 == 1) {
    uExitCode = code;
    hProcess = GetCurrentProcess();
    TerminateProcess(hProcess,uExitCode);
  }
  _DAT_004d99bc = 1;
  DAT_004d99b8 = (undefined1)quick;
  if (full == 0) {
    if ((crt_onexit_table_end != (undefined4 *)0x0) &&
       (puVar1 = (undefined4 *)(crt_onexit_table_begin - 4), crt_onexit_table_end <= puVar1)) {
      do {
        if ((code *)*puVar1 != (code *)0x0) {
          (*(code *)*puVar1)();
        }
        puVar1 = puVar1 + -1;
      } while (crt_onexit_table_end <= puVar1);
    }
    crt_call_fn_range((undefined4 *)&DAT_004710fc,(undefined4 *)&DAT_00471104);
  }
  crt_call_fn_range((undefined4 *)&DAT_00471108,(undefined4 *)&DAT_00471110);
  if (quick == 0) {
    DAT_004d99c0 = 1;
                    /* WARNING: Subroutine does not return */
    ExitProcess(code);
  }
  crt_exit_unlock();
  return;
}



/* crt_exit_lock @ 00462fa4 */

/* exit lock */

void crt_exit_lock(void)

{
  crt_lock(0xd);
  return;
}



/* crt_exit_unlock @ 00462fad */

/* exit unlock */

void crt_exit_unlock(void)

{
  crt_unlock(0xd);
  return;
}



/* crt_call_fn_range @ 00462fb6 */

/* call function pointers in a range */

void __cdecl crt_call_fn_range(undefined4 *param_1,undefined4 *param_2)

{
  for (; param_1 < param_2; param_1 = param_1 + 1) {
    if ((code *)*param_1 != (code *)0x0) {
      (*(code *)*param_1)();
    }
  }
  return;
}



/* crt_isalpha @ 00462fd0 */

/* ctype alpha check (MBCS-aware) */

uint __thiscall crt_isalpha(void *this,int c)

{
  uint uVar1;
  
  if (1 < DAT_0047b3cc) {
    uVar1 = crt_isctype(this,c,0x103);
    return uVar1;
  }
  return *(ushort *)(crt_ctype_table + c * 2) & 0x103;
}



/* crt_isspace @ 00462ffe */

/* ctype space check (MBCS-aware) */

uint __thiscall crt_isspace(void *this,int c)

{
  uint uVar1;
  
  if (1 < DAT_0047b3cc) {
    uVar1 = crt_isctype(this,c,8);
    return uVar1;
  }
  return (byte)crt_ctype_table[c * 2] & 8;
}



/* entry @ 00463026 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void entry(void)

{
  DWORD DVar1;
  int iVar2;
  uint code;
  _STARTUPINFOA local_60;
  undefined1 *local_1c;
  _EXCEPTION_POINTERS *local_18;
  void *pvStack_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_0046fa68;
  puStack_10 = &LAB_00465e70;
  pvStack_14 = ExceptionList;
  local_1c = &stack0xffffff88;
  ExceptionList = &pvStack_14;
  DVar1 = GetVersion();
  _DAT_004d9990 = DVar1 >> 8 & 0xff;
  _DAT_004d998c = DVar1 & 0xff;
  _DAT_004d9988 = _DAT_004d998c * 0x100 + _DAT_004d9990;
  _DAT_004d9984 = DVar1 >> 0x10;
  iVar2 = crt_heap_init(1);
  if (iVar2 == 0) {
    FUN_00463153(0x1c);
  }
  iVar2 = crt_mt_init();
  if (iVar2 == 0) {
    FUN_00463153(0x10);
  }
  local_8 = 0;
  crt_io_init();
  DAT_004db4e4 = GetCommandLineA();
  DAT_004d99c4 = crt_get_environment_strings();
  crt_build_argv();
  crt_build_environ();
  crt_run_initializers();
  local_60.dwFlags = 0;
  GetStartupInfoA(&local_60);
  crt_skip_program_name();
  GetModuleHandleA((LPCSTR)0x0);
  code = crimsonland_main();
  crt_exit(code);
  crt_exception_filter(local_18->ExceptionRecord->ExceptionCode,local_18);
  return;
}



/* __amsg_exit @ 0046312e */

/* Library Function - Single Match
    __amsg_exit
   
   Library: Visual Studio 2003 Release */

void __cdecl __amsg_exit(int param_1)

{
  if (DAT_004d99cc == 1) {
    crt_runtime_error_banner();
  }
  crt_report_runtime_error(param_1);
  (*(code *)PTR___exit_0047b180)(0xff);
  return;
}



/* FUN_00463153 @ 00463153 */

void __cdecl FUN_00463153(DWORD param_1)

{
  if (DAT_004d99cc == 1) {
    crt_runtime_error_banner();
  }
  crt_report_runtime_error(param_1);
                    /* WARNING: Subroutine does not return */
  ExitProcess(0xff);
}



/* FUN_00463180 @ 00463180 */

void FUN_00463180(void)

{
  float10 in_ST0;
  double dVar1;
  
  dVar1 = (double)in_ST0;
  FUN_004651b8(SUB84(dVar1,0),(uint)((ulonglong)dVar1 >> 0x20));
  FUN_0046319d(SUB84(dVar1,0),(uint)((ulonglong)dVar1 >> 0x20));
  return;
}



/* FUN_0046319d @ 0046319d */

void __cdecl FUN_0046319d(int param_1,uint param_2)

{
  uint in_EAX;
  bool in_ZF;
  ushort in_FPUControlWord;
  float10 in_ST0;
  float10 extraout_ST0;
  undefined4 unaff_retaddr;
  
  if (in_ZF) {
    if (((in_EAX & 0xfffff) != 0) || (param_1 != 0)) {
      FUN_0046515c();
    }
LAB_0046322c:
    if (DAT_004d9960 == 0) {
      __startOneArgErrorHandling(&DAT_0047b190,0xd,in_FPUControlWord,unaff_retaddr,param_1,param_2);
      return;
    }
  }
  else {
    if (in_FPUControlWord != 0x27f) {
      in_EAX = FUN_00465145();
      in_ST0 = extraout_ST0;
    }
    if (in_EAX < 0x3ff00000) {
      fpatan(SQRT(((float10)1 - in_ST0) * ((float10)1 + in_ST0)),in_ST0);
    }
    else if ((0x3ff00000 < in_EAX) || ((param_2 & 0xfffff) != 0 || param_1 != 0)) goto LAB_0046322c;
    if (DAT_004d9960 == 0) {
      __math_exit(&DAT_0047b190,0xd,unaff_retaddr,param_1,param_2);
      return;
    }
  }
  return;
}



/* FUN_0046324b @ 0046324b */

bool __cdecl FUN_0046324b(undefined4 param_1,undefined4 param_2)

{
  return (param_2._2_2_ & 0x7ff0) != 0x7ff0;
}



/* FUN_0046325f @ 0046325f */

int __cdecl FUN_0046325f(int param_1,uint param_2)

{
  int iVar1;
  
  if ((param_2._2_2_ & 0x7ff0) == 0x7ff0) {
    iVar1 = FUN_00468f58(param_1,(uint)(CONCAT26(param_2._2_2_,CONCAT24((undefined2)param_2,param_1)
                                                ) >> 0x20));
    if (iVar1 != 1) {
      if (iVar1 == 2) {
        iVar1 = 4;
      }
      else if (iVar1 == 3) {
        iVar1 = 2;
      }
      else {
        iVar1 = 1;
      }
      return iVar1;
    }
    return 0x200;
  }
  if (((param_2 & 0x7ff00000) == 0) && (((param_2 & 0xfffff) != 0 || (param_1 != 0)))) {
    return (-(uint)((param_2 & 0x80000000) != 0) & 0xffffff90) + 0x80;
  }
  if ((double)CONCAT26(param_2._2_2_,CONCAT24((undefined2)param_2,param_1)) == 0.0) {
    return (-(uint)((param_2 & 0x80000000) != 0) & 0xffffffe0) + 0x40;
  }
  return (-(uint)((param_2 & 0x80000000) != 0) & 0xffffff08) + 0x100;
}



/* FUN_004632f1 @ 004632f1 */

void FUN_004632f1(undefined *UNRECOVERED_JUMPTABLE)

{
  ExceptionList = *(void **)ExceptionList;
                    /* WARNING: Could not recover jumptable at 0x0046331c. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  (*(code *)UNRECOVERED_JUMPTABLE)();
  return;
}



/* FUN_00463325 @ 00463325 */

void FUN_00463325(undefined4 param_1,undefined *UNRECOVERED_JUMPTABLE)

{
  LOCK();
  UNLOCK();
                    /* WARNING: Could not recover jumptable at 0x0046332a. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  (*(code *)UNRECOVERED_JUMPTABLE)();
  return;
}



/* FUN_0046332c @ 0046332c */

void FUN_0046332c(undefined4 param_1,undefined *UNRECOVERED_JUMPTABLE)

{
  LOCK();
  UNLOCK();
                    /* WARNING: Could not recover jumptable at 0x00463331. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  (*(code *)UNRECOVERED_JUMPTABLE)();
  return;
}



/* FUN_00463333 @ 00463333 */

void FUN_00463333(PVOID param_1,PEXCEPTION_RECORD param_2)

{
  void *pvVar1;
  
  pvVar1 = ExceptionList;
  RtlUnwind(param_1,(PVOID)0x46335b,(PEXCEPTION_RECORD)param_2,(PVOID)0x0);
  param_2->ExceptionFlags = param_2->ExceptionFlags & 0xfffffffd;
  *(void **)pvVar1 = ExceptionList;
  ExceptionList = pvVar1;
  return;
}



/* FUN_00463382 @ 00463382 */

undefined4 __cdecl
FUN_00463382(PEXCEPTION_RECORD param_1,PVOID param_2,DWORD param_3,undefined4 param_4)

{
  int *in_EAX;
  undefined4 uVar1;
  
  uVar1 = FUN_004695fb(param_1,param_2,param_3,param_4,in_EAX,0,(PVOID)0x0,'\0');
  return uVar1;
}



/* FUN_004633b8 @ 004633b8 */

undefined4 __cdecl
FUN_004633b8(undefined4 param_1,undefined4 param_2,undefined4 param_3,int param_4,int param_5)

{
  undefined4 uVar1;
  void *local_18;
  code *local_14;
  undefined4 local_10;
  undefined4 local_c;
  int local_8;
  
  local_10 = param_2;
  local_14 = FUN_0046340c;
  local_8 = param_4 + 1;
  local_c = param_1;
  local_18 = ExceptionList;
  ExceptionList = &local_18;
  uVar1 = __CallSettingFrame_12(param_3,param_1,param_5);
  ExceptionList = local_18;
  return uVar1;
}



/* FUN_0046340c @ 0046340c */

void __cdecl FUN_0046340c(PEXCEPTION_RECORD param_1,PVOID param_2,DWORD param_3)

{
  FUN_004695fb(param_1,*(PVOID *)((int)param_2 + 0xc),param_3,0,*(int **)((int)param_2 + 8),
               *(int *)((int)param_2 + 0x10),param_2,'\0');
  return;
}



/* FUN_00463431 @ 00463431 */

undefined4 __cdecl
FUN_00463431(undefined4 *param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
            undefined4 param_5,undefined4 param_6,undefined4 param_7)

{
  DWORD *pDVar1;
  undefined4 uVar2;
  undefined4 **ppuVar3;
  undefined4 *local_34;
  undefined4 local_30;
  undefined4 *local_2c;
  code *local_28;
  undefined4 local_24;
  undefined4 local_20;
  undefined4 local_1c;
  undefined4 local_18;
  undefined4 local_14;
  undefined1 *local_10;
  undefined1 *local_c;
  int local_8;
  
  local_c = &stack0xfffffffc;
  local_10 = &stack0xffffffbc;
  local_28 = FUN_004634e7;
  local_24 = param_5;
  local_20 = param_2;
  local_1c = param_6;
  local_18 = param_7;
  local_8 = 0;
  local_14 = 0x4634b9;
  local_2c = ExceptionList;
  ExceptionList = &local_2c;
  local_34 = param_1;
  local_30 = param_3;
  ppuVar3 = &local_34;
  uVar2 = *param_1;
  pDVar1 = crt_get_thread_data();
  (*(code *)pDVar1[0x1a])(uVar2,ppuVar3);
  if (local_8 != 0) {
    *local_2c = *(undefined4 *)ExceptionList;
  }
  ExceptionList = local_2c;
  return 0;
}



/* FUN_004634e7 @ 004634e7 */

undefined4 __cdecl FUN_004634e7(PEXCEPTION_RECORD param_1,PVOID param_2,DWORD param_3)

{
  undefined4 uVar1;
  
  if ((param_1->ExceptionFlags & 0x66) != 0) {
    *(undefined4 *)((int)param_2 + 0x24) = 1;
    return 1;
  }
  FUN_004695fb(param_1,*(PVOID *)((int)param_2 + 0xc),param_3,0,*(int **)((int)param_2 + 8),
               *(int *)((int)param_2 + 0x10),*(PVOID *)((int)param_2 + 0x14),'\x01');
  if (*(int *)((int)param_2 + 0x24) == 0) {
    FUN_00463333(param_2,param_1);
  }
                    /* WARNING: Could not recover jumptable at 0x00463551. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  uVar1 = (**(code **)((int)param_2 + 0x18))();
  return uVar1;
}



/* FUN_0046355c @ 0046355c */

int __cdecl FUN_0046355c(int param_1,int param_2,int param_3,uint *param_4,uint *param_5)

{
  int iVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  
  uVar5 = *(uint *)(param_1 + 0xc);
  iVar1 = *(int *)(param_1 + 0x10);
  uVar4 = uVar5;
  uVar3 = uVar5;
  while (uVar2 = uVar4, -1 < param_2) {
    if (uVar5 == 0xffffffff) {
      FUN_00465fa9();
    }
    uVar5 = uVar5 - 1;
    if (((*(int *)(iVar1 + 4 + uVar5 * 0x14) < param_3) &&
        (param_3 <= *(int *)(iVar1 + uVar5 * 0x14 + 8))) || (uVar4 = uVar2, uVar5 == 0xffffffff)) {
      param_2 = param_2 + -1;
      uVar4 = uVar5;
      uVar3 = uVar2;
    }
  }
  uVar5 = uVar5 + 1;
  *param_4 = uVar5;
  *param_5 = uVar3;
  if ((*(uint *)(param_1 + 0xc) < uVar3) || (uVar3 < uVar5)) {
    FUN_00465fa9();
  }
  return iVar1 + uVar5 * 0x14;
}



/* __global_unwind2 @ 004635d8 */

/* Library Function - Single Match
    __global_unwind2
   
   Library: Visual Studio */

void __cdecl __global_unwind2(PVOID param_1)

{
  RtlUnwind(param_1,(PVOID)0x4635f0,(PEXCEPTION_RECORD)0x0,(PVOID)0x0);
  return;
}



/* __local_unwind2 @ 0046361a */

/* Library Function - Single Match
    __local_unwind2
   
   Libraries: Visual Studio 1998 Debug, Visual Studio 1998 Release, Visual Studio 2003 Debug, Visual
   Studio 2003 Release */

void __cdecl __local_unwind2(int param_1,int param_2)

{
  int iVar1;
  int iVar2;
  void *pvStack_1c;
  undefined1 *puStack_18;
  undefined4 local_14;
  int iStack_10;
  
  iStack_10 = param_1;
  puStack_18 = &LAB_004635f8;
  pvStack_1c = ExceptionList;
  ExceptionList = &pvStack_1c;
  while( true ) {
    iVar1 = *(int *)(param_1 + 8);
    iVar2 = *(int *)(param_1 + 0xc);
    if ((iVar2 == -1) || (iVar2 == param_2)) break;
    local_14 = *(undefined4 *)(iVar1 + iVar2 * 0xc);
    *(undefined4 *)(param_1 + 0xc) = local_14;
    if (*(int *)(iVar1 + 4 + iVar2 * 0xc) == 0) {
      FUN_004636ae();
      (**(code **)(iVar1 + 8 + iVar2 * 0xc))();
    }
  }
  ExceptionList = pvStack_1c;
  return;
}



/* __abnormal_termination @ 00463682 */

/* Library Function - Single Match
    __abnormal_termination
   
   Library: Visual Studio */

int __cdecl __abnormal_termination(void)

{
  int iVar1;
  
  iVar1 = 0;
  if ((*(undefined1 **)((int)ExceptionList + 4) == &LAB_004635f8) &&
     (*(int *)((int)ExceptionList + 8) == *(int *)(*(int *)((int)ExceptionList + 0xc) + 0xc))) {
    iVar1 = 1;
  }
  return iVar1;
}



/* __NLG_Notify1 @ 004636a5 */

/* Library Function - Single Match
    __NLG_Notify1
   
   Libraries: Visual Studio 2017 Debug, Visual Studio 2017 Release, Visual Studio 2019 Debug, Visual
   Studio 2019 Release */

void __fastcall __NLG_Notify1(undefined4 param_1)

{
  undefined4 in_EAX;
  undefined4 unaff_EBP;
  
  DAT_0047b1a0 = param_1;
  DAT_0047b19c = in_EAX;
  DAT_0047b1a4 = unaff_EBP;
  return;
}



/* FUN_004636ae @ 004636ae */

void FUN_004636ae(void)

{
  undefined4 in_EAX;
  int unaff_EBP;
  
  DAT_0047b1a0 = *(undefined4 *)(unaff_EBP + 8);
  DAT_0047b19c = in_EAX;
  DAT_0047b1a4 = unaff_EBP;
  return;
}



/* FUN_004636c8 @ 004636c8 */

void FUN_004636c8(void)

{
  undefined1 auStack_c [12];
  
  ExceptionList = auStack_c;
  return;
}



/* FUN_004636e7 @ 004636e7 */

void __fastcall FUN_004636e7(void *param_1)

{
  FUN_00469e81(param_1,0x10000,0x30000);
  return;
}



/* FUN_004636f9 @ 004636f9 */

/* WARNING: Removing unreachable block (ram,0x0046372e) */

undefined4 FUN_004636f9(void)

{
  return 0;
}



/* FUN_00463737 @ 00463737 */

void FUN_00463737(void)

{
  HMODULE hModule;
  FARPROC pFVar1;
  
  hModule = GetModuleHandleA("KERNEL32");
  if (hModule != (HMODULE)0x0) {
    pFVar1 = GetProcAddress(hModule,"IsProcessorFeaturePresent");
    if (pFVar1 != (FARPROC)0x0) {
      (*pFVar1)(0);
      return;
    }
  }
  FUN_004636f9();
  return;
}



/* FUN_00463760 @ 00463760 */

void __cdecl FUN_00463760(char *param_1)

{
  char cVar1;
  char cVar2;
  undefined *this;
  int iVar3;
  uint uVar4;
  undefined *puVar5;
  
  this = (undefined *)(int)*param_1;
  iVar3 = crt_tolower((int)this);
  if (iVar3 != 0x65) {
    do {
      param_1 = param_1 + 1;
      if (DAT_0047b3cc < 2) {
        uVar4 = (byte)crt_ctype_table[*param_1 * 2] & 4;
        this = crt_ctype_table;
      }
      else {
        puVar5 = (undefined *)0x4;
        uVar4 = crt_isctype(this,(int)*param_1,4);
        this = puVar5;
      }
    } while (uVar4 != 0);
  }
  cVar2 = *param_1;
  *param_1 = DAT_0047b3d0;
  do {
    param_1 = param_1 + 1;
    cVar1 = *param_1;
    *param_1 = cVar2;
    cVar2 = cVar1;
  } while (*param_1 != '\0');
  return;
}



/* __fassign @ 00463820 */

/* Library Function - Single Match
    __fassign
   
   Library: Visual Studio 2003 Release */

void __cdecl __fassign(int flag,char *argument,char *number)

{
  void *in_ECX;
  void *local_c;
  void *local_8;
  
  if (flag != 0) {
    local_c = in_ECX;
    local_8 = in_ECX;
    FUN_0046a344(in_ECX,(uint *)&local_c,(byte *)number);
    *(void **)argument = local_c;
    *(void **)(argument + 4) = local_8;
    return;
  }
  FUN_0046a371(in_ECX,(uint *)&number,(byte *)number);
  *(char **)argument = number;
  return;
}



/* FUN_0046385e @ 0046385e */

undefined1 * __cdecl FUN_0046385e(undefined8 *param_1,undefined1 *param_2,int param_3,int param_4)

{
  uint local_2c [6];
  int local_14 [4];
  
  FUN_0046a415((int)*param_1,(int)((ulonglong)*param_1 >> 0x20),local_14,local_2c);
  FUN_0046a39e(param_2 + (uint)(0 < param_3) + (uint)(local_14[0] == 0x2d),param_3 + 1,(int)local_14
              );
  FUN_004638bf(param_2,param_3,param_4,local_14,'\0');
  return param_2;
}



/* FUN_004638bf @ 004638bf */

undefined1 * __cdecl
FUN_004638bf(undefined1 *param_1,int param_2,int param_3,int *param_4,char param_5)

{
  undefined1 *puVar1;
  undefined1 *puVar2;
  char *pcVar3;
  int iVar4;
  
  if (param_5 != '\0') {
    FUN_00463b61(param_1 + (*param_4 == 0x2d),(uint)(0 < param_2));
  }
  puVar1 = param_1;
  if (*param_4 == 0x2d) {
    *param_1 = 0x2d;
    puVar1 = param_1 + 1;
  }
  puVar2 = puVar1;
  if (0 < param_2) {
    puVar2 = puVar1 + 1;
    *puVar1 = puVar1[1];
    *puVar2 = DAT_0047b3d0;
  }
  pcVar3 = crt_strcpy(puVar2 + param_2 + (uint)(param_5 == '\0'),"e+000");
  if (param_3 != 0) {
    *pcVar3 = 'E';
  }
  if (*(char *)param_4[3] != '0') {
    iVar4 = param_4[1] + -1;
    if (iVar4 < 0) {
      iVar4 = -iVar4;
      pcVar3[1] = '-';
    }
    if (99 < iVar4) {
      pcVar3[2] = pcVar3[2] + (char)(iVar4 / 100);
      iVar4 = iVar4 % 100;
    }
    if (9 < iVar4) {
      pcVar3[3] = pcVar3[3] + (char)(iVar4 / 10);
      iVar4 = iVar4 % 10;
    }
    pcVar3[4] = pcVar3[4] + (char)iVar4;
  }
  return param_1;
}



/* FUN_00463981 @ 00463981 */

char * __cdecl FUN_00463981(undefined8 *param_1,char *param_2,size_t param_3)

{
  uint local_2c [6];
  int local_14;
  int local_10;
  
  FUN_0046a415((int)*param_1,(int)((ulonglong)*param_1 >> 0x20),&local_14,local_2c);
  FUN_0046a39e(param_2 + (local_14 == 0x2d),local_10 + param_3,(int)&local_14);
  FUN_004639d6(param_2,param_3,&local_14,'\0');
  return param_2;
}



/* FUN_004639d6 @ 004639d6 */

char * __cdecl FUN_004639d6(char *param_1,size_t param_2,int *param_3,char param_4)

{
  int iVar1;
  int iVar2;
  char *pcVar3;
  
  iVar1 = param_3[1];
  if ((param_4 != '\0') && (iVar1 - 1U == param_2)) {
    iVar2 = *param_3;
    param_1[(uint)(iVar2 == 0x2d) + (iVar1 - 1U)] = '0';
    (param_1 + (uint)(iVar2 == 0x2d) + (iVar1 - 1U))[1] = '\0';
  }
  pcVar3 = param_1;
  if (*param_3 == 0x2d) {
    *param_1 = '-';
    pcVar3 = param_1 + 1;
  }
  if (param_3[1] < 1) {
    FUN_00463b61(pcVar3,1);
    *pcVar3 = '0';
    pcVar3 = pcVar3 + 1;
  }
  else {
    pcVar3 = pcVar3 + param_3[1];
  }
  if (0 < (int)param_2) {
    FUN_00463b61(pcVar3,1);
    *pcVar3 = DAT_0047b3d0;
    iVar1 = param_3[1];
    if (iVar1 < 0) {
      if ((param_4 != '\0') || (-iVar1 <= (int)param_2)) {
        param_2 = -iVar1;
      }
      FUN_00463b61(pcVar3 + 1,param_2);
      _memset(pcVar3 + 1,0x30,param_2);
    }
  }
  return param_1;
}



/* FUN_00463a7d @ 00463a7d */

void __cdecl FUN_00463a7d(undefined8 *param_1,char *param_2,size_t param_3,int param_4)

{
  int iVar1;
  char *pcVar2;
  char *pcVar3;
  uint local_2c [6];
  int local_14;
  int local_10;
  
  FUN_0046a415((int)*param_1,(int)((ulonglong)*param_1 >> 0x20),&local_14,local_2c);
  iVar1 = local_10 + -1;
  FUN_0046a39e(param_2 + (local_14 == 0x2d),param_3,(int)&local_14);
  local_10 = local_10 + -1;
  if ((local_10 < -4) || ((int)param_3 <= local_10)) {
    FUN_004638bf(param_2,param_3,param_4,&local_14,'\x01');
  }
  else {
    pcVar2 = param_2 + (local_14 == 0x2d);
    if (iVar1 < local_10) {
      do {
        pcVar3 = pcVar2;
        pcVar2 = pcVar3 + 1;
      } while (*pcVar3 != '\0');
      pcVar3[-1] = '\0';
    }
    FUN_004639d6(param_2,param_3,&local_14,'\x01');
  }
  return;
}



/* __cfltcvt @ 00463b10 */

/* Library Function - Single Match
    __cfltcvt
   
   Library: Visual Studio 2003 Release */

errno_t __cdecl
__cfltcvt(double *arg,char *buffer,size_t sizeInBytes,int format,int precision,int caps)

{
  char *pcVar1;
  undefined1 *puVar2;
  
  if ((sizeInBytes == 0x65) || (sizeInBytes == 0x45)) {
    puVar2 = FUN_0046385e(arg,buffer,format,precision);
  }
  else {
    if (sizeInBytes == 0x66) {
      pcVar1 = FUN_00463981(arg,buffer,format);
      return (errno_t)pcVar1;
    }
    puVar2 = (undefined1 *)FUN_00463a7d(arg,buffer,format,precision);
  }
  return (errno_t)puVar2;
}



/* FUN_00463b61 @ 00463b61 */

void __cdecl FUN_00463b61(char *param_1,int param_2)

{
  size_t sVar1;
  
  if (param_2 != 0) {
    sVar1 = _strlen(param_1);
    crt_memmove(param_1 + param_2,param_1,sVar1 + 1);
  }
  return;
}



/* crt_msize @ 00463b86 */

/* CRT: allocation size */

size_t __cdecl crt_msize(void *ptr)

{
  byte *pbVar1;
  SIZE_T SVar2;
  size_t sVar3;
  undefined4 local_30;
  byte *local_2c;
  uint local_28;
  size_t local_24;
  byte *local_20;
  void *local_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_0046fac0;
  puStack_10 = &LAB_00465e70;
  local_14 = ExceptionList;
  if (crt_heap_mode == 3) {
    ExceptionList = &local_14;
    crt_lock(9);
    local_8 = 0;
    local_20 = (byte *)FUN_00466c7b((int)ptr);
    if (local_20 != (byte *)0x0) {
      local_24 = *(int *)((int)ptr + -4) - 9;
    }
    sVar3 = local_24;
    local_8 = 0xffffffff;
    FUN_00463bf0();
    pbVar1 = local_20;
  }
  else {
    ExceptionList = &local_14;
    if (crt_heap_mode != 2) goto LAB_00463c44;
    ExceptionList = &local_14;
    crt_lock(9);
    local_8 = 1;
    local_2c = (byte *)FUN_004679d6(ptr,&local_30,&local_28);
    if (local_2c != (byte *)0x0) {
      local_24 = (uint)*local_2c << 4;
    }
    sVar3 = local_24;
    local_8 = 0xffffffff;
    FUN_00463c6b();
    pbVar1 = local_2c;
  }
  if (pbVar1 != (byte *)0x0) {
    ExceptionList = local_14;
    return sVar3;
  }
LAB_00463c44:
  SVar2 = HeapSize(DAT_004da3a4,0,ptr);
  ExceptionList = local_14;
  return SVar2;
}



/* FUN_00463bf0 @ 00463bf0 */

void FUN_00463bf0(void)

{
  crt_unlock(9);
  return;
}



/* FUN_00463c6b @ 00463c6b */

void FUN_00463c6b(void)

{
  crt_unlock(9);
  return;
}



/* crt_isctype @ 00463c74 */

/* ctype classification (MBCS via GetStringTypeA/W) */

uint __thiscall crt_isctype(void *this,int c,uint mask)

{
  BOOL BVar1;
  int iVar2;
  undefined4 local_8;
  
  if (c + 1U < 0x101) {
    c._2_2_ = *(ushort *)(crt_ctype_table + c * 2);
  }
  else {
    if ((crt_ctype_table[(c >> 8 & 0xffU) * 2 + 1] & 0x80) == 0) {
      local_8 = CONCAT31((int3)((uint)this >> 8),(char)c) & 0xffff00ff;
      iVar2 = 1;
    }
    else {
      local_8._0_2_ = CONCAT11((char)c,(char)((uint)c >> 8));
      local_8 = CONCAT22((short)((uint)this >> 0x10),(undefined2)local_8) & 0xff00ffff;
      iVar2 = 2;
    }
    BVar1 = FUN_0046a8ce(1,(LPCSTR)&local_8,iVar2,(LPWORD)((int)&c + 2),0,0,1);
    if (BVar1 == 0) {
      return 0;
    }
  }
  return c._2_2_ & mask;
}



/* crt_lock_file @ 00463da5 */

/* lock a FILE stream (CRT lock or critical section) */

void __cdecl crt_lock_file(FILE *fp)

{
  if (((FILE *)0x47b3d7 < fp) && (fp < (FILE *)0x47b639)) {
    crt_lock(((int)&fp[-0x23d9f]._base >> 5) + 0x1c);
    return;
  }
  EnterCriticalSection((LPCRITICAL_SECTION)(fp + 1));
  return;
}



/* crt_lock_file2 @ 00463dd4 */

/* CRT: lock FILE by index or per-stream critical section */

void __cdecl crt_lock_file2(int stream_index,FILE *fp)

{
  if (stream_index < 0x14) {
    crt_lock(stream_index + 0x1c);
    return;
  }
  EnterCriticalSection((LPCRITICAL_SECTION)(fp + 1));
  return;
}



/* crt_unlock_file @ 00463df7 */

/* unlock a FILE stream (CRT lock or critical section) */

void __cdecl crt_unlock_file(FILE *fp)

{
  if (((FILE *)0x47b3d7 < fp) && (fp < (FILE *)0x47b639)) {
    crt_unlock(((int)&fp[-0x23d9f]._base >> 5) + 0x1c);
    return;
  }
  LeaveCriticalSection((LPCRITICAL_SECTION)(fp + 1));
  return;
}



/* crt_unlock_file2 @ 00463e26 */

/* CRT: unlock FILE by index or per-stream critical section */

void __cdecl crt_unlock_file2(int stream_index,FILE *fp)

{
  if (stream_index < 0x14) {
    crt_unlock(stream_index + 0x1c);
    return;
  }
  LeaveCriticalSection((LPCRITICAL_SECTION)(fp + 1));
  return;
}



/* crt_close @ 00463e49 */

/* CRT: close file handle with lock */

int __cdecl crt_close(int fd)

{
  int iVar1;
  int *piVar2;
  uint *puVar3;
  
  if (((uint)fd < DAT_004da4c0) &&
     ((*(byte *)((&DAT_004da3c0)[fd >> 5] + 4 + (fd & 0x1fU) * 0x24) & 1) != 0)) {
    crt_lock_fh(fd);
    iVar1 = crt_close_nolock(fd);
    crt_unlock_fh(fd);
    return iVar1;
  }
  piVar2 = crt_errno_ptr();
  *piVar2 = 9;
  puVar3 = crt_doserrno_ptr();
  *puVar3 = 0;
  return -1;
}



/* crt_close_nolock @ 00463ea6 */

/* CRT: close file handle without lock */

int __cdecl crt_close_nolock(int fd)

{
  void *pvVar1;
  void *pvVar2;
  WINBOOL WVar3;
  DWORD os_error;
  int iVar4;
  
  pvVar1 = crt_get_osfhandle(fd);
  if (pvVar1 != (void *)0xffffffff) {
    if ((fd == 1) || (fd == 2)) {
      pvVar1 = crt_get_osfhandle(2);
      pvVar2 = crt_get_osfhandle(1);
      if (pvVar2 == pvVar1) goto LAB_00463ef4;
    }
    pvVar1 = crt_get_osfhandle(fd);
    WVar3 = CloseHandle(pvVar1);
    if (WVar3 == 0) {
      os_error = GetLastError();
      goto LAB_00463ef6;
    }
  }
LAB_00463ef4:
  os_error = 0;
LAB_00463ef6:
  FUN_0046ac37(fd);
  *(undefined1 *)((&DAT_004da3c0)[fd >> 5] + 4 + (fd & 0x1fU) * 0x24) = 0;
  if (os_error == 0) {
    iVar4 = 0;
  }
  else {
    crt_dosmaperr(os_error);
    iVar4 = -1;
  }
  return iVar4;
}



/* __freebuf @ 00463f29 */

/* Library Function - Single Match
    __freebuf
   
   Library: Visual Studio 2003 Release */

void __cdecl __freebuf(FILE *_File)

{
  if (((_File->_flag & 0x83U) != 0) && ((_File->_flag & 8U) != 0)) {
    crt_free_base(_File->_base);
    *(ushort *)&_File->_flag = (ushort)_File->_flag & 0xfbf7;
    _File->_ptr = (char *)0x0;
    _File->_base = (char *)0x0;
    _File->_cnt = 0;
  }
  return;
}



/* crt_filbuf @ 00463f54 */

/* CRT: fill read buffer */

int __cdecl crt_filbuf(FILE *fp)

{
  byte bVar1;
  uint uVar2;
  int iVar3;
  undefined *puVar4;
  
  uVar2 = fp->_flag;
  if (((uVar2 & 0x83) != 0) && ((uVar2 & 0x40) == 0)) {
    if ((uVar2 & 2) == 0) {
      fp->_flag = uVar2 | 1;
      if ((uVar2 & 0x10c) == 0) {
        FUN_0046ad79(&fp->_ptr);
      }
      else {
        fp->_ptr = fp->_base;
      }
      iVar3 = crt_read(fp->_file,fp->_base,fp->_bufsiz);
      fp->_cnt = iVar3;
      if ((iVar3 != 0) && (iVar3 != -1)) {
        if ((fp->_flag & 0x82U) == 0) {
          uVar2 = fp->_file;
          if (uVar2 == 0xffffffff) {
            puVar4 = &DAT_0047b930;
          }
          else {
            puVar4 = (undefined *)((&DAT_004da3c0)[(int)uVar2 >> 5] + (uVar2 & 0x1f) * 0x24);
          }
          if ((puVar4[4] & 0x82) == 0x82) {
            fp->_flag = fp->_flag | 0x2000;
          }
        }
        if (((fp->_bufsiz == 0x200) && ((fp->_flag & 8U) != 0)) && ((fp->_flag & 0x400U) == 0)) {
          fp->_bufsiz = 0x1000;
        }
        fp->_cnt = iVar3 + -1;
        bVar1 = *fp->_ptr;
        fp->_ptr = fp->_ptr + 1;
        return (uint)bVar1;
      }
      fp->_flag = fp->_flag | (-(uint)(iVar3 != 0) & 0x10) + 0x10;
      fp->_cnt = 0;
    }
    else {
      fp->_flag = uVar2 | 0x20;
    }
  }
  return -1;
}



/* crt_openfile @ 00464030 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* CRT: open file with mode string parsing */

FILE * __cdecl crt_openfile(char *filename,char *mode,int shflag,FILE *stream)

{
  char cVar1;
  bool bVar2;
  bool bVar3;
  bool bVar4;
  int iVar5;
  uint oflag;
  uint uVar6;
  
  bVar4 = false;
  bVar3 = false;
  cVar1 = *mode;
  if (cVar1 == 'a') {
    oflag = 0x109;
  }
  else {
    if (cVar1 == 'r') {
      oflag = 0;
      uVar6 = DAT_004d9b8c | 1;
      goto LAB_00464071;
    }
    if (cVar1 != 'w') {
      return (FILE *)0x0;
    }
    oflag = 0x301;
  }
  uVar6 = DAT_004d9b8c | 2;
LAB_00464071:
  bVar2 = true;
LAB_00464074:
  cVar1 = mode[1];
  mode = mode + 1;
  if ((cVar1 == '\0') || (!bVar2)) {
    iVar5 = crt_sopen(filename,oflag,shflag,0x1a4);
    if (iVar5 < 0) {
      return (FILE *)0x0;
    }
    _DAT_004d99d0 = _DAT_004d99d0 + 1;
    stream->_flag = uVar6;
    stream->_cnt = 0;
    stream->_ptr = (char *)0x0;
    stream->_base = (char *)0x0;
    stream->_tmpfname = (char *)0x0;
    stream->_file = iVar5;
    return stream;
  }
  if (cVar1 < 'U') {
    if (cVar1 == 'T') {
      if ((oflag & 0x1000) == 0) {
        oflag = oflag | 0x1000;
        goto LAB_00464074;
      }
    }
    else if (cVar1 == '+') {
      if ((oflag & 2) == 0) {
        oflag = oflag & 0xfffffffe | 2;
        uVar6 = uVar6 & 0xfffffffc | 0x80;
        goto LAB_00464074;
      }
    }
    else if (cVar1 == 'D') {
      if ((oflag & 0x40) == 0) {
        oflag = oflag | 0x40;
        goto LAB_00464074;
      }
    }
    else if (cVar1 == 'R') {
      if (!bVar3) {
        bVar3 = true;
        oflag = oflag | 0x10;
        goto LAB_00464074;
      }
    }
    else if ((cVar1 == 'S') && (!bVar3)) {
      bVar3 = true;
      oflag = oflag | 0x20;
      goto LAB_00464074;
    }
  }
  else {
    if (cVar1 == 'b') {
      if ((oflag & 0xc000) != 0) goto LAB_00464154;
      oflag = oflag | 0x8000;
      goto LAB_00464074;
    }
    if (cVar1 == 'c') {
      if (!bVar4) {
        bVar4 = true;
        uVar6 = uVar6 | 0x4000;
        goto LAB_00464074;
      }
    }
    else {
      if (cVar1 != 'n') {
        if ((cVar1 != 't') || ((oflag & 0xc000) != 0)) goto LAB_00464154;
        oflag = oflag | 0x4000;
        goto LAB_00464074;
      }
      if (!bVar4) {
        bVar4 = true;
        uVar6 = uVar6 & 0xffffbfff;
        goto LAB_00464074;
      }
    }
  }
LAB_00464154:
  bVar2 = false;
  goto LAB_00464074;
}



/* crt_getstream @ 004641a0 */

/* CRT: allocate FILE struct from pool */

FILE * crt_getstream(void)

{
  FILE *pFVar1;
  void *pvVar2;
  int iVar3;
  FILE *pFVar4;
  
  pFVar4 = (FILE *)0x0;
  crt_lock(2);
  iVar3 = 0;
  if (0 < DAT_004db4e0) {
    do {
      pFVar1 = *(FILE **)(DAT_004da4c4 + iVar3 * 4);
      if (pFVar1 == (FILE *)0x0) {
        iVar3 = iVar3 * 4;
        pvVar2 = _malloc(0x38);
        *(void **)(iVar3 + DAT_004da4c4) = pvVar2;
        if (*(int *)(iVar3 + DAT_004da4c4) != 0) {
          InitializeCriticalSection((LPCRITICAL_SECTION)(*(int *)(iVar3 + DAT_004da4c4) + 0x20));
          EnterCriticalSection((LPCRITICAL_SECTION)(*(int *)(iVar3 + DAT_004da4c4) + 0x20));
          pFVar4 = *(FILE **)(iVar3 + DAT_004da4c4);
LAB_00464244:
          if (pFVar4 != (FILE *)0x0) {
            pFVar4->_file = -1;
            pFVar4->_cnt = 0;
            pFVar4->_flag = 0;
            pFVar4->_base = (char *)0x0;
            pFVar4->_ptr = (char *)0x0;
            pFVar4->_tmpfname = (char *)0x0;
          }
        }
        break;
      }
      if ((pFVar1->_flag & 0x83) == 0) {
        crt_lock_file2(iVar3,pFVar1);
        pFVar1 = *(FILE **)(DAT_004da4c4 + iVar3 * 4);
        if ((pFVar1->_flag & 0x83) == 0) {
          pFVar4 = *(FILE **)(DAT_004da4c4 + iVar3 * 4);
          goto LAB_00464244;
        }
        crt_unlock_file2(iVar3,pFVar1);
      }
      iVar3 = iVar3 + 1;
    } while (iVar3 < DAT_004db4e0);
  }
  crt_unlock(2);
  return pFVar4;
}



/* crt_flsbuf @ 00464268 */

/* flush buffer or write single char (fputc core) */

int __cdecl crt_flsbuf(int ch,FILE *fp)

{
  uint uVar1;
  uint fd;
  char *buf;
  FILE *pFVar2;
  byte bVar3;
  undefined3 extraout_var;
  undefined *puVar4;
  FILE *count;
  
  pFVar2 = fp;
  uVar1 = fp->_flag;
  fd = fp->_file;
  if (((uVar1 & 0x82) == 0) || ((uVar1 & 0x40) != 0)) {
LAB_00464374:
    fp->_flag = uVar1 | 0x20;
  }
  else {
    if ((uVar1 & 1) != 0) {
      fp->_cnt = 0;
      if ((uVar1 & 0x10) == 0) goto LAB_00464374;
      fp->_ptr = fp->_base;
      fp->_flag = uVar1 & 0xfffffffe;
    }
    uVar1 = fp->_flag;
    fp->_cnt = 0;
    fp = (FILE *)0x0;
    pFVar2->_flag = uVar1 & 0xffffffef | 2;
    if (((uVar1 & 0x10c) == 0) &&
       (((pFVar2 != (FILE *)&DAT_0047b3f8 && (pFVar2 != (FILE *)&DAT_0047b418)) ||
        (bVar3 = FUN_0046b08c(fd), CONCAT31(extraout_var,bVar3) == 0)))) {
      FUN_0046ad79(&pFVar2->_ptr);
    }
    if ((pFVar2->_flag & 0x108) == 0) {
      count = (FILE *)0x1;
      fp = (FILE *)crt_write(fd,(char *)&ch,1);
    }
    else {
      buf = pFVar2->_base;
      count = (FILE *)(pFVar2->_ptr + -(int)buf);
      pFVar2->_ptr = buf + 1;
      pFVar2->_cnt = pFVar2->_bufsiz + -1;
      if ((int)count < 1) {
        if (fd == 0xffffffff) {
          puVar4 = &DAT_0047b930;
        }
        else {
          puVar4 = (undefined *)((&DAT_004da3c0)[(int)fd >> 5] + (fd & 0x1f) * 0x24);
        }
        if ((puVar4[4] & 0x20) != 0) {
          crt_lseek(fd,0,2);
        }
      }
      else {
        fp = (FILE *)crt_write(fd,buf,(uint)count);
      }
      *pFVar2->_base = (char)ch;
    }
    if (fp == count) {
      return ch & 0xff;
    }
    pFVar2->_flag = pFVar2->_flag | 0x20;
  }
  return -1;
}



/* crt_output @ 00464380 */

/* CRT: core printf formatter */

int __cdecl crt_output(FILE *stream,char *format,void *args)

{
  char *pcVar1;
  uint uVar2;
  WCHAR *pWVar3;
  undefined4 uVar4;
  short *psVar5;
  int *piVar6;
  int iVar7;
  byte bVar8;
  int iVar9;
  WCHAR *pWVar10;
  undefined1 *puVar11;
  undefined8 uVar12;
  WCHAR local_250 [255];
  undefined1 local_51;
  undefined4 local_50;
  undefined4 local_4c;
  CHAR local_48 [4];
  undefined4 local_44;
  int local_40;
  int local_3c;
  int local_38;
  WCHAR *local_34;
  int local_30;
  int local_2c;
  int local_28;
  undefined8 local_24;
  char local_1a;
  char local_19;
  int local_18;
  undefined1 *local_14;
  WCHAR *local_10;
  int local_c;
  uint local_8;
  
  local_40 = 0;
  local_14 = (undefined1 *)0x0;
  bVar8 = *format;
  local_18 = 0;
  local_34 = (WCHAR *)0x0;
  pcVar1 = format;
  do {
    if ((bVar8 == 0) || (format = pcVar1 + 1, local_18 < 0)) {
      return local_18;
    }
    if (((char)bVar8 < ' ') || ('x' < (char)bVar8)) {
      uVar2 = 0;
    }
    else {
      uVar2 = (byte)"e+000"[(char)bVar8] & 0xf;
    }
    local_40 = (int)(char)(&DAT_0046fad8)[uVar2 * 8 + local_40] >> 4;
    switch(local_40) {
    case 0:
switchD_004643fc_caseD_0:
      local_30 = 0;
      if ((crt_ctype_table[(uint)bVar8 * 2 + 1] & 0x80) != 0) {
        crt_putc_nolock((int)(char)bVar8,stream,&local_18);
        bVar8 = *format;
        format = pcVar1 + 2;
      }
      crt_putc_nolock((int)(char)bVar8,stream,&local_18);
      break;
    case 1:
      local_c = -1;
      local_44 = 0;
      local_3c = 0;
      local_2c = 0;
      local_28 = 0;
      local_8 = 0;
      local_30 = 0;
      break;
    case 2:
      if (bVar8 == 0x20) {
        local_8 = local_8 | 2;
      }
      else if (bVar8 == 0x23) {
        local_8 = local_8 | 0x80;
      }
      else if (bVar8 == 0x2b) {
        local_8 = local_8 | 1;
      }
      else if (bVar8 == 0x2d) {
        local_8 = local_8 | 4;
      }
      else if (bVar8 == 0x30) {
        local_8 = local_8 | 8;
      }
      break;
    case 3:
      if (bVar8 == 0x2a) {
        local_2c = FUN_00464bbc((int *)&args);
        if (local_2c < 0) {
          local_8 = local_8 | 4;
          local_2c = -local_2c;
        }
      }
      else {
        local_2c = (char)bVar8 + -0x30 + local_2c * 10;
      }
      break;
    case 4:
      local_c = 0;
      break;
    case 5:
      if (bVar8 == 0x2a) {
        local_c = FUN_00464bbc((int *)&args);
        if (local_c < 0) {
          local_c = -1;
        }
      }
      else {
        local_c = (char)bVar8 + -0x30 + local_c * 10;
      }
      break;
    case 6:
      if (bVar8 == 0x49) {
        if ((*format != 0x36) || (pcVar1[2] != '4')) {
          local_40 = 0;
          goto switchD_004643fc_caseD_0;
        }
        format = pcVar1 + 3;
        local_8 = local_8 | 0x8000;
      }
      else if (bVar8 == 0x68) {
        local_8 = local_8 | 0x20;
      }
      else if (bVar8 == 0x6c) {
        local_8 = local_8 | 0x10;
      }
      else if (bVar8 == 0x77) {
        local_8 = local_8 | 0x800;
      }
      break;
    case 7:
      pWVar10 = local_10;
      if ((char)bVar8 < 'h') {
        if ((char)bVar8 < 'e') {
          if ((char)bVar8 < 'Y') {
            if (bVar8 != 0x58) {
              if (bVar8 == 0x43) {
                if ((local_8 & 0x830) == 0) {
                  local_8 = local_8 | 0x800;
                }
                goto LAB_00464651;
              }
              if ((bVar8 != 0x45) && (bVar8 != 0x47)) {
                if (bVar8 == 0x53) {
                  if ((local_8 & 0x830) == 0) {
                    local_8 = local_8 | 0x800;
                  }
                  goto LAB_004645c1;
                }
                goto LAB_004649d4;
              }
              local_44 = 1;
              bVar8 = bVar8 + 0x20;
              goto LAB_00464623;
            }
LAB_00464830:
            local_38 = 7;
LAB_00464837:
            local_14 = (undefined1 *)0x10;
            if ((local_8 & 0x80) != 0) {
              local_1a = '0';
              local_19 = (char)local_38 + 'Q';
              local_28 = 2;
            }
            goto LAB_004648a0;
          }
          if (bVar8 == 0x5a) {
            psVar5 = (short *)FUN_00464bbc((int *)&args);
            if ((psVar5 == (short *)0x0) ||
               (pWVar10 = *(WCHAR **)(psVar5 + 2), pWVar10 == (WCHAR *)0x0)) {
              local_10 = (WCHAR *)PTR_DAT_0047b658;
              pWVar10 = (WCHAR *)PTR_DAT_0047b658;
              goto LAB_004647b1;
            }
            if ((local_8 & 0x800) == 0) {
              local_30 = 0;
              local_14 = (undefined1 *)(int)*psVar5;
            }
            else {
              local_30 = 1;
              local_14 = (undefined1 *)((uint)(int)*psVar5 >> 1);
            }
          }
          else if (bVar8 == 99) {
LAB_00464651:
            if ((local_8 & 0x810) == 0) {
              uVar4 = FUN_00464bbc((int *)&args);
              local_250[0]._0_1_ = (undefined1)uVar4;
              local_14 = (undefined1 *)0x1;
            }
            else {
              uVar4 = FUN_00464bd9((int *)&args);
              local_14 = (undefined1 *)FUN_0046b0b5((LPSTR)local_250,(WCHAR)uVar4);
              if ((int)local_14 < 0) {
                local_3c = 1;
              }
            }
            pWVar10 = local_250;
          }
          else if (bVar8 == 100) goto LAB_00464895;
        }
        else {
LAB_00464623:
          local_8 = local_8 | 0x40;
          pWVar10 = local_250;
          pWVar3 = local_250;
          if (local_c < 0) {
            local_c = 6;
          }
          else if (local_c == 0) {
            if (bVar8 == 0x67) {
              local_c = 1;
            }
          }
          else {
            if (0x200 < local_c) {
              local_c = 0x200;
            }
            if ((0xa3 < local_c) &&
               (local_10 = local_250, local_34 = _malloc(local_c + 0x15d), pWVar10 = local_34,
               pWVar3 = local_34, local_34 == (WCHAR *)0x0)) {
              local_c = 0xa3;
              pWVar10 = local_250;
              pWVar3 = local_10;
            }
          }
          local_10 = pWVar3;
          local_50 = *(undefined4 *)args;
          local_4c = *(undefined4 *)((int)args + 4);
          args = (void *)((int)args + 8);
          (*(code *)PTR_FUN_0047b1a8)(&local_50,pWVar10,(int)(char)bVar8,local_c,local_44);
          uVar2 = local_8 & 0x80;
          if ((uVar2 != 0) && (local_c == 0)) {
            (*(code *)PTR_FUN_0047b1b4)(pWVar10);
          }
          if ((bVar8 == 0x67) && (uVar2 == 0)) {
            (*(code *)PTR_FUN_0047b1ac)(pWVar10);
          }
          if ((char)*pWVar10 == '-') {
            local_8 = local_8 | 0x100;
            pWVar10 = (WCHAR *)((int)pWVar10 + 1);
            local_10 = pWVar10;
          }
LAB_004647b1:
          local_14 = (undefined1 *)_strlen((char *)pWVar10);
          pWVar10 = local_10;
        }
LAB_004649d4:
        local_10 = pWVar10;
        uVar2 = local_8;
        if (local_3c == 0) {
          if ((local_8 & 0x40) != 0) {
            if ((local_8 & 0x100) == 0) {
              if ((local_8 & 1) == 0) {
                if ((local_8 & 2) == 0) goto LAB_00464a0c;
                local_1a = ' ';
              }
              else {
                local_1a = '+';
              }
            }
            else {
              local_1a = '-';
            }
            local_28 = 1;
          }
LAB_00464a0c:
          iVar9 = (local_2c - local_28) - (int)local_14;
          if ((local_8 & 0xc) == 0) {
            crt_putc_repeat_nolock(0x20,iVar9,stream,&local_18);
          }
          crt_putc_buffer_nolock(&local_1a,local_28,stream,&local_18);
          if (((uVar2 & 8) != 0) && ((uVar2 & 4) == 0)) {
            crt_putc_repeat_nolock(0x30,iVar9,stream,&local_18);
          }
          if ((local_30 == 0) || (puVar11 = local_14, pWVar10 = local_10, (int)local_14 < 1)) {
            crt_putc_buffer_nolock((char *)local_10,(int)local_14,stream,&local_18);
          }
          else {
            do {
              puVar11 = puVar11 + -1;
              iVar7 = FUN_0046b0b5(local_48,*pWVar10);
              if (iVar7 < 1) break;
              crt_putc_buffer_nolock(local_48,iVar7,stream,&local_18);
              pWVar10 = pWVar10 + 1;
            } while (puVar11 != (undefined1 *)0x0);
          }
          if ((local_8 & 4) != 0) {
            crt_putc_repeat_nolock(0x20,iVar9,stream,&local_18);
          }
        }
      }
      else {
        if (bVar8 == 0x69) {
LAB_00464895:
          local_8 = local_8 | 0x40;
LAB_00464899:
          local_14 = (undefined1 *)0xa;
LAB_004648a0:
          if ((local_8 & 0x8000) == 0) {
            if ((local_8 & 0x20) == 0) {
              if ((local_8 & 0x40) == 0) {
                uVar2 = FUN_00464bbc((int *)&args);
                local_24 = (ulonglong)uVar2;
                goto LAB_004648f3;
              }
              uVar2 = FUN_00464bbc((int *)&args);
            }
            else if ((local_8 & 0x40) == 0) {
              uVar2 = FUN_00464bbc((int *)&args);
              uVar2 = uVar2 & 0xffff;
            }
            else {
              uVar4 = FUN_00464bbc((int *)&args);
              uVar2 = (uint)(short)uVar4;
            }
            local_24 = (ulonglong)(int)uVar2;
          }
          else {
            local_24 = FUN_00464bc9((int *)&args);
          }
LAB_004648f3:
          iVar9 = (int)(local_24 >> 0x20);
          if ((((local_8 & 0x40) != 0) && (iVar9 == 0 || (longlong)local_24 < 0)) &&
             ((longlong)local_24 < 0)) {
            local_8 = local_8 | 0x100;
            local_24 = CONCAT44(-(iVar9 + (uint)((int)local_24 != 0)),-(int)local_24);
          }
          if ((local_8 & 0x8000) == 0) {
            local_24 = local_24 & 0xffffffff;
          }
          if (local_c < 0) {
            local_c = 1;
          }
          else {
            local_8 = local_8 & 0xfffffff7;
            if (0x200 < local_c) {
              local_c = 0x200;
            }
          }
          if ((uint)local_24 == 0 && local_24._4_4_ == 0) {
            local_28 = 0;
          }
          local_10 = (WCHAR *)&local_51;
          while( true ) {
            puVar11 = local_14;
            iVar9 = local_c + -1;
            if ((local_c < 1) && ((uint)local_24 == 0 && local_24._4_4_ == 0)) break;
            uVar2 = (int)local_14 >> 0x1f;
            local_c = iVar9;
            uVar12 = __aullrem((uint)local_24,local_24._4_4_,(uint)local_14,uVar2);
            iVar9 = (int)uVar12 + 0x30;
            local_24 = __aulldiv((uint)local_24,local_24._4_4_,(uint)puVar11,uVar2);
            if (0x39 < iVar9) {
              iVar9 = iVar9 + local_38;
            }
            pWVar10 = (WCHAR *)((int)local_10 + -1);
            *(char *)local_10 = (char)iVar9;
            local_10 = pWVar10;
          }
          iVar7 = -(int)local_10;
          local_14 = &local_51 + iVar7;
          pWVar10 = (WCHAR *)((int)local_10 + 1);
          local_c = iVar9;
          if (((local_8 & 0x200) != 0) &&
             ((*(char *)pWVar10 != '0' || (local_14 == (undefined1 *)0x0)))) {
            *(char *)local_10 = '0';
            local_14 = (undefined1 *)((int)&local_50 + iVar7);
            pWVar10 = local_10;
          }
          goto LAB_004649d4;
        }
        if (bVar8 != 0x6e) {
          if (bVar8 == 0x6f) {
            local_14 = (undefined1 *)0x8;
            if ((local_8 & 0x80) != 0) {
              local_8 = local_8 | 0x200;
            }
            goto LAB_004648a0;
          }
          if (bVar8 == 0x70) {
            local_c = 8;
            goto LAB_00464830;
          }
          if (bVar8 == 0x73) {
LAB_004645c1:
            iVar9 = 0x7fffffff;
            if (local_c != -1) {
              iVar9 = local_c;
            }
            pWVar3 = (WCHAR *)FUN_00464bbc((int *)&args);
            if ((local_8 & 0x810) == 0) {
              pWVar10 = pWVar3;
              if (pWVar3 == (WCHAR *)0x0) {
                pWVar3 = (WCHAR *)PTR_DAT_0047b658;
                pWVar10 = (WCHAR *)PTR_DAT_0047b658;
              }
              for (; (iVar9 != 0 && ((char)*pWVar3 != '\0')); pWVar3 = (WCHAR *)((int)pWVar3 + 1)) {
                iVar9 = iVar9 + -1;
              }
              local_14 = (undefined1 *)((int)pWVar3 - (int)pWVar10);
            }
            else {
              if (pWVar3 == (WCHAR *)0x0) {
                pWVar3 = (WCHAR *)PTR_DAT_0047b65c;
              }
              local_30 = 1;
              for (pWVar10 = pWVar3; (iVar9 != 0 && (*pWVar10 != L'\0')); pWVar10 = pWVar10 + 1) {
                iVar9 = iVar9 + -1;
              }
              local_14 = (undefined1 *)((int)pWVar10 - (int)pWVar3 >> 1);
              pWVar10 = pWVar3;
            }
            goto LAB_004649d4;
          }
          if (bVar8 != 0x75) {
            if (bVar8 != 0x78) goto LAB_004649d4;
            local_38 = 0x27;
            goto LAB_00464837;
          }
          goto LAB_00464899;
        }
        piVar6 = (int *)FUN_00464bbc((int *)&args);
        if ((local_8 & 0x20) == 0) {
          *piVar6 = local_18;
        }
        else {
          *(undefined2 *)piVar6 = (undefined2)local_18;
        }
        local_3c = 1;
      }
      if (local_34 != (WCHAR *)0x0) {
        crt_free_base(local_34);
        local_34 = (WCHAR *)0x0;
      }
    }
    bVar8 = *format;
    pcVar1 = format;
  } while( true );
}



/* crt_putc_nolock @ 00464b1e */

/* putc_nolock-style helper (increments count or sets -1 on error) */

void __cdecl crt_putc_nolock(int ch,FILE *fp,int *count)

{
  int *piVar1;
  uint uVar2;
  
  piVar1 = &fp->_cnt;
  *piVar1 = *piVar1 + -1;
  if (*piVar1 < 0) {
    uVar2 = crt_flsbuf(ch,fp);
  }
  else {
    *fp->_ptr = (char)ch;
    fp->_ptr = fp->_ptr + 1;
    uVar2 = ch & 0xff;
  }
  if (uVar2 == 0xffffffff) {
    *count = -1;
    return;
  }
  *count = *count + 1;
  return;
}



/* crt_putc_repeat_nolock @ 00464b53 */

/* emit repeated chars via crt_putc_nolock (printf padding helper) */

void __cdecl crt_putc_repeat_nolock(int ch,int count,FILE *fp,int *out_count)

{
  do {
    if (count < 1) {
      return;
    }
    count = count + -1;
    crt_putc_nolock(ch,fp,out_count);
  } while (*out_count != -1);
  return;
}



/* crt_putc_buffer_nolock @ 00464b84 */

/* emit buffer chars via crt_putc_nolock (printf string helper) */

void __cdecl crt_putc_buffer_nolock(char *buf,int count,FILE *fp,int *out_count)

{
  char cVar1;
  
  do {
    if (count < 1) {
      return;
    }
    count = count + -1;
    cVar1 = *buf;
    buf = buf + 1;
    crt_putc_nolock((int)cVar1,fp,out_count);
  } while (*out_count != -1);
  return;
}



/* FUN_00464bbc @ 00464bbc */

undefined4 __cdecl FUN_00464bbc(int *param_1)

{
  *param_1 = *param_1 + 4;
  return *(undefined4 *)(*param_1 + -4);
}



/* FUN_00464bc9 @ 00464bc9 */

undefined8 __cdecl FUN_00464bc9(int *param_1)

{
  *param_1 = *param_1 + 8;
  return *(undefined8 *)(*param_1 + -8);
}



/* FUN_00464bd9 @ 00464bd9 */

undefined4 __cdecl FUN_00464bd9(int *param_1)

{
  *param_1 = *param_1 + 4;
  return CONCAT22((short)((uint)*param_1 >> 0x10),*(undefined2 *)(*param_1 + -4));
}



/* FUN_00464be7 @ 00464be7 */

void __thiscall FUN_00464be7(void *this,uint *param_1,byte *param_2)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  ushort local_1c [6];
  uint local_10;
  undefined4 uStack_c;
  int local_8;
  
  uVar3 = 0;
  uVar1 = FUN_0046b265(this,local_1c,&local_8,param_2,0,0,0,0);
  if ((uVar1 & 4) == 0) {
    iVar2 = FUN_0046a318(local_1c,&local_10);
    if (((uVar1 & 2) != 0) || (iVar2 == 1)) {
      uVar3 = 0x80;
    }
    if (((uVar1 & 1) != 0) || (iVar2 == 2)) {
      uVar3 = uVar3 | 0x100;
    }
  }
  else {
    uVar3 = 0x200;
    local_10 = 0;
    uStack_c = 0;
  }
  *param_1 = uVar3;
  *(ulonglong *)(param_1 + 4) = CONCAT44(uStack_c,local_10);
  param_1[1] = local_8 - (int)param_2;
  return;
}



/* _strlen @ 00464c70 */

/* Library Function - Single Match
    _strlen
   
   Libraries: Visual Studio 1998 Debug, Visual Studio 1998 Release */

size_t __cdecl _strlen(char *_Str)

{
  uint uVar1;
  uint *puVar2;
  uint *puVar3;
  
  puVar2 = (uint *)_Str;
  do {
    if (((uint)puVar2 & 3) == 0) goto LAB_00464c90;
    uVar1 = *puVar2;
    puVar2 = (uint *)((int)puVar2 + 1);
  } while ((char)uVar1 != '\0');
LAB_00464cc3:
  return (size_t)((int)puVar2 + (-1 - (int)_Str));
LAB_00464c90:
  do {
    do {
      puVar3 = puVar2;
      puVar2 = puVar3 + 1;
    } while (((*puVar3 ^ 0xffffffff ^ *puVar3 + 0x7efefeff) & 0x81010100) == 0);
    uVar1 = *puVar3;
    if ((char)uVar1 == '\0') {
      return (int)puVar3 - (int)_Str;
    }
    if ((char)(uVar1 >> 8) == '\0') {
      return (size_t)((int)puVar3 + (1 - (int)_Str));
    }
    if ((uVar1 & 0xff0000) == 0) {
      return (size_t)((int)puVar3 + (2 - (int)_Str));
    }
  } while ((uVar1 & 0xff000000) != 0);
  goto LAB_00464cc3;
}



/* FUN_004650d0 @ 004650d0 */

float10 __fastcall
FUN_004650d0(undefined4 param_1,uint param_2,undefined2 param_3,undefined4 param_4,
            undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8)

{
  float10 in_ST0;
  int local_24;
  undefined4 uStack_20;
  undefined4 uStack_1c;
  undefined4 uStack_18;
  undefined4 local_14;
  undefined4 local_10;
  double dStack_c;
  
  local_14 = param_7;
  local_10 = param_8;
  dStack_c = (double)in_ST0;
  uStack_1c = param_5;
  uStack_18 = param_6;
  uStack_20 = param_1;
  FUN_0046c4cb(param_2,&local_24,&param_3);
  return (float10)dStack_c;
}



/* __startOneArgErrorHandling @ 004650e7 */

/* Library Function - Single Match
    __startOneArgErrorHandling
   
   Library: Visual Studio */

float10 __fastcall
__startOneArgErrorHandling
          (undefined4 param_1,uint param_2,ushort param_3,undefined4 param_4,undefined4 param_5,
          undefined4 param_6)

{
  float10 in_ST0;
  int local_24;
  undefined4 local_20;
  undefined4 local_1c;
  undefined4 local_18;
  double local_c;
  
  local_c = (double)in_ST0;
  local_1c = param_5;
  local_18 = param_6;
  local_20 = param_1;
  FUN_0046c4cb(param_2,&local_24,&param_3);
  return (float10)local_c;
}



/* FUN_00465130 @ 00465130 */

undefined1  [10] FUN_00465130(void)

{
  float10 in_ST0;
  float10 fVar1;
  undefined1 auVar2 [10];
  
  fVar1 = (float10)f2xm1(-(ROUND(in_ST0) - in_ST0));
  auVar2 = (undefined1  [10])fscale((float10)1 + fVar1,ROUND(in_ST0));
  return auVar2;
}



/* FUN_00465145 @ 00465145 */

void FUN_00465145(void)

{
  return;
}



/* FUN_0046515c @ 0046515c */

undefined4 FUN_0046515c(void)

{
  uint in_EAX;
  
  if ((in_EAX & 0x80000) != 0) {
    return 7;
  }
  return 1;
}



/* __fload_withFB @ 00465175 */

/* Library Function - Single Match
    __fload_withFB
   
   Library: Visual Studio */

uint __fastcall __fload_withFB(undefined4 param_1,int param_2)

{
  uint uVar1;
  
  uVar1 = *(uint *)(param_2 + 4) & 0x7ff00000;
  if (uVar1 != 0x7ff00000) {
    return uVar1;
  }
  return *(uint *)(param_2 + 4);
}



/* FUN_004651b8 @ 004651b8 */

uint __cdecl FUN_004651b8(undefined4 param_1,uint param_2)

{
  if ((param_2 & 0x7ff00000) != 0x7ff00000) {
    return param_2 & 0x7ff00000;
  }
  return param_2;
}



/* FUN_004651ce @ 004651ce */

void FUN_004651ce(void)

{
  return;
}



/* __math_exit @ 004651db */

/* Library Function - Single Match
    __math_exit
   
   Library: Visual Studio */

void __fastcall
__math_exit(undefined4 param_1,uint param_2,undefined4 param_3,undefined4 param_4,undefined4 param_5
           )

{
  ushort in_FPUStatusWord;
  ushort unaff_retaddr;
  
  if (((unaff_retaddr != 0x27f) && ((unaff_retaddr & 0x20) != 0)) &&
     ((in_FPUStatusWord & 0x20) != 0)) {
    __startOneArgErrorHandling(param_1,param_2,unaff_retaddr,param_3,param_4,param_5);
    return;
  }
  return;
}



/* FUN_00465219 @ 00465219 */

void __fastcall
FUN_00465219(undefined4 param_1,uint param_2,undefined4 param_3,undefined4 param_4,
            undefined4 param_5,undefined4 param_6,undefined4 param_7)

{
  ushort in_FPUStatusWord;
  float10 in_ST0;
  ushort unaff_retaddr;
  uint uStack_4;
  
  uStack_4 = (uint)((ulonglong)(double)in_ST0 >> 0x20);
  if (((ulonglong)(double)in_ST0 & 0x7ff0000000000000) == 0) {
    fscale(in_ST0,(float10)1536.0);
  }
  else if ((uStack_4 & 0x7ff00000) == 0x7ff00000) {
    fscale(in_ST0,(float10)-1536.0);
  }
  else if (((unaff_retaddr == 0x27f) || ((unaff_retaddr & 0x20) != 0)) ||
          ((in_FPUStatusWord & 0x20) == 0)) {
    return;
  }
  if (param_2 == 0x1d) {
    FUN_004650d0(param_1,0x1d,unaff_retaddr,param_3,param_4,param_5,param_6,param_7);
    return;
  }
  __startOneArgErrorHandling(param_1,param_2,unaff_retaddr,param_3,param_4,param_5);
  return;
}



/* FUN_004652bc @ 004652bc */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

undefined4 __cdecl FUN_004652bc(int param_1,int param_2,double param_3,double *param_4)

{
  double dVar1;
  double dVar2;
  int iVar3;
  
  dVar1 = (double)CONCAT44(param_2,param_1);
  if ((double)CONCAT44(param_2,param_1) < 0.0) {
    dVar1 = -dVar1;
  }
  dVar2 = _DAT_0047dbb8;
  if (param_3._4_4_ == 0x7ff00000) {
    if (param_3._0_4_ != 0) {
LAB_00465347:
      if (param_2 == 0x7ff00000) {
        if (param_1 != 0) {
          return 0;
        }
        if (0.0 < param_3) goto LAB_004653e2;
        if (param_3 < 0.0) goto LAB_00465379;
      }
      else {
        if (param_2 != -0x100000) {
          return 0;
        }
        if (param_1 != 0) {
          return 0;
        }
        iVar3 = FUN_004653ec(param_3);
        if (0.0 < param_3) {
          dVar2 = _DAT_0047dbb8;
          if (iVar3 == 1) {
            dVar2 = -_DAT_0047dbb8;
          }
          goto LAB_004653e2;
        }
        if (param_3 < 0.0) {
          dVar2 = _DAT_0047dbd8;
          if (iVar3 != 1) {
            dVar2 = 0.0;
          }
          goto LAB_004653e2;
        }
      }
      dVar2 = 1.0;
      goto LAB_004653e2;
    }
    if (1.0 < dVar1) goto LAB_004653e2;
    if (1.0 <= dVar1) {
LAB_0046530c:
      *param_4 = _DAT_0047dbc0;
      return 1;
    }
  }
  else {
    if (param_3 != -INFINITY) goto LAB_00465347;
    if (dVar1 <= 1.0) {
      if (1.0 <= dVar1) goto LAB_0046530c;
      goto LAB_004653e2;
    }
  }
LAB_00465379:
  dVar2 = 0.0;
LAB_004653e2:
  *param_4 = dVar2;
  return 0;
}



/* FUN_004653ec @ 004653ec */

undefined4 __cdecl FUN_004653ec(double param_1)

{
  uint uVar1;
  float10 fVar2;
  undefined4 uVar3;
  
  uVar1 = FUN_0046325f(SUB84(param_1,0),(uint)((ulonglong)param_1 >> 0x20));
  if ((uVar1 & 0x90) == 0) {
    fVar2 = __frnd(param_1);
    if ((double)fVar2 == param_1) {
      fVar2 = __frnd(param_1 / 2.0);
      if (fVar2 == (float10)(param_1 / 2.0)) {
        uVar3 = 2;
      }
      else {
        uVar3 = 1;
      }
      return uVar3;
    }
  }
  return 0;
}



/* crt_mt_init @ 00465451 */

/* CRT thread init (TLS + locks) */

undefined4 crt_mt_init(void)

{
  DWORD *lpTlsValue;
  WINBOOL WVar1;
  DWORD DVar2;
  
  crt_init_locks();
  DAT_0047b6f0 = TlsAlloc();
  if (DAT_0047b6f0 != 0xffffffff) {
    lpTlsValue = crt_calloc(1,0x74);
    if (lpTlsValue != (DWORD *)0x0) {
      WVar1 = TlsSetValue(DAT_0047b6f0,lpTlsValue);
      if (WVar1 != 0) {
        FUN_004654a5((int)lpTlsValue);
        DVar2 = GetCurrentThreadId();
        lpTlsValue[1] = 0xffffffff;
        *lpTlsValue = DVar2;
        return 1;
      }
    }
  }
  return 0;
}



/* FUN_004654a5 @ 004654a5 */

void __cdecl FUN_004654a5(int param_1)

{
  *(undefined **)(param_1 + 0x50) = &DAT_0047ba60;
  *(undefined4 *)(param_1 + 0x14) = 1;
  return;
}



/* crt_get_thread_data @ 004654b8 */

/* CRT per-thread data accessor */

DWORD * crt_get_thread_data(void)

{
  DWORD dwErrCode;
  DWORD *lpTlsValue;
  WINBOOL WVar1;
  DWORD DVar2;
  
  dwErrCode = GetLastError();
  lpTlsValue = TlsGetValue(DAT_0047b6f0);
  if (lpTlsValue == (DWORD *)0x0) {
    lpTlsValue = crt_calloc(1,0x74);
    if (lpTlsValue != (DWORD *)0x0) {
      WVar1 = TlsSetValue(DAT_0047b6f0,lpTlsValue);
      if (WVar1 != 0) {
        FUN_004654a5((int)lpTlsValue);
        DVar2 = GetCurrentThreadId();
        lpTlsValue[1] = 0xffffffff;
        *lpTlsValue = DVar2;
        goto LAB_00465513;
      }
    }
    __amsg_exit(0x10);
  }
LAB_00465513:
  SetLastError(dwErrCode);
  return lpTlsValue;
}



/* crt_free_thread_data @ 0046551f */

/* frees CRT per-thread data */

void __cdecl crt_free_thread_data(undefined *param_1)

{
  if (DAT_0047b6f0 != 0xffffffff) {
    if ((param_1 != (undefined *)0x0) ||
       (param_1 = TlsGetValue(DAT_0047b6f0), param_1 != (undefined *)0x0)) {
      if (*(void **)(param_1 + 0x24) != (void *)0x0) {
        crt_free_base(*(void **)(param_1 + 0x24));
      }
      if (*(void **)(param_1 + 0x28) != (void *)0x0) {
        crt_free_base(*(void **)(param_1 + 0x28));
      }
      if (*(void **)(param_1 + 0x30) != (void *)0x0) {
        crt_free_base(*(void **)(param_1 + 0x30));
      }
      if (*(void **)(param_1 + 0x38) != (void *)0x0) {
        crt_free_base(*(void **)(param_1 + 0x38));
      }
      if (*(void **)(param_1 + 0x40) != (void *)0x0) {
        crt_free_base(*(void **)(param_1 + 0x40));
      }
      if (*(void **)(param_1 + 0x44) != (void *)0x0) {
        crt_free_base(*(void **)(param_1 + 0x44));
      }
      if (*(undefined **)(param_1 + 0x50) != &DAT_0047ba60) {
        crt_free_base(*(undefined **)(param_1 + 0x50));
      }
      crt_free_base(param_1);
    }
    TlsSetValue(DAT_0047b6f0,(LPVOID)0x0);
    return;
  }
  return;
}



/* crt_commit @ 004655bf */

/* CRT: commit file buffers to disk */

int __cdecl crt_commit(int fd)

{
  void *hFile;
  WINBOOL WVar1;
  DWORD DVar2;
  uint *puVar3;
  int *piVar4;
  int iVar5;
  
  if (DAT_004da4c0 <= (uint)fd) {
LAB_00465640:
    piVar4 = crt_errno_ptr();
    *piVar4 = 9;
    return -1;
  }
  iVar5 = (fd & 0x1fU) * 0x24;
  if ((*(byte *)((&DAT_004da3c0)[fd >> 5] + 4 + iVar5) & 1) == 0) goto LAB_00465640;
  crt_lock_fh(fd);
  if ((*(byte *)((&DAT_004da3c0)[fd >> 5] + 4 + iVar5) & 1) != 0) {
    hFile = crt_get_osfhandle(fd);
    WVar1 = FlushFileBuffers(hFile);
    if (WVar1 == 0) {
      DVar2 = GetLastError();
    }
    else {
      DVar2 = 0;
    }
    iVar5 = 0;
    if (DVar2 == 0) goto LAB_00465635;
    puVar3 = crt_doserrno_ptr();
    *puVar3 = DVar2;
  }
  piVar4 = crt_errno_ptr();
  *piVar4 = 9;
  iVar5 = -1;
LAB_00465635:
  crt_unlock_fh(fd);
  return iVar5;
}



/* crt_write @ 00465652 */

/* CRT: write handle with lock */

int __cdecl crt_write(int fd,char *buf,uint count)

{
  int iVar1;
  int *piVar2;
  uint *puVar3;
  
  if (((uint)fd < DAT_004da4c0) &&
     ((*(byte *)((&DAT_004da3c0)[fd >> 5] + 4 + (fd & 0x1fU) * 0x24) & 1) != 0)) {
    crt_lock_fh(fd);
    iVar1 = crt_write_nolock(fd,buf,count);
    crt_unlock_fh(fd);
    return iVar1;
  }
  piVar2 = crt_errno_ptr();
  *piVar2 = 9;
  puVar3 = crt_doserrno_ptr();
  *puVar3 = 0;
  return -1;
}



/* crt_write_nolock @ 004656b7 */

/* CRT: write handle (no lock), text-mode CRLF translation */

int __cdecl crt_write_nolock(int fd,char *buf,uint count)

{
  char *pcVar1;
  char cVar2;
  int iVar3;
  char *pcVar4;
  WINBOOL WVar5;
  int *piVar6;
  uint *puVar7;
  char local_418 [1028];
  int local_14;
  DWORD local_10;
  DWORD local_c;
  char *local_8;
  
  local_c = 0;
  local_14 = 0;
  if (count == 0) {
LAB_004656d0:
    iVar3 = 0;
  }
  else {
    piVar6 = &DAT_004da3c0 + (fd >> 5);
    iVar3 = (fd & 0x1fU) * 0x24;
    if ((*(byte *)(*piVar6 + 4 + iVar3) & 0x20) != 0) {
      crt_lseek_nolock(fd,0,2);
    }
    if ((*(byte *)((undefined4 *)(*piVar6 + iVar3) + 1) & 0x80) == 0) {
      WVar5 = WriteFile(*(HANDLE *)(*piVar6 + iVar3),buf,count,&local_10,(LPOVERLAPPED)0x0);
      if (WVar5 == 0) {
        fd = GetLastError();
      }
      else {
        local_c = local_10;
        fd = 0;
      }
LAB_0046579f:
      if (local_c != 0) {
        return local_c - local_14;
      }
      if (fd == 0) goto LAB_00465811;
      if (fd == 5) {
        piVar6 = crt_errno_ptr();
        *piVar6 = 9;
        puVar7 = crt_doserrno_ptr();
        *puVar7 = 5;
      }
      else {
        crt_dosmaperr(fd);
      }
    }
    else {
      local_8 = buf;
      fd = 0;
      if (count != 0) {
        do {
          pcVar4 = local_418;
          do {
            if (count <= (uint)((int)local_8 - (int)buf)) break;
            pcVar1 = local_8 + 1;
            cVar2 = *local_8;
            local_8 = pcVar1;
            if (cVar2 == '\n') {
              local_14 = local_14 + 1;
              *pcVar4 = '\r';
              pcVar4 = pcVar4 + 1;
            }
            *pcVar4 = cVar2;
            pcVar4 = pcVar4 + 1;
          } while ((int)pcVar4 - (int)local_418 < 0x400);
          WVar5 = WriteFile(*(HANDLE *)(*piVar6 + iVar3),local_418,(int)pcVar4 - (int)local_418,
                            &local_10,(LPOVERLAPPED)0x0);
          if (WVar5 == 0) {
            fd = GetLastError();
            goto LAB_0046579f;
          }
          local_c = local_c + local_10;
          if (((int)local_10 < (int)pcVar4 - (int)local_418) ||
             (count <= (uint)((int)local_8 - (int)buf))) goto LAB_0046579f;
        } while( true );
      }
LAB_00465811:
      if (((*(byte *)(*piVar6 + 4 + iVar3) & 0x40) != 0) && (*buf == '\x1a')) goto LAB_004656d0;
      piVar6 = crt_errno_ptr();
      *piVar6 = 0x1c;
      puVar7 = crt_doserrno_ptr();
      *puVar7 = 0;
    }
    iVar3 = -1;
  }
  return iVar3;
}



/* crt_init_locks @ 00465842 */

/* initializes CRT critical sections */

void crt_init_locks(void)

{
  InitializeCriticalSection((LPCRITICAL_SECTION)PTR_DAT_0047b738);
  InitializeCriticalSection((LPCRITICAL_SECTION)PTR_DAT_0047b728);
  InitializeCriticalSection((LPCRITICAL_SECTION)PTR_DAT_0047b718);
  InitializeCriticalSection((LPCRITICAL_SECTION)PTR_DAT_0047b6f8);
  return;
}



/* crt_lock @ 0046586b */

/* CRT lock table enter */

void __cdecl crt_lock(int param_1)

{
  int *piVar1;
  LPCRITICAL_SECTION lpCriticalSection;
  
  piVar1 = (int *)(&DAT_0047b6f4 + param_1 * 4);
  if (*(int *)(&DAT_0047b6f4 + param_1 * 4) == 0) {
    lpCriticalSection = _malloc(0x18);
    if (lpCriticalSection == (LPCRITICAL_SECTION)0x0) {
      __amsg_exit(0x11);
    }
    crt_lock(0x11);
    if (*piVar1 == 0) {
      InitializeCriticalSection(lpCriticalSection);
      *piVar1 = (int)lpCriticalSection;
    }
    else {
      crt_free_base(lpCriticalSection);
    }
    crt_unlock(0x11);
  }
  EnterCriticalSection((LPCRITICAL_SECTION)*piVar1);
  return;
}



/* crt_unlock @ 004658cc */

/* CRT lock table leave */

void __cdecl crt_unlock(int param_1)

{
  LeaveCriticalSection(*(LPCRITICAL_SECTION *)(&DAT_0047b6f4 + param_1 * 4));
  return;
}



/* crt_bufcpy @ 004658f0 */

/* CRT: buffer copy helper (overlap-safe) */

void * __cdecl crt_bufcpy(void *dst,void *src,size_t size)

{
  uint uVar1;
  uint uVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  
  if ((src < dst) && (dst < (void *)(size + (int)src))) {
    puVar3 = (undefined4 *)((size - 4) + (int)src);
    puVar4 = (undefined4 *)((size - 4) + (int)dst);
    if (((uint)puVar4 & 3) == 0) {
      uVar1 = size >> 2;
      uVar2 = size & 3;
      if (7 < uVar1) {
        for (; uVar1 != 0; uVar1 = uVar1 - 1) {
          *puVar4 = *puVar3;
          puVar3 = puVar3 + -1;
          puVar4 = puVar4 + -1;
        }
        switch(uVar2) {
        case 0:
          return dst;
        case 2:
          goto switchD_00465aa7_caseD_2;
        case 3:
          goto switchD_00465aa7_caseD_3;
        }
        goto switchD_00465aa7_caseD_1;
      }
    }
    else {
      switch(size) {
      case 0:
        goto switchD_00465aa7_caseD_0;
      case 1:
        goto switchD_00465aa7_caseD_1;
      case 2:
        goto switchD_00465aa7_caseD_2;
      case 3:
        goto switchD_00465aa7_caseD_3;
      default:
        uVar1 = size - ((uint)puVar4 & 3);
        switch((uint)puVar4 & 3) {
        case 1:
          uVar2 = uVar1 & 3;
          *(undefined1 *)((int)puVar4 + 3) = *(undefined1 *)((int)puVar3 + 3);
          puVar3 = (undefined4 *)((int)puVar3 + -1);
          uVar1 = uVar1 >> 2;
          puVar4 = (undefined4 *)((int)puVar4 - 1);
          if (7 < uVar1) {
            for (; uVar1 != 0; uVar1 = uVar1 - 1) {
              *puVar4 = *puVar3;
              puVar3 = puVar3 + -1;
              puVar4 = puVar4 + -1;
            }
            switch(uVar2) {
            case 0:
              return dst;
            case 2:
              goto switchD_00465aa7_caseD_2;
            case 3:
              goto switchD_00465aa7_caseD_3;
            }
            goto switchD_00465aa7_caseD_1;
          }
          break;
        case 2:
          uVar2 = uVar1 & 3;
          *(undefined1 *)((int)puVar4 + 3) = *(undefined1 *)((int)puVar3 + 3);
          uVar1 = uVar1 >> 2;
          *(undefined1 *)((int)puVar4 + 2) = *(undefined1 *)((int)puVar3 + 2);
          puVar3 = (undefined4 *)((int)puVar3 + -2);
          puVar4 = (undefined4 *)((int)puVar4 - 2);
          if (7 < uVar1) {
            for (; uVar1 != 0; uVar1 = uVar1 - 1) {
              *puVar4 = *puVar3;
              puVar3 = puVar3 + -1;
              puVar4 = puVar4 + -1;
            }
            switch(uVar2) {
            case 0:
              return dst;
            case 2:
              goto switchD_00465aa7_caseD_2;
            case 3:
              goto switchD_00465aa7_caseD_3;
            }
            goto switchD_00465aa7_caseD_1;
          }
          break;
        case 3:
          uVar2 = uVar1 & 3;
          *(undefined1 *)((int)puVar4 + 3) = *(undefined1 *)((int)puVar3 + 3);
          *(undefined1 *)((int)puVar4 + 2) = *(undefined1 *)((int)puVar3 + 2);
          uVar1 = uVar1 >> 2;
          *(undefined1 *)((int)puVar4 + 1) = *(undefined1 *)((int)puVar3 + 1);
          puVar3 = (undefined4 *)((int)puVar3 + -3);
          puVar4 = (undefined4 *)((int)puVar4 - 3);
          if (7 < uVar1) {
            for (; uVar1 != 0; uVar1 = uVar1 - 1) {
              *puVar4 = *puVar3;
              puVar3 = puVar3 + -1;
              puVar4 = puVar4 + -1;
            }
            switch(uVar2) {
            case 0:
              return dst;
            case 2:
              goto switchD_00465aa7_caseD_2;
            case 3:
              goto switchD_00465aa7_caseD_3;
            }
            goto switchD_00465aa7_caseD_1;
          }
        }
      }
    }
    switch(uVar1) {
    case 7:
      puVar4[7 - uVar1] = puVar3[7 - uVar1];
    case 6:
      puVar4[6 - uVar1] = puVar3[6 - uVar1];
    case 5:
      puVar4[5 - uVar1] = puVar3[5 - uVar1];
    case 4:
      puVar4[4 - uVar1] = puVar3[4 - uVar1];
    case 3:
      puVar4[3 - uVar1] = puVar3[3 - uVar1];
    case 2:
      puVar4[2 - uVar1] = puVar3[2 - uVar1];
    case 1:
      puVar4[1 - uVar1] = puVar3[1 - uVar1];
      puVar3 = puVar3 + -uVar1;
      puVar4 = puVar4 + -uVar1;
    }
    switch(uVar2) {
    case 1:
switchD_00465aa7_caseD_1:
      *(undefined1 *)((int)puVar4 + 3) = *(undefined1 *)((int)puVar3 + 3);
      return dst;
    case 2:
switchD_00465aa7_caseD_2:
      *(undefined1 *)((int)puVar4 + 3) = *(undefined1 *)((int)puVar3 + 3);
      *(undefined1 *)((int)puVar4 + 2) = *(undefined1 *)((int)puVar3 + 2);
      return dst;
    case 3:
switchD_00465aa7_caseD_3:
      *(undefined1 *)((int)puVar4 + 3) = *(undefined1 *)((int)puVar3 + 3);
      *(undefined1 *)((int)puVar4 + 2) = *(undefined1 *)((int)puVar3 + 2);
      *(undefined1 *)((int)puVar4 + 1) = *(undefined1 *)((int)puVar3 + 1);
      return dst;
    }
switchD_00465aa7_caseD_0:
    return dst;
  }
  puVar3 = dst;
  if (((uint)dst & 3) == 0) {
    uVar1 = size >> 2;
    uVar2 = size & 3;
    if (7 < uVar1) {
      for (; uVar1 != 0; uVar1 = uVar1 - 1) {
        *puVar3 = *(undefined4 *)src;
        src = (undefined4 *)((int)src + 4);
        puVar3 = puVar3 + 1;
      }
      switch(uVar2) {
      case 0:
        return dst;
      case 2:
        goto switchD_00465925_caseD_2;
      case 3:
        goto switchD_00465925_caseD_3;
      }
      goto switchD_00465925_caseD_1;
    }
  }
  else {
    switch(size) {
    case 0:
      goto switchD_00465925_caseD_0;
    case 1:
      goto switchD_00465925_caseD_1;
    case 2:
      goto switchD_00465925_caseD_2;
    case 3:
      goto switchD_00465925_caseD_3;
    default:
      uVar1 = (size - 4) + ((uint)dst & 3);
      switch((uint)dst & 3) {
      case 1:
        uVar2 = uVar1 & 3;
        *(undefined1 *)dst = *(undefined1 *)src;
        *(undefined1 *)((int)dst + 1) = *(undefined1 *)((int)src + 1);
        uVar1 = uVar1 >> 2;
        *(undefined1 *)((int)dst + 2) = *(undefined1 *)((int)src + 2);
        src = (void *)((int)src + 3);
        puVar3 = (undefined4 *)((int)dst + 3);
        if (7 < uVar1) {
          for (; uVar1 != 0; uVar1 = uVar1 - 1) {
            *puVar3 = *(undefined4 *)src;
            src = (undefined4 *)((int)src + 4);
            puVar3 = puVar3 + 1;
          }
          switch(uVar2) {
          case 0:
            return dst;
          case 2:
            goto switchD_00465925_caseD_2;
          case 3:
            goto switchD_00465925_caseD_3;
          }
          goto switchD_00465925_caseD_1;
        }
        break;
      case 2:
        uVar2 = uVar1 & 3;
        *(undefined1 *)dst = *(undefined1 *)src;
        uVar1 = uVar1 >> 2;
        *(undefined1 *)((int)dst + 1) = *(undefined1 *)((int)src + 1);
        src = (void *)((int)src + 2);
        puVar3 = (undefined4 *)((int)dst + 2);
        if (7 < uVar1) {
          for (; uVar1 != 0; uVar1 = uVar1 - 1) {
            *puVar3 = *(undefined4 *)src;
            src = (undefined4 *)((int)src + 4);
            puVar3 = puVar3 + 1;
          }
          switch(uVar2) {
          case 0:
            return dst;
          case 2:
            goto switchD_00465925_caseD_2;
          case 3:
            goto switchD_00465925_caseD_3;
          }
          goto switchD_00465925_caseD_1;
        }
        break;
      case 3:
        uVar2 = uVar1 & 3;
        *(undefined1 *)dst = *(undefined1 *)src;
        src = (void *)((int)src + 1);
        uVar1 = uVar1 >> 2;
        puVar3 = (undefined4 *)((int)dst + 1);
        if (7 < uVar1) {
          for (; uVar1 != 0; uVar1 = uVar1 - 1) {
            *puVar3 = *(undefined4 *)src;
            src = (undefined4 *)((int)src + 4);
            puVar3 = puVar3 + 1;
          }
          switch(uVar2) {
          case 0:
            return dst;
          case 2:
            goto switchD_00465925_caseD_2;
          case 3:
            goto switchD_00465925_caseD_3;
          }
          goto switchD_00465925_caseD_1;
        }
      }
    }
  }
  switch(uVar1) {
  case 7:
    puVar3[uVar1 - 7] = *(undefined4 *)((int)src + (uVar1 - 7) * 4);
  case 6:
    puVar3[uVar1 - 6] = *(undefined4 *)((int)src + (uVar1 - 6) * 4);
  case 5:
    puVar3[uVar1 - 5] = *(undefined4 *)((int)src + (uVar1 - 5) * 4);
  case 4:
    puVar3[uVar1 - 4] = *(undefined4 *)((int)src + (uVar1 - 4) * 4);
  case 3:
    puVar3[uVar1 - 3] = *(undefined4 *)((int)src + (uVar1 - 3) * 4);
  case 2:
    puVar3[uVar1 - 2] = *(undefined4 *)((int)src + (uVar1 - 2) * 4);
  case 1:
    puVar3[uVar1 - 1] = *(undefined4 *)((int)src + (uVar1 - 1) * 4);
    src = (void *)((int)src + uVar1 * 4);
    puVar3 = puVar3 + uVar1;
  }
  switch(uVar2) {
  case 1:
switchD_00465925_caseD_1:
    *(undefined1 *)puVar3 = *(undefined1 *)src;
    return dst;
  case 2:
switchD_00465925_caseD_2:
    *(undefined1 *)puVar3 = *(undefined1 *)src;
    *(undefined1 *)((int)puVar3 + 1) = *(undefined1 *)((int)src + 1);
    return dst;
  case 3:
switchD_00465925_caseD_3:
    *(undefined1 *)puVar3 = *(undefined1 *)src;
    *(undefined1 *)((int)puVar3 + 1) = *(undefined1 *)((int)src + 1);
    *(undefined1 *)((int)puVar3 + 2) = *(undefined1 *)((int)src + 2);
    return dst;
  }
switchD_00465925_caseD_0:
  return dst;
}



/* crt_strcpy @ 00465c30 */

/* CRT strcpy implementation (word copy + null detection) */

char * __cdecl crt_strcpy(char *dst,char *src)

{
  byte bVar1;
  uint uVar2;
  uint uVar3;
  uint *puVar4;
  
  puVar4 = (uint *)dst;
  while (((uint)src & 3) != 0) {
    bVar1 = (byte)*(uint *)src;
    uVar3 = (uint)bVar1;
    src = (char *)((int)src + 1);
    if (bVar1 == 0) goto LAB_00465d18;
    *(byte *)puVar4 = bVar1;
    puVar4 = (uint *)((int)puVar4 + 1);
  }
  do {
    uVar2 = *(uint *)src;
    uVar3 = *(uint *)src;
    src = (char *)((int)src + 4);
    if (((uVar2 ^ 0xffffffff ^ uVar2 + 0x7efefeff) & 0x81010100) != 0) {
      if ((char)uVar3 == '\0') {
LAB_00465d18:
        *(byte *)puVar4 = (byte)uVar3;
        return dst;
      }
      if ((char)(uVar3 >> 8) == '\0') {
        *(short *)puVar4 = (short)uVar3;
        return dst;
      }
      if ((uVar3 & 0xff0000) == 0) {
        *(short *)puVar4 = (short)uVar3;
        *(byte *)((int)puVar4 + 2) = 0;
        return dst;
      }
      if ((uVar3 & 0xff000000) == 0) {
        *puVar4 = uVar3;
        return dst;
      }
    }
    *puVar4 = uVar3;
    puVar4 = puVar4 + 1;
  } while( true );
}



/* crt_strcat @ 00465c40 */

/* CRT strcat implementation (seek end, then copy) */

char * __cdecl crt_strcat(char *dst,char *src)

{
  byte bVar1;
  uint uVar2;
  uint *puVar3;
  uint uVar4;
  uint *puVar5;
  
  puVar3 = (uint *)dst;
  do {
    if (((uint)puVar3 & 3) == 0) goto LAB_00465c5c;
    uVar4 = *puVar3;
    puVar3 = (uint *)((int)puVar3 + 1);
  } while ((byte)uVar4 != 0);
  goto LAB_00465c8f;
  while( true ) {
    if ((uVar4 & 0xff0000) == 0) {
      puVar5 = (uint *)((int)puVar5 + 2);
      goto joined_r0x00465cab;
    }
    if ((uVar4 & 0xff000000) == 0) break;
LAB_00465c5c:
    do {
      puVar5 = puVar3;
      puVar3 = puVar5 + 1;
    } while (((*puVar5 ^ 0xffffffff ^ *puVar5 + 0x7efefeff) & 0x81010100) == 0);
    uVar4 = *puVar5;
    if ((char)uVar4 == '\0') goto joined_r0x00465cab;
    if ((char)(uVar4 >> 8) == '\0') {
      puVar5 = (uint *)((int)puVar5 + 1);
      goto joined_r0x00465cab;
    }
  }
LAB_00465c8f:
  puVar5 = (uint *)((int)puVar3 + -1);
joined_r0x00465cab:
  do {
    if (((uint)src & 3) == 0) {
      do {
        uVar2 = *(uint *)src;
        uVar4 = *(uint *)src;
        src = (char *)((int)src + 4);
        if (((uVar2 ^ 0xffffffff ^ uVar2 + 0x7efefeff) & 0x81010100) != 0) {
          if ((char)uVar4 == '\0') {
LAB_00465d18:
            *(byte *)puVar5 = (byte)uVar4;
            return dst;
          }
          if ((char)(uVar4 >> 8) == '\0') {
            *(short *)puVar5 = (short)uVar4;
            return dst;
          }
          if ((uVar4 & 0xff0000) == 0) {
            *(short *)puVar5 = (short)uVar4;
            *(byte *)((int)puVar5 + 2) = 0;
            return dst;
          }
          if ((uVar4 & 0xff000000) == 0) {
            *puVar5 = uVar4;
            return dst;
          }
        }
        *puVar5 = uVar4;
        puVar5 = puVar5 + 1;
      } while( true );
    }
    bVar1 = (byte)*(uint *)src;
    uVar4 = (uint)bVar1;
    src = (char *)((int)src + 1);
    if (bVar1 == 0) goto LAB_00465d18;
    *(byte *)puVar5 = bVar1;
    puVar5 = (uint *)((int)puVar5 + 1);
  } while( true );
}



/* crt_dosmaperr @ 00465d20 */

/* map Win32 error to errno/doserrno */

void __cdecl crt_dosmaperr(uint os_error)

{
  uint *puVar1;
  undefined **ppuVar2;
  int *piVar3;
  int iVar4;
  
  puVar1 = crt_doserrno_ptr();
  iVar4 = 0;
  *puVar1 = os_error;
  ppuVar2 = (undefined **)&crt_dosmaperr_table;
  do {
    if ((undefined *)os_error == *ppuVar2) {
      piVar3 = crt_errno_ptr();
      *piVar3 = *(int *)(iVar4 * 8 + 0x47b7c4);
      return;
    }
    ppuVar2 = ppuVar2 + 2;
    iVar4 = iVar4 + 1;
  } while (ppuVar2 < &PTR_FUN_0047b928);
  if ((0x12 < os_error) && (os_error < 0x25)) {
    piVar3 = crt_errno_ptr();
    *piVar3 = 0xd;
    return;
  }
  if ((0xbb < os_error) && (os_error < 0xcb)) {
    piVar3 = crt_errno_ptr();
    *piVar3 = 8;
    return;
  }
  piVar3 = crt_errno_ptr();
  *piVar3 = 0x16;
  return;
}



/* crt_errno_ptr @ 00465d93 */

/* CRT errno pointer accessor (thread-local) */

int * crt_errno_ptr(void)

{
  DWORD *pDVar1;
  
  pDVar1 = crt_get_thread_data();
  return (int *)(pDVar1 + 2);
}



/* crt_doserrno_ptr @ 00465d9c */

/* CRT doserrno pointer accessor (thread-local) */

uint * crt_doserrno_ptr(void)

{
  DWORD *pDVar1;
  
  pDVar1 = crt_get_thread_data();
  return pDVar1 + 3;
}



/* crt_mktime @ 00465da5 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* CRT: convert date/time to timestamp (mktime) */

long __cdecl crt_mktime(int year,int month,int day,int hour,int min,int sec,int dst)

{
  bool bVar1;
  undefined3 extraout_var;
  int iVar2;
  uint uVar3;
  int iVar4;
  int local_28 [2];
  int local_20;
  int local_18;
  uint local_14;
  int local_c;
  
  uVar3 = year - 0x76c;
  if (((int)uVar3 < 0x46) || (0x8a < (int)uVar3)) {
    iVar2 = -1;
  }
  else {
    iVar4 = *(int *)(&DAT_0047df54 + month * 4) + day;
    if (((uVar3 & 3) == 0) && (2 < month)) {
      iVar4 = iVar4 + 1;
    }
    FUN_0046c5ad();
    local_20 = hour;
    local_18 = month + -1;
    iVar2 = ((hour + (uVar3 * 0x16d + iVar4 + (year + -0x76d >> 2)) * 0x18) * 0x3c + min) * 0x3c +
            DAT_0047de70 + 0x7c558180 + sec;
    if ((dst == 1) ||
       (((dst == -1 && (DAT_0047de74 != 0)) &&
        (local_14 = uVar3, local_c = iVar4, bVar1 = FUN_0046c862(local_28),
        CONCAT31(extraout_var,bVar1) != 0)))) {
      iVar2 = iVar2 + _DAT_0047de78;
    }
  }
  return iVar2;
}



/* FUN_00465f2d @ 00465f2d */

void FUN_00465f2d(int param_1)

{
  __local_unwind2(*(int *)(param_1 + 0x18),*(int *)(param_1 + 0x1c));
  return;
}



/* FUN_00465f48 @ 00465f48 */

void FUN_00465f48(void)

{
  DWORD *pDVar1;
  void *pvStack_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  puStack_c = &DAT_0046fb98;
  puStack_10 = &LAB_00465e70;
  pvStack_14 = ExceptionList;
  local_8 = 0;
  ExceptionList = &pvStack_14;
  pDVar1 = crt_get_thread_data();
  if (pDVar1[0x18] != 0) {
    local_8 = 1;
    pDVar1 = crt_get_thread_data();
    (*(code *)pDVar1[0x18])();
  }
  local_8 = 0xffffffff;
  FUN_0046cb6f();
  return;
}



/* FUN_00465fa9 @ 00465fa9 */

void FUN_00465fa9(void)

{
  void *pvStack_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  puStack_c = &DAT_0046fbb0;
  puStack_10 = &LAB_00465e70;
  pvStack_14 = ExceptionList;
  ExceptionList = &pvStack_14;
  if (PTR_FUN_0047b928 != (undefined *)0x0) {
    local_8 = 1;
    ExceptionList = &pvStack_14;
    (*(code *)PTR_FUN_0047b928)();
  }
  local_8 = 0xffffffff;
  FUN_00465f48();
  return;
}



/* crt_read @ 00465fff */

/* CRT: read handle with lock */

int __cdecl crt_read(int fd,char *buf,uint count)

{
  int iVar1;
  int *piVar2;
  uint *puVar3;
  
  if (((uint)fd < DAT_004da4c0) &&
     ((*(byte *)((&DAT_004da3c0)[fd >> 5] + 4 + (fd & 0x1fU) * 0x24) & 1) != 0)) {
    crt_lock_fh(fd);
    iVar1 = crt_read_nolock(fd,buf,count);
    crt_unlock_fh(fd);
    return iVar1;
  }
  piVar2 = crt_errno_ptr();
  *piVar2 = 9;
  puVar3 = crt_doserrno_ptr();
  *puVar3 = 0;
  return -1;
}



/* crt_read_nolock @ 00466064 */

/* CRT: read handle (no lock), CRLF translation */

int __cdecl crt_read_nolock(int fd,char *buf,uint count)

{
  byte *pbVar1;
  char cVar2;
  byte bVar3;
  WINBOOL WVar4;
  DWORD DVar5;
  int *piVar6;
  uint *puVar7;
  char *pcVar8;
  int iVar9;
  DWORD local_10;
  char *local_c;
  char local_5;
  
  local_c = (char *)0x0;
  if (count != 0) {
    piVar6 = &DAT_004da3c0 + (fd >> 5);
    iVar9 = (fd & 0x1fU) * 0x24;
    bVar3 = *(byte *)((&DAT_004da3c0)[fd >> 5] + iVar9 + 4);
    if ((bVar3 & 2) == 0) {
      pcVar8 = buf;
      if (((bVar3 & 0x48) != 0) &&
         (cVar2 = *(char *)((&DAT_004da3c0)[fd >> 5] + iVar9 + 5), cVar2 != '\n')) {
        count = count - 1;
        *buf = cVar2;
        pcVar8 = buf + 1;
        local_c = (char *)0x1;
        *(undefined1 *)(*piVar6 + 5 + iVar9) = 10;
      }
      WVar4 = ReadFile(*(HANDLE *)(*piVar6 + iVar9),pcVar8,count,&local_10,(LPOVERLAPPED)0x0);
      if (WVar4 == 0) {
        DVar5 = GetLastError();
        if (DVar5 == 5) {
          piVar6 = crt_errno_ptr();
          *piVar6 = 9;
          puVar7 = crt_doserrno_ptr();
          *puVar7 = 5;
        }
        else {
          if (DVar5 == 0x6d) {
            return 0;
          }
          crt_dosmaperr(DVar5);
        }
        return -1;
      }
      bVar3 = *(byte *)(*piVar6 + 4 + iVar9);
      if ((bVar3 & 0x80) == 0) {
        return (int)local_c + local_10;
      }
      if ((local_10 == 0) || (*buf != '\n')) {
        bVar3 = bVar3 & 0xfb;
      }
      else {
        bVar3 = bVar3 | 4;
      }
      *(byte *)(*piVar6 + 4 + iVar9) = bVar3;
      count = (uint)buf;
      local_c = buf + (int)local_c + local_10;
      pcVar8 = buf;
      if (buf < local_c) {
        do {
          cVar2 = *(char *)count;
          if (cVar2 == '\x1a') {
            pbVar1 = (byte *)(*piVar6 + 4 + iVar9);
            bVar3 = *pbVar1;
            if ((bVar3 & 0x40) == 0) {
              *pbVar1 = bVar3 | 2;
            }
            break;
          }
          if (cVar2 == '\r') {
            if (count < local_c + -1) {
              if (*(char *)(count + 1) == '\n') {
                count = count + 2;
                goto LAB_004661ef;
              }
              *pcVar8 = '\r';
              pcVar8 = pcVar8 + 1;
              count = count + 1;
            }
            else {
              count = count + 1;
              WVar4 = ReadFile(*(HANDLE *)(*piVar6 + iVar9),&local_5,1,&local_10,(LPOVERLAPPED)0x0);
              if (((WVar4 == 0) && (DVar5 = GetLastError(), DVar5 != 0)) || (local_10 == 0)) {
LAB_00466209:
                *pcVar8 = '\r';
LAB_0046620c:
                pcVar8 = pcVar8 + 1;
              }
              else if ((*(byte *)(*piVar6 + 4 + iVar9) & 0x48) == 0) {
                if ((pcVar8 == buf) && (local_5 == '\n')) {
LAB_004661ef:
                  *pcVar8 = '\n';
                  goto LAB_0046620c;
                }
                crt_lseek_nolock(fd,-1,1);
                if (local_5 != '\n') goto LAB_00466209;
              }
              else {
                if (local_5 == '\n') goto LAB_004661ef;
                *pcVar8 = '\r';
                pcVar8 = pcVar8 + 1;
                *(char *)(*piVar6 + 5 + iVar9) = local_5;
              }
            }
          }
          else {
            *pcVar8 = cVar2;
            pcVar8 = pcVar8 + 1;
            count = count + 1;
          }
        } while (count < local_c);
      }
      return (int)pcVar8 - (int)buf;
    }
  }
  return 0;
}



/* crt_io_init @ 0046623d */

/* CRT file handle table init */

void crt_io_init(void)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  undefined4 *puVar3;
  DWORD DVar4;
  HANDLE hFile;
  UINT *pUVar5;
  int iVar6;
  uint uVar7;
  UINT UVar8;
  UINT UVar9;
  _STARTUPINFOA local_4c;
  byte *local_8;
  
  puVar2 = _malloc(0x480);
  if (puVar2 == (undefined4 *)0x0) {
    __amsg_exit(0x1b);
  }
  DAT_004da4c0 = 0x20;
  DAT_004da3c0 = puVar2;
  for (; puVar2 < DAT_004da3c0 + 0x120; puVar2 = puVar2 + 9) {
    *(undefined1 *)(puVar2 + 1) = 0;
    *puVar2 = 0xffffffff;
    puVar2[2] = 0;
    *(undefined1 *)((int)puVar2 + 5) = 10;
  }
  GetStartupInfoA(&local_4c);
  if ((local_4c.cbReserved2 != 0) && ((UINT *)local_4c.lpReserved2 != (UINT *)0x0)) {
    UVar8 = *(UINT *)local_4c.lpReserved2;
    pUVar5 = (UINT *)((int)local_4c.lpReserved2 + 4);
    local_8 = (byte *)((int)pUVar5 + UVar8);
    if (0x7ff < (int)UVar8) {
      UVar8 = 0x800;
    }
    UVar9 = UVar8;
    if ((int)DAT_004da4c0 < (int)UVar8) {
      puVar2 = &DAT_004da3c4;
      do {
        puVar3 = _malloc(0x480);
        UVar9 = DAT_004da4c0;
        if (puVar3 == (undefined4 *)0x0) break;
        DAT_004da4c0 = DAT_004da4c0 + 0x20;
        *puVar2 = puVar3;
        puVar1 = puVar3;
        for (; puVar3 < puVar1 + 0x120; puVar3 = puVar3 + 9) {
          *(undefined1 *)(puVar3 + 1) = 0;
          *puVar3 = 0xffffffff;
          puVar3[2] = 0;
          *(undefined1 *)((int)puVar3 + 5) = 10;
          puVar1 = (undefined4 *)*puVar2;
        }
        puVar2 = puVar2 + 1;
        UVar9 = UVar8;
      } while ((int)DAT_004da4c0 < (int)UVar8);
    }
    uVar7 = 0;
    if (0 < (int)UVar9) {
      do {
        if (((*(HANDLE *)local_8 != (HANDLE)0xffffffff) && ((*pUVar5 & 1) != 0)) &&
           (((*pUVar5 & 8) != 0 || (DVar4 = GetFileType(*(HANDLE *)local_8), DVar4 != 0)))) {
          puVar2 = (undefined4 *)((int)(&DAT_004da3c0)[(int)uVar7 >> 5] + (uVar7 & 0x1f) * 0x24);
          *puVar2 = *(undefined4 *)local_8;
          *(byte *)(puVar2 + 1) = (byte)*pUVar5;
        }
        local_8 = local_8 + 4;
        uVar7 = uVar7 + 1;
        pUVar5 = (UINT *)((int)pUVar5 + 1);
      } while ((int)uVar7 < (int)UVar9);
    }
  }
  iVar6 = 0;
  do {
    puVar2 = DAT_004da3c0 + iVar6 * 9;
    if (DAT_004da3c0[iVar6 * 9] == -1) {
      *(undefined1 *)(puVar2 + 1) = 0x81;
      if (iVar6 == 0) {
        DVar4 = 0xfffffff6;
      }
      else {
        DVar4 = 0xfffffff5 - (iVar6 != 1);
      }
      hFile = GetStdHandle(DVar4);
      if ((hFile != (HANDLE)0xffffffff) && (DVar4 = GetFileType(hFile), DVar4 != 0)) {
        *puVar2 = hFile;
        if ((DVar4 & 0xff) != 2) {
          if ((DVar4 & 0xff) == 3) {
            *(byte *)(puVar2 + 1) = *(byte *)(puVar2 + 1) | 8;
          }
          goto LAB_004663e2;
        }
      }
      *(byte *)(puVar2 + 1) = *(byte *)(puVar2 + 1) | 0x40;
    }
    else {
      *(byte *)(puVar2 + 1) = *(byte *)(puVar2 + 1) | 0x80;
    }
LAB_004663e2:
    iVar6 = iVar6 + 1;
    if (2 < iVar6) {
      SetHandleCount(DAT_004da4c0);
      return;
    }
  } while( true );
}



/* crt_lseek @ 004663f9 */

/* lseek wrapper (locks file handle, then SetFilePointer) */

long __cdecl crt_lseek(int fd,long offset,int origin)

{
  long lVar1;
  int *piVar2;
  uint *puVar3;
  
  if (((uint)fd < DAT_004da4c0) &&
     ((*(byte *)((&DAT_004da3c0)[fd >> 5] + 4 + (fd & 0x1fU) * 0x24) & 1) != 0)) {
    crt_lock_fh(fd);
    lVar1 = crt_lseek_nolock(fd,offset,origin);
    crt_unlock_fh(fd);
    return lVar1;
  }
  piVar2 = crt_errno_ptr();
  *piVar2 = 9;
  puVar3 = crt_doserrno_ptr();
  *puVar3 = 0;
  return -1;
}



/* crt_lseek_nolock @ 0046645e */

/* lseek implementation via SetFilePointer */

long __cdecl crt_lseek_nolock(int fd,long offset,int origin)

{
  byte *pbVar1;
  void *hFile;
  int *piVar2;
  DWORD DVar3;
  uint os_error;
  
  hFile = crt_get_osfhandle(fd);
  if (hFile == (void *)0xffffffff) {
    piVar2 = crt_errno_ptr();
    *piVar2 = 9;
  }
  else {
    DVar3 = SetFilePointer(hFile,offset,(PLONG)0x0,origin);
    if (DVar3 == 0xffffffff) {
      os_error = GetLastError();
    }
    else {
      os_error = 0;
    }
    if (os_error == 0) {
      pbVar1 = (byte *)((&DAT_004da3c0)[fd >> 5] + 4 + (fd & 0x1fU) * 0x24);
      *pbVar1 = *pbVar1 & 0xfd;
      return DVar3;
    }
    crt_dosmaperr(os_error);
  }
  return -1;
}



/* crt_lcmap_string @ 004664d1 */

/* CRT: LCMapString wrapper with multibyte/Unicode handling */

int __cdecl
crt_lcmap_string(uint locale,uint flags,char *src,int srclen,ushort *dst,int dstlen,uint codepage,
                int use_cp)

{
  int iVar1;
  int iVar2;
  void *local_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_0046fbd0;
  puStack_10 = &LAB_00465e70;
  local_14 = ExceptionList;
  ExceptionList = &local_14;
  if (DAT_004d9a64 == 0) {
    ExceptionList = &local_14;
    iVar1 = LCMapStringW(0,0x100,L"",1,(LPWSTR)0x0,0);
    if (iVar1 == 0) {
      iVar1 = LCMapStringA(0,0x100,&DAT_004ab1a8,1,(LPSTR)0x0,0);
      if (iVar1 == 0) {
        ExceptionList = local_14;
        return 0;
      }
      DAT_004d9a64 = 2;
    }
    else {
      DAT_004d9a64 = 1;
    }
  }
  if (0 < srclen) {
    srclen = FUN_0046e5ec(src,srclen);
  }
  if (DAT_004d9a64 == 2) {
    iVar1 = LCMapStringA(locale,flags,src,srclen,(LPSTR)dst,dstlen);
    ExceptionList = local_14;
    return iVar1;
  }
  if (DAT_004d9a64 == 1) {
    if (codepage == 0) {
      codepage = DAT_004d9a5c;
    }
    iVar1 = MultiByteToWideChar(codepage,(-(uint)(use_cp != 0) & 8) + 1,src,srclen,(LPWSTR)0x0,0);
    if (iVar1 != 0) {
      local_8 = 0;
      crt_chkstk();
      local_8 = 0xffffffff;
      if ((&stack0x00000000 != (undefined1 *)0x3c) &&
         (iVar2 = MultiByteToWideChar(codepage,1,src,srclen,(LPWSTR)&stack0xffffffc4,iVar1),
         iVar2 != 0)) {
        iVar2 = LCMapStringW(locale,flags,(LPCWSTR)&stack0xffffffc4,iVar1,(LPWSTR)0x0,0);
        if (iVar2 != 0) {
          if ((flags & 0x400) == 0) {
            local_8 = 1;
            crt_chkstk();
            local_8 = 0xffffffff;
            if (&stack0x00000000 == (undefined1 *)0x3c) {
              ExceptionList = local_14;
              return 0;
            }
            iVar1 = LCMapStringW(locale,flags,(LPCWSTR)&stack0xffffffc4,iVar1,
                                 (LPWSTR)&stack0xffffffc4,iVar2);
            if (iVar1 == 0) {
              ExceptionList = local_14;
              return 0;
            }
            if (dstlen == 0) {
              dstlen = 0;
              dst = (ushort *)0x0;
            }
            iVar2 = WideCharToMultiByte(codepage,0x220,(LPCWCH)&stack0xffffffc4,iVar2,(LPSTR)dst,
                                        dstlen,(LPCCH)0x0,(LPBOOL)0x0);
            iVar1 = iVar2;
          }
          else {
            if (dstlen == 0) {
              ExceptionList = local_14;
              return iVar2;
            }
            if (dstlen < iVar2) {
              ExceptionList = local_14;
              return 0;
            }
            iVar1 = LCMapStringW(locale,flags,(LPCWSTR)&stack0xffffffc4,iVar1,(LPWSTR)dst,dstlen);
          }
          if (iVar1 != 0) {
            ExceptionList = local_14;
            return iVar2;
          }
        }
      }
    }
  }
  ExceptionList = local_14;
  return 0;
}



/* FUN_004666f5 @ 004666f5 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

undefined4 __cdecl FUN_004666f5(undefined4 *param_1)

{
  undefined4 uVar1;
  byte bVar2;
  undefined3 extraout_var;
  int iVar3;
  void *pvVar4;
  
  bVar2 = FUN_0046b08c(param_1[4]);
  if (CONCAT31(extraout_var,bVar2) == 0) {
    return 0;
  }
  if (param_1 == (undefined4 *)&DAT_0047b3f8) {
    iVar3 = 0;
  }
  else {
    if (param_1 != (undefined4 *)&DAT_0047b418) {
      return 0;
    }
    iVar3 = 1;
  }
  _DAT_004d99d0 = _DAT_004d99d0 + 1;
  if ((*(ushort *)(param_1 + 3) & 0x10c) != 0) {
    return 0;
  }
  if ((&DAT_004d9a68)[iVar3] == 0) {
    pvVar4 = _malloc(0x1000);
    (&DAT_004d9a68)[iVar3] = pvVar4;
    if (pvVar4 == (void *)0x0) {
      param_1[2] = param_1 + 5;
      *param_1 = param_1 + 5;
      param_1[6] = 2;
      param_1[1] = 2;
      goto LAB_00466771;
    }
  }
  uVar1 = (&DAT_004d9a68)[iVar3];
  param_1[6] = 0x1000;
  param_1[2] = uVar1;
  *param_1 = uVar1;
  param_1[1] = 0x1000;
LAB_00466771:
  *(ushort *)(param_1 + 3) = *(ushort *)(param_1 + 3) | 0x1102;
  return 1;
}



/* FUN_00466782 @ 00466782 */

void __cdecl FUN_00466782(int param_1,int *param_2)

{
  if ((param_1 != 0) && ((*(byte *)((int)param_2 + 0xd) & 0x10) != 0)) {
    crt_flushbuf((FILE *)param_2);
    *(byte *)((int)param_2 + 0xd) = *(byte *)((int)param_2 + 0xd) & 0xee;
    param_2[6] = 0;
    *param_2 = 0;
    param_2[2] = 0;
  }
  return;
}



/* crt_calloc @ 004667ac */

/* CRT: allocate zeroed block (count*size) */

void * __cdecl crt_calloc(uint count,uint size)

{
  int iVar1;
  uint *puVar2;
  uint *puVar3;
  uint *_Size;
  int *local_24;
  void *local_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_0046fbe8;
  puStack_10 = &LAB_00465e70;
  local_14 = ExceptionList;
  puVar2 = (uint *)(count * size);
  puVar3 = puVar2;
  ExceptionList = &local_14;
  if (puVar2 < (uint *)0xffffffe1) {
    if (puVar2 == (uint *)0x0) {
      puVar3 = (uint *)0x1;
    }
    puVar3 = (uint *)((int)puVar3 + 0xfU & 0xfffffff0);
    ExceptionList = &local_14;
  }
  do {
    local_24 = (int *)0x0;
    if (puVar3 < (uint *)0xffffffe1) {
      if (crt_heap_mode == 3) {
        if (puVar2 <= DAT_004da3a0) {
          crt_lock(9);
          local_8 = 0;
          local_24 = FUN_00466fcf(puVar2);
          local_8 = 0xffffffff;
          FUN_00466845();
          _Size = puVar2;
          if (local_24 == (int *)0x0) goto LAB_00466899;
LAB_00466888:
          _memset(local_24,0,(size_t)_Size);
        }
LAB_00466894:
        if (local_24 != (int *)0x0) {
          ExceptionList = local_14;
          return local_24;
        }
      }
      else {
        if ((crt_heap_mode != 2) || (DAT_0047db14 < puVar3)) goto LAB_00466894;
        crt_lock(9);
        local_8 = 1;
        local_24 = FUN_00467a72((uint)puVar3 >> 4);
        local_8 = 0xffffffff;
        FUN_004668ce();
        _Size = puVar3;
        if (local_24 != (int *)0x0) goto LAB_00466888;
      }
LAB_00466899:
      local_24 = HeapAlloc(DAT_004da3a4,8,(SIZE_T)puVar3);
    }
    if (local_24 != (int *)0x0) {
      ExceptionList = local_14;
      return local_24;
    }
    if (DAT_004d9a78 == 0) {
      ExceptionList = local_14;
      return (void *)0x0;
    }
    iVar1 = crt_call_new_handler((size_t)puVar3);
    if (iVar1 == 0) {
      ExceptionList = local_14;
      return (void *)0x0;
    }
  } while( true );
}



/* FUN_00466845 @ 00466845 */

void FUN_00466845(void)

{
  crt_unlock(9);
  return;
}



/* FUN_004668ce @ 004668ce */

void FUN_004668ce(void)

{
  crt_unlock(9);
  return;
}



/* crt_exception_filter @ 004668e9 */

/* CRT exception filter/dispatch */

long __cdecl crt_exception_filter(int code,_EXCEPTION_POINTERS *info)

{
  code *pcVar1;
  DWORD DVar2;
  DWORD DVar3;
  DWORD *pDVar4;
  int *piVar5;
  long lVar6;
  int iVar7;
  int iVar8;
  
  pDVar4 = crt_get_thread_data();
  piVar5 = FUN_00466a27(code,(int *)pDVar4[0x14]);
  if ((piVar5 == (int *)0x0) || (pcVar1 = (code *)piVar5[2], pcVar1 == (code *)0x0)) {
    lVar6 = UnhandledExceptionFilter((_EXCEPTION_POINTERS *)info);
  }
  else if (pcVar1 == (code *)0x5) {
    piVar5[2] = 0;
    lVar6 = 1;
  }
  else {
    if (pcVar1 != (code *)0x1) {
      DVar2 = pDVar4[0x15];
      pDVar4[0x15] = (DWORD)info;
      if (piVar5[1] == 8) {
        if (DAT_0047bad8 < DAT_0047badc + DAT_0047bad8) {
          iVar7 = DAT_0047bad8 * 0xc;
          iVar8 = DAT_0047bad8;
          do {
            *(undefined4 *)(iVar7 + 8 + pDVar4[0x14]) = 0;
            iVar8 = iVar8 + 1;
            iVar7 = iVar7 + 0xc;
          } while (iVar8 < DAT_0047badc + DAT_0047bad8);
        }
        iVar7 = *piVar5;
        DVar3 = pDVar4[0x16];
        if (iVar7 == -0x3fffff72) {
          pDVar4[0x16] = 0x83;
        }
        else if (iVar7 == -0x3fffff70) {
          pDVar4[0x16] = 0x81;
        }
        else if (iVar7 == -0x3fffff6f) {
          pDVar4[0x16] = 0x84;
        }
        else if (iVar7 == -0x3fffff6d) {
          pDVar4[0x16] = 0x85;
        }
        else if (iVar7 == -0x3fffff73) {
          pDVar4[0x16] = 0x82;
        }
        else if (iVar7 == -0x3fffff71) {
          pDVar4[0x16] = 0x86;
        }
        else if (iVar7 == -0x3fffff6e) {
          pDVar4[0x16] = 0x8a;
        }
        (*pcVar1)(8,pDVar4[0x16]);
        pDVar4[0x16] = DVar3;
      }
      else {
        piVar5[2] = 0;
        (*pcVar1)(piVar5[1]);
      }
      pDVar4[0x15] = DVar2;
    }
    lVar6 = -1;
  }
  return lVar6;
}



/* FUN_00466a27 @ 00466a27 */

int * __cdecl FUN_00466a27(int param_1,int *param_2)

{
  int *piVar1;
  
  piVar1 = param_2;
  if (*param_2 != param_1) {
    do {
      piVar1 = piVar1 + 3;
      if (param_2 + DAT_0047bae4 * 3 <= piVar1) break;
    } while (*piVar1 != param_1);
  }
  if ((param_2 + DAT_0047bae4 * 3 <= piVar1) || (*piVar1 != param_1)) {
    piVar1 = (int *)0x0;
  }
  return piVar1;
}



/* FUN_00466a61 @ 00466a61 */

void __cdecl FUN_00466a61(undefined4 *param_1)

{
  int iVar1;
  HMODULE pHVar2;
  
  *param_1 = 0;
  pHVar2 = GetModuleHandleA((LPCSTR)0x0);
  if (((short)pHVar2->unused == 0x5a4d) && (iVar1 = pHVar2[0xf].unused, iVar1 != 0)) {
    *(undefined1 *)param_1 = *(undefined1 *)((int)&pHVar2[6].unused + iVar1 + 2);
    *(undefined1 *)((int)param_1 + 1) = *(undefined1 *)((int)&pHVar2[6].unused + iVar1 + 3);
  }
  return;
}



/* crt_heap_select @ 00466a8e */

/* selects CRT heap strategy */

int crt_heap_select(void)

{
  char cVar1;
  WINBOOL WVar2;
  DWORD DVar3;
  int iVar4;
  long lVar5;
  char *pcVar6;
  char *this;
  int unaff_EBX;
  char local_1230 [4240];
  char local_1a0 [260];
  DWORD local_9c;
  uint local_98;
  DWORD local_8c;
  CHAR aCStackY_18 [4];
  byte bVar7;
  
  crt_chkstk();
  local_9c = 0x94;
  WVar2 = GetVersionExA((LPOSVERSIONINFOA)&local_9c);
  if (((WVar2 == 0) || (local_8c != 2)) || (local_98 < 5)) {
    aCStackY_18[0] = -0x18;
    aCStackY_18[1] = 'j';
    aCStackY_18[2] = 'F';
    aCStackY_18[3] = '\0';
    DVar3 = GetEnvironmentVariableA("__MSVCRT_HEAP_SELECT",local_1230,0x1090);
    if (DVar3 != 0) {
      pcVar6 = local_1230;
      while (local_1230[0] != '\0') {
        cVar1 = *pcVar6;
        if (('`' < cVar1) && (cVar1 < '{')) {
          *pcVar6 = cVar1 + -0x20;
        }
        pcVar6 = pcVar6 + 1;
        local_1230[0] = *pcVar6;
      }
      builtin_memcpy(aCStackY_18,"&kF",4);
      iVar4 = _strncmp("__GLOBAL_HEAP_SELECTED",local_1230,0x16);
      if (iVar4 == 0) {
        pcVar6 = local_1230;
      }
      else {
        builtin_memcpy(aCStackY_18,"HkF",4);
        GetModuleFileNameA((HMODULE)0x0,local_1a0,0x104);
        pcVar6 = local_1a0;
        while (local_1a0[0] != '\0') {
          cVar1 = *pcVar6;
          if (('`' < cVar1) && (cVar1 < '{')) {
            *pcVar6 = cVar1 + -0x20;
          }
          pcVar6 = pcVar6 + 1;
          local_1a0[0] = *pcVar6;
        }
        pcVar6 = _strstr(local_1230,local_1a0);
      }
      if ((pcVar6 != (char *)0x0) && (pcVar6 = _strchr(pcVar6,0x2c), pcVar6 != (char *)0x0)) {
        pcVar6 = pcVar6 + 1;
        cVar1 = *pcVar6;
        this = pcVar6;
        while (cVar1 != '\0') {
          if (*this == ';') {
            *this = '\0';
          }
          else {
            this = this + 1;
          }
          cVar1 = *this;
        }
        aCStackY_18[0] = -0x52;
        aCStackY_18[1] = 'k';
        aCStackY_18[2] = 'F';
        aCStackY_18[3] = '\0';
        lVar5 = crt_strtol_l(this,pcVar6,(char *)0x0,(char **)0xa,unaff_EBX);
        if (lVar5 == 2) {
          return 2;
        }
        if (lVar5 == 3) {
          return 3;
        }
        if (lVar5 == 1) {
          return 1;
        }
      }
    }
    bVar7 = (byte)unaff_EBX;
    FUN_00466a61((undefined4 *)&stack0xfffffff8);
    iVar4 = 3 - (uint)(bVar7 < 6);
  }
  else {
    iVar4 = 1;
  }
  return iVar4;
}



/* crt_heap_init @ 00466bd6 */

/* CRT heap init (small/large block selection) */

undefined4 __cdecl crt_heap_init(int param_1)

{
  undefined **ppuVar1;
  
  DAT_004da3a4 = HeapCreate((uint)(param_1 == 0),0x1000,0);
  if (DAT_004da3a4 != (HANDLE)0x0) {
    crt_heap_mode = crt_heap_select();
    if (crt_heap_mode == 3) {
      ppuVar1 = (undefined **)crt_sbh_init(0x3f8);
    }
    else {
      if (crt_heap_mode != 2) {
        return 1;
      }
      ppuVar1 = crt_sbh_create_region();
    }
    if (ppuVar1 != (undefined **)0x0) {
      return 1;
    }
    HeapDestroy(DAT_004da3a4);
  }
  return 0;
}



/* crt_sbh_init @ 00466c33 */

/* CRT small-block heap init */

undefined4 __cdecl crt_sbh_init(undefined4 param_1)

{
  DAT_004da39c = HeapAlloc(DAT_004da3a4,0,0x140);
  if (DAT_004da39c == (LPVOID)0x0) {
    return 0;
  }
  DAT_004da394 = 0;
  DAT_004da398 = 0;
  DAT_004da390 = DAT_004da39c;
  DAT_004da3a0 = param_1;
  DAT_004da388 = 0x10;
  return 1;
}



/* FUN_00466c7b @ 00466c7b */

uint __cdecl FUN_00466c7b(int param_1)

{
  uint uVar1;
  
  uVar1 = DAT_004da39c;
  while( true ) {
    if (DAT_004da39c + DAT_004da398 * 0x14 <= uVar1) {
      return 0;
    }
    if ((uint)(param_1 - *(int *)(uVar1 + 0xc)) < 0x100000) break;
    uVar1 = uVar1 + 0x14;
  }
  return uVar1;
}



/* FUN_00466ca6 @ 00466ca6 */

void __cdecl FUN_00466ca6(uint *param_1,int param_2)

{
  char *pcVar1;
  uint *puVar2;
  int *piVar3;
  char cVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  byte bVar8;
  uint uVar9;
  uint *puVar10;
  uint *puVar11;
  uint *puVar12;
  uint uVar13;
  uint uVar14;
  uint local_8;
  
  uVar5 = param_1[4];
  puVar12 = (uint *)(param_2 + -4);
  uVar14 = param_2 - param_1[3] >> 0xf;
  piVar3 = (int *)(uVar14 * 0x204 + 0x144 + uVar5);
  uVar13 = *puVar12;
  local_8 = uVar13 - 1;
  if ((local_8 & 1) == 0) {
    uVar6 = *(uint *)(local_8 + (int)puVar12);
    uVar7 = *(uint *)(param_2 + -8);
    if ((uVar6 & 1) == 0) {
      uVar9 = ((int)uVar6 >> 4) - 1;
      if (0x3f < uVar9) {
        uVar9 = 0x3f;
      }
      if (*(int *)((int)puVar12 + uVar13 + 3) == *(int *)((int)puVar12 + uVar13 + 7)) {
        if (uVar9 < 0x20) {
          pcVar1 = (char *)(uVar9 + 4 + uVar5);
          uVar9 = ~(0x80000000U >> ((byte)uVar9 & 0x1f));
          puVar10 = (uint *)(uVar5 + 0x44 + uVar14 * 4);
          *puVar10 = *puVar10 & uVar9;
          *pcVar1 = *pcVar1 + -1;
          if (*pcVar1 == '\0') {
            *param_1 = *param_1 & uVar9;
          }
        }
        else {
          pcVar1 = (char *)(uVar9 + 4 + uVar5);
          uVar9 = ~(0x80000000U >> ((byte)uVar9 - 0x20 & 0x1f));
          puVar10 = (uint *)(uVar5 + 0xc4 + uVar14 * 4);
          *puVar10 = *puVar10 & uVar9;
          *pcVar1 = *pcVar1 + -1;
          if (*pcVar1 == '\0') {
            param_1[1] = param_1[1] & uVar9;
          }
        }
      }
      local_8 = local_8 + uVar6;
      *(undefined4 *)(*(int *)((int)puVar12 + uVar13 + 7) + 4) =
           *(undefined4 *)((int)puVar12 + uVar13 + 3);
      *(undefined4 *)(*(int *)((int)puVar12 + uVar13 + 3) + 8) =
           *(undefined4 *)((int)puVar12 + uVar13 + 7);
    }
    puVar10 = (uint *)(((int)local_8 >> 4) - 1);
    if ((uint *)0x3f < puVar10) {
      puVar10 = (uint *)0x3f;
    }
    puVar11 = param_1;
    if ((uVar7 & 1) == 0) {
      puVar12 = (uint *)((int)puVar12 - uVar7);
      puVar11 = (uint *)(((int)uVar7 >> 4) - 1);
      if ((uint *)0x3f < puVar11) {
        puVar11 = (uint *)0x3f;
      }
      local_8 = local_8 + uVar7;
      puVar10 = (uint *)(((int)local_8 >> 4) - 1);
      if ((uint *)0x3f < puVar10) {
        puVar10 = (uint *)0x3f;
      }
      if (puVar11 != puVar10) {
        if (puVar12[1] == puVar12[2]) {
          if (puVar11 < (uint *)0x20) {
            uVar13 = ~(0x80000000U >> ((byte)puVar11 & 0x1f));
            puVar2 = (uint *)(uVar5 + 0x44 + uVar14 * 4);
            *puVar2 = *puVar2 & uVar13;
            pcVar1 = (char *)((int)puVar11 + uVar5 + 4);
            *pcVar1 = *pcVar1 + -1;
            if (*pcVar1 == '\0') {
              *param_1 = *param_1 & uVar13;
            }
          }
          else {
            uVar13 = ~(0x80000000U >> ((byte)puVar11 - 0x20 & 0x1f));
            puVar2 = (uint *)(uVar5 + 0xc4 + uVar14 * 4);
            *puVar2 = *puVar2 & uVar13;
            pcVar1 = (char *)((int)puVar11 + uVar5 + 4);
            *pcVar1 = *pcVar1 + -1;
            if (*pcVar1 == '\0') {
              param_1[1] = param_1[1] & uVar13;
            }
          }
        }
        *(uint *)(puVar12[2] + 4) = puVar12[1];
        *(uint *)(puVar12[1] + 8) = puVar12[2];
      }
    }
    if (((uVar7 & 1) != 0) || (puVar11 != puVar10)) {
      puVar12[1] = piVar3[(int)puVar10 * 2 + 1];
      puVar12[2] = (uint)(piVar3 + (int)puVar10 * 2);
      (piVar3 + (int)puVar10 * 2)[1] = (int)puVar12;
      *(uint **)(puVar12[1] + 8) = puVar12;
      if (puVar12[1] == puVar12[2]) {
        cVar4 = *(char *)((int)puVar10 + uVar5 + 4);
        *(char *)((int)puVar10 + uVar5 + 4) = cVar4 + '\x01';
        bVar8 = (byte)puVar10;
        if (puVar10 < (uint *)0x20) {
          if (cVar4 == '\0') {
            *param_1 = *param_1 | 0x80000000U >> (bVar8 & 0x1f);
          }
          puVar10 = (uint *)(uVar5 + 0x44 + uVar14 * 4);
          *puVar10 = *puVar10 | 0x80000000U >> (bVar8 & 0x1f);
        }
        else {
          if (cVar4 == '\0') {
            param_1[1] = param_1[1] | 0x80000000U >> (bVar8 - 0x20 & 0x1f);
          }
          puVar10 = (uint *)(uVar5 + 0xc4 + uVar14 * 4);
          *puVar10 = *puVar10 | 0x80000000U >> (bVar8 - 0x20 & 0x1f);
        }
      }
    }
    *puVar12 = local_8;
    *(uint *)((local_8 - 4) + (int)puVar12) = local_8;
    *piVar3 = *piVar3 + -1;
    if (*piVar3 == 0) {
      if (DAT_004da394 != (uint *)0x0) {
        VirtualFree((LPVOID)(DAT_004da38c * 0x8000 + DAT_004da394[3]),0x8000,0x4000);
        DAT_004da394[2] = DAT_004da394[2] | 0x80000000U >> ((byte)DAT_004da38c & 0x1f);
        *(undefined4 *)(DAT_004da394[4] + 0xc4 + DAT_004da38c * 4) = 0;
        *(char *)(DAT_004da394[4] + 0x43) = *(char *)(DAT_004da394[4] + 0x43) + -1;
        if (*(char *)(DAT_004da394[4] + 0x43) == '\0') {
          DAT_004da394[1] = DAT_004da394[1] & 0xfffffffe;
        }
        if (DAT_004da394[2] == 0xffffffff) {
          VirtualFree((LPVOID)DAT_004da394[3],0,0x8000);
          HeapFree(DAT_004da3a4,0,(LPVOID)DAT_004da394[4]);
          crt_memmove(DAT_004da394,DAT_004da394 + 5,
                      (DAT_004da398 * 0x14 - (int)DAT_004da394) + -0x14 + DAT_004da39c);
          DAT_004da398 = DAT_004da398 + -1;
          if (DAT_004da394 < param_1) {
            param_1 = param_1 + -5;
          }
          DAT_004da390 = DAT_004da39c;
        }
      }
      DAT_004da394 = param_1;
      DAT_004da38c = uVar14;
    }
  }
  return;
}



/* FUN_00466fcf @ 00466fcf */

int * __cdecl FUN_00466fcf(uint *param_1)

{
  char *pcVar1;
  int *piVar2;
  char cVar3;
  int *piVar4;
  byte bVar5;
  uint uVar6;
  int iVar7;
  uint *puVar8;
  int iVar9;
  int *piVar10;
  uint *puVar11;
  uint *puVar12;
  uint uVar13;
  int iVar14;
  uint local_10;
  uint local_c;
  int local_8;
  
  puVar8 = DAT_004da39c + DAT_004da398 * 5;
  uVar6 = (int)param_1 + 0x17U & 0xfffffff0;
  iVar7 = ((int)((int)param_1 + 0x17U) >> 4) + -1;
  bVar5 = (byte)iVar7;
  param_1 = DAT_004da390;
  if (iVar7 < 0x20) {
    local_10 = 0xffffffff >> (bVar5 & 0x1f);
    local_c = 0xffffffff;
  }
  else {
    local_c = 0xffffffff >> (bVar5 - 0x20 & 0x1f);
    local_10 = 0;
  }
  for (; (param_1 < puVar8 && ((param_1[1] & local_c) == 0 && (*param_1 & local_10) == 0));
      param_1 = param_1 + 5) {
  }
  puVar11 = DAT_004da39c;
  if (param_1 == puVar8) {
    for (; (puVar11 < DAT_004da390 && ((puVar11[1] & local_c) == 0 && (*puVar11 & local_10) == 0));
        puVar11 = puVar11 + 5) {
    }
    param_1 = puVar11;
    if (puVar11 == DAT_004da390) {
      for (; (puVar11 < puVar8 && (puVar11[2] == 0)); puVar11 = puVar11 + 5) {
      }
      puVar12 = DAT_004da39c;
      param_1 = puVar11;
      if (puVar11 == puVar8) {
        for (; (puVar12 < DAT_004da390 && (puVar12[2] == 0)); puVar12 = puVar12 + 5) {
        }
        param_1 = puVar12;
        if ((puVar12 == DAT_004da390) && (param_1 = FUN_004672d8(), param_1 == (uint *)0x0)) {
          return (int *)0x0;
        }
      }
      iVar7 = FUN_00467389((int)param_1);
      *(int *)param_1[4] = iVar7;
      if (*(int *)param_1[4] == -1) {
        return (int *)0x0;
      }
    }
  }
  piVar4 = (int *)param_1[4];
  local_8 = *piVar4;
  if ((local_8 == -1) ||
     ((piVar4[local_8 + 0x31] & local_c) == 0 && (piVar4[local_8 + 0x11] & local_10) == 0)) {
    local_8 = 0;
    puVar8 = (uint *)(piVar4 + 0x11);
    if ((piVar4[0x31] & local_c) == 0 && (piVar4[0x11] & local_10) == 0) {
      do {
        puVar11 = puVar8 + 0x21;
        local_8 = local_8 + 1;
        puVar8 = puVar8 + 1;
      } while ((*puVar11 & local_c) == 0 && (local_10 & *puVar8) == 0);
    }
  }
  iVar7 = 0;
  piVar2 = piVar4 + local_8 * 0x81 + 0x51;
  local_10 = piVar4[local_8 + 0x11] & local_10;
  if (local_10 == 0) {
    local_10 = piVar4[local_8 + 0x31] & local_c;
    iVar7 = 0x20;
  }
  for (; -1 < (int)local_10; local_10 = local_10 << 1) {
    iVar7 = iVar7 + 1;
  }
  piVar10 = (int *)piVar2[iVar7 * 2 + 1];
  iVar9 = *piVar10 - uVar6;
  iVar14 = (iVar9 >> 4) + -1;
  if (0x3f < iVar14) {
    iVar14 = 0x3f;
  }
  DAT_004da390 = param_1;
  if (iVar14 != iVar7) {
    if (piVar10[1] == piVar10[2]) {
      if (iVar7 < 0x20) {
        pcVar1 = (char *)((int)piVar4 + iVar7 + 4);
        uVar13 = ~(0x80000000U >> ((byte)iVar7 & 0x1f));
        piVar4[local_8 + 0x11] = uVar13 & piVar4[local_8 + 0x11];
        *pcVar1 = *pcVar1 + -1;
        if (*pcVar1 == '\0') {
          *param_1 = *param_1 & uVar13;
        }
      }
      else {
        pcVar1 = (char *)((int)piVar4 + iVar7 + 4);
        uVar13 = ~(0x80000000U >> ((byte)iVar7 - 0x20 & 0x1f));
        piVar4[local_8 + 0x31] = piVar4[local_8 + 0x31] & uVar13;
        *pcVar1 = *pcVar1 + -1;
        if (*pcVar1 == '\0') {
          param_1[1] = param_1[1] & uVar13;
        }
      }
    }
    *(int *)(piVar10[2] + 4) = piVar10[1];
    *(int *)(piVar10[1] + 8) = piVar10[2];
    if (iVar9 == 0) goto LAB_00467295;
    piVar10[1] = piVar2[iVar14 * 2 + 1];
    piVar10[2] = (int)(piVar2 + iVar14 * 2);
    (piVar2 + iVar14 * 2)[1] = (int)piVar10;
    *(int **)(piVar10[1] + 8) = piVar10;
    if (piVar10[1] == piVar10[2]) {
      cVar3 = *(char *)(iVar14 + 4 + (int)piVar4);
      bVar5 = (byte)iVar14;
      if (iVar14 < 0x20) {
        *(char *)(iVar14 + 4 + (int)piVar4) = cVar3 + '\x01';
        if (cVar3 == '\0') {
          *param_1 = *param_1 | 0x80000000U >> (bVar5 & 0x1f);
        }
        piVar4[local_8 + 0x11] = piVar4[local_8 + 0x11] | 0x80000000U >> (bVar5 & 0x1f);
      }
      else {
        *(char *)(iVar14 + 4 + (int)piVar4) = cVar3 + '\x01';
        if (cVar3 == '\0') {
          param_1[1] = param_1[1] | 0x80000000U >> (bVar5 - 0x20 & 0x1f);
        }
        piVar4[local_8 + 0x31] = piVar4[local_8 + 0x31] | 0x80000000U >> (bVar5 - 0x20 & 0x1f);
      }
    }
  }
  if (iVar9 != 0) {
    *piVar10 = iVar9;
    *(int *)(iVar9 + -4 + (int)piVar10) = iVar9;
  }
LAB_00467295:
  piVar10 = (int *)((int)piVar10 + iVar9);
  *piVar10 = uVar6 + 1;
  *(uint *)((int)piVar10 + (uVar6 - 4)) = uVar6 + 1;
  iVar7 = *piVar2;
  *piVar2 = iVar7 + 1;
  if (((iVar7 == 0) && (param_1 == DAT_004da394)) && (local_8 == DAT_004da38c)) {
    DAT_004da394 = (uint *)0x0;
  }
  *piVar4 = local_8;
  return piVar10 + 1;
}



/* FUN_004672d8 @ 004672d8 */

undefined4 * FUN_004672d8(void)

{
  undefined4 *puVar1;
  LPVOID pvVar2;
  
  if (DAT_004da398 == DAT_004da388) {
    pvVar2 = HeapReAlloc(DAT_004da3a4,0,DAT_004da39c,(DAT_004da388 * 5 + 0x50) * 4);
    if (pvVar2 == (LPVOID)0x0) {
      return (undefined4 *)0x0;
    }
    DAT_004da388 = DAT_004da388 + 0x10;
    DAT_004da39c = pvVar2;
  }
  puVar1 = (undefined4 *)((int)DAT_004da39c + DAT_004da398 * 0x14);
  pvVar2 = HeapAlloc(DAT_004da3a4,8,0x41c4);
  puVar1[4] = pvVar2;
  if (pvVar2 != (LPVOID)0x0) {
    pvVar2 = VirtualAlloc((LPVOID)0x0,0x100000,0x2000,4);
    puVar1[3] = pvVar2;
    if (pvVar2 != (LPVOID)0x0) {
      puVar1[2] = 0xffffffff;
      *puVar1 = 0;
      puVar1[1] = 0;
      DAT_004da398 = DAT_004da398 + 1;
      *(undefined4 *)puVar1[4] = 0xffffffff;
      return puVar1;
    }
    HeapFree(DAT_004da3a4,0,(LPVOID)puVar1[4]);
  }
  return (undefined4 *)0x0;
}



/* FUN_00467389 @ 00467389 */

int __cdecl FUN_00467389(int param_1)

{
  int *piVar1;
  char cVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  LPVOID pvVar6;
  int *piVar7;
  int iVar8;
  int iVar9;
  int *lpAddress;
  
  iVar3 = *(int *)(param_1 + 0x10);
  iVar9 = 0;
  for (iVar4 = *(int *)(param_1 + 8); -1 < iVar4; iVar4 = iVar4 << 1) {
    iVar9 = iVar9 + 1;
  }
  iVar8 = 0x3f;
  iVar4 = iVar9 * 0x204 + 0x144 + iVar3;
  iVar5 = iVar4;
  do {
    *(int *)(iVar5 + 8) = iVar5;
    *(int *)(iVar5 + 4) = iVar5;
    iVar5 = iVar5 + 8;
    iVar8 = iVar8 + -1;
  } while (iVar8 != 0);
  lpAddress = (int *)(iVar9 * 0x8000 + *(int *)(param_1 + 0xc));
  pvVar6 = VirtualAlloc(lpAddress,0x8000,0x1000,4);
  if (pvVar6 == (LPVOID)0x0) {
    iVar9 = -1;
  }
  else {
    if (lpAddress <= lpAddress + 0x1c00) {
      piVar7 = lpAddress + 4;
      do {
        piVar7[-2] = -1;
        piVar7[0x3fb] = -1;
        piVar7[-1] = 0xff0;
        *piVar7 = (int)(piVar7 + 0x3ff);
        piVar7[1] = (int)(piVar7 + -0x401);
        piVar7[0x3fa] = 0xff0;
        piVar1 = piVar7 + 0x3fc;
        piVar7 = piVar7 + 0x400;
      } while (piVar1 <= lpAddress + 0x1c00);
    }
    *(int **)(iVar4 + 0x1fc) = lpAddress + 3;
    lpAddress[5] = iVar4 + 0x1f8;
    *(int **)(iVar4 + 0x200) = lpAddress + 0x1c03;
    lpAddress[0x1c04] = iVar4 + 0x1f8;
    *(undefined4 *)(iVar3 + 0x44 + iVar9 * 4) = 0;
    *(undefined4 *)(iVar3 + 0xc4 + iVar9 * 4) = 1;
    cVar2 = *(char *)(iVar3 + 0x43);
    *(char *)(iVar3 + 0x43) = cVar2 + '\x01';
    if (cVar2 == '\0') {
      *(uint *)(param_1 + 4) = *(uint *)(param_1 + 4) | 1;
    }
    *(uint *)(param_1 + 8) = *(uint *)(param_1 + 8) & ~(0x80000000U >> ((byte)iVar9 & 0x1f));
  }
  return iVar9;
}



/* FUN_00467484 @ 00467484 */

undefined4 __cdecl FUN_00467484(uint *param_1,int param_2,int param_3)

{
  char *pcVar1;
  int *piVar2;
  int iVar3;
  char cVar4;
  uint uVar5;
  int iVar6;
  uint *puVar7;
  byte bVar8;
  int iVar9;
  uint uVar10;
  uint uVar11;
  uint uVar12;
  uint uVar13;
  uint local_c;
  
  uVar5 = param_1[4];
  uVar12 = param_3 + 0x17U & 0xfffffff0;
  uVar10 = param_2 - param_1[3] >> 0xf;
  iVar3 = uVar10 * 0x204 + 0x144 + uVar5;
  iVar6 = *(int *)(param_2 + -4);
  iVar9 = iVar6 + -1;
  uVar13 = *(uint *)(iVar6 + -5 + param_2);
  iVar6 = iVar6 + -5 + param_2;
  if (iVar9 < (int)uVar12) {
    if (((uVar13 & 1) != 0) || ((int)(uVar13 + iVar9) < (int)uVar12)) {
      return 0;
    }
    local_c = ((int)uVar13 >> 4) - 1;
    if (0x3f < local_c) {
      local_c = 0x3f;
    }
    if (*(int *)(iVar6 + 4) == *(int *)(iVar6 + 8)) {
      if (local_c < 0x20) {
        pcVar1 = (char *)(local_c + 4 + uVar5);
        uVar11 = ~(0x80000000U >> ((byte)local_c & 0x1f));
        puVar7 = (uint *)(uVar5 + 0x44 + uVar10 * 4);
        *puVar7 = *puVar7 & uVar11;
        *pcVar1 = *pcVar1 + -1;
        if (*pcVar1 == '\0') {
          *param_1 = *param_1 & uVar11;
        }
      }
      else {
        pcVar1 = (char *)(local_c + 4 + uVar5);
        uVar11 = ~(0x80000000U >> ((byte)local_c - 0x20 & 0x1f));
        puVar7 = (uint *)(uVar5 + 0xc4 + uVar10 * 4);
        *puVar7 = *puVar7 & uVar11;
        *pcVar1 = *pcVar1 + -1;
        if (*pcVar1 == '\0') {
          param_1[1] = param_1[1] & uVar11;
        }
      }
    }
    *(undefined4 *)(*(int *)(iVar6 + 8) + 4) = *(undefined4 *)(iVar6 + 4);
    *(undefined4 *)(*(int *)(iVar6 + 4) + 8) = *(undefined4 *)(iVar6 + 8);
    iVar6 = uVar13 + (iVar9 - uVar12);
    if (0 < iVar6) {
      uVar13 = (iVar6 >> 4) - 1;
      iVar9 = param_2 + -4 + uVar12;
      if (0x3f < uVar13) {
        uVar13 = 0x3f;
      }
      iVar3 = iVar3 + uVar13 * 8;
      *(undefined4 *)(iVar9 + 4) = *(undefined4 *)(iVar3 + 4);
      *(int *)(iVar9 + 8) = iVar3;
      *(int *)(iVar3 + 4) = iVar9;
      *(int *)(*(int *)(iVar9 + 4) + 8) = iVar9;
      if (*(int *)(iVar9 + 4) == *(int *)(iVar9 + 8)) {
        cVar4 = *(char *)(uVar13 + 4 + uVar5);
        *(char *)(uVar13 + 4 + uVar5) = cVar4 + '\x01';
        bVar8 = (byte)uVar13;
        if (uVar13 < 0x20) {
          if (cVar4 == '\0') {
            *param_1 = *param_1 | 0x80000000U >> (bVar8 & 0x1f);
          }
          puVar7 = (uint *)(uVar5 + 0x44 + uVar10 * 4);
        }
        else {
          if (cVar4 == '\0') {
            param_1[1] = param_1[1] | 0x80000000U >> (bVar8 - 0x20 & 0x1f);
          }
          puVar7 = (uint *)(uVar5 + 0xc4 + uVar10 * 4);
          bVar8 = bVar8 - 0x20;
        }
        *puVar7 = *puVar7 | 0x80000000U >> (bVar8 & 0x1f);
      }
      piVar2 = (int *)(param_2 + -4 + uVar12);
      *piVar2 = iVar6;
      *(int *)(iVar6 + -4 + (int)piVar2) = iVar6;
    }
    *(uint *)(param_2 + -4) = uVar12 + 1;
    *(uint *)(param_2 + -8 + uVar12) = uVar12 + 1;
  }
  else if ((int)uVar12 < iVar9) {
    param_3 = iVar9 - uVar12;
    *(uint *)(param_2 + -4) = uVar12 + 1;
    piVar2 = (int *)(param_2 + -4 + uVar12);
    uVar11 = (param_3 >> 4) - 1;
    piVar2[-1] = uVar12 + 1;
    if (0x3f < uVar11) {
      uVar11 = 0x3f;
    }
    if ((uVar13 & 1) == 0) {
      uVar12 = ((int)uVar13 >> 4) - 1;
      if (0x3f < uVar12) {
        uVar12 = 0x3f;
      }
      if (*(int *)(iVar6 + 4) == *(int *)(iVar6 + 8)) {
        if (uVar12 < 0x20) {
          pcVar1 = (char *)(uVar12 + 4 + uVar5);
          uVar12 = ~(0x80000000U >> ((byte)uVar12 & 0x1f));
          puVar7 = (uint *)(uVar5 + 0x44 + uVar10 * 4);
          *puVar7 = *puVar7 & uVar12;
          *pcVar1 = *pcVar1 + -1;
          if (*pcVar1 == '\0') {
            *param_1 = *param_1 & uVar12;
          }
        }
        else {
          pcVar1 = (char *)(uVar12 + 4 + uVar5);
          uVar12 = ~(0x80000000U >> ((byte)uVar12 - 0x20 & 0x1f));
          puVar7 = (uint *)(uVar5 + 0xc4 + uVar10 * 4);
          *puVar7 = *puVar7 & uVar12;
          *pcVar1 = *pcVar1 + -1;
          if (*pcVar1 == '\0') {
            param_1[1] = param_1[1] & uVar12;
          }
        }
      }
      *(undefined4 *)(*(int *)(iVar6 + 8) + 4) = *(undefined4 *)(iVar6 + 4);
      *(undefined4 *)(*(int *)(iVar6 + 4) + 8) = *(undefined4 *)(iVar6 + 8);
      param_3 = param_3 + uVar13;
      uVar11 = (param_3 >> 4) - 1;
      if (0x3f < uVar11) {
        uVar11 = 0x3f;
      }
    }
    iVar6 = iVar3 + uVar11 * 8;
    piVar2[1] = *(int *)(iVar3 + 4 + uVar11 * 8);
    piVar2[2] = iVar6;
    *(int **)(iVar6 + 4) = piVar2;
    *(int **)(piVar2[1] + 8) = piVar2;
    if (piVar2[1] == piVar2[2]) {
      cVar4 = *(char *)(uVar11 + 4 + uVar5);
      *(char *)(uVar11 + 4 + uVar5) = cVar4 + '\x01';
      bVar8 = (byte)uVar11;
      if (uVar11 < 0x20) {
        if (cVar4 == '\0') {
          *param_1 = *param_1 | 0x80000000U >> (bVar8 & 0x1f);
        }
        puVar7 = (uint *)(uVar5 + 0x44 + uVar10 * 4);
      }
      else {
        if (cVar4 == '\0') {
          param_1[1] = param_1[1] | 0x80000000U >> (bVar8 - 0x20 & 0x1f);
        }
        puVar7 = (uint *)(uVar5 + 0xc4 + uVar10 * 4);
        bVar8 = bVar8 - 0x20;
      }
      *puVar7 = *puVar7 | 0x80000000U >> (bVar8 & 0x1f);
    }
    *piVar2 = param_3;
    *(int *)(param_3 + -4 + (int)piVar2) = param_3;
  }
  return 1;
}



/* crt_sbh_create_region @ 0046777a */

/* CRT small-block heap region init */

undefined ** crt_sbh_create_region(void)

{
  bool bVar1;
  int *lpAddress;
  LPVOID pvVar2;
  undefined **ppuVar3;
  int iVar4;
  undefined **lpMem;
  
  if (DAT_0047bb00 == -1) {
    lpMem = &PTR_LOOP_0047baf0;
  }
  else {
    lpMem = HeapAlloc(DAT_004da3a4,0,0x2020);
    if (lpMem == (undefined **)0x0) {
      return (undefined **)0x0;
    }
  }
  lpAddress = VirtualAlloc((LPVOID)0x0,0x400000,0x2000,4);
  if (lpAddress != (int *)0x0) {
    pvVar2 = VirtualAlloc(lpAddress,0x10000,0x1000,4);
    if (pvVar2 != (LPVOID)0x0) {
      if (lpMem == &PTR_LOOP_0047baf0) {
        if (PTR_LOOP_0047baf0 == (undefined *)0x0) {
          PTR_LOOP_0047baf0 = (undefined *)&PTR_LOOP_0047baf0;
        }
        if (PTR_LOOP_0047baf4 == (undefined *)0x0) {
          PTR_LOOP_0047baf4 = (undefined *)&PTR_LOOP_0047baf0;
        }
      }
      else {
        *lpMem = (undefined *)&PTR_LOOP_0047baf0;
        lpMem[1] = PTR_LOOP_0047baf4;
        PTR_LOOP_0047baf4 = (undefined *)lpMem;
        *(undefined ***)lpMem[1] = lpMem;
      }
      lpMem[5] = (undefined *)(lpAddress + 0x100000);
      ppuVar3 = lpMem + 6;
      lpMem[3] = (undefined *)(lpMem + 0x26);
      lpMem[4] = (undefined *)lpAddress;
      lpMem[2] = (undefined *)ppuVar3;
      iVar4 = 0;
      do {
        bVar1 = 0xf < iVar4;
        iVar4 = iVar4 + 1;
        *ppuVar3 = (undefined *)((bVar1 - 1 & 0xf1) - 1);
        ppuVar3[1] = (undefined *)0xf1;
        ppuVar3 = ppuVar3 + 2;
      } while (iVar4 < 0x400);
      _memset(lpAddress,0,0x10000);
      for (; lpAddress < lpMem[4] + 0x10000; lpAddress = lpAddress + 0x400) {
        *(undefined1 *)(lpAddress + 0x3e) = 0xff;
        *lpAddress = (int)(lpAddress + 2);
        lpAddress[1] = 0xf0;
      }
      return lpMem;
    }
    VirtualFree(lpAddress,0,0x8000);
  }
  if (lpMem != &PTR_LOOP_0047baf0) {
    HeapFree(DAT_004da3a4,0,lpMem);
  }
  return (undefined **)0x0;
}



/* FUN_004678be @ 004678be */

void __cdecl FUN_004678be(undefined **param_1)

{
  VirtualFree(param_1[4],0,0x8000);
  if ((undefined **)PTR_LOOP_0047db10 == param_1) {
    PTR_LOOP_0047db10 = param_1[1];
  }
  if (param_1 != &PTR_LOOP_0047baf0) {
    *(undefined **)param_1[1] = *param_1;
    *(undefined **)(*param_1 + 4) = param_1[1];
    HeapFree(DAT_004da3a4,0,param_1);
    return;
  }
  DAT_0047bb00 = 0xffffffff;
  return;
}



/* FUN_00467914 @ 00467914 */

void __cdecl FUN_00467914(int param_1)

{
  WINBOOL WVar1;
  undefined **ppuVar2;
  int iVar3;
  undefined **ppuVar4;
  undefined **ppuVar5;
  int local_8;
  
  ppuVar4 = (undefined **)PTR_LOOP_0047baf4;
  do {
    ppuVar5 = ppuVar4;
    if (ppuVar4[4] != (undefined *)0xffffffff) {
      local_8 = 0;
      ppuVar5 = ppuVar4 + 0x804;
      iVar3 = 0x3ff000;
      do {
        if (*ppuVar5 == (undefined *)0xf0) {
          WVar1 = VirtualFree(ppuVar4[4] + iVar3,0x1000,0x4000);
          if (WVar1 != 0) {
            *ppuVar5 = (undefined *)0xffffffff;
            DAT_004d9a70 = DAT_004d9a70 + -1;
            if (((undefined **)ppuVar4[3] == (undefined **)0x0) || (ppuVar5 < ppuVar4[3])) {
              ppuVar4[3] = (undefined *)ppuVar5;
            }
            local_8 = local_8 + 1;
            param_1 = param_1 + -1;
            if (param_1 == 0) break;
          }
        }
        iVar3 = iVar3 + -0x1000;
        ppuVar5 = ppuVar5 + -2;
      } while (-1 < iVar3);
      ppuVar5 = (undefined **)ppuVar4[1];
      if ((local_8 != 0) && (ppuVar4[6] == (undefined *)0xffffffff)) {
        ppuVar2 = ppuVar4 + 8;
        iVar3 = 1;
        do {
          if (*ppuVar2 != (undefined *)0xffffffff) break;
          iVar3 = iVar3 + 1;
          ppuVar2 = ppuVar2 + 2;
        } while (iVar3 < 0x400);
        if (iVar3 == 0x400) {
          FUN_004678be(ppuVar4);
        }
      }
    }
    if ((ppuVar5 == (undefined **)PTR_LOOP_0047baf4) || (ppuVar4 = ppuVar5, param_1 < 1)) {
      return;
    }
  } while( true );
}



/* FUN_004679d6 @ 004679d6 */

int __cdecl FUN_004679d6(undefined *param_1,undefined4 *param_2,uint *param_3)

{
  undefined **ppuVar1;
  uint uVar2;
  
  ppuVar1 = &PTR_LOOP_0047baf0;
  while ((param_1 <= ppuVar1[4] || (ppuVar1[5] <= param_1))) {
    ppuVar1 = (undefined **)*ppuVar1;
    if (ppuVar1 == &PTR_LOOP_0047baf0) {
      return 0;
    }
  }
  if (((uint)param_1 & 0xf) != 0) {
    return 0;
  }
  if (((uint)param_1 & 0xfff) < 0x100) {
    return 0;
  }
  *param_2 = ppuVar1;
  uVar2 = (uint)param_1 & 0xfffff000;
  *param_3 = uVar2;
  return ((int)(param_1 + (-0x100 - uVar2)) >> 4) + 8 + uVar2;
}



/* FUN_00467a2d @ 00467a2d */

void __cdecl FUN_00467a2d(int param_1,int param_2,byte *param_3)

{
  int *piVar1;
  
  piVar1 = (int *)(param_1 + 0x18 + (param_2 - *(int *)(param_1 + 0x10) >> 0xc) * 8);
  *piVar1 = *piVar1 + (uint)*param_3;
  *param_3 = 0;
  piVar1[1] = 0xf1;
  if ((*piVar1 == 0xf0) && (DAT_004d9a70 = DAT_004d9a70 + 1, DAT_004d9a70 == 0x20)) {
    FUN_00467914(0x10);
  }
  return;
}



/* FUN_00467a72 @ 00467a72 */

/* WARNING: Type propagation algorithm not settling */

int * __cdecl FUN_00467a72(uint param_1)

{
  uint *puVar1;
  undefined **ppuVar2;
  undefined *puVar3;
  int *piVar4;
  int *piVar5;
  undefined **ppuVar6;
  int *piVar7;
  uint *puVar8;
  undefined **ppuVar9;
  int local_8;
  
  piVar7 = (int *)PTR_LOOP_0047db10;
  do {
    if (piVar7[4] != -1) {
      puVar8 = (uint *)piVar7[2];
      piVar4 = (int *)(((int)puVar8 + (-0x18 - (int)piVar7) >> 3) * 0x1000 + piVar7[4]);
      if (puVar8 < piVar7 + 0x806) {
        do {
          if (((int)param_1 <= (int)*puVar8) && (param_1 < puVar8[1])) {
            piVar5 = (int *)FUN_00467c7a(piVar4,*puVar8,param_1);
            if (piVar5 != (int *)0x0) goto LAB_00467b3d;
            puVar8[1] = param_1;
          }
          puVar8 = puVar8 + 2;
          piVar4 = piVar4 + 0x400;
        } while (puVar8 < piVar7 + 0x806);
      }
      puVar1 = (uint *)piVar7[2];
      piVar4 = (int *)piVar7[4];
      for (puVar8 = (uint *)(piVar7 + 6); puVar8 < puVar1; puVar8 = puVar8 + 2) {
        if (((int)param_1 <= (int)*puVar8) && (param_1 < puVar8[1])) {
          piVar5 = (int *)FUN_00467c7a(piVar4,*puVar8,param_1);
          if (piVar5 != (int *)0x0) {
LAB_00467b3d:
            PTR_LOOP_0047db10 = (undefined *)piVar7;
            *puVar8 = *puVar8 - param_1;
            piVar7[2] = (int)puVar8;
            return piVar5;
          }
          puVar8[1] = param_1;
        }
        piVar4 = piVar4 + 0x400;
      }
    }
    piVar7 = (int *)*piVar7;
    if (piVar7 == (int *)PTR_LOOP_0047db10) {
      ppuVar9 = &PTR_LOOP_0047baf0;
      while ((ppuVar9[4] == (undefined *)0xffffffff || (ppuVar9[3] == (undefined *)0x0))) {
        ppuVar9 = (undefined **)*ppuVar9;
        if (ppuVar9 == &PTR_LOOP_0047baf0) {
          ppuVar9 = crt_sbh_create_region();
          if (ppuVar9 == (undefined **)0x0) {
            return (int *)0x0;
          }
          piVar7 = (int *)ppuVar9[4];
          *(char *)(piVar7 + 2) = (char)param_1;
          PTR_LOOP_0047db10 = (undefined *)ppuVar9;
          *piVar7 = (int)piVar7 + param_1 + 8;
          piVar7[1] = 0xf0 - param_1;
          ppuVar9[6] = ppuVar9[6] + -(param_1 & 0xff);
          return piVar7 + 0x40;
        }
      }
      ppuVar2 = (undefined **)ppuVar9[3];
      local_8 = 0;
      piVar7 = (int *)(ppuVar9[4] + ((int)ppuVar2 + (-0x18 - (int)ppuVar9) >> 3) * 0x1000);
      puVar3 = *ppuVar2;
      ppuVar6 = ppuVar2;
      for (; (puVar3 == (undefined *)0xffffffff && (local_8 < 0x10)); local_8 = local_8 + 1) {
        ppuVar6 = ppuVar6 + 2;
        puVar3 = *ppuVar6;
      }
      piVar4 = VirtualAlloc(piVar7,local_8 << 0xc,0x1000,4);
      if (piVar4 != piVar7) {
        return (int *)0x0;
      }
      _memset(piVar7,local_8 << 0xc,0);
      ppuVar6 = ppuVar2;
      if (0 < local_8) {
        piVar4 = piVar7 + 1;
        do {
          *(undefined1 *)(piVar4 + 0x3d) = 0xff;
          piVar4[-1] = (int)(piVar4 + 1);
          *piVar4 = 0xf0;
          *ppuVar6 = (undefined *)0xf0;
          ppuVar6[1] = (undefined *)0xf1;
          piVar4 = piVar4 + 0x400;
          ppuVar6 = ppuVar6 + 2;
          local_8 = local_8 + -1;
        } while (local_8 != 0);
      }
      for (; (ppuVar6 < ppuVar9 + 0x806 && (*ppuVar6 != (undefined *)0xffffffff));
          ppuVar6 = ppuVar6 + 2) {
      }
      PTR_LOOP_0047db10 = (undefined *)ppuVar9;
      ppuVar9[3] = (undefined *)(-(uint)(ppuVar6 < ppuVar9 + 0x806) & (uint)ppuVar6);
      *(char *)(piVar7 + 2) = (char)param_1;
      ppuVar9[2] = (undefined *)ppuVar2;
      *ppuVar2 = *ppuVar2 + -param_1;
      piVar7[1] = piVar7[1] - param_1;
      *piVar7 = (int)piVar7 + param_1 + 8;
      return piVar7 + 0x40;
    }
  } while( true );
}



/* FUN_00467c7a @ 00467c7a */

int __cdecl FUN_00467c7a(int *param_1,uint param_2,uint param_3)

{
  byte *pbVar1;
  byte *pbVar2;
  byte bVar3;
  byte *pbVar4;
  uint uVar5;
  byte *pbVar6;
  
  pbVar2 = (byte *)*param_1;
  pbVar1 = (byte *)(param_1 + 0x3e);
  bVar3 = (byte)param_3;
  if ((uint)param_1[1] < param_3) {
    pbVar6 = pbVar2;
    if (pbVar2[param_1[1]] != 0) {
      pbVar6 = pbVar2 + param_1[1];
    }
    while( true ) {
      while( true ) {
        if (pbVar1 <= pbVar6 + param_3) {
          pbVar6 = (byte *)(param_1 + 2);
          while( true ) {
            while( true ) {
              if (pbVar2 <= pbVar6) {
                return 0;
              }
              if (pbVar1 <= pbVar6 + param_3) {
                return 0;
              }
              if (*pbVar6 == 0) break;
              pbVar6 = pbVar6 + *pbVar6;
            }
            uVar5 = 1;
            pbVar4 = pbVar6;
            while (pbVar4 = pbVar4 + 1, *pbVar4 == 0) {
              uVar5 = uVar5 + 1;
            }
            if (param_3 <= uVar5) break;
            param_2 = param_2 - uVar5;
            pbVar6 = pbVar4;
            if (param_2 < param_3) {
              return 0;
            }
          }
          if (pbVar6 + param_3 < pbVar1) {
            *param_1 = (int)(pbVar6 + param_3);
            param_1[1] = uVar5 - param_3;
          }
          else {
            param_1[1] = 0;
            *param_1 = (int)(param_1 + 2);
          }
          *pbVar6 = bVar3;
          pbVar2 = pbVar6 + 8;
          goto LAB_00467d8d;
        }
        if (*pbVar6 == 0) break;
        pbVar6 = pbVar6 + *pbVar6;
      }
      uVar5 = 1;
      pbVar4 = pbVar6;
      while (pbVar4 = pbVar4 + 1, *pbVar4 == 0) {
        uVar5 = uVar5 + 1;
      }
      if (param_3 <= uVar5) break;
      if (pbVar6 == pbVar2) {
        param_1[1] = uVar5;
        pbVar6 = pbVar4;
      }
      else {
        param_2 = param_2 - uVar5;
        pbVar6 = pbVar4;
        if (param_2 < param_3) {
          return 0;
        }
      }
    }
    if (pbVar6 + param_3 < pbVar1) {
      *param_1 = (int)(pbVar6 + param_3);
      param_1[1] = uVar5 - param_3;
    }
    else {
      param_1[1] = 0;
      *param_1 = (int)(param_1 + 2);
    }
    *pbVar6 = bVar3;
    pbVar2 = pbVar6 + 8;
  }
  else {
    *pbVar2 = bVar3;
    if (pbVar2 + param_3 < pbVar1) {
      *param_1 = *param_1 + param_3;
      param_1[1] = param_1[1] - param_3;
    }
    else {
      param_1[1] = 0;
      *param_1 = (int)(param_1 + 2);
    }
    pbVar2 = pbVar2 + 8;
  }
LAB_00467d8d:
  return (int)pbVar2 * 0x10 + (int)param_1 * -0xf;
}



/* FUN_00467d9e @ 00467d9e */

undefined4 __cdecl FUN_00467d9e(int param_1,int *param_2,byte *param_3,uint param_4)

{
  byte *pbVar1;
  int *piVar2;
  byte bVar3;
  byte *pbVar4;
  int iVar5;
  uint uVar6;
  
  uVar6 = (uint)*param_3;
  piVar2 = (int *)(param_1 + 0x18 + ((int)param_2 - *(int *)(param_1 + 0x10) >> 0xc) * 8);
  if (param_4 < uVar6) {
    *param_3 = (byte)param_4;
    *piVar2 = *piVar2 + (uVar6 - param_4);
    piVar2[1] = 0xf1;
  }
  else {
    if (param_4 <= uVar6) {
      return 0;
    }
    pbVar1 = param_3 + param_4;
    if (param_2 + 0x3e < pbVar1) {
      return 0;
    }
    for (pbVar4 = param_3 + uVar6; (pbVar4 < pbVar1 && (*pbVar4 == 0)); pbVar4 = pbVar4 + 1) {
    }
    if (pbVar4 != pbVar1) {
      return 0;
    }
    *param_3 = (byte)param_4;
    if ((param_3 <= (byte *)*param_2) && ((byte *)*param_2 < pbVar1)) {
      if (pbVar1 < param_2 + 0x3e) {
        iVar5 = 0;
        *param_2 = (int)pbVar1;
        bVar3 = *pbVar1;
        while (bVar3 == 0) {
          iVar5 = iVar5 + 1;
          bVar3 = pbVar1[iVar5];
        }
        param_2[1] = iVar5;
      }
      else {
        param_2[1] = 0;
        *param_2 = (int)(param_2 + 2);
      }
    }
    *piVar2 = *piVar2 + (uVar6 - param_4);
  }
  return 1;
}



/* crt_call_new_handler @ 00467e47 */

/* CRT: call new-handler; returns nonzero to retry allocation */

int __cdecl crt_call_new_handler(size_t size)

{
  int iVar1;
  
  if (DAT_004d9a74 != (code *)0x0) {
    iVar1 = (*DAT_004d9a74)(size);
    if (iVar1 != 0) {
      return 1;
    }
  }
  return 0;
}



/* FUN_00467e62 @ 00467e62 */

int __thiscall FUN_00467e62(void *this,int *param_1,byte *param_2,undefined4 *param_3)

{
  byte bVar1;
  undefined4 *puVar2;
  int *piVar3;
  byte bVar4;
  uint uVar5;
  uint uVar6;
  void *this_00;
  int *extraout_ECX;
  int *extraout_ECX_00;
  int *extraout_ECX_01;
  void *this_01;
  int *extraout_ECX_02;
  int *extraout_ECX_03;
  int *piVar7;
  byte bVar8;
  byte *pbVar9;
  byte *pbVar10;
  char *pcVar11;
  char *pcVar12;
  WCHAR *pWVar13;
  undefined *puVar14;
  int iVar15;
  bool bVar16;
  int *piVar17;
  char local_1c8;
  char local_1c7 [351];
  byte local_68 [32];
  undefined4 *local_48;
  WCHAR local_42;
  uint local_40;
  byte local_3c;
  undefined1 local_3b;
  byte local_39;
  int local_38;
  WCHAR *local_34;
  WCHAR *local_30;
  undefined8 local_2c;
  int local_24;
  int local_20;
  byte local_1c;
  char local_1b;
  char local_1a;
  char local_19;
  int *local_18;
  char local_13;
  char local_12;
  char local_11;
  int local_10;
  char local_9;
  undefined *local_8;
  
  local_19 = '\0';
  bVar1 = *param_2;
  local_8 = (undefined *)0x0;
  local_38 = 0;
  pbVar9 = param_2;
  piVar7 = (int *)crt_ctype_table;
  do {
    crt_ctype_table = (undefined *)piVar7;
    if (bVar1 == 0) {
LAB_00468868:
      if (local_18 == (int *)0xffffffff) {
LAB_0046886e:
        if ((local_38 == 0) && (local_19 == '\0')) {
          local_38 = -1;
        }
      }
      return local_38;
    }
    if ((int)DAT_0047b3cc < 2) {
      uVar5 = *(byte *)((int)piVar7 + (uint)bVar1 * 2) & 8;
    }
    else {
      piVar7 = (int *)0x8;
      uVar5 = crt_isctype(this,(uint)bVar1,8);
    }
    if (uVar5 != 0) {
      local_8 = local_8 + -1;
      piVar7 = param_1;
      uVar5 = FUN_004688ef((int *)&local_8,param_1);
      FUN_004688d8(uVar5,piVar7);
      uVar5 = crt_isspace(this_00,(uint)pbVar9[1]);
      piVar7 = extraout_ECX;
      pbVar10 = pbVar9;
      while (pbVar9 = pbVar10 + 1, uVar5 != 0) {
        piVar17 = (int *)(uint)pbVar10[2];
        uVar5 = crt_isspace(piVar7,(int)(uint)pbVar10[2]);
        piVar7 = piVar17;
        pbVar10 = pbVar9;
      }
    }
    if (*pbVar9 == 0x25) {
      local_39 = 0;
      local_1c = 0;
      local_1b = '\0';
      local_12 = '\0';
      local_13 = '\0';
      local_1a = '\0';
      puVar14 = (undefined *)0x0;
      local_9 = '\0';
      local_20 = 0;
      local_24 = 0;
      local_10 = 0;
      local_11 = '\x01';
      local_34 = (WCHAR *)0x0;
      do {
        uVar5 = (uint)pbVar9[1];
        param_2 = pbVar9 + 1;
        if ((int)DAT_0047b3cc < 2) {
          uVar6 = (byte)crt_ctype_table[uVar5 * 2] & 4;
          piVar7 = (int *)crt_ctype_table;
        }
        else {
          piVar17 = (int *)0x4;
          uVar6 = crt_isctype(piVar7,uVar5,4);
          piVar7 = piVar17;
        }
        if (uVar6 == 0) {
          if (uVar5 < 0x4f) {
            if (uVar5 != 0x4e) {
              if (uVar5 == 0x2a) {
                local_12 = local_12 + '\x01';
              }
              else if (uVar5 != 0x46) {
                if (uVar5 == 0x49) {
                  if ((pbVar9[2] != 0x36) || (pbVar9[3] != 0x34)) goto LAB_00467fbd;
                  local_34 = (WCHAR *)((int)local_34 + 1);
                  local_2c = 0;
                  param_2 = pbVar9 + 3;
                }
                else if (uVar5 == 0x4c) {
                  local_11 = local_11 + '\x01';
                }
                else {
LAB_00467fbd:
                  local_13 = local_13 + '\x01';
                }
              }
            }
          }
          else if (uVar5 == 0x68) {
            local_11 = local_11 + -1;
            local_9 = local_9 + -1;
          }
          else {
            if (uVar5 == 0x6c) {
              local_11 = local_11 + '\x01';
            }
            else if (uVar5 != 0x77) goto LAB_00467fbd;
            local_9 = local_9 + '\x01';
          }
        }
        else {
          local_24 = local_24 + 1;
          local_10 = (uVar5 - 0x30) + local_10 * 10;
        }
        pbVar9 = param_2;
      } while (local_13 == '\0');
      puVar2 = param_3;
      if (local_12 == '\0') {
        local_30 = (WCHAR *)*param_3;
        puVar2 = param_3 + 1;
        local_48 = param_3;
      }
      param_3 = puVar2;
      local_13 = '\0';
      if (local_9 == '\0') {
        if ((*param_2 == 0x53) || (*param_2 == 0x43)) {
          local_9 = '\x01';
        }
        else {
          local_9 = -1;
        }
      }
      uVar5 = *param_2 | 0x20;
      local_40 = uVar5;
      if (uVar5 != 0x6e) {
        if ((uVar5 == 99) || (uVar5 == 0x7b)) {
          local_8 = local_8 + 1;
          piVar7 = param_1;
          local_18 = (int *)FUN_004688be(param_1);
        }
        else {
          piVar7 = param_1;
          local_18 = (int *)FUN_004688ef((int *)&local_8,param_1);
        }
      }
      if ((local_24 != 0) && (local_10 == 0)) {
LAB_00468848:
        local_8 = local_8 + -1;
        FUN_004688d8((uint)local_18,param_1);
        goto LAB_00468868;
      }
      if (uVar5 < 0x70) {
        if (uVar5 == 0x6f) {
LAB_00468575:
          if (local_18 == (int *)0x2d) {
            local_1b = '\x01';
          }
          else if (local_18 != (int *)0x2b) goto LAB_004685aa;
          local_10 = local_10 + -1;
          if ((local_10 == 0) && (local_24 != 0)) {
            local_13 = '\x01';
          }
          else {
            local_8 = local_8 + 1;
            piVar7 = param_1;
            local_18 = (int *)FUN_004688be(param_1);
          }
          goto LAB_004685aa;
        }
        if (uVar5 != 99) {
          if (uVar5 == 100) goto LAB_00468575;
          if (uVar5 < 0x65) {
LAB_004682ed:
            if ((int *)(uint)*param_2 != local_18) goto LAB_00468848;
            local_19 = local_19 + -1;
            if (local_12 == '\0') {
              param_3 = local_48;
            }
            goto LAB_004687c9;
          }
          if (0x67 < uVar5) {
            if (uVar5 == 0x69) {
              uVar5 = 100;
              goto LAB_004680ab;
            }
            if (uVar5 != 0x6e) goto LAB_004682ed;
            puVar14 = local_8;
            if (local_12 != '\0') goto LAB_004687c9;
            goto LAB_004687a3;
          }
          pcVar11 = &local_1c8;
          if (local_18 == (int *)0x2d) {
            local_1c8 = '-';
            pcVar11 = local_1c7;
LAB_004680e1:
            local_10 = local_10 + -1;
            local_8 = local_8 + 1;
            piVar7 = param_1;
            local_18 = (int *)FUN_004688be(param_1);
          }
          else if (local_18 == (int *)0x2b) goto LAB_004680e1;
          if ((local_24 == 0) || (0x15d < local_10)) {
            local_10 = 0x15d;
          }
          while( true ) {
            piVar17 = local_18;
            if ((int)DAT_0047b3cc < 2) {
              uVar5 = (byte)crt_ctype_table[(int)local_18 * 2] & 4;
            }
            else {
              uVar5 = crt_isctype(piVar7,(int)local_18,4);
            }
            if ((uVar5 == 0) ||
               (iVar15 = local_10 + -1, bVar16 = local_10 == 0, local_10 = iVar15, bVar16)) break;
            local_20 = local_20 + 1;
            *pcVar11 = (char)piVar17;
            pcVar11 = pcVar11 + 1;
            local_8 = local_8 + 1;
            piVar7 = param_1;
            local_18 = (int *)FUN_004688be(param_1);
          }
          if ((DAT_0047b3d0 == (char)piVar17) &&
             (iVar15 = local_10 + -1, bVar16 = local_10 != 0, local_10 = iVar15, bVar16)) {
            local_8 = local_8 + 1;
            piVar7 = param_1;
            piVar17 = (int *)FUN_004688be(param_1);
            *pcVar11 = DAT_0047b3d0;
            while( true ) {
              pcVar11 = pcVar11 + 1;
              local_18 = piVar17;
              if ((int)DAT_0047b3cc < 2) {
                uVar5 = (byte)crt_ctype_table[(int)piVar17 * 2] & 4;
              }
              else {
                uVar5 = crt_isctype(piVar7,(int)piVar17,4);
              }
              if ((uVar5 == 0) ||
                 (iVar15 = local_10 + -1, bVar16 = local_10 == 0, local_10 = iVar15, bVar16)) break;
              local_20 = local_20 + 1;
              *pcVar11 = (char)piVar17;
              local_8 = local_8 + 1;
              piVar7 = param_1;
              piVar17 = (int *)FUN_004688be(param_1);
            }
          }
          pcVar12 = pcVar11;
          if ((local_20 != 0) &&
             (((piVar17 == (int *)0x65 || (piVar17 == (int *)0x45)) &&
              (iVar15 = local_10 + -1, bVar16 = local_10 != 0, local_10 = iVar15, bVar16)))) {
            *pcVar11 = 'e';
            pcVar12 = pcVar11 + 1;
            local_8 = local_8 + 1;
            piVar7 = param_1;
            piVar17 = (int *)FUN_004688be(param_1);
            local_18 = piVar17;
            if (piVar17 == (int *)0x2d) {
              *pcVar12 = '-';
              pcVar12 = pcVar11 + 2;
LAB_00468208:
              bVar16 = local_10 != 0;
              local_10 = local_10 + -1;
              if (bVar16) goto LAB_00468217;
              local_10 = 0;
            }
            else if (piVar17 == (int *)0x2b) goto LAB_00468208;
            while( true ) {
              if ((int)DAT_0047b3cc < 2) {
                uVar5 = (byte)crt_ctype_table[(int)piVar17 * 2] & 4;
              }
              else {
                uVar5 = crt_isctype(piVar7,(int)piVar17,4);
              }
              if ((uVar5 == 0) ||
                 (iVar15 = local_10 + -1, bVar16 = local_10 == 0, local_10 = iVar15, bVar16)) break;
              local_20 = local_20 + 1;
              *pcVar12 = (char)piVar17;
              pcVar12 = pcVar12 + 1;
LAB_00468217:
              local_8 = local_8 + 1;
              piVar7 = param_1;
              piVar17 = (int *)FUN_004688be(param_1);
              local_18 = piVar17;
            }
          }
          local_8 = local_8 + -1;
          piVar7 = param_1;
          FUN_004688d8((uint)piVar17,param_1);
          if (local_20 != 0) {
            if (local_12 == '\0') {
              local_38 = local_38 + 1;
              *pcVar12 = '\0';
              (*(code *)PTR_FUN_0047b1b0)(local_11 + -1,local_30,&local_1c8);
              piVar7 = extraout_ECX_00;
            }
            goto LAB_004687c9;
          }
          goto LAB_00468868;
        }
        if (local_24 == 0) {
          local_10 = local_10 + 1;
          local_24 = 1;
        }
        if ('\0' < local_9) {
          local_1a = '\x01';
        }
        pcVar11 = &DAT_0047db20;
LAB_004683ce:
        local_1c = 0xff;
        pbVar9 = (byte *)pcVar11;
        pbVar10 = param_2;
LAB_004683d2:
        param_2 = pbVar10;
        _memset(local_68,0,0x20);
        if ((local_40 == 0x7b) && (*pbVar9 == 0x5d)) {
          uVar5 = 0x5d;
          local_68[0xb] = 0x20;
          pbVar9 = pbVar9 + 1;
        }
        else {
          uVar5 = (uint)local_39;
        }
        while (pWVar13 = local_30, bVar1 = *pbVar9, bVar1 != 0x5d) {
          if (((bVar1 == 0x2d) && (bVar8 = (byte)uVar5, bVar8 != 0)) &&
             (bVar4 = pbVar9[1], bVar4 != 0x5d)) {
            if (bVar4 <= bVar8) {
              uVar5 = (uint)bVar4;
              bVar4 = bVar8;
            }
            if ((byte)uVar5 <= bVar4) {
              iVar15 = (bVar4 - uVar5) + 1;
              do {
                local_68[uVar5 >> 3] = local_68[uVar5 >> 3] | '\x01' << ((byte)uVar5 & 7);
                uVar5 = uVar5 + 1;
                iVar15 = iVar15 + -1;
              } while (iVar15 != 0);
            }
            uVar5 = 0;
            pbVar9 = pbVar9 + 2;
          }
          else {
            uVar5 = (uint)bVar1;
            local_68[bVar1 >> 3] = local_68[bVar1 >> 3] | '\x01' << (bVar1 & 7);
            pbVar9 = pbVar9 + 1;
          }
        }
        if (*pbVar9 == 0) goto LAB_00468868;
        if (local_40 == 0x7b) {
          param_2 = pbVar9;
        }
        local_8 = local_8 + -1;
        local_34 = local_30;
        piVar7 = param_1;
        FUN_004688d8((uint)local_18,param_1);
        while( true ) {
          if ((local_24 != 0) &&
             (iVar15 = local_10 + -1, bVar16 = local_10 == 0, local_10 = iVar15, bVar16))
          goto LAB_00468537;
          local_8 = local_8 + 1;
          local_18 = (int *)FUN_004688be(param_1);
          if (local_18 == (int *)0xffffffff) break;
          bVar1 = (byte)local_18;
          piVar7 = (int *)(int)(char)(local_68[(int)local_18 >> 3] ^ local_1c);
          if (((uint)piVar7 & 1 << (bVar1 & 7)) == 0) break;
          if (local_12 == '\0') {
            if (local_1a == '\0') {
              *(byte *)pWVar13 = bVar1;
              pWVar13 = (WCHAR *)((int)pWVar13 + 1);
              local_30 = pWVar13;
            }
            else {
              local_3c = bVar1;
              if ((crt_ctype_table[((uint)local_18 & 0xff) * 2 + 1] & 0x80) != 0) {
                local_8 = local_8 + 1;
                uVar5 = FUN_004688be(param_1);
                local_3b = (undefined1)uVar5;
              }
              FUN_0046cfeb(&local_42,&local_3c,DAT_0047b3cc);
              *pWVar13 = local_42;
              pWVar13 = pWVar13 + 1;
              piVar7 = extraout_ECX_01;
              local_30 = pWVar13;
            }
          }
          else {
            local_34 = (WCHAR *)((int)local_34 + 1);
          }
        }
        local_8 = local_8 + -1;
        piVar7 = param_1;
        FUN_004688d8((uint)local_18,param_1);
LAB_00468537:
        if (local_34 == pWVar13) goto LAB_00468868;
        if ((local_12 == '\0') && (local_38 = local_38 + 1, local_40 != 99)) {
          if (local_1a == '\0') {
            *(byte *)local_30 = 0;
          }
          else {
            *local_30 = L'\0';
          }
        }
      }
      else {
        if (uVar5 == 0x70) {
          local_11 = '\x01';
          goto LAB_00468575;
        }
        if (uVar5 == 0x73) {
          if ('\0' < local_9) {
            local_1a = '\x01';
          }
          pcVar11 = s_____0047db18;
          goto LAB_004683ce;
        }
        if (uVar5 == 0x75) goto LAB_00468575;
        if (uVar5 != 0x78) {
          if (uVar5 != 0x7b) goto LAB_004682ed;
          if ('\0' < local_9) {
            local_1a = '\x01';
          }
          pbVar9 = param_2 + 1;
          pbVar10 = pbVar9;
          if (*pbVar9 == 0x5e) {
            pcVar11 = (char *)(param_2 + 2);
            param_2 = pbVar9;
            goto LAB_004683ce;
          }
          goto LAB_004683d2;
        }
LAB_004680ab:
        if (local_18 == (int *)0x2d) {
          local_1b = '\x01';
LAB_0046833a:
          local_10 = local_10 + -1;
          if ((local_10 == 0) && (local_24 != 0)) {
            local_13 = '\x01';
          }
          else {
            local_8 = local_8 + 1;
            piVar7 = param_1;
            local_18 = (int *)FUN_004688be(param_1);
          }
        }
        else if (local_18 == (int *)0x2b) goto LAB_0046833a;
        if (local_18 == (int *)0x30) {
          local_8 = local_8 + 1;
          piVar7 = param_1;
          local_18 = (int *)FUN_004688be(param_1);
          if (((char)local_18 == 'x') || ((char)local_18 == 'X')) {
            local_8 = local_8 + 1;
            piVar7 = param_1;
            local_18 = (int *)FUN_004688be(param_1);
            uVar5 = 0x78;
          }
          else {
            local_20 = 1;
            if (uVar5 == 0x78) {
              local_8 = local_8 + -1;
              piVar7 = param_1;
              FUN_004688d8((uint)local_18,param_1);
              local_18 = (int *)0x30;
            }
            else {
              uVar5 = 0x6f;
            }
          }
        }
LAB_004685aa:
        if (local_34 == (WCHAR *)0x0) {
          if (local_13 == '\0') {
            while ((piVar17 = local_18, uVar5 != 0x78 && (uVar5 != 0x70))) {
              if ((int)DAT_0047b3cc < 2) {
                uVar6 = (byte)crt_ctype_table[(int)local_18 * 2] & 4;
              }
              else {
                piVar3 = (int *)0x4;
                uVar6 = crt_isctype(piVar7,(int)local_18,4);
                piVar7 = piVar3;
              }
              if (uVar6 == 0) goto LAB_00468771;
              if (uVar5 == 0x6f) {
                if (0x37 < (int)piVar17) goto LAB_00468771;
                iVar15 = (int)puVar14 << 3;
              }
              else {
                iVar15 = (int)puVar14 * 10;
              }
LAB_00468749:
              local_20 = local_20 + 1;
              puVar14 = (undefined *)(iVar15 + -0x30 + (int)piVar17);
              if ((local_24 != 0) && (local_10 = local_10 + -1, local_10 == 0)) goto LAB_0046877f;
              local_8 = local_8 + 1;
              piVar7 = param_1;
              local_18 = (int *)FUN_004688be(param_1);
            }
            if ((int)DAT_0047b3cc < 2) {
              uVar6 = (byte)crt_ctype_table[(int)local_18 * 2] & 0x80;
            }
            else {
              piVar3 = (int *)0x80;
              uVar6 = crt_isctype(piVar7,(int)local_18,0x80);
              piVar7 = piVar3;
            }
            if (uVar6 != 0) {
              iVar15 = (int)puVar14 << 4;
              piVar3 = piVar17;
              piVar17 = (int *)FUN_00468887(piVar7,(uint)piVar17);
              piVar7 = piVar3;
              local_18 = piVar17;
              goto LAB_00468749;
            }
LAB_00468771:
            local_8 = local_8 + -1;
            piVar7 = param_1;
            FUN_004688d8((uint)piVar17,param_1);
          }
LAB_0046877f:
          if (local_1b != '\0') {
            puVar14 = (undefined *)-(int)puVar14;
          }
        }
        else {
          if (local_13 == '\0') {
            while (piVar17 = local_18, uVar5 != 0x78) {
              if ((int)DAT_0047b3cc < 2) {
                uVar6 = (byte)crt_ctype_table[(int)local_18 * 2] & 4;
              }
              else {
                uVar6 = crt_isctype(piVar7,(int)local_18,4);
              }
              if (uVar6 == 0) goto LAB_00468693;
              if (uVar5 == 0x6f) {
                if (0x37 < (int)piVar17) goto LAB_00468693;
                local_2c = __allshl(3,(int)local_2c._4_4_);
                piVar7 = extraout_ECX_02;
              }
              else {
                local_2c = __allmul((uint)local_2c,(int)local_2c._4_4_,10,0);
                piVar7 = extraout_ECX_03;
              }
LAB_00468665:
              local_20 = local_20 + 1;
              piVar17 = piVar17 + -0xc;
              local_2c = CONCAT44((int)local_2c._4_4_ + ((int)piVar17 >> 0x1f) +
                                  (uint)CARRY4((uint)local_2c,(uint)piVar17),
                                  (undefined *)((uint)local_2c + (int)piVar17));
              if ((local_24 != 0) && (local_10 = local_10 + -1, local_10 == 0)) goto LAB_004686a1;
              local_8 = local_8 + 1;
              piVar7 = param_1;
              local_18 = (int *)FUN_004688be(param_1);
            }
            if ((int)DAT_0047b3cc < 2) {
              uVar6 = (byte)crt_ctype_table[(int)local_18 * 2] & 0x80;
            }
            else {
              uVar6 = crt_isctype(piVar7,(int)local_18,0x80);
            }
            if (uVar6 != 0) {
              local_2c = __allshl(4,(int)local_2c._4_4_);
              piVar7 = piVar17;
              piVar17 = (int *)FUN_00468887(this_01,(uint)piVar17);
              local_18 = piVar17;
              goto LAB_00468665;
            }
LAB_00468693:
            local_8 = local_8 + -1;
            piVar7 = param_1;
            FUN_004688d8((uint)piVar17,param_1);
          }
LAB_004686a1:
          if (local_1b != '\0') {
            piVar7 = (int *)-((int)local_2c._4_4_ + (uint)((uint)local_2c != 0));
            local_2c = CONCAT44(piVar7,-(uint)local_2c);
          }
        }
        if (uVar5 == 0x46) {
          local_20 = 0;
        }
        if (local_20 == 0) goto LAB_00468868;
        if (local_12 == '\0') {
          local_38 = local_38 + 1;
LAB_004687a3:
          if (local_34 == (WCHAR *)0x0) {
            if (local_11 == '\0') {
              *local_30 = (WCHAR)puVar14;
            }
            else {
              *(undefined **)local_30 = puVar14;
            }
          }
          else {
            *(uint *)local_30 = (uint)local_2c;
            *(int **)(local_30 + 2) = local_2c._4_4_;
            piVar7 = local_2c._4_4_;
          }
        }
      }
LAB_004687c9:
      local_19 = local_19 + '\x01';
      param_2 = param_2 + 1;
      this = piVar7;
    }
    else {
      local_8 = local_8 + 1;
      piVar7 = (int *)FUN_004688be(param_1);
      param_2 = pbVar9 + 1;
      local_18 = piVar7;
      if ((int *)(uint)*pbVar9 != piVar7) goto LAB_00468848;
      this = crt_ctype_table;
      if ((crt_ctype_table[((uint)piVar7 & 0xff) * 2 + 1] & 0x80) != 0) {
        local_8 = local_8 + 1;
        piVar17 = (int *)FUN_004688be(param_1);
        this = (void *)(uint)*param_2;
        param_2 = pbVar9 + 2;
        if (this != piVar17) {
          local_8 = local_8 + -1;
          FUN_004688d8((uint)piVar17,param_1);
          local_8 = local_8 + -1;
          FUN_004688d8((uint)piVar7,param_1);
          goto LAB_00468868;
        }
        local_8 = local_8 + -1;
      }
    }
    if ((local_18 == (int *)0xffffffff) && ((*param_2 != 0x25 || (param_2[1] != 0x6e))))
    goto LAB_0046886e;
    bVar1 = *param_2;
    pbVar9 = param_2;
    piVar7 = (int *)crt_ctype_table;
  } while( true );
}



/* FUN_00468887 @ 00468887 */

uint __thiscall FUN_00468887(void *this,uint param_1)

{
  uint uVar1;
  
  if (DAT_0047b3cc < 2) {
    uVar1 = (byte)crt_ctype_table[param_1 * 2] & 4;
  }
  else {
    uVar1 = crt_isctype(this,param_1,4);
  }
  if (uVar1 == 0) {
    param_1 = (param_1 & 0xffffffdf) - 7;
  }
  return param_1;
}



/* FUN_004688be @ 004688be */

uint __cdecl FUN_004688be(undefined4 *param_1)

{
  int *piVar1;
  byte bVar2;
  uint uVar3;
  
  piVar1 = param_1 + 1;
  *piVar1 = *piVar1 + -1;
  if (-1 < *piVar1) {
    bVar2 = *(byte *)*param_1;
    *param_1 = (byte *)*param_1 + 1;
    return (uint)bVar2;
  }
  uVar3 = crt_filbuf((FILE *)param_1);
  return uVar3;
}



/* FUN_004688d8 @ 004688d8 */

void __cdecl FUN_004688d8(uint param_1,int *param_2)

{
  if (param_1 != 0xffffffff) {
    FUN_0046d13f(param_1,param_2);
  }
  return;
}



/* FUN_004688ef @ 004688ef */

uint __cdecl FUN_004688ef(int *param_1,undefined4 *param_2)

{
  uint c;
  uint uVar1;
  void *this;
  
  do {
    *param_1 = *param_1 + 1;
    c = FUN_004688be(param_2);
    uVar1 = crt_isspace(this,c);
  } while (uVar1 != 0);
  return c;
}



/* crt_skip_program_name @ 00468913 */

/* returns command line tail after argv[0] */

uchar * crt_skip_program_name(void)

{
  byte bVar1;
  int iVar2;
  byte *pbVar3;
  byte *pbVar4;
  
  if (DAT_004db4ec == 0) {
    FUN_0046d5c7();
  }
  bVar1 = *DAT_004db4e4;
  pbVar4 = DAT_004db4e4;
  if (bVar1 == 0x22) {
    while( true ) {
      pbVar3 = pbVar4;
      bVar1 = pbVar3[1];
      pbVar4 = pbVar3 + 1;
      if ((bVar1 == 0x22) || (bVar1 == 0)) break;
      iVar2 = FUN_0046d1ad(bVar1);
      if (iVar2 != 0) {
        pbVar4 = pbVar3 + 2;
      }
    }
    if (*pbVar4 == 0x22) goto LAB_00468950;
  }
  else {
    while (0x20 < bVar1) {
      bVar1 = pbVar4[1];
      pbVar4 = pbVar4 + 1;
    }
  }
  for (; (*pbVar4 != 0 && (*pbVar4 < 0x21)); pbVar4 = pbVar4 + 1) {
LAB_00468950:
  }
  return pbVar4;
}



/* crt_build_environ @ 0046896b */

/* builds environ array from environment block */

void crt_build_environ(void)

{
  char cVar1;
  size_t sVar2;
  undefined4 *puVar3;
  void *pvVar4;
  int iVar5;
  char *pcVar6;
  
  if (DAT_004db4ec == 0) {
    FUN_0046d5c7();
  }
  iVar5 = 0;
  for (pcVar6 = DAT_004d99c4; *pcVar6 != '\0'; pcVar6 = pcVar6 + sVar2 + 1) {
    if (*pcVar6 != '=') {
      iVar5 = iVar5 + 1;
    }
    sVar2 = _strlen(pcVar6);
  }
  puVar3 = _malloc(iVar5 * 4 + 4);
  DAT_004d99a0 = puVar3;
  if (puVar3 == (undefined4 *)0x0) {
    __amsg_exit(9);
  }
  cVar1 = *DAT_004d99c4;
  pcVar6 = DAT_004d99c4;
  while (cVar1 != '\0') {
    sVar2 = _strlen(pcVar6);
    if (*pcVar6 != '=') {
      pvVar4 = _malloc(sVar2 + 1);
      *puVar3 = pvVar4;
      if (pvVar4 == (void *)0x0) {
        __amsg_exit(9);
      }
      crt_strcpy((char *)*puVar3,pcVar6);
      puVar3 = puVar3 + 1;
    }
    pcVar6 = pcVar6 + sVar2 + 1;
    cVar1 = *pcVar6;
  }
  crt_free_base(DAT_004d99c4);
  DAT_004d99c4 = (char *)0x0;
  *puVar3 = 0;
  DAT_004db4e8 = 1;
  return;
}



/* crt_build_argv @ 00468a24 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* parses command line into argv/argc */

void crt_build_argv(void)

{
  undefined4 *puVar1;
  byte *pbVar2;
  int local_c;
  int local_8;
  
  if (DAT_004db4ec == 0) {
    FUN_0046d5c7();
  }
  GetModuleFileNameA((HMODULE)0x0,&DAT_004d9a7c,0x104);
  _DAT_004d99b0 = &DAT_004d9a7c;
  pbVar2 = &DAT_004d9a7c;
  if (*DAT_004db4e4 != 0) {
    pbVar2 = DAT_004db4e4;
  }
  crt_parse_cmdline(pbVar2,(undefined4 *)0x0,(byte *)0x0,&local_8,&local_c);
  puVar1 = _malloc(local_c + local_8 * 4);
  if (puVar1 == (undefined4 *)0x0) {
    __amsg_exit(8);
  }
  crt_parse_cmdline(pbVar2,puVar1,(byte *)(puVar1 + local_8),&local_8,&local_c);
  _DAT_004d9998 = puVar1;
  _DAT_004d9994 = local_8 + -1;
  return;
}



/* crt_parse_cmdline @ 00468abd */

/* low-level argv parser for command line */

void __cdecl
crt_parse_cmdline(byte *param_1,undefined4 *param_2,byte *param_3,int *param_4,int *param_5)

{
  byte bVar1;
  bool bVar2;
  bool bVar3;
  byte *pbVar4;
  byte *pbVar5;
  uint uVar6;
  undefined4 *puVar7;
  
  *param_5 = 0;
  *param_4 = 1;
  if (param_2 != (undefined4 *)0x0) {
    *param_2 = param_3;
    param_2 = param_2 + 1;
  }
  if (*param_1 == 0x22) {
    while( true ) {
      bVar1 = param_1[1];
      pbVar4 = param_1 + 1;
      if ((bVar1 == 0x22) || (bVar1 == 0)) break;
      if (((*(byte *)((int)&DAT_004da280 + bVar1 + 1) & 4) != 0) &&
         (*param_5 = *param_5 + 1, param_3 != (byte *)0x0)) {
        *param_3 = *pbVar4;
        param_3 = param_3 + 1;
        pbVar4 = param_1 + 2;
      }
      *param_5 = *param_5 + 1;
      param_1 = pbVar4;
      if (param_3 != (byte *)0x0) {
        *param_3 = *pbVar4;
        param_3 = param_3 + 1;
      }
    }
    *param_5 = *param_5 + 1;
    if (param_3 != (byte *)0x0) {
      *param_3 = 0;
      param_3 = param_3 + 1;
    }
    if (*pbVar4 == 0x22) {
      pbVar4 = param_1 + 2;
    }
  }
  else {
    do {
      *param_5 = *param_5 + 1;
      if (param_3 != (byte *)0x0) {
        *param_3 = *param_1;
        param_3 = param_3 + 1;
      }
      bVar1 = *param_1;
      pbVar4 = param_1 + 1;
      if ((*(byte *)((int)&DAT_004da280 + bVar1 + 1) & 4) != 0) {
        *param_5 = *param_5 + 1;
        if (param_3 != (byte *)0x0) {
          *param_3 = *pbVar4;
          param_3 = param_3 + 1;
        }
        pbVar4 = param_1 + 2;
      }
      if (bVar1 == 0x20) break;
      if (bVar1 == 0) goto LAB_00468b68;
      param_1 = pbVar4;
    } while (bVar1 != 9);
    if (bVar1 == 0) {
LAB_00468b68:
      pbVar4 = pbVar4 + -1;
    }
    else if (param_3 != (byte *)0x0) {
      param_3[-1] = 0;
    }
  }
  bVar2 = false;
  puVar7 = param_2;
  while (*pbVar4 != 0) {
    for (; (*pbVar4 == 0x20 || (*pbVar4 == 9)); pbVar4 = pbVar4 + 1) {
    }
    if (*pbVar4 == 0) break;
    if (puVar7 != (undefined4 *)0x0) {
      *puVar7 = param_3;
      puVar7 = puVar7 + 1;
      param_2 = puVar7;
    }
    *param_4 = *param_4 + 1;
    while( true ) {
      bVar3 = true;
      uVar6 = 0;
      for (; *pbVar4 == 0x5c; pbVar4 = pbVar4 + 1) {
        uVar6 = uVar6 + 1;
      }
      if (*pbVar4 == 0x22) {
        pbVar5 = pbVar4;
        if ((uVar6 & 1) == 0) {
          if ((!bVar2) || (pbVar5 = pbVar4 + 1, pbVar4[1] != 0x22)) {
            bVar3 = false;
            pbVar5 = pbVar4;
          }
          bVar2 = !bVar2;
          puVar7 = param_2;
        }
        uVar6 = uVar6 >> 1;
        pbVar4 = pbVar5;
      }
      for (; uVar6 != 0; uVar6 = uVar6 - 1) {
        if (param_3 != (byte *)0x0) {
          *param_3 = 0x5c;
          param_3 = param_3 + 1;
        }
        *param_5 = *param_5 + 1;
      }
      bVar1 = *pbVar4;
      if ((bVar1 == 0) || ((!bVar2 && ((bVar1 == 0x20 || (bVar1 == 9)))))) break;
      if (bVar3) {
        if (param_3 == (byte *)0x0) {
          if ((*(byte *)((int)&DAT_004da280 + bVar1 + 1) & 4) != 0) {
            pbVar4 = pbVar4 + 1;
            *param_5 = *param_5 + 1;
          }
        }
        else {
          if ((*(byte *)((int)&DAT_004da280 + bVar1 + 1) & 4) != 0) {
            *param_3 = bVar1;
            param_3 = param_3 + 1;
            pbVar4 = pbVar4 + 1;
            *param_5 = *param_5 + 1;
          }
          *param_3 = *pbVar4;
          param_3 = param_3 + 1;
        }
        *param_5 = *param_5 + 1;
      }
      pbVar4 = pbVar4 + 1;
    }
    if (param_3 != (byte *)0x0) {
      *param_3 = 0;
      param_3 = param_3 + 1;
    }
    *param_5 = *param_5 + 1;
  }
  if (puVar7 != (undefined4 *)0x0) {
    *puVar7 = 0;
  }
  *param_4 = *param_4 + 1;
  return;
}



/* crt_get_environment_strings @ 00468c71 */

/* returns a malloc'd copy of the environment block */

char * crt_get_environment_strings(void)

{
  char cVar1;
  WCHAR WVar2;
  WCHAR *pWVar3;
  WCHAR *pWVar4;
  int iVar5;
  size_t _Size;
  LPSTR lpMultiByteStr;
  char *pcVar6;
  char *pcVar7;
  LPWCH lpWideCharStr;
  LPCH penv;
  LPSTR local_8;
  
  lpWideCharStr = (LPWCH)0x0;
  penv = (LPCH)0x0;
  if (DAT_004d9b80 == 0) {
    lpWideCharStr = GetEnvironmentStringsW();
    if (lpWideCharStr != (LPWCH)0x0) {
      DAT_004d9b80 = 1;
LAB_00468cc8:
      if ((lpWideCharStr == (LPWCH)0x0) &&
         (lpWideCharStr = GetEnvironmentStringsW(), lpWideCharStr == (LPWCH)0x0)) {
        return (char *)0x0;
      }
      WVar2 = *lpWideCharStr;
      pWVar4 = lpWideCharStr;
      while (WVar2 != L'\0') {
        do {
          pWVar3 = pWVar4;
          pWVar4 = pWVar3 + 1;
        } while (*pWVar4 != L'\0');
        pWVar4 = pWVar3 + 2;
        WVar2 = *pWVar4;
      }
      iVar5 = ((int)pWVar4 - (int)lpWideCharStr >> 1) + 1;
      _Size = WideCharToMultiByte(0,0,lpWideCharStr,iVar5,(LPSTR)0x0,0,(LPCCH)0x0,(LPBOOL)0x0);
      local_8 = (LPSTR)0x0;
      if (((_Size != 0) && (lpMultiByteStr = _malloc(_Size), lpMultiByteStr != (LPSTR)0x0)) &&
         (iVar5 = WideCharToMultiByte(0,0,lpWideCharStr,iVar5,lpMultiByteStr,_Size,(LPCCH)0x0,
                                      (LPBOOL)0x0), local_8 = lpMultiByteStr, iVar5 == 0)) {
        crt_free_base(lpMultiByteStr);
        local_8 = (LPSTR)0x0;
      }
      FreeEnvironmentStringsW(lpWideCharStr);
      return local_8;
    }
    penv = GetEnvironmentStrings();
    if (penv == (LPCH)0x0) {
      return (char *)0x0;
    }
    DAT_004d9b80 = 2;
  }
  else {
    if (DAT_004d9b80 == 1) goto LAB_00468cc8;
    if (DAT_004d9b80 != 2) {
      return (char *)0x0;
    }
  }
  if ((penv == (LPCH)0x0) && (penv = GetEnvironmentStrings(), penv == (LPCH)0x0)) {
    return (char *)0x0;
  }
  cVar1 = *penv;
  pcVar6 = penv;
  while (cVar1 != '\0') {
    do {
      pcVar7 = pcVar6;
      pcVar6 = pcVar7 + 1;
    } while (*pcVar6 != '\0');
    pcVar6 = pcVar7 + 2;
    cVar1 = *pcVar6;
  }
  pcVar7 = _malloc((size_t)(pcVar6 + (1 - (int)penv)));
  if (pcVar7 == (char *)0x0) {
    pcVar7 = (char *)0x0;
  }
  else {
    crt_bufcpy(pcVar7,penv,(size_t)(pcVar6 + (1 - (int)penv)));
  }
  FreeEnvironmentStringsA(penv);
  return pcVar7;
}



/* crt_runtime_error_banner @ 00468da3 */

/* runtime error prolog/epilog around report */

void crt_runtime_error_banner(void)

{
  if ((DAT_004d99cc == 1) || ((DAT_004d99cc == 0 && (DAT_0047b184 == 1)))) {
    crt_report_runtime_error(0xfc);
    if (DAT_004d9b84 != (code *)0x0) {
      (*DAT_004d9b84)();
    }
    crt_report_runtime_error(0xff);
  }
  return;
}



/* crt_report_runtime_error @ 00468ddc */

/* formats and displays CRT runtime errors */

void __cdecl crt_report_runtime_error(DWORD param_1)

{
  undefined4 *puVar1;
  DWORD *pDVar2;
  DWORD DVar3;
  size_t sVar4;
  HANDLE hFile;
  int iVar5;
  CHAR *_Dest;
  char acStackY_1e3 [7];
  LPCVOID lpBuffer;
  LPOVERLAPPED lpOverlapped;
  CHAR local_1a8 [260];
  char local_a4 [160];
  
  iVar5 = 0;
  pDVar2 = &DAT_0047db28;
  do {
    if (param_1 == *pDVar2) break;
    pDVar2 = pDVar2 + 2;
    iVar5 = iVar5 + 1;
  } while (pDVar2 < &DAT_0047dbb8);
  if (param_1 == (&DAT_0047db28)[iVar5 * 2]) {
    if ((DAT_004d99cc == 1) || ((DAT_004d99cc == 0 && (DAT_0047b184 == 1)))) {
      pDVar2 = &param_1;
      puVar1 = (undefined4 *)(iVar5 * 8 + 0x47db2c);
      lpOverlapped = (LPOVERLAPPED)0x0;
      sVar4 = _strlen((char *)*puVar1);
      lpBuffer = (LPCVOID)*puVar1;
      hFile = GetStdHandle(0xfffffff4);
      WriteFile(hFile,lpBuffer,sVar4,pDVar2,lpOverlapped);
    }
    else if (param_1 != 0xfc) {
      DVar3 = GetModuleFileNameA((HMODULE)0x0,local_1a8,0x104);
      if (DVar3 == 0) {
        crt_strcpy(local_1a8,"<program name unknown>");
      }
      _Dest = local_1a8;
      sVar4 = _strlen(local_1a8);
      if (0x3c < sVar4 + 1) {
        sVar4 = _strlen(local_1a8);
        _Dest = acStackY_1e3 + sVar4;
        _strncpy(_Dest,"...",3);
      }
      crt_strcpy(local_a4,"Runtime Error!\n\nProgram: ");
      crt_strcat(local_a4,_Dest);
      crt_strcat(local_a4,"\n\n");
      crt_strcat(local_a4,*(char **)(iVar5 * 8 + 0x47db2c));
      acStackY_1e3[3] = '\0';
      acStackY_1e3[4] = -0x71;
      acStackY_1e3[5] = 'F';
      acStackY_1e3[6] = '\0';
      FUN_0046d5e3(local_a4,"Microsoft Visual C++ Runtime Library",0x12010);
    }
  }
  return;
}



/* FUN_00468f2f @ 00468f2f */

float10 __cdecl FUN_00468f2f(undefined8 param_1,short param_2)

{
  undefined8 local_c;
  
  local_c = (double)CONCAT26((param_2 + 0x3fe) * 0x10 | param_1._6_2_ & 0x800f,(int6)param_1);
  return (float10)local_c;
}



/* FUN_00468f58 @ 00468f58 */

undefined4 __cdecl FUN_00468f58(int param_1,uint param_2)

{
  undefined4 uStack_8;
  
  if (param_2 == 0x7ff00000) {
    if (param_1 == 0) {
      return 1;
    }
  }
  else if ((param_2 == 0xfff00000) && (param_1 == 0)) {
    return 2;
  }
  if ((param_2._2_2_ & 0x7ff8) == 0x7ff8) {
    uStack_8 = 3;
  }
  else {
    if (((param_2._2_2_ & 0x7ff8) != 0x7ff0) || (((param_2 & 0x7ffff) == 0 && (param_1 == 0)))) {
      return 0;
    }
    uStack_8 = 4;
  }
  return uStack_8;
}



/* FUN_00468fb2 @ 00468fb2 */

float10 __cdecl FUN_00468fb2(uint param_1,uint param_2,int *param_3)

{
  ushort uVar1;
  int iVar2;
  bool bVar3;
  int iVar4;
  float10 fVar5;
  undefined8 local_c;
  
  if ((double)CONCAT17(param_2._3_1_,CONCAT16(param_2._2_1_,CONCAT24((ushort)param_2,param_1))) ==
      0.0) {
    iVar4 = 0;
    local_c = 0.0;
  }
  else if (((param_2 & 0x7ff00000) == 0) && (((param_2 & 0xfffff) != 0 || (param_1 != 0)))) {
    iVar4 = -0x3fd;
    if (0.0 <= (double)CONCAT17(param_2._3_1_,
                                CONCAT16(param_2._2_1_,CONCAT24((ushort)param_2,param_1)))) {
      bVar3 = false;
    }
    else {
      bVar3 = true;
    }
    while ((param_2._2_1_ & 0x10) == 0) {
      iVar2 = CONCAT13(param_2._3_1_,CONCAT12(param_2._2_1_,(ushort)param_2)) << 1;
      param_2._0_2_ = (ushort)iVar2;
      param_2._2_1_ = (byte)((uint)iVar2 >> 0x10);
      param_2._3_1_ = (byte)((uint)iVar2 >> 0x18);
      if ((param_1 & 0x80000000) != 0) {
        param_2._0_2_ = (ushort)param_2 | 1;
      }
      param_1 = param_1 << 1;
      iVar4 = iVar4 + -1;
    }
    uVar1 = CONCAT11(param_2._3_1_,param_2._2_1_) & 0xffef;
    param_2._2_1_ = (byte)uVar1;
    param_2._3_1_ = (byte)(uVar1 >> 8);
    if (bVar3) {
      param_2._3_1_ = param_2._3_1_ | 0x80;
    }
    fVar5 = FUN_00468f2f(CONCAT17(param_2._3_1_,
                                  CONCAT16(param_2._2_1_,CONCAT24((ushort)param_2,param_1))),0);
    local_c = (double)fVar5;
  }
  else {
    fVar5 = FUN_00468f2f(CONCAT17(param_2._3_1_,
                                  CONCAT16(param_2._2_1_,CONCAT24((ushort)param_2,param_1))),0);
    local_c = (double)fVar5;
    iVar4 = (short)((ushort)(param_2 >> 0x14) & 0x7ff) + -0x3fe;
  }
  *param_3 = iVar4;
  return (float10)local_c;
}



/* FUN_00469073 @ 00469073 */

void __cdecl
FUN_00469073(uint *param_1,uint *param_2,uint param_3,uint param_4,undefined8 *param_5,
            undefined8 *param_6)

{
  uint *puVar1;
  undefined8 *puVar2;
  uint uVar3;
  
  uVar3 = param_3;
  puVar1 = param_2;
  param_1[1] = 0;
  param_1[2] = 0;
  param_1[3] = 0;
  if ((param_3 & 0x10) != 0) {
    param_3 = 0xc000008f;
    param_1[1] = param_1[1] | 1;
  }
  if ((uVar3 & 2) != 0) {
    param_3 = 0xc0000093;
    param_1[1] = param_1[1] | 2;
  }
  if ((uVar3 & 1) != 0) {
    param_3 = 0xc0000091;
    param_1[1] = param_1[1] | 4;
  }
  if ((uVar3 & 4) != 0) {
    param_3 = 0xc000008e;
    param_1[1] = param_1[1] | 8;
  }
  if ((uVar3 & 8) != 0) {
    param_3 = 0xc0000090;
    param_1[1] = param_1[1] | 0x10;
  }
  param_1[2] = (~*param_2 & 1) << 4 | param_1[2] & 0xffffffef;
  param_1[2] = (~*param_2 & 4) << 1 | param_1[2] & 0xfffffff7;
  param_1[2] = ~*param_2 >> 1 & 4 | param_1[2] & 0xfffffffb;
  param_1[2] = ~*param_2 >> 3 & 2 | param_1[2] & 0xfffffffd;
  param_1[2] = ~*param_2 >> 5 & 1 | param_1[2] & 0xfffffffe;
  uVar3 = FUN_00469565();
  puVar2 = param_6;
  if ((uVar3 & 1) != 0) {
    param_1[3] = param_1[3] | 0x10;
  }
  if ((uVar3 & 4) != 0) {
    param_1[3] = param_1[3] | 8;
  }
  if ((uVar3 & 8) != 0) {
    param_1[3] = param_1[3] | 4;
  }
  if ((uVar3 & 0x10) != 0) {
    param_1[3] = param_1[3] | 2;
  }
  if ((uVar3 & 0x20) != 0) {
    param_1[3] = param_1[3] | 1;
  }
  uVar3 = *puVar1 & 0xc00;
  if (uVar3 == 0) {
    *param_1 = *param_1 & 0xfffffffc;
  }
  else {
    if (uVar3 == 0x400) {
      uVar3 = *param_1 & 0xfffffffd | 1;
    }
    else {
      if (uVar3 != 0x800) {
        if (uVar3 == 0xc00) {
          *param_1 = *param_1 | 3;
        }
        goto LAB_004691e8;
      }
      uVar3 = *param_1 & 0xfffffffe | 2;
    }
    *param_1 = uVar3;
  }
LAB_004691e8:
  uVar3 = *puVar1 & 0x300;
  if (uVar3 == 0) {
    uVar3 = *param_1 & 0xffffffeb | 8;
LAB_0046921e:
    *param_1 = uVar3;
  }
  else {
    if (uVar3 == 0x200) {
      uVar3 = *param_1 & 0xffffffe7 | 4;
      goto LAB_0046921e;
    }
    if (uVar3 == 0x300) {
      *param_1 = *param_1 & 0xffffffe3;
    }
  }
  *param_1 = (param_4 & 0xfff) << 5 | *param_1 & 0xfffe001f;
  param_1[8] = param_1[8] | 1;
  param_1[8] = param_1[8] & 0xffffffe3 | 2;
  *(undefined8 *)(param_1 + 4) = *param_5;
  param_1[0x14] = param_1[0x14] | 1;
  param_1[0x14] = param_1[0x14] & 0xffffffe3 | 2;
  *(undefined8 *)(param_1 + 0x10) = *param_6;
  FUN_00469573();
  RaiseException(param_3,0,1,(ULONG_PTR *)&param_1);
  if ((param_1[2] & 0x10) != 0) {
    *puVar1 = *puVar1 & 0xfffffffe;
  }
  if ((param_1[2] & 8) != 0) {
    *puVar1 = *puVar1 & 0xfffffffb;
  }
  if ((param_1[2] & 4) != 0) {
    *puVar1 = *puVar1 & 0xfffffff7;
  }
  if ((param_1[2] & 2) != 0) {
    *puVar1 = *puVar1 & 0xffffffef;
  }
  if ((param_1[2] & 1) != 0) {
    *puVar1 = *puVar1 & 0xffffffdf;
  }
  uVar3 = *param_1 & 3;
  if (uVar3 == 0) {
    *puVar1 = *puVar1 & 0xfffff3ff;
  }
  else {
    if (uVar3 == 1) {
      uVar3 = *puVar1 & 0xfffff7ff | 0x400;
    }
    else {
      if (uVar3 != 2) {
        if (uVar3 == 3) {
          *(byte *)((int)puVar1 + 1) = *(byte *)((int)puVar1 + 1) | 0xc;
        }
        goto LAB_004692f3;
      }
      uVar3 = *puVar1 & 0xfffffbff | 0x800;
    }
    *puVar1 = uVar3;
  }
LAB_004692f3:
  uVar3 = *param_1 >> 2 & 7;
  if (uVar3 == 0) {
    uVar3 = *puVar1 & 0xfffff3ff | 0x300;
  }
  else {
    if (uVar3 != 1) {
      if (uVar3 == 2) {
        *puVar1 = *puVar1 & 0xfffff3ff;
      }
      goto LAB_0046931c;
    }
    uVar3 = *puVar1 & 0xfffff3ff | 0x200;
  }
  *puVar1 = uVar3;
LAB_0046931c:
  *puVar2 = *(undefined8 *)(param_1 + 0x10);
  return;
}



/* FUN_00469326 @ 00469326 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

bool __cdecl FUN_00469326(uint param_1,double *param_2,uint param_3)

{
  double dVar1;
  bool bVar2;
  uint uVar3;
  bool bVar4;
  float10 fVar5;
  undefined8 local_10;
  int local_8;
  
  uVar3 = param_1 & 0x1f;
  bVar2 = true;
  if (((param_1 & 8) != 0) && ((param_3 & 1) != 0)) {
    FUN_004695a5();
    uVar3 = param_1 & 0x17;
    goto LAB_0046951b;
  }
  if (((param_1 & 4) != 0) && ((param_3 & 4) != 0)) {
    FUN_004695a5();
    uVar3 = param_1 & 0x1b;
    goto LAB_0046951b;
  }
  if (((param_1 & 1) == 0) || ((param_3 & 8) == 0)) {
    if (((param_1 & 2) != 0) && ((param_3 & 0x10) != 0)) {
      bVar4 = (param_1 & 0x10) != 0;
      dVar1 = *param_2;
      if (dVar1 != 0.0) {
        fVar5 = FUN_00468fb2(SUB84(dVar1,0),(uint)((ulonglong)dVar1 >> 0x20),&local_8);
        local_8 = local_8 + -0x600;
        if (local_8 < -0x432) {
          local_10 = 0.0;
          bVar4 = bVar2;
        }
        else {
          local_10 = (double)(ulonglong)
                             (SUB87((double)fVar5,0) & 0xfffffffffffff | 0x10000000000000);
          if (local_8 < -0x3fd) {
            local_8 = -0x3fd - local_8;
            do {
              if ((((ulonglong)local_10 & 1) != 0) && (!bVar4)) {
                bVar4 = bVar2;
              }
              uVar3 = (uint)local_10 >> 1;
              if (((ulonglong)local_10 & 0x100000000) != 0) {
                local_10._3_1_ = (byte)((ulonglong)local_10 >> 0x18) >> 1;
                local_10._0_3_ = (undefined3)uVar3;
                local_10._0_4_ = CONCAT13(local_10._3_1_,(undefined3)local_10) | 0x80000000;
                uVar3 = (uint)local_10;
              }
              local_10._0_4_ = uVar3;
              local_10 = (double)CONCAT44(local_10._4_4_ >> 1,(uint)local_10);
              local_8 = local_8 + -1;
            } while (local_8 != 0);
          }
          if ((double)fVar5 < 0.0) {
            local_10 = -local_10;
          }
        }
        *param_2 = local_10;
        bVar2 = bVar4;
      }
      if (bVar2) {
        FUN_004695a5();
      }
      uVar3 = param_1 & 0x1d;
    }
    goto LAB_0046951b;
  }
  FUN_004695a5();
  uVar3 = param_3 & 0xc00;
  dVar1 = _DAT_0047dbb8;
  if (uVar3 == 0) {
    if (*param_2 <= 0.0) {
      dVar1 = -_DAT_0047dbb8;
    }
LAB_0046943b:
    *param_2 = dVar1;
  }
  else {
    if (uVar3 == 0x400) {
      dVar1 = _DAT_0047dbc8;
      if (*param_2 <= 0.0) {
        dVar1 = -_DAT_0047dbb8;
      }
      goto LAB_0046943b;
    }
    if (uVar3 == 0x800) {
      if (*param_2 <= 0.0) {
        dVar1 = -_DAT_0047dbc8;
      }
      goto LAB_0046943b;
    }
    if (uVar3 == 0xc00) {
      dVar1 = _DAT_0047dbc8;
      if (*param_2 <= 0.0) {
        dVar1 = -_DAT_0047dbc8;
      }
      goto LAB_0046943b;
    }
  }
  uVar3 = param_1 & 0x1e;
LAB_0046951b:
  if (((param_1 & 0x10) != 0) && ((param_3 & 0x20) != 0)) {
    FUN_004695a5();
    uVar3 = uVar3 & 0xffffffef;
  }
  return uVar3 == 0;
}



/* FUN_0046953d @ 0046953d */

void __cdecl FUN_0046953d(int param_1)

{
  int *piVar1;
  
  if (param_1 == 1) {
    piVar1 = crt_errno_ptr();
    *piVar1 = 0x21;
  }
  else if ((1 < param_1) && (param_1 < 4)) {
    piVar1 = crt_errno_ptr();
    *piVar1 = 0x22;
    return;
  }
  return;
}



/* FUN_00469565 @ 00469565 */

int FUN_00469565(void)

{
  short in_FPUStatusWord;
  
  return (int)in_FPUStatusWord;
}



/* FUN_00469573 @ 00469573 */

int FUN_00469573(void)

{
  short in_FPUStatusWord;
  
  return (int)in_FPUStatusWord;
}



/* FUN_00469582 @ 00469582 */

int FUN_00469582(void)

{
  short in_FPUControlWord;
  
  return (int)in_FPUControlWord;
}



/* FUN_004695a5 @ 004695a5 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_004695a5(void)

{
  return;
}



/* FUN_004695fb @ 004695fb */

undefined4 __cdecl
FUN_004695fb(PEXCEPTION_RECORD param_1,PVOID param_2,DWORD param_3,undefined4 param_4,int *param_5,
            int param_6,PVOID param_7,char param_8)

{
  code *pcVar1;
  undefined4 uVar2;
  
  if (*param_5 != 0x19930520) {
    FUN_00465fa9();
  }
  if ((param_1->ExceptionFlags & 0x66) == 0) {
    if (param_5[3] != 0) {
      if (((param_1->ExceptionCode == 0xe06d7363) && (0x19930520 < param_1->ExceptionInformation[0])
          ) && (pcVar1 = *(code **)(param_1->ExceptionInformation[2] + 8), pcVar1 != (code *)0x0)) {
        uVar2 = (*pcVar1)(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
        return uVar2;
      }
      FUN_00469696(param_1,param_2,param_3,param_4,(int)param_5,param_8,param_6,param_7);
    }
  }
  else if ((param_5[1] != 0) && (param_6 == 0)) {
    FUN_00469950((int)param_2,param_4,(int)param_5,-1);
  }
  return 1;
}



/* FUN_00469696 @ 00469696 */

void __cdecl
FUN_00469696(PEXCEPTION_RECORD param_1,PVOID param_2,DWORD param_3,undefined4 param_4,int param_5,
            char param_6,int param_7,PVOID param_8)

{
  byte *pbVar1;
  bool bVar2;
  DWORD *pDVar3;
  undefined3 extraout_var;
  int *piVar4;
  int iVar5;
  int *piVar6;
  uint local_1c;
  uint local_18;
  int local_14;
  int local_10;
  int local_c;
  uint local_8;
  
  local_18 = local_18 & 0xffffff00;
  local_14 = *(int *)((int)param_2 + 8);
  if ((local_14 < -1) || (*(int *)(param_5 + 4) <= local_14)) {
    FUN_00465fa9();
  }
  if (param_1->ExceptionCode == 0xe06d7363) {
    if (((param_1->NumberParameters == 3) && (param_1->ExceptionInformation[0] == 0x19930520)) &&
       (param_1->ExceptionInformation[2] == 0)) {
      pDVar3 = crt_get_thread_data();
      if (pDVar3[0x1b] == 0) {
        return;
      }
      pDVar3 = crt_get_thread_data();
      param_1 = (PEXCEPTION_RECORD)pDVar3[0x1b];
      pDVar3 = crt_get_thread_data();
      param_3 = pDVar3[0x1c];
      local_18 = CONCAT31(local_18._1_3_,1);
      bVar2 = FUN_0046d6d3(param_1,1);
      if (CONCAT31(extraout_var,bVar2) == 0) {
        FUN_00465fa9();
      }
      if (param_1->ExceptionCode != 0xe06d7363) goto LAB_0046981e;
      if (((param_1->NumberParameters == 3) && (param_1->ExceptionInformation[0] == 0x19930520)) &&
         (param_1->ExceptionInformation[2] == 0)) {
        FUN_00465fa9();
      }
    }
    iVar5 = local_14;
    if (((param_1->ExceptionCode == 0xe06d7363) && (param_1->NumberParameters == 3)) &&
       (param_1->ExceptionInformation[0] == 0x19930520)) {
      piVar4 = (int *)FUN_0046355c(param_5,param_7,local_14,&local_8,&local_1c);
      do {
        if (local_1c <= local_8) {
          if (param_6 == '\0') {
            return;
          }
          FUN_00469d72((int)param_1);
          return;
        }
        if ((*piVar4 <= iVar5) && (iVar5 <= piVar4[1])) {
          pbVar1 = (byte *)piVar4[4];
          for (local_10 = piVar4[3]; iVar5 = local_14, 0 < local_10; local_10 = local_10 + -1) {
            piVar6 = *(int **)(param_1->ExceptionInformation[2] + 0xc);
            for (local_c = *piVar6; 0 < local_c; local_c = local_c + -1) {
              piVar6 = piVar6 + 1;
              iVar5 = FUN_004698f3(pbVar1,(byte *)*piVar6,(uint *)param_1->ExceptionInformation[2]);
              if (iVar5 != 0) {
                FUN_004699ee(param_1,param_2,param_3,param_4,param_5,pbVar1,(byte *)*piVar6,piVar4,
                             param_7,param_8);
                iVar5 = local_14;
                goto LAB_004697fe;
              }
            }
            pbVar1 = pbVar1 + 0x10;
          }
        }
LAB_004697fe:
        local_8 = local_8 + 1;
        piVar4 = piVar4 + 5;
      } while( true );
    }
  }
LAB_0046981e:
  if (param_6 == '\0') {
    FUN_00469849(param_1,param_2,param_3,param_4,param_5,local_14,param_7,param_8);
    return;
  }
  FUN_00465f48();
  return;
}



/* FUN_00469849 @ 00469849 */

void __cdecl
FUN_00469849(PEXCEPTION_RECORD param_1,PVOID param_2,DWORD param_3,undefined4 param_4,int param_5,
            int param_6,int param_7,PVOID param_8)

{
  DWORD *pDVar1;
  int iVar2;
  int *piVar3;
  int iVar4;
  uint local_c;
  uint local_8;
  
  pDVar1 = crt_get_thread_data();
  if ((pDVar1[0x1a] != 0) &&
     (iVar2 = FUN_00463431(&param_1->ExceptionCode,param_2,param_3,param_4,param_5,param_7,param_8),
     iVar2 != 0)) {
    return;
  }
  piVar3 = (int *)FUN_0046355c(param_5,param_7,param_6,&local_8,&local_c);
  for (; local_8 < local_c; local_8 = local_8 + 1) {
    if ((*piVar3 <= param_6) && (param_6 <= piVar3[1])) {
      iVar4 = piVar3[3] * 0x10 + piVar3[4];
      iVar2 = *(int *)(iVar4 + -0xc);
      if ((iVar2 == 0) || (*(char *)(iVar2 + 8) == '\0')) {
        FUN_004699ee(param_1,param_2,param_3,param_4,param_5,(byte *)(iVar4 + -0x10),(byte *)0x0,
                     piVar3,param_7,param_8);
      }
    }
    piVar3 = piVar3 + 5;
  }
  return;
}



/* FUN_004698f3 @ 004698f3 */

undefined4 __cdecl FUN_004698f3(byte *param_1,byte *param_2,uint *param_3)

{
  int iVar1;
  undefined4 uVar2;
  
  iVar1 = *(int *)(param_1 + 4);
  if ((iVar1 == 0) || (*(char *)(iVar1 + 8) == '\0')) {
LAB_0046994a:
    uVar2 = 1;
  }
  else {
    if (iVar1 == *(int *)(param_2 + 4)) {
LAB_00469924:
      if (((((*param_2 & 2) == 0) || ((*param_1 & 8) != 0)) &&
          (((*param_3 & 1) == 0 || ((*param_1 & 1) != 0)))) &&
         (((*param_3 & 2) == 0 || ((*param_1 & 2) != 0)))) goto LAB_0046994a;
    }
    else {
      iVar1 = _strcmp((char *)(iVar1 + 8),(char *)(*(int *)(param_2 + 4) + 8));
      if (iVar1 == 0) goto LAB_00469924;
    }
    uVar2 = 0;
  }
  return uVar2;
}



/* FUN_00469950 @ 00469950 */

void __cdecl FUN_00469950(int param_1,undefined4 param_2,int param_3,int param_4)

{
  int iVar1;
  int iVar2;
  void *local_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  puStack_c = &DAT_0046ffd0;
  puStack_10 = &LAB_00465e70;
  local_14 = ExceptionList;
  ExceptionList = &local_14;
  for (iVar2 = *(int *)(param_1 + 8); local_8 = 0xffffffff, iVar2 != param_4;
      iVar2 = *(int *)(*(int *)(param_3 + 8) + iVar2 * 8)) {
    if ((iVar2 < 0) || (*(int *)(param_3 + 4) <= iVar2)) {
      FUN_00465fa9();
    }
    local_8 = 0;
    iVar1 = *(int *)(*(int *)(param_3 + 8) + 4 + iVar2 * 8);
    if (iVar1 != 0) {
      __CallSettingFrame_12(iVar1,param_1,0x103);
    }
  }
  *(int *)(param_1 + 8) = iVar2;
  ExceptionList = local_14;
  return;
}



/* FUN_004699ee @ 004699ee */

void __cdecl
FUN_004699ee(PEXCEPTION_RECORD param_1,PVOID param_2,DWORD param_3,undefined4 param_4,int param_5,
            byte *param_6,byte *param_7,int *param_8,int param_9,PVOID param_10)

{
  undefined *UNRECOVERED_JUMPTABLE;
  
  if (param_7 != (byte *)0x0) {
    FUN_00469bae((int)param_1,(int)param_2,param_6,param_7);
  }
  if (param_10 == (PVOID)0x0) {
    param_10 = param_2;
  }
  FUN_00463333(param_10,param_1);
  FUN_00469950((int)param_2,param_4,param_5,*param_8);
  *(int *)((int)param_2 + 8) = param_8[1] + 1;
  UNRECOVERED_JUMPTABLE =
       (undefined *)
       FUN_00469a69((DWORD)param_1,param_2,param_3,param_5,*(undefined4 *)(param_6 + 0xc),param_9,
                    0x100);
  if (UNRECOVERED_JUMPTABLE != (undefined *)0x0) {
    FUN_004632f1(UNRECOVERED_JUMPTABLE);
  }
  return;
}



/* FUN_00469a69 @ 00469a69 */

undefined4 __cdecl
FUN_00469a69(DWORD param_1,undefined4 param_2,DWORD param_3,undefined4 param_4,undefined4 param_5,
            int param_6,int param_7)

{
  DWORD *pDVar1;
  undefined4 uVar2;
  void *local_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_0046ffe0;
  puStack_10 = &LAB_00465e70;
  local_14 = ExceptionList;
  ExceptionList = &local_14;
  crt_get_thread_data();
  crt_get_thread_data();
  pDVar1 = crt_get_thread_data();
  pDVar1[0x1b] = param_1;
  pDVar1 = crt_get_thread_data();
  pDVar1[0x1c] = param_3;
  local_8 = 1;
  uVar2 = FUN_004633b8(param_2,param_4,param_5,param_6,param_7);
  local_8 = 0xffffffff;
  FUN_00469b36();
  ExceptionList = local_14;
  return uVar2;
}



/* FUN_00469b36 @ 00469b36 */

void FUN_00469b36(void)

{
  DWORD *pDVar1;
  int unaff_EBP;
  int unaff_ESI;
  int *unaff_EDI;
  
  *(undefined4 *)(unaff_ESI + -4) = *(undefined4 *)(unaff_EBP + -0x28);
  pDVar1 = crt_get_thread_data();
  pDVar1[0x1b] = *(DWORD *)(unaff_EBP + -0x1c);
  pDVar1 = crt_get_thread_data();
  pDVar1[0x1c] = *(DWORD *)(unaff_EBP + -0x20);
  if ((((*unaff_EDI == -0x1f928c9d) && (unaff_EDI[4] == 3)) && (unaff_EDI[5] == 0x19930520)) &&
     ((*(int *)(unaff_EBP + -0x24) == 0 && (*(int *)(unaff_EBP + -0x2c) != 0)))) {
    __abnormal_termination();
    FUN_00469d72((int)unaff_EDI);
  }
  return;
}



/* FUN_00469bae @ 00469bae */

void __cdecl FUN_00469bae(int param_1,int param_2,byte *param_3,byte *param_4)

{
  int *dst;
  bool bVar1;
  undefined3 extraout_var;
  undefined3 extraout_var_00;
  int iVar2;
  undefined3 extraout_var_01;
  undefined3 extraout_var_02;
  undefined3 extraout_var_03;
  undefined3 extraout_var_04;
  void *src;
  undefined3 extraout_var_05;
  undefined3 extraout_var_06;
  undefined3 extraout_var_07;
  size_t size;
  void *local_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  puStack_c = &DAT_0046fff8;
  puStack_10 = &LAB_00465e70;
  local_14 = ExceptionList;
  if (*(int *)(param_3 + 4) == 0) {
    return;
  }
  if (*(char *)(*(int *)(param_3 + 4) + 8) == '\0') {
    return;
  }
  if (*(int *)(param_3 + 8) == 0) {
    return;
  }
  dst = (int *)(*(int *)(param_3 + 8) + 0xc + param_2);
  local_8 = 0;
  if ((*param_3 & 8) == 0) {
    if ((*param_4 & 1) == 0) {
      if (*(int *)(param_4 + 0x18) == 0) {
        ExceptionList = &local_14;
        bVar1 = FUN_0046d6d3(*(void **)(param_1 + 0x18),1);
        if ((CONCAT31(extraout_var_03,bVar1) != 0) &&
           (bVar1 = FUN_0046d6ef(dst,1), CONCAT31(extraout_var_04,bVar1) != 0)) {
          size = *(size_t *)(param_4 + 0x14);
          src = (void *)FUN_00469dd9(*(int *)(param_1 + 0x18),(int *)(param_4 + 8));
          crt_memmove(dst,src,size);
          ExceptionList = local_14;
          return;
        }
      }
      else {
        ExceptionList = &local_14;
        bVar1 = FUN_0046d6d3(*(void **)(param_1 + 0x18),1);
        if (((CONCAT31(extraout_var_05,bVar1) != 0) &&
            (bVar1 = FUN_0046d6ef(dst,1), CONCAT31(extraout_var_06,bVar1) != 0)) &&
           (bVar1 = FUN_0046d70b(*(FARPROC *)(param_4 + 0x18)), CONCAT31(extraout_var_07,bVar1) != 0
           )) {
          if ((*param_4 & 4) != 0) {
            FUN_00469dd9(*(int *)(param_1 + 0x18),(int *)(param_4 + 8));
            FUN_0046332c(dst,*(undefined **)(param_4 + 0x18));
            ExceptionList = local_14;
            return;
          }
          FUN_00469dd9(*(int *)(param_1 + 0x18),(int *)(param_4 + 8));
          FUN_00463325(dst,*(undefined **)(param_4 + 0x18));
          ExceptionList = local_14;
          return;
        }
      }
    }
    else {
      ExceptionList = &local_14;
      bVar1 = FUN_0046d6d3(*(void **)(param_1 + 0x18),1);
      if ((CONCAT31(extraout_var_01,bVar1) != 0) &&
         (bVar1 = FUN_0046d6ef(dst,1), CONCAT31(extraout_var_02,bVar1) != 0)) {
        crt_memmove(dst,*(void **)(param_1 + 0x18),*(size_t *)(param_4 + 0x14));
        if (*(int *)(param_4 + 0x14) != 4) {
          ExceptionList = local_14;
          return;
        }
        iVar2 = *dst;
        if (iVar2 == 0) {
          ExceptionList = local_14;
          return;
        }
        goto LAB_00469c3c;
      }
    }
  }
  else {
    ExceptionList = &local_14;
    bVar1 = FUN_0046d6d3(*(void **)(param_1 + 0x18),1);
    if ((CONCAT31(extraout_var,bVar1) != 0) &&
       (bVar1 = FUN_0046d6ef(dst,1), CONCAT31(extraout_var_00,bVar1) != 0)) {
      iVar2 = *(int *)(param_1 + 0x18);
      *dst = iVar2;
LAB_00469c3c:
      iVar2 = FUN_00469dd9(iVar2,(int *)(param_4 + 8));
      *dst = iVar2;
      ExceptionList = local_14;
      return;
    }
  }
  FUN_00465fa9();
  ExceptionList = local_14;
  return;
}



/* FUN_00469d72 @ 00469d72 */

void __cdecl FUN_00469d72(int param_1)

{
  undefined *UNRECOVERED_JUMPTABLE;
  void *local_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  puStack_c = &DAT_00470008;
  puStack_10 = &LAB_00465e70;
  local_14 = ExceptionList;
  if ((param_1 != 0) &&
     (UNRECOVERED_JUMPTABLE = *(undefined **)(*(int *)(param_1 + 0x1c) + 4),
     UNRECOVERED_JUMPTABLE != (undefined *)0x0)) {
    local_8 = 0;
    ExceptionList = &local_14;
    FUN_00463325(*(undefined4 *)(param_1 + 0x18),UNRECOVERED_JUMPTABLE);
  }
  ExceptionList = local_14;
  return;
}



/* FUN_00469dd9 @ 00469dd9 */

int __cdecl FUN_00469dd9(int param_1,int *param_2)

{
  int iVar1;
  int iVar2;
  
  iVar1 = param_2[1];
  iVar2 = *param_2 + param_1;
  if (-1 < iVar1) {
    iVar2 = iVar2 + *(int *)(*(int *)(iVar1 + param_1) + param_2[2]) + iVar1;
  }
  return iVar2;
}



/* __CallSettingFrame@12 @ 00469e00 */

/* WARNING: Restarted to delay deadcode elimination for space: stack */
/* Library Function - Single Match
    __CallSettingFrame@12
   
   Libraries: Visual Studio 2017 Debug, Visual Studio 2017 Release, Visual Studio 2019 Debug, Visual
   Studio 2019 Release */

void __CallSettingFrame_12(undefined4 param_1,undefined4 param_2,int param_3)

{
  code *pcVar1;
  
  pcVar1 = (code *)__NLG_Notify1(param_3);
  (*pcVar1)();
  if (param_3 == 0x100) {
    param_3 = 2;
  }
  __NLG_Notify1(param_3);
  return;
}



/* FUN_00469e4c @ 00469e4c */

uint __thiscall FUN_00469e4c(void *this,uint param_1,uint param_2)

{
  uint uVar1;
  undefined2 in_FPUControlWord;
  undefined4 local_8;
  
  local_8 = CONCAT22((short)((uint)this >> 0x10),in_FPUControlWord);
  uVar1 = FUN_00469e97(local_8);
  uVar1 = uVar1 & ~param_2 | param_1 & param_2;
  FUN_00469f29(uVar1);
  return uVar1;
}



/* FUN_00469e81 @ 00469e81 */

void __thiscall FUN_00469e81(void *this,uint param_1,uint param_2)

{
  FUN_00469e4c(this,param_1,param_2 & 0xfff7ffff);
  return;
}



/* FUN_00469e97 @ 00469e97 */

uint __cdecl FUN_00469e97(uint param_1)

{
  uint uVar1;
  uint uVar2;
  
  uVar1 = 0;
  if ((param_1 & 1) != 0) {
    uVar1 = 0x10;
  }
  if ((param_1 & 4) != 0) {
    uVar1 = uVar1 | 8;
  }
  if ((param_1 & 8) != 0) {
    uVar1 = uVar1 | 4;
  }
  if ((param_1 & 0x10) != 0) {
    uVar1 = uVar1 | 2;
  }
  if ((param_1 & 0x20) != 0) {
    uVar1 = uVar1 | 1;
  }
  if ((param_1 & 2) != 0) {
    uVar1 = uVar1 | 0x80000;
  }
  uVar2 = param_1 & 0xc00;
  if (uVar2 != 0) {
    if (uVar2 == 0x400) {
      uVar1 = uVar1 | 0x100;
    }
    else if (uVar2 == 0x800) {
      uVar1 = uVar1 | 0x200;
    }
    else if (uVar2 == 0xc00) {
      uVar1 = uVar1 | 0x300;
    }
  }
  if ((param_1 & 0x300) == 0) {
    uVar1 = uVar1 | 0x20000;
  }
  else if ((param_1 & 0x300) == 0x200) {
    uVar1 = uVar1 | 0x10000;
  }
  if ((param_1 & 0x1000) != 0) {
    uVar1 = uVar1 | 0x40000;
  }
  return uVar1;
}



/* FUN_00469f29 @ 00469f29 */

uint __cdecl FUN_00469f29(uint param_1)

{
  uint uVar1;
  uint uVar2;
  
  uVar1 = (uint)((param_1 & 0x10) != 0);
  if ((param_1 & 8) != 0) {
    uVar1 = uVar1 | 4;
  }
  if ((param_1 & 4) != 0) {
    uVar1 = uVar1 | 8;
  }
  if ((param_1 & 2) != 0) {
    uVar1 = uVar1 | 0x10;
  }
  if ((param_1 & 1) != 0) {
    uVar1 = uVar1 | 0x20;
  }
  if ((param_1 & 0x80000) != 0) {
    uVar1 = uVar1 | 2;
  }
  uVar2 = param_1 & 0x300;
  if (uVar2 != 0) {
    if (uVar2 == 0x100) {
      uVar1 = uVar1 | 0x400;
    }
    else if (uVar2 == 0x200) {
      uVar1 = uVar1 | 0x800;
    }
    else if (uVar2 == 0x300) {
      uVar1 = uVar1 | 0xc00;
    }
  }
  if ((param_1 & 0x30000) == 0) {
    uVar1 = uVar1 | 0x300;
  }
  else if ((param_1 & 0x30000) == 0x10000) {
    uVar1 = uVar1 | 0x200;
  }
  if ((param_1 & 0x40000) != 0) {
    uVar1 = uVar1 | 0x1000;
  }
  return uVar1;
}



/* FUN_00469fb2 @ 00469fb2 */

undefined4 __cdecl FUN_00469fb2(int param_1,int param_2)

{
  int *piVar1;
  int iVar2;
  
  if ((*(uint *)(param_1 + (param_2 / 0x20) * 4) & ~(-1 << (0x1fU - (char)(param_2 % 0x20) & 0x1f)))
      != 0) {
    return 0;
  }
  iVar2 = param_2 / 0x20 + 1;
  if (iVar2 < 3) {
    piVar1 = (int *)(param_1 + iVar2 * 4);
    do {
      if (*piVar1 != 0) {
        return 0;
      }
      iVar2 = iVar2 + 1;
      piVar1 = piVar1 + 1;
    } while (iVar2 < 3);
  }
  return 1;
}



/* FUN_00469ffb @ 00469ffb */

void __cdecl FUN_00469ffb(int param_1,int param_2)

{
  int iVar1;
  int iVar2;
  uint *puVar3;
  
  puVar3 = (uint *)(param_1 + (param_2 / 0x20) * 4);
  iVar1 = FUN_0046d8e2(*puVar3,1 << (0x1fU - (char)(param_2 % 0x20) & 0x1f),puVar3);
  iVar2 = param_2 / 0x20 + -1;
  if (-1 < iVar2) {
    puVar3 = (uint *)(param_1 + iVar2 * 4);
    do {
      if (iVar1 == 0) {
        return;
      }
      iVar1 = FUN_0046d8e2(*puVar3,1,puVar3);
      iVar2 = iVar2 + -1;
      puVar3 = puVar3 + -1;
    } while (-1 < iVar2);
  }
  return;
}



/* FUN_0046a051 @ 0046a051 */

undefined4 __cdecl FUN_0046a051(int param_1,int param_2)

{
  uint *puVar1;
  int iVar2;
  byte bVar3;
  int iVar4;
  undefined4 *puVar5;
  undefined4 local_8;
  
  local_8 = 0;
  puVar1 = (uint *)(param_1 + (param_2 / 0x20) * 4);
  bVar3 = 0x1f - (char)(param_2 % 0x20);
  if (((*puVar1 & 1 << (bVar3 & 0x1f)) != 0) &&
     (iVar2 = FUN_00469fb2(param_1,param_2 + 1), iVar2 == 0)) {
    local_8 = FUN_00469ffb(param_1,param_2 + -1);
  }
  *puVar1 = *puVar1 & -1 << (bVar3 & 0x1f);
  iVar2 = param_2 / 0x20 + 1;
  if (iVar2 < 3) {
    puVar5 = (undefined4 *)(param_1 + iVar2 * 4);
    for (iVar4 = 3 - iVar2; iVar4 != 0; iVar4 = iVar4 + -1) {
      *puVar5 = 0;
      puVar5 = puVar5 + 1;
    }
  }
  return local_8;
}



/* FUN_0046a0dd @ 0046a0dd */

void __cdecl FUN_0046a0dd(int param_1,undefined4 *param_2)

{
  int iVar1;
  int iVar2;
  
  iVar1 = param_1 - (int)param_2;
  iVar2 = 3;
  do {
    *(undefined4 *)(iVar1 + (int)param_2) = *param_2;
    param_2 = param_2 + 1;
    iVar2 = iVar2 + -1;
  } while (iVar2 != 0);
  return;
}



/* FUN_0046a0f8 @ 0046a0f8 */

void __cdecl FUN_0046a0f8(undefined4 *param_1)

{
  *param_1 = 0;
  param_1[1] = 0;
  param_1[2] = 0;
  return;
}



/* FUN_0046a104 @ 0046a104 */

undefined4 __cdecl FUN_0046a104(int *param_1)

{
  int iVar1;
  
  iVar1 = 0;
  do {
    if (*param_1 != 0) {
      return 0;
    }
    iVar1 = iVar1 + 1;
    param_1 = param_1 + 1;
  } while (iVar1 < 3);
  return 1;
}



/* FUN_0046a11f @ 0046a11f */

void __cdecl FUN_0046a11f(uint *param_1,uint param_2)

{
  uint uVar1;
  int iVar2;
  byte bVar3;
  int iVar4;
  int iVar5;
  uint *puVar6;
  int local_8;
  
  local_8 = 3;
  iVar2 = (int)param_2 / 0x20;
  iVar5 = (int)param_2 % 0x20;
  param_2 = 0;
  bVar3 = (byte)iVar5;
  puVar6 = param_1;
  do {
    uVar1 = *puVar6;
    *puVar6 = uVar1 >> (bVar3 & 0x1f) | param_2;
    puVar6 = puVar6 + 1;
    param_2 = (uVar1 & ~(-1 << (bVar3 & 0x1f))) << (0x20 - bVar3 & 0x1f);
    local_8 = local_8 + -1;
  } while (local_8 != 0);
  iVar5 = 2;
  iVar4 = 8;
  do {
    if (iVar5 < iVar2) {
      *(undefined4 *)(iVar4 + (int)param_1) = 0;
    }
    else {
      *(undefined4 *)(iVar4 + (int)param_1) = *(undefined4 *)(iVar4 + iVar2 * -4 + (int)param_1);
    }
    iVar5 = iVar5 + -1;
    iVar4 = iVar4 + -4;
  } while (-1 < iVar4);
  return;
}



/* FUN_0046a1ac @ 0046a1ac */

undefined4 __cdecl FUN_0046a1ac(ushort *param_1,uint *param_2,int *param_3)

{
  ushort uVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  undefined4 uVar5;
  undefined4 local_1c [3];
  uint local_10;
  uint local_c;
  int local_8;
  
  uVar1 = param_1[5];
  local_10 = *(uint *)(param_1 + 3);
  local_c = *(uint *)(param_1 + 1);
  uVar3 = uVar1 & 0x7fff;
  iVar4 = uVar3 - 0x3fff;
  local_8 = (uint)*param_1 << 0x10;
  if (iVar4 == -0x3fff) {
    iVar4 = 0;
    iVar2 = FUN_0046a104((int *)&local_10);
    if (iVar2 != 0) {
LAB_0046a2d8:
      uVar5 = 0;
      goto LAB_0046a2da;
    }
    FUN_0046a0f8(&local_10);
  }
  else {
    FUN_0046a0dd((int)local_1c,&local_10);
    iVar2 = FUN_0046a051((int)&local_10,param_3[2]);
    if (iVar2 != 0) {
      iVar4 = uVar3 - 0x3ffe;
    }
    iVar2 = param_3[1];
    if (iVar4 < iVar2 - param_3[2]) {
      FUN_0046a0f8(&local_10);
    }
    else {
      if (iVar2 < iVar4) {
        if (*param_3 <= iVar4) {
          FUN_0046a0f8(&local_10);
          local_10 = local_10 | 0x80000000;
          FUN_0046a11f(&local_10,param_3[3]);
          iVar4 = param_3[5] + *param_3;
          uVar5 = 1;
          goto LAB_0046a2da;
        }
        local_10 = local_10 & 0x7fffffff;
        iVar4 = param_3[5] + iVar4;
        FUN_0046a11f(&local_10,param_3[3]);
        goto LAB_0046a2d8;
      }
      FUN_0046a0dd((int)&local_10,local_1c);
      FUN_0046a11f(&local_10,iVar2 - iVar4);
      FUN_0046a051((int)&local_10,param_3[2]);
      FUN_0046a11f(&local_10,param_3[3] + 1);
    }
  }
  iVar4 = 0;
  uVar5 = 2;
LAB_0046a2da:
  local_10 = iVar4 << (0x1fU - (char)param_3[3] & 0x1f) |
             -(uint)((uVar1 & 0x8000) != 0) & 0x80000000 | local_10;
  if (param_3[4] == 0x40) {
    param_2[1] = local_10;
    *param_2 = local_c;
  }
  else if (param_3[4] == 0x20) {
    *param_2 = local_10;
  }
  return uVar5;
}



/* FUN_0046a318 @ 0046a318 */

void __cdecl FUN_0046a318(ushort *param_1,uint *param_2)

{
  FUN_0046a1ac(param_1,param_2,(int *)&DAT_0047dce0);
  return;
}



/* FUN_0046a32e @ 0046a32e */

void __cdecl FUN_0046a32e(ushort *param_1,uint *param_2)

{
  FUN_0046a1ac(param_1,param_2,(int *)&DAT_0047dcf8);
  return;
}



/* FUN_0046a344 @ 0046a344 */

void __thiscall FUN_0046a344(void *this,uint *param_1,byte *param_2)

{
  ushort local_10 [6];
  
  FUN_0046b265(this,local_10,(int *)&param_2,param_2,0,0,0,0);
  FUN_0046a318(local_10,param_1);
  return;
}



/* FUN_0046a371 @ 0046a371 */

void __thiscall FUN_0046a371(void *this,uint *param_1,byte *param_2)

{
  ushort local_10 [6];
  
  FUN_0046b265(this,local_10,(int *)&param_2,param_2,0,0,0,0);
  FUN_0046a32e(local_10,param_1);
  return;
}



/* FUN_0046a39e @ 0046a39e */

void __cdecl FUN_0046a39e(char *param_1,int param_2,int param_3)

{
  char *_Str;
  char *dst;
  char *pcVar1;
  size_t sVar2;
  char *pcVar3;
  char cVar4;
  
  dst = param_1;
  pcVar3 = *(char **)(param_3 + 0xc);
  _Str = param_1 + 1;
  *param_1 = '0';
  pcVar1 = _Str;
  if (0 < param_2) {
    param_1 = (char *)param_2;
    param_2 = 0;
    do {
      cVar4 = *pcVar3;
      if (cVar4 == '\0') {
        cVar4 = '0';
      }
      else {
        pcVar3 = pcVar3 + 1;
      }
      *pcVar1 = cVar4;
      pcVar1 = pcVar1 + 1;
      param_1 = param_1 + -1;
    } while (param_1 != (char *)0x0);
  }
  *pcVar1 = '\0';
  if ((-1 < param_2) && ('4' < *pcVar3)) {
    while (pcVar1 = pcVar1 + -1, *pcVar1 == '9') {
      *pcVar1 = '0';
    }
    *pcVar1 = *pcVar1 + '\x01';
  }
  if (*dst == '1') {
    *(int *)(param_3 + 4) = *(int *)(param_3 + 4) + 1;
  }
  else {
    sVar2 = _strlen(_Str);
    crt_memmove(dst,_Str,sVar2 + 1);
  }
  return;
}



/* FUN_0046a415 @ 0046a415 */

int * __cdecl FUN_0046a415(undefined4 param_1,undefined4 param_2,int *param_3,uint *param_4)

{
  int *piVar1;
  uint *puVar2;
  int iVar3;
  undefined4 in_stack_ffffffbc;
  undefined2 uVar4;
  short local_2c;
  char local_2a;
  char local_28 [24];
  uint local_10;
  uint uStack_c;
  undefined2 uStack_8;
  
  uVar4 = (undefined2)((uint)in_stack_ffffffbc >> 0x10);
  FUN_0046a471(&local_10,&param_1);
  iVar3 = FUN_0046da83(local_10,uStack_c,CONCAT22(uVar4,uStack_8),0x11,0,&local_2c);
  puVar2 = param_4;
  piVar1 = param_3;
  param_3[2] = iVar3;
  *param_3 = (int)local_2a;
  param_3[1] = (int)local_2c;
  crt_strcpy((char *)param_4,local_28);
  piVar1[3] = (int)puVar2;
  return piVar1;
}



/* FUN_0046a471 @ 0046a471 */

void __cdecl FUN_0046a471(uint *param_1,uint *param_2)

{
  ushort uVar1;
  uint uVar2;
  uint uVar3;
  int iVar4;
  uint local_8;
  
  uVar1 = *(ushort *)((int)param_2 + 6);
  uVar3 = (uVar1 & 0x7ff0) >> 4;
  uVar2 = *param_2;
  local_8 = 0x80000000;
  if (uVar3 == 0) {
    if (((param_2[1] & 0xfffff) == 0) && (uVar2 == 0)) {
      param_1[1] = 0;
      *param_1 = 0;
      *(undefined2 *)(param_1 + 2) = 0;
      return;
    }
    iVar4 = 0x3c01;
    local_8 = 0;
  }
  else if (uVar3 == 0x7ff) {
    iVar4 = 0x7fff;
  }
  else {
    iVar4 = uVar3 + 0x3c00;
  }
  local_8 = uVar2 >> 0x15 | (param_2[1] & 0xfffff) << 0xb | local_8;
  param_1[1] = local_8;
  *param_1 = uVar2 << 0xb;
  while ((local_8 & 0x80000000) == 0) {
    local_8 = *param_1 >> 0x1f | local_8 * 2;
    *param_1 = *param_1 * 2;
    param_1[1] = local_8;
    iVar4 = iVar4 + 0xffff;
  }
  *(ushort *)(param_1 + 2) = uVar1 & 0x8000 | (ushort)iVar4;
  return;
}



/* _memset @ 0046a530 */

/* Library Function - Single Match
    _memset
   
   Libraries: Visual Studio 1998 Debug, Visual Studio 1998 Release */

void * __cdecl _memset(void *_Dst,int _Val,size_t _Size)

{
  uint uVar1;
  uint uVar2;
  size_t sVar3;
  uint *puVar4;
  
  if (_Size == 0) {
    return _Dst;
  }
  uVar1 = _Val & 0xff;
  puVar4 = _Dst;
  if (3 < _Size) {
    uVar2 = -(int)_Dst & 3;
    sVar3 = _Size;
    if (uVar2 != 0) {
      sVar3 = _Size - uVar2;
      do {
        *(undefined1 *)puVar4 = (undefined1)_Val;
        puVar4 = (uint *)((int)puVar4 + 1);
        uVar2 = uVar2 - 1;
      } while (uVar2 != 0);
    }
    uVar1 = uVar1 * 0x1010101;
    _Size = sVar3 & 3;
    uVar2 = sVar3 >> 2;
    if (uVar2 != 0) {
      for (; uVar2 != 0; uVar2 = uVar2 - 1) {
        *puVar4 = uVar1;
        puVar4 = puVar4 + 1;
      }
      if (_Size == 0) {
        return _Dst;
      }
    }
  }
  do {
    *(char *)puVar4 = (char)uVar1;
    puVar4 = (uint *)((int)puVar4 + 1);
    _Size = _Size - 1;
  } while (_Size != 0);
  return _Dst;
}



/* crt_memmove @ 0046a590 */

/* CRT: copy memory with overlap handling */

void * __cdecl crt_memmove(void *dst,void *src,size_t size)

{
  uint uVar1;
  uint uVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  
  if ((src < dst) && (dst < (void *)(size + (int)src))) {
    puVar3 = (undefined4 *)((size - 4) + (int)src);
    puVar4 = (undefined4 *)((size - 4) + (int)dst);
    if (((uint)puVar4 & 3) == 0) {
      uVar1 = size >> 2;
      uVar2 = size & 3;
      if (7 < uVar1) {
        for (; uVar1 != 0; uVar1 = uVar1 - 1) {
          *puVar4 = *puVar3;
          puVar3 = puVar3 + -1;
          puVar4 = puVar4 + -1;
        }
        switch(uVar2) {
        case 0:
          return dst;
        case 2:
          goto switchD_0046a747_caseD_2;
        case 3:
          goto switchD_0046a747_caseD_3;
        }
        goto switchD_0046a747_caseD_1;
      }
    }
    else {
      switch(size) {
      case 0:
        goto switchD_0046a747_caseD_0;
      case 1:
        goto switchD_0046a747_caseD_1;
      case 2:
        goto switchD_0046a747_caseD_2;
      case 3:
        goto switchD_0046a747_caseD_3;
      default:
        uVar1 = size - ((uint)puVar4 & 3);
        switch((uint)puVar4 & 3) {
        case 1:
          uVar2 = uVar1 & 3;
          *(undefined1 *)((int)puVar4 + 3) = *(undefined1 *)((int)puVar3 + 3);
          puVar3 = (undefined4 *)((int)puVar3 + -1);
          uVar1 = uVar1 >> 2;
          puVar4 = (undefined4 *)((int)puVar4 - 1);
          if (7 < uVar1) {
            for (; uVar1 != 0; uVar1 = uVar1 - 1) {
              *puVar4 = *puVar3;
              puVar3 = puVar3 + -1;
              puVar4 = puVar4 + -1;
            }
            switch(uVar2) {
            case 0:
              return dst;
            case 2:
              goto switchD_0046a747_caseD_2;
            case 3:
              goto switchD_0046a747_caseD_3;
            }
            goto switchD_0046a747_caseD_1;
          }
          break;
        case 2:
          uVar2 = uVar1 & 3;
          *(undefined1 *)((int)puVar4 + 3) = *(undefined1 *)((int)puVar3 + 3);
          uVar1 = uVar1 >> 2;
          *(undefined1 *)((int)puVar4 + 2) = *(undefined1 *)((int)puVar3 + 2);
          puVar3 = (undefined4 *)((int)puVar3 + -2);
          puVar4 = (undefined4 *)((int)puVar4 - 2);
          if (7 < uVar1) {
            for (; uVar1 != 0; uVar1 = uVar1 - 1) {
              *puVar4 = *puVar3;
              puVar3 = puVar3 + -1;
              puVar4 = puVar4 + -1;
            }
            switch(uVar2) {
            case 0:
              return dst;
            case 2:
              goto switchD_0046a747_caseD_2;
            case 3:
              goto switchD_0046a747_caseD_3;
            }
            goto switchD_0046a747_caseD_1;
          }
          break;
        case 3:
          uVar2 = uVar1 & 3;
          *(undefined1 *)((int)puVar4 + 3) = *(undefined1 *)((int)puVar3 + 3);
          *(undefined1 *)((int)puVar4 + 2) = *(undefined1 *)((int)puVar3 + 2);
          uVar1 = uVar1 >> 2;
          *(undefined1 *)((int)puVar4 + 1) = *(undefined1 *)((int)puVar3 + 1);
          puVar3 = (undefined4 *)((int)puVar3 + -3);
          puVar4 = (undefined4 *)((int)puVar4 - 3);
          if (7 < uVar1) {
            for (; uVar1 != 0; uVar1 = uVar1 - 1) {
              *puVar4 = *puVar3;
              puVar3 = puVar3 + -1;
              puVar4 = puVar4 + -1;
            }
            switch(uVar2) {
            case 0:
              return dst;
            case 2:
              goto switchD_0046a747_caseD_2;
            case 3:
              goto switchD_0046a747_caseD_3;
            }
            goto switchD_0046a747_caseD_1;
          }
        }
      }
    }
    switch(uVar1) {
    case 7:
      puVar4[7 - uVar1] = puVar3[7 - uVar1];
    case 6:
      puVar4[6 - uVar1] = puVar3[6 - uVar1];
    case 5:
      puVar4[5 - uVar1] = puVar3[5 - uVar1];
    case 4:
      puVar4[4 - uVar1] = puVar3[4 - uVar1];
    case 3:
      puVar4[3 - uVar1] = puVar3[3 - uVar1];
    case 2:
      puVar4[2 - uVar1] = puVar3[2 - uVar1];
    case 1:
      puVar4[1 - uVar1] = puVar3[1 - uVar1];
      puVar3 = puVar3 + -uVar1;
      puVar4 = puVar4 + -uVar1;
    }
    switch(uVar2) {
    case 1:
switchD_0046a747_caseD_1:
      *(undefined1 *)((int)puVar4 + 3) = *(undefined1 *)((int)puVar3 + 3);
      return dst;
    case 2:
switchD_0046a747_caseD_2:
      *(undefined1 *)((int)puVar4 + 3) = *(undefined1 *)((int)puVar3 + 3);
      *(undefined1 *)((int)puVar4 + 2) = *(undefined1 *)((int)puVar3 + 2);
      return dst;
    case 3:
switchD_0046a747_caseD_3:
      *(undefined1 *)((int)puVar4 + 3) = *(undefined1 *)((int)puVar3 + 3);
      *(undefined1 *)((int)puVar4 + 2) = *(undefined1 *)((int)puVar3 + 2);
      *(undefined1 *)((int)puVar4 + 1) = *(undefined1 *)((int)puVar3 + 1);
      return dst;
    }
switchD_0046a747_caseD_0:
    return dst;
  }
  puVar3 = dst;
  if (((uint)dst & 3) == 0) {
    uVar1 = size >> 2;
    uVar2 = size & 3;
    if (7 < uVar1) {
      for (; uVar1 != 0; uVar1 = uVar1 - 1) {
        *puVar3 = *(undefined4 *)src;
        src = (undefined4 *)((int)src + 4);
        puVar3 = puVar3 + 1;
      }
      switch(uVar2) {
      case 0:
        return dst;
      case 2:
        goto switchD_0046a5c5_caseD_2;
      case 3:
        goto switchD_0046a5c5_caseD_3;
      }
      goto switchD_0046a5c5_caseD_1;
    }
  }
  else {
    switch(size) {
    case 0:
      goto switchD_0046a5c5_caseD_0;
    case 1:
      goto switchD_0046a5c5_caseD_1;
    case 2:
      goto switchD_0046a5c5_caseD_2;
    case 3:
      goto switchD_0046a5c5_caseD_3;
    default:
      uVar1 = (size - 4) + ((uint)dst & 3);
      switch((uint)dst & 3) {
      case 1:
        uVar2 = uVar1 & 3;
        *(undefined1 *)dst = *(undefined1 *)src;
        *(undefined1 *)((int)dst + 1) = *(undefined1 *)((int)src + 1);
        uVar1 = uVar1 >> 2;
        *(undefined1 *)((int)dst + 2) = *(undefined1 *)((int)src + 2);
        src = (void *)((int)src + 3);
        puVar3 = (undefined4 *)((int)dst + 3);
        if (7 < uVar1) {
          for (; uVar1 != 0; uVar1 = uVar1 - 1) {
            *puVar3 = *(undefined4 *)src;
            src = (undefined4 *)((int)src + 4);
            puVar3 = puVar3 + 1;
          }
          switch(uVar2) {
          case 0:
            return dst;
          case 2:
            goto switchD_0046a5c5_caseD_2;
          case 3:
            goto switchD_0046a5c5_caseD_3;
          }
          goto switchD_0046a5c5_caseD_1;
        }
        break;
      case 2:
        uVar2 = uVar1 & 3;
        *(undefined1 *)dst = *(undefined1 *)src;
        uVar1 = uVar1 >> 2;
        *(undefined1 *)((int)dst + 1) = *(undefined1 *)((int)src + 1);
        src = (void *)((int)src + 2);
        puVar3 = (undefined4 *)((int)dst + 2);
        if (7 < uVar1) {
          for (; uVar1 != 0; uVar1 = uVar1 - 1) {
            *puVar3 = *(undefined4 *)src;
            src = (undefined4 *)((int)src + 4);
            puVar3 = puVar3 + 1;
          }
          switch(uVar2) {
          case 0:
            return dst;
          case 2:
            goto switchD_0046a5c5_caseD_2;
          case 3:
            goto switchD_0046a5c5_caseD_3;
          }
          goto switchD_0046a5c5_caseD_1;
        }
        break;
      case 3:
        uVar2 = uVar1 & 3;
        *(undefined1 *)dst = *(undefined1 *)src;
        src = (void *)((int)src + 1);
        uVar1 = uVar1 >> 2;
        puVar3 = (undefined4 *)((int)dst + 1);
        if (7 < uVar1) {
          for (; uVar1 != 0; uVar1 = uVar1 - 1) {
            *puVar3 = *(undefined4 *)src;
            src = (undefined4 *)((int)src + 4);
            puVar3 = puVar3 + 1;
          }
          switch(uVar2) {
          case 0:
            return dst;
          case 2:
            goto switchD_0046a5c5_caseD_2;
          case 3:
            goto switchD_0046a5c5_caseD_3;
          }
          goto switchD_0046a5c5_caseD_1;
        }
      }
    }
  }
  switch(uVar1) {
  case 7:
    puVar3[uVar1 - 7] = *(undefined4 *)((int)src + (uVar1 - 7) * 4);
  case 6:
    puVar3[uVar1 - 6] = *(undefined4 *)((int)src + (uVar1 - 6) * 4);
  case 5:
    puVar3[uVar1 - 5] = *(undefined4 *)((int)src + (uVar1 - 5) * 4);
  case 4:
    puVar3[uVar1 - 4] = *(undefined4 *)((int)src + (uVar1 - 4) * 4);
  case 3:
    puVar3[uVar1 - 3] = *(undefined4 *)((int)src + (uVar1 - 3) * 4);
  case 2:
    puVar3[uVar1 - 2] = *(undefined4 *)((int)src + (uVar1 - 2) * 4);
  case 1:
    puVar3[uVar1 - 1] = *(undefined4 *)((int)src + (uVar1 - 1) * 4);
    src = (void *)((int)src + uVar1 * 4);
    puVar3 = puVar3 + uVar1;
  }
  switch(uVar2) {
  case 1:
switchD_0046a5c5_caseD_1:
    *(undefined1 *)puVar3 = *(undefined1 *)src;
    return dst;
  case 2:
switchD_0046a5c5_caseD_2:
    *(undefined1 *)puVar3 = *(undefined1 *)src;
    *(undefined1 *)((int)puVar3 + 1) = *(undefined1 *)((int)src + 1);
    return dst;
  case 3:
switchD_0046a5c5_caseD_3:
    *(undefined1 *)puVar3 = *(undefined1 *)src;
    *(undefined1 *)((int)puVar3 + 1) = *(undefined1 *)((int)src + 1);
    *(undefined1 *)((int)puVar3 + 2) = *(undefined1 *)((int)src + 2);
    return dst;
  }
switchD_0046a5c5_caseD_0:
  return dst;
}



/* FUN_0046a8c5 @ 0046a8c5 */

void FUN_0046a8c5(void)

{
  __amsg_exit(2);
  return;
}



/* FUN_0046a8ce @ 0046a8ce */

BOOL __cdecl
FUN_0046a8ce(DWORD param_1,LPCSTR param_2,int param_3,LPWORD param_4,UINT param_5,LCID param_6,
            int param_7)

{
  undefined1 *puVar1;
  WINBOOL WVar2;
  int iVar3;
  WORD local_20 [2];
  undefined1 *local_1c;
  void *local_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_00470018;
  puStack_10 = &LAB_00465e70;
  local_14 = ExceptionList;
  local_1c = &stack0xffffffc8;
  iVar3 = DAT_004d9b88;
  ExceptionList = &local_14;
  puVar1 = &stack0xffffffc8;
  if (DAT_004d9b88 == 0) {
    ExceptionList = &local_14;
    WVar2 = GetStringTypeW(1,L"",1,local_20);
    iVar3 = 1;
    puVar1 = local_1c;
    if (WVar2 == 0) {
      WVar2 = GetStringTypeA(0,1,&DAT_004ab1a8,1,local_20);
      if (WVar2 == 0) {
        ExceptionList = local_14;
        return 0;
      }
      iVar3 = 2;
      puVar1 = local_1c;
    }
  }
  local_1c = puVar1;
  DAT_004d9b88 = iVar3;
  if (DAT_004d9b88 != 2) {
    if (DAT_004d9b88 == 1) {
      if (param_5 == 0) {
        param_5 = DAT_004d9a5c;
      }
      iVar3 = MultiByteToWideChar(param_5,(-(uint)(param_7 != 0) & 8) + 1,param_2,param_3,
                                  (LPWSTR)0x0,0);
      if (iVar3 != 0) {
        local_8 = 0;
        crt_chkstk();
        local_1c = &stack0xffffffc8;
        _memset(&stack0xffffffc8,0,iVar3 * 2);
        local_8 = 0xffffffff;
        if ((&stack0x00000000 != (undefined1 *)0x38) &&
           (iVar3 = MultiByteToWideChar(param_5,1,param_2,param_3,(LPWSTR)&stack0xffffffc8,iVar3),
           iVar3 != 0)) {
          WVar2 = GetStringTypeW(param_1,(LPCWCH)&stack0xffffffc8,iVar3,param_4);
          ExceptionList = local_14;
          return WVar2;
        }
      }
    }
    ExceptionList = local_14;
    return 0;
  }
  if (param_6 == 0) {
    param_6 = DAT_004d9a4c;
  }
  WVar2 = GetStringTypeA(param_6,param_1,param_2,param_3,param_4);
  ExceptionList = local_14;
  return WVar2;
}



/* FUN_0046aa98 @ 0046aa98 */

uint FUN_0046aa98(void)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  int *piVar3;
  uint fd;
  int local_8;
  int local_4;
  
  fd = 0xffffffff;
  crt_lock(0x12);
  local_8 = 0;
  local_4 = 0;
  piVar3 = &DAT_004da3c0;
  while (puVar2 = (undefined4 *)*piVar3, puVar1 = puVar2, puVar2 != (undefined4 *)0x0) {
    for (; puVar2 < puVar1 + 0x120; puVar2 = puVar2 + 9) {
      if ((*(byte *)(puVar2 + 1) & 1) == 0) {
        if (puVar2[2] == 0) {
          crt_lock(0x11);
          if (puVar2[2] == 0) {
            InitializeCriticalSection((LPCRITICAL_SECTION)(puVar2 + 3));
            puVar2[2] = puVar2[2] + 1;
          }
          crt_unlock(0x11);
        }
        EnterCriticalSection((LPCRITICAL_SECTION)(puVar2 + 3));
        if ((*(byte *)(puVar2 + 1) & 1) == 0) {
          *puVar2 = 0xffffffff;
          fd = ((int)puVar2 - *piVar3) / 0x24 + local_4;
          if (fd != 0xffffffff) goto LAB_0046abaa;
          break;
        }
        LeaveCriticalSection((LPCRITICAL_SECTION)(puVar2 + 3));
      }
      puVar1 = (undefined4 *)*piVar3;
    }
    local_4 = local_4 + 0x20;
    piVar3 = piVar3 + 1;
    local_8 = local_8 + 1;
    if (0x4da4bf < (int)piVar3) goto LAB_0046abaa;
  }
  puVar2 = _malloc(0x480);
  if (puVar2 != (undefined4 *)0x0) {
    DAT_004da4c0 = DAT_004da4c0 + 0x20;
    (&DAT_004da3c0)[local_8] = puVar2;
    puVar1 = puVar2;
    for (; puVar2 < puVar1 + 0x120; puVar2 = puVar2 + 9) {
      *(undefined1 *)(puVar2 + 1) = 0;
      *puVar2 = 0xffffffff;
      puVar2[2] = 0;
      *(undefined1 *)((int)puVar2 + 5) = 10;
      puVar1 = (undefined4 *)(&DAT_004da3c0)[local_8];
    }
    fd = local_8 << 5;
    crt_lock_fh(fd);
  }
LAB_0046abaa:
  crt_unlock(0x12);
  return fd;
}



/* FUN_0046abbb @ 0046abbb */

undefined4 __cdecl FUN_0046abbb(uint param_1,HANDLE param_2)

{
  int *piVar1;
  uint *puVar2;
  int iVar3;
  DWORD nStdHandle;
  
  if (param_1 < DAT_004da4c0) {
    iVar3 = (param_1 & 0x1f) * 0x24;
    if (*(int *)((&DAT_004da3c0)[(int)param_1 >> 5] + iVar3) == -1) {
      if (DAT_0047b184 == 1) {
        if (param_1 == 0) {
          nStdHandle = 0xfffffff6;
        }
        else if (param_1 == 1) {
          nStdHandle = 0xfffffff5;
        }
        else {
          if (param_1 != 2) goto LAB_0046ac14;
          nStdHandle = 0xfffffff4;
        }
        SetStdHandle(nStdHandle,param_2);
      }
LAB_0046ac14:
      *(HANDLE *)((&DAT_004da3c0)[(int)param_1 >> 5] + iVar3) = param_2;
      return 0;
    }
  }
  piVar1 = crt_errno_ptr();
  *piVar1 = 9;
  puVar2 = crt_doserrno_ptr();
  *puVar2 = 0;
  return 0xffffffff;
}



/* FUN_0046ac37 @ 0046ac37 */

undefined4 __cdecl FUN_0046ac37(uint param_1)

{
  int *piVar1;
  uint *puVar2;
  int iVar3;
  DWORD nStdHandle;
  
  if (param_1 < DAT_004da4c0) {
    iVar3 = (param_1 & 0x1f) * 0x24;
    piVar1 = (int *)((&DAT_004da3c0)[(int)param_1 >> 5] + iVar3);
    if (((*(byte *)(piVar1 + 1) & 1) != 0) && (*piVar1 != -1)) {
      if (DAT_0047b184 == 1) {
        if (param_1 == 0) {
          nStdHandle = 0xfffffff6;
        }
        else if (param_1 == 1) {
          nStdHandle = 0xfffffff5;
        }
        else {
          if (param_1 != 2) goto LAB_0046ac93;
          nStdHandle = 0xfffffff4;
        }
        SetStdHandle(nStdHandle,(HANDLE)0x0);
      }
LAB_0046ac93:
      *(undefined4 *)((&DAT_004da3c0)[(int)param_1 >> 5] + iVar3) = 0xffffffff;
      return 0;
    }
  }
  piVar1 = crt_errno_ptr();
  *piVar1 = 9;
  puVar2 = crt_doserrno_ptr();
  *puVar2 = 0;
  return 0xffffffff;
}



/* crt_get_osfhandle @ 0046acb6 */

/* CRT: map file descriptor to OS handle */

void * __cdecl crt_get_osfhandle(int fd)

{
  int *piVar1;
  uint *puVar2;
  
  if (((uint)fd < DAT_004da4c0) &&
     ((*(byte *)((&DAT_004da3c0)[fd >> 5] + 4 + (fd & 0x1fU) * 0x24) & 1) != 0)) {
    return *(void **)((&DAT_004da3c0)[fd >> 5] + (fd & 0x1fU) * 0x24);
  }
  piVar1 = crt_errno_ptr();
  *piVar1 = 9;
  puVar2 = crt_doserrno_ptr();
  *puVar2 = 0;
  return (void *)0xffffffff;
}



/* crt_lock_fh @ 0046acf8 */

/* lock CRT file handle entry */

void __cdecl crt_lock_fh(uint fd)

{
  int iVar1;
  int iVar2;
  
  iVar2 = (fd & 0x1f) * 0x24;
  iVar1 = (&DAT_004da3c0)[(int)fd >> 5] + iVar2;
  if (*(int *)(iVar1 + 8) == 0) {
    crt_lock(0x11);
    if (*(int *)(iVar1 + 8) == 0) {
      InitializeCriticalSection((LPCRITICAL_SECTION)(iVar1 + 0xc));
      *(int *)(iVar1 + 8) = *(int *)(iVar1 + 8) + 1;
    }
    crt_unlock(0x11);
  }
  EnterCriticalSection((LPCRITICAL_SECTION)((&DAT_004da3c0)[(int)fd >> 5] + 0xc + iVar2));
  return;
}



/* crt_unlock_fh @ 0046ad57 */

/* unlock CRT file handle entry */

void __cdecl crt_unlock_fh(uint fd)

{
  LeaveCriticalSection
            ((LPCRITICAL_SECTION)((&DAT_004da3c0)[(int)fd >> 5] + 0xc + (fd & 0x1f) * 0x24));
  return;
}



/* FUN_0046ad79 @ 0046ad79 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __cdecl FUN_0046ad79(undefined4 *param_1)

{
  void *pvVar1;
  
  _DAT_004d99d0 = _DAT_004d99d0 + 1;
  pvVar1 = _malloc(0x1000);
  param_1[2] = pvVar1;
  if (pvVar1 == (void *)0x0) {
    param_1[3] = param_1[3] | 4;
    param_1[2] = param_1 + 5;
    param_1[6] = 2;
  }
  else {
    param_1[3] = param_1[3] | 8;
    param_1[6] = 0x1000;
  }
  param_1[1] = 0;
  *param_1 = param_1[2];
  return;
}



/* crt_sopen @ 0046adbd */

/* CRT: open file with share mode, wraps CreateFile */

int __cdecl crt_sopen(char *filename,int oflag,int shflag,int pmode)

{
  byte *pbVar1;
  uint uVar2;
  uint fd;
  int *piVar3;
  uint *puVar4;
  HANDLE hFile;
  DWORD DVar5;
  int iVar6;
  long lVar7;
  int iVar8;
  bool bVar9;
  _SECURITY_ATTRIBUTES local_20;
  DWORD local_14;
  DWORD local_10;
  DWORD local_c;
  byte local_5;
  
  bVar9 = (oflag & 0x80U) == 0;
  local_20.nLength = 0xc;
  local_20.lpSecurityDescriptor = (LPVOID)0x0;
  if (bVar9) {
    local_5 = 0;
  }
  else {
    local_5 = 0x10;
  }
  local_20.bInheritHandle = (WINBOOL)bVar9;
  if (((oflag & 0x8000U) == 0) && (((oflag & 0x4000U) != 0 || (DAT_004d9cd8 != 0x8000)))) {
    local_5 = local_5 | 0x80;
  }
  uVar2 = oflag & 3;
  if (uVar2 == 0) {
    local_10 = 0x80000000;
  }
  else if (uVar2 == 1) {
    local_10 = 0x40000000;
  }
  else {
    if (uVar2 != 2) goto LAB_0046aec1;
    local_10 = 0xc0000000;
  }
  if (shflag == 0x10) {
    local_14 = 0;
  }
  else if (shflag == 0x20) {
    local_14 = 1;
  }
  else if (shflag == 0x30) {
    local_14 = 2;
  }
  else {
    if (shflag != 0x40) goto LAB_0046aec1;
    local_14 = 3;
  }
  uVar2 = oflag & 0x700;
  if (uVar2 < 0x401) {
    if ((uVar2 == 0x400) || (uVar2 == 0)) {
      local_c = 3;
    }
    else if (uVar2 == 0x100) {
      local_c = 4;
    }
    else {
      if (uVar2 == 0x200) goto LAB_0046aedb;
      if (uVar2 != 0x300) goto LAB_0046aec1;
      local_c = 2;
    }
  }
  else {
    if (uVar2 != 0x500) {
      if (uVar2 == 0x600) {
LAB_0046aedb:
        local_c = 5;
        goto LAB_0046aeeb;
      }
      if (uVar2 != 0x700) {
LAB_0046aec1:
        piVar3 = crt_errno_ptr();
        *piVar3 = 0x16;
        puVar4 = crt_doserrno_ptr();
        *puVar4 = 0;
        return -1;
      }
    }
    local_c = 1;
  }
LAB_0046aeeb:
  uVar2 = 0x80;
  if (((oflag & 0x100U) != 0) && ((~DAT_004d9980 & pmode & 0x80) == 0)) {
    uVar2 = 1;
  }
  if ((oflag & 0x40U) != 0) {
    uVar2 = uVar2 | 0x4000000;
    local_10 = CONCAT13(local_10._3_1_,0x10000);
  }
  if ((oflag & 0x1000U) != 0) {
    uVar2 = uVar2 | 0x100;
  }
  if ((oflag & 0x20U) == 0) {
    if ((oflag & 0x10U) != 0) {
      uVar2 = uVar2 | 0x10000000;
    }
  }
  else {
    uVar2 = uVar2 | 0x8000000;
  }
  fd = FUN_0046aa98();
  if (fd == 0xffffffff) {
    piVar3 = crt_errno_ptr();
    *piVar3 = 0x18;
    puVar4 = crt_doserrno_ptr();
    *puVar4 = 0;
    return -1;
  }
  hFile = CreateFileA(filename,local_10,local_14,&local_20,local_c,uVar2,(HANDLE)0x0);
  if (hFile != (HANDLE)0xffffffff) {
    DVar5 = GetFileType(hFile);
    if (DVar5 != 0) {
      if (DVar5 == 2) {
        local_5 = local_5 | 0x40;
      }
      else if (DVar5 == 3) {
        local_5 = local_5 | 8;
      }
      FUN_0046abbb(fd,hFile);
      iVar8 = (fd & 0x1f) * 0x24;
      filename._3_1_ = local_5 & 0x48;
      *(byte *)((&DAT_004da3c0)[(int)fd >> 5] + 4 + iVar8) = local_5 | 1;
      if ((((local_5 & 0x48) == 0) && ((local_5 & 0x80) != 0)) && ((oflag & 2U) != 0)) {
        local_14 = crt_lseek_nolock(fd,-1,2);
        if (local_14 == 0xffffffff) {
          puVar4 = crt_doserrno_ptr();
          if (*puVar4 == 0x83) goto LAB_0046b065;
        }
        else {
          shflag = shflag & 0xffffff;
          iVar6 = crt_read_nolock(fd,(char *)((int)&shflag + 3),1);
          if ((((iVar6 != 0) || (shflag._3_1_ != '\x1a')) ||
              (iVar6 = crt_chsize(fd,local_14), iVar6 != -1)) &&
             (lVar7 = crt_lseek_nolock(fd,0,0), lVar7 != -1)) goto LAB_0046b065;
        }
        crt_close(fd);
        uVar2 = 0xffffffff;
      }
      else {
LAB_0046b065:
        uVar2 = fd;
        if ((filename._3_1_ == 0) && ((oflag & 8U) != 0)) {
          pbVar1 = (byte *)((&DAT_004da3c0)[(int)fd >> 5] + 4 + iVar8);
          *pbVar1 = *pbVar1 | 0x20;
        }
      }
      goto LAB_0046b07e;
    }
    CloseHandle(hFile);
  }
  DVar5 = GetLastError();
  crt_dosmaperr(DVar5);
  uVar2 = 0xffffffff;
LAB_0046b07e:
  crt_unlock_fh(fd);
  return uVar2;
}



/* FUN_0046b08c @ 0046b08c */

byte __cdecl FUN_0046b08c(uint param_1)

{
  if (DAT_004da4c0 <= param_1) {
    return 0;
  }
  return *(byte *)((&DAT_004da3c0)[(int)param_1 >> 5] + 4 + (param_1 & 0x1f) * 0x24) & 0x40;
}



/* FUN_0046b0b5 @ 0046b0b5 */

int __cdecl FUN_0046b0b5(LPSTR param_1,WCHAR param_2)

{
  int iVar1;
  bool bVar2;
  
  InterlockedIncrement((LONG *)&DAT_004da3b0);
  bVar2 = DAT_004da3ac != 0;
  if (bVar2) {
    InterlockedDecrement((LONG *)&DAT_004da3b0);
    crt_lock(0x13);
  }
  iVar1 = FUN_0046b10e(param_1,param_2);
  if (bVar2) {
    crt_unlock(0x13);
  }
  else {
    InterlockedDecrement((LONG *)&DAT_004da3b0);
  }
  return iVar1;
}



/* FUN_0046b10e @ 0046b10e */

int __cdecl FUN_0046b10e(LPSTR param_1,WCHAR param_2)

{
  LPSTR lpMultiByteStr;
  int iVar1;
  int *piVar2;
  
  lpMultiByteStr = param_1;
  if (param_1 == (LPSTR)0x0) {
    return 0;
  }
  if (DAT_004d9a4c == 0) {
    if ((ushort)param_2 < 0x100) {
      *param_1 = (CHAR)param_2;
      return 1;
    }
  }
  else {
    param_1 = (LPSTR)0x0;
    iVar1 = WideCharToMultiByte(DAT_004d9a5c,0x220,&param_2,1,lpMultiByteStr,DAT_0047b3cc,(LPCCH)0x0
                                ,(LPBOOL)&param_1);
    if ((iVar1 != 0) && (param_1 == (LPSTR)0x0)) {
      return iVar1;
    }
  }
  piVar2 = crt_errno_ptr();
  *piVar2 = 0x2a;
  return -1;
}



/* __aulldiv @ 0046b180 */

/* Library Function - Single Match
    __aulldiv
   
   Library: Visual Studio */

undefined8 __aulldiv(uint param_1,uint param_2,uint param_3,uint param_4)

{
  ulonglong uVar1;
  longlong lVar2;
  uint uVar3;
  int iVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  
  uVar3 = param_1;
  uVar8 = param_4;
  uVar6 = param_2;
  uVar9 = param_3;
  if (param_4 == 0) {
    uVar3 = param_2 / param_3;
    iVar4 = (int)(((ulonglong)param_2 % (ulonglong)param_3 << 0x20 | (ulonglong)param_1) /
                 (ulonglong)param_3);
  }
  else {
    do {
      uVar5 = uVar8 >> 1;
      uVar9 = uVar9 >> 1 | (uint)((uVar8 & 1) != 0) << 0x1f;
      uVar7 = uVar6 >> 1;
      uVar3 = uVar3 >> 1 | (uint)((uVar6 & 1) != 0) << 0x1f;
      uVar8 = uVar5;
      uVar6 = uVar7;
    } while (uVar5 != 0);
    uVar1 = CONCAT44(uVar7,uVar3) / (ulonglong)uVar9;
    iVar4 = (int)uVar1;
    lVar2 = (ulonglong)param_3 * (uVar1 & 0xffffffff);
    uVar3 = (uint)((ulonglong)lVar2 >> 0x20);
    uVar8 = uVar3 + iVar4 * param_4;
    if (((CARRY4(uVar3,iVar4 * param_4)) || (param_2 < uVar8)) ||
       ((param_2 <= uVar8 && (param_1 < (uint)lVar2)))) {
      iVar4 = iVar4 + -1;
    }
    uVar3 = 0;
  }
  return CONCAT44(uVar3,iVar4);
}



/* __aullrem @ 0046b1f0 */

/* Library Function - Single Match
    __aullrem
   
   Library: Visual Studio */

undefined8 __aullrem(uint param_1,uint param_2,uint param_3,uint param_4)

{
  ulonglong uVar1;
  longlong lVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  int iVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  bool bVar11;
  
  uVar3 = param_1;
  uVar4 = param_4;
  uVar9 = param_2;
  uVar10 = param_3;
  if (param_4 == 0) {
    iVar6 = (int)(((ulonglong)param_2 % (ulonglong)param_3 << 0x20 | (ulonglong)param_1) %
                 (ulonglong)param_3);
    iVar7 = 0;
  }
  else {
    do {
      uVar5 = uVar4 >> 1;
      uVar10 = uVar10 >> 1 | (uint)((uVar4 & 1) != 0) << 0x1f;
      uVar8 = uVar9 >> 1;
      uVar3 = uVar3 >> 1 | (uint)((uVar9 & 1) != 0) << 0x1f;
      uVar4 = uVar5;
      uVar9 = uVar8;
    } while (uVar5 != 0);
    uVar1 = CONCAT44(uVar8,uVar3) / (ulonglong)uVar10;
    uVar3 = (int)uVar1 * param_4;
    lVar2 = (uVar1 & 0xffffffff) * (ulonglong)param_3;
    uVar9 = (uint)((ulonglong)lVar2 >> 0x20);
    uVar4 = (uint)lVar2;
    uVar10 = uVar9 + uVar3;
    if (((CARRY4(uVar9,uVar3)) || (param_2 < uVar10)) || ((param_2 <= uVar10 && (param_1 < uVar4))))
    {
      bVar11 = uVar4 < param_3;
      uVar4 = uVar4 - param_3;
      uVar10 = (uVar10 - param_4) - (uint)bVar11;
    }
    iVar6 = -(uVar4 - param_1);
    iVar7 = -(uint)(uVar4 - param_1 != 0) - ((uVar10 - param_2) - (uint)(uVar4 < param_1));
  }
  return CONCAT44(iVar7,iVar6);
}



/* FUN_0046b265 @ 0046b265 */

undefined4 __thiscall
FUN_0046b265(void *this,ushort *param_1,int *param_2,byte *param_3,int param_4,int param_5,
            int param_6,int param_7)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  char *pcVar4;
  int iVar5;
  byte bVar6;
  byte *pbVar7;
  byte *pbVar8;
  int iVar9;
  byte *pbVar10;
  char local_60 [23];
  char local_49;
  ushort local_44;
  undefined2 uStack_42;
  undefined2 uStack_40;
  byte *local_3e;
  ushort local_3a;
  int local_34;
  int local_30;
  undefined4 local_2c;
  int local_28;
  int local_24;
  byte *local_20;
  int local_1c;
  undefined4 local_18;
  int local_14;
  char *local_10;
  int local_c;
  uint local_8;
  
  local_10 = local_60;
  local_2c = 0;
  local_1c = 1;
  local_8 = 0;
  local_14 = 0;
  local_28 = 0;
  local_24 = 0;
  local_30 = 0;
  local_34 = 0;
  local_20 = (byte *)0x0;
  local_c = 0;
  local_18 = 0;
  pbVar8 = param_3;
  while( true ) {
    bVar6 = *pbVar8;
    this = (void *)CONCAT31((int3)((uint)this >> 8),bVar6);
    if ((((bVar6 != 0x20) && (bVar6 != 9)) && (bVar6 != 10)) && (bVar6 != 0xd)) break;
    pbVar8 = pbVar8 + 1;
  }
  iVar1 = 4;
  iVar9 = 0;
  iVar5 = local_14;
LAB_0046b2bc:
  local_14 = iVar5;
  pbVar7 = pbVar8;
  iVar5 = 1;
  bVar6 = *pbVar7;
  pbVar8 = pbVar7 + 1;
  iVar2 = local_14;
  switch(iVar9) {
  case 0:
    if (('0' < (char)bVar6) && ((char)bVar6 < ':')) {
LAB_0046b2d9:
      local_14 = iVar2;
      iVar9 = 3;
      goto LAB_0046b4fe;
    }
    if (bVar6 == DAT_0047b3d0) goto LAB_0046b2e8;
    if (bVar6 == 0x2b) {
      local_2c = 0;
      iVar9 = 2;
      iVar5 = local_14;
    }
    else if (bVar6 == 0x2d) {
      local_2c = 0x8000;
      iVar9 = 2;
      iVar5 = local_14;
    }
    else {
      iVar9 = iVar5;
      iVar5 = local_14;
      if (bVar6 != 0x30) goto LAB_0046b5d8;
    }
    goto LAB_0046b2bc;
  case 1:
    local_14 = 1;
    if (('0' < (char)bVar6) && (iVar2 = iVar5, (char)bVar6 < ':')) goto LAB_0046b2d9;
    iVar9 = iVar1;
    if (bVar6 != DAT_0047b3d0) {
      iVar9 = iVar5;
      if ((bVar6 == 0x2b) || (iVar9 = local_14, bVar6 == 0x2d)) goto LAB_0046b36d;
      iVar9 = iVar5;
      local_14 = iVar5;
      if (bVar6 != 0x30) goto LAB_0046b346;
    }
    goto LAB_0046b2bc;
  case 2:
    if (('0' < (char)bVar6) && ((char)bVar6 < ':')) goto LAB_0046b2d9;
    if (bVar6 == DAT_0047b3d0) {
LAB_0046b2e8:
      iVar9 = 5;
      iVar5 = local_14;
    }
    else {
      iVar9 = iVar5;
      pbVar7 = param_3;
      iVar5 = local_14;
      if (bVar6 != 0x30) goto LAB_0046b5dd;
    }
    goto LAB_0046b2bc;
  case 3:
    local_14 = iVar5;
    while( true ) {
      if (DAT_0047b3cc < 2) {
        uVar3 = (byte)crt_ctype_table[(uint)bVar6 * 2] & 4;
        this = crt_ctype_table;
      }
      else {
        pbVar7 = (byte *)0x4;
        uVar3 = crt_isctype(this,(uint)bVar6,4);
        this = pbVar7;
      }
      if (uVar3 == 0) break;
      if (local_8 < 0x19) {
        local_8 = local_8 + 1;
        pcVar4 = local_10 + 1;
        *local_10 = bVar6 - 0x30;
        local_10 = pcVar4;
      }
      else {
        local_c = local_c + 1;
      }
      bVar6 = *pbVar8;
      pbVar8 = pbVar8 + 1;
    }
    iVar9 = iVar1;
    iVar5 = local_14;
    if (bVar6 != DAT_0047b3d0) goto LAB_0046b45a;
    goto LAB_0046b2bc;
  case 4:
    local_14 = 1;
    local_28 = 1;
    iVar9 = iVar5;
    if (local_8 == 0) {
      while (iVar5 = local_28, iVar9 = local_14, bVar6 == 0x30) {
        local_c = local_c + -1;
        bVar6 = *pbVar8;
        pbVar8 = pbVar8 + 1;
      }
    }
    while( true ) {
      local_14 = iVar9;
      local_28 = iVar5;
      if (DAT_0047b3cc < 2) {
        uVar3 = (byte)crt_ctype_table[(uint)bVar6 * 2] & 4;
        this = crt_ctype_table;
      }
      else {
        pbVar7 = (byte *)0x4;
        uVar3 = crt_isctype(this,(uint)bVar6,4);
        this = pbVar7;
      }
      if (uVar3 == 0) break;
      if (local_8 < 0x19) {
        local_8 = local_8 + 1;
        local_c = local_c + -1;
        pcVar4 = local_10 + 1;
        *local_10 = bVar6 - 0x30;
        local_10 = pcVar4;
      }
      bVar6 = *pbVar8;
      pbVar8 = pbVar8 + 1;
      iVar5 = local_28;
      iVar9 = local_14;
    }
LAB_0046b45a:
    iVar9 = local_14;
    if ((bVar6 == 0x2b) || (bVar6 == 0x2d)) {
LAB_0046b36d:
      local_14 = iVar9;
      iVar9 = 0xb;
      pbVar8 = pbVar8 + -1;
      iVar5 = local_14;
    }
    else {
LAB_0046b346:
      if (((char)bVar6 < 'D') ||
         (('E' < (char)bVar6 && (((char)bVar6 < 'd' || ('e' < (char)bVar6)))))) goto LAB_0046b5d8;
      iVar9 = 6;
      iVar5 = local_14;
    }
    goto LAB_0046b2bc;
  case 5:
    local_28 = iVar5;
    if (DAT_0047b3cc < 2) {
      uVar3 = (byte)crt_ctype_table[(uint)bVar6 * 2] & 4;
      this = crt_ctype_table;
    }
    else {
      pbVar7 = (byte *)0x4;
      uVar3 = crt_isctype(this,(uint)bVar6,4);
      this = pbVar7;
    }
    iVar9 = iVar1;
    pbVar7 = param_3;
    if (uVar3 != 0) goto LAB_0046b4fe;
    goto LAB_0046b5dd;
  case 6:
    pbVar7 = pbVar7 + -1;
    this = pbVar7;
    param_3 = pbVar7;
    if (((char)bVar6 < '1') || ('9' < (char)bVar6)) {
      if (bVar6 == 0x2b) goto LAB_0046b533;
      if (bVar6 == 0x2d) goto LAB_0046b527;
      if (bVar6 != 0x30) goto LAB_0046b5dd;
LAB_0046b4cc:
      iVar9 = 8;
      iVar5 = local_14;
      goto LAB_0046b2bc;
    }
    break;
  case 7:
    if (((char)bVar6 < '1') || ('9' < (char)bVar6)) {
      pbVar7 = param_3;
      if (bVar6 == 0x30) goto LAB_0046b4cc;
      goto LAB_0046b5dd;
    }
    break;
  case 8:
    local_24 = 1;
    while (bVar6 == 0x30) {
      bVar6 = *pbVar8;
      pbVar8 = pbVar8 + 1;
    }
    if (((char)bVar6 < '1') || ('9' < (char)bVar6)) goto LAB_0046b5d8;
    break;
  case 9:
    local_24 = 1;
    pbVar7 = (byte *)0x0;
    goto LAB_0046b55e;
  default:
    goto switchD_0046b2c8_caseD_a;
  case 0xb:
    if (param_7 != 0) {
      if (bVar6 == 0x2b) {
LAB_0046b533:
        iVar9 = 7;
        this = pbVar7;
        param_3 = pbVar7;
        iVar5 = local_14;
      }
      else {
        param_3 = pbVar7;
        if (bVar6 != 0x2d) goto LAB_0046b5dd;
LAB_0046b527:
        local_1c = -1;
        iVar9 = 7;
        this = pbVar7;
        param_3 = pbVar7;
        iVar5 = local_14;
      }
      goto LAB_0046b2bc;
    }
    iVar9 = 10;
    pbVar8 = pbVar7;
switchD_0046b2c8_caseD_a:
    pbVar7 = pbVar8;
    iVar5 = local_14;
    if (iVar9 != 10) goto LAB_0046b2bc;
    goto LAB_0046b5dd;
  }
  iVar9 = 9;
LAB_0046b4fe:
  pbVar8 = pbVar8 + -1;
  iVar5 = local_14;
  goto LAB_0046b2bc;
LAB_0046b55e:
  if (DAT_0047b3cc < 2) {
    uVar3 = (byte)crt_ctype_table[(uint)bVar6 * 2] & 4;
    this = crt_ctype_table;
  }
  else {
    pbVar10 = (byte *)0x4;
    uVar3 = crt_isctype(this,(uint)bVar6,4);
    this = pbVar10;
  }
  if (uVar3 == 0) goto LAB_0046b5a8;
  this = (void *)(int)(char)bVar6;
  pbVar7 = (byte *)((int)this + (int)pbVar7 * 10 + -0x30);
  if (0x1450 < (int)pbVar7) goto LAB_0046b5a0;
  bVar6 = *pbVar8;
  pbVar8 = pbVar8 + 1;
  goto LAB_0046b55e;
LAB_0046b5a0:
  pbVar7 = (byte *)0x1451;
LAB_0046b5a8:
  while( true ) {
    local_20 = pbVar7;
    if (DAT_0047b3cc < 2) {
      uVar3 = (byte)crt_ctype_table[(uint)bVar6 * 2] & 4;
      this = crt_ctype_table;
    }
    else {
      pbVar7 = (byte *)0x4;
      uVar3 = crt_isctype(this,(uint)bVar6,4);
      this = pbVar7;
    }
    if (uVar3 == 0) break;
    bVar6 = *pbVar8;
    pbVar8 = pbVar8 + 1;
    pbVar7 = local_20;
  }
LAB_0046b5d8:
  pbVar7 = pbVar8 + -1;
LAB_0046b5dd:
  *param_2 = (int)pbVar7;
  if (local_14 == 0) {
    local_44 = 0;
    local_3a = 0;
    local_3e = (byte *)0x0;
    param_3 = (byte *)0x0;
    local_18 = 4;
    goto LAB_0046b6eb;
  }
  pcVar4 = local_10;
  if (0x18 < local_8) {
    if ('\x04' < local_49) {
      local_49 = local_49 + '\x01';
    }
    local_8 = 0x18;
    local_c = local_c + 1;
    pcVar4 = local_10 + -1;
  }
  if (local_8 == 0) {
    local_44 = 0;
    local_3a = 0;
    local_3e = (byte *)0x0;
    param_3 = (byte *)0x0;
  }
  else {
    while (pcVar4 = pcVar4 + -1, *pcVar4 == '\0') {
      local_8 = local_8 - 1;
      local_c = local_c + 1;
    }
    FUN_0046d9bc(local_60,local_8,(uint *)&local_44);
    pbVar8 = local_20;
    if (local_1c < 0) {
      pbVar8 = (byte *)-(int)local_20;
    }
    pbVar8 = pbVar8 + local_c;
    if (local_24 == 0) {
      pbVar8 = pbVar8 + param_5;
    }
    if (local_28 == 0) {
      pbVar8 = pbVar8 + -param_6;
    }
    if ((int)pbVar8 < 0x1451) {
      if (-0x1451 < (int)pbVar8) {
        FUN_0046e05b((int *)&local_44,(uint)pbVar8,param_4);
        param_3 = (byte *)CONCAT22(uStack_40,uStack_42);
        goto LAB_0046b670;
      }
      local_34 = 1;
    }
    else {
      local_30 = 1;
    }
    local_3a = (ushort)param_3;
    local_3e = param_3;
    local_44 = local_3a;
  }
LAB_0046b670:
  if (local_30 == 0) {
    if (local_34 != 0) {
      local_44 = 0;
      local_3a = 0;
      local_3e = (byte *)0x0;
      param_3 = (byte *)0x0;
      local_18 = 1;
    }
  }
  else {
    param_3 = (byte *)0x0;
    local_3a = 0x7fff;
    local_3e = (byte *)0x80000000;
    local_44 = 0;
    local_18 = 2;
  }
LAB_0046b6eb:
  *(byte **)(param_1 + 3) = local_3e;
  *(byte **)(param_1 + 1) = param_3;
  param_1[5] = local_3a | (ushort)local_2c;
  *param_1 = local_44;
  return local_18;
}



/* FUN_0046c4cb @ 0046c4cb */

void __cdecl FUN_0046c4cb(uint param_1,int *param_2,ushort *param_3)

{
  bool bVar1;
  undefined3 extraout_var;
  int iVar2;
  uint uVar3;
  uint local_5c [10];
  undefined8 local_34;
  uint local_24;
  
  param_3 = (ushort *)(uint)*param_3;
  iVar2 = *param_2;
  if (iVar2 == 1) {
LAB_0046c510:
    uVar3 = 8;
  }
  else if (iVar2 == 2) {
    uVar3 = 4;
  }
  else if (iVar2 == 3) {
    uVar3 = 0x11;
  }
  else if (iVar2 == 4) {
    uVar3 = 0x12;
  }
  else {
    if (iVar2 == 5) goto LAB_0046c510;
    if (iVar2 == 7) {
      *param_2 = 1;
      goto LAB_0046c566;
    }
    if (iVar2 != 8) goto LAB_0046c566;
    uVar3 = 0x10;
  }
  bVar1 = FUN_00469326(uVar3,(double *)(param_2 + 6),(uint)param_3);
  if (CONCAT31(extraout_var,bVar1) == 0) {
    if (((param_1 == 0x10) || (param_1 == 0x16)) || (param_1 == 0x1d)) {
      local_34 = *(undefined8 *)(param_2 + 4);
      local_24 = local_24 & 0xffffffe3 | 3;
    }
    else {
      local_24 = local_24 & 0xfffffffe;
    }
    FUN_00469073(local_5c,(uint *)&param_3,uVar3,param_1,(undefined8 *)(param_2 + 2),
                 (undefined8 *)(param_2 + 6));
  }
LAB_0046c566:
  FUN_00469582();
  if (((*param_2 != 8) && (DAT_0047e088 == 0)) && (iVar2 = FUN_0046d66c(), iVar2 != 0)) {
    return;
  }
  FUN_0046953d(*param_2);
  return;
}



/* __frnd @ 0046c59b */

/* Library Function - Single Match
    __frnd
   
   Libraries: Visual Studio 2008 Release, Visual Studio 2010 Release, Visual Studio 2012 Release,
   Visual Studio 2019 Release */

float10 __cdecl __frnd(double param_1)

{
  return (float10)ROUND(param_1);
}



/* FUN_0046c5ad @ 0046c5ad */

void FUN_0046c5ad(void)

{
  if (DAT_004d9c48 == 0) {
    crt_lock(0xb);
    if (DAT_004d9c48 == 0) {
      FUN_0046c5db();
      DAT_004d9c48 = DAT_004d9c48 + 1;
    }
    crt_unlock(0xb);
  }
  return;
}



/* FUN_0046c5db @ 0046c5db */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void FUN_0046c5db(void)

{
  byte bVar1;
  byte bVar2;
  char *_Str1;
  DWORD DVar3;
  int iVar4;
  size_t sVar5;
  void *this;
  byte *_Source;
  int local_8;
  
  crt_lock(0xc);
  DAT_0047df18 = 0xffffffff;
  DAT_0047df08 = 0xffffffff;
  DAT_004d9b90 = 0;
  _Str1 = (char *)FUN_0046e0d7("TZ");
  if (_Str1 == (char *)0x0) {
    crt_unlock(0xc);
    DVar3 = GetTimeZoneInformation((LPTIME_ZONE_INFORMATION)&DAT_004d9b98);
    if (DVar3 == 0xffffffff) {
      return;
    }
    DAT_0047de70 = (void *)(DAT_004d9b98 * 0x3c);
    DAT_004d9b90 = 1;
    if (DAT_004d9bde != 0) {
      DAT_0047de70 = (void *)((int)DAT_0047de70 + DAT_004d9bec * 0x3c);
    }
    if ((DAT_004d9c32 == 0) || (DAT_004d9c40 == 0)) {
      DAT_0047de74 = 0;
      _DAT_0047de78 = 0;
    }
    else {
      DAT_0047de74 = 1;
      _DAT_0047de78 = (DAT_004d9c40 - DAT_004d9bec) * 0x3c;
    }
    iVar4 = WideCharToMultiByte(DAT_004d9a5c,0x220,(LPCWCH)&DAT_004d9b9c,-1,PTR_DAT_0047defc,0x3f,
                                (LPCCH)0x0,&local_8);
    if ((iVar4 == 0) || (local_8 != 0)) {
      *PTR_DAT_0047defc = 0;
    }
    else {
      PTR_DAT_0047defc[0x3f] = 0;
    }
    iVar4 = WideCharToMultiByte(DAT_004d9a5c,0x220,(LPCWCH)&DAT_004d9bf0,-1,PTR_DAT_0047df00,0x3f,
                                (LPCCH)0x0,&local_8);
    if ((iVar4 != 0) && (local_8 == 0)) {
      PTR_DAT_0047df00[0x3f] = 0;
      return;
    }
LAB_0046c84c:
    *PTR_DAT_0047df00 = 0;
  }
  else {
    if ((*_Str1 != '\0') &&
       ((DAT_004d9c44 == (char *)0x0 || (iVar4 = _strcmp(_Str1,DAT_004d9c44), iVar4 != 0)))) {
      crt_free_base(DAT_004d9c44);
      sVar5 = _strlen(_Str1);
      DAT_004d9c44 = _malloc(sVar5 + 1);
      if (DAT_004d9c44 != (char *)0x0) {
        crt_strcpy(DAT_004d9c44,_Str1);
        crt_unlock(0xc);
        _strncpy(PTR_DAT_0047defc,_Str1,3);
        _Source = (byte *)(_Str1 + 3);
        PTR_DAT_0047defc[3] = 0;
        bVar1 = *_Source;
        if (bVar1 == 0x2d) {
          _Source = (byte *)(_Str1 + 4);
        }
        iVar4 = FUN_00460dd2(this,_Source);
        DAT_0047de70 = (void *)(iVar4 * 0xe10);
        for (; (bVar2 = *_Source, bVar2 == 0x2b || (('/' < (char)bVar2 && ((char)bVar2 < ':'))));
            _Source = _Source + 1) {
        }
        if (*_Source == 0x3a) {
          _Source = _Source + 1;
          iVar4 = FUN_00460dd2(DAT_0047de70,_Source);
          DAT_0047de70 = (void *)((int)DAT_0047de70 + iVar4 * 0x3c);
          for (; ('/' < (char)*_Source && ((char)*_Source < ':')); _Source = _Source + 1) {
          }
          if (*_Source == 0x3a) {
            _Source = _Source + 1;
            iVar4 = FUN_00460dd2(DAT_0047de70,_Source);
            DAT_0047de70 = (void *)((int)DAT_0047de70 + iVar4);
            for (; ('/' < (char)*_Source && ((char)*_Source < ':')); _Source = _Source + 1) {
            }
          }
        }
        if (bVar1 == 0x2d) {
          DAT_0047de70 = (void *)-(int)DAT_0047de70;
        }
        DAT_0047de74 = (int)(char)*_Source;
        if (DAT_0047de74 != 0) {
          _strncpy(PTR_DAT_0047df00,(char *)_Source,3);
          PTR_DAT_0047df00[3] = 0;
          return;
        }
        goto LAB_0046c84c;
      }
    }
    crt_unlock(0xc);
  }
  return;
}



/* FUN_0046c862 @ 0046c862 */

bool __cdecl FUN_0046c862(int *param_1)

{
  bool bVar1;
  
  crt_lock(0xb);
  bVar1 = FUN_0046c883(param_1);
  crt_unlock(0xb);
  return bVar1;
}



/* FUN_0046c883 @ 0046c883 */

bool __cdecl FUN_0046c883(int *param_1)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  
  if (DAT_0047de74 != 0) {
    uVar5 = param_1[5];
    if ((uVar5 != DAT_0047df08) || (uVar5 != DAT_0047df18)) {
      if (DAT_004d9b90 == 0) {
        FUN_0046ca2f(1,1,uVar5,4,1,0,0,2,0,0,0);
        FUN_0046ca2f(0,1,param_1[5],10,5,0,0,2,0,0,0);
      }
      else {
        if (DAT_004d9c30 != 0) {
          uVar6 = (uint)DAT_004d9c36;
          uVar3 = 0;
          uVar4 = 0;
        }
        else {
          uVar3 = (uint)DAT_004d9c34;
          uVar6 = 0;
          uVar4 = (uint)DAT_004d9c36;
        }
        FUN_0046ca2f(1,(uint)(DAT_004d9c30 == 0),uVar5,(uint)DAT_004d9c32,uVar4,uVar3,uVar6,
                     (uint)DAT_004d9c38,(uint)DAT_004d9c3a,(uint)DAT_004d9c3c,(uint)DAT_004d9c3e);
        if (DAT_004d9bdc != 0) {
          uVar6 = (uint)DAT_004d9be2;
          uVar3 = 0;
          uVar4 = 0;
          uVar5 = param_1[5];
        }
        else {
          uVar3 = (uint)DAT_004d9be0;
          uVar6 = 0;
          uVar4 = (uint)DAT_004d9be2;
          uVar5 = param_1[5];
        }
        FUN_0046ca2f(0,(uint)(DAT_004d9bdc == 0),uVar5,(uint)DAT_004d9bde,uVar4,uVar3,uVar6,
                     (uint)DAT_004d9be4,(uint)DAT_004d9be6,(uint)DAT_004d9be8,(uint)DAT_004d9bea);
      }
    }
    iVar1 = param_1[7];
    if (DAT_0047df0c < DAT_0047df1c) {
      if ((DAT_0047df0c <= iVar1) && (iVar1 <= DAT_0047df1c)) {
        if ((DAT_0047df0c < iVar1) && (iVar1 < DAT_0047df1c)) {
          return true;
        }
LAB_0046c9fb:
        iVar2 = ((param_1[2] * 0x3c + param_1[1]) * 0x3c + *param_1) * 1000;
        if (iVar1 == DAT_0047df0c) {
          return DAT_0047df10 <= iVar2;
        }
        return iVar2 < DAT_0047df20;
      }
    }
    else {
      if (iVar1 < DAT_0047df1c) {
        return true;
      }
      if (DAT_0047df0c < iVar1) {
        return true;
      }
      if ((iVar1 <= DAT_0047df1c) || (DAT_0047df0c <= iVar1)) goto LAB_0046c9fb;
    }
  }
  return false;
}



/* FUN_0046ca2f @ 0046ca2f */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

void __cdecl
FUN_0046ca2f(int param_1,int param_2,uint param_3,int param_4,int param_5,int param_6,int param_7,
            int param_8,int param_9,int param_10,int param_11)

{
  int iVar1;
  int iVar2;
  
  if (param_2 == 1) {
    if ((param_3 & 3) == 0) {
      iVar1 = (&DAT_0047df20)[param_4];
    }
    else {
      iVar1 = *(int *)(&DAT_0047df54 + param_4 * 4);
    }
    iVar2 = (int)(param_3 * 0x16d + -0x63db + iVar1 + 1 + ((int)(param_3 - 1) >> 2)) % 7;
    if (param_6 < iVar2) {
      iVar1 = iVar1 + 1 + (param_5 * 7 - iVar2) + param_6;
    }
    else {
      iVar1 = iVar1 + -6 + (param_5 * 7 - iVar2) + param_6;
    }
    if (param_5 == 5) {
      if ((param_3 & 3) == 0) {
        iVar2 = *(int *)(&DAT_0047df24 + param_4 * 4);
      }
      else {
        iVar2 = *(int *)(&DAT_0047df58 + param_4 * 4);
      }
      if (iVar2 < iVar1) {
        iVar1 = iVar1 + -7;
      }
    }
  }
  else {
    if ((param_3 & 3) == 0) {
      iVar1 = (&DAT_0047df20)[param_4];
    }
    else {
      iVar1 = *(int *)(&DAT_0047df54 + param_4 * 4);
    }
    iVar1 = iVar1 + param_7;
  }
  if (param_1 == 1) {
    DAT_0047df08 = param_3;
    DAT_0047df10 = ((param_8 * 0x3c + param_9) * 0x3c + param_10) * 1000 + param_11;
    DAT_0047df0c = iVar1;
  }
  else {
    DAT_0047df20 = ((param_8 * 0x3c + param_9) * 0x3c + _DAT_0047de78 + param_10) * 1000 + param_11;
    if (DAT_0047df20 < 0) {
      DAT_0047df20 = DAT_0047df20 + 86400000;
      DAT_0047df1c = iVar1 + -1;
    }
    else {
      DAT_0047df1c = iVar1;
      if (86399999 < DAT_0047df20) {
        DAT_0047df20 = DAT_0047df20 + -86400000;
        DAT_0047df1c = iVar1 + 1;
      }
    }
    DAT_0047df18 = param_3;
  }
  return;
}



/* FUN_0046cb6f @ 0046cb6f */

void FUN_0046cb6f(void)

{
  crt_report_runtime_error(10);
  FUN_0046d723((DWORD *)0x16);
                    /* WARNING: Subroutine does not return */
  __exit(3);
}



/* _strcmp @ 0046cb90 */

/* Library Function - Single Match
    _strcmp
   
   Libraries: Visual Studio 1998 Debug, Visual Studio 1998 Release */

int __cdecl _strcmp(char *_Str1,char *_Str2)

{
  undefined2 uVar1;
  undefined4 uVar2;
  byte bVar3;
  byte bVar4;
  bool bVar5;
  
  if (((uint)_Str1 & 3) != 0) {
    if (((uint)_Str1 & 1) != 0) {
      bVar4 = *_Str1;
      _Str1 = _Str1 + 1;
      bVar5 = bVar4 < (byte)*_Str2;
      if (bVar4 != *_Str2) goto LAB_0046cbd4;
      _Str2 = _Str2 + 1;
      if (bVar4 == 0) {
        return 0;
      }
      if (((uint)_Str1 & 2) == 0) goto LAB_0046cba0;
    }
    uVar1 = *(undefined2 *)_Str1;
    _Str1 = _Str1 + 2;
    bVar4 = (byte)uVar1;
    bVar5 = bVar4 < (byte)*_Str2;
    if (bVar4 != *_Str2) goto LAB_0046cbd4;
    if (bVar4 == 0) {
      return 0;
    }
    bVar4 = (byte)((ushort)uVar1 >> 8);
    bVar5 = bVar4 < ((byte *)_Str2)[1];
    if (bVar4 != ((byte *)_Str2)[1]) goto LAB_0046cbd4;
    if (bVar4 == 0) {
      return 0;
    }
    _Str2 = (char *)((byte *)_Str2 + 2);
  }
LAB_0046cba0:
  while( true ) {
    uVar2 = *(undefined4 *)_Str1;
    bVar4 = (byte)uVar2;
    bVar5 = bVar4 < (byte)*_Str2;
    if (bVar4 != *_Str2) break;
    if (bVar4 == 0) {
      return 0;
    }
    bVar4 = (byte)((uint)uVar2 >> 8);
    bVar5 = bVar4 < ((byte *)_Str2)[1];
    if (bVar4 != ((byte *)_Str2)[1]) break;
    if (bVar4 == 0) {
      return 0;
    }
    bVar4 = (byte)((uint)uVar2 >> 0x10);
    bVar5 = bVar4 < ((byte *)_Str2)[2];
    if (bVar4 != ((byte *)_Str2)[2]) break;
    bVar3 = (byte)((uint)uVar2 >> 0x18);
    if (bVar4 == 0) {
      return 0;
    }
    bVar5 = bVar3 < ((byte *)_Str2)[3];
    if (bVar3 != ((byte *)_Str2)[3]) break;
    _Str2 = (char *)((byte *)_Str2 + 4);
    _Str1 = _Str1 + 4;
    if (bVar3 == 0) {
      return 0;
    }
  }
LAB_0046cbd4:
  return (uint)bVar5 * -2 + 1;
}



/* _strncpy @ 0046cc20 */

/* Library Function - Single Match
    _strncpy
   
   Libraries: Visual Studio 1998 Debug, Visual Studio 1998 Release */

char * __cdecl _strncpy(char *_Dest,char *_Source,size_t _Count)

{
  uint uVar1;
  uint uVar2;
  char cVar3;
  uint uVar4;
  uint *puVar5;
  
  if (_Count == 0) {
    return _Dest;
  }
  puVar5 = (uint *)_Dest;
  if (((uint)_Source & 3) != 0) {
    while( true ) {
      uVar4 = *(uint *)_Source;
      _Source = (char *)((int)_Source + 1);
      *(char *)puVar5 = (char)uVar4;
      puVar5 = (uint *)((int)puVar5 + 1);
      _Count = _Count - 1;
      if (_Count == 0) {
        return _Dest;
      }
      if ((char)uVar4 == '\0') break;
      if (((uint)_Source & 3) == 0) {
        uVar4 = _Count >> 2;
        goto joined_r0x0046cc5e;
      }
    }
    do {
      if (((uint)puVar5 & 3) == 0) {
        uVar4 = _Count >> 2;
        cVar3 = '\0';
        if (uVar4 == 0) goto LAB_0046cc9b;
        goto LAB_0046cd09;
      }
      *(char *)puVar5 = '\0';
      puVar5 = (uint *)((int)puVar5 + 1);
      _Count = _Count - 1;
    } while (_Count != 0);
    return _Dest;
  }
  uVar4 = _Count >> 2;
  if (uVar4 != 0) {
    do {
      uVar1 = *(uint *)_Source;
      uVar2 = *(uint *)_Source;
      _Source = (char *)((int)_Source + 4);
      if (((uVar1 ^ 0xffffffff ^ uVar1 + 0x7efefeff) & 0x81010100) != 0) {
        if ((char)uVar2 == '\0') {
          *puVar5 = 0;
joined_r0x0046cd05:
          while( true ) {
            uVar4 = uVar4 - 1;
            puVar5 = puVar5 + 1;
            if (uVar4 == 0) break;
LAB_0046cd09:
            *puVar5 = 0;
          }
          cVar3 = '\0';
          _Count = _Count & 3;
          if (_Count != 0) goto LAB_0046cc9b;
          return _Dest;
        }
        if ((char)(uVar2 >> 8) == '\0') {
          *puVar5 = uVar2 & 0xff;
          goto joined_r0x0046cd05;
        }
        if ((uVar2 & 0xff0000) == 0) {
          *puVar5 = uVar2 & 0xffff;
          goto joined_r0x0046cd05;
        }
        if ((uVar2 & 0xff000000) == 0) {
          *puVar5 = uVar2;
          goto joined_r0x0046cd05;
        }
      }
      *puVar5 = uVar2;
      puVar5 = puVar5 + 1;
      uVar4 = uVar4 - 1;
joined_r0x0046cc5e:
    } while (uVar4 != 0);
    _Count = _Count & 3;
    if (_Count == 0) {
      return _Dest;
    }
  }
  do {
    cVar3 = (char)*(uint *)_Source;
    _Source = (char *)((int)_Source + 1);
    *(char *)puVar5 = cVar3;
    puVar5 = (uint *)((int)puVar5 + 1);
    if (cVar3 == '\0') {
      while (_Count = _Count - 1, _Count != 0) {
LAB_0046cc9b:
        *(char *)puVar5 = cVar3;
        puVar5 = (uint *)((int)puVar5 + 1);
      }
      return _Dest;
    }
    _Count = _Count - 1;
  } while (_Count != 0);
  return _Dest;
}



/* FUN_0046cd20 @ 0046cd20 */

int __cdecl FUN_0046cd20(byte *param_1,byte *param_2)

{
  byte bVar1;
  int iVar2;
  byte abStack_28 [32];
  
  abStack_28[0x1c] = 0;
  abStack_28[0x1d] = 0;
  abStack_28[0x1e] = 0;
  abStack_28[0x1f] = 0;
  abStack_28[0x18] = 0;
  abStack_28[0x19] = 0;
  abStack_28[0x1a] = 0;
  abStack_28[0x1b] = 0;
  abStack_28[0x14] = 0;
  abStack_28[0x15] = 0;
  abStack_28[0x16] = 0;
  abStack_28[0x17] = 0;
  abStack_28[0x10] = 0;
  abStack_28[0x11] = 0;
  abStack_28[0x12] = 0;
  abStack_28[0x13] = 0;
  abStack_28[0xc] = 0;
  abStack_28[0xd] = 0;
  abStack_28[0xe] = 0;
  abStack_28[0xf] = 0;
  abStack_28[8] = 0;
  abStack_28[9] = 0;
  abStack_28[10] = 0;
  abStack_28[0xb] = 0;
  abStack_28[4] = 0;
  abStack_28[5] = 0;
  abStack_28[6] = 0;
  abStack_28[7] = 0;
  abStack_28[0] = 0;
  abStack_28[1] = 0;
  abStack_28[2] = 0;
  abStack_28[3] = 0;
  while( true ) {
    bVar1 = *param_2;
    if (bVar1 == 0) break;
    param_2 = param_2 + 1;
    abStack_28[(int)(uint)bVar1 >> 3] = abStack_28[(int)(uint)bVar1 >> 3] | '\x01' << (bVar1 & 7);
  }
  iVar2 = -1;
  do {
    iVar2 = iVar2 + 1;
    bVar1 = *param_1;
    if (bVar1 == 0) {
      return iVar2;
    }
    param_1 = param_1 + 1;
  } while ((abStack_28[(int)(uint)bVar1 >> 3] >> (bVar1 & 7) & 1) == 0);
  return iVar2;
}



/* FUN_0046cd60 @ 0046cd60 */

byte * __cdecl FUN_0046cd60(byte *param_1,byte *param_2)

{
  byte bVar1;
  byte *pbVar2;
  byte abStack_28 [32];
  
  abStack_28[0x1c] = 0;
  abStack_28[0x1d] = 0;
  abStack_28[0x1e] = 0;
  abStack_28[0x1f] = 0;
  abStack_28[0x18] = 0;
  abStack_28[0x19] = 0;
  abStack_28[0x1a] = 0;
  abStack_28[0x1b] = 0;
  abStack_28[0x14] = 0;
  abStack_28[0x15] = 0;
  abStack_28[0x16] = 0;
  abStack_28[0x17] = 0;
  abStack_28[0x10] = 0;
  abStack_28[0x11] = 0;
  abStack_28[0x12] = 0;
  abStack_28[0x13] = 0;
  abStack_28[0xc] = 0;
  abStack_28[0xd] = 0;
  abStack_28[0xe] = 0;
  abStack_28[0xf] = 0;
  abStack_28[8] = 0;
  abStack_28[9] = 0;
  abStack_28[10] = 0;
  abStack_28[0xb] = 0;
  abStack_28[4] = 0;
  abStack_28[5] = 0;
  abStack_28[6] = 0;
  abStack_28[7] = 0;
  abStack_28[0] = 0;
  abStack_28[1] = 0;
  abStack_28[2] = 0;
  abStack_28[3] = 0;
  while( true ) {
    bVar1 = *param_2;
    if (bVar1 == 0) break;
    param_2 = param_2 + 1;
    abStack_28[(int)(uint)bVar1 >> 3] = abStack_28[(int)(uint)bVar1 >> 3] | '\x01' << (bVar1 & 7);
  }
  do {
    pbVar2 = param_1;
    bVar1 = *pbVar2;
    if (bVar1 == 0) {
      return (byte *)0x0;
    }
    param_1 = pbVar2 + 1;
  } while ((abStack_28[(int)(uint)bVar1 >> 3] >> (bVar1 & 7) & 1) == 0);
  return pbVar2;
}



/* crt_chkstk @ 0046cda0 */

/* WARNING: Unable to track spacebase fully for stack */
/* CRT: stack probing helper for large alloca (size in EAX) */

void crt_chkstk(void)

{
  uint in_EAX;
  undefined1 *puVar1;
  undefined4 unaff_retaddr;
  
  puVar1 = &stack0x00000004;
  for (; 0xfff < in_EAX; in_EAX = in_EAX - 0x1000) {
    puVar1 = puVar1 + -0x1000;
  }
  *(undefined4 *)(puVar1 + (-4 - in_EAX)) = unaff_retaddr;
  return;
}



/* crt_strtol_l @ 0046cdcf */

/* CRT: parse integer with base (locale) */

long __thiscall crt_strtol_l(void *this,void *locale,char *str,char **endptr,int base)

{
  ulong uVar1;
  uint unaff_retaddr;
  
  uVar1 = crt_strtoxl(this,locale,str,endptr,0,unaff_retaddr);
  return uVar1;
}



/* crt_strtoxl @ 0046cde6 */

/* CRT: shared strto* core (base/sign/overflow) */

ulong __thiscall crt_strtoxl(void *this,void *locale,char *str,char **endptr,int base,uint flags)

{
  byte *pbVar1;
  char **ppcVar2;
  uint uVar3;
  char **ppcVar4;
  uint uVar5;
  int iVar6;
  int *piVar7;
  char **this_00;
  byte bVar8;
  undefined *puVar9;
  char **local_c;
  byte *local_8;
  
  local_c = (char **)0x0;
  bVar8 = *(byte *)locale;
  pbVar1 = locale;
  while( true ) {
    local_8 = pbVar1 + 1;
    if (DAT_0047b3cc < 2) {
      uVar3 = (byte)crt_ctype_table[(uint)bVar8 * 2] & 8;
      this = crt_ctype_table;
    }
    else {
      puVar9 = (undefined *)0x8;
      uVar3 = crt_isctype(this,(uint)bVar8,8);
      this = puVar9;
    }
    if (uVar3 == 0) break;
    bVar8 = *local_8;
    pbVar1 = local_8;
  }
  if (bVar8 == 0x2d) {
    base = base | 2;
LAB_0046ce41:
    bVar8 = *local_8;
    local_8 = pbVar1 + 2;
  }
  else if (bVar8 == 0x2b) goto LAB_0046ce41;
  if ((((int)endptr < 0) || (endptr == (char **)0x1)) || (0x24 < (int)endptr)) {
    if (str != (char *)0x0) {
      *(void **)str = locale;
    }
    return 0;
  }
  this_00 = (char **)0x10;
  if (endptr == (char **)0x0) {
    if (bVar8 != 0x30) {
      endptr = (char **)0xa;
      goto LAB_0046ceab;
    }
    if ((*local_8 != 0x78) && (*local_8 != 0x58)) {
      endptr = (char **)0x8;
      goto LAB_0046ceab;
    }
    endptr = (char **)0x10;
  }
  if (((endptr == (char **)0x10) && (bVar8 == 0x30)) && ((*local_8 == 0x78 || (*local_8 == 0x58))))
  {
    bVar8 = local_8[1];
    local_8 = local_8 + 2;
  }
LAB_0046ceab:
  ppcVar4 = (char **)(0xffffffff / ZEXT48(endptr));
  do {
    uVar3 = (uint)bVar8;
    if (DAT_0047b3cc < 2) {
      uVar5 = (byte)crt_ctype_table[uVar3 * 2] & 4;
    }
    else {
      ppcVar2 = (char **)0x4;
      uVar5 = crt_isctype(this_00,uVar3,4);
      this_00 = ppcVar2;
    }
    if (uVar5 == 0) {
      if (DAT_0047b3cc < 2) {
        uVar3 = *(ushort *)(crt_ctype_table + uVar3 * 2) & 0x103;
      }
      else {
        uVar3 = crt_isctype(this_00,uVar3,0x103);
      }
      if (uVar3 == 0) {
LAB_0046cf57:
        local_8 = local_8 + -1;
        if ((base & 8U) == 0) {
          if (str != (char *)0x0) {
            local_8 = locale;
          }
          local_c = (char **)0x0;
        }
        else if (((base & 4U) != 0) ||
                (((base & 1U) == 0 &&
                 ((((base & 2U) != 0 && ((char **)0x80000000 < local_c)) ||
                  (((base & 2U) == 0 && ((char **)0x7fffffff < local_c)))))))) {
          piVar7 = crt_errno_ptr();
          *piVar7 = 0x22;
          if ((base & 1U) == 0) {
            local_c = (char **)(((base & 2U) != 0) + 0x7fffffff);
          }
          else {
            local_c = (char **)0xffffffff;
          }
        }
        if (str != (char *)0x0) {
          *(byte **)str = local_8;
        }
        if ((base & 2U) == 0) {
          return (ulong)local_c;
        }
        return -(int)local_c;
      }
      iVar6 = crt_toupper((int)(char)bVar8);
      this_00 = (char **)(iVar6 + -0x37);
    }
    else {
      this_00 = (char **)((char)bVar8 + -0x30);
    }
    if (endptr <= this_00) goto LAB_0046cf57;
    if ((local_c < ppcVar4) ||
       ((local_c == ppcVar4 && (this_00 <= (char **)(0xffffffff % ZEXT48(endptr)))))) {
      local_c = (char **)((int)local_c * (int)endptr + (int)this_00);
      base = base | 8;
    }
    else {
      base = base | 0xc;
    }
    bVar8 = *local_8;
    local_8 = local_8 + 1;
  } while( true );
}



/* FUN_0046cfeb @ 0046cfeb */

uint __cdecl FUN_0046cfeb(LPWSTR param_1,byte *param_2,uint param_3)

{
  uint uVar1;
  bool bVar2;
  
  InterlockedIncrement((LONG *)&DAT_004da3b0);
  bVar2 = DAT_004da3ac != 0;
  if (bVar2) {
    InterlockedDecrement((LONG *)&DAT_004da3b0);
    crt_lock(0x13);
  }
  uVar1 = FUN_0046d048(param_1,param_2,param_3);
  if (bVar2) {
    crt_unlock(0x13);
  }
  else {
    InterlockedDecrement((LONG *)&DAT_004da3b0);
  }
  return uVar1;
}



/* FUN_0046d048 @ 0046d048 */

uint __cdecl FUN_0046d048(LPWSTR param_1,byte *param_2,uint param_3)

{
  byte bVar1;
  int iVar2;
  int *piVar3;
  
  if ((param_2 != (byte *)0x0) && (param_3 != 0)) {
    bVar1 = *param_2;
    if (bVar1 != 0) {
      if (DAT_004d9a4c == 0) {
        if (param_1 != (LPWSTR)0x0) {
          *param_1 = (ushort)bVar1;
        }
        return 1;
      }
      if ((crt_ctype_table[(uint)bVar1 * 2 + 1] & 0x80) == 0) {
        iVar2 = MultiByteToWideChar(DAT_004d9a5c,9,(LPCCH)param_2,1,param_1,
                                    (uint)(param_1 != (LPWSTR)0x0));
        if (iVar2 != 0) {
          return 1;
        }
      }
      else {
        if (1 < (int)DAT_0047b3cc) {
          if ((int)param_3 < (int)DAT_0047b3cc) goto LAB_0046d0da;
          iVar2 = MultiByteToWideChar(DAT_004d9a5c,9,(LPCCH)param_2,DAT_0047b3cc,param_1,
                                      (uint)(param_1 != (LPWSTR)0x0));
          if (iVar2 != 0) {
            return DAT_0047b3cc;
          }
        }
        if ((DAT_0047b3cc <= param_3) && (param_2[1] != 0)) {
          return DAT_0047b3cc;
        }
      }
LAB_0046d0da:
      piVar3 = crt_errno_ptr();
      *piVar3 = 0x2a;
      return 0xffffffff;
    }
    if (param_1 != (LPWSTR)0x0) {
      *param_1 = L'\0';
    }
  }
  return 0;
}



/* __allshl @ 0046d120 */

/* Library Function - Single Match
    __allshl
   
   Library: Visual Studio */

longlong __fastcall __allshl(byte param_1,int param_2)

{
  uint in_EAX;
  
  if (0x3f < param_1) {
    return 0;
  }
  if (param_1 < 0x20) {
    return CONCAT44(param_2 << (param_1 & 0x1f) | in_EAX >> 0x20 - (param_1 & 0x1f),
                    in_EAX << (param_1 & 0x1f));
  }
  return (ulonglong)(in_EAX << (param_1 & 0x1f)) << 0x20;
}



/* FUN_0046d13f @ 0046d13f */

uint __cdecl FUN_0046d13f(uint param_1,int *param_2)

{
  uint uVar1;
  
  if ((param_1 != 0xffffffff) &&
     ((uVar1 = param_2[3], (uVar1 & 1) != 0 || (((uVar1 & 0x80) != 0 && ((uVar1 & 2) == 0)))))) {
    if (param_2[2] == 0) {
      FUN_0046ad79(param_2);
    }
    if (*param_2 == param_2[2]) {
      if (param_2[1] != 0) {
        return 0xffffffff;
      }
      *param_2 = *param_2 + 1;
    }
    if ((*(byte *)(param_2 + 3) & 0x40) == 0) {
      *param_2 = *param_2 + -1;
      *(char *)*param_2 = (char)param_1;
    }
    else {
      *param_2 = *param_2 + -1;
      if (*(char *)*param_2 != (char)param_1) {
        *param_2 = (int)((char *)*param_2 + 1);
        return 0xffffffff;
      }
    }
    param_2[1] = param_2[1] + 1;
    param_2[3] = param_2[3] & 0xffffffefU | 1;
    return param_1 & 0xff;
  }
  return 0xffffffff;
}



/* FUN_0046d1ad @ 0046d1ad */

void __cdecl FUN_0046d1ad(byte param_1)

{
  FUN_0046d1be(param_1,0,4);
  return;
}



/* FUN_0046d1be @ 0046d1be */

undefined4 __cdecl FUN_0046d1be(byte param_1,uint param_2,byte param_3)

{
  uint uVar1;
  
  if ((*(byte *)((int)&DAT_004da280 + param_1 + 1) & param_3) == 0) {
    if (param_2 == 0) {
      uVar1 = 0;
    }
    else {
      uVar1 = *(ushort *)(&DAT_0047b1ca + (uint)param_1 * 2) & param_2;
    }
    if (uVar1 == 0) {
      return 0;
    }
  }
  return 1;
}



/* FUN_0046d1ef @ 0046d1ef */

undefined4 __cdecl FUN_0046d1ef(int param_1)

{
  BYTE *pBVar1;
  byte *pbVar2;
  byte bVar3;
  byte bVar4;
  UINT CodePage;
  UINT *pUVar5;
  WINBOOL WVar6;
  uint uVar7;
  uint uVar8;
  BYTE *pBVar9;
  int iVar10;
  byte *pbVar11;
  int iVar12;
  byte *pbVar13;
  undefined4 uVar14;
  undefined4 *puVar15;
  _cpinfo local_1c;
  uint local_8;
  
  crt_lock(0x19);
  CodePage = FUN_0046d39c(param_1);
  if (CodePage != DAT_004da164) {
    if (CodePage != 0) {
      iVar12 = 0;
      pUVar5 = &DAT_0047df98;
LAB_0046d22c:
      if (*pUVar5 != CodePage) goto code_r0x0046d230;
      local_8 = 0;
      puVar15 = &DAT_004da280;
      for (iVar10 = 0x40; iVar10 != 0; iVar10 = iVar10 + -1) {
        *puVar15 = 0;
        puVar15 = puVar15 + 1;
      }
      iVar12 = iVar12 * 0x30;
      *(undefined1 *)puVar15 = 0;
      pbVar13 = (byte *)(iVar12 + 0x47dfa8);
      do {
        bVar3 = *pbVar13;
        pbVar11 = pbVar13;
        while ((bVar3 != 0 && (bVar3 = pbVar11[1], bVar3 != 0))) {
          uVar8 = (uint)*pbVar11;
          if (uVar8 <= bVar3) {
            bVar4 = (&DAT_0047df90)[local_8];
            do {
              pbVar2 = (byte *)((int)&DAT_004da280 + uVar8 + 1);
              *pbVar2 = *pbVar2 | bVar4;
              uVar8 = uVar8 + 1;
            } while (uVar8 <= bVar3);
          }
          pbVar11 = pbVar11 + 2;
          bVar3 = *pbVar11;
        }
        local_8 = local_8 + 1;
        pbVar13 = pbVar13 + 8;
      } while (local_8 < 4);
      DAT_004da17c = 1;
      DAT_004da164 = CodePage;
      DAT_004da384 = FUN_0046d3e6(CodePage);
      DAT_004da170 = *(undefined4 *)(iVar12 + 0x47df9c);
      DAT_004da174 = *(undefined4 *)(iVar12 + 0x47dfa0);
      DAT_004da178 = *(undefined4 *)(iVar12 + 0x47dfa4);
      goto LAB_0046d380;
    }
    goto LAB_0046d37b;
  }
  goto LAB_0046d216;
code_r0x0046d230:
  pUVar5 = pUVar5 + 0xc;
  iVar12 = iVar12 + 1;
  if ((UINT *)0x47e087 < pUVar5) goto code_r0x0046d23b;
  goto LAB_0046d22c;
code_r0x0046d23b:
  WVar6 = GetCPInfo(CodePage,&local_1c);
  uVar8 = 1;
  if (WVar6 == 1) {
    DAT_004da384 = 0;
    puVar15 = &DAT_004da280;
    for (iVar12 = 0x40; iVar12 != 0; iVar12 = iVar12 + -1) {
      *puVar15 = 0;
      puVar15 = puVar15 + 1;
    }
    *(undefined1 *)puVar15 = 0;
    if (local_1c.MaxCharSize < 2) {
      DAT_004da17c = 0;
      DAT_004da164 = CodePage;
    }
    else {
      DAT_004da164 = CodePage;
      if (local_1c.LeadByte[0] != '\0') {
        pBVar9 = local_1c.LeadByte + 1;
        do {
          bVar3 = *pBVar9;
          if (bVar3 == 0) break;
          for (uVar7 = (uint)pBVar9[-1]; uVar7 <= bVar3; uVar7 = uVar7 + 1) {
            pbVar13 = (byte *)((int)&DAT_004da280 + uVar7 + 1);
            *pbVar13 = *pbVar13 | 4;
          }
          pBVar1 = pBVar9 + 1;
          pBVar9 = pBVar9 + 2;
        } while (*pBVar1 != 0);
      }
      do {
        pbVar13 = (byte *)((int)&DAT_004da280 + uVar8 + 1);
        *pbVar13 = *pbVar13 | 8;
        uVar8 = uVar8 + 1;
      } while (uVar8 < 0xff);
      DAT_004da384 = FUN_0046d3e6(CodePage);
      DAT_004da17c = 1;
    }
    DAT_004da170 = 0;
    DAT_004da174 = 0;
    DAT_004da178 = 0;
  }
  else {
    if (DAT_004d9cb0 == 0) {
      uVar14 = 0xffffffff;
      goto LAB_0046d38d;
    }
LAB_0046d37b:
    FUN_0046d419();
  }
LAB_0046d380:
  FUN_0046d442();
LAB_0046d216:
  uVar14 = 0;
LAB_0046d38d:
  crt_unlock(0x19);
  return uVar14;
}



/* FUN_0046d39c @ 0046d39c */

int __cdecl FUN_0046d39c(int param_1)

{
  int iVar1;
  bool bVar2;
  
  if (param_1 == -2) {
    DAT_004d9cb0 = 1;
                    /* WARNING: Could not recover jumptable at 0x0046d3b6. Too many branches */
                    /* WARNING: Treating indirect jump as call */
    iVar1 = GetOEMCP();
    return iVar1;
  }
  if (param_1 == -3) {
    DAT_004d9cb0 = 1;
                    /* WARNING: Could not recover jumptable at 0x0046d3cb. Too many branches */
                    /* WARNING: Treating indirect jump as call */
    iVar1 = GetACP();
    return iVar1;
  }
  bVar2 = param_1 == -4;
  if (bVar2) {
    param_1 = DAT_004d9a5c;
  }
  DAT_004d9cb0 = (uint)bVar2;
  return param_1;
}



/* FUN_0046d3e6 @ 0046d3e6 */

undefined4 __cdecl FUN_0046d3e6(int param_1)

{
  if (param_1 == 0x3a4) {
    return 0x411;
  }
  if (param_1 == 0x3a8) {
    return 0x804;
  }
  if (param_1 == 0x3b5) {
    return 0x412;
  }
  if (param_1 != 0x3b6) {
    return 0;
  }
  return 0x404;
}



/* FUN_0046d419 @ 0046d419 */

void FUN_0046d419(void)

{
  int iVar1;
  undefined4 *puVar2;
  
  puVar2 = &DAT_004da280;
  for (iVar1 = 0x40; iVar1 != 0; iVar1 = iVar1 + -1) {
    *puVar2 = 0;
    puVar2 = puVar2 + 1;
  }
  *(undefined1 *)puVar2 = 0;
  DAT_004da164 = 0;
  DAT_004da17c = 0;
  DAT_004da384 = 0;
  DAT_004da170 = 0;
  DAT_004da174 = 0;
  DAT_004da178 = 0;
  return;
}



/* FUN_0046d442 @ 0046d442 */

void FUN_0046d442(void)

{
  byte *pbVar1;
  WINBOOL WVar2;
  uint uVar3;
  char cVar4;
  uint uVar5;
  uint uVar6;
  ushort *puVar7;
  undefined1 uVar8;
  BYTE *pBVar9;
  CHAR *pCVar10;
  WORD local_518 [256];
  ushort local_318 [128];
  ushort local_218 [128];
  CHAR local_118 [256];
  _cpinfo local_18;
  
  WVar2 = GetCPInfo(DAT_004da164,&local_18);
  if (WVar2 == 1) {
    uVar3 = 0;
    do {
      local_118[uVar3] = (CHAR)uVar3;
      uVar3 = uVar3 + 1;
    } while (uVar3 < 0x100);
    local_118[0] = ' ';
    if (local_18.LeadByte[0] != 0) {
      pBVar9 = local_18.LeadByte + 1;
      do {
        uVar3 = (uint)local_18.LeadByte[0];
        if (uVar3 <= *pBVar9) {
          uVar5 = (*pBVar9 - uVar3) + 1;
          uVar6 = uVar5 >> 2;
          pCVar10 = local_118 + uVar3;
          while (uVar6 != 0) {
            uVar6 = uVar6 - 1;
            builtin_memcpy(pCVar10,"    ",4);
            pCVar10 = pCVar10 + 4;
          }
          for (uVar5 = uVar5 & 3; uVar5 != 0; uVar5 = uVar5 - 1) {
            *pCVar10 = ' ';
            pCVar10 = pCVar10 + 1;
          }
        }
        local_18.LeadByte[0] = pBVar9[1];
        pBVar9 = pBVar9 + 2;
      } while (local_18.LeadByte[0] != 0);
    }
    FUN_0046a8ce(1,local_118,0x100,local_518,DAT_004da164,DAT_004da384,0);
    crt_lcmap_string(DAT_004da384,0x100,local_118,0x100,local_218,0x100,DAT_004da164,0);
    crt_lcmap_string(DAT_004da384,0x200,local_118,0x100,local_318,0x100,DAT_004da164,0);
    uVar3 = 0;
    puVar7 = local_518;
    do {
      if ((*puVar7 & 1) == 0) {
        if ((*puVar7 & 2) != 0) {
          pbVar1 = (byte *)((int)&DAT_004da280 + uVar3 + 1);
          *pbVar1 = *pbVar1 | 0x20;
          uVar8 = *(undefined1 *)((int)local_318 + uVar3);
          goto LAB_0046d54e;
        }
        (&DAT_004da180)[uVar3] = 0;
      }
      else {
        pbVar1 = (byte *)((int)&DAT_004da280 + uVar3 + 1);
        *pbVar1 = *pbVar1 | 0x10;
        uVar8 = *(undefined1 *)((int)local_218 + uVar3);
LAB_0046d54e:
        (&DAT_004da180)[uVar3] = uVar8;
      }
      uVar3 = uVar3 + 1;
      puVar7 = puVar7 + 1;
    } while (uVar3 < 0x100);
  }
  else {
    uVar3 = 0;
    do {
      if ((uVar3 < 0x41) || (0x5a < uVar3)) {
        if ((0x60 < uVar3) && (uVar3 < 0x7b)) {
          pbVar1 = (byte *)((int)&DAT_004da280 + uVar3 + 1);
          *pbVar1 = *pbVar1 | 0x20;
          cVar4 = (char)uVar3 + -0x20;
          goto LAB_0046d598;
        }
        (&DAT_004da180)[uVar3] = 0;
      }
      else {
        pbVar1 = (byte *)((int)&DAT_004da280 + uVar3 + 1);
        *pbVar1 = *pbVar1 | 0x10;
        cVar4 = (char)uVar3 + ' ';
LAB_0046d598:
        (&DAT_004da180)[uVar3] = cVar4;
      }
      uVar3 = uVar3 + 1;
    } while (uVar3 < 0x100);
  }
  return;
}



/* FUN_0046d5c7 @ 0046d5c7 */

void FUN_0046d5c7(void)

{
  if (DAT_004db4ec == 0) {
    FUN_0046d1ef(-3);
    DAT_004db4ec = 1;
  }
  return;
}



/* FUN_0046d5e3 @ 0046d5e3 */

int __cdecl FUN_0046d5e3(undefined4 param_1,undefined4 param_2,undefined4 param_3)

{
  HMODULE hModule;
  int iVar1;
  
  iVar1 = 0;
  if (DAT_004d9cb4 == (FARPROC)0x0) {
    hModule = LoadLibraryA("user32.dll");
    if (hModule != (HMODULE)0x0) {
      DAT_004d9cb4 = GetProcAddress(hModule,"MessageBoxA");
      if (DAT_004d9cb4 != (FARPROC)0x0) {
        DAT_004d9cb8 = GetProcAddress(hModule,"GetActiveWindow");
        DAT_004d9cbc = GetProcAddress(hModule,"GetLastActivePopup");
        goto LAB_0046d632;
      }
    }
    iVar1 = 0;
  }
  else {
LAB_0046d632:
    if (DAT_004d9cb8 != (FARPROC)0x0) {
      iVar1 = (*DAT_004d9cb8)();
      if ((iVar1 != 0) && (DAT_004d9cbc != (FARPROC)0x0)) {
        iVar1 = (*DAT_004d9cbc)(iVar1);
      }
    }
    iVar1 = (*DAT_004d9cb4)(iVar1,param_1,param_2,param_3);
  }
  return iVar1;
}



/* FUN_0046d66c @ 0046d66c */

undefined4 FUN_0046d66c(void)

{
  return 0;
}



/* FUN_0046d66f @ 0046d66f */

int FUN_0046d66f(int *param_1)

{
  int *piVar1;
  bool bVar2;
  int iVar3;
  undefined3 extraout_var;
  
  piVar1 = (int *)*param_1;
  if (((*piVar1 == -0x1f928c9d) && (piVar1[4] == 3)) && (piVar1[5] == 0x19930520)) {
    iVar3 = FUN_00465f48();
    return iVar3;
  }
  if ((DAT_004d9cc0 != (FARPROC)0x0) &&
     (bVar2 = FUN_0046d70b(DAT_004d9cc0), CONCAT31(extraout_var,bVar2) != 0)) {
    iVar3 = (*DAT_004d9cc0)(param_1);
    return iVar3;
  }
  return 0;
}



/* FUN_0046d6d3 @ 0046d6d3 */

bool __cdecl FUN_0046d6d3(void *param_1,UINT_PTR param_2)

{
  WINBOOL WVar1;
  
  WVar1 = IsBadReadPtr(param_1,param_2);
  return WVar1 == 0;
}



/* FUN_0046d6ef @ 0046d6ef */

bool __cdecl FUN_0046d6ef(LPVOID param_1,UINT_PTR param_2)

{
  WINBOOL WVar1;
  
  WVar1 = IsBadWritePtr(param_1,param_2);
  return WVar1 == 0;
}



/* FUN_0046d70b @ 0046d70b */

bool __cdecl FUN_0046d70b(FARPROC param_1)

{
  WINBOOL WVar1;
  
  WVar1 = IsBadCodePtr((FARPROC)param_1);
  return WVar1 == 0;
}



/* FUN_0046d723 @ 0046d723 */

undefined4 __cdecl FUN_0046d723(DWORD *param_1)

{
  bool bVar1;
  DWORD *pDVar2;
  uint uVar3;
  int iVar4;
  int iVar5;
  code *pcVar6;
  undefined4 *puVar7;
  DWORD local_10;
  DWORD local_c;
  
  bVar1 = false;
  if (param_1 == (DWORD *)0x2) {
    puVar7 = &DAT_004d9cc4;
    pcVar6 = DAT_004d9cc4;
LAB_0046d7a9:
    bVar1 = true;
    crt_lock(1);
    pDVar2 = param_1;
  }
  else {
    if (((param_1 != (DWORD *)0x4) && (param_1 != (DWORD *)0x8)) && (param_1 != (DWORD *)0xb)) {
      if (param_1 == (DWORD *)0xf) {
        puVar7 = &DAT_004d9cd0;
        pcVar6 = DAT_004d9cd0;
      }
      else if (param_1 == (DWORD *)0x15) {
        puVar7 = &DAT_004d9cc8;
        pcVar6 = DAT_004d9cc8;
      }
      else {
        if (param_1 != (DWORD *)0x16) {
          return 0xffffffff;
        }
        puVar7 = &DAT_004d9ccc;
        pcVar6 = DAT_004d9ccc;
      }
      goto LAB_0046d7a9;
    }
    pDVar2 = crt_get_thread_data();
    uVar3 = FUN_0046d8a5((int)param_1,pDVar2[0x14]);
    puVar7 = (undefined4 *)(uVar3 + 8);
    pcVar6 = (code *)*puVar7;
  }
  if (pcVar6 == (code *)0x1) {
    if (!bVar1) {
      return 0;
    }
    crt_unlock(1);
    return 0;
  }
  if (pcVar6 == (code *)0x0) {
    if (bVar1) {
      crt_unlock(1);
    }
                    /* WARNING: Subroutine does not return */
    __exit(3);
  }
  if (((param_1 == (DWORD *)0x8) || (param_1 == (DWORD *)0xb)) || (param_1 == (DWORD *)0x4)) {
    local_c = pDVar2[0x15];
    pDVar2[0x15] = 0;
    if (param_1 == (DWORD *)0x8) {
      local_10 = pDVar2[0x16];
      pDVar2[0x16] = 0x8c;
      goto LAB_0046d81d;
    }
  }
  else {
LAB_0046d81d:
    if (param_1 == (DWORD *)0x8) {
      if (DAT_0047bad8 < DAT_0047badc + DAT_0047bad8) {
        iVar4 = DAT_0047bad8 * 0xc;
        iVar5 = DAT_0047bad8;
        do {
          iVar4 = iVar4 + 0xc;
          *(undefined4 *)((pDVar2[0x14] - 4) + iVar4) = 0;
          iVar5 = iVar5 + 1;
        } while (iVar5 < DAT_0047badc + DAT_0047bad8);
      }
      goto LAB_0046d85b;
    }
  }
  *puVar7 = 0;
LAB_0046d85b:
  if (bVar1) {
    crt_unlock(1);
  }
  if (param_1 == (DWORD *)0x8) {
    (*pcVar6)(8,pDVar2[0x16]);
  }
  else {
    (*pcVar6)(param_1);
    if ((param_1 != (DWORD *)0xb) && (param_1 != (DWORD *)0x4)) {
      return 0;
    }
  }
  pDVar2[0x15] = local_c;
  if (param_1 == (DWORD *)0x8) {
    pDVar2[0x16] = local_10;
  }
  return 0;
}



/* FUN_0046d8a5 @ 0046d8a5 */

uint __cdecl FUN_0046d8a5(int param_1,uint param_2)

{
  int *piVar1;
  uint uVar2;
  uint uVar3;
  
  uVar2 = param_2;
  if (*(int *)(param_2 + 4) != param_1) {
    uVar3 = param_2;
    do {
      uVar2 = uVar3 + 0xc;
      if (param_2 + DAT_0047bae4 * 0xc <= uVar2) break;
      piVar1 = (int *)(uVar3 + 0x10);
      uVar3 = uVar2;
    } while (*piVar1 != param_1);
  }
  if ((param_2 + DAT_0047bae4 * 0xc <= uVar2) || (*(int *)(uVar2 + 4) != param_1)) {
    uVar2 = 0;
  }
  return uVar2;
}



/* FUN_0046d8e2 @ 0046d8e2 */

undefined4 __cdecl FUN_0046d8e2(uint param_1,uint param_2,uint *param_3)

{
  uint uVar1;
  undefined4 uVar2;
  
  uVar2 = 0;
  uVar1 = param_1 + param_2;
  if ((uVar1 < param_1) || (uVar1 < param_2)) {
    uVar2 = 1;
  }
  *param_3 = uVar1;
  return uVar2;
}



/* ___add_12 @ 0046d903 */

/* Library Function - Single Match
    ___add_12
   
   Library: Visual Studio 2003 Release */

void __cdecl ___add_12(uint *param_1,uint *param_2)

{
  int iVar1;
  
  iVar1 = FUN_0046d8e2(*param_1,*param_2,param_1);
  if (iVar1 != 0) {
    iVar1 = FUN_0046d8e2(param_1[1],1,param_1 + 1);
    if (iVar1 != 0) {
      param_1[2] = param_1[2] + 1;
    }
  }
  iVar1 = FUN_0046d8e2(param_1[1],param_2[1],param_1 + 1);
  if (iVar1 != 0) {
    param_1[2] = param_1[2] + 1;
  }
  FUN_0046d8e2(param_1[2],param_2[2],param_1 + 2);
  return;
}



/* FUN_0046d961 @ 0046d961 */

void __cdecl FUN_0046d961(uint *param_1)

{
  uint uVar1;
  uint uVar2;
  
  uVar1 = *param_1;
  uVar2 = param_1[1];
  *param_1 = uVar1 * 2;
  param_1[1] = uVar2 * 2 | uVar1 >> 0x1f;
  param_1[2] = param_1[2] << 1 | uVar2 >> 0x1f;
  return;
}



/* FUN_0046d98f @ 0046d98f */

void __cdecl FUN_0046d98f(uint *param_1)

{
  uint uVar1;
  
  uVar1 = param_1[1];
  param_1[1] = uVar1 >> 1 | param_1[2] << 0x1f;
  param_1[2] = param_1[2] >> 1;
  *param_1 = *param_1 >> 1 | uVar1 << 0x1f;
  return;
}



/* FUN_0046d9bc @ 0046d9bc */

void __cdecl FUN_0046d9bc(char *param_1,int param_2,uint *param_3)

{
  uint *puVar1;
  uint local_14;
  uint local_10;
  uint local_c;
  int local_8;
  
  puVar1 = param_3;
  local_8 = 0x404e;
  *param_3 = 0;
  param_3[1] = 0;
  param_3[2] = 0;
  if (param_2 != 0) {
    param_3 = (uint *)param_2;
    do {
      local_14 = *puVar1;
      local_10 = puVar1[1];
      local_c = puVar1[2];
      FUN_0046d961(puVar1);
      FUN_0046d961(puVar1);
      ___add_12(puVar1,&local_14);
      FUN_0046d961(puVar1);
      local_10 = 0;
      local_c = 0;
      local_14 = (uint)*param_1;
      ___add_12(puVar1,&local_14);
      param_1 = param_1 + 1;
      param_3 = (uint *)((int)param_3 + -1);
    } while (param_3 != (uint *)0x0);
  }
  while (puVar1[2] == 0) {
    puVar1[2] = puVar1[1] >> 0x10;
    local_8 = local_8 + 0xfff0;
    puVar1[1] = *puVar1 >> 0x10 | puVar1[1] << 0x10;
    *puVar1 = *puVar1 << 0x10;
  }
  while ((puVar1[2] & 0x8000) == 0) {
    FUN_0046d961(puVar1);
    local_8 = local_8 + 0xffff;
  }
  *(undefined2 *)((int)puVar1 + 10) = (undefined2)local_8;
  return;
}



/* FUN_0046da83 @ 0046da83 */

undefined4 __cdecl
FUN_0046da83(uint param_1,uint param_2,uint param_3,int param_4,byte param_5,short *param_6)

{
  short *psVar1;
  uint uVar2;
  short *psVar3;
  char cVar4;
  uint uVar5;
  short *psVar6;
  short *psVar7;
  short sVar8;
  int iVar9;
  int iVar10;
  char *pcVar11;
  undefined1 local_20;
  undefined1 local_1f;
  undefined1 local_1e;
  undefined1 local_1d;
  undefined1 local_1c;
  undefined1 local_1b;
  undefined1 local_1a;
  undefined1 local_19;
  undefined1 local_18;
  undefined1 local_17;
  undefined1 local_16;
  undefined1 local_15;
  undefined2 local_14;
  undefined4 local_12;
  undefined4 local_e;
  undefined1 local_a;
  char cStack_9;
  undefined4 local_8;
  
  psVar3 = param_6;
  uVar5 = param_3 & 0x7fff;
  local_20 = 0xcc;
  local_1f = 0xcc;
  local_1e = 0xcc;
  local_1d = 0xcc;
  local_1c = 0xcc;
  local_1b = 0xcc;
  local_1a = 0xcc;
  local_19 = 0xcc;
  local_18 = 0xcc;
  local_17 = 0xcc;
  local_16 = 0xfb;
  local_15 = 0x3f;
  local_8 = 1;
  if ((param_3 & 0x8000) == 0) {
    *(undefined1 *)(param_6 + 1) = 0x20;
  }
  else {
    *(undefined1 *)(param_6 + 1) = 0x2d;
  }
  if ((((short)uVar5 != 0) || (param_2 != 0)) || (param_1 != 0)) {
    if ((short)uVar5 == 0x7fff) {
      *param_6 = 1;
      if (((param_2 == 0x80000000) && (param_1 == 0)) || ((param_2 & 0x40000000) != 0)) {
        if (((param_3 & 0x8000) == 0) || (param_2 != 0xc0000000)) {
          if ((param_2 != 0x80000000) || (param_1 != 0)) goto LAB_0046db78;
          pcVar11 = "1#INF";
        }
        else {
          if (param_1 != 0) {
LAB_0046db78:
            pcVar11 = "1#QNAN";
            goto LAB_0046db7d;
          }
          pcVar11 = "1#IND";
        }
        crt_strcpy((char *)(param_6 + 2),pcVar11);
        *(undefined1 *)((int)psVar3 + 3) = 5;
      }
      else {
        pcVar11 = "1#SNAN";
LAB_0046db7d:
        crt_strcpy((char *)(param_6 + 2),pcVar11);
        *(undefined1 *)((int)psVar3 + 3) = 6;
      }
      return 0;
    }
    local_14 = 0;
    local_a = (undefined1)uVar5;
    cStack_9 = (char)(uVar5 >> 8);
    sVar8 = (short)(((uVar5 >> 8) + (param_2 >> 0x18) * 2) * 0x4d + -0x134312f4 + uVar5 * 0x4d10 >>
                   0x10);
    local_e = param_2;
    local_12 = param_1;
    FUN_0046e05b((int *)&local_14,-(int)sVar8,1);
    if (0x3ffe < CONCAT11(cStack_9,local_a)) {
      sVar8 = sVar8 + 1;
      FUN_0046de3b((int *)&local_14,(int *)&local_20);
    }
    *psVar3 = sVar8;
    iVar10 = param_4;
    if (((param_5 & 1) == 0) || (iVar10 = param_4 + sVar8, 0 < param_4 + sVar8)) {
      if (0x15 < iVar10) {
        iVar10 = 0x15;
      }
      iVar9 = CONCAT11(cStack_9,local_a) - 0x3ffe;
      local_a = 0;
      cStack_9 = '\0';
      param_6 = (short *)0x8;
      do {
        FUN_0046d961((uint *)&local_14);
        param_6 = (short *)((int)param_6 + -1);
      } while (param_6 != (short *)0x0);
      if (iVar9 < 0) {
        param_6 = (short *)0x0;
        for (uVar5 = -iVar9 & 0xff; uVar5 != 0; uVar5 = uVar5 - 1) {
          FUN_0046d98f((uint *)&local_14);
        }
      }
      param_4 = iVar10 + 1;
      psVar6 = psVar3 + 2;
      param_6 = psVar6;
      uVar5 = local_12;
      uVar2 = local_e;
      if (0 < param_4) {
        do {
          local_e._2_2_ = (undefined2)(uVar2 >> 0x10);
          local_e._0_2_ = (undefined2)uVar2;
          local_12._2_2_ = (undefined2)(uVar5 >> 0x10);
          local_12._0_2_ = (undefined2)uVar5;
          param_1 = CONCAT22((undefined2)local_12,local_14);
          param_2 = CONCAT22((undefined2)local_e,local_12._2_2_);
          param_3 = CONCAT13(cStack_9,CONCAT12(local_a,local_e._2_2_));
          local_12 = uVar5;
          local_e = uVar2;
          FUN_0046d961((uint *)&local_14);
          FUN_0046d961((uint *)&local_14);
          ___add_12((uint *)&local_14,&param_1);
          FUN_0046d961((uint *)&local_14);
          cVar4 = cStack_9;
          cStack_9 = '\0';
          psVar6 = (short *)((int)param_6 + 1);
          param_4 = param_4 + -1;
          *(char *)param_6 = cVar4 + '0';
          param_6 = psVar6;
          uVar5 = local_12;
          uVar2 = local_e;
        } while (param_4 != 0);
      }
      psVar7 = psVar6 + -1;
      psVar1 = psVar3 + 2;
      if ('4' < *(char *)((int)psVar6 + -1)) {
        for (; psVar1 <= psVar7; psVar7 = (short *)((int)psVar7 + -1)) {
          if ((char)*psVar7 != '9') {
            if (psVar1 <= psVar7) goto LAB_0046dcd5;
            break;
          }
          *(char *)psVar7 = '0';
        }
        psVar7 = (short *)((int)psVar7 + 1);
        *psVar3 = *psVar3 + 1;
LAB_0046dcd5:
        *(char *)psVar7 = (char)*psVar7 + '\x01';
LAB_0046dcd7:
        cVar4 = ((char)psVar7 - (char)psVar3) + -3;
        *(char *)((int)psVar3 + 3) = cVar4;
        *(undefined1 *)(cVar4 + 4 + (int)psVar3) = 0;
        return local_8;
      }
      for (; psVar1 <= psVar7; psVar7 = (short *)((int)psVar7 + -1)) {
        if ((char)*psVar7 != '0') {
          if (psVar1 <= psVar7) goto LAB_0046dcd7;
          break;
        }
      }
      *psVar3 = 0;
      *(undefined1 *)(psVar3 + 1) = 0x20;
      *(undefined1 *)((int)psVar3 + 3) = 1;
      *(char *)psVar1 = '0';
      goto LAB_0046dd0d;
    }
  }
  *psVar3 = 0;
  *(undefined1 *)(psVar3 + 1) = 0x20;
  *(undefined1 *)((int)psVar3 + 3) = 1;
  *(undefined1 *)(psVar3 + 2) = 0x30;
LAB_0046dd0d:
  *(undefined1 *)((int)psVar3 + 5) = 0;
  return 1;
}



/* crt_chsize @ 0046dd16 */

/* resize file (truncate/extend via lseek + SetEndOfFile/zero fill) */

int __cdecl crt_chsize(int fd,int size)

{
  long offset;
  long lVar1;
  int iVar2;
  uint count;
  int iVar3;
  uint *puVar4;
  int *piVar5;
  void *hFile;
  WINBOOL WVar6;
  DWORD DVar7;
  int iVar8;
  uint uVar9;
  char local_1008 [4064];
  undefined4 uStackY_28;
  
  crt_chkstk();
  iVar8 = 0;
  offset = crt_lseek_nolock(fd,0,1);
  if ((offset == -1) || (lVar1 = crt_lseek_nolock(fd,0,2), lVar1 == -1)) {
    iVar8 = -1;
  }
  else {
    uVar9 = size - lVar1;
    if ((int)uVar9 < 1) {
      if ((int)uVar9 < 0) {
        crt_lseek_nolock(fd,size,0);
        hFile = crt_get_osfhandle(fd);
        WVar6 = SetEndOfFile(hFile);
        iVar8 = (WVar6 != 0) - 1;
        if (iVar8 == -1) {
          piVar5 = crt_errno_ptr();
          *piVar5 = 0xd;
          DVar7 = GetLastError();
          puVar4 = crt_doserrno_ptr();
          *puVar4 = DVar7;
        }
      }
    }
    else {
      _memset(local_1008,0,0x1000);
      uStackY_28 = 0x46dd83;
      iVar2 = FUN_0046e261(fd,0x8000);
      do {
        count = 0x1000;
        if ((int)uVar9 < 0x1000) {
          count = uVar9;
        }
        iVar3 = crt_write_nolock(fd,local_1008,count);
        if (iVar3 == -1) {
          puVar4 = crt_doserrno_ptr();
          if (*puVar4 == 5) {
            piVar5 = crt_errno_ptr();
            *piVar5 = 0xd;
          }
          iVar8 = -1;
          break;
        }
        uVar9 = uVar9 - iVar3;
      } while (0 < (int)uVar9);
      FUN_0046e261(fd,iVar2);
    }
    crt_lseek_nolock(fd,offset,0);
  }
  return iVar8;
}



/* FUN_0046de3b @ 0046de3b */

void __cdecl FUN_0046de3b(int *param_1,int *param_2)

{
  int *piVar1;
  short sVar2;
  int iVar3;
  int *piVar4;
  int *piVar5;
  ushort uVar6;
  uint uVar7;
  int iVar8;
  ushort uVar9;
  uint uVar10;
  ushort uVar11;
  byte local_28;
  undefined1 uStack_27;
  undefined2 uStack_26;
  short local_24;
  undefined2 uStack_22;
  undefined2 local_20;
  undefined1 uStack_1e;
  byte bStack_1d;
  int *local_1c;
  int local_18;
  int local_14;
  ushort *local_10;
  ushort *local_c;
  short *local_8;
  
  piVar5 = param_2;
  piVar4 = param_1;
  local_18 = 0;
  local_28 = 0;
  uStack_27 = 0;
  uStack_26 = 0;
  local_24 = 0;
  uStack_22 = 0;
  local_20 = 0;
  uStack_1e = 0;
  bStack_1d = 0;
  uVar7 = *(ushort *)((int)param_1 + 10) & 0x7fff;
  uVar10 = *(ushort *)((int)param_2 + 10) & 0x7fff;
  uVar11 = (*(ushort *)((int)param_2 + 10) ^ *(ushort *)((int)param_1 + 10)) & 0x8000;
  uVar6 = (ushort)uVar7;
  piVar1 = (int *)(uVar10 + uVar7);
  if (((uVar6 < 0x7fff) && (uVar9 = (ushort)uVar10, uVar9 < 0x7fff)) && ((ushort)piVar1 < 0xbffe)) {
    if ((ushort)piVar1 < 0x3fc0) {
LAB_0046dede:
      piVar4[2] = 0;
      piVar4[1] = 0;
      *piVar4 = 0;
      return;
    }
    if (((uVar6 != 0) || (piVar1 = (int *)((int)piVar1 + 1), (param_1[2] & 0x7fffffffU) != 0)) ||
       ((uVar6 = 0, param_1[1] != 0 || (*param_1 != 0)))) {
      param_1 = piVar1;
      if (((uVar9 == 0) && (param_1 = (int *)((int)param_1 + 1), (param_2[2] & 0x7fffffffU) == 0))
         && ((param_2[1] == 0 && (*param_2 == 0)))) goto LAB_0046dede;
      local_14 = 0;
      local_8 = &local_24;
      param_2 = (int *)0x5;
      do {
        if (0 < (int)param_2) {
          local_c = (ushort *)(local_14 * 2 + (int)piVar4);
          local_10 = (ushort *)(piVar5 + 2);
          local_1c = param_2;
          do {
            iVar8 = FUN_0046d8e2(*(uint *)(local_8 + -2),(uint)*local_c * (uint)*local_10,
                                 (uint *)(local_8 + -2));
            if (iVar8 != 0) {
              *local_8 = *local_8 + 1;
            }
            local_c = local_c + 1;
            local_10 = local_10 + -1;
            local_1c = (int *)((int)local_1c + -1);
          } while (local_1c != (int *)0x0);
        }
        local_8 = local_8 + 1;
        local_14 = local_14 + 1;
        param_2 = (int *)((int)param_2 + -1);
      } while (0 < (int)param_2);
      param_1 = (int *)((int)param_1 + 0xc002);
      if ((short)(ushort)param_1 < 1) {
LAB_0046df92:
        param_1._0_2_ = (ushort)param_1 - 1;
        if ((short)(ushort)param_1 < 0) {
          iVar8 = -(int)(short)(ushort)param_1;
          param_1._0_2_ = (ushort)param_1 + (short)iVar8;
          do {
            if ((local_28 & 1) != 0) {
              local_18 = local_18 + 1;
            }
            FUN_0046d98f((uint *)&local_28);
            iVar8 = iVar8 + -1;
          } while (iVar8 != 0);
          if (local_18 != 0) {
            local_28 = local_28 | 1;
          }
        }
      }
      else {
        do {
          if ((bStack_1d & 0x80) != 0) break;
          FUN_0046d961((uint *)&local_28);
          param_1 = (int *)((int)param_1 + 0xffff);
        } while (0 < (short)(ushort)param_1);
        if ((short)(ushort)param_1 < 1) goto LAB_0046df92;
      }
      if ((0x8000 < CONCAT11(uStack_27,local_28)) ||
         (sVar2 = CONCAT11(bStack_1d,uStack_1e), iVar3 = CONCAT22(local_20,uStack_22),
         iVar8 = CONCAT22(local_24,uStack_26),
         (CONCAT22(uStack_26,CONCAT11(uStack_27,local_28)) & 0x1ffff) == 0x18000)) {
        if (CONCAT22(local_24,uStack_26) == -1) {
          iVar8 = 0;
          if (CONCAT22(local_20,uStack_22) == -1) {
            if (CONCAT11(bStack_1d,uStack_1e) == -1) {
              param_1._0_2_ = (ushort)param_1 + 1;
              sVar2 = -0x8000;
              iVar3 = 0;
              iVar8 = 0;
            }
            else {
              sVar2 = CONCAT11(bStack_1d,uStack_1e) + 1;
              iVar3 = 0;
              iVar8 = 0;
            }
          }
          else {
            sVar2 = CONCAT11(bStack_1d,uStack_1e);
            iVar3 = CONCAT22(local_20,uStack_22) + 1;
          }
        }
        else {
          iVar8 = CONCAT22(local_24,uStack_26) + 1;
          sVar2 = CONCAT11(bStack_1d,uStack_1e);
          iVar3 = CONCAT22(local_20,uStack_22);
        }
      }
      local_24 = (short)((uint)iVar8 >> 0x10);
      uStack_26 = (undefined2)iVar8;
      local_20 = (undefined2)((uint)iVar3 >> 0x10);
      uStack_22 = (undefined2)iVar3;
      bStack_1d = (byte)((ushort)sVar2 >> 8);
      uStack_1e = (undefined1)sVar2;
      if (0x7ffe < (ushort)param_1) goto LAB_0046e03b;
      uVar6 = (ushort)param_1 | uVar11;
      *(undefined2 *)piVar4 = uStack_26;
      *(uint *)((int)piVar4 + 2) = CONCAT22(uStack_22,local_24);
      *(uint *)((int)piVar4 + 6) = CONCAT13(bStack_1d,CONCAT12(uStack_1e,local_20));
    }
    *(ushort *)((int)piVar4 + 10) = uVar6;
  }
  else {
LAB_0046e03b:
    piVar4[1] = 0;
    *piVar4 = 0;
    piVar4[2] = (-(uint)(uVar11 != 0) & 0x80000000) + 0x7fff8000;
  }
  return;
}



/* FUN_0046e05b @ 0046e05b */

void __cdecl FUN_0046e05b(int *param_1,uint param_2,int param_3)

{
  uint uVar1;
  uint uVar2;
  undefined **ppuVar3;
  undefined **ppuVar4;
  undefined2 local_10;
  undefined4 local_e;
  undefined2 uStack_a;
  undefined *puStack_8;
  
  ppuVar3 = &PTR_s_November_0047e120;
  if (param_2 != 0) {
    if ((int)param_2 < 0) {
      param_2 = -param_2;
      ppuVar3 = (undefined **)0x47e280;
    }
    if (param_3 == 0) {
      *(undefined2 *)param_1 = 0;
    }
    while (param_2 != 0) {
      ppuVar3 = ppuVar3 + 0x15;
      uVar1 = (int)param_2 >> 3;
      uVar2 = param_2 & 7;
      param_2 = uVar1;
      if (uVar2 != 0) {
        ppuVar4 = ppuVar3 + uVar2 * 3;
        if (0x7fff < *(ushort *)(ppuVar3 + uVar2 * 3)) {
          local_10 = SUB42(*ppuVar4,0);
          local_e._0_2_ = (undefined2)((uint)*ppuVar4 >> 0x10);
          local_e._2_2_ = SUB42(ppuVar4[1],0);
          uStack_a = (undefined2)((uint)ppuVar4[1] >> 0x10);
          puStack_8 = ppuVar4[2];
          local_e = CONCAT22(local_e._2_2_,(undefined2)local_e) + -1;
          ppuVar4 = (undefined **)&local_10;
        }
        FUN_0046de3b(param_1,(int *)ppuVar4);
      }
    }
  }
  return;
}



/* FUN_0046e0d7 @ 0046e0d7 */

int __cdecl FUN_0046e0d7(uchar *param_1)

{
  int iVar1;
  size_t _MaxCount;
  size_t sVar2;
  int *piVar3;
  
  if (((DAT_004db4e8 != 0) &&
      ((DAT_004d99a0 != (int *)0x0 ||
       (((DAT_004d99a8 != 0 && (iVar1 = FUN_0046e301(), iVar1 == 0)) && (DAT_004d99a0 != (int *)0x0)
        ))))) && (piVar3 = DAT_004d99a0, param_1 != (uchar *)0x0)) {
    _MaxCount = _strlen((char *)param_1);
    for (; (char *)*piVar3 != (char *)0x0; piVar3 = piVar3 + 1) {
      sVar2 = _strlen((char *)*piVar3);
      if (((_MaxCount < sVar2) && (((uchar *)*piVar3)[_MaxCount] == '=')) &&
         (iVar1 = __mbsnbicoll((uchar *)*piVar3,param_1,_MaxCount), iVar1 == 0)) {
        return *piVar3 + 1 + _MaxCount;
      }
    }
  }
  return 0;
}



/* FUN_0046e160 @ 0046e160 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

undefined4 __cdecl FUN_0046e160(byte *param_1,char *param_2,void *param_3)

{
  char cVar1;
  int iVar2;
  byte bVar3;
  ushort uVar4;
  uint uVar5;
  void *locale;
  undefined4 uVar6;
  void *this;
  void *locale_00;
  bool bVar7;
  
  iVar2 = _DAT_004da3b0;
  uVar6 = 0;
  if (param_3 != (void *)0x0) {
    if (DAT_004d9a4c == 0) {
      do {
        bVar3 = *param_1;
        cVar1 = *param_2;
        uVar4 = CONCAT11(bVar3,cVar1);
        if (bVar3 == 0) break;
        uVar4 = CONCAT11(bVar3,cVar1);
        uVar5 = (uint)uVar4;
        if (cVar1 == '\0') break;
        param_1 = param_1 + 1;
        param_2 = param_2 + 1;
        if ((0x40 < bVar3) && (bVar3 < 0x5b)) {
          uVar5 = (uint)CONCAT11(bVar3 + 0x20,cVar1);
        }
        uVar4 = (ushort)uVar5;
        bVar3 = (byte)uVar5;
        if ((0x40 < bVar3) && (bVar3 < 0x5b)) {
          uVar4 = (ushort)CONCAT31((int3)(uVar5 >> 8),bVar3 + 0x20);
        }
        bVar3 = (byte)(uVar4 >> 8);
        bVar7 = bVar3 < (byte)uVar4;
        if (bVar3 != (byte)uVar4) goto LAB_0046e1bf;
        param_3 = (void *)((int)param_3 + -1);
      } while (param_3 != (void *)0x0);
      uVar6 = 0;
      bVar3 = (byte)(uVar4 >> 8);
      bVar7 = bVar3 < (byte)uVar4;
      if (bVar3 != (byte)uVar4) {
LAB_0046e1bf:
        uVar6 = 0xffffffff;
        if (!bVar7) {
          uVar6 = 1;
        }
      }
    }
    else {
      LOCK();
      _DAT_004da3b0 = _DAT_004da3b0 + 1;
      UNLOCK();
      bVar7 = 0 < DAT_004da3ac;
      if (bVar7) {
        LOCK();
        UNLOCK();
        _DAT_004da3b0 = iVar2;
        crt_lock(0x13);
      }
      uVar5 = (uint)bVar7;
      locale = (void *)0x0;
      locale_00 = (void *)0x0;
      do {
        locale = (void *)CONCAT31((int3)((uint)locale >> 8),*param_1);
        locale_00 = (void *)CONCAT31((int3)((uint)locale_00 >> 8),*param_2);
        if ((locale == (void *)0x0) || (locale_00 == (void *)0x0)) break;
        param_1 = param_1 + 1;
        param_2 = param_2 + 1;
        locale_00 = (void *)crt_tolower_l(param_3,locale_00,(int)locale);
        locale = (void *)crt_tolower_l(this,locale,(int)param_3);
        bVar7 = locale < locale_00;
        if (locale != locale_00) goto LAB_0046e235;
        param_3 = (void *)((int)param_3 + -1);
      } while (param_3 != (void *)0x0);
      uVar6 = 0;
      bVar7 = locale < locale_00;
      if (locale != locale_00) {
LAB_0046e235:
        uVar6 = 0xffffffff;
        if (!bVar7) {
          uVar6 = 1;
        }
      }
      if (uVar5 == 0) {
        LOCK();
        _DAT_004da3b0 = _DAT_004da3b0 + -1;
        UNLOCK();
      }
      else {
        crt_unlock(0x13);
      }
    }
  }
  return uVar6;
}



/* FUN_0046e261 @ 0046e261 */

int __cdecl FUN_0046e261(uint param_1,int param_2)

{
  byte bVar1;
  int *piVar2;
  byte bVar3;
  
  bVar1 = *(byte *)((&DAT_004da3c0)[(int)param_1 >> 5] + 4 + (param_1 & 0x1f) * 0x24);
  if (param_2 == 0x8000) {
    bVar3 = bVar1 & 0x7f;
  }
  else {
    if (param_2 != 0x4000) {
      piVar2 = crt_errno_ptr();
      *piVar2 = 0x16;
      return -1;
    }
    bVar3 = bVar1 | 0x80;
  }
  *(byte *)((&DAT_004da3c0)[(int)param_1 >> 5] + 4 + (param_1 & 0x1f) * 0x24) = bVar3;
  return (-(uint)((bVar1 & 0x80) != 0) & 0xffffc000) + 0x8000;
}



/* __mbsnbicoll @ 0046e2c2 */

/* Library Function - Single Match
    __mbsnbicoll
   
   Library: Visual Studio 2003 Release */

int __cdecl __mbsnbicoll(uchar *_Str1,uchar *_Str2,size_t _MaxCount)

{
  int iVar1;
  
  if (_MaxCount == 0) {
    return 0;
  }
  iVar1 = FUN_0046e36f(DAT_004da384,1,_Str1,_MaxCount,_Str2,_MaxCount,DAT_004da164);
  if (iVar1 == 0) {
    return 0x7fffffff;
  }
  return iVar1 + -2;
}



/* FUN_0046e301 @ 0046e301 */

undefined4 FUN_0046e301(void)

{
  LPCWCH lpWideCharStr;
  size_t _Size;
  uint *lpMultiByteStr;
  int iVar1;
  undefined4 *puVar2;
  
  lpWideCharStr = (LPCWCH)*DAT_004d99a8;
  puVar2 = DAT_004d99a8;
  while( true ) {
    if (lpWideCharStr == (LPCWCH)0x0) {
      return 0;
    }
    _Size = WideCharToMultiByte(1,0,lpWideCharStr,-1,(LPSTR)0x0,0,(LPCCH)0x0,(LPBOOL)0x0);
    if (((_Size == 0) || (lpMultiByteStr = _malloc(_Size), lpMultiByteStr == (uint *)0x0)) ||
       (iVar1 = WideCharToMultiByte(1,0,(LPCWCH)*puVar2,-1,(LPSTR)lpMultiByteStr,_Size,(LPCCH)0x0,
                                    (LPBOOL)0x0), iVar1 == 0)) break;
    FUN_0046e617(lpMultiByteStr,0);
    lpWideCharStr = (LPCWCH)puVar2[1];
    puVar2 = puVar2 + 1;
  }
  return 0xffffffff;
}



/* FUN_0046e36f @ 0046e36f */

int __cdecl
FUN_0046e36f(LCID param_1,DWORD param_2,byte *param_3,int param_4,byte *param_5,int param_6,
            UINT param_7)

{
  undefined1 *puVar1;
  int iVar2;
  WINBOOL WVar3;
  BYTE *pBVar4;
  int iVar5;
  _cpinfo local_40;
  undefined1 *local_2c;
  PCNZWCH local_28;
  int local_24;
  int local_20;
  undefined1 *local_1c;
  void *local_14;
  undefined1 *puStack_10;
  undefined *puStack_c;
  undefined4 local_8;
  
  local_8 = 0xffffffff;
  puStack_c = &DAT_004701b8;
  puStack_10 = &LAB_00465e70;
  local_14 = ExceptionList;
  local_1c = &stack0xffffffb0;
  ExceptionList = &local_14;
  puVar1 = &stack0xffffffb0;
  if (DAT_004d9cf4 == 0) {
    ExceptionList = &local_14;
    iVar2 = CompareStringW(0,0,L"",1,L"",1);
    if (iVar2 == 0) {
      iVar2 = CompareStringA(0,0,&DAT_004ab1a8,1,&DAT_004ab1a8,1);
      if (iVar2 == 0) {
        ExceptionList = local_14;
        return 0;
      }
      DAT_004d9cf4 = 2;
      puVar1 = local_1c;
    }
    else {
      DAT_004d9cf4 = 1;
      puVar1 = local_1c;
    }
  }
  local_1c = puVar1;
  if (0 < param_4) {
    param_4 = FUN_0046e5ec((char *)param_3,param_4);
  }
  if (0 < param_6) {
    param_6 = FUN_0046e5ec((char *)param_5,param_6);
  }
  if (DAT_004d9cf4 == 2) {
    iVar2 = CompareStringA(param_1,param_2,(PCNZCH)param_3,param_4,(PCNZCH)param_5,param_6);
    ExceptionList = local_14;
    return iVar2;
  }
  if (DAT_004d9cf4 == 1) {
    if (param_7 == 0) {
      param_7 = DAT_004d9a5c;
    }
    if ((param_4 == 0) || (param_6 == 0)) {
      if (param_4 == param_6) {
        ExceptionList = local_14;
        return 2;
      }
      if (1 < param_6) {
        ExceptionList = local_14;
        return 1;
      }
      if (1 < param_4) {
        ExceptionList = local_14;
        return 3;
      }
      WVar3 = GetCPInfo(param_7,&local_40);
      if (WVar3 == 0) {
        ExceptionList = local_14;
        return 0;
      }
      if (0 < param_4) {
        if (local_40.MaxCharSize < 2) {
          ExceptionList = local_14;
          return 3;
        }
        pBVar4 = local_40.LeadByte;
        while( true ) {
          if (local_40.LeadByte[0] == 0) {
            ExceptionList = local_14;
            return 3;
          }
          if (pBVar4[1] == 0) break;
          if ((*pBVar4 <= *param_3) && (*param_3 <= pBVar4[1])) {
            ExceptionList = local_14;
            return 2;
          }
          pBVar4 = pBVar4 + 2;
          local_40.LeadByte[0] = *pBVar4;
        }
        ExceptionList = local_14;
        return 3;
      }
      if (0 < param_6) {
        if (local_40.MaxCharSize < 2) {
          ExceptionList = local_14;
          return 1;
        }
        pBVar4 = local_40.LeadByte;
        while( true ) {
          if (local_40.LeadByte[0] == 0) {
            ExceptionList = local_14;
            return 1;
          }
          if (pBVar4[1] == 0) break;
          if ((*pBVar4 <= *param_5) && (*param_5 <= pBVar4[1])) {
            ExceptionList = local_14;
            return 2;
          }
          pBVar4 = pBVar4 + 2;
          local_40.LeadByte[0] = *pBVar4;
        }
        ExceptionList = local_14;
        return 1;
      }
    }
    local_20 = MultiByteToWideChar(param_7,9,(LPCCH)param_3,param_4,(LPWSTR)0x0,0);
    if (local_20 != 0) {
      local_8 = 0;
      crt_chkstk();
      local_8 = 0xffffffff;
      if ((&stack0x00000000 != (undefined1 *)0x50) &&
         (local_28 = (PCNZWCH)&stack0xffffffb0, local_1c = &stack0xffffffb0,
         iVar2 = MultiByteToWideChar(param_7,1,(LPCCH)param_3,param_4,(LPWSTR)&stack0xffffffb0,
                                     local_20), iVar2 != 0)) {
        iVar2 = MultiByteToWideChar(param_7,9,(LPCCH)param_5,param_6,(LPWSTR)0x0,0);
        if (iVar2 != 0) {
          local_8 = 1;
          local_24 = iVar2;
          crt_chkstk();
          local_8 = 0xffffffff;
          if ((&stack0x00000000 != (undefined1 *)0x50) &&
             (local_2c = &stack0xffffffb0, local_1c = &stack0xffffffb0,
             iVar5 = MultiByteToWideChar(param_7,1,(LPCCH)param_5,param_6,(LPWSTR)&stack0xffffffb0,
                                         iVar2), iVar5 != 0)) {
            iVar2 = CompareStringW(param_1,param_2,local_28,local_20,(PCNZWCH)&stack0xffffffb0,iVar2
                                  );
            ExceptionList = local_14;
            return iVar2;
          }
        }
      }
    }
  }
  ExceptionList = local_14;
  return 0;
}



/* FUN_0046e5ec @ 0046e5ec */

int __cdecl FUN_0046e5ec(char *param_1,int param_2)

{
  char *pcVar1;
  int iVar2;
  
  iVar2 = param_2;
  for (pcVar1 = param_1; (iVar2 != 0 && (iVar2 = iVar2 + -1, *pcVar1 != '\0')); pcVar1 = pcVar1 + 1)
  {
  }
  if (*pcVar1 != '\0') {
    return param_2;
  }
  return (int)pcVar1 - (int)param_1;
}



/* FUN_0046e617 @ 0046e617 */

undefined4 __cdecl FUN_0046e617(uint *param_1,int param_2)

{
  uint *puVar1;
  int iVar2;
  int *piVar3;
  size_t sVar4;
  char *dst;
  byte *pbVar5;
  int *piVar6;
  bool bVar7;
  
  if (param_1 == (uint *)0x0) {
    return 0xffffffff;
  }
  puVar1 = (uint *)FUN_0046e85d((byte *)param_1,0x3d);
  if (puVar1 == (uint *)0x0) {
    return 0xffffffff;
  }
  if (param_1 == puVar1) {
    return 0xffffffff;
  }
  bVar7 = *(byte *)((int)puVar1 + 1) == 0;
  if (DAT_004d99a0 == DAT_004d99a4) {
    DAT_004d99a0 = FUN_0046e7f6(DAT_004d99a0);
  }
  if (DAT_004d99a0 == (int *)0x0) {
    if ((param_2 == 0) || (DAT_004d99a8 == (undefined4 *)0x0)) {
      if (bVar7) {
        return 0;
      }
      DAT_004d99a0 = _malloc(4);
      if (DAT_004d99a0 == (int *)0x0) {
        return 0xffffffff;
      }
      *DAT_004d99a0 = 0;
      if (DAT_004d99a8 == (undefined4 *)0x0) {
        DAT_004d99a8 = _malloc(4);
        if (DAT_004d99a8 == (undefined4 *)0x0) {
          return 0xffffffff;
        }
        *DAT_004d99a8 = 0;
      }
    }
    else {
      iVar2 = FUN_0046e301();
      if (iVar2 != 0) {
        return 0xffffffff;
      }
    }
  }
  piVar3 = DAT_004d99a0;
  iVar2 = FUN_0046e79e((uchar *)param_1,(int)puVar1 - (int)param_1);
  if ((iVar2 < 0) || (*piVar3 == 0)) {
    if (bVar7) {
      return 0;
    }
    if (iVar2 < 0) {
      iVar2 = -iVar2;
    }
    piVar3 = crt_realloc(piVar3,iVar2 * 4 + 8);
    if (piVar3 == (int *)0x0) {
      return 0xffffffff;
    }
    piVar3[iVar2] = (int)param_1;
    piVar3[iVar2 + 1] = 0;
  }
  else {
    if (!bVar7) {
      piVar3[iVar2] = (int)param_1;
      goto LAB_0046e74b;
    }
    piVar6 = piVar3 + iVar2;
    crt_free_base((void *)piVar3[iVar2]);
    for (; *piVar6 != 0; piVar6 = piVar6 + 1) {
      iVar2 = iVar2 + 1;
      *piVar6 = piVar6[1];
    }
    piVar3 = crt_realloc(piVar3,iVar2 << 2);
    if (piVar3 == (int *)0x0) goto LAB_0046e74b;
  }
  DAT_004d99a0 = piVar3;
LAB_0046e74b:
  if (param_2 != 0) {
    sVar4 = _strlen((char *)param_1);
    dst = _malloc(sVar4 + 2);
    if (dst != (char *)0x0) {
      crt_strcpy(dst,(char *)param_1);
      pbVar5 = (byte *)(((int)dst - (int)param_1) + (int)puVar1);
      *pbVar5 = 0;
      SetEnvironmentVariableA(dst,(LPCSTR)(~-(uint)bVar7 & (uint)(pbVar5 + 1)));
      crt_free_base(dst);
    }
  }
  return 0;
}



/* FUN_0046e79e @ 0046e79e */

int __cdecl FUN_0046e79e(uchar *param_1,size_t param_2)

{
  uchar *_Str2;
  int iVar1;
  int *piVar2;
  
  _Str2 = (uchar *)*DAT_004d99a0;
  piVar2 = DAT_004d99a0;
  while( true ) {
    if (_Str2 == (uchar *)0x0) {
      return -((int)piVar2 - (int)DAT_004d99a0 >> 2);
    }
    iVar1 = __mbsnbicoll(param_1,_Str2,param_2);
    if ((iVar1 == 0) &&
       ((*(char *)(*piVar2 + param_2) == '=' || (*(char *)(*piVar2 + param_2) == '\0')))) break;
    _Str2 = (uchar *)piVar2[1];
    piVar2 = piVar2 + 1;
  }
  return (int)piVar2 - (int)DAT_004d99a0 >> 2;
}



/* FUN_0046e7f6 @ 0046e7f6 */

undefined4 * __cdecl FUN_0046e7f6(int *param_1)

{
  int iVar1;
  int *piVar2;
  undefined4 *puVar3;
  char *pcVar4;
  int iVar5;
  undefined4 *puVar6;
  
  iVar5 = 0;
  if (param_1 != (int *)0x0) {
    iVar1 = *param_1;
    piVar2 = param_1;
    while (iVar1 != 0) {
      piVar2 = piVar2 + 1;
      iVar5 = iVar5 + 1;
      iVar1 = *piVar2;
    }
    puVar3 = _malloc(iVar5 * 4 + 4);
    if (puVar3 == (undefined4 *)0x0) {
      __amsg_exit(9);
    }
    pcVar4 = (char *)*param_1;
    puVar6 = puVar3;
    while (pcVar4 != (char *)0x0) {
      param_1 = param_1 + 1;
      pcVar4 = strdup_malloc(pcVar4);
      *puVar6 = pcVar4;
      puVar6 = puVar6 + 1;
      pcVar4 = (char *)*param_1;
    }
    *puVar6 = 0;
    return puVar3;
  }
  return (undefined4 *)0x0;
}



/* FUN_0046e85d @ 0046e85d */

byte * __cdecl FUN_0046e85d(byte *param_1,uint param_2)

{
  byte bVar1;
  byte *pbVar2;
  uint uVar3;
  
  if (DAT_004da17c == 0) {
    pbVar2 = (byte *)_strchr((char *)param_1,param_2);
  }
  else {
    crt_lock(0x19);
    while( true ) {
      bVar1 = *param_1;
      uVar3 = (uint)bVar1;
      if (bVar1 == 0) break;
      if ((*(byte *)((int)&DAT_004da280 + uVar3 + 1) & 4) == 0) {
        pbVar2 = param_1;
        if (param_2 == uVar3) break;
      }
      else {
        pbVar2 = param_1 + 1;
        if (param_1[1] == 0) {
          crt_unlock(0x19);
          return (byte *)0x0;
        }
        if (param_2 == CONCAT11(bVar1,param_1[1])) {
          crt_unlock(0x19);
          return param_1;
        }
      }
      param_1 = pbVar2 + 1;
    }
    crt_unlock(0x19);
    pbVar2 = (byte *)(~-(uint)(param_2 != uVar3) & (uint)param_1);
  }
  return pbVar2;
}



/* strdup_malloc @ 0046e8f4 */

/* malloc+copy helper */

char * __cdecl strdup_malloc(char *src)

{
  size_t sVar1;
  char *pcVar2;
  
  if (src != (char *)0x0) {
    sVar1 = _strlen(src);
    pcVar2 = _malloc(sVar1 + 1);
    if (pcVar2 != (char *)0x0) {
      pcVar2 = crt_strcpy(pcVar2,src);
      return pcVar2;
    }
  }
  return (char *)0x0;
}



